import{r as a,a as j,j as e}from"./index-DAZp-alT.js";import{B as w}from"./BlogsContainer-CLK91ToN.js";import{b as N}from"./blogApi-D1IxteyL.js";import{P as b}from"./PostLoader-CdHFNIUK.js";import"./react-DJG_os-6.js";import"./firebase-CdfKHYRN.js";import"./gsap-Brfk6Bdo.js";import"./x-button-DkK3Y9wF.js";function T(){const[v,h]=a.useState([]),{category:t}=j(),[x,g]=a.useState(!0),[y,l]=a.useState([]),[B,r]=a.useState(null);return a.useEffect(()=>{(async()=>{g(!0),r(!1);try{const i=await N();console.log("refresh",t),console.log("data",i);const m=[...i].sort((s,o)=>{var c,u,d,p;if(typeof s.likes=="number"&&typeof o.likes=="number")return(o.likes||0)-(s.likes||0);const n=((u=(c=s.datePosted)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date(0);return(((p=(d=o.datePosted)==null?void 0:d.toDate)==null?void 0:p.call(d))||new Date(0))-n});if(h(m),t){const s=t.trim().toLowerCase();if(s){const o=m.filter(n=>Array.isArray(n.categories)&&n.categories.some(f=>f.toLowerCase()===s));o.length>0?(l(o),r(!1)):(l([]),r(!0),console.warn(`No blogs found with category: ${s}`))}else l([]),r(!0)}else l([]),r(!0)}catch(i){console.error("Failed to fetch blogs:",i)}finally{g(!1)}})()},[t]),console.log("load",t),e.jsxs("div",{className:"display-column",style:{padding:"40px 20px"},children:[e.jsxs("div",{className:"title-container",children:[e.jsxs("div",{className:"info-container",children:[e.jsx("h1",{className:"outfit-font",children:"Blogs with category:"}),e.jsx("h1",{className:"outfit-font",children:` ${t}`})]}),e.jsx("div",{className:"line-blog"})]}),x?e.jsx("div",{style:{marginTop:"100px",marginBottom:"100px"},children:e.jsx(b,{})}):B?e.jsx("h1",{className:"outfit-font display-column",style:{textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"No blogs were found with that category"}):e.jsx("div",{style:{width:"100%"},children:e.jsx(w,{blogArray:y,nav:"singleBlog",line:!1,subTitle:` ${t}`,maxCount:100})})]})}export{T as default};
