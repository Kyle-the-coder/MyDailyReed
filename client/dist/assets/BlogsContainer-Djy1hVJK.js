import{r as i,B as T,u as U,j as t,o as z}from"./index-DOIgAUQK.js";import{P as F}from"./PostLoader-QEQ7xrlC.js";import{d as Y}from"./x-button-DkK3Y9wF.js";function b(){const d=i.useContext(T);if(!d)throw new Error("useBlogs must be used within a BlogsContext.Provider");return d}function K({isVertical:d=!1,title:B,subTitle:q,height:C,marginBottom:w,trending:j=!1,maxCount:k,nav:P,blogArray:a,del:y,line:D=!0,series:u}){const g=b(),[E,h]=i.useState([]),[S,p]=i.useState(!0),[N,x]=i.useState(!1),[o,m]=i.useState(null),$=i.useRef(null),I=U(),L=k??4;i.useEffect(()=>{p(!0);let e=(a==null?void 0:a.length)>0?a:g;if(!e||e.length===0){h([]),p(!1);return}let l=e;typeof u=="string"&&u.trim()!==""?l=e.filter(s=>s.series===u).sort((s,r)=>(s.part??0)-(r.part??0)):j?l=[...e].sort((s,r)=>{var n,c;return(((n=r.likes)==null?void 0:n.length)||0)-(((c=s.likes)==null?void 0:c.length)||0)}):l=[...e].sort((s,r)=>{var n,c,f,v;return(((c=(n=r.datePosted)==null?void 0:n.toDate)==null?void 0:c.call(n))??0)-(((v=(f=s.datePosted)==null?void 0:f.toDate)==null?void 0:v.call(f))??0)}),h(l),p(!1)},[g,a,u,j]);const R=async()=>{try{await z(o.id),h(e=>e.filter(l=>l.id!==o.id)),x(!1),m(null)}catch(e){console.error("Error deleting blog:",e)}};return t.jsxs("section",{className:"display-column",children:[t.jsxs("div",{className:"title-container",children:[t.jsx("div",{className:"info-container",children:t.jsx("h1",{className:"outfit-font",children:B})}),D&&t.jsx("div",{className:"line-blog"})]}),t.jsx("div",{ref:$,className:`blog-column-container ${d?"vertical":"horizontal"}`,children:S?t.jsx(F,{}):E.slice(0,L).map((e,l)=>t.jsxs("div",{className:"blog-info-container",style:{marginBottom:w},onClick:()=>{N||(I(`/${P}/${e.id}`),window.scrollTo({top:0}))},children:[t.jsx("img",{src:e.imgUrl,alt:e.title||"Blog image",style:{height:C}}),y&&t.jsx("img",{src:Y,alt:"Delete",style:{width:"30px",height:"30px",cursor:"pointer",zIndex:2},className:"dele-button",onClick:s=>{s.stopPropagation(),x(!0),m(e)}}),t.jsx("p",{className:"playfair-thin-font",children:e.subTitle}),t.jsxs("h3",{children:[e.title||"Untitled"," ",e.part?`Part ${e.part}`:""]}),t.jsx("p",{className:"playfair-thin-font silver-text",children:e.author||"Unknown Author"})]},e.id||l))}),N&&o&&t.jsx("div",{className:"delete-popup",children:t.jsxs("div",{className:"popup-content",children:[t.jsxs("p",{className:"outfit-font",children:["Are you sure you want to delete"," ",t.jsx("strong",{children:o.title||"this article"}),o.part&&t.jsxs("strong",{children:[" part ",o.part]}),"?"]}),t.jsxs("div",{className:"popup-buttons",children:[t.jsx("button",{onClick:R,children:"Yes"}),t.jsx("button",{onClick:()=>{x(!1),m(null)},children:"No"})]})]})})]})}export{K as B,b as u};
