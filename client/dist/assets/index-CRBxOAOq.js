(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function TO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jv={exports:{}},Uf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC;function GU(){if(eC)return Uf;eC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Uf.Fragment=e,Uf.jsx=t,Uf.jsxs=t,Uf}var tC;function KU(){return tC||(tC=1,jv.exports=GU()),jv.exports}var I=KU(),Fv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC;function WU(){if(nC)return nt;nC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function _(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,b={};function S(H,ie,pe){this.props=H,this.context=ie,this.refs=b,this.updater=pe||A}S.prototype.isReactComponent={},S.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},S.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function C(){}C.prototype=S.prototype;function L(H,ie,pe){this.props=H,this.context=ie,this.refs=b,this.updater=pe||A}var j=L.prototype=new C;j.constructor=L,T(j,S.prototype),j.isPureReactComponent=!0;var q=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function N(H,ie,pe,ae,Re,Ce){return pe=Ce.ref,{$$typeof:n,type:H,key:ie,ref:pe!==void 0?pe:null,props:Ce}}function k(H,ie){return N(H.type,ie,void 0,void 0,void 0,H.props)}function x(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function z(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(pe){return ie[pe]})}var U=/\/+/g;function B(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):ie.toString(36)}function P(){}function Ee(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(P,P):(H.status="pending",H.then(function(ie){H.status==="pending"&&(H.status="fulfilled",H.value=ie)},function(ie){H.status==="pending"&&(H.status="rejected",H.reason=ie)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function be(H,ie,pe,ae,Re){var Ce=typeof H;(Ce==="undefined"||Ce==="boolean")&&(H=null);var Ve=!1;if(H===null)Ve=!0;else switch(Ce){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(H.$$typeof){case n:case e:Ve=!0;break;case p:return Ve=H._init,be(Ve(H._payload),ie,pe,ae,Re)}}if(Ve)return Re=Re(H),Ve=ae===""?"."+B(H,0):ae,q(Re)?(pe="",Ve!=null&&(pe=Ve.replace(U,"$&/")+"/"),be(Re,ie,pe,"",function(mr){return mr})):Re!=null&&(x(Re)&&(Re=k(Re,pe+(Re.key==null||H&&H.key===Re.key?"":(""+Re.key).replace(U,"$&/")+"/")+Ve)),ie.push(Re)),1;Ve=0;var Kt=ae===""?".":ae+":";if(q(H))for(var Rt=0;Rt<H.length;Rt++)ae=H[Rt],Ce=Kt+B(ae,Rt),Ve+=be(ae,ie,pe,Ce,Re);else if(Rt=_(H),typeof Rt=="function")for(H=Rt.call(H),Rt=0;!(ae=H.next()).done;)ae=ae.value,Ce=Kt+B(ae,Rt++),Ve+=be(ae,ie,pe,Ce,Re);else if(Ce==="object"){if(typeof H.then=="function")return be(Ee(H),ie,pe,ae,Re);throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function Y(H,ie,pe){if(H==null)return H;var ae=[],Re=0;return be(H,ae,"","",function(Ce){return ie.call(pe,Ce,Re++)}),ae}function oe(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(pe){(H._status===0||H._status===-1)&&(H._status=1,H._result=pe)},function(pe){(H._status===0||H._status===-1)&&(H._status=2,H._result=pe)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var Ae=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function je(){}return nt.Children={map:Y,forEach:function(H,ie,pe){Y(H,function(){ie.apply(this,arguments)},pe)},count:function(H){var ie=0;return Y(H,function(){ie++}),ie},toArray:function(H){return Y(H,function(ie){return ie})||[]},only:function(H){if(!x(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},nt.Component=S,nt.Fragment=t,nt.Profiler=i,nt.PureComponent=L,nt.StrictMode=r,nt.Suspense=c,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,nt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return V.H.useMemoCache(H)}},nt.cache=function(H){return function(){return H.apply(null,arguments)}},nt.cloneElement=function(H,ie,pe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ae=T({},H.props),Re=H.key,Ce=void 0;if(ie!=null)for(Ve in ie.ref!==void 0&&(Ce=void 0),ie.key!==void 0&&(Re=""+ie.key),ie)!D.call(ie,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ie.ref===void 0||(ae[Ve]=ie[Ve]);var Ve=arguments.length-2;if(Ve===1)ae.children=pe;else if(1<Ve){for(var Kt=Array(Ve),Rt=0;Rt<Ve;Rt++)Kt[Rt]=arguments[Rt+2];ae.children=Kt}return N(H.type,Re,void 0,void 0,Ce,ae)},nt.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:s,_context:H},H},nt.createElement=function(H,ie,pe){var ae,Re={},Ce=null;if(ie!=null)for(ae in ie.key!==void 0&&(Ce=""+ie.key),ie)D.call(ie,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Re[ae]=ie[ae]);var Ve=arguments.length-2;if(Ve===1)Re.children=pe;else if(1<Ve){for(var Kt=Array(Ve),Rt=0;Rt<Ve;Rt++)Kt[Rt]=arguments[Rt+2];Re.children=Kt}if(H&&H.defaultProps)for(ae in Ve=H.defaultProps,Ve)Re[ae]===void 0&&(Re[ae]=Ve[ae]);return N(H,Ce,void 0,void 0,null,Re)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(H){return{$$typeof:u,render:H}},nt.isValidElement=x,nt.lazy=function(H){return{$$typeof:p,_payload:{_status:-1,_result:H},_init:oe}},nt.memo=function(H,ie){return{$$typeof:f,type:H,compare:ie===void 0?null:ie}},nt.startTransition=function(H){var ie=V.T,pe={};V.T=pe;try{var ae=H(),Re=V.S;Re!==null&&Re(pe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(je,Ae)}catch(Ce){Ae(Ce)}finally{V.T=ie}},nt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},nt.use=function(H){return V.H.use(H)},nt.useActionState=function(H,ie,pe){return V.H.useActionState(H,ie,pe)},nt.useCallback=function(H,ie){return V.H.useCallback(H,ie)},nt.useContext=function(H){return V.H.useContext(H)},nt.useDebugValue=function(){},nt.useDeferredValue=function(H,ie){return V.H.useDeferredValue(H,ie)},nt.useEffect=function(H,ie,pe){var ae=V.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(H,ie)},nt.useId=function(){return V.H.useId()},nt.useImperativeHandle=function(H,ie,pe){return V.H.useImperativeHandle(H,ie,pe)},nt.useInsertionEffect=function(H,ie){return V.H.useInsertionEffect(H,ie)},nt.useLayoutEffect=function(H,ie){return V.H.useLayoutEffect(H,ie)},nt.useMemo=function(H,ie){return V.H.useMemo(H,ie)},nt.useOptimistic=function(H,ie){return V.H.useOptimistic(H,ie)},nt.useReducer=function(H,ie,pe){return V.H.useReducer(H,ie,pe)},nt.useRef=function(H){return V.H.useRef(H)},nt.useState=function(H){return V.H.useState(H)},nt.useSyncExternalStore=function(H,ie,pe){return V.H.useSyncExternalStore(H,ie,pe)},nt.useTransition=function(){return V.H.useTransition()},nt.version="19.1.0",nt}var rC;function kE(){return rC||(rC=1,Fv.exports=WU()),Fv.exports}var K=kE();const Sr=TO(K);var Hv={exports:{}},zf={},qv={exports:{}},$v={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC;function YU(){return iC||(iC=1,function(n){function e(Y,oe){var Ae=Y.length;Y.push(oe);e:for(;0<Ae;){var je=Ae-1>>>1,H=Y[je];if(0<i(H,oe))Y[je]=oe,Y[Ae]=H,Ae=je;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var oe=Y[0],Ae=Y.pop();if(Ae!==oe){Y[0]=Ae;e:for(var je=0,H=Y.length,ie=H>>>1;je<ie;){var pe=2*(je+1)-1,ae=Y[pe],Re=pe+1,Ce=Y[Re];if(0>i(ae,Ae))Re<H&&0>i(Ce,ae)?(Y[je]=Ce,Y[Re]=Ae,je=Re):(Y[je]=ae,Y[pe]=Ae,je=pe);else if(Re<H&&0>i(Ce,Ae))Y[je]=Ce,Y[Re]=Ae,je=Re;else break e}}return oe}function i(Y,oe){var Ae=Y.sortIndex-oe.sortIndex;return Ae!==0?Ae:Y.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var c=[],f=[],p=1,g=null,_=3,A=!1,T=!1,b=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function q(Y){for(var oe=t(f);oe!==null;){if(oe.callback===null)r(f);else if(oe.startTime<=Y)r(f),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=t(f)}}function V(Y){if(b=!1,q(Y),!T)if(t(c)!==null)T=!0,D||(D=!0,B());else{var oe=t(f);oe!==null&&be(V,oe.startTime-Y)}}var D=!1,N=-1,k=5,x=-1;function z(){return S?!0:!(n.unstable_now()-x<k)}function U(){if(S=!1,D){var Y=n.unstable_now();x=Y;var oe=!0;try{e:{T=!1,b&&(b=!1,L(N),N=-1),A=!0;var Ae=_;try{t:{for(q(Y),g=t(c);g!==null&&!(g.expirationTime>Y&&z());){var je=g.callback;if(typeof je=="function"){g.callback=null,_=g.priorityLevel;var H=je(g.expirationTime<=Y);if(Y=n.unstable_now(),typeof H=="function"){g.callback=H,q(Y),oe=!0;break t}g===t(c)&&r(c),q(Y)}else r(c);g=t(c)}if(g!==null)oe=!0;else{var ie=t(f);ie!==null&&be(V,ie.startTime-Y),oe=!1}}break e}finally{g=null,_=Ae,A=!1}oe=void 0}}finally{oe?B():D=!1}}}var B;if(typeof j=="function")B=function(){j(U)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ee=P.port2;P.port1.onmessage=U,B=function(){Ee.postMessage(null)}}else B=function(){C(U,0)};function be(Y,oe){N=C(function(){Y(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var Ae=_;_=oe;try{return Y()}finally{_=Ae}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Ae=_;_=Y;try{return oe()}finally{_=Ae}},n.unstable_scheduleCallback=function(Y,oe,Ae){var je=n.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?je+Ae:je):Ae=je,Y){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Ae+H,Y={id:p++,callback:oe,priorityLevel:Y,startTime:Ae,expirationTime:H,sortIndex:-1},Ae>je?(Y.sortIndex=Ae,e(f,Y),t(c)===null&&Y===t(f)&&(b?(L(N),N=-1):b=!0,be(V,Ae-je))):(Y.sortIndex=H,e(c,Y),T||A||(T=!0,D||(D=!0,B()))),Y},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(Y){var oe=_;return function(){var Ae=_;_=oe;try{return Y.apply(this,arguments)}finally{_=Ae}}}}($v)),$v}var sC;function QU(){return sC||(sC=1,qv.exports=YU()),qv.exports}var Gv={exports:{}},Ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function XU(){if(oC)return Ar;oC=1;var n=kE();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:f,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ar.createPortal=function(c,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(c,f,null,p)},Ar.flushSync=function(c){var f=a.T,p=r.p;try{if(a.T=null,r.p=2,c)return c()}finally{a.T=f,r.p=p,r.d.f()}},Ar.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Ar.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ar.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:A}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:_,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ar.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Ar.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ar.preloadModule=function(c,f){if(typeof c=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Ar.requestFormReset=function(c){r.d.r(c)},Ar.unstable_batchedUpdates=function(c,f){return c(f)},Ar.useFormState=function(c,f,p){return a.H.useFormState(c,f,p)},Ar.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ar.version="19.1.0",Ar}var aC;function EO(){if(aC)return Gv.exports;aC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gv.exports=XU(),Gv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function JU(){if(lC)return zf;lC=1;var n=QU(),e=kE(),t=EO();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(r(188))}function c(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var h=o,d=l;;){var y=h.return;if(y===null)break;var v=y.alternate;if(v===null){if(d=y.return,d!==null){h=d;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===h)return u(y),o;if(v===d)return u(y),l;v=v.sibling}throw Error(r(188))}if(h.return!==d.return)h=y,d=v;else{for(var R=!1,O=y.child;O;){if(O===h){R=!0,h=y,d=v;break}if(O===d){R=!0,d=y,h=v;break}O=O.sibling}if(!R){for(O=v.child;O;){if(O===h){R=!0,h=v,d=y;break}if(O===d){R=!0,d=v,h=y;break}O=O.sibling}if(!R)throw Error(r(189))}}if(h.alternate!==d)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:l}function f(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=f(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),j=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function Ee(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case V:return"Suspense";case D:return"SuspenseList";case x:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case j:return(o.displayName||"Context")+".Provider";case L:return(o._context.displayName||"Context")+".Consumer";case q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case N:return l=o.displayName||null,l!==null?l:Ee(o.type)||"Memo";case k:l=o._payload,o=o._init;try{return Ee(o(l))}catch{}}return null}var be=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},je=[],H=-1;function ie(o){return{current:o}}function pe(o){0>H||(o.current=je[H],je[H]=null,H--)}function ae(o,l){H++,je[H]=o.current,o.current=l}var Re=ie(null),Ce=ie(null),Ve=ie(null),Kt=ie(null);function Rt(o,l){switch(ae(Ve,l),ae(Ce,o),ae(Re,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?xR(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=xR(l),o=kR(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}pe(Re),ae(Re,o)}function mr(){pe(Re),pe(Ce),pe(Ve)}function Ut(o){o.memoizedState!==null&&ae(Kt,o);var l=Re.current,h=kR(l,o.type);l!==h&&(ae(Ce,o),ae(Re,h))}function Nn(o){Ce.current===o&&(pe(Re),pe(Ce)),Kt.current===o&&(pe(Kt),Mf._currentValue=Ae)}var Zn=Object.prototype.hasOwnProperty,di=n.unstable_scheduleCallback,Xt=n.unstable_cancelCallback,gs=n.unstable_shouldYield,ks=n.unstable_requestPaint,on=n.unstable_now,Is=n.unstable_getCurrentPriorityLevel,zi=n.unstable_ImmediatePriority,ys=n.unstable_UserBlockingPriority,Bi=n.unstable_NormalPriority,pi=n.unstable_LowPriority,gr=n.unstable_IdlePriority,Kr=n.log,Mr=n.unstable_setDisableYieldValue,ut=null,et=null;function Mn(o){if(typeof Kr=="function"&&Mr(o),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(ut,o)}catch{}}var Jt=Math.clz32?Math.clz32:Pr,Os=Math.log,Dr=Math.LN2;function Pr(o){return o>>>=0,o===0?32:31-(Os(o)/Dr|0)|0}var Lr=256,Tn=4194304;function En(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function mi(o,l,h){var d=o.pendingLanes;if(d===0)return 0;var y=0,v=o.suspendedLanes,R=o.pingedLanes;o=o.warmLanes;var O=d&134217727;return O!==0?(d=O&~v,d!==0?y=En(d):(R&=O,R!==0?y=En(R):h||(h=O&~o,h!==0&&(y=En(h))))):(O=d&~v,O!==0?y=En(O):R!==0?y=En(R):h||(h=d&~o,h!==0&&(y=En(h)))),y===0?0:l!==0&&l!==y&&(l&v)===0&&(v=y&-y,h=l&-l,v>=h||v===32&&(h&4194048)!==0)?l:y}function yr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Ns(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var o=Lr;return Lr<<=1,(Lr&4194048)===0&&(Lr=256),o}function ji(){var o=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),o}function Yr(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function er(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ms(o,l,h,d,y,v){var R=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var O=o.entanglements,F=o.expirationTimes,te=o.hiddenUpdates;for(h=R&~h;0<h;){var le=31-Jt(h),he=1<<le;O[le]=0,F[le]=-1;var ne=te[le];if(ne!==null)for(te[le]=null,le=0;le<ne.length;le++){var re=ne[le];re!==null&&(re.lane&=-536870913)}h&=~he}d!==0&&tr(o,d,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(R&~l))}function tr(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Jt(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|h&4194090}function Ot(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var d=31-Jt(h),y=1<<d;y&l|o[d]&l&&(o[d]|=l),h&=~y}}function nr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ds(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function $(){var o=oe.p;return o!==0?o:(o=window.event,o===void 0?32:WR(o.type))}function X(o,l){var h=oe.p;try{return oe.p=o,l()}finally{oe.p=h}}var Z=Math.random().toString(36).slice(2),ce="__reactFiber$"+Z,ye="__reactProps$"+Z,Se="__reactContainer$"+Z,Ue="__reactEvents$"+Z,Ie="__reactListeners$"+Z,Ne="__reactHandles$"+Z,Le="__reactResources$"+Z,Fe="__reactMarker$"+Z;function xe(o){delete o[ce],delete o[ye],delete o[Ue],delete o[Ie],delete o[Ne]}function He(o){var l=o[ce];if(l)return l;for(var h=o.parentNode;h;){if(l=h[Se]||h[ce]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=MR(o);o!==null;){if(h=o[ce])return h;o=MR(o)}return l}o=h,h=o.parentNode}return null}function it(o){if(o=o[ce]||o[Se]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function St(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function _t(o){var l=o[Le];return l||(l=o[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ft(o){o[Fe]=!0}var _e=new Set,G={};function de(o,l){we(o,l),we(o+"Capture",l)}function we(o,l){for(G[o]=l,o=0;o<l.length;o++)_e.add(l[o])}var tt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},Ct={};function Zt(o){return Zn.call(Ct,o)?!0:Zn.call(zt,o)?!1:tt.test(o)?Ct[o]=!0:(zt[o]=!0,!1)}function Bt(o,l,h){if(Zt(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function mn(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function Pe(o,l,h,d){if(d===null)o.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+d)}}var en,_r;function Qr(o){if(en===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);en=l&&l[1]||"",_r=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+o+_r}var Ps=!1;function jt(o,l){if(!o||Ps)return"";Ps=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ne=re}Reflect.construct(o,[],he)}else{try{he.call()}catch(re){ne=re}o.call(he.prototype)}}else{try{throw Error()}catch(re){ne=re}(he=o())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),R=v[0],O=v[1];if(R&&O){var F=R.split(`
`),te=O.split(`
`);for(y=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;if(d===F.length||y===te.length)for(d=F.length-1,y=te.length-1;1<=d&&0<=y&&F[d]!==te[y];)y--;for(;1<=d&&0<=y;d--,y--)if(F[d]!==te[y]){if(d!==1||y!==1)do if(d--,y--,0>y||F[d]!==te[y]){var le=`
`+F[d].replace(" at new "," at ");return o.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",o.displayName)),le}while(1<=d&&0<=y);break}}}finally{Ps=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Qr(h):""}function Fi(o){switch(o.tag){case 26:case 27:case 5:return Qr(o.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return jt(o.type,!1);case 11:return jt(o.type.render,!1);case 1:return jt(o.type,!0);case 31:return Qr("Activity");default:return""}}function yo(o){try{var l="";do l+=Fi(o),o=o.return;while(o);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function rr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Bh(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function $_(o){var l=Bh(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),d=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,v=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(R){d=""+R,v.call(this,R)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Ju(o){o._valueTracker||(o._valueTracker=$_(o))}function jh(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),d="";return o&&(d=Bh(o)?o.checked?"true":"false":o.value),o=d,o!==h?(l.setValue(o),!0):!1}function Ol(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var G_=/[\n"\\]/g;function bn(o){return o.replace(G_,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function gi(o,l,h,d,y,v,R,O){o.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.type=R:o.removeAttribute("type"),l!=null?R==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+rr(l)):o.value!==""+rr(l)&&(o.value=""+rr(l)):R!=="submit"&&R!=="reset"||o.removeAttribute("value"),l!=null?aa(o,R,rr(l)):h!=null?aa(o,R,rr(h)):d!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+rr(O):o.removeAttribute("name")}function Nl(o,l,h,d,y,v,R,O){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),l!=null||h!=null){if(!(v!=="submit"&&v!=="reset"||l!=null))return;h=h!=null?""+rr(h):"",l=l!=null?""+rr(l):h,O||l===o.value||(o.value=l),o.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=O?o.checked:!!d,o.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.name=R)}function aa(o,l,h){l==="number"&&Ol(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function _o(o,l,h,d){if(o=o.options,l){l={};for(var y=0;y<h.length;y++)l["$"+h[y]]=!0;for(h=0;h<o.length;h++)y=l.hasOwnProperty("$"+o[h].value),o[h].selected!==y&&(o[h].selected=y),y&&d&&(o[h].defaultSelected=!0)}else{for(h=""+rr(h),l=null,y=0;y<o.length;y++){if(o[y].value===h){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Dt(o,l,h){if(l!=null&&(l=""+rr(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+rr(h):""}function Ml(o,l,h,d){if(l==null){if(d!=null){if(h!=null)throw Error(r(92));if(be(d)){if(1<d.length)throw Error(r(93));d=d[0]}h=d}h==null&&(h=""),l=h}h=rr(l),o.defaultValue=h,d=o.textContent,d===h&&d!==""&&d!==null&&(o.value=d)}function Hi(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var Dl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bp(o,l,h){var d=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,h):typeof h!="number"||h===0||Dl.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function Fh(o,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&h[y]!==d&&bp(o,y,d)}else for(var v in l)l.hasOwnProperty(v)&&bp(o,v,l[v])}function Hh(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),W_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zu(o){return W_.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var vo=null;function qi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ao=null,To=null;function qh(o){var l=it(o);if(l&&(o=l.stateNode)){var h=o[ye]||null;e:switch(o=l.stateNode,l.type){case"input":if(gi(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+bn(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var d=h[l];if(d!==o&&d.form===o.form){var y=d[ye]||null;if(!y)throw Error(r(90));gi(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<h.length;l++)d=h[l],d.form===o.form&&jh(d)}break e;case"textarea":Dt(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&_o(o,!!h.multiple,l,!1)}}}var Ls=!1;function Sp(o,l,h){if(Ls)return o(l,h);Ls=!0;try{var d=o(l);return d}finally{if(Ls=!1,(Ao!==null||To!==null)&&(ym(),Ao&&(l=Ao,o=To,To=Ao=null,qh(l),o)))for(l=0;l<o.length;l++)qh(o[l])}}function Pl(o,l){var h=o.stateNode;if(h===null)return null;var d=h[ye]||null;if(d===null)return null;h=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(_s)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{$i=!1}var Vs=null,la=null,Eo=null;function $h(){if(Eo)return Eo;var o,l=la,h=l.length,d,y="value"in Vs?Vs.value:Vs.textContent,v=y.length;for(o=0;o<h&&l[o]===y[o];o++);var R=h-o;for(d=1;d<=R&&l[h-d]===y[v-d];d++);return Eo=y.slice(o,1<d?1-d:void 0)}function Us(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function zs(){return!0}function Gh(){return!1}function Bn(o){function l(h,d,y,v,R){this._reactName=h,this._targetInst=y,this.type=d,this.nativeEvent=v,this.target=R,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(h=o[O],this[O]=h?h(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?zs:Gh,this.isPropagationStopped=Gh,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),l}var kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ec=Bn(kt),Vl=p({},kt,{view:0,detail:0}),wp=Bn(Vl),tc,nc,Bs,Ul=p({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Bs&&(Bs&&o.type==="mousemove"?(tc=o.screenX-Bs.screenX,nc=o.screenY-Bs.screenY):nc=tc=0,Bs=o),tc)},movementY:function(o){return"movementY"in o?o.movementY:nc}}),Gi=Bn(Ul),Rp=p({},Ul,{dataTransfer:0}),Y_=Bn(Rp),zl=p({},Vl,{relatedTarget:0}),rc=Bn(zl),Kh=p({},kt,{animationName:0,elapsedTime:0,pseudoElement:0}),ic=Bn(Kh),Cp=p({},kt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),sc=Bn(Cp),Q_=p({},kt,{data:0}),Wh=Bn(Q_),Bl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yh(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=kp[o])?!!l[o]:!1}function jl(){return Yh}var Ip=p({},Vl,{key:function(o){if(o.key){var l=Bl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Us(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?xp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(o){return o.type==="keypress"?Us(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Us(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),oc=Bn(Ip),Op=p({},Ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qh=Bn(Op),bo=p({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),Np=Bn(bo),Mp=p({},kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dp=Bn(Mp),Pp=p({},Ul,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ac=Bn(Pp),Vr=p({},kt,{newState:0,oldState:0}),Lp=Bn(Vr),Vp=[9,13,27,32],js=_s&&"CompositionEvent"in window,m=null;_s&&"documentMode"in document&&(m=document.documentMode);var E=_s&&"TextEvent"in window&&!m,w=_s&&(!js||m&&8<m&&11>=m),M=" ",J=!1;function se(o,l){switch(o){case"keyup":return Vp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Te(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var At=!1;function Dn(o,l){switch(o){case"compositionend":return Te(l);case"keypress":return l.which!==32?null:(J=!0,M);case"textInput":return o=l.data,o===M&&J?null:o;default:return null}}function Tt(o,l){if(At)return o==="compositionend"||!js&&se(o,l)?(o=$h(),Eo=la=Vs=null,At=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return w&&l.locale!=="ko"?null:l.data;default:return null}}var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!jn[o.type]:l==="textarea"}function So(o,l,h,d){Ao?To?To.push(d):To=[d]:Ao=d,l=bm(l,"onChange"),0<l.length&&(h=new ec("onChange","change",null,h,d),o.push({event:h,listeners:l}))}var ir=null,Fs=null;function Xh(o){bR(o,0)}function Up(o){var l=St(o);if(jh(l))return o}function qS(o,l){if(o==="change")return l}var $S=!1;if(_s){var X_;if(_s){var J_="oninput"in document;if(!J_){var GS=document.createElement("div");GS.setAttribute("oninput","return;"),J_=typeof GS.oninput=="function"}X_=J_}else X_=!1;$S=X_&&(!document.documentMode||9<document.documentMode)}function KS(){ir&&(ir.detachEvent("onpropertychange",WS),Fs=ir=null)}function WS(o){if(o.propertyName==="value"&&Up(Fs)){var l=[];So(l,Fs,o,qi(o)),Sp(Xh,l)}}function EV(o,l,h){o==="focusin"?(KS(),ir=l,Fs=h,ir.attachEvent("onpropertychange",WS)):o==="focusout"&&KS()}function bV(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Up(Fs)}function SV(o,l){if(o==="click")return Up(l)}function wV(o,l){if(o==="input"||o==="change")return Up(l)}function RV(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var yi=typeof Object.is=="function"?Object.is:RV;function Jh(o,l){if(yi(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),d=Object.keys(l);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var y=h[d];if(!Zn.call(l,y)||!yi(o[y],l[y]))return!1}return!0}function YS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function QS(o,l){var h=YS(o);o=0;for(var d;h;){if(h.nodeType===3){if(d=o+h.textContent.length,o<=l&&d>=l)return{node:h,offset:l-o};o=d}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=YS(h)}}function XS(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?XS(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function JS(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ol(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=Ol(o.document)}return l}function Z_(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var CV=_s&&"documentMode"in document&&11>=document.documentMode,lc=null,e0=null,Zh=null,t0=!1;function ZS(o,l,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;t0||lc==null||lc!==Ol(d)||(d=lc,"selectionStart"in d&&Z_(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Zh&&Jh(Zh,d)||(Zh=d,d=bm(e0,"onSelect"),0<d.length&&(l=new ec("onSelect","select",null,l,h),o.push({event:l,listeners:d}),l.target=lc)))}function Fl(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var uc={animationend:Fl("Animation","AnimationEnd"),animationiteration:Fl("Animation","AnimationIteration"),animationstart:Fl("Animation","AnimationStart"),transitionrun:Fl("Transition","TransitionRun"),transitionstart:Fl("Transition","TransitionStart"),transitioncancel:Fl("Transition","TransitionCancel"),transitionend:Fl("Transition","TransitionEnd")},n0={},ew={};_s&&(ew=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function Hl(o){if(n0[o])return n0[o];if(!uc[o])return o;var l=uc[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in ew)return n0[o]=l[h];return o}var tw=Hl("animationend"),nw=Hl("animationiteration"),rw=Hl("animationstart"),xV=Hl("transitionrun"),kV=Hl("transitionstart"),IV=Hl("transitioncancel"),iw=Hl("transitionend"),sw=new Map,r0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");r0.push("scrollEnd");function vs(o,l){sw.set(o,l),de(l,[o])}var ow=new WeakMap;function Ki(o,l){if(typeof o=="object"&&o!==null){var h=ow.get(o);return h!==void 0?h:(l={value:o,source:l,stack:yo(l)},ow.set(o,l),l)}return{value:o,source:l,stack:yo(l)}}var Wi=[],cc=0,i0=0;function zp(){for(var o=cc,l=i0=cc=0;l<o;){var h=Wi[l];Wi[l++]=null;var d=Wi[l];Wi[l++]=null;var y=Wi[l];Wi[l++]=null;var v=Wi[l];if(Wi[l++]=null,d!==null&&y!==null){var R=d.pending;R===null?y.next=y:(y.next=R.next,R.next=y),d.pending=y}v!==0&&aw(h,y,v)}}function Bp(o,l,h,d){Wi[cc++]=o,Wi[cc++]=l,Wi[cc++]=h,Wi[cc++]=d,i0|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function s0(o,l,h,d){return Bp(o,l,h,d),jp(o)}function hc(o,l){return Bp(o,null,null,l),jp(o)}function aw(o,l,h){o.lanes|=h;var d=o.alternate;d!==null&&(d.lanes|=h);for(var y=!1,v=o.return;v!==null;)v.childLanes|=h,d=v.alternate,d!==null&&(d.childLanes|=h),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&l!==null&&(y=31-Jt(h),o=v.hiddenUpdates,d=o[y],d===null?o[y]=[l]:d.push(l),l.lane=h|536870912),v):null}function jp(o){if(50<wf)throw wf=0,hv=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var fc={};function OV(o,l,h,d){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(o,l,h,d){return new OV(o,l,h,d)}function o0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function wo(o,l){var h=o.alternate;return h===null?(h=_i(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function lw(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Fp(o,l,h,d,y,v){var R=0;if(d=o,typeof o=="function")o0(o)&&(R=1);else if(typeof o=="string")R=MU(o,h,Re.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case x:return o=_i(31,h,l,y),o.elementType=x,o.lanes=v,o;case T:return ql(h.children,y,v,l);case b:R=8,y|=24;break;case S:return o=_i(12,h,l,y|2),o.elementType=S,o.lanes=v,o;case V:return o=_i(13,h,l,y),o.elementType=V,o.lanes=v,o;case D:return o=_i(19,h,l,y),o.elementType=D,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case j:R=10;break e;case L:R=9;break e;case q:R=11;break e;case N:R=14;break e;case k:R=16,d=null;break e}R=29,h=Error(r(130,o===null?"null":typeof o,"")),d=null}return l=_i(R,h,l,y),l.elementType=o,l.type=d,l.lanes=v,l}function ql(o,l,h,d){return o=_i(7,o,d,l),o.lanes=h,o}function a0(o,l,h){return o=_i(6,o,null,l),o.lanes=h,o}function l0(o,l,h){return l=_i(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var dc=[],pc=0,Hp=null,qp=0,Yi=[],Qi=0,$l=null,Ro=1,Co="";function Gl(o,l){dc[pc++]=qp,dc[pc++]=Hp,Hp=o,qp=l}function uw(o,l,h){Yi[Qi++]=Ro,Yi[Qi++]=Co,Yi[Qi++]=$l,$l=o;var d=Ro;o=Co;var y=32-Jt(d)-1;d&=~(1<<y),h+=1;var v=32-Jt(l)+y;if(30<v){var R=y-y%5;v=(d&(1<<R)-1).toString(32),d>>=R,y-=R,Ro=1<<32-Jt(l)+y|h<<y|d,Co=v+o}else Ro=1<<v|h<<y|d,Co=o}function u0(o){o.return!==null&&(Gl(o,1),uw(o,1,0))}function c0(o){for(;o===Hp;)Hp=dc[--pc],dc[pc]=null,qp=dc[--pc],dc[pc]=null;for(;o===$l;)$l=Yi[--Qi],Yi[Qi]=null,Co=Yi[--Qi],Yi[Qi]=null,Ro=Yi[--Qi],Yi[Qi]=null}var Ur=null,an=null,xt=!1,Kl=null,Hs=!1,h0=Error(r(519));function Wl(o){var l=Error(r(418,""));throw nf(Ki(l,o)),h0}function cw(o){var l=o.stateNode,h=o.type,d=o.memoizedProps;switch(l[ce]=o,l[ye]=d,h){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(h=0;h<Cf.length;h++)pt(Cf[h],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Nl(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ju(l);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Ml(l,d.value,d.defaultValue,d.children),Ju(l)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||d.suppressHydrationWarning===!0||CR(l.textContent,h)?(d.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),d.onScroll!=null&&pt("scroll",l),d.onScrollEnd!=null&&pt("scrollend",l),d.onClick!=null&&(l.onclick=Sm),l=!0):l=!1,l||Wl(o)}function hw(o){for(Ur=o.return;Ur;)switch(Ur.tag){case 5:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:Ur=Ur.return}}function ef(o){if(o!==Ur)return!1;if(!xt)return hw(o),xt=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Cv(o.type,o.memoizedProps)),h=!h),h&&an&&Wl(o),hw(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(l===0){an=Ts(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++;o=o.nextSibling}an=null}}else l===27?(l=an,Sa(o.type)?(o=Ov,Ov=null,an=o):an=l):an=Ur?Ts(o.stateNode.nextSibling):null;return!0}function tf(){an=Ur=null,xt=!1}function fw(){var o=Kl;return o!==null&&(Zr===null?Zr=o:Zr.push.apply(Zr,o),Kl=null),o}function nf(o){Kl===null?Kl=[o]:Kl.push(o)}var f0=ie(null),Yl=null,xo=null;function ua(o,l,h){ae(f0,l._currentValue),l._currentValue=h}function ko(o){o._currentValue=f0.current,pe(f0)}function d0(o,l,h){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===h)break;o=o.return}}function p0(o,l,h,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var R=y.child;v=v.firstContext;e:for(;v!==null;){var O=v;v=y;for(var F=0;F<l.length;F++)if(O.context===l[F]){v.lanes|=h,O=v.alternate,O!==null&&(O.lanes|=h),d0(v.return,h,o),d||(R=null);break e}v=O.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(r(341));R.lanes|=h,v=R.alternate,v!==null&&(v.lanes|=h),d0(R,h,o),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===o){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function rf(o,l,h,d){o=null;for(var y=l,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var O=y.type;yi(y.pendingProps.value,R.value)||(o!==null?o.push(O):o=[O])}}else if(y===Kt.current){if(R=y.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Mf):o=[Mf])}y=y.return}o!==null&&p0(l,o,h,d),l.flags|=262144}function $p(o){for(o=o.firstContext;o!==null;){if(!yi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ql(o){Yl=o,xo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function vr(o){return dw(Yl,o)}function Gp(o,l){return Yl===null&&Ql(o),dw(o,l)}function dw(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},xo===null){if(o===null)throw Error(r(308));xo=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else xo=xo.next=l;return h}var NV=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},MV=n.unstable_scheduleCallback,DV=n.unstable_NormalPriority,Ln={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function m0(){return{controller:new NV,data:new Map,refCount:0}}function sf(o){o.refCount--,o.refCount===0&&MV(DV,function(){o.controller.abort()})}var of=null,g0=0,mc=0,gc=null;function PV(o,l){if(of===null){var h=of=[];g0=0,mc=_v(),gc={status:"pending",value:void 0,then:function(d){h.push(d)}}}return g0++,l.then(pw,pw),l}function pw(){if(--g0===0&&of!==null){gc!==null&&(gc.status="fulfilled");var o=of;of=null,mc=0,gc=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function LV(o,l){var h=[],d={status:"pending",value:null,reason:null,then:function(y){h.push(y)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<h.length;y++)(0,h[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<h.length;y++)(0,h[y])(void 0)}),d}var mw=Y.S;Y.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&PV(o,l),mw!==null&&mw(o,l)};var Xl=ie(null);function y0(){var o=Xl.current;return o!==null?o:$t.pooledCache}function Kp(o,l){l===null?ae(Xl,Xl.current):ae(Xl,l.pool)}function gw(){var o=y0();return o===null?null:{parent:Ln._currentValue,pool:o}}var af=Error(r(460)),yw=Error(r(474)),Wp=Error(r(542)),_0={then:function(){}};function _w(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Yp(){}function vw(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(Yp,Yp),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Tw(o),o;default:if(typeof l.status=="string")l.then(Yp,Yp);else{if(o=$t,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Tw(o),o}throw lf=l,af}}var lf=null;function Aw(){if(lf===null)throw Error(r(459));var o=lf;return lf=null,o}function Tw(o){if(o===af||o===Wp)throw Error(r(483))}var ca=!1;function v0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function A0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ha(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function fa(o,l,h){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(Nt&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=jp(o),aw(o,null,h),l}return Bp(o,d,l,h),jp(o)}function uf(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var d=l.lanes;d&=o.pendingLanes,h|=d,l.lanes=h,Ot(o,h)}}function T0(o,l){var h=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var y=null,v=null;if(h=h.firstBaseUpdate,h!==null){do{var R={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};v===null?y=v=R:v=v.next=R,h=h.next}while(h!==null);v===null?y=v=l:v=v.next=l}else y=v=l;h={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var E0=!1;function cf(){if(E0){var o=gc;if(o!==null)throw o}}function hf(o,l,h,d){E0=!1;var y=o.updateQueue;ca=!1;var v=y.firstBaseUpdate,R=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var F=O,te=F.next;F.next=null,R===null?v=te:R.next=te,R=F;var le=o.alternate;le!==null&&(le=le.updateQueue,O=le.lastBaseUpdate,O!==R&&(O===null?le.firstBaseUpdate=te:O.next=te,le.lastBaseUpdate=F))}if(v!==null){var he=y.baseState;R=0,le=te=F=null,O=v;do{var ne=O.lane&-536870913,re=ne!==O.lane;if(re?(Et&ne)===ne:(d&ne)===ne){ne!==0&&ne===mc&&(E0=!0),le!==null&&(le=le.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Qe=o,Ge=O;ne=l;var Vt=h;switch(Ge.tag){case 1:if(Qe=Ge.payload,typeof Qe=="function"){he=Qe.call(Vt,he,ne);break e}he=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ge.payload,ne=typeof Qe=="function"?Qe.call(Vt,he,ne):Qe,ne==null)break e;he=p({},he,ne);break e;case 2:ca=!0}}ne=O.callback,ne!==null&&(o.flags|=64,re&&(o.flags|=8192),re=y.callbacks,re===null?y.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},le===null?(te=le=re,F=he):le=le.next=re,R|=ne;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;re=O,O=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);le===null&&(F=he),y.baseState=F,y.firstBaseUpdate=te,y.lastBaseUpdate=le,v===null&&(y.shared.lanes=0),Aa|=R,o.lanes=R,o.memoizedState=he}}function Ew(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function bw(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)Ew(h[o],l)}var yc=ie(null),Qp=ie(0);function Sw(o,l){o=Lo,ae(Qp,o),ae(yc,l),Lo=o|l.baseLanes}function b0(){ae(Qp,Lo),ae(yc,yc.current)}function S0(){Lo=Qp.current,pe(yc),pe(Qp)}var da=0,ot=null,Pt=null,Sn=null,Xp=!1,_c=!1,Jl=!1,Jp=0,ff=0,vc=null,VV=0;function gn(){throw Error(r(321))}function w0(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!yi(o[h],l[h]))return!1;return!0}function R0(o,l,h,d,y,v){return da=v,ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Y.H=o===null||o.memoizedState===null?a1:l1,Jl=!1,v=h(d,y),Jl=!1,_c&&(v=Rw(l,h,d,y)),ww(o),v}function ww(o){Y.H=im;var l=Pt!==null&&Pt.next!==null;if(da=0,Sn=Pt=ot=null,Xp=!1,ff=0,vc=null,l)throw Error(r(300));o===null||Fn||(o=o.dependencies,o!==null&&$p(o)&&(Fn=!0))}function Rw(o,l,h,d){ot=o;var y=0;do{if(_c&&(vc=null),ff=0,_c=!1,25<=y)throw Error(r(301));if(y+=1,Sn=Pt=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=qV,v=l(h,d)}while(_c);return v}function UV(){var o=Y.H,l=o.useState()[0];return l=typeof l.then=="function"?df(l):l,o=o.useState()[0],(Pt!==null?Pt.memoizedState:null)!==o&&(ot.flags|=1024),l}function C0(){var o=Jp!==0;return Jp=0,o}function x0(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function k0(o){if(Xp){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Xp=!1}da=0,Sn=Pt=ot=null,_c=!1,ff=Jp=0,vc=null}function Xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?ot.memoizedState=Sn=o:Sn=Sn.next=o,Sn}function wn(){if(Pt===null){var o=ot.alternate;o=o!==null?o.memoizedState:null}else o=Pt.next;var l=Sn===null?ot.memoizedState:Sn.next;if(l!==null)Sn=l,Pt=o;else{if(o===null)throw ot.alternate===null?Error(r(467)):Error(r(310));Pt=o,o={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Sn===null?ot.memoizedState=Sn=o:Sn=Sn.next=o}return Sn}function I0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function df(o){var l=ff;return ff+=1,vc===null&&(vc=[]),o=vw(vc,o,l),l=ot,(Sn===null?l.memoizedState:Sn.next)===null&&(l=l.alternate,Y.H=l===null||l.memoizedState===null?a1:l1),o}function Zp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return df(o);if(o.$$typeof===j)return vr(o)}throw Error(r(438,String(o)))}function O0(o){var l=null,h=ot.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var d=ot.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=I0(),ot.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),d=0;d<o;d++)h[d]=z;return l.index++,h}function Io(o,l){return typeof l=="function"?l(o):l}function em(o){var l=wn();return N0(l,Pt,o)}function N0(o,l,h){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=h;var y=o.baseQueue,v=d.pending;if(v!==null){if(y!==null){var R=y.next;y.next=v.next,v.next=R}l.baseQueue=y=v,d.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{l=y.next;var O=R=null,F=null,te=l,le=!1;do{var he=te.lane&-536870913;if(he!==te.lane?(Et&he)===he:(da&he)===he){var ne=te.revertLane;if(ne===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),he===mc&&(le=!0);else if((da&ne)===ne){te=te.next,ne===mc&&(le=!0);continue}else he={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(O=F=he,R=v):F=F.next=he,ot.lanes|=ne,Aa|=ne;he=te.action,Jl&&h(v,he),v=te.hasEagerState?te.eagerState:h(v,he)}else ne={lane:he,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(O=F=ne,R=v):F=F.next=ne,ot.lanes|=he,Aa|=he;te=te.next}while(te!==null&&te!==l);if(F===null?R=v:F.next=O,!yi(v,o.memoizedState)&&(Fn=!0,le&&(h=gc,h!==null)))throw h;o.memoizedState=v,o.baseState=R,o.baseQueue=F,d.lastRenderedState=v}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function M0(o){var l=wn(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var d=h.dispatch,y=h.pending,v=l.memoizedState;if(y!==null){h.pending=null;var R=y=y.next;do v=o(v,R.action),R=R.next;while(R!==y);yi(v,l.memoizedState)||(Fn=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),h.lastRenderedState=v}return[v,d]}function Cw(o,l,h){var d=ot,y=wn(),v=xt;if(v){if(h===void 0)throw Error(r(407));h=h()}else h=l();var R=!yi((Pt||y).memoizedState,h);R&&(y.memoizedState=h,Fn=!0),y=y.queue;var O=Iw.bind(null,d,y,o);if(pf(2048,8,O,[o]),y.getSnapshot!==l||R||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,Ac(9,tm(),kw.bind(null,d,y,h,l),null),$t===null)throw Error(r(349));v||(da&124)!==0||xw(d,l,h)}return h}function xw(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=ot.updateQueue,l===null?(l=I0(),ot.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function kw(o,l,h,d){l.value=h,l.getSnapshot=d,Ow(l)&&Nw(o)}function Iw(o,l,h){return h(function(){Ow(l)&&Nw(o)})}function Ow(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!yi(o,h)}catch{return!0}}function Nw(o){var l=hc(o,2);l!==null&&bi(l,o,2)}function D0(o){var l=Xr();if(typeof o=="function"){var h=o;if(o=h(),Jl){Mn(!0);try{h()}finally{Mn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:o},l}function Mw(o,l,h,d){return o.baseState=h,N0(o,Pt,typeof d=="function"?d:Io)}function zV(o,l,h,d,y){if(rm(o))throw Error(r(485));if(o=l.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){v.listeners.push(R)}};Y.T!==null?h(!0):v.isTransition=!1,d(v),h=l.pending,h===null?(v.next=l.pending=v,Dw(l,v)):(v.next=h.next,l.pending=h.next=v)}}function Dw(o,l){var h=l.action,d=l.payload,y=o.state;if(l.isTransition){var v=Y.T,R={};Y.T=R;try{var O=h(y,d),F=Y.S;F!==null&&F(R,O),Pw(o,l,O)}catch(te){P0(o,l,te)}finally{Y.T=v}}else try{v=h(y,d),Pw(o,l,v)}catch(te){P0(o,l,te)}}function Pw(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){Lw(o,l,d)},function(d){return P0(o,l,d)}):Lw(o,l,h)}function Lw(o,l,h){l.status="fulfilled",l.value=h,Vw(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,Dw(o,h)))}function P0(o,l,h){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=h,Vw(l),l=l.next;while(l!==d)}o.action=null}function Vw(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function Uw(o,l){return l}function zw(o,l){if(xt){var h=$t.formState;if(h!==null){e:{var d=ot;if(xt){if(an){t:{for(var y=an,v=Hs;y.nodeType!==8;){if(!v){y=null;break t}if(y=Ts(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){an=Ts(y.nextSibling),d=y.data==="F!";break e}}Wl(d)}d=!1}d&&(l=h[0])}}return h=Xr(),h.memoizedState=h.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uw,lastRenderedState:l},h.queue=d,h=i1.bind(null,ot,d),d.dispatch=h,d=D0(!1),v=B0.bind(null,ot,!1,d.queue),d=Xr(),y={state:l,dispatch:null,action:o,pending:null},d.queue=y,h=zV.bind(null,ot,y,v,h),y.dispatch=h,d.memoizedState=o,[l,h,!1]}function Bw(o){var l=wn();return jw(l,Pt,o)}function jw(o,l,h){if(l=N0(o,l,Uw)[0],o=em(Io)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=df(l)}catch(R){throw R===af?Wp:R}else d=l;l=wn();var y=l.queue,v=y.dispatch;return h!==l.memoizedState&&(ot.flags|=2048,Ac(9,tm(),BV.bind(null,y,h),null)),[d,v,o]}function BV(o,l){o.action=l}function Fw(o){var l=wn(),h=Pt;if(h!==null)return jw(l,h,o);wn(),l=l.memoizedState,h=wn();var d=h.queue.dispatch;return h.memoizedState=o,[l,d,!1]}function Ac(o,l,h,d){return o={tag:o,create:h,deps:d,inst:l,next:null},l=ot.updateQueue,l===null&&(l=I0(),ot.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(d=h.next,h.next=o,o.next=d,l.lastEffect=o),o}function tm(){return{destroy:void 0,resource:void 0}}function Hw(){return wn().memoizedState}function nm(o,l,h,d){var y=Xr();d=d===void 0?null:d,ot.flags|=o,y.memoizedState=Ac(1|l,tm(),h,d)}function pf(o,l,h,d){var y=wn();d=d===void 0?null:d;var v=y.memoizedState.inst;Pt!==null&&d!==null&&w0(d,Pt.memoizedState.deps)?y.memoizedState=Ac(l,v,h,d):(ot.flags|=o,y.memoizedState=Ac(1|l,v,h,d))}function qw(o,l){nm(8390656,8,o,l)}function $w(o,l){pf(2048,8,o,l)}function Gw(o,l){return pf(4,2,o,l)}function Kw(o,l){return pf(4,4,o,l)}function Ww(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Yw(o,l,h){h=h!=null?h.concat([o]):null,pf(4,4,Ww.bind(null,l,o),h)}function L0(){}function Qw(o,l){var h=wn();l=l===void 0?null:l;var d=h.memoizedState;return l!==null&&w0(l,d[1])?d[0]:(h.memoizedState=[o,l],o)}function Xw(o,l){var h=wn();l=l===void 0?null:l;var d=h.memoizedState;if(l!==null&&w0(l,d[1]))return d[0];if(d=o(),Jl){Mn(!0);try{o()}finally{Mn(!1)}}return h.memoizedState=[d,l],d}function V0(o,l,h){return h===void 0||(da&1073741824)!==0?o.memoizedState=l:(o.memoizedState=h,o=eR(),ot.lanes|=o,Aa|=o,h)}function Jw(o,l,h,d){return yi(h,l)?h:yc.current!==null?(o=V0(o,h,d),yi(o,l)||(Fn=!0),o):(da&42)===0?(Fn=!0,o.memoizedState=h):(o=eR(),ot.lanes|=o,Aa|=o,l)}function Zw(o,l,h,d,y){var v=oe.p;oe.p=v!==0&&8>v?v:8;var R=Y.T,O={};Y.T=O,B0(o,!1,l,h);try{var F=y(),te=Y.S;if(te!==null&&te(O,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var le=LV(F,d);mf(o,l,le,Ei(o))}else mf(o,l,d,Ei(o))}catch(he){mf(o,l,{then:function(){},status:"rejected",reason:he},Ei())}finally{oe.p=v,Y.T=R}}function jV(){}function U0(o,l,h,d){if(o.tag!==5)throw Error(r(476));var y=e1(o).queue;Zw(o,y,l,Ae,h===null?jV:function(){return t1(o),h(d)})}function e1(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:Ae},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function t1(o){var l=e1(o).next.queue;mf(o,l,{},Ei())}function z0(){return vr(Mf)}function n1(){return wn().memoizedState}function r1(){return wn().memoizedState}function FV(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=Ei();o=ha(h);var d=fa(l,o,h);d!==null&&(bi(d,l,h),uf(d,l,h)),l={cache:m0()},o.payload=l;return}l=l.return}}function HV(o,l,h){var d=Ei();h={lane:d,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},rm(o)?s1(l,h):(h=s0(o,l,h,d),h!==null&&(bi(h,o,d),o1(h,l,d)))}function i1(o,l,h){var d=Ei();mf(o,l,h,d)}function mf(o,l,h,d){var y={lane:d,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(rm(o))s1(l,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var R=l.lastRenderedState,O=v(R,h);if(y.hasEagerState=!0,y.eagerState=O,yi(O,R))return Bp(o,l,y,0),$t===null&&zp(),!1}catch{}finally{}if(h=s0(o,l,y,d),h!==null)return bi(h,o,d),o1(h,l,d),!0}return!1}function B0(o,l,h,d){if(d={lane:2,revertLane:_v(),action:d,hasEagerState:!1,eagerState:null,next:null},rm(o)){if(l)throw Error(r(479))}else l=s0(o,h,d,2),l!==null&&bi(l,o,2)}function rm(o){var l=o.alternate;return o===ot||l!==null&&l===ot}function s1(o,l){_c=Xp=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function o1(o,l,h){if((h&4194048)!==0){var d=l.lanes;d&=o.pendingLanes,h|=d,l.lanes=h,Ot(o,h)}}var im={readContext:vr,use:Zp,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn},a1={readContext:vr,use:Zp,useCallback:function(o,l){return Xr().memoizedState=[o,l===void 0?null:l],o},useContext:vr,useEffect:qw,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,nm(4194308,4,Ww.bind(null,l,o),h)},useLayoutEffect:function(o,l){return nm(4194308,4,o,l)},useInsertionEffect:function(o,l){nm(4,2,o,l)},useMemo:function(o,l){var h=Xr();l=l===void 0?null:l;var d=o();if(Jl){Mn(!0);try{o()}finally{Mn(!1)}}return h.memoizedState=[d,l],d},useReducer:function(o,l,h){var d=Xr();if(h!==void 0){var y=h(l);if(Jl){Mn(!0);try{h(l)}finally{Mn(!1)}}}else y=l;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=HV.bind(null,ot,o),[d.memoizedState,o]},useRef:function(o){var l=Xr();return o={current:o},l.memoizedState=o},useState:function(o){o=D0(o);var l=o.queue,h=i1.bind(null,ot,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:L0,useDeferredValue:function(o,l){var h=Xr();return V0(h,o,l)},useTransition:function(){var o=D0(!1);return o=Zw.bind(null,ot,o.queue,!0,!1),Xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var d=ot,y=Xr();if(xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),$t===null)throw Error(r(349));(Et&124)!==0||xw(d,l,h)}y.memoizedState=h;var v={value:h,getSnapshot:l};return y.queue=v,qw(Iw.bind(null,d,v,o),[o]),d.flags|=2048,Ac(9,tm(),kw.bind(null,d,v,h,l),null),h},useId:function(){var o=Xr(),l=$t.identifierPrefix;if(xt){var h=Co,d=Ro;h=(d&~(1<<32-Jt(d)-1)).toString(32)+h,l="«"+l+"R"+h,h=Jp++,0<h&&(l+="H"+h.toString(32)),l+="»"}else h=VV++,l="«"+l+"r"+h.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:z0,useFormState:zw,useActionState:zw,useOptimistic:function(o){var l=Xr();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=B0.bind(null,ot,!0,h),h.dispatch=l,[o,l]},useMemoCache:O0,useCacheRefresh:function(){return Xr().memoizedState=FV.bind(null,ot)}},l1={readContext:vr,use:Zp,useCallback:Qw,useContext:vr,useEffect:$w,useImperativeHandle:Yw,useInsertionEffect:Gw,useLayoutEffect:Kw,useMemo:Xw,useReducer:em,useRef:Hw,useState:function(){return em(Io)},useDebugValue:L0,useDeferredValue:function(o,l){var h=wn();return Jw(h,Pt.memoizedState,o,l)},useTransition:function(){var o=em(Io)[0],l=wn().memoizedState;return[typeof o=="boolean"?o:df(o),l]},useSyncExternalStore:Cw,useId:n1,useHostTransitionStatus:z0,useFormState:Bw,useActionState:Bw,useOptimistic:function(o,l){var h=wn();return Mw(h,Pt,o,l)},useMemoCache:O0,useCacheRefresh:r1},qV={readContext:vr,use:Zp,useCallback:Qw,useContext:vr,useEffect:$w,useImperativeHandle:Yw,useInsertionEffect:Gw,useLayoutEffect:Kw,useMemo:Xw,useReducer:M0,useRef:Hw,useState:function(){return M0(Io)},useDebugValue:L0,useDeferredValue:function(o,l){var h=wn();return Pt===null?V0(h,o,l):Jw(h,Pt.memoizedState,o,l)},useTransition:function(){var o=M0(Io)[0],l=wn().memoizedState;return[typeof o=="boolean"?o:df(o),l]},useSyncExternalStore:Cw,useId:n1,useHostTransitionStatus:z0,useFormState:Fw,useActionState:Fw,useOptimistic:function(o,l){var h=wn();return Pt!==null?Mw(h,Pt,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:O0,useCacheRefresh:r1},Tc=null,gf=0;function sm(o){var l=gf;return gf+=1,Tc===null&&(Tc=[]),vw(Tc,o,l)}function yf(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function om(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function u1(o){var l=o._init;return l(o._payload)}function c1(o){function l(Q,W){if(o){var ee=Q.deletions;ee===null?(Q.deletions=[W],Q.flags|=16):ee.push(W)}}function h(Q,W){if(!o)return null;for(;W!==null;)l(Q,W),W=W.sibling;return null}function d(Q){for(var W=new Map;Q!==null;)Q.key!==null?W.set(Q.key,Q):W.set(Q.index,Q),Q=Q.sibling;return W}function y(Q,W){return Q=wo(Q,W),Q.index=0,Q.sibling=null,Q}function v(Q,W,ee){return Q.index=ee,o?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<W?(Q.flags|=67108866,W):ee):(Q.flags|=67108866,W)):(Q.flags|=1048576,W)}function R(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function O(Q,W,ee,ue){return W===null||W.tag!==6?(W=a0(ee,Q.mode,ue),W.return=Q,W):(W=y(W,ee),W.return=Q,W)}function F(Q,W,ee,ue){var Me=ee.type;return Me===T?le(Q,W,ee.props.children,ue,ee.key):W!==null&&(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&u1(Me)===W.type)?(W=y(W,ee.props),yf(W,ee),W.return=Q,W):(W=Fp(ee.type,ee.key,ee.props,null,Q.mode,ue),yf(W,ee),W.return=Q,W)}function te(Q,W,ee,ue){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=l0(ee,Q.mode,ue),W.return=Q,W):(W=y(W,ee.children||[]),W.return=Q,W)}function le(Q,W,ee,ue,Me){return W===null||W.tag!==7?(W=ql(ee,Q.mode,ue,Me),W.return=Q,W):(W=y(W,ee),W.return=Q,W)}function he(Q,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=a0(""+W,Q.mode,ee),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return ee=Fp(W.type,W.key,W.props,null,Q.mode,ee),yf(ee,W),ee.return=Q,ee;case A:return W=l0(W,Q.mode,ee),W.return=Q,W;case k:var ue=W._init;return W=ue(W._payload),he(Q,W,ee)}if(be(W)||B(W))return W=ql(W,Q.mode,ee,null),W.return=Q,W;if(typeof W.then=="function")return he(Q,sm(W),ee);if(W.$$typeof===j)return he(Q,Gp(Q,W),ee);om(Q,W)}return null}function ne(Q,W,ee,ue){var Me=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Me!==null?null:O(Q,W,""+ee,ue);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return ee.key===Me?F(Q,W,ee,ue):null;case A:return ee.key===Me?te(Q,W,ee,ue):null;case k:return Me=ee._init,ee=Me(ee._payload),ne(Q,W,ee,ue)}if(be(ee)||B(ee))return Me!==null?null:le(Q,W,ee,ue,null);if(typeof ee.then=="function")return ne(Q,W,sm(ee),ue);if(ee.$$typeof===j)return ne(Q,W,Gp(Q,ee),ue);om(Q,ee)}return null}function re(Q,W,ee,ue,Me){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Q=Q.get(ee)||null,O(W,Q,""+ue,Me);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case _:return Q=Q.get(ue.key===null?ee:ue.key)||null,F(W,Q,ue,Me);case A:return Q=Q.get(ue.key===null?ee:ue.key)||null,te(W,Q,ue,Me);case k:var ct=ue._init;return ue=ct(ue._payload),re(Q,W,ee,ue,Me)}if(be(ue)||B(ue))return Q=Q.get(ee)||null,le(W,Q,ue,Me,null);if(typeof ue.then=="function")return re(Q,W,ee,sm(ue),Me);if(ue.$$typeof===j)return re(Q,W,ee,Gp(W,ue),Me);om(W,ue)}return null}function Qe(Q,W,ee,ue){for(var Me=null,ct=null,ze=W,Ke=W=0,qn=null;ze!==null&&Ke<ee.length;Ke++){ze.index>Ke?(qn=ze,ze=null):qn=ze.sibling;var wt=ne(Q,ze,ee[Ke],ue);if(wt===null){ze===null&&(ze=qn);break}o&&ze&&wt.alternate===null&&l(Q,ze),W=v(wt,W,Ke),ct===null?Me=wt:ct.sibling=wt,ct=wt,ze=qn}if(Ke===ee.length)return h(Q,ze),xt&&Gl(Q,Ke),Me;if(ze===null){for(;Ke<ee.length;Ke++)ze=he(Q,ee[Ke],ue),ze!==null&&(W=v(ze,W,Ke),ct===null?Me=ze:ct.sibling=ze,ct=ze);return xt&&Gl(Q,Ke),Me}for(ze=d(ze);Ke<ee.length;Ke++)qn=re(ze,Q,Ke,ee[Ke],ue),qn!==null&&(o&&qn.alternate!==null&&ze.delete(qn.key===null?Ke:qn.key),W=v(qn,W,Ke),ct===null?Me=qn:ct.sibling=qn,ct=qn);return o&&ze.forEach(function(ka){return l(Q,ka)}),xt&&Gl(Q,Ke),Me}function Ge(Q,W,ee,ue){if(ee==null)throw Error(r(151));for(var Me=null,ct=null,ze=W,Ke=W=0,qn=null,wt=ee.next();ze!==null&&!wt.done;Ke++,wt=ee.next()){ze.index>Ke?(qn=ze,ze=null):qn=ze.sibling;var ka=ne(Q,ze,wt.value,ue);if(ka===null){ze===null&&(ze=qn);break}o&&ze&&ka.alternate===null&&l(Q,ze),W=v(ka,W,Ke),ct===null?Me=ka:ct.sibling=ka,ct=ka,ze=qn}if(wt.done)return h(Q,ze),xt&&Gl(Q,Ke),Me;if(ze===null){for(;!wt.done;Ke++,wt=ee.next())wt=he(Q,wt.value,ue),wt!==null&&(W=v(wt,W,Ke),ct===null?Me=wt:ct.sibling=wt,ct=wt);return xt&&Gl(Q,Ke),Me}for(ze=d(ze);!wt.done;Ke++,wt=ee.next())wt=re(ze,Q,Ke,wt.value,ue),wt!==null&&(o&&wt.alternate!==null&&ze.delete(wt.key===null?Ke:wt.key),W=v(wt,W,Ke),ct===null?Me=wt:ct.sibling=wt,ct=wt);return o&&ze.forEach(function($U){return l(Q,$U)}),xt&&Gl(Q,Ke),Me}function Vt(Q,W,ee,ue){if(typeof ee=="object"&&ee!==null&&ee.type===T&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:e:{for(var Me=ee.key;W!==null;){if(W.key===Me){if(Me=ee.type,Me===T){if(W.tag===7){h(Q,W.sibling),ue=y(W,ee.props.children),ue.return=Q,Q=ue;break e}}else if(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&u1(Me)===W.type){h(Q,W.sibling),ue=y(W,ee.props),yf(ue,ee),ue.return=Q,Q=ue;break e}h(Q,W);break}else l(Q,W);W=W.sibling}ee.type===T?(ue=ql(ee.props.children,Q.mode,ue,ee.key),ue.return=Q,Q=ue):(ue=Fp(ee.type,ee.key,ee.props,null,Q.mode,ue),yf(ue,ee),ue.return=Q,Q=ue)}return R(Q);case A:e:{for(Me=ee.key;W!==null;){if(W.key===Me)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){h(Q,W.sibling),ue=y(W,ee.children||[]),ue.return=Q,Q=ue;break e}else{h(Q,W);break}else l(Q,W);W=W.sibling}ue=l0(ee,Q.mode,ue),ue.return=Q,Q=ue}return R(Q);case k:return Me=ee._init,ee=Me(ee._payload),Vt(Q,W,ee,ue)}if(be(ee))return Qe(Q,W,ee,ue);if(B(ee)){if(Me=B(ee),typeof Me!="function")throw Error(r(150));return ee=Me.call(ee),Ge(Q,W,ee,ue)}if(typeof ee.then=="function")return Vt(Q,W,sm(ee),ue);if(ee.$$typeof===j)return Vt(Q,W,Gp(Q,ee),ue);om(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(h(Q,W.sibling),ue=y(W,ee),ue.return=Q,Q=ue):(h(Q,W),ue=a0(ee,Q.mode,ue),ue.return=Q,Q=ue),R(Q)):h(Q,W)}return function(Q,W,ee,ue){try{gf=0;var Me=Vt(Q,W,ee,ue);return Tc=null,Me}catch(ze){if(ze===af||ze===Wp)throw ze;var ct=_i(29,ze,null,Q.mode);return ct.lanes=ue,ct.return=Q,ct}finally{}}}var Ec=c1(!0),h1=c1(!1),Xi=ie(null),qs=null;function pa(o){var l=o.alternate;ae(Vn,Vn.current&1),ae(Xi,o),qs===null&&(l===null||yc.current!==null||l.memoizedState!==null)&&(qs=o)}function f1(o){if(o.tag===22){if(ae(Vn,Vn.current),ae(Xi,o),qs===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(qs=o)}}else ma()}function ma(){ae(Vn,Vn.current),ae(Xi,Xi.current)}function Oo(o){pe(Xi),qs===o&&(qs=null),pe(Vn)}var Vn=ie(0);function am(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Iv(h)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function j0(o,l,h,d){l=o.memoizedState,h=h(d,l),h=h==null?l:p({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var F0={enqueueSetState:function(o,l,h){o=o._reactInternals;var d=Ei(),y=ha(d);y.payload=l,h!=null&&(y.callback=h),l=fa(o,y,d),l!==null&&(bi(l,o,d),uf(l,o,d))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var d=Ei(),y=ha(d);y.tag=1,y.payload=l,h!=null&&(y.callback=h),l=fa(o,y,d),l!==null&&(bi(l,o,d),uf(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=Ei(),d=ha(h);d.tag=2,l!=null&&(d.callback=l),l=fa(o,d,h),l!==null&&(bi(l,o,h),uf(l,o,h))}};function d1(o,l,h,d,y,v,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,v,R):l.prototype&&l.prototype.isPureReactComponent?!Jh(h,d)||!Jh(y,v):!0}function p1(o,l,h,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,d),l.state!==o&&F0.enqueueReplaceState(l,l.state,null)}function Zl(o,l){var h=l;if("ref"in l){h={};for(var d in l)d!=="ref"&&(h[d]=l[d])}if(o=o.defaultProps){h===l&&(h=p({},h));for(var y in o)h[y]===void 0&&(h[y]=o[y])}return h}var lm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function m1(o){lm(o)}function g1(o){console.error(o)}function y1(o){lm(o)}function um(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function _1(o,l,h){try{var d=o.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function H0(o,l,h){return h=ha(h),h.tag=3,h.payload={element:null},h.callback=function(){um(o,l)},h}function v1(o){return o=ha(o),o.tag=3,o}function A1(o,l,h,d){var y=h.type.getDerivedStateFromError;if(typeof y=="function"){var v=d.value;o.payload=function(){return y(v)},o.callback=function(){_1(l,h,d)}}var R=h.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(o.callback=function(){_1(l,h,d),typeof y!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function $V(o,l,h,d,y){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=h.alternate,l!==null&&rf(l,h,y,!0),h=Xi.current,h!==null){switch(h.tag){case 13:return qs===null?dv():h.alternate===null&&ln===0&&(ln=3),h.flags&=-257,h.flags|=65536,h.lanes=y,d===_0?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([d]):l.add(d),mv(o,d,y)),!1;case 22:return h.flags|=65536,d===_0?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([d]):h.add(d)),mv(o,d,y)),!1}throw Error(r(435,h.tag))}return mv(o,d,y),dv(),!1}if(xt)return l=Xi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==h0&&(o=Error(r(422),{cause:d}),nf(Ki(o,h)))):(d!==h0&&(l=Error(r(423),{cause:d}),nf(Ki(l,h))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=Ki(d,h),y=H0(o.stateNode,d,y),T0(o,y),ln!==4&&(ln=2)),!1;var v=Error(r(520),{cause:d});if(v=Ki(v,h),Sf===null?Sf=[v]:Sf.push(v),ln!==4&&(ln=2),l===null)return!0;d=Ki(d,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=y&-y,h.lanes|=o,o=H0(h.stateNode,d,o),T0(h,o),!1;case 1:if(l=h.type,v=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ta===null||!Ta.has(v))))return h.flags|=65536,y&=-y,h.lanes|=y,y=v1(y),A1(y,o,h,d),T0(h,y),!1}h=h.return}while(h!==null);return!1}var T1=Error(r(461)),Fn=!1;function sr(o,l,h,d){l.child=o===null?h1(l,null,h,d):Ec(l,o.child,h,d)}function E1(o,l,h,d,y){h=h.render;var v=l.ref;if("ref"in d){var R={};for(var O in d)O!=="ref"&&(R[O]=d[O])}else R=d;return Ql(l),d=R0(o,l,h,R,v,y),O=C0(),o!==null&&!Fn?(x0(o,l,y),No(o,l,y)):(xt&&O&&u0(l),l.flags|=1,sr(o,l,d,y),l.child)}function b1(o,l,h,d,y){if(o===null){var v=h.type;return typeof v=="function"&&!o0(v)&&v.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=v,S1(o,l,v,d,y)):(o=Fp(h.type,null,d,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(v=o.child,!X0(o,y)){var R=v.memoizedProps;if(h=h.compare,h=h!==null?h:Jh,h(R,d)&&o.ref===l.ref)return No(o,l,y)}return l.flags|=1,o=wo(v,d),o.ref=l.ref,o.return=l,l.child=o}function S1(o,l,h,d,y){if(o!==null){var v=o.memoizedProps;if(Jh(v,d)&&o.ref===l.ref)if(Fn=!1,l.pendingProps=d=v,X0(o,y))(o.flags&131072)!==0&&(Fn=!0);else return l.lanes=o.lanes,No(o,l,y)}return q0(o,l,h,d,y)}function w1(o,l,h){var d=l.pendingProps,y=d.children,v=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=v!==null?v.baseLanes|h:h,o!==null){for(y=l.child=o.child,v=0;y!==null;)v=v|y.lanes|y.childLanes,y=y.sibling;l.childLanes=v&~d}else l.childLanes=0,l.child=null;return R1(o,l,d,h)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Kp(l,v!==null?v.cachePool:null),v!==null?Sw(l,v):b0(),f1(l);else return l.lanes=l.childLanes=536870912,R1(o,l,v!==null?v.baseLanes|h:h,h)}else v!==null?(Kp(l,v.cachePool),Sw(l,v),ma(),l.memoizedState=null):(o!==null&&Kp(l,null),b0(),ma());return sr(o,l,y,h),l.child}function R1(o,l,h,d){var y=y0();return y=y===null?null:{parent:Ln._currentValue,pool:y},l.memoizedState={baseLanes:h,cachePool:y},o!==null&&Kp(l,null),b0(),f1(l),o!==null&&rf(o,l,d,!0),null}function cm(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function q0(o,l,h,d,y){return Ql(l),h=R0(o,l,h,d,void 0,y),d=C0(),o!==null&&!Fn?(x0(o,l,y),No(o,l,y)):(xt&&d&&u0(l),l.flags|=1,sr(o,l,h,y),l.child)}function C1(o,l,h,d,y,v){return Ql(l),l.updateQueue=null,h=Rw(l,d,h,y),ww(o),d=C0(),o!==null&&!Fn?(x0(o,l,v),No(o,l,v)):(xt&&d&&u0(l),l.flags|=1,sr(o,l,h,v),l.child)}function x1(o,l,h,d,y){if(Ql(l),l.stateNode===null){var v=fc,R=h.contextType;typeof R=="object"&&R!==null&&(v=vr(R)),v=new h(d,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=F0,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=d,v.state=l.memoizedState,v.refs={},v0(l),R=h.contextType,v.context=typeof R=="object"&&R!==null?vr(R):fc,v.state=l.memoizedState,R=h.getDerivedStateFromProps,typeof R=="function"&&(j0(l,h,R,d),v.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(R=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),R!==v.state&&F0.enqueueReplaceState(v,v.state,null),hf(l,d,v,y),cf(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){v=l.stateNode;var O=l.memoizedProps,F=Zl(h,O);v.props=F;var te=v.context,le=h.contextType;R=fc,typeof le=="object"&&le!==null&&(R=vr(le));var he=h.getDerivedStateFromProps;le=typeof he=="function"||typeof v.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,le||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(O||te!==R)&&p1(l,v,d,R),ca=!1;var ne=l.memoizedState;v.state=ne,hf(l,d,v,y),cf(),te=l.memoizedState,O||ne!==te||ca?(typeof he=="function"&&(j0(l,h,he,d),te=l.memoizedState),(F=ca||d1(l,h,F,d,ne,te,R))?(le||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=te),v.props=d,v.state=te,v.context=R,d=F):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{v=l.stateNode,A0(o,l),R=l.memoizedProps,le=Zl(h,R),v.props=le,he=l.pendingProps,ne=v.context,te=h.contextType,F=fc,typeof te=="object"&&te!==null&&(F=vr(te)),O=h.getDerivedStateFromProps,(te=typeof O=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==he||ne!==F)&&p1(l,v,d,F),ca=!1,ne=l.memoizedState,v.state=ne,hf(l,d,v,y),cf();var re=l.memoizedState;R!==he||ne!==re||ca||o!==null&&o.dependencies!==null&&$p(o.dependencies)?(typeof O=="function"&&(j0(l,h,O,d),re=l.memoizedState),(le=ca||d1(l,h,le,d,ne,re,F)||o!==null&&o.dependencies!==null&&$p(o.dependencies))?(te||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,re,F),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,re,F)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=re),v.props=d,v.state=re,v.context=F,d=le):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),d=!1)}return v=d,cm(o,l),d=(l.flags&128)!==0,v||d?(v=l.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,o!==null&&d?(l.child=Ec(l,o.child,null,y),l.child=Ec(l,null,h,y)):sr(o,l,h,y),l.memoizedState=v.state,o=l.child):o=No(o,l,y),o}function k1(o,l,h,d){return tf(),l.flags|=256,sr(o,l,h,d),l.child}var $0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function G0(o){return{baseLanes:o,cachePool:gw()}}function K0(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=Ji),o}function I1(o,l,h){var d=l.pendingProps,y=!1,v=(l.flags&128)!==0,R;if((R=v)||(R=o!==null&&o.memoizedState===null?!1:(Vn.current&2)!==0),R&&(y=!0,l.flags&=-129),R=(l.flags&32)!==0,l.flags&=-33,o===null){if(xt){if(y?pa(l):ma(),xt){var O=an,F;if(F=O){e:{for(F=O,O=Hs;F.nodeType!==8;){if(!O){O=null;break e}if(F=Ts(F.nextSibling),F===null){O=null;break e}}O=F}O!==null?(l.memoizedState={dehydrated:O,treeContext:$l!==null?{id:Ro,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},F=_i(18,null,null,0),F.stateNode=O,F.return=l,l.child=F,Ur=l,an=null,F=!0):F=!1}F||Wl(l)}if(O=l.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Iv(O)?l.lanes=32:l.lanes=536870912,null;Oo(l)}return O=d.children,d=d.fallback,y?(ma(),y=l.mode,O=hm({mode:"hidden",children:O},y),d=ql(d,y,h,null),O.return=l,d.return=l,O.sibling=d,l.child=O,y=l.child,y.memoizedState=G0(h),y.childLanes=K0(o,R,h),l.memoizedState=$0,d):(pa(l),W0(l,O))}if(F=o.memoizedState,F!==null&&(O=F.dehydrated,O!==null)){if(v)l.flags&256?(pa(l),l.flags&=-257,l=Y0(o,l,h)):l.memoizedState!==null?(ma(),l.child=o.child,l.flags|=128,l=null):(ma(),y=d.fallback,O=l.mode,d=hm({mode:"visible",children:d.children},O),y=ql(y,O,h,null),y.flags|=2,d.return=l,y.return=l,d.sibling=y,l.child=d,Ec(l,o.child,null,h),d=l.child,d.memoizedState=G0(h),d.childLanes=K0(o,R,h),l.memoizedState=$0,l=y);else if(pa(l),Iv(O)){if(R=O.nextSibling&&O.nextSibling.dataset,R)var te=R.dgst;R=te,d=Error(r(419)),d.stack="",d.digest=R,nf({value:d,source:null,stack:null}),l=Y0(o,l,h)}else if(Fn||rf(o,l,h,!1),R=(h&o.childLanes)!==0,Fn||R){if(R=$t,R!==null&&(d=h&-h,d=(d&42)!==0?1:nr(d),d=(d&(R.suspendedLanes|h))!==0?0:d,d!==0&&d!==F.retryLane))throw F.retryLane=d,hc(o,d),bi(R,o,d),T1;O.data==="$?"||dv(),l=Y0(o,l,h)}else O.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=F.treeContext,an=Ts(O.nextSibling),Ur=l,xt=!0,Kl=null,Hs=!1,o!==null&&(Yi[Qi++]=Ro,Yi[Qi++]=Co,Yi[Qi++]=$l,Ro=o.id,Co=o.overflow,$l=l),l=W0(l,d.children),l.flags|=4096);return l}return y?(ma(),y=d.fallback,O=l.mode,F=o.child,te=F.sibling,d=wo(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,te!==null?y=wo(te,y):(y=ql(y,O,h,null),y.flags|=2),y.return=l,d.return=l,d.sibling=y,l.child=d,d=y,y=l.child,O=o.child.memoizedState,O===null?O=G0(h):(F=O.cachePool,F!==null?(te=Ln._currentValue,F=F.parent!==te?{parent:te,pool:te}:F):F=gw(),O={baseLanes:O.baseLanes|h,cachePool:F}),y.memoizedState=O,y.childLanes=K0(o,R,h),l.memoizedState=$0,d):(pa(l),h=o.child,o=h.sibling,h=wo(h,{mode:"visible",children:d.children}),h.return=l,h.sibling=null,o!==null&&(R=l.deletions,R===null?(l.deletions=[o],l.flags|=16):R.push(o)),l.child=h,l.memoizedState=null,h)}function W0(o,l){return l=hm({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function hm(o,l){return o=_i(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Y0(o,l,h){return Ec(l,o.child,null,h),o=W0(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function O1(o,l,h){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),d0(o.return,l,h)}function Q0(o,l,h,d,y){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:y}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=h,v.tailMode=y)}function N1(o,l,h){var d=l.pendingProps,y=d.revealOrder,v=d.tail;if(sr(o,l,d.children,h),d=Vn.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&O1(o,h,l);else if(o.tag===19)O1(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(ae(Vn,d),y){case"forwards":for(h=l.child,y=null;h!==null;)o=h.alternate,o!==null&&am(o)===null&&(y=h),h=h.sibling;h=y,h===null?(y=l.child,l.child=null):(y=h.sibling,h.sibling=null),Q0(l,!1,y,h,v);break;case"backwards":for(h=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&am(o)===null){l.child=y;break}o=y.sibling,y.sibling=h,h=y,y=o}Q0(l,!0,h,null,v);break;case"together":Q0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function No(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),Aa|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(rf(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,h=wo(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=wo(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function X0(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&$p(o)))}function GV(o,l,h){switch(l.tag){case 3:Rt(l,l.stateNode.containerInfo),ua(l,Ln,o.memoizedState.cache),tf();break;case 27:case 5:Ut(l);break;case 4:Rt(l,l.stateNode.containerInfo);break;case 10:ua(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(pa(l),l.flags|=128,null):(h&l.child.childLanes)!==0?I1(o,l,h):(pa(l),o=No(o,l,h),o!==null?o.sibling:null);pa(l);break;case 19:var y=(o.flags&128)!==0;if(d=(h&l.childLanes)!==0,d||(rf(o,l,h,!1),d=(h&l.childLanes)!==0),y){if(d)return N1(o,l,h);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Vn,Vn.current),d)break;return null;case 22:case 23:return l.lanes=0,w1(o,l,h);case 24:ua(l,Ln,o.memoizedState.cache)}return No(o,l,h)}function M1(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)Fn=!0;else{if(!X0(o,h)&&(l.flags&128)===0)return Fn=!1,GV(o,l,h);Fn=(o.flags&131072)!==0}else Fn=!1,xt&&(l.flags&1048576)!==0&&uw(l,qp,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var d=l.elementType,y=d._init;if(d=y(d._payload),l.type=d,typeof d=="function")o0(d)?(o=Zl(d,o),l.tag=1,l=x1(null,l,d,o,h)):(l.tag=0,l=q0(null,l,d,o,h));else{if(d!=null){if(y=d.$$typeof,y===q){l.tag=11,l=E1(null,l,d,o,h);break e}else if(y===N){l.tag=14,l=b1(null,l,d,o,h);break e}}throw l=Ee(d)||d,Error(r(306,l,""))}}return l;case 0:return q0(o,l,l.type,l.pendingProps,h);case 1:return d=l.type,y=Zl(d,l.pendingProps),x1(o,l,d,y,h);case 3:e:{if(Rt(l,l.stateNode.containerInfo),o===null)throw Error(r(387));d=l.pendingProps;var v=l.memoizedState;y=v.element,A0(o,l),hf(l,d,null,h);var R=l.memoizedState;if(d=R.cache,ua(l,Ln,d),d!==v.cache&&p0(l,[Ln],h,!0),cf(),d=R.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:R.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=k1(o,l,d,h);break e}else if(d!==y){y=Ki(Error(r(424)),l),nf(y),l=k1(o,l,d,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(an=Ts(o.firstChild),Ur=l,xt=!0,Kl=null,Hs=!0,h=h1(l,null,d,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(tf(),d===y){l=No(o,l,h);break e}sr(o,l,d,h)}l=l.child}return l;case 26:return cm(o,l),o===null?(h=VR(l.type,null,l.pendingProps,null))?l.memoizedState=h:xt||(h=l.type,o=l.pendingProps,d=wm(Ve.current).createElement(h),d[ce]=l,d[ye]=o,ar(d,h,o),ft(d),l.stateNode=d):l.memoizedState=VR(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ut(l),o===null&&xt&&(d=l.stateNode=DR(l.type,l.pendingProps,Ve.current),Ur=l,Hs=!0,y=an,Sa(l.type)?(Ov=y,an=Ts(d.firstChild)):an=y),sr(o,l,l.pendingProps.children,h),cm(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&xt&&((y=d=an)&&(d=AU(d,l.type,l.pendingProps,Hs),d!==null?(l.stateNode=d,Ur=l,an=Ts(d.firstChild),Hs=!1,y=!0):y=!1),y||Wl(l)),Ut(l),y=l.type,v=l.pendingProps,R=o!==null?o.memoizedProps:null,d=v.children,Cv(y,v)?d=null:R!==null&&Cv(y,R)&&(l.flags|=32),l.memoizedState!==null&&(y=R0(o,l,UV,null,null,h),Mf._currentValue=y),cm(o,l),sr(o,l,d,h),l.child;case 6:return o===null&&xt&&((o=h=an)&&(h=TU(h,l.pendingProps,Hs),h!==null?(l.stateNode=h,Ur=l,an=null,o=!0):o=!1),o||Wl(l)),null;case 13:return I1(o,l,h);case 4:return Rt(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=Ec(l,null,d,h):sr(o,l,d,h),l.child;case 11:return E1(o,l,l.type,l.pendingProps,h);case 7:return sr(o,l,l.pendingProps,h),l.child;case 8:return sr(o,l,l.pendingProps.children,h),l.child;case 12:return sr(o,l,l.pendingProps.children,h),l.child;case 10:return d=l.pendingProps,ua(l,l.type,d.value),sr(o,l,d.children,h),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,Ql(l),y=vr(y),d=d(y),l.flags|=1,sr(o,l,d,h),l.child;case 14:return b1(o,l,l.type,l.pendingProps,h);case 15:return S1(o,l,l.type,l.pendingProps,h);case 19:return N1(o,l,h);case 31:return d=l.pendingProps,h=l.mode,d={mode:d.mode,children:d.children},o===null?(h=hm(d,h),h.ref=l.ref,l.child=h,h.return=l,l=h):(h=wo(o.child,d),h.ref=l.ref,l.child=h,h.return=l,l=h),l;case 22:return w1(o,l,h);case 24:return Ql(l),d=vr(Ln),o===null?(y=y0(),y===null&&(y=$t,v=m0(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=h),y=v),l.memoizedState={parent:d,cache:y},v0(l),ua(l,Ln,y)):((o.lanes&h)!==0&&(A0(o,l),hf(l,null,null,h),cf()),y=o.memoizedState,v=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ua(l,Ln,d)):(d=v.cache,ua(l,Ln,d),d!==y.cache&&p0(l,[Ln],h,!0))),sr(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Mo(o){o.flags|=4}function D1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!FR(l)){if(l=Xi.current,l!==null&&((Et&4194048)===Et?qs!==null:(Et&62914560)!==Et&&(Et&536870912)===0||l!==qs))throw lf=_0,yw;o.flags|=8192}}function fm(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?ji():536870912,o.lanes|=l,Rc|=l)}function _f(o,l){if(!xt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function tn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,d=0;if(l)for(var y=o.child;y!==null;)h|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)h|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=h,l}function KV(o,l,h){var d=l.pendingProps;switch(c0(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(l),null;case 1:return tn(l),null;case 3:return h=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ko(Ln),mr(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(ef(l)?Mo(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,fw())),tn(l),null;case 26:return h=l.memoizedState,o===null?(Mo(l),h!==null?(tn(l),D1(l,h)):(tn(l),l.flags&=-16777217)):h?h!==o.memoizedState?(Mo(l),tn(l),D1(l,h)):(tn(l),l.flags&=-16777217):(o.memoizedProps!==d&&Mo(l),tn(l),l.flags&=-16777217),null;case 27:Nn(l),h=Ve.current;var y=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return tn(l),null}o=Re.current,ef(l)?cw(l):(o=DR(y,d,h),l.stateNode=o,Mo(l))}return tn(l),null;case 5:if(Nn(l),h=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return tn(l),null}if(o=Re.current,ef(l))cw(l);else{switch(y=wm(Ve.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(h,{is:d.is}):y.createElement(h)}}o[ce]=l,o[ye]=d;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=o;e:switch(ar(o,h,d),h){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Mo(l)}}return tn(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(o=Ve.current,ef(l)){if(o=l.stateNode,h=l.memoizedProps,d=null,y=Ur,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[ce]=l,o=!!(o.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||CR(o.nodeValue,h)),o||Wl(l)}else o=wm(o).createTextNode(d),o[ce]=l,l.stateNode=o}return tn(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=ef(l),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[ce]=l}else tf(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),y=!1}else y=fw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Oo(l),l):(Oo(l),null)}if(Oo(l),(l.flags&128)!==0)return l.lanes=h,l;if(h=d!==null,o=o!==null&&o.memoizedState!==null,h){d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==y&&(d.flags|=2048)}return h!==o&&h&&(l.child.flags|=8192),fm(l,l.updateQueue),tn(l),null;case 4:return mr(),o===null&&Ev(l.stateNode.containerInfo),tn(l),null;case 10:return ko(l.type),tn(l),null;case 19:if(pe(Vn),y=l.memoizedState,y===null)return tn(l),null;if(d=(l.flags&128)!==0,v=y.rendering,v===null)if(d)_f(y,!1);else{if(ln!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(v=am(o),v!==null){for(l.flags|=128,_f(y,!1),o=v.updateQueue,l.updateQueue=o,fm(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)lw(h,o),h=h.sibling;return ae(Vn,Vn.current&1|2),l.child}o=o.sibling}y.tail!==null&&on()>mm&&(l.flags|=128,d=!0,_f(y,!1),l.lanes=4194304)}else{if(!d)if(o=am(v),o!==null){if(l.flags|=128,d=!0,o=o.updateQueue,l.updateQueue=o,fm(l,o),_f(y,!0),y.tail===null&&y.tailMode==="hidden"&&!v.alternate&&!xt)return tn(l),null}else 2*on()-y.renderingStartTime>mm&&h!==536870912&&(l.flags|=128,d=!0,_f(y,!1),l.lanes=4194304);y.isBackwards?(v.sibling=l.child,l.child=v):(o=y.last,o!==null?o.sibling=v:l.child=v,y.last=v)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=on(),l.sibling=null,o=Vn.current,ae(Vn,d?o&1|2:o&1),l):(tn(l),null);case 22:case 23:return Oo(l),S0(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(h&536870912)!==0&&(l.flags&128)===0&&(tn(l),l.subtreeFlags&6&&(l.flags|=8192)):tn(l),h=l.updateQueue,h!==null&&fm(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048),o!==null&&pe(Xl),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),ko(Ln),tn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function WV(o,l){switch(c0(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ko(Ln),mr(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Nn(l),null;case 13:if(Oo(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));tf()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return pe(Vn),null;case 4:return mr(),null;case 10:return ko(l.type),null;case 22:case 23:return Oo(l),S0(),o!==null&&pe(Xl),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return ko(Ln),null;case 25:return null;default:return null}}function P1(o,l){switch(c0(l),l.tag){case 3:ko(Ln),mr();break;case 26:case 27:case 5:Nn(l);break;case 4:mr();break;case 13:Oo(l);break;case 19:pe(Vn);break;case 10:ko(l.type);break;case 22:case 23:Oo(l),S0(),o!==null&&pe(Xl);break;case 24:ko(Ln)}}function vf(o,l){try{var h=l.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var y=d.next;h=y;do{if((h.tag&o)===o){d=void 0;var v=h.create,R=h.inst;d=v(),R.destroy=d}h=h.next}while(h!==y)}}catch(O){Ft(l,l.return,O)}}function ga(o,l,h){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var v=y.next;d=v;do{if((d.tag&o)===o){var R=d.inst,O=R.destroy;if(O!==void 0){R.destroy=void 0,y=l;var F=h,te=O;try{te()}catch(le){Ft(y,F,le)}}}d=d.next}while(d!==v)}}catch(le){Ft(l,l.return,le)}}function L1(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{bw(l,h)}catch(d){Ft(o,o.return,d)}}}function V1(o,l,h){h.props=Zl(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(d){Ft(o,l,d)}}function Af(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof h=="function"?o.refCleanup=h(d):h.current=d}}catch(y){Ft(o,l,y)}}function $s(o,l){var h=o.ref,d=o.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(y){Ft(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(y){Ft(o,l,y)}else h.current=null}function U1(o){var l=o.type,h=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break e;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(y){Ft(o,o.return,y)}}function J0(o,l,h){try{var d=o.stateNode;mU(d,o.type,h,l),d[ye]=l}catch(y){Ft(o,o.return,y)}}function z1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Sa(o.type)||o.tag===4}function Z0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||z1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Sa(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ev(o,l,h){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Sm));else if(d!==4&&(d===27&&Sa(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(ev(o,l,h),o=o.sibling;o!==null;)ev(o,l,h),o=o.sibling}function dm(o,l,h){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(d!==4&&(d===27&&Sa(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(dm(o,l,h),o=o.sibling;o!==null;)dm(o,l,h),o=o.sibling}function B1(o){var l=o.stateNode,h=o.memoizedProps;try{for(var d=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);ar(l,d,h),l[ce]=o,l[ye]=h}catch(v){Ft(o,o.return,v)}}var Do=!1,yn=!1,tv=!1,j1=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function YV(o,l){if(o=o.containerInfo,wv=Om,o=JS(o),Z_(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var y=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{h.nodeType,v.nodeType}catch{h=null;break e}var R=0,O=-1,F=-1,te=0,le=0,he=o,ne=null;t:for(;;){for(var re;he!==h||y!==0&&he.nodeType!==3||(O=R+y),he!==v||d!==0&&he.nodeType!==3||(F=R+d),he.nodeType===3&&(R+=he.nodeValue.length),(re=he.firstChild)!==null;)ne=he,he=re;for(;;){if(he===o)break t;if(ne===h&&++te===y&&(O=R),ne===v&&++le===d&&(F=R),(re=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=re}h=O===-1||F===-1?null:{start:O,end:F}}else h=null}h=h||{start:0,end:0}}else h=null;for(Rv={focusedElem:o,selectionRange:h},Om=!1,Hn=l;Hn!==null;)if(l=Hn,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Hn=o;else for(;Hn!==null;){switch(l=Hn,v=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,h=l,y=v.memoizedProps,v=v.memoizedState,d=h.stateNode;try{var Qe=Zl(h.type,y,h.elementType===h.type);o=d.getSnapshotBeforeUpdate(Qe,v),d.__reactInternalSnapshotBeforeUpdate=o}catch(Ge){Ft(h,h.return,Ge)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)kv(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":kv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,Hn=o;break}Hn=l.return}}function F1(o,l,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:ya(o,h),d&4&&vf(5,h);break;case 1:if(ya(o,h),d&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(R){Ft(h,h.return,R)}else{var y=Zl(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(R){Ft(h,h.return,R)}}d&64&&L1(h),d&512&&Af(h,h.return);break;case 3:if(ya(o,h),d&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{bw(o,l)}catch(R){Ft(h,h.return,R)}}break;case 27:l===null&&d&4&&B1(h);case 26:case 5:ya(o,h),l===null&&d&4&&U1(h),d&512&&Af(h,h.return);break;case 12:ya(o,h);break;case 13:ya(o,h),d&4&&$1(o,h),d&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=iU.bind(null,h),EU(o,h))));break;case 22:if(d=h.memoizedState!==null||Do,!d){l=l!==null&&l.memoizedState!==null||yn,y=Do;var v=yn;Do=d,(yn=l)&&!v?_a(o,h,(h.subtreeFlags&8772)!==0):ya(o,h),Do=y,yn=v}break;case 30:break;default:ya(o,h)}}function H1(o){var l=o.alternate;l!==null&&(o.alternate=null,H1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&xe(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Wt=null,Jr=!1;function Po(o,l,h){for(h=h.child;h!==null;)q1(o,l,h),h=h.sibling}function q1(o,l,h){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(ut,h)}catch{}switch(h.tag){case 26:yn||$s(h,l),Po(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:yn||$s(h,l);var d=Wt,y=Jr;Sa(h.type)&&(Wt=h.stateNode,Jr=!1),Po(o,l,h),kf(h.stateNode),Wt=d,Jr=y;break;case 5:yn||$s(h,l);case 6:if(d=Wt,y=Jr,Wt=null,Po(o,l,h),Wt=d,Jr=y,Wt!==null)if(Jr)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(h.stateNode)}catch(v){Ft(h,l,v)}else try{Wt.removeChild(h.stateNode)}catch(v){Ft(h,l,v)}break;case 18:Wt!==null&&(Jr?(o=Wt,NR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Vf(o)):NR(Wt,h.stateNode));break;case 4:d=Wt,y=Jr,Wt=h.stateNode.containerInfo,Jr=!0,Po(o,l,h),Wt=d,Jr=y;break;case 0:case 11:case 14:case 15:yn||ga(2,h,l),yn||ga(4,h,l),Po(o,l,h);break;case 1:yn||($s(h,l),d=h.stateNode,typeof d.componentWillUnmount=="function"&&V1(h,l,d)),Po(o,l,h);break;case 21:Po(o,l,h);break;case 22:yn=(d=yn)||h.memoizedState!==null,Po(o,l,h),yn=d;break;default:Po(o,l,h)}}function $1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Vf(o)}catch(h){Ft(l,l.return,h)}}function QV(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new j1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new j1),l;default:throw Error(r(435,o.tag))}}function nv(o,l){var h=QV(o);l.forEach(function(d){var y=sU.bind(null,o,d);h.has(d)||(h.add(d),d.then(y,y))})}function vi(o,l){var h=l.deletions;if(h!==null)for(var d=0;d<h.length;d++){var y=h[d],v=o,R=l,O=R;e:for(;O!==null;){switch(O.tag){case 27:if(Sa(O.type)){Wt=O.stateNode,Jr=!1;break e}break;case 5:Wt=O.stateNode,Jr=!1;break e;case 3:case 4:Wt=O.stateNode.containerInfo,Jr=!0;break e}O=O.return}if(Wt===null)throw Error(r(160));q1(v,R,y),Wt=null,Jr=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)G1(l,o),l=l.sibling}var As=null;function G1(o,l){var h=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:vi(l,o),Ai(o),d&4&&(ga(3,o,o.return),vf(3,o),ga(5,o,o.return));break;case 1:vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),d&64&&Do&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var y=As;if(vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),d&4){var v=h!==null?h.memoizedState:null;if(d=o.memoizedState,h===null)if(d===null)if(o.stateNode===null){e:{d=o.type,h=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Fe]||v[ce]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(d),y.head.insertBefore(v,y.querySelector("head > title"))),ar(v,d,h),v[ce]=o,ft(v),d=v;break e;case"link":var R=BR("link","href",y).get(d+(h.href||""));if(R){for(var O=0;O<R.length;O++)if(v=R[O],v.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&v.getAttribute("rel")===(h.rel==null?null:h.rel)&&v.getAttribute("title")===(h.title==null?null:h.title)&&v.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){R.splice(O,1);break t}}v=y.createElement(d),ar(v,d,h),y.head.appendChild(v);break;case"meta":if(R=BR("meta","content",y).get(d+(h.content||""))){for(O=0;O<R.length;O++)if(v=R[O],v.getAttribute("content")===(h.content==null?null:""+h.content)&&v.getAttribute("name")===(h.name==null?null:h.name)&&v.getAttribute("property")===(h.property==null?null:h.property)&&v.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&v.getAttribute("charset")===(h.charSet==null?null:h.charSet)){R.splice(O,1);break t}}v=y.createElement(d),ar(v,d,h),y.head.appendChild(v);break;default:throw Error(r(468,d))}v[ce]=o,ft(v),d=v}o.stateNode=d}else jR(y,o.type,o.stateNode);else o.stateNode=zR(y,d,o.memoizedProps);else v!==d?(v===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):v.count--,d===null?jR(y,o.type,o.stateNode):zR(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&J0(o,o.memoizedProps,h.memoizedProps)}break;case 27:vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),h!==null&&d&4&&J0(o,o.memoizedProps,h.memoizedProps);break;case 5:if(vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),o.flags&32){y=o.stateNode;try{Hi(y,"")}catch(re){Ft(o,o.return,re)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,J0(o,y,h!==null?h.memoizedProps:y)),d&1024&&(tv=!0);break;case 6:if(vi(l,o),Ai(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,h=o.stateNode;try{h.nodeValue=d}catch(re){Ft(o,o.return,re)}}break;case 3:if(xm=null,y=As,As=Rm(l.containerInfo),vi(l,o),As=y,Ai(o),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Vf(l.containerInfo)}catch(re){Ft(o,o.return,re)}tv&&(tv=!1,K1(o));break;case 4:d=As,As=Rm(o.stateNode.containerInfo),vi(l,o),Ai(o),As=d;break;case 12:vi(l,o),Ai(o);break;case 13:vi(l,o),Ai(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(lv=on()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,nv(o,d)));break;case 22:y=o.memoizedState!==null;var F=h!==null&&h.memoizedState!==null,te=Do,le=yn;if(Do=te||y,yn=le||F,vi(l,o),yn=le,Do=te,Ai(o),d&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(h===null||F||Do||yn||eu(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){F=h=l;try{if(v=F.stateNode,y)R=v.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{O=F.stateNode;var he=F.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;O.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){Ft(F,F.return,re)}}}else if(l.tag===6){if(h===null){F=l;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(re){Ft(F,F.return,re)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,nv(o,h))));break;case 19:vi(l,o),Ai(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,nv(o,d)));break;case 30:break;case 21:break;default:vi(l,o),Ai(o)}}function Ai(o){var l=o.flags;if(l&2){try{for(var h,d=o.return;d!==null;){if(z1(d)){h=d;break}d=d.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var y=h.stateNode,v=Z0(o);dm(o,v,y);break;case 5:var R=h.stateNode;h.flags&32&&(Hi(R,""),h.flags&=-33);var O=Z0(o);dm(o,O,R);break;case 3:case 4:var F=h.stateNode.containerInfo,te=Z0(o);ev(o,te,F);break;default:throw Error(r(161))}}catch(le){Ft(o,o.return,le)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function K1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;K1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function ya(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)F1(o,l.alternate,l),l=l.sibling}function eu(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:ga(4,l,l.return),eu(l);break;case 1:$s(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&V1(l,l.return,h),eu(l);break;case 27:kf(l.stateNode);case 26:case 5:$s(l,l.return),eu(l);break;case 22:l.memoizedState===null&&eu(l);break;case 30:eu(l);break;default:eu(l)}o=o.sibling}}function _a(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=o,v=l,R=v.flags;switch(v.tag){case 0:case 11:case 15:_a(y,v,h),vf(4,v);break;case 1:if(_a(y,v,h),d=v,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(te){Ft(d,d.return,te)}if(d=v,y=d.updateQueue,y!==null){var O=d.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)Ew(F[y],O)}catch(te){Ft(d,d.return,te)}}h&&R&64&&L1(v),Af(v,v.return);break;case 27:B1(v);case 26:case 5:_a(y,v,h),h&&d===null&&R&4&&U1(v),Af(v,v.return);break;case 12:_a(y,v,h);break;case 13:_a(y,v,h),h&&R&4&&$1(y,v);break;case 22:v.memoizedState===null&&_a(y,v,h),Af(v,v.return);break;case 30:break;default:_a(y,v,h)}l=l.sibling}}function rv(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&sf(h))}function iv(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&sf(o))}function Gs(o,l,h,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)W1(o,l,h,d),l=l.sibling}function W1(o,l,h,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Gs(o,l,h,d),y&2048&&vf(9,l);break;case 1:Gs(o,l,h,d);break;case 3:Gs(o,l,h,d),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&sf(o)));break;case 12:if(y&2048){Gs(o,l,h,d),o=l.stateNode;try{var v=l.memoizedProps,R=v.id,O=v.onPostCommit;typeof O=="function"&&O(R,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){Ft(l,l.return,F)}}else Gs(o,l,h,d);break;case 13:Gs(o,l,h,d);break;case 23:break;case 22:v=l.stateNode,R=l.alternate,l.memoizedState!==null?v._visibility&2?Gs(o,l,h,d):Tf(o,l):v._visibility&2?Gs(o,l,h,d):(v._visibility|=2,bc(o,l,h,d,(l.subtreeFlags&10256)!==0)),y&2048&&rv(R,l);break;case 24:Gs(o,l,h,d),y&2048&&iv(l.alternate,l);break;default:Gs(o,l,h,d)}}function bc(o,l,h,d,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var v=o,R=l,O=h,F=d,te=R.flags;switch(R.tag){case 0:case 11:case 15:bc(v,R,O,F,y),vf(8,R);break;case 23:break;case 22:var le=R.stateNode;R.memoizedState!==null?le._visibility&2?bc(v,R,O,F,y):Tf(v,R):(le._visibility|=2,bc(v,R,O,F,y)),y&&te&2048&&rv(R.alternate,R);break;case 24:bc(v,R,O,F,y),y&&te&2048&&iv(R.alternate,R);break;default:bc(v,R,O,F,y)}l=l.sibling}}function Tf(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,d=l,y=d.flags;switch(d.tag){case 22:Tf(h,d),y&2048&&rv(d.alternate,d);break;case 24:Tf(h,d),y&2048&&iv(d.alternate,d);break;default:Tf(h,d)}l=l.sibling}}var Ef=8192;function Sc(o){if(o.subtreeFlags&Ef)for(o=o.child;o!==null;)Y1(o),o=o.sibling}function Y1(o){switch(o.tag){case 26:Sc(o),o.flags&Ef&&o.memoizedState!==null&&PU(As,o.memoizedState,o.memoizedProps);break;case 5:Sc(o);break;case 3:case 4:var l=As;As=Rm(o.stateNode.containerInfo),Sc(o),As=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=Ef,Ef=16777216,Sc(o),Ef=l):Sc(o));break;default:Sc(o)}}function Q1(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function bf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var d=l[h];Hn=d,J1(d,o)}Q1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)X1(o),o=o.sibling}function X1(o){switch(o.tag){case 0:case 11:case 15:bf(o),o.flags&2048&&ga(9,o,o.return);break;case 3:bf(o);break;case 12:bf(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,pm(o)):bf(o);break;default:bf(o)}}function pm(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var d=l[h];Hn=d,J1(d,o)}Q1(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:ga(8,l,l.return),pm(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,pm(l));break;default:pm(l)}o=o.sibling}}function J1(o,l){for(;Hn!==null;){var h=Hn;switch(h.tag){case 0:case 11:case 15:ga(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:sf(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Hn=d;else e:for(h=o;Hn!==null;){d=Hn;var y=d.sibling,v=d.return;if(H1(d),d===h){Hn=null;break e}if(y!==null){y.return=v,Hn=y;break e}Hn=v}}}var XV={getCacheForType:function(o){var l=vr(Ln),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h}},JV=typeof WeakMap=="function"?WeakMap:Map,Nt=0,$t=null,dt=null,Et=0,Mt=0,Ti=null,va=!1,wc=!1,sv=!1,Lo=0,ln=0,Aa=0,tu=0,ov=0,Ji=0,Rc=0,Sf=null,Zr=null,av=!1,lv=0,mm=1/0,gm=null,Ta=null,or=0,Ea=null,Cc=null,xc=0,uv=0,cv=null,Z1=null,wf=0,hv=null;function Ei(){if((Nt&2)!==0&&Et!==0)return Et&-Et;if(Y.T!==null){var o=mc;return o!==0?o:_v()}return $()}function eR(){Ji===0&&(Ji=(Et&536870912)===0||xt?Wr():536870912);var o=Xi.current;return o!==null&&(o.flags|=32),Ji}function bi(o,l,h){(o===$t&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)&&(kc(o,0),ba(o,Et,Ji,!1)),er(o,h),((Nt&2)===0||o!==$t)&&(o===$t&&((Nt&2)===0&&(tu|=h),ln===4&&ba(o,Et,Ji,!1)),Ks(o))}function tR(o,l,h){if((Nt&6)!==0)throw Error(r(327));var d=!h&&(l&124)===0&&(l&o.expiredLanes)===0||yr(o,l),y=d?tU(o,l):pv(o,l,!0),v=d;do{if(y===0){wc&&!d&&ba(o,l,0,!1);break}else{if(h=o.current.alternate,v&&!ZV(h)){y=pv(o,l,!1),v=!1;continue}if(y===2){if(v=l,o.errorRecoveryDisabledLanes&v)var R=0;else R=o.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){l=R;e:{var O=o;y=Sf;var F=O.current.memoizedState.isDehydrated;if(F&&(kc(O,R).flags|=256),R=pv(O,R,!1),R!==2){if(sv&&!F){O.errorRecoveryDisabledLanes|=v,tu|=v,y=4;break e}v=Zr,Zr=y,v!==null&&(Zr===null?Zr=v:Zr.push.apply(Zr,v))}y=R}if(v=!1,y!==2)continue}}if(y===1){kc(o,0),ba(o,l,0,!0);break}e:{switch(d=o,v=y,v){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:ba(d,l,Ji,!va);break e;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=lv+300-on(),10<y)){if(ba(d,l,Ji,!va),mi(d,0,!0)!==0)break e;d.timeoutHandle=IR(nR.bind(null,d,h,Zr,gm,av,l,Ji,tu,Rc,va,v,2,-0,0),y);break e}nR(d,h,Zr,gm,av,l,Ji,tu,Rc,va,v,0,-0,0)}}break}while(!0);Ks(o)}function nR(o,l,h,d,y,v,R,O,F,te,le,he,ne,re){if(o.timeoutHandle=-1,he=l.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Nf={stylesheets:null,count:0,unsuspend:DU},Y1(l),he=LU(),he!==null)){o.cancelPendingCommit=he(uR.bind(null,o,l,v,h,d,y,R,O,F,le,1,ne,re)),ba(o,v,R,!te);return}uR(o,l,v,h,d,y,R,O,F)}function ZV(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var y=h[d],v=y.getSnapshot;y=y.value;try{if(!yi(v(),y))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ba(o,l,h,d){l&=~ov,l&=~tu,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var y=l;0<y;){var v=31-Jt(y),R=1<<v;d[v]=-1,y&=~R}h!==0&&tr(o,h,l)}function ym(){return(Nt&6)===0?(Rf(0),!1):!0}function fv(){if(dt!==null){if(Mt===0)var o=dt.return;else o=dt,xo=Yl=null,k0(o),Tc=null,gf=0,o=dt;for(;o!==null;)P1(o.alternate,o),o=o.return;dt=null}}function kc(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,yU(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),fv(),$t=o,dt=h=wo(o.current,null),Et=l,Mt=0,Ti=null,va=!1,wc=yr(o,l),sv=!1,Rc=Ji=ov=tu=Aa=ln=0,Zr=Sf=null,av=!1,(l&8)!==0&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var y=31-Jt(d),v=1<<y;l|=o[y],d&=~v}return Lo=l,zp(),h}function rR(o,l){ot=null,Y.H=im,l===af||l===Wp?(l=Aw(),Mt=3):l===yw?(l=Aw(),Mt=4):Mt=l===T1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ti=l,dt===null&&(ln=1,um(o,Ki(l,o.current)))}function iR(){var o=Y.H;return Y.H=im,o===null?im:o}function sR(){var o=Y.A;return Y.A=XV,o}function dv(){ln=4,va||(Et&4194048)!==Et&&Xi.current!==null||(wc=!0),(Aa&134217727)===0&&(tu&134217727)===0||$t===null||ba($t,Et,Ji,!1)}function pv(o,l,h){var d=Nt;Nt|=2;var y=iR(),v=sR();($t!==o||Et!==l)&&(gm=null,kc(o,l)),l=!1;var R=ln;e:do try{if(Mt!==0&&dt!==null){var O=dt,F=Ti;switch(Mt){case 8:fv(),R=6;break e;case 3:case 2:case 9:case 6:Xi.current===null&&(l=!0);var te=Mt;if(Mt=0,Ti=null,Ic(o,O,F,te),h&&wc){R=0;break e}break;default:te=Mt,Mt=0,Ti=null,Ic(o,O,F,te)}}eU(),R=ln;break}catch(le){rR(o,le)}while(!0);return l&&o.shellSuspendCounter++,xo=Yl=null,Nt=d,Y.H=y,Y.A=v,dt===null&&($t=null,Et=0,zp()),R}function eU(){for(;dt!==null;)oR(dt)}function tU(o,l){var h=Nt;Nt|=2;var d=iR(),y=sR();$t!==o||Et!==l?(gm=null,mm=on()+500,kc(o,l)):wc=yr(o,l);e:do try{if(Mt!==0&&dt!==null){l=dt;var v=Ti;t:switch(Mt){case 1:Mt=0,Ti=null,Ic(o,l,v,1);break;case 2:case 9:if(_w(v)){Mt=0,Ti=null,aR(l);break}l=function(){Mt!==2&&Mt!==9||$t!==o||(Mt=7),Ks(o)},v.then(l,l);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:_w(v)?(Mt=0,Ti=null,aR(l)):(Mt=0,Ti=null,Ic(o,l,v,7));break;case 5:var R=null;switch(dt.tag){case 26:R=dt.memoizedState;case 5:case 27:var O=dt;if(!R||FR(R)){Mt=0,Ti=null;var F=O.sibling;if(F!==null)dt=F;else{var te=O.return;te!==null?(dt=te,_m(te)):dt=null}break t}}Mt=0,Ti=null,Ic(o,l,v,5);break;case 6:Mt=0,Ti=null,Ic(o,l,v,6);break;case 8:fv(),ln=6;break e;default:throw Error(r(462))}}nU();break}catch(le){rR(o,le)}while(!0);return xo=Yl=null,Y.H=d,Y.A=y,Nt=h,dt!==null?0:($t=null,Et=0,zp(),ln)}function nU(){for(;dt!==null&&!gs();)oR(dt)}function oR(o){var l=M1(o.alternate,o,Lo);o.memoizedProps=o.pendingProps,l===null?_m(o):dt=l}function aR(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=C1(h,l,l.pendingProps,l.type,void 0,Et);break;case 11:l=C1(h,l,l.pendingProps,l.type.render,l.ref,Et);break;case 5:k0(l);default:P1(h,l),l=dt=lw(l,Lo),l=M1(h,l,Lo)}o.memoizedProps=o.pendingProps,l===null?_m(o):dt=l}function Ic(o,l,h,d){xo=Yl=null,k0(l),Tc=null,gf=0;var y=l.return;try{if($V(o,y,l,h,Et)){ln=1,um(o,Ki(h,o.current)),dt=null;return}}catch(v){if(y!==null)throw dt=y,v;ln=1,um(o,Ki(h,o.current)),dt=null;return}l.flags&32768?(xt||d===1?o=!0:wc||(Et&536870912)!==0?o=!1:(va=o=!0,(d===2||d===9||d===3||d===6)&&(d=Xi.current,d!==null&&d.tag===13&&(d.flags|=16384))),lR(l,o)):_m(l)}function _m(o){var l=o;do{if((l.flags&32768)!==0){lR(l,va);return}o=l.return;var h=KV(l.alternate,l,Lo);if(h!==null){dt=h;return}if(l=l.sibling,l!==null){dt=l;return}dt=l=o}while(l!==null);ln===0&&(ln=5)}function lR(o,l){do{var h=WV(o.alternate,o);if(h!==null){h.flags&=32767,dt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){dt=o;return}dt=o=h}while(o!==null);ln=6,dt=null}function uR(o,l,h,d,y,v,R,O,F){o.cancelPendingCommit=null;do vm();while(or!==0);if((Nt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(v=l.lanes|l.childLanes,v|=i0,Ms(o,h,v,R,O,F),o===$t&&(dt=$t=null,Et=0),Cc=l,Ea=o,xc=h,uv=v,cv=y,Z1=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,oU(Bi,function(){return pR(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,y=oe.p,oe.p=2,R=Nt,Nt|=4;try{YV(o,l,h)}finally{Nt=R,oe.p=y,Y.T=d}}or=1,cR(),hR(),fR()}}function cR(){if(or===1){or=0;var o=Ea,l=Cc,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null;var d=oe.p;oe.p=2;var y=Nt;Nt|=4;try{G1(l,o);var v=Rv,R=JS(o.containerInfo),O=v.focusedElem,F=v.selectionRange;if(R!==O&&O&&O.ownerDocument&&XS(O.ownerDocument.documentElement,O)){if(F!==null&&Z_(O)){var te=F.start,le=F.end;if(le===void 0&&(le=te),"selectionStart"in O)O.selectionStart=te,O.selectionEnd=Math.min(le,O.value.length);else{var he=O.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),Qe=O.textContent.length,Ge=Math.min(F.start,Qe),Vt=F.end===void 0?Ge:Math.min(F.end,Qe);!re.extend&&Ge>Vt&&(R=Vt,Vt=Ge,Ge=R);var Q=QS(O,Ge),W=QS(O,Vt);if(Q&&W&&(re.rangeCount!==1||re.anchorNode!==Q.node||re.anchorOffset!==Q.offset||re.focusNode!==W.node||re.focusOffset!==W.offset)){var ee=he.createRange();ee.setStart(Q.node,Q.offset),re.removeAllRanges(),Ge>Vt?(re.addRange(ee),re.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),re.addRange(ee))}}}}for(he=[],re=O;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<he.length;O++){var ue=he[O];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Om=!!wv,Rv=wv=null}finally{Nt=y,oe.p=d,Y.T=h}}o.current=l,or=2}}function hR(){if(or===2){or=0;var o=Ea,l=Cc,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=Y.T,Y.T=null;var d=oe.p;oe.p=2;var y=Nt;Nt|=4;try{F1(o,l.alternate,l)}finally{Nt=y,oe.p=d,Y.T=h}}or=3}}function fR(){if(or===4||or===3){or=0,ks();var o=Ea,l=Cc,h=xc,d=Z1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?or=5:(or=0,Cc=Ea=null,dR(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Ta=null),Ds(h),l=l.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(ut,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=Y.T,y=oe.p,oe.p=2,Y.T=null;try{for(var v=o.onRecoverableError,R=0;R<d.length;R++){var O=d[R];v(O.value,{componentStack:O.stack})}}finally{Y.T=l,oe.p=y}}(xc&3)!==0&&vm(),Ks(o),y=o.pendingLanes,(h&4194090)!==0&&(y&42)!==0?o===hv?wf++:(wf=0,hv=o):wf=0,Rf(0)}}function dR(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,sf(l)))}function vm(o){return cR(),hR(),fR(),pR()}function pR(){if(or!==5)return!1;var o=Ea,l=uv;uv=0;var h=Ds(xc),d=Y.T,y=oe.p;try{oe.p=32>h?32:h,Y.T=null,h=cv,cv=null;var v=Ea,R=xc;if(or=0,Cc=Ea=null,xc=0,(Nt&6)!==0)throw Error(r(331));var O=Nt;if(Nt|=4,X1(v.current),W1(v,v.current,R,h),Nt=O,Rf(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(ut,v)}catch{}return!0}finally{oe.p=y,Y.T=d,dR(o,l)}}function mR(o,l,h){l=Ki(h,l),l=H0(o.stateNode,l,2),o=fa(o,l,2),o!==null&&(er(o,2),Ks(o))}function Ft(o,l,h){if(o.tag===3)mR(o,o,h);else for(;l!==null;){if(l.tag===3){mR(l,o,h);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ta===null||!Ta.has(d))){o=Ki(h,o),h=v1(2),d=fa(l,h,2),d!==null&&(A1(h,d,l,o),er(d,2),Ks(d));break}}l=l.return}}function mv(o,l,h){var d=o.pingCache;if(d===null){d=o.pingCache=new JV;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(h)||(sv=!0,y.add(h),o=rU.bind(null,o,l,h),l.then(o,o))}function rU(o,l,h){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,$t===o&&(Et&h)===h&&(ln===4||ln===3&&(Et&62914560)===Et&&300>on()-lv?(Nt&2)===0&&kc(o,0):ov|=h,Rc===Et&&(Rc=0)),Ks(o)}function gR(o,l){l===0&&(l=ji()),o=hc(o,l),o!==null&&(er(o,l),Ks(o))}function iU(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),gR(o,h)}function sU(o,l){var h=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(h=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),gR(o,h)}function oU(o,l){return di(o,l)}var Am=null,Oc=null,gv=!1,Tm=!1,yv=!1,nu=0;function Ks(o){o!==Oc&&o.next===null&&(Oc===null?Am=Oc=o:Oc=Oc.next=o),Tm=!0,gv||(gv=!0,lU())}function Rf(o,l){if(!yv&&Tm){yv=!0;do for(var h=!1,d=Am;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var v=0;else{var R=d.suspendedLanes,O=d.pingedLanes;v=(1<<31-Jt(42|o)+1)-1,v&=y&~(R&~O),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(h=!0,AR(d,v))}else v=Et,v=mi(d,d===$t?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||yr(d,v)||(h=!0,AR(d,v));d=d.next}while(h);yv=!1}}function aU(){yR()}function yR(){Tm=gv=!1;var o=0;nu!==0&&(gU()&&(o=nu),nu=0);for(var l=on(),h=null,d=Am;d!==null;){var y=d.next,v=_R(d,l);v===0?(d.next=null,h===null?Am=y:h.next=y,y===null&&(Oc=h)):(h=d,(o!==0||(v&3)!==0)&&(Tm=!0)),d=y}Rf(o)}function _R(o,l){for(var h=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var R=31-Jt(v),O=1<<R,F=y[R];F===-1?((O&h)===0||(O&d)!==0)&&(y[R]=Ns(O,l)):F<=l&&(o.expiredLanes|=O),v&=~O}if(l=$t,h=Et,h=mi(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,h===0||o===l&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Xt(d),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||yr(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(d!==null&&Xt(d),Ds(h)){case 2:case 8:h=ys;break;case 32:h=Bi;break;case 268435456:h=gr;break;default:h=Bi}return d=vR.bind(null,o),h=di(h,d),o.callbackPriority=l,o.callbackNode=h,l}return d!==null&&d!==null&&Xt(d),o.callbackPriority=2,o.callbackNode=null,2}function vR(o,l){if(or!==0&&or!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(vm()&&o.callbackNode!==h)return null;var d=Et;return d=mi(o,o===$t?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(tR(o,d,l),_R(o,on()),o.callbackNode!=null&&o.callbackNode===h?vR.bind(null,o):null)}function AR(o,l){if(vm())return null;tR(o,l,!0)}function lU(){_U(function(){(Nt&6)!==0?di(zi,aU):yR()})}function _v(){return nu===0&&(nu=Wr()),nu}function TR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Zu(""+o)}function ER(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function uU(o,l,h,d,y){if(l==="submit"&&h&&h.stateNode===y){var v=TR((y[ye]||null).action),R=d.submitter;R&&(l=(l=R[ye]||null)?TR(l.formAction):R.getAttribute("formAction"),l!==null&&(v=l,R=null));var O=new ec("action","action",null,d,y);o.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(nu!==0){var F=R?ER(y,R):new FormData(y);U0(h,{pending:!0,data:F,method:y.method,action:v},null,F)}}else typeof v=="function"&&(O.preventDefault(),F=R?ER(y,R):new FormData(y),U0(h,{pending:!0,data:F,method:y.method,action:v},v,F))},currentTarget:y}]})}}for(var vv=0;vv<r0.length;vv++){var Av=r0[vv],cU=Av.toLowerCase(),hU=Av[0].toUpperCase()+Av.slice(1);vs(cU,"on"+hU)}vs(tw,"onAnimationEnd"),vs(nw,"onAnimationIteration"),vs(rw,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(xV,"onTransitionRun"),vs(kV,"onTransitionStart"),vs(IV,"onTransitionCancel"),vs(iw,"onTransitionEnd"),we("onMouseEnter",["mouseout","mouseover"]),we("onMouseLeave",["mouseout","mouseover"]),we("onPointerEnter",["pointerout","pointerover"]),we("onPointerLeave",["pointerout","pointerover"]),de("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),de("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),de("onBeforeInput",["compositionend","keypress","textInput","paste"]),de("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cf));function bR(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var d=o[h],y=d.event;d=d.listeners;e:{var v=void 0;if(l)for(var R=d.length-1;0<=R;R--){var O=d[R],F=O.instance,te=O.currentTarget;if(O=O.listener,F!==v&&y.isPropagationStopped())break e;v=O,y.currentTarget=te;try{v(y)}catch(le){lm(le)}y.currentTarget=null,v=F}else for(R=0;R<d.length;R++){if(O=d[R],F=O.instance,te=O.currentTarget,O=O.listener,F!==v&&y.isPropagationStopped())break e;v=O,y.currentTarget=te;try{v(y)}catch(le){lm(le)}y.currentTarget=null,v=F}}}}function pt(o,l){var h=l[Ue];h===void 0&&(h=l[Ue]=new Set);var d=o+"__bubble";h.has(d)||(SR(l,o,2,!1),h.add(d))}function Tv(o,l,h){var d=0;l&&(d|=4),SR(h,o,d,l)}var Em="_reactListening"+Math.random().toString(36).slice(2);function Ev(o){if(!o[Em]){o[Em]=!0,_e.forEach(function(h){h!=="selectionchange"&&(fU.has(h)||Tv(h,!1,o),Tv(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Em]||(l[Em]=!0,Tv("selectionchange",!1,l))}}function SR(o,l,h,d){switch(WR(l)){case 2:var y=zU;break;case 8:y=BU;break;default:y=Lv}h=y.bind(null,l,h,o),y=void 0,!$i||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(l,h,{capture:!0,passive:y}):o.addEventListener(l,h,!0):y!==void 0?o.addEventListener(l,h,{passive:y}):o.addEventListener(l,h,!1)}function bv(o,l,h,d,y){var v=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var O=d.stateNode.containerInfo;if(O===y)break;if(R===4)for(R=d.return;R!==null;){var F=R.tag;if((F===3||F===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;O!==null;){if(R=He(O),R===null)return;if(F=R.tag,F===5||F===6||F===26||F===27){d=v=R;continue e}O=O.parentNode}}d=d.return}Sp(function(){var te=v,le=qi(h),he=[];e:{var ne=sw.get(o);if(ne!==void 0){var re=ec,Qe=o;switch(o){case"keypress":if(Us(h)===0)break e;case"keydown":case"keyup":re=oc;break;case"focusin":Qe="focus",re=rc;break;case"focusout":Qe="blur",re=rc;break;case"beforeblur":case"afterblur":re=rc;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Np;break;case tw:case nw:case rw:re=ic;break;case iw:re=Dp;break;case"scroll":case"scrollend":re=wp;break;case"wheel":re=ac;break;case"copy":case"cut":case"paste":re=sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Qh;break;case"toggle":case"beforetoggle":re=Lp}var Ge=(l&4)!==0,Vt=!Ge&&(o==="scroll"||o==="scrollend"),Q=Ge?ne!==null?ne+"Capture":null:ne;Ge=[];for(var W=te,ee;W!==null;){var ue=W;if(ee=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||ee===null||Q===null||(ue=Pl(W,Q),ue!=null&&Ge.push(xf(W,ue,ee))),Vt)break;W=W.return}0<Ge.length&&(ne=new re(ne,Qe,null,h,le),he.push({event:ne,listeners:Ge}))}}if((l&7)===0){e:{if(ne=o==="mouseover"||o==="pointerover",re=o==="mouseout"||o==="pointerout",ne&&h!==vo&&(Qe=h.relatedTarget||h.fromElement)&&(He(Qe)||Qe[Se]))break e;if((re||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(Qe=h.relatedTarget||h.toElement,re=te,Qe=Qe?He(Qe):null,Qe!==null&&(Vt=s(Qe),Ge=Qe.tag,Qe!==Vt||Ge!==5&&Ge!==27&&Ge!==6)&&(Qe=null)):(re=null,Qe=te),re!==Qe)){if(Ge=Gi,ue="onMouseLeave",Q="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(Ge=Qh,ue="onPointerLeave",Q="onPointerEnter",W="pointer"),Vt=re==null?ne:St(re),ee=Qe==null?ne:St(Qe),ne=new Ge(ue,W+"leave",re,h,le),ne.target=Vt,ne.relatedTarget=ee,ue=null,He(le)===te&&(Ge=new Ge(Q,W+"enter",Qe,h,le),Ge.target=ee,Ge.relatedTarget=Vt,ue=Ge),Vt=ue,re&&Qe)t:{for(Ge=re,Q=Qe,W=0,ee=Ge;ee;ee=Nc(ee))W++;for(ee=0,ue=Q;ue;ue=Nc(ue))ee++;for(;0<W-ee;)Ge=Nc(Ge),W--;for(;0<ee-W;)Q=Nc(Q),ee--;for(;W--;){if(Ge===Q||Q!==null&&Ge===Q.alternate)break t;Ge=Nc(Ge),Q=Nc(Q)}Ge=null}else Ge=null;re!==null&&wR(he,ne,re,Ge,!1),Qe!==null&&Vt!==null&&wR(he,Vt,Qe,Ge,!0)}}e:{if(ne=te?St(te):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Me=qS;else if(Pn(ne))if($S)Me=wV;else{Me=bV;var ct=EV}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&Hh(te.elementType)&&(Me=qS):Me=SV;if(Me&&(Me=Me(o,te))){So(he,Me,h,le);break e}ct&&ct(o,ne,te),o==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&aa(ne,"number",ne.value)}switch(ct=te?St(te):window,o){case"focusin":(Pn(ct)||ct.contentEditable==="true")&&(lc=ct,e0=te,Zh=null);break;case"focusout":Zh=e0=lc=null;break;case"mousedown":t0=!0;break;case"contextmenu":case"mouseup":case"dragend":t0=!1,ZS(he,h,le);break;case"selectionchange":if(CV)break;case"keydown":case"keyup":ZS(he,h,le)}var ze;if(js)e:{switch(o){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else At?se(o,h)&&(Ke="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ke="onCompositionStart");Ke&&(w&&h.locale!=="ko"&&(At||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&At&&(ze=$h()):(Vs=le,la="value"in Vs?Vs.value:Vs.textContent,At=!0)),ct=bm(te,Ke),0<ct.length&&(Ke=new Wh(Ke,o,null,h,le),he.push({event:Ke,listeners:ct}),ze?Ke.data=ze:(ze=Te(h),ze!==null&&(Ke.data=ze)))),(ze=E?Dn(o,h):Tt(o,h))&&(Ke=bm(te,"onBeforeInput"),0<Ke.length&&(ct=new Wh("onBeforeInput","beforeinput",null,h,le),he.push({event:ct,listeners:Ke}),ct.data=ze)),uU(he,o,te,h,le)}bR(he,l)})}function xf(o,l,h){return{instance:o,listener:l,currentTarget:h}}function bm(o,l){for(var h=l+"Capture",d=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Pl(o,h),y!=null&&d.unshift(xf(o,y,v)),y=Pl(o,l),y!=null&&d.push(xf(o,y,v))),o.tag===3)return d;o=o.return}return[]}function Nc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function wR(o,l,h,d,y){for(var v=l._reactName,R=[];h!==null&&h!==d;){var O=h,F=O.alternate,te=O.stateNode;if(O=O.tag,F!==null&&F===d)break;O!==5&&O!==26&&O!==27||te===null||(F=te,y?(te=Pl(h,v),te!=null&&R.unshift(xf(h,te,F))):y||(te=Pl(h,v),te!=null&&R.push(xf(h,te,F)))),h=h.return}R.length!==0&&o.push({event:l,listeners:R})}var dU=/\r\n?/g,pU=/\u0000|\uFFFD/g;function RR(o){return(typeof o=="string"?o:""+o).replace(dU,`
`).replace(pU,"")}function CR(o,l){return l=RR(l),RR(o)===l}function Sm(){}function Lt(o,l,h,d,y,v){switch(h){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Hi(o,""+d);break;case"className":mn(o,"class",d);break;case"tabIndex":mn(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(o,h,d);break;case"style":Fh(o,d,v);break;case"data":if(l!=="object"){mn(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(h);break}d=Zu(""+d),o.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(h==="formAction"?(l!=="input"&&Lt(o,l,"name",y.name,y,null),Lt(o,l,"formEncType",y.formEncType,y,null),Lt(o,l,"formMethod",y.formMethod,y,null),Lt(o,l,"formTarget",y.formTarget,y,null)):(Lt(o,l,"encType",y.encType,y,null),Lt(o,l,"method",y.method,y,null),Lt(o,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(h);break}d=Zu(""+d),o.setAttribute(h,d);break;case"onClick":d!=null&&(o.onclick=Sm);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(h=d.__html,h!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}h=Zu(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(h,""+d):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":d===!0?o.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(h,d):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(h,d):o.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(h):o.setAttribute(h,d);break;case"popover":pt("beforetoggle",o),pt("toggle",o),Bt(o,"popover",d);break;case"xlinkActuate":Pe(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Pe(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Pe(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Pe(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Pe(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Pe(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Pe(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Pe(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Pe(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Bt(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=K_.get(h)||h,Bt(o,h,d))}}function Sv(o,l,h,d,y,v){switch(h){case"style":Fh(o,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(h=d.__html,h!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof d=="string"?Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&Hi(o,""+d);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Sm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!G.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(y=h.endsWith("Capture"),l=h.slice(2,y?h.length-7:void 0),v=o[ye]||null,v=v!=null?v[h]:null,typeof v=="function"&&o.removeEventListener(l,v,y),typeof d=="function")){typeof v!="function"&&v!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,d,y);break e}h in o?o[h]=d:d===!0?o.setAttribute(h,""):Bt(o,h,d)}}}function ar(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",o),pt("load",o);var d=!1,y=!1,v;for(v in h)if(h.hasOwnProperty(v)){var R=h[v];if(R!=null)switch(v){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,v,R,h,null)}}y&&Lt(o,l,"srcSet",h.srcSet,h,null),d&&Lt(o,l,"src",h.src,h,null);return;case"input":pt("invalid",o);var O=v=R=y=null,F=null,te=null;for(d in h)if(h.hasOwnProperty(d)){var le=h[d];if(le!=null)switch(d){case"name":y=le;break;case"type":R=le;break;case"checked":F=le;break;case"defaultChecked":te=le;break;case"value":v=le;break;case"defaultValue":O=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:Lt(o,l,d,le,h,null)}}Nl(o,v,O,F,te,R,y,!1),Ju(o);return;case"select":pt("invalid",o),d=R=v=null;for(y in h)if(h.hasOwnProperty(y)&&(O=h[y],O!=null))switch(y){case"value":v=O;break;case"defaultValue":R=O;break;case"multiple":d=O;default:Lt(o,l,y,O,h,null)}l=v,h=R,o.multiple=!!d,l!=null?_o(o,!!d,l,!1):h!=null&&_o(o,!!d,h,!0);return;case"textarea":pt("invalid",o),v=y=d=null;for(R in h)if(h.hasOwnProperty(R)&&(O=h[R],O!=null))switch(R){case"value":d=O;break;case"defaultValue":y=O;break;case"children":v=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:Lt(o,l,R,O,h,null)}Ml(o,d,y,v),Ju(o);return;case"option":for(F in h)if(h.hasOwnProperty(F)&&(d=h[F],d!=null))switch(F){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Lt(o,l,F,d,h,null)}return;case"dialog":pt("beforetoggle",o),pt("toggle",o),pt("cancel",o),pt("close",o);break;case"iframe":case"object":pt("load",o);break;case"video":case"audio":for(d=0;d<Cf.length;d++)pt(Cf[d],o);break;case"image":pt("error",o),pt("load",o);break;case"details":pt("toggle",o);break;case"embed":case"source":case"link":pt("error",o),pt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in h)if(h.hasOwnProperty(te)&&(d=h[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,te,d,h,null)}return;default:if(Hh(l)){for(le in h)h.hasOwnProperty(le)&&(d=h[le],d!==void 0&&Sv(o,l,le,d,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(d=h[O],d!=null&&Lt(o,l,O,d,h,null))}function mU(o,l,h,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,R=null,O=null,F=null,te=null,le=null;for(re in h){var he=h[re];if(h.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":F=he;default:d.hasOwnProperty(re)||Lt(o,l,re,null,d,he)}}for(var ne in d){var re=d[ne];if(he=h[ne],d.hasOwnProperty(ne)&&(re!=null||he!=null))switch(ne){case"type":v=re;break;case"name":y=re;break;case"checked":te=re;break;case"defaultChecked":le=re;break;case"value":R=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:re!==he&&Lt(o,l,ne,re,d,he)}}gi(o,R,O,F,te,le,v,y);return;case"select":re=R=O=ne=null;for(v in h)if(F=h[v],h.hasOwnProperty(v)&&F!=null)switch(v){case"value":break;case"multiple":re=F;default:d.hasOwnProperty(v)||Lt(o,l,v,null,d,F)}for(y in d)if(v=d[y],F=h[y],d.hasOwnProperty(y)&&(v!=null||F!=null))switch(y){case"value":ne=v;break;case"defaultValue":O=v;break;case"multiple":R=v;default:v!==F&&Lt(o,l,y,v,d,F)}l=O,h=R,d=re,ne!=null?_o(o,!!h,ne,!1):!!d!=!!h&&(l!=null?_o(o,!!h,l,!0):_o(o,!!h,h?[]:"",!1));return;case"textarea":re=ne=null;for(O in h)if(y=h[O],h.hasOwnProperty(O)&&y!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Lt(o,l,O,null,d,y)}for(R in d)if(y=d[R],v=h[R],d.hasOwnProperty(R)&&(y!=null||v!=null))switch(R){case"value":ne=y;break;case"defaultValue":re=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==v&&Lt(o,l,R,y,d,v)}Dt(o,ne,re);return;case"option":for(var Qe in h)if(ne=h[Qe],h.hasOwnProperty(Qe)&&ne!=null&&!d.hasOwnProperty(Qe))switch(Qe){case"selected":o.selected=!1;break;default:Lt(o,l,Qe,null,d,ne)}for(F in d)if(ne=d[F],re=h[F],d.hasOwnProperty(F)&&ne!==re&&(ne!=null||re!=null))switch(F){case"selected":o.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Lt(o,l,F,ne,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in h)ne=h[Ge],h.hasOwnProperty(Ge)&&ne!=null&&!d.hasOwnProperty(Ge)&&Lt(o,l,Ge,null,d,ne);for(te in d)if(ne=d[te],re=h[te],d.hasOwnProperty(te)&&ne!==re&&(ne!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,l));break;default:Lt(o,l,te,ne,d,re)}return;default:if(Hh(l)){for(var Vt in h)ne=h[Vt],h.hasOwnProperty(Vt)&&ne!==void 0&&!d.hasOwnProperty(Vt)&&Sv(o,l,Vt,void 0,d,ne);for(le in d)ne=d[le],re=h[le],!d.hasOwnProperty(le)||ne===re||ne===void 0&&re===void 0||Sv(o,l,le,ne,d,re);return}}for(var Q in h)ne=h[Q],h.hasOwnProperty(Q)&&ne!=null&&!d.hasOwnProperty(Q)&&Lt(o,l,Q,null,d,ne);for(he in d)ne=d[he],re=h[he],!d.hasOwnProperty(he)||ne===re||ne==null&&re==null||Lt(o,l,he,ne,d,re)}var wv=null,Rv=null;function wm(o){return o.nodeType===9?o:o.ownerDocument}function xR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kR(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Cv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var xv=null;function gU(){var o=window.event;return o&&o.type==="popstate"?o===xv?!1:(xv=o,!0):(xv=null,!1)}var IR=typeof setTimeout=="function"?setTimeout:void 0,yU=typeof clearTimeout=="function"?clearTimeout:void 0,OR=typeof Promise=="function"?Promise:void 0,_U=typeof queueMicrotask=="function"?queueMicrotask:typeof OR<"u"?function(o){return OR.resolve(null).then(o).catch(vU)}:IR;function vU(o){setTimeout(function(){throw o})}function Sa(o){return o==="head"}function NR(o,l){var h=l,d=0,y=0;do{var v=h.nextSibling;if(o.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(0<d&&8>d){h=d;var R=o.ownerDocument;if(h&1&&kf(R.documentElement),h&2&&kf(R.body),h&4)for(h=R.head,kf(h),R=h.firstChild;R;){var O=R.nextSibling,F=R.nodeName;R[Fe]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&R.rel.toLowerCase()==="stylesheet"||h.removeChild(R),R=O}}if(y===0){o.removeChild(v),Vf(l);return}y--}else h==="$"||h==="$?"||h==="$!"?y++:d=h.charCodeAt(0)-48;else d=0;h=v}while(h);Vf(l)}function kv(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":kv(h),xe(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function AU(o,l,h,d){for(;o.nodeType===1;){var y=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Fe])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Ts(o.nextSibling),o===null)break}return null}function TU(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Ts(o.nextSibling),o===null))return null;return o}function Iv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function EU(o,l){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")l();else{var d=function(){l(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ts(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Ov=null;function MR(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}function DR(o,l,h){switch(l=wm(h),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function kf(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);xe(o)}var Zi=new Map,PR=new Set;function Rm(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Vo=oe.d;oe.d={f:bU,r:SU,D:wU,C:RU,L:CU,m:xU,X:IU,S:kU,M:OU};function bU(){var o=Vo.f(),l=ym();return o||l}function SU(o){var l=it(o);l!==null&&l.tag===5&&l.type==="form"?t1(l):Vo.r(o)}var Mc=typeof document>"u"?null:document;function LR(o,l,h){var d=Mc;if(d&&typeof l=="string"&&l){var y=bn(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof h=="string"&&(y+='[crossorigin="'+h+'"]'),PR.has(y)||(PR.add(y),o={rel:o,crossOrigin:h,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),ar(l,"link",o),ft(l),d.head.appendChild(l)))}}function wU(o){Vo.D(o),LR("dns-prefetch",o,null)}function RU(o,l){Vo.C(o,l),LR("preconnect",o,l)}function CU(o,l,h){Vo.L(o,l,h);var d=Mc;if(d&&o&&l){var y='link[rel="preload"][as="'+bn(l)+'"]';l==="image"&&h&&h.imageSrcSet?(y+='[imagesrcset="'+bn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(y+='[imagesizes="'+bn(h.imageSizes)+'"]')):y+='[href="'+bn(o)+'"]';var v=y;switch(l){case"style":v=Dc(o);break;case"script":v=Pc(o)}Zi.has(v)||(o=p({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),Zi.set(v,o),d.querySelector(y)!==null||l==="style"&&d.querySelector(If(v))||l==="script"&&d.querySelector(Of(v))||(l=d.createElement("link"),ar(l,"link",o),ft(l),d.head.appendChild(l)))}}function xU(o,l){Vo.m(o,l);var h=Mc;if(h&&o){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+bn(d)+'"][href="'+bn(o)+'"]',v=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Pc(o)}if(!Zi.has(v)&&(o=p({rel:"modulepreload",href:o},l),Zi.set(v,o),h.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Of(v)))return}d=h.createElement("link"),ar(d,"link",o),ft(d),h.head.appendChild(d)}}}function kU(o,l,h){Vo.S(o,l,h);var d=Mc;if(d&&o){var y=_t(d).hoistableStyles,v=Dc(o);l=l||"default";var R=y.get(v);if(!R){var O={loading:0,preload:null};if(R=d.querySelector(If(v)))O.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},h),(h=Zi.get(v))&&Nv(o,h);var F=R=d.createElement("link");ft(F),ar(F,"link",o),F._p=new Promise(function(te,le){F.onload=te,F.onerror=le}),F.addEventListener("load",function(){O.loading|=1}),F.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Cm(R,l,d)}R={type:"stylesheet",instance:R,count:1,state:O},y.set(v,R)}}}function IU(o,l){Vo.X(o,l);var h=Mc;if(h&&o){var d=_t(h).hoistableScripts,y=Pc(o),v=d.get(y);v||(v=h.querySelector(Of(y)),v||(o=p({src:o,async:!0},l),(l=Zi.get(y))&&Mv(o,l),v=h.createElement("script"),ft(v),ar(v,"link",o),h.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function OU(o,l){Vo.M(o,l);var h=Mc;if(h&&o){var d=_t(h).hoistableScripts,y=Pc(o),v=d.get(y);v||(v=h.querySelector(Of(y)),v||(o=p({src:o,async:!0,type:"module"},l),(l=Zi.get(y))&&Mv(o,l),v=h.createElement("script"),ft(v),ar(v,"link",o),h.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function VR(o,l,h,d){var y=(y=Ve.current)?Rm(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=Dc(h.href),h=_t(y).hoistableStyles,d=h.get(l),d||(d={type:"style",instance:null,count:0,state:null},h.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Dc(h.href);var v=_t(y).hoistableStyles,R=v.get(o);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,R),(v=y.querySelector(If(o)))&&!v._p&&(R.instance=v,R.state.loading=5),Zi.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Zi.set(o,h),v||NU(y,o,h,R.state))),l&&d===null)throw Error(r(528,""));return R}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Pc(h),h=_t(y).hoistableScripts,d=h.get(l),d||(d={type:"script",instance:null,count:0,state:null},h.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Dc(o){return'href="'+bn(o)+'"'}function If(o){return'link[rel="stylesheet"]['+o+"]"}function UR(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function NU(o,l,h,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),ar(l,"link",h),ft(l),o.head.appendChild(l))}function Pc(o){return'[src="'+bn(o)+'"]'}function Of(o){return"script[async]"+o}function zR(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+bn(h.href)+'"]');if(d)return l.instance=d,ft(d),d;var y=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),ft(d),ar(d,"style",y),Cm(d,h.precedence,o),l.instance=d;case"stylesheet":y=Dc(h.href);var v=o.querySelector(If(y));if(v)return l.state.loading|=4,l.instance=v,ft(v),v;d=UR(h),(y=Zi.get(y))&&Nv(d,y),v=(o.ownerDocument||o).createElement("link"),ft(v);var R=v;return R._p=new Promise(function(O,F){R.onload=O,R.onerror=F}),ar(v,"link",d),l.state.loading|=4,Cm(v,h.precedence,o),l.instance=v;case"script":return v=Pc(h.src),(y=o.querySelector(Of(v)))?(l.instance=y,ft(y),y):(d=h,(y=Zi.get(v))&&(d=p({},h),Mv(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),ft(y),ar(y,"link",d),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Cm(d,h.precedence,o));return l.instance}function Cm(o,l,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,v=y,R=0;R<d.length;R++){var O=d[R];if(O.dataset.precedence===l)v=O;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function Nv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Mv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var xm=null;function BR(o,l,h){if(xm===null){var d=new Map,y=xm=new Map;y.set(h,d)}else y=xm,d=y.get(h),d||(d=new Map,y.set(h,d));if(d.has(o))return d;for(d.set(o,null),h=h.getElementsByTagName(o),y=0;y<h.length;y++){var v=h[y];if(!(v[Fe]||v[ce]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var R=v.getAttribute(l)||"";R=o+R;var O=d.get(R);O?O.push(v):d.set(R,[v])}}return d}function jR(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function MU(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function FR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Nf=null;function DU(){}function PU(o,l,h){if(Nf===null)throw Error(r(475));var d=Nf;if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Dc(h.href),v=o.querySelector(If(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=km.bind(d),o.then(d,d)),l.state.loading|=4,l.instance=v,ft(v);return}v=o.ownerDocument||o,h=UR(h),(y=Zi.get(y))&&Nv(h,y),v=v.createElement("link"),ft(v);var R=v;R._p=new Promise(function(O,F){R.onload=O,R.onerror=F}),ar(v,"link",h),l.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=km.bind(d),o.addEventListener("load",l),o.addEventListener("error",l))}}function LU(){if(Nf===null)throw Error(r(475));var o=Nf;return o.stylesheets&&o.count===0&&Dv(o,o.stylesheets),0<o.count?function(l){var h=setTimeout(function(){if(o.stylesheets&&Dv(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(h)}}:null}function km(){if(this.count--,this.count===0){if(this.stylesheets)Dv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Im=null;function Dv(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Im=new Map,l.forEach(VU,o),Im=null,km.call(o))}function VU(o,l){if(!(l.state.loading&4)){var h=Im.get(o);if(h)var d=h.get(null);else{h=new Map,Im.set(o,h);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var R=y[v];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(h.set(R.dataset.precedence,R),d=R)}d&&h.set(null,d)}y=l.instance,R=y.getAttribute("data-precedence"),v=h.get(R)||d,v===d&&h.set(null,y),h.set(R,y),this.count++,d=km.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var Mf={$$typeof:j,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function UU(o,l,h,d,y,v,R,O){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function HR(o,l,h,d,y,v,R,O,F,te,le,he){return o=new UU(o,l,h,R,O,F,te,he),l=1,v===!0&&(l|=24),v=_i(3,null,null,l),o.current=v,v.stateNode=o,l=m0(),l.refCount++,o.pooledCache=l,l.refCount++,v.memoizedState={element:d,isDehydrated:h,cache:l},v0(v),o}function qR(o){return o?(o=fc,o):fc}function $R(o,l,h,d,y,v){y=qR(y),d.context===null?d.context=y:d.pendingContext=y,d=ha(l),d.payload={element:h},v=v===void 0?null:v,v!==null&&(d.callback=v),h=fa(o,d,l),h!==null&&(bi(h,o,l),uf(h,o,l))}function GR(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function Pv(o,l){GR(o,l),(o=o.alternate)&&GR(o,l)}function KR(o){if(o.tag===13){var l=hc(o,67108864);l!==null&&bi(l,o,67108864),Pv(o,67108864)}}var Om=!0;function zU(o,l,h,d){var y=Y.T;Y.T=null;var v=oe.p;try{oe.p=2,Lv(o,l,h,d)}finally{oe.p=v,Y.T=y}}function BU(o,l,h,d){var y=Y.T;Y.T=null;var v=oe.p;try{oe.p=8,Lv(o,l,h,d)}finally{oe.p=v,Y.T=y}}function Lv(o,l,h,d){if(Om){var y=Vv(d);if(y===null)bv(o,l,d,Nm,h),YR(o,d);else if(FU(y,o,l,h,d))d.stopPropagation();else if(YR(o,d),l&4&&-1<jU.indexOf(o)){for(;y!==null;){var v=it(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var R=En(v.pendingLanes);if(R!==0){var O=v;for(O.pendingLanes|=2,O.entangledLanes|=2;R;){var F=1<<31-Jt(R);O.entanglements[1]|=F,R&=~F}Ks(v),(Nt&6)===0&&(mm=on()+500,Rf(0))}}break;case 13:O=hc(v,2),O!==null&&bi(O,v,2),ym(),Pv(v,2)}if(v=Vv(d),v===null&&bv(o,l,d,Nm,h),v===y)break;y=v}y!==null&&d.stopPropagation()}else bv(o,l,d,null,h)}}function Vv(o){return o=qi(o),Uv(o)}var Nm=null;function Uv(o){if(Nm=null,o=He(o),o!==null){var l=s(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=a(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Nm=o,null}function WR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Is()){case zi:return 2;case ys:return 8;case Bi:case pi:return 32;case gr:return 268435456;default:return 32}default:return 32}}var zv=!1,wa=null,Ra=null,Ca=null,Df=new Map,Pf=new Map,xa=[],jU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function YR(o,l){switch(o){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":Df.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pf.delete(l.pointerId)}}function Lf(o,l,h,d,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:l,domEventName:h,eventSystemFlags:d,nativeEvent:v,targetContainers:[y]},l!==null&&(l=it(l),l!==null&&KR(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function FU(o,l,h,d,y){switch(l){case"focusin":return wa=Lf(wa,o,l,h,d,y),!0;case"dragenter":return Ra=Lf(Ra,o,l,h,d,y),!0;case"mouseover":return Ca=Lf(Ca,o,l,h,d,y),!0;case"pointerover":var v=y.pointerId;return Df.set(v,Lf(Df.get(v)||null,o,l,h,d,y)),!0;case"gotpointercapture":return v=y.pointerId,Pf.set(v,Lf(Pf.get(v)||null,o,l,h,d,y)),!0}return!1}function QR(o){var l=He(o.target);if(l!==null){var h=s(l);if(h!==null){if(l=h.tag,l===13){if(l=a(h),l!==null){o.blockedOn=l,X(o.priority,function(){if(h.tag===13){var d=Ei();d=nr(d);var y=hc(h,d);y!==null&&bi(y,h,d),Pv(h,d)}});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Mm(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=Vv(o.nativeEvent);if(h===null){h=o.nativeEvent;var d=new h.constructor(h.type,h);vo=d,h.target.dispatchEvent(d),vo=null}else return l=it(h),l!==null&&KR(l),o.blockedOn=h,!1;l.shift()}return!0}function XR(o,l,h){Mm(o)&&h.delete(l)}function HU(){zv=!1,wa!==null&&Mm(wa)&&(wa=null),Ra!==null&&Mm(Ra)&&(Ra=null),Ca!==null&&Mm(Ca)&&(Ca=null),Df.forEach(XR),Pf.forEach(XR)}function Dm(o,l){o.blockedOn===l&&(o.blockedOn=null,zv||(zv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HU)))}var Pm=null;function JR(o){Pm!==o&&(Pm=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pm===o&&(Pm=null);for(var l=0;l<o.length;l+=3){var h=o[l],d=o[l+1],y=o[l+2];if(typeof d!="function"){if(Uv(d||h)===null)continue;break}var v=it(h);v!==null&&(o.splice(l,3),l-=3,U0(v,{pending:!0,data:y,method:h.method,action:d},d,y))}}))}function Vf(o){function l(F){return Dm(F,o)}wa!==null&&Dm(wa,o),Ra!==null&&Dm(Ra,o),Ca!==null&&Dm(Ca,o),Df.forEach(l),Pf.forEach(l);for(var h=0;h<xa.length;h++){var d=xa[h];d.blockedOn===o&&(d.blockedOn=null)}for(;0<xa.length&&(h=xa[0],h.blockedOn===null);)QR(h),h.blockedOn===null&&xa.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var y=h[d],v=h[d+1],R=y[ye]||null;if(typeof v=="function")R||JR(h);else if(R){var O=null;if(v&&v.hasAttribute("formAction")){if(y=v,R=v[ye]||null)O=R.formAction;else if(Uv(y)!==null)continue}else O=R.action;typeof O=="function"?h[d+1]=O:(h.splice(d,3),d-=3),JR(h)}}}function Bv(o){this._internalRoot=o}Lm.prototype.render=Bv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,d=Ei();$R(h,d,o,l,null,null)},Lm.prototype.unmount=Bv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;$R(o.current,2,null,o,null,null),ym(),l[Se]=null}};function Lm(o){this._internalRoot=o}Lm.prototype.unstable_scheduleHydration=function(o){if(o){var l=$();o={blockedOn:null,target:o,priority:l};for(var h=0;h<xa.length&&l!==0&&l<xa[h].priority;h++);xa.splice(h,0,o),h===0&&QR(o)}};var ZR=e.version;if(ZR!=="19.1.0")throw Error(r(527,ZR,"19.1.0"));oe.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=c(l),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var qU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{ut=Vm.inject(qU),et=Vm}catch{}}return zf.createRoot=function(o,l){if(!i(o))throw Error(r(299));var h=!1,d="",y=m1,v=g1,R=y1,O=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks)),l=HR(o,1,!1,null,null,h,d,y,v,R,O,null),o[Se]=l.current,Ev(o),new Bv(l)},zf.hydrateRoot=function(o,l,h){if(!i(o))throw Error(r(299));var d=!1,y="",v=m1,R=g1,O=y1,F=null,te=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onUncaughtError!==void 0&&(v=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(F=h.unstable_transitionCallbacks),h.formState!==void 0&&(te=h.formState)),l=HR(o,1,!0,l,h??null,d,y,v,R,O,F,te),l.context=qR(null),h=l.current,d=Ei(),d=nr(d),y=ha(d),y.callback=null,fa(h,y,d),h=d,l.current.lanes=h,er(l,h),Ks(l),o[Se]=l.current,Ev(o),new Lm(l)},zf.version="19.1.0",zf}var uC;function ZU(){if(uC)return Hv.exports;uC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hv.exports=JU(),Hv.exports}var e4=ZU(),Bf={},cC;function t4(){if(cC)return Bf;cC=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.parse=a,Bf.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function a(_,A){const T=new s,b=_.length;if(b<2)return T;const S=(A==null?void 0:A.decode)||p;let C=0;do{const L=_.indexOf("=",C);if(L===-1)break;const j=_.indexOf(";",C),q=j===-1?b:j;if(L>q){C=_.lastIndexOf(";",L-1)+1;continue}const V=u(_,C,L),D=c(_,L,V),N=_.slice(V,D);if(T[N]===void 0){let k=u(_,L+1,q),x=c(_,q,k);const z=S(_.slice(k,x));T[N]=z}C=q+1}while(C<b);return T}function u(_,A,T){do{const b=_.charCodeAt(A);if(b!==32&&b!==9)return A}while(++A<T);return T}function c(_,A,T){for(;A>T;){const b=_.charCodeAt(--A);if(b!==32&&b!==9)return A+1}return T}function f(_,A,T){const b=(T==null?void 0:T.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const S=b(A);if(!e.test(S))throw new TypeError(`argument val is invalid: ${A}`);let C=_+"="+S;if(!T)return C;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);C+="; Max-Age="+T.maxAge}if(T.domain){if(!t.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);C+="; Domain="+T.domain}if(T.path){if(!r.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);C+="; Path="+T.path}if(T.expires){if(!g(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);C+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(C+="; HttpOnly"),T.secure&&(C+="; Secure"),T.partitioned&&(C+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return C}function p(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function g(_){return i.call(_)==="[object Date]"}return Bf}t4();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bO=n=>{throw TypeError(n)},n4=(n,e,t)=>e.has(n)||bO("Cannot "+t),Kv=(n,e,t)=>(n4(n,e,"read from private field"),t?t.call(n):e.get(n)),r4=(n,e,t)=>e.has(n)?bO("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),hC="popstate";function i4(n={}){function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Nd("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:cl(i)}return o4(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function An(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s4(){return Math.random().toString(36).substring(2,10)}function fC(n,e){return{usr:n.state,key:n.key,idx:e}}function Nd(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Tl(e):e,state:t,key:e&&e.key||r||s4()}}function cl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Tl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function o4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",c=null,f=p();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function p(){return(a.state||{idx:null}).idx}function g(){u="POP";let S=p(),C=S==null?null:S-f;f=S,c&&c({action:u,location:b.location,delta:C})}function _(S,C){u="PUSH";let L=Nd(b.location,S,C);f=p()+1;let j=fC(L,f),q=b.createHref(L);try{a.pushState(j,"",q)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(q)}s&&c&&c({action:u,location:b.location,delta:1})}function A(S,C){u="REPLACE";let L=Nd(b.location,S,C);f=p();let j=fC(L,f),q=b.createHref(L);a.replaceState(j,"",q),s&&c&&c({action:u,location:b.location,delta:0})}function T(S){let C=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof S=="string"?S:cl(S);return L=L.replace(/ $/,"%20"),ht(C,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,C)}let b={get action(){return u},get location(){return n(i,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(hC,g),c=S,()=>{i.removeEventListener(hC,g),c=null}},createHref(S){return e(i,S)},createURL:T,encodeLocation(S){let C=T(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:A,go(S){return a.go(S)}};return b}var Zf,dC=class{constructor(n){if(r4(this,Zf,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Kv(this,Zf).has(n))return Kv(this,Zf).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Kv(this,Zf).set(n,e)}};Zf=new WeakMap;var a4=new Set(["lazy","caseSensitive","path","id","index","children"]);function l4(n){return a4.has(n)}var u4=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function c4(n){return u4.has(n)}function h4(n){return n.index===!0}function Ng(n,e,t=[],r={}){return n.map((i,s)=>{let a=[...t,String(s)],u=typeof i.id=="string"?i.id:a.join("-");if(ht(i.index!==!0||!i.children,"Cannot specify children on an index route"),ht(!r[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),h4(i)){let c={...i,...e(i),id:u};return r[u]=c,c}else{let c={...i,...e(i),id:u,children:void 0};return r[u]=c,i.children&&(c.children=Ng(i.children,e,a,r)),c}})}function Va(n,e,t="/"){return ag(n,e,t,!1)}function ag(n,e,t,r){let i=typeof e=="string"?Tl(e):e,s=cs(i.pathname||"/",t);if(s==null)return null;let a=SO(n);d4(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=S4(s);u=E4(a[c],f,r)}return u}function f4(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function SO(n,e=[],t=[],r=""){let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=ro([r,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(ht(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),SO(s.children,e,p,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:A4(f,s.index),routesMeta:p})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of wO(s.path))i(s,a,c)}),e}function wO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=wO(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function d4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:T4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var p4=/^:[\w-]+$/,m4=3,g4=2,y4=1,_4=10,v4=-2,pC=n=>n==="*";function A4(n,e){let t=n.split("/"),r=t.length;return t.some(pC)&&(r+=v4),e&&(r+=g4),t.filter(i=>!pC(i)).reduce((i,s)=>i+(p4.test(s)?m4:s===""?y4:_4),r)}function T4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function E4(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=Mg({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),_=c.route;if(!g&&f&&t&&!r[r.length-1].route.index&&(g=Mg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:ro([s,g.pathname]),pathnameBase:C4(ro([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=ro([s,g.pathnameBase]))}return a}function Mg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=b4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:g},_)=>{if(p==="*"){let T=u[_]||"";a=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const A=u[_];return g&&!A?f[p]=void 0:f[p]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function b4(n,e=!1,t=!0){An(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function S4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return An(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function cs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function w4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Tl(n):n;return{pathname:t?t.startsWith("/")?t:R4(t,e):e,search:x4(r),hash:k4(i)}}function R4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Wv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Jy(n){let e=RO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Zy(n,e,t,r=!1){let i;typeof n=="string"?i=Tl(n):(i={...n},ht(!i.pathname||!i.pathname.includes("?"),Wv("?","pathname","search",i)),ht(!i.pathname||!i.pathname.includes("#"),Wv("#","pathname","hash",i)),ht(!i.search||!i.search.includes("#"),Wv("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?e[g]:"/"}let c=w4(i,u),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}var ro=n=>n.join("/").replace(/\/\/+/g,"/"),C4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),x4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,k4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Dg=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Md(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var CO=["POST","PUT","PATCH","DELETE"],I4=new Set(CO),O4=["GET",...CO],N4=new Set(O4),M4=new Set([301,302,303,307,308]),D4=new Set([307,308]),Yv={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},P4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},IE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L4=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),xO="remix-router-transitions",kO=Symbol("ResetLoaderData");function V4(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ht(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],i=n.mapRouteProperties||L4,s={},a=Ng(n.routes,i,void 0,s),u,c=n.basename||"/",f=n.dataStrategy||F4,p={unstable_middleware:!1,...n.future},g=null,_=new Set,A=null,T=null,b=null,S=n.hydrationData!=null,C=Va(a,n.history.location,c),L=!1,j=null;if(C==null&&!n.patchRoutesOnNavigation){let $=rs(404,{pathname:n.history.location.pathname}),{matches:X,route:Z}=RC(a);C=X,j={[Z.id]:$}}C&&!n.hydrationData&&tr(C,a,n.history.location.pathname).active&&(C=null);let q;if(C)if(C.some($=>$.route.lazy))q=!1;else if(!C.some($=>$.route.loader))q=!0;else{let $=n.hydrationData?n.hydrationData.loaderData:null,X=n.hydrationData?n.hydrationData.errors:null;if(X){let Z=C.findIndex(ce=>X[ce.route.id]!==void 0);q=C.slice(0,Z+1).every(ce=>!nT(ce.route,$,X))}else q=C.every(Z=>!nT(Z.route,$,X))}else{q=!1,C=[];let $=tr(null,a,n.history.location.pathname);$.active&&$.matches&&(L=!0,C=$.matches)}let V,D={historyAction:n.history.action,location:n.history.location,matches:C,initialized:q,navigation:Yv,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||j,fetchers:new Map,blockers:new Map},N="POP",k=!1,x,z=!1,U=new Map,B=null,P=!1,Ee=!1,be=new Set,Y=new Map,oe=0,Ae=-1,je=new Map,H=new Set,ie=new Map,pe=new Map,ae=new Set,Re=new Map,Ce,Ve=null;function Kt(){if(g=n.history.listen(({action:$,location:X,delta:Z})=>{if(Ce){Ce(),Ce=void 0;return}An(Re.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=Ns({currentLocation:D.location,nextLocation:X,historyAction:$});if(ce&&Z!=null){let ye=new Promise(Se=>{Ce=Se});n.history.go(Z*-1),yr(ce,{state:"blocked",location:X,proceed(){yr(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),ye.then(()=>n.history.go(Z))},reset(){let Se=new Map(D.blockers);Se.set(ce,jf),Ut({blockers:Se})}});return}return Xt($,X)}),t){Z4(e,U);let $=()=>ez(e,U);e.addEventListener("pagehide",$),B=()=>e.removeEventListener("pagehide",$)}return D.initialized||Xt("POP",D.location,{initialHydration:!0}),V}function Rt(){g&&g(),B&&B(),_.clear(),x&&x.abort(),D.fetchers.forEach(($,X)=>Jt(X)),D.blockers.forEach(($,X)=>mi(X))}function mr($){return _.add($),()=>_.delete($)}function Ut($,X={}){D={...D,...$};let Z=[],ce=[];D.fetchers.forEach((ye,Se)=>{ye.state==="idle"&&(ae.has(Se)?Z.push(Se):ce.push(Se))}),ae.forEach(ye=>{!D.fetchers.has(ye)&&!Y.has(ye)&&Z.push(ye)}),[..._].forEach(ye=>ye(D,{deletedFetchers:Z,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),Z.forEach(ye=>Jt(ye)),ce.forEach(ye=>D.fetchers.delete(ye))}function Nn($,X,{flushSync:Z}={}){var Le,Fe;let ce=D.actionData!=null&&D.navigation.formMethod!=null&&wi(D.navigation.formMethod)&&D.navigation.state==="loading"&&((Le=$.state)==null?void 0:Le._isRedirect)!==!0,ye;X.actionData?Object.keys(X.actionData).length>0?ye=X.actionData:ye=null:ce?ye=D.actionData:ye=null;let Se=X.loaderData?SC(D.loaderData,X.loaderData,X.matches||[],X.errors):D.loaderData,Ue=D.blockers;Ue.size>0&&(Ue=new Map(Ue),Ue.forEach((xe,He)=>Ue.set(He,jf)));let Ie=k===!0||D.navigation.formMethod!=null&&wi(D.navigation.formMethod)&&((Fe=$.state)==null?void 0:Fe._isRedirect)!==!0;u&&(a=u,u=void 0),P||N==="POP"||(N==="PUSH"?n.history.push($,$.state):N==="REPLACE"&&n.history.replace($,$.state));let Ne;if(N==="POP"){let xe=U.get(D.location.pathname);xe&&xe.has($.pathname)?Ne={currentLocation:D.location,nextLocation:$}:U.has($.pathname)&&(Ne={currentLocation:$,nextLocation:D.location})}else if(z){let xe=U.get(D.location.pathname);xe?xe.add($.pathname):(xe=new Set([$.pathname]),U.set(D.location.pathname,xe)),Ne={currentLocation:D.location,nextLocation:$}}Ut({...X,actionData:ye,loaderData:Se,historyAction:N,location:$,initialized:!0,navigation:Yv,revalidation:"idle",restoreScrollPosition:Ms($,X.matches||D.matches),preventScrollReset:Ie,blockers:Ue},{viewTransitionOpts:Ne,flushSync:Z===!0}),N="POP",k=!1,z=!1,P=!1,Ee=!1,Ve==null||Ve.resolve(),Ve=null}async function Zn($,X){if(typeof $=="number"){n.history.go($);return}let Z=tT(D.location,D.matches,c,$,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:ce,submission:ye,error:Se}=mC(!1,Z,X),Ue=D.location,Ie=Nd(D.location,ce,X&&X.state);Ie={...Ie,...n.history.encodeLocation(Ie)};let Ne=X&&X.replace!=null?X.replace:void 0,Le="PUSH";Ne===!0?Le="REPLACE":Ne===!1||ye!=null&&wi(ye.formMethod)&&ye.formAction===D.location.pathname+D.location.search&&(Le="REPLACE");let Fe=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,xe=(X&&X.flushSync)===!0,He=Ns({currentLocation:Ue,nextLocation:Ie,historyAction:Le});if(He){yr(He,{state:"blocked",location:Ie,proceed(){yr(He,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),Zn($,X)},reset(){let it=new Map(D.blockers);it.set(He,jf),Ut({blockers:it})}});return}await Xt(Le,Ie,{submission:ye,pendingError:Se,preventScrollReset:Fe,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:xe})}function di(){Ve||(Ve=tz()),Mr(),Ut({revalidation:"loading"});let $=Ve.promise;return D.navigation.state==="submitting"?$:D.navigation.state==="idle"?(Xt(D.historyAction,D.location,{startUninterruptedRevalidation:!0}),$):(Xt(N||D.historyAction,D.navigation.location,{overrideNavigation:D.navigation,enableViewTransition:z===!0}),$)}async function Xt($,X,Z){x&&x.abort(),x=null,N=$,P=(Z&&Z.startUninterruptedRevalidation)===!0,er(D.location,D.matches),k=(Z&&Z.preventScrollReset)===!0,z=(Z&&Z.enableViewTransition)===!0;let ce=u||a,ye=Z&&Z.overrideNavigation,Se=Z!=null&&Z.initialHydration&&D.matches&&D.matches.length>0&&!L?D.matches:Va(ce,X,c),Ue=(Z&&Z.flushSync)===!0;if(Se&&D.initialized&&!Ee&&W4(D.location,X)&&!(Z&&Z.submission&&wi(Z.submission.formMethod))){Nn(X,{matches:Se},{flushSync:Ue});return}let Ie=tr(Se,ce,X.pathname);if(Ie.active&&Ie.matches&&(Se=Ie.matches),!Se){let{error:_t,notFoundMatches:ft,route:_e}=Wr(X.pathname);Nn(X,{matches:ft,loaderData:{},errors:{[_e.id]:_t}},{flushSync:Ue});return}x=new AbortController;let Ne=zc(n.history,X,x.signal,Z&&Z.submission),Le=new dC(n.unstable_getContext?await n.unstable_getContext():void 0),Fe;if(Z&&Z.pendingError)Fe=[uu(Se).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&wi(Z.submission.formMethod)){let _t=await gs(Ne,X,Z.submission,Se,Le,Ie.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:Ue});if(_t.shortCircuited)return;if(_t.pendingActionResult){let[ft,_e]=_t.pendingActionResult;if(Si(_e)&&Md(_e.error)&&_e.error.status===404){x=null,Nn(X,{matches:_t.matches,loaderData:{},errors:{[ft]:_e.error}});return}}Se=_t.matches||Se,Fe=_t.pendingActionResult,ye=Qv(X,Z.submission),Ue=!1,Ie.active=!1,Ne=zc(n.history,Ne.url,Ne.signal)}let{shortCircuited:xe,matches:He,loaderData:it,errors:St}=await ks(Ne,X,Se,Le,Ie.active,ye,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,Ue,Fe);xe||(x=null,Nn(X,{matches:He||Se,...wC(Fe),loaderData:it,errors:St}))}async function gs($,X,Z,ce,ye,Se,Ue,Ie={}){Mr();let Ne=X4(X,Z);if(Ut({navigation:Ne},{flushSync:Ie.flushSync===!0}),Se){let xe=await Ot(ce,X.pathname,$.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){let He=uu(xe.partialMatches).route.id;return{matches:xe.partialMatches,pendingActionResult:[He,{type:"error",error:xe.error}]}}else if(xe.matches)ce=xe.matches;else{let{notFoundMatches:He,error:it,route:St}=Wr(X.pathname);return{matches:He,pendingActionResult:[St.id,{type:"error",error:it}]}}}let Le,Fe=ed(ce,X);if(!Fe.route.action&&!Fe.route.lazy)Le={type:"error",error:rs(405,{method:$.method,pathname:X.pathname,routeId:Fe.route.id})};else{let xe=Xc(i,s,$,ce,Fe,Ue?[]:r,ye),He=await gr($,xe,ye,null);if(Le=He[Fe.route.id],!Le){for(let it of ce)if(He[it.route.id]){Le=He[it.route.id];break}}if($.signal.aborted)return{shortCircuited:!0}}if(du(Le)){let xe;return Ie&&Ie.replace!=null?xe=Ie.replace:xe=TC(Le.response.headers.get("Location"),new URL($.url),c)===D.location.pathname+D.location.search,await pi($,Le,!0,{submission:Z,replace:xe}),{shortCircuited:!0}}if(Si(Le)){let xe=uu(ce,Fe.route.id);return(Ie&&Ie.replace)!==!0&&(N="PUSH"),{matches:ce,pendingActionResult:[xe.route.id,Le,Fe.route.id]}}return{matches:ce,pendingActionResult:[Fe.route.id,Le]}}async function ks($,X,Z,ce,ye,Se,Ue,Ie,Ne,Le,Fe,xe){let He=Se||Qv(X,Ue),it=Ue||Ie||xC(He),St=!P&&!Le;if(ye){if(St){let en=on(xe);Ut({navigation:He,...en!==void 0?{actionData:en}:{}},{flushSync:Fe})}let Pe=await Ot(Z,X.pathname,$.signal);if(Pe.type==="aborted")return{shortCircuited:!0};if(Pe.type==="error"){let en=uu(Pe.partialMatches).route.id;return{matches:Pe.partialMatches,loaderData:{},errors:{[en]:Pe.error}}}else if(Pe.matches)Z=Pe.matches;else{let{error:en,notFoundMatches:_r,route:Qr}=Wr(X.pathname);return{matches:_r,loaderData:{},errors:{[Qr.id]:en}}}}let _t=u||a,{dsMatches:ft,revalidatingFetchers:_e}=gC($,ce,i,s,n.history,D,Z,it,X,Le?[]:r,Le===!0,Ee,be,ae,ie,H,_t,c,xe);if(Ae=++oe,!n.dataStrategy&&!ft.some(Pe=>Pe.shouldLoad)&&_e.length===0){let Pe=Lr();return Nn(X,{matches:Z,loaderData:{},errors:xe&&Si(xe[1])?{[xe[0]]:xe[1].error}:null,...wC(xe),...Pe?{fetchers:new Map(D.fetchers)}:{}},{flushSync:Fe}),{shortCircuited:!0}}if(St){let Pe={};if(!ye){Pe.navigation=He;let en=on(xe);en!==void 0&&(Pe.actionData=en)}_e.length>0&&(Pe.fetchers=Is(_e)),Ut(Pe,{flushSync:Fe})}_e.forEach(Pe=>{Dr(Pe.key),Pe.controller&&Y.set(Pe.key,Pe.controller)});let G=()=>_e.forEach(Pe=>Dr(Pe.key));x&&x.signal.addEventListener("abort",G);let{loaderResults:de,fetcherResults:we}=await Kr(ft,_e,$,ce);if($.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",G),_e.forEach(Pe=>Y.delete(Pe.key));let tt=Um(de);if(tt)return await pi($,tt.result,!0,{replace:Ne}),{shortCircuited:!0};if(tt=Um(we),tt)return H.add(tt.key),await pi($,tt.result,!0,{replace:Ne}),{shortCircuited:!0};let{loaderData:zt,errors:Ct}=bC(D,Z,de,xe,_e,we);Le&&D.errors&&(Ct={...D.errors,...Ct});let Zt=Lr(),Bt=Tn(Ae),mn=Zt||Bt||_e.length>0;return{matches:Z,loaderData:zt,errors:Ct,...mn?{fetchers:new Map(D.fetchers)}:{}}}function on($){if($&&!Si($[1]))return{[$[0]]:$[1].data};if(D.actionData)return Object.keys(D.actionData).length===0?null:D.actionData}function Is($){return $.forEach(X=>{let Z=D.fetchers.get(X.key),ce=Ff(void 0,Z?Z.data:void 0);D.fetchers.set(X.key,ce)}),new Map(D.fetchers)}async function zi($,X,Z,ce){Dr($);let ye=(ce&&ce.flushSync)===!0,Se=u||a,Ue=tT(D.location,D.matches,c,Z,X,ce==null?void 0:ce.relative),Ie=Va(Se,Ue,c),Ne=tr(Ie,Se,Ue);if(Ne.active&&Ne.matches&&(Ie=Ne.matches),!Ie){et($,X,rs(404,{pathname:Ue}),{flushSync:ye});return}let{path:Le,submission:Fe,error:xe}=mC(!0,Ue,ce);if(xe){et($,X,xe,{flushSync:ye});return}let He=ed(Ie,Le),it=new dC(n.unstable_getContext?await n.unstable_getContext():void 0),St=(ce&&ce.preventScrollReset)===!0;if(Fe&&wi(Fe.formMethod)){await ys($,X,Le,He,Ie,it,Ne.active,ye,St,Fe);return}ie.set($,{routeId:X,path:Le}),await Bi($,X,Le,He,Ie,it,Ne.active,ye,St,Fe)}async function ys($,X,Z,ce,ye,Se,Ue,Ie,Ne,Le){Mr(),ie.delete($);function Fe(jt){if(!jt.route.action&&!jt.route.lazy){let Fi=rs(405,{method:Le.formMethod,pathname:Z,routeId:X});return et($,X,Fi,{flushSync:Ie}),!0}return!1}if(!Ue&&Fe(ce))return;let xe=D.fetchers.get($);ut($,J4(Le,xe),{flushSync:Ie});let He=new AbortController,it=zc(n.history,Z,He.signal,Le);if(Ue){let jt=await Ot(ye,Z,it.signal,$);if(jt.type==="aborted")return;if(jt.type==="error"){et($,X,jt.error,{flushSync:Ie});return}else if(jt.matches){if(ye=jt.matches,ce=ed(ye,Z),Fe(ce))return}else{et($,X,rs(404,{pathname:Z}),{flushSync:Ie});return}}Y.set($,He);let St=oe,_t=Xc(i,s,it,ye,ce,r,Se),_e=(await gr(it,_t,Se,$))[ce.route.id];if(it.signal.aborted){Y.get($)===He&&Y.delete($);return}if(ae.has($)){if(du(_e)||Si(_e)){ut($,Na(void 0));return}}else{if(du(_e))if(Y.delete($),Ae>St){ut($,Na(void 0));return}else return H.add($),ut($,Ff(Le)),pi(it,_e,!1,{fetcherSubmission:Le,preventScrollReset:Ne});if(Si(_e)){et($,X,_e.error);return}}let G=D.navigation.location||D.location,de=zc(n.history,G,He.signal),we=u||a,tt=D.navigation.state!=="idle"?Va(we,D.navigation.location,c):D.matches;ht(tt,"Didn't find any matches after fetcher action");let zt=++oe;je.set($,zt);let Ct=Ff(Le,_e.data);D.fetchers.set($,Ct);let{dsMatches:Zt,revalidatingFetchers:Bt}=gC(de,Se,i,s,n.history,D,tt,Le,G,r,!1,Ee,be,ae,ie,H,we,c,[ce.route.id,_e]);Bt.filter(jt=>jt.key!==$).forEach(jt=>{let Fi=jt.key,yo=D.fetchers.get(Fi),rr=Ff(void 0,yo?yo.data:void 0);D.fetchers.set(Fi,rr),Dr(Fi),jt.controller&&Y.set(Fi,jt.controller)}),Ut({fetchers:new Map(D.fetchers)});let mn=()=>Bt.forEach(jt=>Dr(jt.key));He.signal.addEventListener("abort",mn);let{loaderResults:Pe,fetcherResults:en}=await Kr(Zt,Bt,de,Se);if(He.signal.aborted)return;He.signal.removeEventListener("abort",mn),je.delete($),Y.delete($),Bt.forEach(jt=>Y.delete(jt.key));let _r=Um(Pe);if(_r)return pi(de,_r.result,!1,{preventScrollReset:Ne});if(_r=Um(en),_r)return H.add(_r.key),pi(de,_r.result,!1,{preventScrollReset:Ne});let{loaderData:Qr,errors:Ps}=bC(D,tt,Pe,void 0,Bt,en);if(D.fetchers.has($)){let jt=Na(_e.data);D.fetchers.set($,jt)}Tn(zt),D.navigation.state==="loading"&&zt>Ae?(ht(N,"Expected pending action"),x&&x.abort(),Nn(D.navigation.location,{matches:tt,loaderData:Qr,errors:Ps,fetchers:new Map(D.fetchers)})):(Ut({errors:Ps,loaderData:SC(D.loaderData,Qr,tt,Ps),fetchers:new Map(D.fetchers)}),Ee=!1)}async function Bi($,X,Z,ce,ye,Se,Ue,Ie,Ne,Le){let Fe=D.fetchers.get($);ut($,Ff(Le,Fe?Fe.data:void 0),{flushSync:Ie});let xe=new AbortController,He=zc(n.history,Z,xe.signal);if(Ue){let _e=await Ot(ye,Z,He.signal,$);if(_e.type==="aborted")return;if(_e.type==="error"){et($,X,_e.error,{flushSync:Ie});return}else if(_e.matches)ye=_e.matches,ce=ed(ye,Z);else{et($,X,rs(404,{pathname:Z}),{flushSync:Ie});return}}Y.set($,xe);let it=oe,St=Xc(i,s,He,ye,ce,r,Se),ft=(await gr(He,St,Se,$))[ce.route.id];if(Y.get($)===xe&&Y.delete($),!He.signal.aborted){if(ae.has($)){ut($,Na(void 0));return}if(du(ft))if(Ae>it){ut($,Na(void 0));return}else{H.add($),await pi(He,ft,!1,{preventScrollReset:Ne});return}if(Si(ft)){et($,X,ft.error);return}ut($,Na(ft.data))}}async function pi($,X,Z,{submission:ce,fetcherSubmission:ye,preventScrollReset:Se,replace:Ue}={}){X.response.headers.has("X-Remix-Revalidate")&&(Ee=!0);let Ie=X.response.headers.get("Location");ht(Ie,"Expected a Location header on the redirect Response"),Ie=TC(Ie,new URL($.url),c);let Ne=Nd(D.location,Ie,{_isRedirect:!0});if(t){let St=!1;if(X.response.headers.has("X-Remix-Reload-Document"))St=!0;else if(IE.test(Ie)){const _t=n.history.createURL(Ie);St=_t.origin!==e.location.origin||cs(_t.pathname,c)==null}if(St){Ue?e.location.replace(Ie):e.location.assign(Ie);return}}x=null;let Le=Ue===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Fe,formAction:xe,formEncType:He}=D.navigation;!ce&&!ye&&Fe&&xe&&He&&(ce=xC(D.navigation));let it=ce||ye;if(D4.has(X.response.status)&&it&&wi(it.formMethod))await Xt(Le,Ne,{submission:{...it,formAction:Ie},preventScrollReset:Se||k,enableViewTransition:Z?z:void 0});else{let St=Qv(Ne,ce);await Xt(Le,Ne,{overrideNavigation:St,fetcherSubmission:ye,preventScrollReset:Se||k,enableViewTransition:Z?z:void 0})}}async function gr($,X,Z,ce){let ye,Se={};try{ye=await H4(f,$,X,ce,Z,!1)}catch(Ue){return X.filter(Ie=>Ie.shouldLoad).forEach(Ie=>{Se[Ie.route.id]={type:"error",error:Ue}}),Se}for(let[Ue,Ie]of Object.entries(ye))if(Y4(Ie)){let Ne=Ie.result;Se[Ue]={type:"redirect",response:G4(Ne,$,Ue,X,c)}}else Se[Ue]=await $4(Ie);return Se}async function Kr($,X,Z,ce){let ye=gr(Z,$,ce,null),Se=Promise.all(X.map(async Ne=>{if(Ne.matches&&Ne.match&&Ne.request&&Ne.controller){let Fe=(await gr(Ne.request,Ne.matches,ce,Ne.key))[Ne.match.route.id];return{[Ne.key]:Fe}}else return Promise.resolve({[Ne.key]:{type:"error",error:rs(404,{pathname:Ne.path})}})})),Ue=await ye,Ie=(await Se).reduce((Ne,Le)=>Object.assign(Ne,Le),{});return{loaderResults:Ue,fetcherResults:Ie}}function Mr(){Ee=!0,ie.forEach(($,X)=>{Y.has(X)&&be.add(X),Dr(X)})}function ut($,X,Z={}){D.fetchers.set($,X),Ut({fetchers:new Map(D.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function et($,X,Z,ce={}){let ye=uu(D.matches,X);Jt($),Ut({errors:{[ye.route.id]:Z},fetchers:new Map(D.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function Mn($){return pe.set($,(pe.get($)||0)+1),ae.has($)&&ae.delete($),D.fetchers.get($)||P4}function Jt($){let X=D.fetchers.get($);Y.has($)&&!(X&&X.state==="loading"&&je.has($))&&Dr($),ie.delete($),je.delete($),H.delete($),ae.delete($),be.delete($),D.fetchers.delete($)}function Os($){let X=(pe.get($)||0)-1;X<=0?(pe.delete($),ae.add($)):pe.set($,X),Ut({fetchers:new Map(D.fetchers)})}function Dr($){let X=Y.get($);X&&(X.abort(),Y.delete($))}function Pr($){for(let X of $){let Z=Mn(X),ce=Na(Z.data);D.fetchers.set(X,ce)}}function Lr(){let $=[],X=!1;for(let Z of H){let ce=D.fetchers.get(Z);ht(ce,`Expected fetcher: ${Z}`),ce.state==="loading"&&(H.delete(Z),$.push(Z),X=!0)}return Pr($),X}function Tn($){let X=[];for(let[Z,ce]of je)if(ce<$){let ye=D.fetchers.get(Z);ht(ye,`Expected fetcher: ${Z}`),ye.state==="loading"&&(Dr(Z),je.delete(Z),X.push(Z))}return Pr(X),X.length>0}function En($,X){let Z=D.blockers.get($)||jf;return Re.get($)!==X&&Re.set($,X),Z}function mi($){D.blockers.delete($),Re.delete($)}function yr($,X){let Z=D.blockers.get($)||jf;ht(Z.state==="unblocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="proceeding"||Z.state==="blocked"&&X.state==="unblocked"||Z.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${X.state}`);let ce=new Map(D.blockers);ce.set($,X),Ut({blockers:ce})}function Ns({currentLocation:$,nextLocation:X,historyAction:Z}){if(Re.size===0)return;Re.size>1&&An(!1,"A router only supports one blocker at a time");let ce=Array.from(Re.entries()),[ye,Se]=ce[ce.length-1],Ue=D.blockers.get(ye);if(!(Ue&&Ue.state==="proceeding")&&Se({currentLocation:$,nextLocation:X,historyAction:Z}))return ye}function Wr($){let X=rs(404,{pathname:$}),Z=u||a,{matches:ce,route:ye}=RC(Z);return{notFoundMatches:ce,route:ye,error:X}}function ji($,X,Z){if(A=$,b=X,T=Z||null,!S&&D.navigation===Yv){S=!0;let ce=Ms(D.location,D.matches);ce!=null&&Ut({restoreScrollPosition:ce})}return()=>{A=null,b=null,T=null}}function Yr($,X){return T&&T($,X.map(ce=>f4(ce,D.loaderData)))||$.key}function er($,X){if(A&&b){let Z=Yr($,X);A[Z]=b()}}function Ms($,X){if(A){let Z=Yr($,X),ce=A[Z];if(typeof ce=="number")return ce}return null}function tr($,X,Z){if(n.patchRoutesOnNavigation)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:ag(X,Z,c,!0)}}else return{active:!0,matches:ag(X,Z,c,!0)||[]};return{active:!1,matches:null}}async function Ot($,X,Z,ce){if(!n.patchRoutesOnNavigation)return{type:"success",matches:$};let ye=$;for(;;){let Se=u==null,Ue=u||a,Ie=s;try{await n.patchRoutesOnNavigation({signal:Z,path:X,matches:ye,fetcherKey:ce,patch:(Fe,xe)=>{Z.aborted||yC(Fe,xe,Ue,Ie,i)}})}catch(Fe){return{type:"error",error:Fe,partialMatches:ye}}finally{Se&&!Z.aborted&&(a=[...a])}if(Z.aborted)return{type:"aborted"};let Ne=Va(Ue,X,c);if(Ne)return{type:"success",matches:Ne};let Le=ag(Ue,X,c,!0);if(!Le||ye.length===Le.length&&ye.every((Fe,xe)=>Fe.route.id===Le[xe].route.id))return{type:"success",matches:null};ye=Le}}function nr($){s={},u=Ng($,i,void 0,s)}function Ds($,X){let Z=u==null;yC($,X,u||a,s,i),Z&&(a=[...a],Ut({}))}return V={get basename(){return c},get future(){return p},get state(){return D},get routes(){return a},get window(){return e},initialize:Kt,subscribe:mr,enableScrollRestoration:ji,navigate:Zn,fetch:zi,revalidate:di,createHref:$=>n.history.createHref($),encodeLocation:$=>n.history.encodeLocation($),getFetcher:Mn,deleteFetcher:Os,dispose:Rt,getBlocker:En,deleteBlocker:mi,patchRoutes:Ds,_internalFetchControllers:Y,_internalSetRoutes:nr},V}function U4(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function tT(n,e,t,r,i,s){let a,u;if(i){a=[];for(let f of e)if(a.push(f),f.route.id===i){u=f;break}}else a=e,u=e[e.length-1];let c=Zy(r||".",Jy(a),cs(n.pathname,t)||n.pathname,s==="path");if(r==null&&(c.search=n.search,c.hash=n.hash),(r==null||r===""||r===".")&&u){let f=OE(c.search);if(u.route.index&&!f)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&f){let p=new URLSearchParams(c.search),g=p.getAll("index");p.delete("index"),g.filter(A=>A).forEach(A=>p.append("index",A));let _=p.toString();c.search=_?`?${_}`:""}}return t!=="/"&&(c.pathname=c.pathname==="/"?t:ro([t,c.pathname])),cl(c)}function mC(n,e,t){if(!t||!U4(t))return{path:e};if(t.formMethod&&!Q4(t.formMethod))return{path:e,error:rs(405,{method:t.formMethod})};let r=()=>({path:e,error:rs(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=PO(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!wi(s))return r();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((_,[A,T])=>`${_}${A}=${T}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!wi(s))return r();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}ht(typeof FormData=="function","FormData is not available in this environment");let u,c;if(t.formData)u=iT(t.formData),c=t.formData;else if(t.body instanceof FormData)u=iT(t.body),c=t.body;else if(t.body instanceof URLSearchParams)u=t.body,c=EC(u);else if(t.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(t.body),c=EC(u)}catch{return r()}let f={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(wi(f.formMethod))return{path:e,submission:f};let p=Tl(e);return n&&p.search&&OE(p.search)&&u.append("index",""),p.search=`?${u}`,{path:cl(p),submission:f}}function gC(n,e,t,r,i,s,a,u,c,f,p,g,_,A,T,b,S,C,L){var B;let j=L?Si(L[1])?L[1].error:L[1].data:void 0,q=i.createURL(s.location),V=i.createURL(c),D;if(p&&s.errors){let P=Object.keys(s.errors)[0];D=a.findIndex(Ee=>Ee.route.id===P)}else if(L&&Si(L[1])){let P=L[0];D=a.findIndex(Ee=>Ee.route.id===P)-1}let N=L?L[1].statusCode:void 0,k=N&&N>=400,x={currentUrl:q,currentParams:((B=s.matches[0])==null?void 0:B.params)||{},nextUrl:V,nextParams:a[0].params,...u,actionResult:j,actionStatus:N},z=a.map((P,Ee)=>{let{route:be}=P,Y=null;if(D!=null&&Ee>D?Y=!1:be.lazy?Y=!0:be.loader==null?Y=!1:p?Y=nT(be,s.loaderData,s.errors):z4(s.loaderData,s.matches[Ee],P)&&(Y=!0),Y!==null)return rT(t,r,n,P,f,e,Y);let oe=k?!1:g||q.pathname+q.search===V.pathname+V.search||q.search!==V.search||B4(s.matches[Ee],P),Ae={...x,defaultShouldRevalidate:oe},je=Pg(P,Ae);return rT(t,r,n,P,f,e,je,Ae)}),U=[];return T.forEach((P,Ee)=>{if(p||!a.some(ie=>ie.route.id===P.routeId)||A.has(Ee))return;let be=Va(S,P.path,C);if(!be){U.push({key:Ee,routeId:P.routeId,path:P.path,matches:null,match:null,request:null,controller:null});return}if(b.has(Ee))return;let Y=s.fetchers.get(Ee),oe=ed(be,P.path),Ae=new AbortController,je=zc(i,P.path,Ae.signal),H=null;if(_.has(Ee))_.delete(Ee),H=Xc(t,r,je,be,oe,f,e);else if(Y&&Y.state!=="idle"&&Y.data===void 0)g&&(H=Xc(t,r,je,be,oe,f,e));else{let ie={...x,defaultShouldRevalidate:k?!1:g};Pg(oe,ie)&&(H=Xc(t,r,je,be,oe,f,e,ie))}H&&U.push({key:Ee,routeId:P.routeId,path:P.path,matches:H,match:oe,request:je,controller:Ae})}),{dsMatches:z,revalidatingFetchers:U}}function nT(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function z4(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function B4(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Pg(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function yC(n,e,t,r,i){let s;if(n){let c=r[n];ht(c,`No route found to patch children into: routeId = ${n}`),c.children||(c.children=[]),s=c.children}else s=t;let a=e.filter(c=>!s.some(f=>IO(c,f))),u=Ng(a,i,[n||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...u)}function IO(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>IO(t,s))}):!1}var _C=new WeakMap,OO=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let i=t[e.id];if(ht(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[n];if(!s)return;let a=_C.get(i);a||(a={},_C.set(i,a));let u=a[n];if(u)return u;let c=(async()=>{let f=l4(n),g=i[n]!==void 0&&n!=="hasErrorBoundary";if(f)An(!f,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),a[n]=Promise.resolve();else if(g)An(!1,`Route "${i.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let _=await s();_!=null&&(Object.assign(i,{[n]:_}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[n]=void 0,Object.values(i.lazy).every(_=>_===void 0)&&(i.lazy=void 0))})();return a[n]=c,c},vC=new WeakMap;function j4(n,e,t,r,i){let s=t[n.id];if(ht(s,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let p=vC.get(s);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let g=(async()=>{ht(typeof n.lazy=="function","No lazy route function found");let _=await n.lazy(),A={};for(let T in _){let b=_[T];if(b===void 0)continue;let S=c4(T),L=s[T]!==void 0&&T!=="hasErrorBoundary";S?An(!S,"Route property "+T+" is not a supported property to be returned from a lazy route function. This property will be ignored."):L?An(!L,`Route "${s.id}" has a static property "${T}" defined but its lazy function is also returning a value for this property. The lazy route property "${T}" will be ignored.`):A[T]=b}Object.assign(s,A),Object.assign(s,{...r(s),lazy:void 0})})();return vC.set(s,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let a=Object.keys(n.lazy),u=[],c;for(let p of a){if(i&&i.includes(p))continue;let g=OO({key:p,route:n,manifest:t,mapRouteProperties:r});g&&(u.push(g),p===e&&(c=g))}let f=u.length>0?Promise.all(u).then(()=>{}):void 0;return f==null||f.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:c}}async function AC(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{t[e[s].route.id]=i}),t}async function F4(n){return n.matches.some(e=>e.route.unstable_middleware)?NO(n,!1,()=>AC(n),(e,t)=>({[t]:{type:"error",result:e}})):AC(n)}async function NO(n,e,t,r){let{matches:i,request:s,params:a,context:u}=n,c={handlerResult:void 0};try{let f=i.flatMap(g=>g.route.unstable_middleware?g.route.unstable_middleware.map(_=>[g.route.id,_]):[]),p=await MO({request:s,params:a,context:u},f,e,c,t);return e?p:c.handlerResult}catch(f){if(!c.middlewareError)throw f;let p=await r(c.middlewareError.error,c.middlewareError.routeId);return c.handlerResult?Object.assign(c.handlerResult,p):p}}async function MO(n,e,t,r,i,s=0){let{request:a}=n;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let u=e[s];if(!u)return r.handlerResult=await i(),r.handlerResult;let[c,f]=u,p=!1,g,_=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");p=!0,await MO(n,e,t,r,i,s+1)};try{let A=await f({request:n.request,params:n.params,context:n.context},_);return p?A===void 0?g:A:_()}catch(A){throw r.middlewareError?r.middlewareError.error!==A&&(r.middlewareError={routeId:c,error:A}):r.middlewareError={routeId:c,error:A},A}}function DO(n,e,t,r,i){let s=OO({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:n}),a=j4(r.route,wi(t.method)?"action":"loader",e,n,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function rT(n,e,t,r,i,s,a,u=null){let c=!1,f=DO(n,e,t,r,i);return{...r,_lazyPromises:f,shouldLoad:a,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler(p){return c=!0,u?typeof p=="boolean"?Pg(r,{...u,defaultShouldRevalidate:p}):Pg(r,u):a},resolve(p){return c||a||p&&t.method==="GET"&&(r.route.lazy||r.route.loader)?q4({request:t,match:r,lazyHandlerPromise:f==null?void 0:f.handler,lazyRoutePromise:f==null?void 0:f.route,handlerOverride:p,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Xc(n,e,t,r,i,s,a,u=null){return r.map(c=>c.route.id!==i.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler:()=>!1,_lazyPromises:DO(n,e,t,c,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:rT(n,e,t,c,s,a,!0,u))}async function H4(n,e,t,r,i,s){t.some(f=>{var p;return(p=f._lazyPromises)==null?void 0:p.middleware})&&await Promise.all(t.map(f=>{var p;return(p=f._lazyPromises)==null?void 0:p.middleware}));let a={request:e,params:t[0].params,context:i,matches:t},c=await n({...a,fetcherKey:r,unstable_runClientMiddleware:f=>{let p=a;return NO(p,!1,()=>f({...p,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(g,_)=>({[_]:{type:"error",result:g}}))}});try{await Promise.all(t.flatMap(f=>{var p,g;return[(p=f._lazyPromises)==null?void 0:p.handler,(g=f._lazyPromises)==null?void 0:g.route]}))}catch{}return c}async function q4({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let a,u,c=wi(n.method),f=c?"action":"loader",p=g=>{let _,A=new Promise((S,C)=>_=C);u=()=>_(),n.signal.addEventListener("abort",u);let T=S=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${f}" [routeId: ${e.route.id}]`)):g({request:n,params:e.params,context:s},...S!==void 0?[S]:[]),b=(async()=>{try{return{type:"data",result:await(i?i(C=>T(C)):T())}}catch(S){return{type:"error",result:S}}})();return Promise.race([b,A])};try{let g=c?e.route.action:e.route.loader;if(t||r)if(g){let _,[A]=await Promise.all([p(g).catch(T=>{_=T}),t,r]);if(_!==void 0)throw _;a=A}else{await t;let _=c?e.route.action:e.route.loader;if(_)[a]=await Promise.all([p(_),r]);else if(f==="action"){let A=new URL(n.url),T=A.pathname+A.search;throw rs(405,{method:n.method,pathname:T,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(g)a=await p(g);else{let _=new URL(n.url),A=_.pathname+_.search;throw rs(404,{pathname:A})}}catch(g){return{type:"error",result:g}}finally{u&&n.signal.removeEventListener("abort",u)}return a}async function $4(n){var r,i,s,a,u,c;let{result:e,type:t}=n;if(LO(e)){let f;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Dg(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:"data",data:f,statusCode:e.status,headers:e.headers}}return t==="error"?CC(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Dg(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:Md(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Md(e)?e.status:void 0}:CC(e)?{type:"data",data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function G4(n,e,t,r,i){let s=n.headers.get("Location");if(ht(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!IE.test(s)){let a=r.slice(0,r.findIndex(u=>u.route.id===t)+1);s=tT(new URL(e.url),a,i,s),n.headers.set("Location",s)}return n}function TC(n,e,t){if(IE.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=cs(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return n}function zc(n,e,t,r){let i=n.createURL(PO(e)).toString(),s={signal:t};if(r&&wi(r.formMethod)){let{formMethod:a,formEncType:u}=r;s.method=a.toUpperCase(),u==="application/json"?(s.headers=new Headers({"Content-Type":u}),s.body=JSON.stringify(r.json)):u==="text/plain"?s.body=r.text:u==="application/x-www-form-urlencoded"&&r.formData?s.body=iT(r.formData):s.body=r.formData}return new Request(i,s)}function iT(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function EC(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function K4(n,e,t,r=!1,i=!1){let s={},a=null,u,c=!1,f={},p=t&&Si(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let _=g.route.id,A=e[_];if(ht(!du(A),"Cannot handle redirect results in processLoaderData"),Si(A)){let T=A.error;if(p!==void 0&&(T=p,p=void 0),a=a||{},i)a[_]=T;else{let b=uu(n,_);a[b.route.id]==null&&(a[b.route.id]=T)}r||(s[_]=kO),c||(c=!0,u=Md(A.error)?A.error.status:500),A.headers&&(f[_]=A.headers)}else s[_]=A.data,A.statusCode&&A.statusCode!==200&&!c&&(u=A.statusCode),A.headers&&(f[_]=A.headers)}),p!==void 0&&t&&(a={[t[0]]:p},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:u||200,loaderHeaders:f}}function bC(n,e,t,r,i,s){let{loaderData:a,errors:u}=K4(e,t,r);return i.filter(c=>!c.matches||c.matches.some(f=>f.shouldLoad)).forEach(c=>{let{key:f,match:p,controller:g}=c,_=s[f];if(ht(_,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Si(_)){let A=uu(n.matches,p==null?void 0:p.route.id);u&&u[A.route.id]||(u={...u,[A.route.id]:_.error}),n.fetchers.delete(f)}else if(du(_))ht(!1,"Unhandled fetcher revalidation redirect");else{let A=Na(_.data);n.fetchers.set(f,A)}}),{loaderData:a,errors:u}}function SC(n,e,t,r){let i=Object.entries(e).filter(([,s])=>s!==kO).reduce((s,[a,u])=>(s[a]=u,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&s.route.loader&&(i[a]=n[a]),r&&r.hasOwnProperty(a))break}return i}function wC(n){return n?Si(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function uu(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function RC(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rs(n,{pathname:e,routeId:t,method:r,type:i,message:s}={}){let a="Unknown Server Error",u="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&e&&t?u=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(u="Unable to encode submission body")):n===403?(a="Forbidden",u=`Route "${t}" does not match URL "${e}"`):n===404?(a="Not Found",u=`No route matches URL "${e}"`):n===405&&(a="Method Not Allowed",r&&e&&t?u=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(u=`Invalid request method "${r.toUpperCase()}"`)),new Dg(n||500,a,new Error(u),!0)}function Um(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(du(i))return{key:r,result:i}}}function PO(n){let e=typeof n=="string"?Tl(n):n;return cl({...e,hash:""})}function W4(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function Y4(n){return LO(n.result)&&M4.has(n.result.status)}function Si(n){return n.type==="error"}function du(n){return(n&&n.type)==="redirect"}function CC(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function LO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function Q4(n){return N4.has(n.toUpperCase())}function wi(n){return I4.has(n.toUpperCase())}function OE(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function ed(n,e){let t=typeof e=="string"?Tl(e).search:e.search;if(n[n.length-1].route.index&&OE(t||""))return n[n.length-1];let r=RO(n);return r[r.length-1]}function xC(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:s,json:a}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:a,text:void 0}}}function Qv(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function X4(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ff(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function J4(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Na(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Z4(n,e){try{let t=n.sessionStorage.getItem(xO);if(t){let r=JSON.parse(t);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function ez(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(xO,JSON.stringify(t))}catch(r){An(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function tz(){let n,e,t=new Promise((r,i)=>{n=async s=>{r(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var qu=K.createContext(null);qu.displayName="DataRouter";var op=K.createContext(null);op.displayName="DataRouterState";var NE=K.createContext({isTransitioning:!1});NE.displayName="ViewTransition";var VO=K.createContext(new Map);VO.displayName="Fetchers";var nz=K.createContext(null);nz.displayName="Await";var xs=K.createContext(null);xs.displayName="Navigation";var e_=K.createContext(null);e_.displayName="Location";var ps=K.createContext({outlet:null,matches:[],isDataRoute:!1});ps.displayName="Route";var ME=K.createContext(null);ME.displayName="RouteError";function rz(n,{relative:e}={}){ht(Ih(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(xs),{hash:i,pathname:s,search:a}=ap(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:ro([t,s])),r.createHref({pathname:u,search:a,hash:i})}function Ih(){return K.useContext(e_)!=null}function sa(){return ht(Ih(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(e_).location}var UO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zO(n){K.useContext(xs).static||K.useLayoutEffect(n)}function El(){let{isDataRoute:n}=K.useContext(ps);return n?yz():iz()}function iz(){ht(Ih(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(qu),{basename:e,navigator:t}=K.useContext(xs),{matches:r}=K.useContext(ps),{pathname:i}=sa(),s=JSON.stringify(Jy(r)),a=K.useRef(!1);return zO(()=>{a.current=!0}),K.useCallback((c,f={})=>{if(An(a.current,UO),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=Zy(c,JSON.parse(s),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ro([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,s,i,n])}var sz=K.createContext(null);function oz(n){let e=K.useContext(ps).outlet;return e&&K.createElement(sz.Provider,{value:n},e)}function BO(){let{matches:n}=K.useContext(ps),e=n[n.length-1];return e?e.params:{}}function ap(n,{relative:e}={}){let{matches:t}=K.useContext(ps),{pathname:r}=sa(),i=JSON.stringify(Jy(t));return K.useMemo(()=>Zy(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function az(n,e,t,r){ht(Ih(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=K.useContext(xs),{matches:a}=K.useContext(ps),u=a[a.length-1],c=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let L=g&&g.path||"";HO(f,!g||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let _=sa(),A;A=_;let T=A.pathname||"/",b=T;if(p!=="/"){let L=p.replace(/^\//,"").split("/");b="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let S=!s&&t&&t.matches&&t.matches.length>0?t.matches:Va(n,{pathname:b});return An(g||S!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),An(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),fz(S&&S.map(L=>Object.assign({},L,{params:Object.assign({},c,L.params),pathname:ro([p,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:ro([p,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,t,r)}function lz(){let n=gz(),e=Md(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:s},"ErrorBoundary")," or"," ",K.createElement("code",{style:s},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:i},t):null,a)}var uz=K.createElement(lz,null),cz=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?K.createElement(ps.Provider,{value:this.props.routeContext},K.createElement(ME.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hz({routeContext:n,match:e,children:t}){let r=K.useContext(qu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(ps.Provider,{value:n},t)}function fz(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let c=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);ht(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let f=i[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:p,errors:g}=t,_=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||_){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,f,p)=>{let g,_=!1,A=null,T=null;t&&(g=s&&f.route.id?s[f.route.id]:void 0,A=f.route.errorElement||uz,a&&(u<0&&p===0?(HO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):u===p&&(_=!0,T=f.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,p+1)),S=()=>{let C;return g?C=A:_?C=T:f.route.Component?C=K.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=c,K.createElement(hz,{match:f,routeContext:{outlet:c,matches:b,isDataRoute:t!=null},children:C})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?K.createElement(cz,{location:t.location,revalidation:t.revalidation,component:A,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}function DE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dz(n){let e=K.useContext(qu);return ht(e,DE(n)),e}function jO(n){let e=K.useContext(op);return ht(e,DE(n)),e}function pz(n){let e=K.useContext(ps);return ht(e,DE(n)),e}function PE(n){let e=pz(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function mz(){return PE("useRouteId")}function FO(){return jO("useNavigation").navigation}function gz(){var r;let n=K.useContext(ME),e=jO("useRouteError"),t=PE("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function yz(){let{router:n}=dz("useNavigate"),e=PE("useNavigate"),t=K.useRef(!1);return zO(()=>{t.current=!0}),K.useCallback(async(i,s={})=>{An(t.current,UO),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var kC={};function HO(n,e,t){!e&&!kC[n]&&(kC[n]=!0,An(!1,t))}var IC={};function OC(n,e){!n&&!IC[e]&&(IC[e]=!0,console.warn(e))}function _z(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&An(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:K.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&An(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:K.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&An(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:K.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var vz=["HydrateFallback","hydrateFallbackElement"],Az=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function Tz({router:n,flushSync:e}){let[t,r]=K.useState(n.state),[i,s]=K.useState(),[a,u]=K.useState({isTransitioning:!1}),[c,f]=K.useState(),[p,g]=K.useState(),[_,A]=K.useState(),T=K.useRef(new Map),b=K.useCallback((j,{deletedFetchers:q,flushSync:V,viewTransitionOpts:D})=>{j.fetchers.forEach((k,x)=>{k.data!==void 0&&T.current.set(x,k.data)}),q.forEach(k=>T.current.delete(k)),OC(V===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(OC(D==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!D||!N){e&&V?e(()=>r(j)):K.startTransition(()=>r(j));return}if(e&&V){e(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let k=n.window.document.startViewTransition(()=>{e(()=>r(j))});k.finished.finally(()=>{e(()=>{f(void 0),g(void 0),s(void 0),u({isTransitioning:!1})})}),e(()=>g(k));return}p?(c&&c.resolve(),p.skipTransition(),A({state:j,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(s(j),u({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,e,p,c]);K.useLayoutEffect(()=>n.subscribe(b),[n,b]),K.useEffect(()=>{a.isTransitioning&&!a.flushSync&&f(new Az)},[a]),K.useEffect(()=>{if(c&&i&&n.window){let j=i,q=c.promise,V=n.window.document.startViewTransition(async()=>{K.startTransition(()=>r(j)),await q});V.finished.finally(()=>{f(void 0),g(void 0),s(void 0),u({isTransitioning:!1})}),g(V)}},[i,c,n.window]),K.useEffect(()=>{c&&i&&t.location.key===i.location.key&&c.resolve()},[c,p,t.location,i]),K.useEffect(()=>{!a.isTransitioning&&_&&(s(_.state),u({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),A(void 0))},[a.isTransitioning,_]);let S=K.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:j=>n.navigate(j),push:(j,q,V)=>n.navigate(j,{state:q,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(j,q,V)=>n.navigate(j,{replace:!0,state:q,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),C=n.basename||"/",L=K.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return K.createElement(K.Fragment,null,K.createElement(qu.Provider,{value:L},K.createElement(op.Provider,{value:t},K.createElement(VO.Provider,{value:T.current},K.createElement(NE.Provider,{value:a},K.createElement(Rz,{basename:C,location:t.location,navigationType:t.historyAction,navigator:S},K.createElement(Ez,{routes:n.routes,future:n.future,state:t})))))),null)}var Ez=K.memo(bz);function bz({routes:n,future:e,state:t}){return az(n,void 0,t,e)}function Sz({to:n,replace:e,state:t,relative:r}){ht(Ih(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=K.useContext(xs);An(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=K.useContext(ps),{pathname:a}=sa(),u=El(),c=Zy(n,Jy(s),a,r==="path"),f=JSON.stringify(c);return K.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:r})},[u,f,r,e,t]),null}function wz(n){return oz(n.context)}function Rz({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){ht(!Ih(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),u=K.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=Tl(t));let{pathname:c="/",search:f="",hash:p="",state:g=null,key:_="default"}=t,A=K.useMemo(()=>{let T=cs(c,a);return T==null?null:{location:{pathname:T,search:f,hash:p,state:g,key:_},navigationType:r}},[a,c,f,p,g,_,r]);return An(A!=null,`<Router basename="${a}"> is not able to match the URL "${c}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:K.createElement(xs.Provider,{value:u},K.createElement(e_.Provider,{children:e,value:A}))}var lg="get",ug="application/x-www-form-urlencoded";function t_(n){return n!=null&&typeof n.tagName=="string"}function Cz(n){return t_(n)&&n.tagName.toLowerCase()==="button"}function xz(n){return t_(n)&&n.tagName.toLowerCase()==="form"}function kz(n){return t_(n)&&n.tagName.toLowerCase()==="input"}function Iz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Oz(n,e){return n.button===0&&(!e||e==="_self")&&!Iz(n)}var zm=null;function Nz(){if(zm===null)try{new FormData(document.createElement("form"),0),zm=!1}catch{zm=!0}return zm}var Mz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xv(n){return n!=null&&!Mz.has(n)?(An(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ug}"`),null):n}function Dz(n,e){let t,r,i,s,a;if(xz(n)){let u=n.getAttribute("action");r=u?cs(u,e):null,t=n.getAttribute("method")||lg,i=Xv(n.getAttribute("enctype"))||ug,s=new FormData(n)}else if(Cz(n)||kz(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?cs(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||lg,i=Xv(n.getAttribute("formenctype"))||Xv(u.getAttribute("enctype"))||ug,s=new FormData(u,n),!Nz()){let{name:f,type:p,value:g}=n;if(p==="image"){let _=f?`${f}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else f&&s.append(f,g)}}else{if(t_(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=lg,r=null,i=ug,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}function LE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Pz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Lz(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Vz(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await Pz(s,t);return a.links?a.links():[]}return[]}));return jz(r.flat(1).filter(Lz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function NC(n,e,t,r,i,s){let a=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,u=(c,f)=>{var p;return t[f].pathname!==c.pathname||((p=t[f].route.path)==null?void 0:p.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,f)=>a(c,f)||u(c,f)):s==="data"?e.filter((c,f)=>{var g;let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let _=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Uz(n,e,{includeHydrateFallback:t}={}){return zz(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function zz(n){return[...new Set(n)]}function Bz(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function jz(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(Bz(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}var Fz=new Set([100,101,204,205]);function Hz(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&cs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function qO(){let n=K.useContext(qu);return LE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function qz(){let n=K.useContext(op);return LE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var VE=K.createContext(void 0);VE.displayName="FrameworkContext";function $O(){let n=K.useContext(VE);return LE(n,"You must render this element inside a <HydratedRouter> element"),n}function $z(n,e){let t=K.useContext(VE),[r,i]=K.useState(!1),[s,a]=K.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=e,_=K.useRef(null);K.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let b=C=>{C.forEach(L=>{a(L.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[n]),K.useEffect(()=>{if(r){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[r]);let A=()=>{i(!0)},T=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,_,{}]:[s,_,{onFocus:Hf(u,A),onBlur:Hf(c,T),onMouseEnter:Hf(f,A),onMouseLeave:Hf(p,T),onTouchStart:Hf(g,A)}]:[!1,_,{}]}function Hf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Gz({page:n,...e}){let{router:t}=qO(),r=K.useMemo(()=>Va(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(Wz,{page:n,matches:r,...e}):null}function Kz(n){let{manifest:e,routeModules:t}=$O(),[r,i]=K.useState([]);return K.useEffect(()=>{let s=!1;return Vz(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function Wz({page:n,matches:e,...t}){let r=sa(),{manifest:i,routeModules:s}=$O(),{basename:a}=qO(),{loaderData:u,matches:c}=qz(),f=K.useMemo(()=>NC(n,e,c,i,r,"data"),[n,e,c,i,r]),p=K.useMemo(()=>NC(n,e,c,i,r,"assets"),[n,e,c,i,r]),g=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,b=!1;if(e.forEach(C=>{var j;let L=i.routes[C.route.id];!L||!L.hasLoader||(!f.some(q=>q.route.id===C.route.id)&&C.route.id in u&&((j=s[C.route.id])!=null&&j.shouldRevalidate)||L.hasClientLoader?b=!0:T.add(C.route.id))}),T.size===0)return[];let S=Hz(n,a);return b&&T.size>0&&S.searchParams.set("_routes",e.filter(C=>T.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[a,u,r,i,f,e,n,s]),_=K.useMemo(()=>Uz(p,i),[p,i]),A=Kz(p);return K.createElement(K.Fragment,null,g.map(T=>K.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),_.map(T=>K.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),A.map(({key:T,link:b})=>K.createElement("link",{key:T,...b})))}function Yz(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var GO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GO&&(window.__reactRouterVersion="7.5.3")}catch{}function Qz(n,e){return V4({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:i4({window:e==null?void 0:e.window}),hydrationData:Xz(),routes:n,mapRouteProperties:_z,hydrationRouteProperties:vz,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function Xz(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:Jz(n.errors)}),n}function Jz(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new Dg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[r]=a}catch{}}if(t[r]==null){let s=new Error(i.message);s.stack="",t[r]=s}}else t[r]=i;return t}var KO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WO=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:u,target:c,to:f,preventScrollReset:p,viewTransition:g,..._},A){let{basename:T}=K.useContext(xs),b=typeof f=="string"&&KO.test(f),S,C=!1;if(typeof f=="string"&&b&&(S=f,GO))try{let x=new URL(window.location.href),z=f.startsWith("//")?new URL(x.protocol+f):new URL(f),U=cs(z.pathname,T);z.origin===x.origin&&U!=null?f=U+z.search+z.hash:C=!0}catch{An(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=rz(f,{relative:i}),[j,q,V]=$z(r,_),D=nB(f,{replace:a,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:g});function N(x){e&&e(x),x.defaultPrevented||D(x)}let k=K.createElement("a",{..._,...V,href:S||L,onClick:C||s?e:N,ref:Yz(A,q),target:c,"data-discover":!b&&t==="render"?"true":void 0});return j&&!b?K.createElement(K.Fragment,null,k,K.createElement(Gz,{page:L})):k});WO.displayName="Link";var Zz=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:u,children:c,...f},p){let g=ap(a,{relative:f.relative}),_=sa(),A=K.useContext(op),{navigator:T,basename:b}=K.useContext(xs),S=A!=null&&aB(g)&&u===!0,C=T.encodeLocation?T.encodeLocation(g).pathname:g.pathname,L=_.pathname,j=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(L=L.toLowerCase(),j=j?j.toLowerCase():null,C=C.toLowerCase()),j&&b&&(j=cs(j,b)||j);const q=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let V=L===C||!i&&L.startsWith(C)&&L.charAt(q)==="/",D=j!=null&&(j===C||!i&&j.startsWith(C)&&j.charAt(C.length)==="/"),N={isActive:V,isPending:D,isTransitioning:S},k=V?e:void 0,x;typeof r=="function"?x=r(N):x=[r,V?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let z=typeof s=="function"?s(N):s;return K.createElement(WO,{...f,"aria-current":k,className:x,ref:p,style:z,to:a,viewTransition:u},typeof c=="function"?c(N):c)});Zz.displayName="NavLink";var eB=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=lg,action:u,onSubmit:c,relative:f,preventScrollReset:p,viewTransition:g,..._},A)=>{let T=sB(),b=oB(u,{relative:f}),S=a.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&KO.test(u),L=j=>{if(c&&c(j),j.defaultPrevented)return;j.preventDefault();let q=j.nativeEvent.submitter,V=(q==null?void 0:q.getAttribute("formmethod"))||a;T(q||j.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:i,state:s,relative:f,preventScrollReset:p,viewTransition:g})};return K.createElement("form",{ref:A,method:S,action:b,onSubmit:r?c:L,..._,"data-discover":!C&&n==="render"?"true":void 0})});eB.displayName="Form";function tB(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YO(n){let e=K.useContext(qu);return ht(e,tB(n)),e}function nB(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let u=El(),c=sa(),f=ap(n,{relative:s});return K.useCallback(p=>{if(Oz(p,e)){p.preventDefault();let g=t!==void 0?t:cl(c)===cl(f);u(n,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,u,f,t,r,e,n,i,s,a])}var rB=0,iB=()=>`__${String(++rB)}__`;function sB(){let{router:n}=YO("useSubmit"),{basename:e}=K.useContext(xs),t=mz();return K.useCallback(async(r,i={})=>{let{action:s,method:a,encType:u,formData:c,body:f}=Dz(r,e);if(i.navigate===!1){let p=i.fetcherKey||iB();await n.fetch(p,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||a,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||a,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function oB(n,{relative:e}={}){let{basename:t}=K.useContext(xs),r=K.useContext(ps);ht(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ap(n||".",{relative:e})},a=sa();if(n==null){s.search=a.search;let u=new URLSearchParams(s.search),c=u.getAll("index");if(c.some(p=>p==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:ro([t,s.pathname])),cl(s)}function aB(n,e={}){let t=K.useContext(NE);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=YO("useViewTransitionState"),i=ap(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=cs(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=cs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Mg(i.pathname,a)!=null||Mg(i.pathname,s)!=null}new TextEncoder;[...Fz];var QO=EO();const lB=TO(QO);/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uB(n){return K.createElement(Tz,{flushSync:QO.flushSync,...n})}const cB=()=>{};var MC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},hB=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},JO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let _=(u&15)<<2|f>>6,A=f&63;c||(A=64,a||(_=64)),r.push(t[p],t[g],t[_],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||f==null||g==null)throw new fB;const _=s<<2|u>>4;if(r.push(_),f!==64){const A=u<<4&240|f>>2;if(r.push(A),g!==64){const T=f<<6&192|g;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dB=function(n){const e=XO(n);return JO.encodeByteArray(e,!0)},Lg=function(n){return dB(n).replace(/\./g,"")},ZO=function(n){try{return JO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=()=>pB().__FIREBASE_DEFAULTS__,gB=()=>{if(typeof process>"u"||typeof MC>"u")return;const n=MC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ZO(n[1]);return e&&JSON.parse(e)},n_=()=>{try{return cB()||mB()||gB()||yB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eN=n=>{var e,t;return(t=(e=n_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tN=n=>{const e=eN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nN=()=>{var n;return(n=n_())===null||n===void 0?void 0:n.config},rN=n=>{var e;return(e=n_())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lg(JSON.stringify(t)),Lg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function AB(){var n;const e=(n=n_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function EB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bB(){const n=Ir();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function SB(){return!AB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oN(){try{return typeof indexedDB=="object"}catch{return!1}}function aN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function wB(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="FirebaseError";class ms extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=RB,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$u.prototype.create)}}class $u{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?CB(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new ms(i,u,r)}}function CB(n,e){return n.replace(xB,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xB=/\{\$([^}]+)}/g;function kB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(DC(s)&&DC(a)){if(!Jo(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function DC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function td(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function nd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function IB(n,e){const t=new OB(n,e);return t.subscribe.bind(t)}class OB{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");NB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Jv),i.error===void 0&&(i.error=Jv),i.complete===void 0&&(i.complete=Jv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NB(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=1e3,DB=2,PB=4*60*60*1e3,LB=.5;function PC(n,e=MB,t=DB){const r=e*Math.pow(t,n),i=Math.round(LB*r*(Math.random()-.5)*2);return Math.min(PB,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n){return n&&n._delegate?n._delegate:n}class hs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _B;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zB(e))try{this.getOrInitializeService({instanceIdentifier:ou})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ou){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ou){return this.instances.has(e)}getOptions(e=ou){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ou){return this.component?this.component.multipleInstances?e:ou:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UB(n){return n===ou?void 0:n}function zB(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VB(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(gt||(gt={}));const jB={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},FB=gt.INFO,HB={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},qB=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=HB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r_{constructor(e){this.name=e,this._logLevel=FB,this._logHandler=qB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const $B=(n,e)=>e.some(t=>n instanceof t);let LC,VC;function GB(){return LC||(LC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KB(){return VC||(VC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lN=new WeakMap,sT=new WeakMap,uN=new WeakMap,Zv=new WeakMap,UE=new WeakMap;function WB(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Xa(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&lN.set(t,n)}).catch(()=>{}),UE.set(e,n),e}function YB(n){if(sT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});sT.set(n,e)}let oT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QB(n){oT=n(oT)}function XB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(eA(this),e,...t);return uN.set(r,e.sort?e.sort():[e]),Xa(r)}:KB().includes(n)?function(...e){return n.apply(eA(this),e),Xa(lN.get(this))}:function(...e){return Xa(n.apply(eA(this),e))}}function JB(n){return typeof n=="function"?XB(n):(n instanceof IDBTransaction&&YB(n),$B(n,GB())?new Proxy(n,oT):n)}function Xa(n){if(n instanceof IDBRequest)return WB(n);if(Zv.has(n))return Zv.get(n);const e=JB(n);return e!==n&&(Zv.set(n,e),UE.set(e,n)),e}const eA=n=>UE.get(n);function cN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=Xa(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Xa(a.result),c.oldVersion,c.newVersion,Xa(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const ZB=["get","getKey","getAll","getAllKeys","count"],e3=["put","add","delete","clear"],tA=new Map;function UC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tA.get(e))return tA.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=e3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZB.includes(t)))return;const s=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&c.done]))[0]};return tA.set(e,s),s}QB(n=>({...n,get:(e,t,r)=>UC(e,t)||n.get(e,t,r),has:(e,t)=>!!UC(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(n3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function n3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const aT="@firebase/app",zC="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new r_("@firebase/app"),r3="@firebase/app-compat",i3="@firebase/analytics-compat",s3="@firebase/analytics",o3="@firebase/app-check-compat",a3="@firebase/app-check",l3="@firebase/auth",u3="@firebase/auth-compat",c3="@firebase/database",h3="@firebase/data-connect",f3="@firebase/database-compat",d3="@firebase/functions",p3="@firebase/functions-compat",m3="@firebase/installations",g3="@firebase/installations-compat",y3="@firebase/messaging",_3="@firebase/messaging-compat",v3="@firebase/performance",A3="@firebase/performance-compat",T3="@firebase/remote-config",E3="@firebase/remote-config-compat",b3="@firebase/storage",S3="@firebase/storage-compat",w3="@firebase/firestore",R3="@firebase/vertexai",C3="@firebase/firestore-compat",x3="firebase",k3="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="[DEFAULT]",I3={[aT]:"fire-core",[r3]:"fire-core-compat",[s3]:"fire-analytics",[i3]:"fire-analytics-compat",[a3]:"fire-app-check",[o3]:"fire-app-check-compat",[l3]:"fire-auth",[u3]:"fire-auth-compat",[c3]:"fire-rtdb",[h3]:"fire-data-connect",[f3]:"fire-rtdb-compat",[d3]:"fire-fn",[p3]:"fire-fn-compat",[m3]:"fire-iid",[g3]:"fire-iid-compat",[y3]:"fire-fcm",[_3]:"fire-fcm-compat",[v3]:"fire-perf",[A3]:"fire-perf-compat",[T3]:"fire-rc",[E3]:"fire-rc-compat",[b3]:"fire-gcs",[S3]:"fire-gcs-compat",[w3]:"fire-fst",[C3]:"fire-fst-compat",[R3]:"fire-vertex","fire-js":"fire-js",[x3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new Map,O3=new Map,uT=new Map;function BC(n,e){try{n.container.addComponent(e)}catch(t){Zo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n){const e=n.name;if(uT.has(e))return Zo.debug(`There were multiple attempts to register component ${e}.`),!1;uT.set(e,n);for(const t of Vg.values())BC(t,n);for(const t of O3.values())BC(t,n);return!0}function Oh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ci(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ja=new $u("app","Firebase",N3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=k3;function hN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lT,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ja.create("bad-app-name",{appName:String(i)});if(t||(t=nN()),!t)throw Ja.create("no-options");const s=Vg.get(i);if(s){if(Jo(t,s.options)&&Jo(r,s.config))return s;throw Ja.create("duplicate-app",{appName:i})}const a=new BB(i);for(const c of uT.values())a.addComponent(c);const u=new M3(t,r,a);return Vg.set(i,u),u}function zE(n=lT){const e=Vg.get(n);if(!e&&n===lT&&nN())return hN();if(!e)throw Ja.create("no-app",{appName:n});return e}function ri(n,e,t){var r;let i=(r=I3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zo.warn(u.join(" "));return}Rs(new hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="firebase-heartbeat-database",P3=1,Dd="firebase-heartbeat-store";let nA=null;function fN(){return nA||(nA=cN(D3,P3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ja.create("idb-open",{originalErrorMessage:n.message})})),nA}async function L3(n){try{const t=(await fN()).transaction(Dd),r=await t.objectStore(Dd).get(dN(n));return await t.done,r}catch(e){if(e instanceof ms)Zo.warn(e.message);else{const t=Ja.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zo.warn(t.message)}}}async function jC(n,e){try{const r=(await fN()).transaction(Dd,"readwrite");await r.objectStore(Dd).put(e,dN(n)),await r.done}catch(t){if(t instanceof ms)Zo.warn(t.message);else{const r=Ja.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zo.warn(r.message)}}}function dN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=1024,U3=30;class z3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new j3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=FC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>U3){const a=F3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FC(),{heartbeatsToSend:r,unsentEntries:i}=B3(this._heartbeatsCache.heartbeats),s=Lg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Zo.warn(t),""}}}function FC(){return new Date().toISOString().substring(0,10)}function B3(n,e=V3){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),HC(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),HC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class j3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oN()?aN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await L3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return jC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return jC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function HC(n){return Lg(JSON.stringify({version:2,heartbeats:n})).length}function F3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(n){Rs(new hs("platform-logger",e=>new t3(e),"PRIVATE")),Rs(new hs("heartbeat",e=>new z3(e),"PRIVATE")),ri(aT,zC,n),ri(aT,zC,"esm2017"),ri("fire-js","")}H3("");var qC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Za,pN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,k){function x(){}x.prototype=k.prototype,N.D=k.prototype,N.prototype=new x,N.prototype.constructor=N,N.C=function(z,U,B){for(var P=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)P[Ee-2]=arguments[Ee];return k.prototype[U].apply(z,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,k,x){x||(x=0);var z=Array(16);if(typeof k=="string")for(var U=0;16>U;++U)z[U]=k.charCodeAt(x++)|k.charCodeAt(x++)<<8|k.charCodeAt(x++)<<16|k.charCodeAt(x++)<<24;else for(U=0;16>U;++U)z[U]=k[x++]|k[x++]<<8|k[x++]<<16|k[x++]<<24;k=N.g[0],x=N.g[1],U=N.g[2];var B=N.g[3],P=k+(B^x&(U^B))+z[0]+3614090360&4294967295;k=x+(P<<7&4294967295|P>>>25),P=B+(U^k&(x^U))+z[1]+3905402710&4294967295,B=k+(P<<12&4294967295|P>>>20),P=U+(x^B&(k^x))+z[2]+606105819&4294967295,U=B+(P<<17&4294967295|P>>>15),P=x+(k^U&(B^k))+z[3]+3250441966&4294967295,x=U+(P<<22&4294967295|P>>>10),P=k+(B^x&(U^B))+z[4]+4118548399&4294967295,k=x+(P<<7&4294967295|P>>>25),P=B+(U^k&(x^U))+z[5]+1200080426&4294967295,B=k+(P<<12&4294967295|P>>>20),P=U+(x^B&(k^x))+z[6]+2821735955&4294967295,U=B+(P<<17&4294967295|P>>>15),P=x+(k^U&(B^k))+z[7]+4249261313&4294967295,x=U+(P<<22&4294967295|P>>>10),P=k+(B^x&(U^B))+z[8]+1770035416&4294967295,k=x+(P<<7&4294967295|P>>>25),P=B+(U^k&(x^U))+z[9]+2336552879&4294967295,B=k+(P<<12&4294967295|P>>>20),P=U+(x^B&(k^x))+z[10]+4294925233&4294967295,U=B+(P<<17&4294967295|P>>>15),P=x+(k^U&(B^k))+z[11]+2304563134&4294967295,x=U+(P<<22&4294967295|P>>>10),P=k+(B^x&(U^B))+z[12]+1804603682&4294967295,k=x+(P<<7&4294967295|P>>>25),P=B+(U^k&(x^U))+z[13]+4254626195&4294967295,B=k+(P<<12&4294967295|P>>>20),P=U+(x^B&(k^x))+z[14]+2792965006&4294967295,U=B+(P<<17&4294967295|P>>>15),P=x+(k^U&(B^k))+z[15]+1236535329&4294967295,x=U+(P<<22&4294967295|P>>>10),P=k+(U^B&(x^U))+z[1]+4129170786&4294967295,k=x+(P<<5&4294967295|P>>>27),P=B+(x^U&(k^x))+z[6]+3225465664&4294967295,B=k+(P<<9&4294967295|P>>>23),P=U+(k^x&(B^k))+z[11]+643717713&4294967295,U=B+(P<<14&4294967295|P>>>18),P=x+(B^k&(U^B))+z[0]+3921069994&4294967295,x=U+(P<<20&4294967295|P>>>12),P=k+(U^B&(x^U))+z[5]+3593408605&4294967295,k=x+(P<<5&4294967295|P>>>27),P=B+(x^U&(k^x))+z[10]+38016083&4294967295,B=k+(P<<9&4294967295|P>>>23),P=U+(k^x&(B^k))+z[15]+3634488961&4294967295,U=B+(P<<14&4294967295|P>>>18),P=x+(B^k&(U^B))+z[4]+3889429448&4294967295,x=U+(P<<20&4294967295|P>>>12),P=k+(U^B&(x^U))+z[9]+568446438&4294967295,k=x+(P<<5&4294967295|P>>>27),P=B+(x^U&(k^x))+z[14]+3275163606&4294967295,B=k+(P<<9&4294967295|P>>>23),P=U+(k^x&(B^k))+z[3]+4107603335&4294967295,U=B+(P<<14&4294967295|P>>>18),P=x+(B^k&(U^B))+z[8]+1163531501&4294967295,x=U+(P<<20&4294967295|P>>>12),P=k+(U^B&(x^U))+z[13]+2850285829&4294967295,k=x+(P<<5&4294967295|P>>>27),P=B+(x^U&(k^x))+z[2]+4243563512&4294967295,B=k+(P<<9&4294967295|P>>>23),P=U+(k^x&(B^k))+z[7]+1735328473&4294967295,U=B+(P<<14&4294967295|P>>>18),P=x+(B^k&(U^B))+z[12]+2368359562&4294967295,x=U+(P<<20&4294967295|P>>>12),P=k+(x^U^B)+z[5]+4294588738&4294967295,k=x+(P<<4&4294967295|P>>>28),P=B+(k^x^U)+z[8]+2272392833&4294967295,B=k+(P<<11&4294967295|P>>>21),P=U+(B^k^x)+z[11]+1839030562&4294967295,U=B+(P<<16&4294967295|P>>>16),P=x+(U^B^k)+z[14]+4259657740&4294967295,x=U+(P<<23&4294967295|P>>>9),P=k+(x^U^B)+z[1]+2763975236&4294967295,k=x+(P<<4&4294967295|P>>>28),P=B+(k^x^U)+z[4]+1272893353&4294967295,B=k+(P<<11&4294967295|P>>>21),P=U+(B^k^x)+z[7]+4139469664&4294967295,U=B+(P<<16&4294967295|P>>>16),P=x+(U^B^k)+z[10]+3200236656&4294967295,x=U+(P<<23&4294967295|P>>>9),P=k+(x^U^B)+z[13]+681279174&4294967295,k=x+(P<<4&4294967295|P>>>28),P=B+(k^x^U)+z[0]+3936430074&4294967295,B=k+(P<<11&4294967295|P>>>21),P=U+(B^k^x)+z[3]+3572445317&4294967295,U=B+(P<<16&4294967295|P>>>16),P=x+(U^B^k)+z[6]+76029189&4294967295,x=U+(P<<23&4294967295|P>>>9),P=k+(x^U^B)+z[9]+3654602809&4294967295,k=x+(P<<4&4294967295|P>>>28),P=B+(k^x^U)+z[12]+3873151461&4294967295,B=k+(P<<11&4294967295|P>>>21),P=U+(B^k^x)+z[15]+530742520&4294967295,U=B+(P<<16&4294967295|P>>>16),P=x+(U^B^k)+z[2]+3299628645&4294967295,x=U+(P<<23&4294967295|P>>>9),P=k+(U^(x|~B))+z[0]+4096336452&4294967295,k=x+(P<<6&4294967295|P>>>26),P=B+(x^(k|~U))+z[7]+1126891415&4294967295,B=k+(P<<10&4294967295|P>>>22),P=U+(k^(B|~x))+z[14]+2878612391&4294967295,U=B+(P<<15&4294967295|P>>>17),P=x+(B^(U|~k))+z[5]+4237533241&4294967295,x=U+(P<<21&4294967295|P>>>11),P=k+(U^(x|~B))+z[12]+1700485571&4294967295,k=x+(P<<6&4294967295|P>>>26),P=B+(x^(k|~U))+z[3]+2399980690&4294967295,B=k+(P<<10&4294967295|P>>>22),P=U+(k^(B|~x))+z[10]+4293915773&4294967295,U=B+(P<<15&4294967295|P>>>17),P=x+(B^(U|~k))+z[1]+2240044497&4294967295,x=U+(P<<21&4294967295|P>>>11),P=k+(U^(x|~B))+z[8]+1873313359&4294967295,k=x+(P<<6&4294967295|P>>>26),P=B+(x^(k|~U))+z[15]+4264355552&4294967295,B=k+(P<<10&4294967295|P>>>22),P=U+(k^(B|~x))+z[6]+2734768916&4294967295,U=B+(P<<15&4294967295|P>>>17),P=x+(B^(U|~k))+z[13]+1309151649&4294967295,x=U+(P<<21&4294967295|P>>>11),P=k+(U^(x|~B))+z[4]+4149444226&4294967295,k=x+(P<<6&4294967295|P>>>26),P=B+(x^(k|~U))+z[11]+3174756917&4294967295,B=k+(P<<10&4294967295|P>>>22),P=U+(k^(B|~x))+z[2]+718787259&4294967295,U=B+(P<<15&4294967295|P>>>17),P=x+(B^(U|~k))+z[9]+3951481745&4294967295,N.g[0]=N.g[0]+k&4294967295,N.g[1]=N.g[1]+(U+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+B&4294967295}r.prototype.u=function(N,k){k===void 0&&(k=N.length);for(var x=k-this.blockSize,z=this.B,U=this.h,B=0;B<k;){if(U==0)for(;B<=x;)i(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<k;)if(z[U++]=N.charCodeAt(B++),U==this.blockSize){i(this,z),U=0;break}}else for(;B<k;)if(z[U++]=N[B++],U==this.blockSize){i(this,z),U=0;break}}this.h=U,this.o+=k},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var k=1;k<N.length-8;++k)N[k]=0;var x=8*this.o;for(k=N.length-8;k<N.length;++k)N[k]=x&255,x/=256;for(this.u(N),N=Array(16),k=x=0;4>k;++k)for(var z=0;32>z;z+=8)N[x++]=this.g[k]>>>z&255;return N};function s(N,k){var x=u;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=k(N)}function a(N,k){this.h=k;for(var x=[],z=!0,U=N.length-1;0<=U;U--){var B=N[U]|0;z&&B==k||(x[U]=B,z=!1)}this.g=x}var u={};function c(N){return-128<=N&&128>N?s(N,function(k){return new a([k|0],0>k?-1:0)}):new a([N|0],0>N?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return g;if(0>N)return S(f(-N));for(var k=[],x=1,z=0;N>=x;z++)k[z]=N/x|0,x*=4294967296;return new a(k,0)}function p(N,k){if(N.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N.charAt(0)=="-")return S(p(N.substring(1),k));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(k,8)),z=g,U=0;U<N.length;U+=8){var B=Math.min(8,N.length-U),P=parseInt(N.substring(U,U+B),k);8>B?(B=f(Math.pow(k,B)),z=z.j(B).add(f(P))):(z=z.j(x),z=z.add(f(P)))}return z}var g=c(0),_=c(1),A=c(16777216);n=a.prototype,n.m=function(){if(b(this))return-S(this).m();for(var N=0,k=1,x=0;x<this.g.length;x++){var z=this.i(x);N+=(0<=z?z:4294967296+z)*k,k*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(T(this))return"0";if(b(this))return"-"+S(this).toString(N);for(var k=f(Math.pow(N,6)),x=this,z="";;){var U=q(x,k).g;x=C(x,U.j(k));var B=((0<x.g.length?x.g[0]:x.h)>>>0).toString(N);if(x=U,T(x))return B+z;for(;6>B.length;)B="0"+B;z=B+z}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function T(N){if(N.h!=0)return!1;for(var k=0;k<N.g.length;k++)if(N.g[k]!=0)return!1;return!0}function b(N){return N.h==-1}n.l=function(N){return N=C(this,N),b(N)?-1:T(N)?0:1};function S(N){for(var k=N.g.length,x=[],z=0;z<k;z++)x[z]=~N.g[z];return new a(x,~N.h).add(_)}n.abs=function(){return b(this)?S(this):this},n.add=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],z=0,U=0;U<=k;U++){var B=z+(this.i(U)&65535)+(N.i(U)&65535),P=(B>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);z=P>>>16,B&=65535,P&=65535,x[U]=P<<16|B}return new a(x,x[x.length-1]&-2147483648?-1:0)};function C(N,k){return N.add(S(k))}n.j=function(N){if(T(this)||T(N))return g;if(b(this))return b(N)?S(this).j(S(N)):S(S(this).j(N));if(b(N))return S(this.j(S(N)));if(0>this.l(A)&&0>N.l(A))return f(this.m()*N.m());for(var k=this.g.length+N.g.length,x=[],z=0;z<2*k;z++)x[z]=0;for(z=0;z<this.g.length;z++)for(var U=0;U<N.g.length;U++){var B=this.i(z)>>>16,P=this.i(z)&65535,Ee=N.i(U)>>>16,be=N.i(U)&65535;x[2*z+2*U]+=P*be,L(x,2*z+2*U),x[2*z+2*U+1]+=B*be,L(x,2*z+2*U+1),x[2*z+2*U+1]+=P*Ee,L(x,2*z+2*U+1),x[2*z+2*U+2]+=B*Ee,L(x,2*z+2*U+2)}for(z=0;z<k;z++)x[z]=x[2*z+1]<<16|x[2*z];for(z=k;z<2*k;z++)x[z]=0;return new a(x,0)};function L(N,k){for(;(N[k]&65535)!=N[k];)N[k+1]+=N[k]>>>16,N[k]&=65535,k++}function j(N,k){this.g=N,this.h=k}function q(N,k){if(T(k))throw Error("division by zero");if(T(N))return new j(g,g);if(b(N))return k=q(S(N),k),new j(S(k.g),S(k.h));if(b(k))return k=q(N,S(k)),new j(S(k.g),k.h);if(30<N.g.length){if(b(N)||b(k))throw Error("slowDivide_ only works with positive integers.");for(var x=_,z=k;0>=z.l(N);)x=V(x),z=V(z);var U=D(x,1),B=D(z,1);for(z=D(z,2),x=D(x,2);!T(z);){var P=B.add(z);0>=P.l(N)&&(U=U.add(x),B=P),z=D(z,1),x=D(x,1)}return k=C(N,U.j(k)),new j(U,k)}for(U=g;0<=N.l(k);){for(x=Math.max(1,Math.floor(N.m()/k.m())),z=Math.ceil(Math.log(x)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),B=f(x),P=B.j(k);b(P)||0<P.l(N);)x-=z,B=f(x),P=B.j(k);T(B)&&(B=_),U=U.add(B),N=C(N,P)}return new j(U,N)}n.A=function(N){return q(this,N).h},n.and=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],z=0;z<k;z++)x[z]=this.i(z)&N.i(z);return new a(x,this.h&N.h)},n.or=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],z=0;z<k;z++)x[z]=this.i(z)|N.i(z);return new a(x,this.h|N.h)},n.xor=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],z=0;z<k;z++)x[z]=this.i(z)^N.i(z);return new a(x,this.h^N.h)};function V(N){for(var k=N.g.length+1,x=[],z=0;z<k;z++)x[z]=N.i(z)<<1|N.i(z-1)>>>31;return new a(x,N.h)}function D(N,k){var x=k>>5;k%=32;for(var z=N.g.length-x,U=[],B=0;B<z;B++)U[B]=0<k?N.i(B+x)>>>k|N.i(B+x+1)<<32-k:N.i(B+x);return new a(U,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pN=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,Za=a}).apply(typeof qC<"u"?qC:typeof self<"u"?self:typeof window<"u"?window:{});var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mN,rd,gN,cg,cT,yN,_N,vN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,w){return m==Array.prototype||m==Object.prototype||(m[E]=w.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bm=="object"&&Bm];for(var E=0;E<m.length;++E){var w=m[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(m,E){if(E)e:{var w=r;m=m.split(".");for(var M=0;M<m.length-1;M++){var J=m[M];if(!(J in w))break e;w=w[J]}m=m[m.length-1],M=w[m],E=E(M),E!=M&&E!=null&&e(w,m,{configurable:!0,writable:!0,value:E})}}function s(m,E){m instanceof String&&(m+="");var w=0,M=!1,J={next:function(){if(!M&&w<m.length){var se=w++;return{value:E(se,m[se]),done:!1}}return M=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(m){return m||function(){return s(this,function(E,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function p(m,E,w){return m.call.apply(m.bind,arguments)}function g(m,E,w){if(!m)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,M),m.apply(E,J)}}return function(){return m.apply(E,arguments)}}function _(m,E,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,_.apply(null,arguments)}function A(m,E){var w=Array.prototype.slice.call(arguments,1);return function(){var M=w.slice();return M.push.apply(M,arguments),m.apply(this,M)}}function T(m,E){function w(){}w.prototype=E.prototype,m.aa=E.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(M,J,se){for(var Te=Array(arguments.length-2),At=2;At<arguments.length;At++)Te[At-2]=arguments[At];return E.prototype[J].apply(M,Te)}}function b(m){const E=m.length;if(0<E){const w=Array(E);for(let M=0;M<E;M++)w[M]=m[M];return w}return[]}function S(m,E){for(let w=1;w<arguments.length;w++){const M=arguments[w];if(c(M)){const J=m.length||0,se=M.length||0;m.length=J+se;for(let Te=0;Te<se;Te++)m[J+Te]=M[Te]}else m.push(M)}}class C{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function L(m){return/^[\s\xa0]*$/.test(m)}function j(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function q(m){return q[" "](m),m}q[" "]=function(){};var V=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function D(m,E,w){for(const M in m)E.call(w,m[M],M,m)}function N(m,E){for(const w in m)E.call(void 0,m[w],w,m)}function k(m){const E={};for(const w in m)E[w]=m[w];return E}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(m,E){let w,M;for(let J=1;J<arguments.length;J++){M=arguments[J];for(w in M)m[w]=M[w];for(let se=0;se<x.length;se++)w=x[se],Object.prototype.hasOwnProperty.call(M,w)&&(m[w]=M[w])}}function U(m){var E=1;m=m.split(":");const w=[];for(;0<E&&m.length;)w.push(m.shift()),E--;return m.length&&w.push(m.join(":")),w}function B(m){u.setTimeout(()=>{throw m},0)}function P(){var m=je;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class Ee{constructor(){this.h=this.g=null}add(E,w){const M=be.get();M.set(E,w),this.h?this.h.next=M:this.g=M,this.h=M}}var be=new C(()=>new Y,m=>m.reset());class Y{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Ae=!1,je=new Ee,H=()=>{const m=u.Promise.resolve(void 0);oe=()=>{m.then(ie)}};var ie=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(w){B(w)}var E=be;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}Ae=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,E),u.removeEventListener("test",w,E)}catch{}return m}();function Ce(m,E){if(ae.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,M=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(V){e:{try{q(E.nodeName);var J=!0;break e}catch{}J=!1}J||(E=null)}}else w=="mouseover"?E=m.fromElement:w=="mouseout"&&(E=m.toElement);this.relatedTarget=E,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ve[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ce.aa.h.call(this)}}T(Ce,ae);var Ve={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Kt="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function mr(m,E,w,M,J){this.listener=m,this.proxy=null,this.src=E,this.type=w,this.capture=!!M,this.ha=J,this.key=++Rt,this.da=this.fa=!1}function Ut(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Nn(m){this.src=m,this.g={},this.h=0}Nn.prototype.add=function(m,E,w,M,J){var se=m.toString();m=this.g[se],m||(m=this.g[se]=[],this.h++);var Te=di(m,E,M,J);return-1<Te?(E=m[Te],w||(E.fa=!1)):(E=new mr(E,this.src,se,!!M,J),E.fa=w,m.push(E)),E};function Zn(m,E){var w=E.type;if(w in m.g){var M=m.g[w],J=Array.prototype.indexOf.call(M,E,void 0),se;(se=0<=J)&&Array.prototype.splice.call(M,J,1),se&&(Ut(E),m.g[w].length==0&&(delete m.g[w],m.h--))}}function di(m,E,w,M){for(var J=0;J<m.length;++J){var se=m[J];if(!se.da&&se.listener==E&&se.capture==!!w&&se.ha==M)return J}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),gs={};function ks(m,E,w,M,J){if(Array.isArray(E)){for(var se=0;se<E.length;se++)ks(m,E[se],w,M,J);return null}return w=Mr(w),m&&m[Kt]?m.K(E,w,f(M)?!!M.capture:!1,J):on(m,E,w,!1,M,J)}function on(m,E,w,M,J,se){if(!E)throw Error("Invalid event type");var Te=f(J)?!!J.capture:!!J,At=gr(m);if(At||(m[Xt]=At=new Nn(m)),w=At.add(E,w,M,Te,se),w.proxy)return w;if(M=Is(),w.proxy=M,M.src=m,M.listener=w,m.addEventListener)Re||(J=Te),J===void 0&&(J=!1),m.addEventListener(E.toString(),M,J);else if(m.attachEvent)m.attachEvent(Bi(E.toString()),M);else if(m.addListener&&m.removeListener)m.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Is(){function m(w){return E.call(m.src,m.listener,w)}const E=pi;return m}function zi(m,E,w,M,J){if(Array.isArray(E))for(var se=0;se<E.length;se++)zi(m,E[se],w,M,J);else M=f(M)?!!M.capture:!!M,w=Mr(w),m&&m[Kt]?(m=m.i,E=String(E).toString(),E in m.g&&(se=m.g[E],w=di(se,w,M,J),-1<w&&(Ut(se[w]),Array.prototype.splice.call(se,w,1),se.length==0&&(delete m.g[E],m.h--)))):m&&(m=gr(m))&&(E=m.g[E.toString()],m=-1,E&&(m=di(E,w,M,J)),(w=-1<m?E[m]:null)&&ys(w))}function ys(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Kt])Zn(E.i,m);else{var w=m.type,M=m.proxy;E.removeEventListener?E.removeEventListener(w,M,m.capture):E.detachEvent?E.detachEvent(Bi(w),M):E.addListener&&E.removeListener&&E.removeListener(M),(w=gr(E))?(Zn(w,m),w.h==0&&(w.src=null,E[Xt]=null)):Ut(m)}}}function Bi(m){return m in gs?gs[m]:gs[m]="on"+m}function pi(m,E){if(m.da)m=!0;else{E=new Ce(E,this);var w=m.listener,M=m.ha||m.src;m.fa&&ys(m),m=w.call(M,E)}return m}function gr(m){return m=m[Xt],m instanceof Nn?m:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mr(m){return typeof m=="function"?m:(m[Kr]||(m[Kr]=function(E){return m.handleEvent(E)}),m[Kr])}function ut(){pe.call(this),this.i=new Nn(this),this.M=this,this.F=null}T(ut,pe),ut.prototype[Kt]=!0,ut.prototype.removeEventListener=function(m,E,w,M){zi(this,m,E,w,M)};function et(m,E){var w,M=m.F;if(M)for(w=[];M;M=M.F)w.push(M);if(m=m.M,M=E.type||E,typeof E=="string")E=new ae(E,m);else if(E instanceof ae)E.target=E.target||m;else{var J=E;E=new ae(M,m),z(E,J)}if(J=!0,w)for(var se=w.length-1;0<=se;se--){var Te=E.g=w[se];J=Mn(Te,M,!0,E)&&J}if(Te=E.g=m,J=Mn(Te,M,!0,E)&&J,J=Mn(Te,M,!1,E)&&J,w)for(se=0;se<w.length;se++)Te=E.g=w[se],J=Mn(Te,M,!1,E)&&J}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var w=m.g[E],M=0;M<w.length;M++)Ut(w[M]);delete m.g[E],m.h--}}this.F=null},ut.prototype.K=function(m,E,w,M){return this.i.add(String(m),E,!1,w,M)},ut.prototype.L=function(m,E,w,M){return this.i.add(String(m),E,!0,w,M)};function Mn(m,E,w,M){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var J=!0,se=0;se<E.length;++se){var Te=E[se];if(Te&&!Te.da&&Te.capture==w){var At=Te.listener,Dn=Te.ha||Te.src;Te.fa&&Zn(m.i,Te),J=At.call(Dn,M)!==!1&&J}}return J&&!M.defaultPrevented}function Jt(m,E,w){if(typeof m=="function")w&&(m=_(m,w));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:u.setTimeout(m,E||0)}function Os(m){m.g=Jt(()=>{m.g=null,m.i&&(m.i=!1,Os(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Dr extends pe{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pr(m){pe.call(this),this.h=m,this.g={}}T(Pr,pe);var Lr=[];function Tn(m){D(m.g,function(E,w){this.g.hasOwnProperty(w)&&ys(E)},m),m.g={}}Pr.prototype.N=function(){Pr.aa.N.call(this),Tn(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=u.JSON.stringify,mi=u.JSON.parse,yr=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Ns(){}Ns.prototype.h=null;function Wr(m){return m.h||(m.h=m.i())}function ji(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function er(){ae.call(this,"d")}T(er,ae);function Ms(){ae.call(this,"c")}T(Ms,ae);var tr={},Ot=null;function nr(){return Ot=Ot||new ut}tr.La="serverreachability";function Ds(m){ae.call(this,tr.La,m)}T(Ds,ae);function $(m){const E=nr();et(E,new Ds(E))}tr.STAT_EVENT="statevent";function X(m,E){ae.call(this,tr.STAT_EVENT,m),this.stat=E}T(X,ae);function Z(m){const E=nr();et(E,new X(E,m))}tr.Ma="timingevent";function ce(m,E){ae.call(this,tr.Ma,m),this.size=E}T(ce,ae);function ye(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Se(){this.g=!0}Se.prototype.xa=function(){this.g=!1};function Ue(m,E,w,M,J,se){m.info(function(){if(m.g)if(se)for(var Te="",At=se.split("&"),Dn=0;Dn<At.length;Dn++){var Tt=At[Dn].split("=");if(1<Tt.length){var jn=Tt[0];Tt=Tt[1];var Pn=jn.split("_");Te=2<=Pn.length&&Pn[1]=="type"?Te+(jn+"="+Tt+"&"):Te+(jn+"=redacted&")}}else Te=null;else Te=se;return"XMLHTTP REQ ("+M+") [attempt "+J+"]: "+E+`
`+w+`
`+Te})}function Ie(m,E,w,M,J,se,Te){m.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+J+"]: "+E+`
`+w+`
`+se+" "+Te})}function Ne(m,E,w,M){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Fe(m,w)+(M?" "+M:"")})}function Le(m,E){m.info(function(){return"TIMEOUT: "+E})}Se.prototype.info=function(){};function Fe(m,E){if(!m.g)return E;if(!E)return null;try{var w=JSON.parse(E);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var M=w[m];if(!(2>M.length)){var J=M[1];if(Array.isArray(J)&&!(1>J.length)){var se=J[0];if(se!="noop"&&se!="stop"&&se!="close")for(var Te=1;Te<J.length;Te++)J[Te]=""}}}}return En(w)}catch{return E}}var xe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},it;function St(){}T(St,Ns),St.prototype.g=function(){return new XMLHttpRequest},St.prototype.i=function(){return{}},it=new St;function _t(m,E,w,M){this.j=m,this.i=E,this.l=w,this.R=M||1,this.U=new Pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}var _e={},G={};function de(m,E,w){m.L=1,m.v=Ml(gi(E)),m.m=w,m.P=!0,we(m,null)}function we(m,E){m.F=Date.now(),Ct(m),m.A=gi(m.v);var w=m.A,M=m.R;Array.isArray(M)||(M=[String(M)]),qh(w.i,"t",M),m.C=0,w=m.j.J,m.h=new ft,m.g=Dp(m.j,w?E:null,!m.m),0<m.O&&(m.M=new Dr(_(m.Y,m,m.g),m.O)),E=m.U,w=m.g,M=m.ca;var J="readystatechange";Array.isArray(J)||(J&&(Lr[0]=J.toString()),J=Lr);for(var se=0;se<J.length;se++){var Te=ks(w,J[se],M||E.handleEvent,!1,E.h||E);if(!Te)break;E.g[Te.key]=Te}E=m.H?k(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),$(),Ue(m.i,m.u,m.A,m.l,m.R,m.m)}_t.prototype.ca=function(m){m=m.target;const E=this.M;E&&Gi(m)==3?E.j():this.Y(m)},_t.prototype.Y=function(m){try{if(m==this.g)e:{const Pn=Gi(this.g);var E=this.g.Ba();const So=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||Rp(this.g)))){this.J||Pn!=4||E==7||(E==8||0>=So?$(3):$(2)),Bt(this);var w=this.g.Z();this.X=w;t:if(tt(this)){var M=Rp(this.g);m="";var J=M.length,se=Gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pe(this),mn(this);var Te="";break t}this.h.i=new u.TextDecoder}for(E=0;E<J;E++)this.h.h=!0,m+=this.h.i.decode(M[E],{stream:!(se&&E==J-1)});M.length=0,this.h.g+=m,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=w==200,Ie(this.i,this.u,this.A,this.l,this.R,Pn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var At,Dn=this.g;if((At=Dn.g?Dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(At)){var Tt=At;break t}}Tt=null}if(w=Tt)Ne(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,en(this,w);else{this.o=!1,this.s=3,Z(12),Pe(this),mn(this);break e}}if(this.P){w=!0;let ir;for(;!this.J&&this.C<Te.length;)if(ir=zt(this,Te),ir==G){Pn==4&&(this.s=4,Z(14),w=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==_e){this.s=4,Z(15),Ne(this.i,this.l,Te,"[Invalid Chunk]"),w=!1;break}else Ne(this.i,this.l,ir,null),en(this,ir);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||Te.length!=0||this.h.h||(this.s=1,Z(16),w=!1),this.o=this.o&&w,!w)Ne(this.i,this.l,Te,"[Invalid Chunked Response]"),Pe(this),mn(this);else if(0<Te.length&&!this.W){this.W=!0;var jn=this.j;jn.g==this&&jn.ba&&!jn.M&&(jn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),jl(jn),jn.M=!0,Z(11))}}else Ne(this.i,this.l,Te,null),en(this,Te);Pn==4&&Pe(this),this.o&&!this.J&&(Pn==4?Op(this.j,this):(this.o=!1,Ct(this)))}else Y_(this.g),w==400&&0<Te.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Pe(this),mn(this)}}}catch{}finally{}};function tt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function zt(m,E){var w=m.C,M=E.indexOf(`
`,w);return M==-1?G:(w=Number(E.substring(w,M)),isNaN(w)?_e:(M+=1,M+w>E.length?G:(E=E.slice(M,M+w),m.C=M+w,E)))}_t.prototype.cancel=function(){this.J=!0,Pe(this)};function Ct(m){m.S=Date.now()+m.I,Zt(m,m.I)}function Zt(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=ye(_(m.ba,m),E)}function Bt(m){m.B&&(u.clearTimeout(m.B),m.B=null)}_t.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Le(this.i,this.A),this.L!=2&&($(),Z(17)),Pe(this),this.s=2,mn(this)):Zt(this,this.S-m)};function mn(m){m.j.G==0||m.J||Op(m.j,m)}function Pe(m){Bt(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,Tn(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function en(m,E){try{var w=m.j;if(w.G!=0&&(w.g==m||Fi(w.h,m))){if(!m.K&&Fi(w.h,m)&&w.G==3){try{var M=w.Da.g.parse(E)}catch{M=null}if(Array.isArray(M)&&M.length==3){var J=M;if(J[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)oc(w),ic(w);else break e;Yh(w),Z(18)}}else w.za=J[1],0<w.za-w.T&&37500>J[2]&&w.F&&w.v==0&&!w.C&&(w.C=ye(_(w.Za,w),6e3));if(1>=jt(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else bo(w,11)}else if((m.K||w.g==m)&&oc(w),!L(E))for(J=w.Da.g.parse(E),E=0;E<J.length;E++){let Tt=J[E];if(w.T=Tt[0],Tt=Tt[1],w.G==2)if(Tt[0]=="c"){w.K=Tt[1],w.ia=Tt[2];const jn=Tt[3];jn!=null&&(w.la=jn,w.j.info("VER="+w.la));const Pn=Tt[4];Pn!=null&&(w.Aa=Pn,w.j.info("SVER="+w.Aa));const So=Tt[5];So!=null&&typeof So=="number"&&0<So&&(M=1.5*So,w.L=M,w.j.info("backChannelRequestTimeoutMs_="+M)),M=w;const ir=m.g;if(ir){const Fs=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var se=M.h;se.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(yo(se,se.h),se.h=null))}if(M.D){const Xh=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Xh&&(M.ya=Xh,Dt(M.I,M.D,Xh))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),M=w;var Te=m;if(M.qa=Mp(M,M.J?M.ia:null,M.W),Te.K){rr(M.h,Te);var At=Te,Dn=M.L;Dn&&(At.I=Dn),At.B&&(Bt(At),Ct(At)),M.g=Te}else kp(M);0<w.i.length&&sc(w)}else Tt[0]!="stop"&&Tt[0]!="close"||bo(w,7);else w.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?bo(w,7):Kh(w):Tt[0]!="noop"&&w.l&&w.l.ta(Tt),w.v=0)}}$(4)}catch{}}var _r=class{constructor(m,E){this.g=m,this.map=E}};function Qr(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ps(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function jt(m){return m.h?1:m.g?m.g.size:0}function Fi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function yo(m,E){m.g?m.g.add(E):m.h=E}function rr(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Qr.prototype.cancel=function(){if(this.i=Bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Bh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const w of m.g.values())E=E.concat(w.D);return E}return b(m.i)}function $_(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var E=[],w=m.length,M=0;M<w;M++)E.push(m[M]);return E}E=[],w=0;for(M in m)E[w++]=m[M];return E}function Ju(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var E=[];m=m.length;for(var w=0;w<m;w++)E.push(w);return E}E=[],w=0;for(const M in m)E[w++]=M;return E}}}function jh(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var w=Ju(m),M=$_(m),J=M.length,se=0;se<J;se++)E.call(void 0,M[se],w&&w[se],m)}var Ol=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function G_(m,E){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var M=m[w].indexOf("="),J=null;if(0<=M){var se=m[w].substring(0,M);J=m[w].substring(M+1)}else se=m[w];E(se,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function bn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof bn){this.h=m.h,Nl(this,m.j),this.o=m.o,this.g=m.g,aa(this,m.s),this.l=m.l;var E=m.i,w=new vo;w.i=E.i,E.g&&(w.g=new Map(E.g),w.h=E.h),_o(this,w),this.m=m.m}else m&&(E=String(m).match(Ol))?(this.h=!1,Nl(this,E[1]||"",!0),this.o=Hi(E[2]||""),this.g=Hi(E[3]||"",!0),aa(this,E[4]),this.l=Hi(E[5]||"",!0),_o(this,E[6]||"",!0),this.m=Hi(E[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}bn.prototype.toString=function(){var m=[],E=this.j;E&&m.push(Dl(E,Fh,!0),":");var w=this.g;return(w||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Dl(E,Fh,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Dl(w,w.charAt(0)=="/"?K_:Hh,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Dl(w,Zu)),m.join("")};function gi(m){return new bn(m)}function Nl(m,E,w){m.j=w?Hi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function aa(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function _o(m,E,w){E instanceof vo?(m.i=E,Sp(m.i,m.h)):(w||(E=Dl(E,W_)),m.i=new vo(E,m.h))}function Dt(m,E,w){m.i.set(E,w)}function Ml(m){return Dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Hi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Dl(m,E,w){return typeof m=="string"?(m=encodeURI(m).replace(E,bp),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function bp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Fh=/[#\/\?@]/g,Hh=/[#\?:]/g,K_=/[#\?]/g,W_=/[#\?@]/g,Zu=/#/g;function vo(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function qi(m){m.g||(m.g=new Map,m.h=0,m.i&&G_(m.i,function(E,w){m.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=vo.prototype,n.add=function(m,E){qi(this),this.i=null,m=Ls(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(E),this.h+=1,this};function Ao(m,E){qi(m),E=Ls(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function To(m,E){return qi(m),E=Ls(m,E),m.g.has(E)}n.forEach=function(m,E){qi(this),this.g.forEach(function(w,M){w.forEach(function(J){m.call(E,J,M,this)},this)},this)},n.na=function(){qi(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),w=[];for(let M=0;M<E.length;M++){const J=m[M];for(let se=0;se<J.length;se++)w.push(E[M])}return w},n.V=function(m){qi(this);let E=[];if(typeof m=="string")To(this,m)&&(E=E.concat(this.g.get(Ls(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)E=E.concat(m[w])}return E},n.set=function(m,E){return qi(this),this.i=null,m=Ls(this,m),To(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function qh(m,E,w){Ao(m,E),0<w.length&&(m.i=null,m.g.set(Ls(m,E),b(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var w=0;w<E.length;w++){var M=E[w];const se=encodeURIComponent(String(M)),Te=this.V(M);for(M=0;M<Te.length;M++){var J=se;Te[M]!==""&&(J+="="+encodeURIComponent(String(Te[M]))),m.push(J)}}return this.i=m.join("&")};function Ls(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Sp(m,E){E&&!m.j&&(qi(m),m.i=null,m.g.forEach(function(w,M){var J=M.toLowerCase();M!=J&&(Ao(this,M),qh(this,J,w))},m)),m.j=E}function Pl(m,E){const w=new Se;if(u.Image){const M=new Image;M.onload=A($i,w,"TestLoadImage: loaded",!0,E,M),M.onerror=A($i,w,"TestLoadImage: error",!1,E,M),M.onabort=A($i,w,"TestLoadImage: abort",!1,E,M),M.ontimeout=A($i,w,"TestLoadImage: timeout",!1,E,M),u.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=m}else E(!1)}function _s(m,E){const w=new Se,M=new AbortController,J=setTimeout(()=>{M.abort(),$i(w,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:M.signal}).then(se=>{clearTimeout(J),se.ok?$i(w,"TestPingServer: ok",!0,E):$i(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),$i(w,"TestPingServer: error",!1,E)})}function $i(m,E,w,M,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),M(w)}catch{}}function Ll(){this.g=new yr}function Vs(m,E,w){const M=w||"";try{jh(m,function(J,se){let Te=J;f(J)&&(Te=En(J)),E.push(M+se+"="+encodeURIComponent(Te))})}catch(J){throw E.push(M+"type="+encodeURIComponent("_badmap")),J}}function la(m){this.l=m.Ub||null,this.j=m.eb||!1}T(la,Ns),la.prototype.g=function(){return new Eo(this.l,this.j)},la.prototype.i=function(m){return function(){return m}}({});function Eo(m,E){ut.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Eo,ut),n=Eo.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,zs(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||u).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$h(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function $h(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Us(this):zs(this),this.readyState==3&&$h(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Us(this))},n.Qa=function(m){this.g&&(this.response=m,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(m){m.readyState=4,m.l=null,m.j=null,m.v=null,zs(m)}n.setRequestHeader=function(m,E){this.u.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=E.next();return m.join(`\r
`)};function zs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Gh(m){let E="";return D(m,function(w,M){E+=M,E+=":",E+=w,E+=`\r
`}),E}function Bn(m,E,w){e:{for(M in w){var M=!1;break e}M=!0}M||(w=Gh(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):Dt(m,E,w))}function kt(m){ut.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(kt,ut);var ec=/^https?$/i,Vl=["POST","PUT"];n=kt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,E,w,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():it.g(),this.v=this.o?Wr(this.o):Wr(it),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(se){wp(this,se);return}if(m=w||"",w=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var J in M)w.set(J,M[J]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const se of M.keys())w.set(se,M.get(se));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(w.keys()).find(se=>se.toLowerCase()=="content-type"),J=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Vl,E,void 0))||M||J||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Te]of w)this.g.setRequestHeader(se,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ul(this),this.u=!0,this.g.send(m),this.u=!1}catch(se){wp(this,se)}};function wp(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,tc(m),Bs(m)}function tc(m){m.A||(m.A=!0,et(m,"complete"),et(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,et(this,"complete"),et(this,"abort"),Bs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nc(this):this.bb())},n.bb=function(){nc(this)};function nc(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Gi(m)!=4||m.Z()!=2)){if(m.u&&Gi(m)==4)Jt(m.Ea,0,m);else if(et(m,"readystatechange"),Gi(m)==4){m.h=!1;try{const Te=m.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var M;if(M=Te===0){var J=String(m.D).match(Ol)[1]||null;!J&&u.self&&u.self.location&&(J=u.self.location.protocol.slice(0,-1)),M=!ec.test(J?J.toLowerCase():"")}w=M}if(w)et(m,"complete"),et(m,"success");else{m.m=6;try{var se=2<Gi(m)?m.g.statusText:""}catch{se=""}m.l=se+" ["+m.Z()+"]",tc(m)}}finally{Bs(m)}}}}function Bs(m,E){if(m.g){Ul(m);const w=m.g,M=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||et(m,"ready");try{w.onreadystatechange=M}catch{}}}function Ul(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Gi(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Gi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),mi(E)}};function Rp(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Y_(m){const E={};m=(m.g&&2<=Gi(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<m.length;M++){if(L(m[M]))continue;var w=U(m[M]);const J=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const se=E[J]||[];E[J]=se,se.push(w)}N(E,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zl(m,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||E}function rc(m){this.Aa=0,this.i=[],this.j=new Se,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zl("baseRetryDelayMs",5e3,m),this.cb=zl("retryDelaySeedMs",1e4,m),this.Wa=zl("forwardChannelMaxRetries",2,m),this.wa=zl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(m&&m.concurrentRequestLimit),this.Da=new Ll,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rc.prototype,n.la=8,n.G=1,n.connect=function(m,E,w,M){Z(0),this.W=m,this.H=E||{},w&&M!==void 0&&(this.H.OSID=w,this.H.OAID=M),this.F=this.X,this.I=Mp(this,null,this.W),sc(this)};function Kh(m){if(Cp(m),m.G==3){var E=m.U++,w=gi(m.I);if(Dt(w,"SID",m.K),Dt(w,"RID",E),Dt(w,"TYPE","terminate"),Bl(m,w),E=new _t(m,m.j,E),E.L=2,E.v=Ml(gi(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(E.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=E.v,w=!0),w||(E.g=Dp(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ct(E)}Np(m)}function ic(m){m.g&&(jl(m),m.g.cancel(),m.g=null)}function Cp(m){ic(m),m.u&&(u.clearTimeout(m.u),m.u=null),oc(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function sc(m){if(!Ps(m.h)&&!m.s){m.s=!0;var E=m.Ga;oe||H(),Ae||(oe(),Ae=!0),je.add(E,m),m.B=0}}function Q_(m,E){return jt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=ye(_(m.Ga,m,E),Qh(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const J=new _t(this,this.j,m);let se=this.o;if(this.S&&(se?(se=k(se),z(se,this.S)):se=this.S),this.m!==null||this.O||(J.H=se,se=null),this.P)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var M=this.i[w];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(E+=M,4096<E){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=xp(this,J,E),w=gi(this.I),Dt(w,"RID",m),Dt(w,"CVER",22),this.D&&Dt(w,"X-HTTP-Session-Id",this.D),Bl(this,w),se&&(this.O?E="headers="+encodeURIComponent(String(Gh(se)))+"&"+E:this.m&&Bn(w,this.m,se)),yo(this.h,J),this.Ua&&Dt(w,"TYPE","init"),this.P?(Dt(w,"$req",E),Dt(w,"SID","null"),J.T=!0,de(J,w,null)):de(J,w,E),this.G=2}}else this.G==3&&(m?Wh(this,m):this.i.length==0||Ps(this.h)||Wh(this))};function Wh(m,E){var w;E?w=E.l:w=m.U++;const M=gi(m.I);Dt(M,"SID",m.K),Dt(M,"RID",w),Dt(M,"AID",m.T),Bl(m,M),m.m&&m.o&&Bn(M,m.m,m.o),w=new _t(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),E&&(m.i=E.D.concat(m.i)),E=xp(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),yo(m.h,w),de(w,M,E)}function Bl(m,E){m.H&&D(m.H,function(w,M){Dt(E,M,w)}),m.l&&jh({},function(w,M){Dt(E,M,w)})}function xp(m,E,w){w=Math.min(m.i.length,w);var M=m.l?_(m.l.Na,m.l,m):null;e:{var J=m.i;let se=-1;for(;;){const Te=["count="+w];se==-1?0<w?(se=J[0].g,Te.push("ofs="+se)):se=0:Te.push("ofs="+se);let At=!0;for(let Dn=0;Dn<w;Dn++){let Tt=J[Dn].g;const jn=J[Dn].map;if(Tt-=se,0>Tt)se=Math.max(0,J[Dn].g-100),At=!1;else try{Vs(jn,Te,"req"+Tt+"_")}catch{M&&M(jn)}}if(At){M=Te.join("&");break e}}}return m=m.i.splice(0,w),E.D=m,M}function kp(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;oe||H(),Ae||(oe(),Ae=!0),je.add(E,m),m.v=0}}function Yh(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=ye(_(m.Fa,m),Qh(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Ip(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=ye(_(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),ic(this),Ip(this))};function jl(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Ip(m){m.g=new _t(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=gi(m.qa);Dt(E,"RID","rpc"),Dt(E,"SID",m.K),Dt(E,"AID",m.T),Dt(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&Dt(E,"TO",m.ja),Dt(E,"TYPE","xmlhttp"),Bl(m,E),m.m&&m.o&&Bn(E,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Ml(gi(E)),w.m=null,w.P=!0,we(w,m)}n.Za=function(){this.C!=null&&(this.C=null,ic(this),Yh(this),Z(19))};function oc(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Op(m,E){var w=null;if(m.g==E){oc(m),jl(m),m.g=null;var M=2}else if(Fi(m.h,E))w=E.D,rr(m.h,E),M=1;else return;if(m.G!=0){if(E.o)if(M==1){w=E.m?E.m.length:0,E=Date.now()-E.F;var J=m.B;M=nr(),et(M,new ce(M,w)),sc(m)}else kp(m);else if(J=E.s,J==3||J==0&&0<E.X||!(M==1&&Q_(m,E)||M==2&&Yh(m)))switch(w&&0<w.length&&(E=m.h,E.i=E.i.concat(w)),J){case 1:bo(m,5);break;case 4:bo(m,10);break;case 3:bo(m,6);break;default:bo(m,2)}}}function Qh(m,E){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*E}function bo(m,E){if(m.j.info("Error code "+E),E==2){var w=_(m.fb,m),M=m.Xa;const J=!M;M=new bn(M||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Nl(M,"https"),Ml(M),J?Pl(M.toString(),w):_s(M.toString(),w)}else Z(2);m.G=0,m.l&&m.l.sa(E),Np(m),Cp(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Np(m){if(m.G=0,m.ka=[],m.l){const E=Bh(m.h);(E.length!=0||m.i.length!=0)&&(S(m.ka,E),S(m.ka,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.ra()}}function Mp(m,E,w){var M=w instanceof bn?gi(w):new bn(w);if(M.g!="")E&&(M.g=E+"."+M.g),aa(M,M.s);else{var J=u.location;M=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;var se=new bn(null);M&&Nl(se,M),E&&(se.g=E),J&&aa(se,J),w&&(se.l=w),M=se}return w=m.D,E=m.ya,w&&E&&Dt(M,w,E),Dt(M,"VER",m.la),Bl(m,M),M}function Dp(m,E,w){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new kt(new la({eb:w})):new kt(m.pa),E.Ha(m.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pp(){}n=Pp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ac(){}ac.prototype.g=function(m,E){return new Vr(m,E)};function Vr(m,E){ut.call(this),this.g=new rc(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!L(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!L(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new js(this)}T(Vr,ut),Vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){Kh(this.g)},Vr.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=En(m),m=w);E.i.push(new _r(E.Ya++,m)),E.G==3&&sc(E)},Vr.prototype.N=function(){this.g.l=null,delete this.j,Kh(this.g),delete this.g,Vr.aa.N.call(this)};function Lp(m){er.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const w in E){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Lp,er);function Vp(){Ms.call(this),this.status=1}T(Vp,Ms);function js(m){this.g=m}T(js,Pp),js.prototype.ua=function(){et(this.g,"a")},js.prototype.ta=function(m){et(this.g,new Lp(m))},js.prototype.sa=function(m){et(this.g,new Vp)},js.prototype.ra=function(){et(this.g,"b")},ac.prototype.createWebChannel=ac.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,vN=function(){return new ac},_N=function(){return nr()},yN=tr,cT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,cg=xe,He.COMPLETE="complete",gN=He,ji.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,rd=ji,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,mN=kt}).apply(typeof Bm<"u"?Bm:typeof self<"u"?self:typeof window<"u"?window:{});const $C="@firebase/firestore",GC="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new r_("@firebase/firestore");function Bc(){return Nu.logLevel}function Oe(n,...e){if(Nu.logLevel<=gt.DEBUG){const t=e.map(BE);Nu.debug(`Firestore (${Nh}): ${n}`,...t)}}function ea(n,...e){if(Nu.logLevel<=gt.ERROR){const t=e.map(BE);Nu.error(`Firestore (${Nh}): ${n}`,...t)}}function ah(n,...e){if(Nu.logLevel<=gt.WARN){const t=e.map(BE);Nu.warn(`Firestore (${Nh}): ${n}`,...t)}}function BE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,AN(n,r,t)}function AN(n,e,t){let r=`FIRESTORE (${Nh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ea(r),new Error(r)}function It(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||AN(e,i,r)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(br.UNAUTHENTICATED))}shutdown(){}}class $3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class G3{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new Yo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yo,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yo)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new TN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class K3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W3{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new K3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const r=s=>{s.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new KC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new KC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Q3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function hT(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return lt(r,i);{const s=EN(),a=X3(s.encode(WC(n,t)),s.encode(WC(e,t)));return a!==0?a:lt(r,i)}}t+=r>65535?2:1}return lt(n.length,e.length)}function WC(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function X3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function lh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=-62135596800,QC=1e6;class On{static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*QC);return new On(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<YC)throw new Be(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QC}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-YC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new On(0,0))}static max(){return new Xe(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="__name__";class Xs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Xs.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return lt(e.length,t.length)}static compareSegments(e,t){const r=Xs.isNumericId(e),i=Xs.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Xs.extractNumericId(e).compare(Xs.extractNumericId(t)):hT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Za.fromString(e.substring(4,e.length-2))}}class Yt extends Xs{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const J3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Xs{construct(e,t,r){return new fr(e,t,r)}static isValidIdentifier(e){return J3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XC}static keyField(){return new fr([XC])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Be(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Be(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Be(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new Be(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Yt.fromString(e))}static fromName(e){return new $e(Yt.fromString(e).popFirst(5))}static empty(){return new $e(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Yt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=-1;function Z3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Xe.fromTimestamp(r===1e9?new On(t+1,0):new On(t,r));return new hl(i,$e.empty(),e)}function ej(n){return new hl(n.readTime,n.key,Pd)}class hl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hl(Xe.min(),$e.empty(),Pd)}static max(){return new hl(Xe.max(),$e.empty(),Pd)}}function tj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$e.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==nj)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&t()},c=>r(c))}),a=!0,s===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new fe((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const f=c;t(e[f]).next(p=>{a[f]=p,++u,u===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new fe((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function ij(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}i_.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=-1;function s_(n){return n==null}function Ug(n){return n===0&&1/n==-1/0}function sj(n){return typeof n=="number"&&Number.isInteger(n)&&!Ug(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="";function oj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JC(e)),e=aj(n.get(t),e);return JC(e)}function aj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case SN:t+="";break;default:t+=s}}return t}function JC(n){return n+SN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jm(this.root,e,this.comparator,!1)}getReverseIterator(){return new jm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jm(this.root,e,this.comparator,!0)}}class jm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ur(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ex(this.data.getIterator())}getIteratorFrom(e){return new ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new Ii([])}unionWith(e){let t=new zn(fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RN("Invalid base64 string: "+s):s}}(e);return new pr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const lj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fl(n){if(It(!!n,39018),typeof n=="string"){let e=0;const t=lj.exec(n);if(It(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(n.seconds),nanos:_n(n.nanos)}}function _n(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function dl(n){return typeof n=="string"?pr.fromBase64String(n):pr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="server_timestamp",xN="__type__",kN="__previous_value__",IN="__local_write_time__";function FE(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[xN])===null||t===void 0?void 0:t.stringValue)===CN}function o_(n){const e=n.mapValue.fields[kN];return FE(e)?o_(e):e}function Ld(n){const e=fl(n.mapValue.fields[IN].timestampValue);return new On(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,t,r,i,s,a,u,c,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f}}const zg="(default)";class Vd{constructor(e,t){this.projectId=e,this.database=t||zg}static empty(){return new Vd("","")}get isDefaultDatabase(){return this.database===zg}isEqual(e){return e instanceof Vd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="__type__",cj="__max__",Fm={mapValue:{}},NN="__vector__",Bg="value";function pl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?FE(n)?4:fj(n)?9007199254740991:hj(n)?10:11:Ye(28295,{value:n})}function co(n,e){if(n===e)return!0;const t=pl(n);if(t!==pl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ld(n).isEqual(Ld(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=fl(i.timestampValue),u=fl(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return dl(i.bytesValue).isEqual(dl(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=_n(i.doubleValue),u=_n(s.doubleValue);return a===u?Ug(a)===Ug(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return lh(n.arrayValue.values||[],e.arrayValue.values||[],co);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(ZC(a)!==ZC(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!co(a[c],u[c])))return!1;return!0}(n,e);default:return Ye(52216,{left:n})}}function Ud(n,e){return(n.values||[]).find(t=>co(t,e))!==void 0}function uh(n,e){if(n===e)return 0;const t=pl(n),r=pl(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(s,a){const u=_n(s.integerValue||s.doubleValue),c=_n(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return tx(n.timestampValue,e.timestampValue);case 4:return tx(Ld(n),Ld(e));case 5:return hT(n.stringValue,e.stringValue);case 6:return function(s,a){const u=dl(s),c=dl(a);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const p=lt(u[f],c[f]);if(p!==0)return p}return lt(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const u=lt(_n(s.latitude),_n(a.latitude));return u!==0?u:lt(_n(s.longitude),_n(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return nx(n.arrayValue,e.arrayValue);case 10:return function(s,a){var u,c,f,p;const g=s.fields||{},_=a.fields||{},A=(u=g[Bg])===null||u===void 0?void 0:u.arrayValue,T=(c=_[Bg])===null||c===void 0?void 0:c.arrayValue,b=lt(((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:nx(A,T)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Fm.mapValue&&a===Fm.mapValue)return 0;if(s===Fm.mapValue)return 1;if(a===Fm.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),f=a.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=hT(c[g],p[g]);if(_!==0)return _;const A=uh(u[c[g]],f[p[g]]);if(A!==0)return A}return lt(c.length,p.length)}(n.mapValue,e.mapValue);default:throw Ye(23264,{Pe:t})}}function tx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=fl(n),r=fl(e),i=lt(t.seconds,r.seconds);return i!==0?i:lt(t.nanos,r.nanos)}function nx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=uh(t[i],r[i]);if(s)return s}return lt(t.length,r.length)}function ch(n){return fT(n)}function fT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=fl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return dl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=fT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${fT(t.fields[a])}`;return i+"}"}(n.mapValue):Ye(61005,{value:n})}function hg(n){switch(pl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=o_(n);return e?16+hg(e):16;case 5:return 2*n.stringValue.length;case 6:return dl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+hg(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return bl(r.fields,(s,a)=>{i+=s.length+hg(a)}),i}(n.mapValue);default:throw Ye(13486,{value:n})}}function dT(n){return!!n&&"integerValue"in n}function HE(n){return!!n&&"arrayValue"in n}function rx(n){return!!n&&"nullValue"in n}function ix(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fg(n){return!!n&&"mapValue"in n}function hj(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ON])===null||t===void 0?void 0:t.stringValue)===NN}function dd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dd(t)}setAll(e){let t=fr.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=dd(a):i.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());fg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ni(dd(this.value))}}function MN(n){const e=[];return bl(n.fields,(t,r)=>{const i=new fr([t]);if(fg(r)){const s=MN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new wr(e,0,Xe.min(),Xe.min(),Xe.min(),ni.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,Xe.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,Xe.min(),Xe.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,Xe.min(),Xe.min(),ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,t){this.position=e,this.inclusive=t}}function sx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=$e.comparator($e.fromName(a.referenceValue),t.key):r=uh(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ox(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!co(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t="asc"){this.field=e,this.dir=t}}function dj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{}class Un extends DN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mj(e,t,r):t==="array-contains"?new _j(e,r):t==="in"?new vj(e,r):t==="not-in"?new Aj(e,r):t==="array-contains-any"?new Tj(e,r):new Un(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gj(e,r):new yj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(uh(t,this.value)):t!==null&&pl(this.value)===pl(t)&&this.matchesComparison(uh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ho extends DN{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ho(e,t)}matches(e){return PN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function PN(n){return n.op==="and"}function LN(n){return pj(n)&&PN(n)}function pj(n){for(const e of n.filters)if(e instanceof ho)return!1;return!0}function pT(n){if(n instanceof Un)return n.field.canonicalString()+n.op.toString()+ch(n.value);if(LN(n))return n.filters.map(e=>pT(e)).join(",");{const e=n.filters.map(t=>pT(t)).join(",");return`${n.op}(${e})`}}function VN(n,e){return n instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.field.isEqual(i.field)&&co(r.value,i.value)}(n,e):n instanceof ho?function(r,i){return i instanceof ho&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&VN(a,i.filters[u]),!0):!1}(n,e):void Ye(19439)}function UN(n){return n instanceof Un?function(t){return`${t.field.canonicalString()} ${t.op} ${ch(t.value)}`}(n):n instanceof ho?function(t){return t.op.toString()+" {"+t.getFilters().map(UN).join(" ,")+"}"}(n):"Filter"}class mj extends Un{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class gj extends Un{constructor(e,t){super(e,"in",t),this.keys=zN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yj extends Un{constructor(e,t){super(e,"not-in",t),this.keys=zN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class _j extends Un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return HE(t)&&Ud(t.arrayValue,this.value)}}class vj extends Un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ud(this.value.arrayValue,t)}}class Aj extends Un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ud(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ud(this.value.arrayValue,t)}}class Tj extends Un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!HE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ud(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Ie=null}}function ax(n,e=null,t=[],r=[],i=null,s=null,a=null){return new Ej(n,e,t,r,i,s,a)}function qE(n){const e=Ze(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),s_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ch(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ch(r)).join(",")),e.Ie=t}return e.Ie}function $E(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ox(n.startAt,e.startAt)&&ox(n.endAt,e.endAt)}function mT(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function bj(n,e,t,r,i,s,a,u){return new a_(n,e,t,r,i,s,a,u)}function GE(n){return new a_(n)}function lx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Sj(n){return n.collectionGroup!==null}function pd(n){const e=Ze(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new zn(fr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Fg(s,r))}),t.has(fr.keyField().canonicalString())||e.Ee.push(new Fg(fr.keyField(),r))}return e.Ee}function io(n){const e=Ze(n);return e.de||(e.de=wj(e,pd(n))),e.de}function wj(n,e){if(n.limitType==="F")return ax(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Fg(i.field,s)});const t=n.endAt?new jg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jg(n.startAt.position,n.startAt.inclusive):null;return ax(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gT(n,e,t){return new a_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function l_(n,e){return $E(io(n),io(e))&&n.limitType===e.limitType}function BN(n){return`${qE(io(n))}|lt:${n.limitType}`}function jc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>UN(i)).join(", ")}]`),s_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ch(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ch(i)).join(",")),`Target(${r})`}(io(n))}; limitType=${n.limitType})`}function u_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of pd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,c){const f=sx(a,u,c);return a.inclusive?f<=0:f<0}(r.startAt,pd(r),i)||r.endAt&&!function(a,u,c){const f=sx(a,u,c);return a.inclusive?f>=0:f>0}(r.endAt,pd(r),i))}(n,e)}function Rj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jN(n){return(e,t)=>{let r=!1;for(const i of pd(n)){const s=Cj(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Cj(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(s,a,u){const c=a.data.field(s),f=u.data.field(s);return c!==null&&f!==null?uh(c,f):Ye(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new sn($e.comparator);function ta(){return xj}const FN=new sn($e.comparator);function id(...n){let e=FN;for(const t of n)e=e.insert(t.key,t);return e}function HN(n){let e=FN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pu(){return md()}function qN(){return md()}function md(){return new Ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const kj=new sn($e.comparator),Ij=new zn($e.comparator);function yt(...n){let e=Ij;for(const t of n)e=e.add(t);return e}const Oj=new zn(lt);function Nj(){return Oj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ug(e)?"-0":e}}function $N(n){return{integerValue:""+n}}function Mj(n,e){return sj(e)?$N(e):KE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this._=void 0}}function Dj(n,e,t){return n instanceof zd?function(i,s){const a={fields:{[xN]:{stringValue:CN},[IN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&FE(s)&&(s=o_(s)),s&&(a.fields[kN]=s),{mapValue:a}}(t,e):n instanceof hh?KN(n,e):n instanceof fh?WN(n,e):function(i,s){const a=GN(i,s),u=ux(a)+ux(i.Re);return dT(a)&&dT(i.Re)?$N(u):KE(i.serializer,u)}(n,e)}function Pj(n,e,t){return n instanceof hh?KN(n,e):n instanceof fh?WN(n,e):t}function GN(n,e){return n instanceof Hg?function(r){return dT(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class zd extends c_{}class hh extends c_{constructor(e){super(),this.elements=e}}function KN(n,e){const t=YN(e);for(const r of n.elements)t.some(i=>co(i,r))||t.push(r);return{arrayValue:{values:t}}}class fh extends c_{constructor(e){super(),this.elements=e}}function WN(n,e){let t=YN(e);for(const r of n.elements)t=t.filter(i=>!co(i,r));return{arrayValue:{values:t}}}class Hg extends c_{constructor(e,t){super(),this.serializer=e,this.Re=t}}function ux(n){return _n(n.integerValue||n.doubleValue)}function YN(n){return HE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t){this.field=e,this.transform=t}}function Lj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof hh&&i instanceof hh||r instanceof fh&&i instanceof fh?lh(r.elements,i.elements,co):r instanceof Hg&&i instanceof Hg?co(r.Re,i.Re):r instanceof zd&&i instanceof zd}(n.transform,e.transform)}class Vj{constructor(e,t){this.version=e,this.transformResults=t}}class so{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new so}static exists(e){return new so(void 0,e)}static updateTime(e){return new so(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class h_{}function QN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new JN(n.key,so.none()):new up(n.key,n.data,so.none());{const t=n.data,r=ni.empty();let i=new zn(fr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Sl(n.key,r,new Ii(i.toArray()),so.none())}}function Uj(n,e,t){n instanceof up?function(i,s,a){const u=i.value.clone(),c=hx(i.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Sl?function(i,s,a){if(!dg(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=hx(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(XN(i)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function gd(n,e,t,r){return n instanceof up?function(s,a,u,c){if(!dg(s.precondition,a))return u;const f=s.value.clone(),p=fx(s.fieldTransforms,c,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sl?function(s,a,u,c){if(!dg(s.precondition,a))return u;const f=fx(s.fieldTransforms,c,a),p=a.data;return p.setAll(XN(s)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,a,u){return dg(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function zj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=GN(r.transform,i||null);s!=null&&(t===null&&(t=ni.empty()),t.set(r.field,s))}return t||null}function cx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lh(r,i,(s,a)=>Lj(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class up extends h_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sl extends h_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hx(n,e,t){const r=new Map;It(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,Pj(a,u,t[i]))}return r}function fx(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,Dj(s,a,e))}return r}class JN extends h_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bj extends h_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Uj(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qN();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const c=QN(a,u);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yt())}isEqual(e){return this.batchId===e.batchId&&lh(this.mutations,e.mutations,(t,r)=>cx(t,r))&&lh(this.baseMutations,e.baseMutations,(t,r)=>cx(t,r))}}class YE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return kj}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new YE(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,bt;function qj(n){switch(n){case me.OK:return Ye(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function ZN(n){if(n===void 0)return ea("GRPC error has no .code"),me.UNKNOWN;switch(n){case Rn.OK:return me.OK;case Rn.CANCELLED:return me.CANCELLED;case Rn.UNKNOWN:return me.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return me.INTERNAL;case Rn.UNAVAILABLE:return me.UNAVAILABLE;case Rn.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Rn.NOT_FOUND:return me.NOT_FOUND;case Rn.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Rn.ABORTED:return me.ABORTED;case Rn.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Rn.DATA_LOSS:return me.DATA_LOSS;default:return Ye(39323,{code:n})}}(bt=Rn||(Rn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=new Za([4294967295,4294967295],0);function dx(n){const e=EN().encode(n),t=new pN;return t.update(e),new Uint8Array(t.digest())}function px(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Za([t,r],0),new Za([i,s],0)]}class QE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sd(`Invalid padding: ${t}`);if(r<0)throw new sd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sd(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Za.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Za.fromNumber(r)));return i.compare($j)===1&&(i=new Za([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=dx(e),[r,i]=px(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);if(!this.be(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new QE(s,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.pe===0)return;const t=dx(e),[r,i]=px(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class sd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new f_(Xe.min(),i,new sn(lt),ta(),yt())}}class cp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cp(r,t,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class eM{constructor(e,t){this.targetId=e,this.Ce=t}}class tM{constructor(e,t,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class mx{constructor(){this.Fe=0,this.Me=gx(),this.xe=pr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=yt(),t=yt(),r=yt();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye(38017,{changeType:s})}}),new cp(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=gx()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,It(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Gj{constructor(e){this.ze=e,this.je=new Map,this.He=ta(),this.Je=Hm(),this.Ye=Hm(),this.Ze=new sn(lt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(mT(s))if(r===0){const a=new $e(s.path);this.tt(t,a,wr.newNoDocument(a,Xe.min()))}else It(r===1,20013,{expectedCount:r});else{const a=this.ut(t);if(a!==r){const u=this.ct(e),c=u?this.lt(u,e,a):1;if(c!==0){this.st(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=dl(r).toUint8Array()}catch(c){if(c instanceof RN)return ah("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new QE(a,i,s)}catch(c){return ah(c instanceof sd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.pe===0?null:u}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.ze.Pt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,a)=>{const u=this._t(a);if(u){if(s.current&&mT(u.target)){const c=new $e(u.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,wr.newNoDocument(c,e))}s.Le&&(t.set(a,s.qe()),s.Qe())}});let r=yt();this.Ye.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const i=new f_(e,t,this.Ze,this.He,r);return this.He=ta(),this.Je=Hm(),this.Ye=Hm(),this.Ze=new sn(lt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new mx,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new zn(lt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new zn(lt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new mx),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Hm(){return new sn($e.comparator)}function gx(){return new sn($e.comparator)}const Kj={asc:"ASCENDING",desc:"DESCENDING"},Wj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yj={and:"AND",or:"OR"};class Qj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yT(n,e){return n.useProto3Json||s_(e)?e:{value:e}}function qg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Xj(n,e){return qg(n,e.toTimestamp())}function oo(n){return It(!!n,49232),Xe.fromTimestamp(function(t){const r=fl(t);return new On(r.seconds,r.nanos)}(n))}function XE(n,e){return _T(n,e).canonicalString()}function _T(n,e){const t=function(i){return new Yt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rM(n){const e=Yt.fromString(n);return It(lM(e),10190,{key:e.toString()}),e}function vT(n,e){return XE(n.databaseId,e.path)}function rA(n,e){const t=rM(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(sM(t))}function iM(n,e){return XE(n.databaseId,e)}function Jj(n){const e=rM(n);return e.length===4?Yt.emptyPath():sM(e)}function AT(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sM(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yx(n,e,t){return{name:vT(n,e),fields:t.value.mapValue.fields}}function Zj(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ye(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,p){return f.useProto3Json?(It(p===void 0||typeof p=="string",58123),pr.fromBase64String(p||"")):(It(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),pr.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const p=f.code===void 0?me.UNKNOWN:ZN(f.code);return new Be(p,f.message||"")}(a);t=new tM(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rA(n,r.document.name),s=oo(r.document.updateTime),a=r.document.createTime?oo(r.document.createTime):Xe.min(),u=new ni({mapValue:{fields:r.document.fields}}),c=wr.newFoundDocument(i,s,a,u),f=r.targetIds||[],p=r.removedTargetIds||[];t=new pg(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rA(n,r.document),s=r.readTime?oo(r.readTime):Xe.min(),a=wr.newNoDocument(i,s),u=r.removedTargetIds||[];t=new pg([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rA(n,r.document),s=r.removedTargetIds||[];t=new pg([],s,i,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new Hj(i,s),u=r.targetId;t=new eM(u,a)}}return t}function eF(n,e){let t;if(e instanceof up)t={update:yx(n,e.key,e.value)};else if(e instanceof JN)t={delete:vT(n,e.key)};else if(e instanceof Sl)t={update:yx(n,e.key,e.data),updateMask:uF(e.fieldMask)};else{if(!(e instanceof Bj))return Ye(16599,{ft:e.type});t={verify:vT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const u=a.transform;if(u instanceof zd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof fh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hg)return{fieldPath:a.field.canonicalString(),increment:u.Re};throw Ye(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Xj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ye(27497)}(n,e.precondition)),t}function tF(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map(t=>function(i,s){let a=i.updateTime?oo(i.updateTime):oo(s);return a.isEqual(Xe.min())&&(a=oo(s)),new Vj(a,i.transformResults||[])}(t,e))):[]}function nF(n,e){return{documents:[iM(n,e.path)]}}function rF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iM(n,i);const s=function(f){if(f.length!==0)return aM(ho.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(p=>function(_){return{field:Fc(_.field),direction:oF(_.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=yT(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function iF(n){let e=Jj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(g){const _=oM(g);return _ instanceof ho&&LN(_)?_.getFilters():[_]}(t.where));let a=[];t.orderBy&&(a=function(g){return g.map(_=>function(T){return new Fg(Hc(T.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(t.orderBy));let u=null;t.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,s_(_)?null:_}(t.limit));let c=null;t.startAt&&(c=function(g){const _=!!g.before,A=g.values||[];return new jg(A,_)}(t.startAt));let f=null;return t.endAt&&(f=function(g){const _=!g.before,A=g.values||[];return new jg(A,_)}(t.endAt)),bj(e,i,a,s,u,"F",c,f)}function sF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Hc(t.unaryFilter.field);return Un.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hc(t.unaryFilter.field);return Un.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hc(t.unaryFilter.field);return Un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hc(t.unaryFilter.field);return Un.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(n):n.fieldFilter!==void 0?function(t){return Un.create(Hc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ho.create(t.compositeFilter.filters.map(r=>oM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(t.compositeFilter.op))}(n):Ye(30097,{filter:n})}function oF(n){return Kj[n]}function aF(n){return Wj[n]}function lF(n){return Yj[n]}function Fc(n){return{fieldPath:n.canonicalString()}}function Hc(n){return fr.fromServerFormat(n.fieldPath)}function aM(n){return n instanceof Un?function(t){if(t.op==="=="){if(ix(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NAN"}};if(rx(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ix(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NOT_NAN"}};if(rx(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fc(t.field),op:aF(t.op),value:t.value}}}(n):n instanceof ho?function(t){const r=t.getFilters().map(i=>aM(i));return r.length===1?r[0]:{compositeFilter:{op:lF(t.op),filters:r}}}(n):Ye(54877,{filter:n})}function uF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t,r,i,s=Xe.min(),a=Xe.min(),u=pr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new qa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.wt=e}}function hF(n){const e=iF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.yn=new dF}addToCollectionParentIndex(e,t){return this.yn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(hl.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(hl.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class dF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(Yt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uM=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(uM,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new dh(0)}static ir(){return new dh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="LruGarbageCollector",pF=1048576;function Ax([n,e],[t,r]){const i=lt(n,t);return i===0?lt(e,r):i}class mF{constructor(e){this.cr=e,this.buffer=new zn(Ax),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ax(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Oe(vx,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dh(t)?Oe(vx,"Ignoring IndexedDB error during garbage collection: ",t):await Mh(t)}await this.Ir(3e5)})}}class yF{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(i_.le);const r=new mF(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(_x)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_x):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,a,u,c,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(f=Date.now(),Bc()<=gt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-p}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function _F(n,e){return new yF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.changes=new Ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&gd(r.mutation,i,Ii.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yt()){const i=pu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=id();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=pu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let s=ta();const a=md(),u=function(){return md()}();return t.forEach((c,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Sl)?s=s.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),gd(p.mutation,f,p.mutation.getFieldMask(),On.now())):a.set(f.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((f,p)=>a.set(f,p)),t.forEach((f,p)=>{var g;return u.set(f,new AF(p,(g=a.get(f))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){const r=md();let i=new sn((a,u)=>a-u),s=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=t.get(c);if(f===null)return;let p=r.get(c)||Ii.empty();p=u.applyToLocalView(f,p),r.set(c,p);const g=(i.get(u.batchId)||yt()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,p=c.value,g=qN();p.forEach(_=>{if(!s.has(_)){const A=QN(t.get(_),r.get(_));A!==null&&g.set(_,A),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return fe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return $e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):fe.resolve(pu());let u=Pd,c=s;return a.next(f=>fe.forEach(f,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?fe.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,c,f,yt())).next(p=>({batchId:u,changes:HN(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let i=id();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=id();return this.indexManager.getCollectionParents(e,s).next(u=>fe.forEach(u,c=>{const f=function(g,_){return new a_(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((c,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,wr.newInvalidDocument(p)))});let u=id();return a.forEach((c,f)=>{const p=s.get(c);p!==void 0&&gd(p.mutation,f,Ii.empty(),On.now()),u_(t,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:oo(i.createTime)}}(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:hF(i.bundledQuery),readTime:oo(i.readTime)}}(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(){this.overlays=new sn($e.comparator),this.Or=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pu();return fe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=pu(),s=t.length+1,a=new $e(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new sn((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=s.get(f.largestBatchId);p===null&&(p=pu(),s=s.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=pu(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=i)););return fe.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Fj(t,r));let s=this.Or.get(t);s===void 0&&(s=yt(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.Nr=new zn($n.Br),this.Lr=new zn($n.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new $n(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new $n(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new $e(new Yt([])),r=new $n(t,e),i=new $n(t,e+1),s=[];return this.Lr.forEachInRange([r,i],a=>{this.Qr(a),s.push(a.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new $e(new Yt([])),r=new $n(t,e),i=new $n(t,e+1);let s=yt();return this.Lr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new $n(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $n{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return $e.comparator(e.key,t.key)||lt(e.Gr,t.Gr)}static kr(e,t){return lt(e.Gr,t.Gr)||$e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new zn($n.Br)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jj(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.zr=this.zr.add(new $n(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return fe.resolve(a)}lookupMutationBatch(e,t){return fe.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return fe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?jE:this.Jn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $n(t,0),i=new $n(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],a=>{const u=this.jr(a.Gr);s.push(u)}),fe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(lt);return t.forEach(i=>{const s=new $n(i,0),a=new $n(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,a],u=>{r=r.add(u.Gr)})}),fe.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;$e.isDocumentKey(s)||(s=s.child(""));const a=new $n(new $e(s),0);let u=new zn(lt);return this.zr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Gr)),!0)},a),fe.resolve(this.Jr(u))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){It(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return fe.forEach(t.mutations,i=>{const s=new $n(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new $n(t,0),i=this.zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.Zr=e,this.docs=function(){return new sn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=ta();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ta();const a=t.path,u=new $e(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||tj(ej(p),r)<=0||(i.has(p.key)||u_(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return fe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ye(9500)}Xr(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CF(this)}getSize(e){return fe.resolve(this.size)}}class CF extends vF{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.persistence=e,this.ei=new Ku(t=>qE(t),$E),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ti=0,this.ni=new JE,this.targetCount=0,this.ri=dh.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),fe.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new dh(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.ar(t),fe.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ei.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),fe.waitFor(s).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),fe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t){this.ii={},this.overlays={},this.si=new i_(0),this.oi=!1,this.oi=!0,this._i=new SF,this.referenceDelegate=e(this),this.ai=new xF(this),this.indexManager=new fF,this.remoteDocumentCache=function(i){return new RF(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new cF(t),this.ci=new EF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new wF(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new kF(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return fe.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class kF extends rj{constructor(e){super(),this.currentSequenceNumber=e}}class ZE{constructor(e){this.persistence=e,this.Ti=new JE,this.Ii=null}static Ei(e){return new ZE(e)}get di(){if(this.Ii)return this.Ii;throw Ye(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,r=>{const i=$e.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,Xe.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return fe.or([()=>fe.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class $g{constructor(e,t){this.persistence=e,this.Ri=new Ku(r=>oj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=_F(this,t)}static Ei(e,t){return new $g(e,t)}li(){}hi(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return fe.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?fe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,a=>this.gr(e,a,t).next(u=>{u||(r++,s.removeEntry(a,Xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),fe.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hg(e.data.value)),t}gr(e,t,r){return fe.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=yt(),i=yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new eb(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return SB()?8:ij(Ir())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new IF;return this.fs(e,t,a).next(u=>{if(s.result=u,this.Is)return this.gs(e,t,a,u.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Bc()<=gt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),fe.resolve()):(Bc()<=gt.DEBUG&&Oe("QueryEngine","Query:",jc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Bc()<=gt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,io(t))):fe.resolve())}Rs(e,t){if(lx(t))return fe.resolve(null);let r=io(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gT(t,null,"F"),r=io(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=yt(...s);return this.As.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.ps(t,u);return this.ys(t,f,a,c.readTime)?this.Rs(e,gT(t,null,"F")):this.ws(e,f,t,c)}))})))}Vs(e,t,r,i){return lx(t)||i.isEqual(Xe.min())?fe.resolve(null):this.As.getDocuments(e,r).next(s=>{const a=this.ps(t,s);return this.ys(t,a,r,i)?fe.resolve(null):(Bc()<=gt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jc(t)),this.ws(e,a,t,Z3(i,Pd)).next(u=>u))})}ps(e,t){let r=new zn(jN(e));return t.forEach((i,s)=>{u_(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return Bc()<=gt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",jc(t)),this.As.getDocumentsMatchingQuery(e,t,hl.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="LocalStore",NF=3e8;class MF{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new sn(lt),this.Ds=new Ku(s=>qE(s),$E),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TF(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function DF(n,e,t,r){return new MF(n,e,t,r)}async function hM(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let c=yt();for(const f of i){a.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of s){u.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(r,c).next(f=>({Ms:f,removedBatchIds:a,addedBatchIds:u}))})})}function PF(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(u,c,f,p){const g=f.batch,_=g.keys();let A=fe.resolve();return _.forEach(T=>{A=A.next(()=>p.getEntry(c,T)).next(b=>{const S=f.docVersions.get(T);It(S!==null,48541),b.version.compareTo(S)<0&&(g.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),p.addEntry(b)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=yt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fM(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function LF(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const u=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;u.push(t.ai.removeMatchingKeys(s,p.removedDocuments,g).next(()=>t.ai.addMatchingKeys(s,p.addedDocuments,g)));let A=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(pr.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),i=i.insert(g,A),function(b,S,C){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=NF?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(_,A,p)&&u.push(t.ai.updateTargetData(s,A))});let c=ta(),f=yt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(VF(s,a,e.documentUpdates).next(p=>{c=p.xs,f=p.Os})),!r.isEqual(Xe.min())){const p=t.ai.getLastRemoteSnapshotVersion(s).next(g=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return fe.waitFor(u).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,f)).next(()=>c)}).then(s=>(t.Ss=i,s))}function VF(n,e,t){let r=yt(),i=yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=ta();return t.forEach((u,c)=>{const f=s.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Xe.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):Oe(tb,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{xs:a,Os:i}})}function UF(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zF(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,fe.resolve(i)):t.ai.allocateTargetId(r).next(a=>(i=new qa(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function TT(n,e,t){const r=Ze(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Dh(a))throw a;Oe(tb,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function Tx(n,e,t){const r=Ze(n);let i=Xe.min(),s=yt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,p){const g=Ze(c),_=g.Ds.get(p);return _!==void 0?fe.resolve(g.Ss.get(_)):g.ai.getTargetData(f,p)}(r,a,io(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>r.bs.getDocumentsMatchingQuery(a,e,t?i:Xe.min(),t?s:yt())).next(u=>(BF(r,Rj(e),u),{documents:u,Ns:s})))}function BF(n,e,t){let r=n.vs.get(e)||Xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class Ex{constructor(){this.activeTargetIds=Nj()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jF{constructor(){this.So=new Ex,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Ex,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="ConnectivityMonitor";class Sx{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Oe(bx,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Oe(bx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm=null;function ET(){return qm===null?qm=function(){return 268435456+Math.round(2147483648*Math.random())}():qm++,"0x"+qm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="RestConnection",HF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qF{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===zg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const a=ET(),u=this.$o(e,t.toUriEncodedString());Oe(iA,`Sending RPC '${e}' ${a}:`,u,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(c,i,s),this.Ko(e,u,c,r).then(f=>(Oe(iA,`Received RPC '${e}' ${a}: `,f),f),f=>{throw ah(iA,`RPC '${e}' ${a} failed with error: `,f,"url: ",u,"request:",r),f})}Wo(e,t,r,i,s,a){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=HF[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class GF extends qF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=ET();return new Promise((a,u)=>{const c=new mN;c.setWithCredentials(!0),c.listenOnce(gN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cg.NO_ERROR:const p=c.getResponseJson();Oe(Tr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case cg.TIMEOUT:Oe(Tr,`RPC '${e}' ${s} timed out`),u(new Be(me.DEADLINE_EXCEEDED,"Request time out"));break;case cg.HTTP_ERROR:const g=c.getStatus();if(Oe(Tr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const T=function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(C)>=0?C:me.UNKNOWN}(A.status);u(new Be(T,A.message))}else u(new Be(me.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Be(me.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{s_:e,streamId:s,o_:c.getLastErrorCode(),__:c.getLastError()})}}finally{Oe(Tr,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);Oe(Tr,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",f,r,15)})}a_(e,t,r){const i=ET(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=vN(),u=_N(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=s.join("");Oe(Tr,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=a.createWebChannel(p,c);let _=!1,A=!1;const T=new $F({Go:S=>{A?Oe(Tr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(Oe(Tr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Oe(Tr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},zo:()=>g.close()}),b=(S,C,L)=>{S.listen(C,j=>{try{L(j)}catch(q){setTimeout(()=>{throw q},0)}})};return b(g,rd.EventType.OPEN,()=>{A||(Oe(Tr,`RPC '${e}' stream ${i} transport opened.`),T.t_())}),b(g,rd.EventType.CLOSE,()=>{A||(A=!0,Oe(Tr,`RPC '${e}' stream ${i} transport closed`),T.r_())}),b(g,rd.EventType.ERROR,S=>{A||(A=!0,ah(Tr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),T.r_(new Be(me.UNAVAILABLE,"The operation could not be completed")))}),b(g,rd.EventType.MESSAGE,S=>{var C;if(!A){const L=S.data[0];It(!!L,16349);const j=L,q=(j==null?void 0:j.error)||((C=j[0])===null||C===void 0?void 0:C.error);if(q){Oe(Tr,`RPC '${e}' stream ${i} received error:`,q);const V=q.status;let D=function(x){const z=Rn[x];if(z!==void 0)return ZN(z)}(V),N=q.message;D===void 0&&(D=me.INTERNAL,N="Unknown error status: "+V+" with message "+q.message),A=!0,T.r_(new Be(D,N)),g.close()}else Oe(Tr,`RPC '${e}' stream ${i} received:`,L),T.i_(L)}}),b(u,yN.STAT_EVENT,S=>{S.stat===cT.PROXY?Oe(Tr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===cT.NOPROXY&&Oe(Tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.n_()},0),T}}function sA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(n){return new Qj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="PersistentStream";class pM{constructor(e,t,r,i,s,a,u,c){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new dM(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(ea(t.toString()),ea("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new Be(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Oe(wx,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Oe(wx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KF extends pM{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=Zj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Xe.min():a.readTime?oo(a.readTime):Xe.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=AT(this.serializer),t.addTarget=function(s,a){let u;const c=a.target;if(u=mT(c)?{documents:nF(s,c)}:{query:rF(s,c).gt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=nM(s,a.resumeToken);const f=yT(s,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Xe.min())>0){u.readTime=qg(s,a.snapshotVersion.toTimestamp());const f=yT(s,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=sF(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=AT(this.serializer),t.removeTarget=e,this.F_(t)}}class WF extends pM{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=tF(e.writeResults,e.commitTime),r=oo(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=AT(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>eF(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{}class QF extends YF{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Be(me.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Qo(e,_T(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(me.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Wo(e,_T(t,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Be(me.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class XF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ea(t),this.ea=!1):Oe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu="RemoteStore";class JF{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(a=>{r.enqueueAndForget(async()=>{Wu(this)&&(Oe(Mu,"Restarting streams for network reachability change."),await async function(c){const f=Ze(c);f.aa.add(4),await hp(f),f.la.set("Unknown"),f.aa.delete(4),await p_(f)}(this))})}),this.la=new XF(r,i)}}async function p_(n){if(Wu(n))for(const e of n.ua)await e(!0)}async function hp(n){for(const e of n.ua)await e(!1)}function mM(n,e){const t=Ze(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),sb(t)?ib(t):Ph(t).b_()&&rb(t,e))}function nb(n,e){const t=Ze(n),r=Ph(t);t._a.delete(e),r.b_()&&gM(t,e),t._a.size===0&&(r.b_()?r.v_():Wu(t)&&t.la.set("Unknown"))}function rb(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ph(n).U_(e)}function gM(n,e){n.ha.Ke(e),Ph(n).K_(e)}function ib(n){n.ha=new Gj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Ph(n).start(),n.la.ta()}function sb(n){return Wu(n)&&!Ph(n).w_()&&n._a.size>0}function Wu(n){return Ze(n).aa.size===0}function yM(n){n.ha=void 0}async function ZF(n){n.la.set("Online")}async function e6(n){n._a.forEach((e,t)=>{rb(n,e)})}async function t6(n,e){yM(n),sb(n)?(n.la.ia(e),ib(n)):n.la.set("Unknown")}async function n6(n,e,t){if(n.la.set("Online"),e instanceof tM&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i._a.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i._a.delete(u),i.ha.removeTarget(u))}(n,e)}catch(r){Oe(Mu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gg(n,r)}else if(e instanceof pg?n.ha.Xe(e):e instanceof eM?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Xe.min()))try{const r=await fM(n.localStore);t.compareTo(r)>=0&&await function(s,a){const u=s.ha.It(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=s._a.get(f);p&&s._a.set(f,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const p=s._a.get(c);if(!p)return;s._a.set(c,p.withResumeToken(pr.EMPTY_BYTE_STRING,p.snapshotVersion)),gM(s,c);const g=new qa(p.target,c,f,p.sequenceNumber);rb(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Oe(Mu,"Failed to raise snapshot:",r),await Gg(n,r)}}async function Gg(n,e,t){if(!Dh(e))throw e;n.aa.add(1),await hp(n),n.la.set("Offline"),t||(t=()=>fM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Oe(Mu,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await p_(n)})}function _M(n,e){return e().catch(t=>Gg(n,t,e))}async function m_(n){const e=Ze(n),t=ml(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:jE;for(;r6(e);)try{const i=await UF(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,i6(e,i)}catch(i){await Gg(e,i)}vM(e)&&AM(e)}function r6(n){return Wu(n)&&n.oa.length<10}function i6(n,e){n.oa.push(e);const t=ml(n);t.b_()&&t.W_&&t.G_(e.mutations)}function vM(n){return Wu(n)&&!ml(n).w_()&&n.oa.length>0}function AM(n){ml(n).start()}async function s6(n){ml(n).H_()}async function o6(n){const e=ml(n);for(const t of n.oa)e.G_(t.mutations)}async function a6(n,e,t){const r=n.oa.shift(),i=YE.from(r,e,t);await _M(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await m_(n)}async function l6(n,e){e&&ml(n).W_&&await async function(r,i){if(function(a){return qj(a)&&a!==me.ABORTED}(i.code)){const s=r.oa.shift();ml(r).D_(),await _M(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await m_(r)}}(n,e),vM(n)&&AM(n)}async function Rx(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Oe(Mu,"RemoteStore received new credentials");const r=Wu(t);t.aa.add(3),await hp(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await p_(t)}async function u6(n,e){const t=Ze(n);e?(t.aa.delete(2),await p_(t)):e||(t.aa.add(2),await hp(t),t.la.set("Unknown"))}function Ph(n){return n.Pa||(n.Pa=function(t,r,i){const s=Ze(t);return s.Y_(),new KF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:ZF.bind(null,n),Jo:e6.bind(null,n),Zo:t6.bind(null,n),Q_:n6.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),sb(n)?ib(n):n.la.set("Unknown")):(await n.Pa.stop(),yM(n))})),n.Pa}function ml(n){return n.Ta||(n.Ta=function(t,r,i){const s=Ze(t);return s.Y_(),new WF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:s6.bind(null,n),Zo:l6.bind(null,n),z_:o6.bind(null,n),j_:a6.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await m_(n)):(await n.Ta.stop(),n.oa.length>0&&(Oe(Mu,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new ob(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ab(n,e){if(ea("AsyncQueue",`${e}: ${n}`),Dh(n))return new Be(me.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{static emptySet(e){return new Jc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=id(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Jc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.Ia=new sn($e.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ye(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class ph{constructor(e,t,r,i,s,a,u,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new ph(e,t,Jc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&l_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class h6{constructor(){this.queries=xx(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=Ze(t),s=i.queries;i.queries=xx(),s.forEach((a,u)=>{for(const c of u.Ra)c.onError(r)})})(this,new Be(me.ABORTED,"Firestore shutting down"))}}function xx(){return new Ku(n=>BN(n),l_)}async function TM(n,e){const t=Ze(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new c6,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=ab(a,`Initialization of query '${jc(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&lb(t)}async function EM(n,e){const t=Ze(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Ra.indexOf(e);a>=0&&(s.Ra.splice(a,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function f6(n,e){const t=Ze(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Ra)u.pa(i)&&(r=!0);a.Aa=i}}r&&lb(t)}function d6(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function lb(n){n.fa.forEach(e=>{e.next()})}var bT,kx;(kx=bT||(bT={})).ya="default",kx.Cache="cache";class bM{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ph(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==bT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.key=e}}class wM{constructor(e){this.key=e}}class p6{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=yt(),this.mutatedKeys=yt(),this.Ua=jN(e),this.Ka=new Jc(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new Cx,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),A=u_(this.query,g)?g:null,T=!!_&&this.mutatedKeys.has(_.key),b=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let S=!1;_&&A?_.data.isEqual(A.data)?T!==b&&(r.track({type:3,doc:A}),S=!0):this.ja(_,A)||(r.track({type:2,doc:A}),S=!0,(c&&this.Ua(A,c)>0||f&&this.Ua(A,f)<0)&&(u=!0)):!_&&A?(r.track({type:0,doc:A}),S=!0):_&&!A&&(r.track({type:1,doc:_}),S=!0,(c||f)&&(u=!0)),S&&(A?(a=a.add(A),s=b?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ka:a,za:r,ys:u,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((p,g)=>function(A,T){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:S})}};return b(A)-b(T)}(p.type,g.type)||this.Ua(p.doc,g.doc)),this.Ha(r),i=i!=null&&i;const u=t&&!i?this.Ja():[],c=this.$a.size===0&&this.current&&!i?1:0,f=c!==this.Qa;return this.Qa=c,a.length!==0||f?{snapshot:new ph(this.query,e.Ka,s,a,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:u}:{Ya:u}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Cx,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=yt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new wM(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new SM(r))}),t}Xa(e){this.qa=e.Ns,this.$a=yt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return ph.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const ub="SyncEngine";class m6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class g6{constructor(e){this.key=e,this.tu=!1}}class y6{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Ku(u=>BN(u),l_),this.iu=new Map,this.su=new Set,this.ou=new sn($e.comparator),this._u=new Map,this.au=new JE,this.uu={},this.cu=new Map,this.lu=dh.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function _6(n,e,t=!0){const r=OM(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await RM(r,e,t,!0),i}async function v6(n,e){const t=OM(n);await RM(t,e,!0,!1)}async function RM(n,e,t,r){const i=await zF(n.localStore,io(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await A6(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&mM(n.remoteStore,i),u}async function A6(n,e,t,r,i){n.Pu=(g,_,A)=>async function(b,S,C,L){let j=S.view.Ga(C);j.ys&&(j=await Tx(b.localStore,S.query,!1).then(({documents:N})=>S.view.Ga(N,j)));const q=L&&L.targetChanges.get(S.targetId),V=L&&L.targetMismatches.get(S.targetId)!=null,D=S.view.applyChanges(j,b.isPrimaryClient,q,V);return Ox(b,S.targetId,D.Ya),D.snapshot}(n,g,_,A);const s=await Tx(n.localStore,e,!0),a=new p6(e,s.Ns),u=a.Ga(s.documents),c=cp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,c);Ox(n,t,f.Ya);const p=new m6(e,t,a);return n.ru.set(e,p),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),f.snapshot}async function T6(n,e,t){const r=Ze(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(a=>!l_(a,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await TT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nb(r.remoteStore,i.targetId),ST(r,i.targetId)}).catch(Mh)):(ST(r,i.targetId),await TT(r.localStore,i.targetId,!0))}async function E6(n,e){const t=Ze(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nb(t.remoteStore,r.targetId))}async function b6(n,e,t){const r=I6(n);try{const i=await function(a,u){const c=Ze(a),f=On.now(),p=u.reduce((A,T)=>A.add(T.key),yt());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let T=ta(),b=yt();return c.Cs.getEntries(A,p).next(S=>{T=S,T.forEach((C,L)=>{L.isValidDocument()||(b=b.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,T)).next(S=>{g=S;const C=[];for(const L of u){const j=zj(L,g.get(L.key).overlayedDocument);j!=null&&C.push(new Sl(L.key,j,MN(j.value.mapValue),so.exists(!0)))}return c.mutationQueue.addMutationBatch(A,f,C,u)}).next(S=>{_=S;const C=S.applyToLocalDocumentSet(g,b);return c.documentOverlayCache.saveOverlays(A,S.batchId,C)})}).then(()=>({batchId:_.batchId,changes:HN(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,c){let f=a.uu[a.currentUser.toKey()];f||(f=new sn(lt)),f=f.insert(u,c),a.uu[a.currentUser.toKey()]=f}(r,i.batchId,t),await fp(r,i.changes),await m_(r.remoteStore)}catch(i){const s=ab(i,"Failed to persist write");t.reject(s)}}async function CM(n,e){const t=Ze(n);try{const r=await LF(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t._u.get(s);a&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.tu=!0:i.modifiedDocuments.size>0?It(a.tu,14607):i.removedDocuments.size>0&&(It(a.tu,42227),a.tu=!1))}),await fp(t,r,e)}catch(r){await Mh(r)}}function Ix(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,a)=>{const u=a.view.ga(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){const c=Ze(a);c.onlineState=u;let f=!1;c.queries.forEach((p,g)=>{for(const _ of g.Ra)_.ga(u)&&(f=!0)}),f&&lb(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function S6(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let a=new sn($e.comparator);a=a.insert(s,wr.newNoDocument(s,Xe.min()));const u=yt().add(s),c=new f_(Xe.min(),new Map,new sn(lt),a,u);await CM(r,c),r.ou=r.ou.remove(s),r._u.delete(e),cb(r)}else await TT(r.localStore,e,!1).then(()=>ST(r,e,t)).catch(Mh)}async function w6(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=await PF(t.localStore,e);kM(t,r,null),xM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await fp(t,i)}catch(i){await Mh(i)}}async function R6(n,e,t){const r=Ze(n);try{const i=await function(a,u){const c=Ze(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(It(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>c.localDocuments.getDocuments(f,p))})}(r.localStore,e);kM(r,e,t),xM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await fp(r,i)}catch(i){await Mh(i)}}function xM(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function kM(n,e,t){const r=Ze(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function ST(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||IM(n,r)})}function IM(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(nb(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),cb(n))}function Ox(n,e,t){for(const r of t)r instanceof SM?(n.au.addReference(r.key,e),C6(n,r)):r instanceof wM?(Oe(ub,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||IM(n,r.key)):Ye(19791,{Iu:r})}function C6(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(Oe(ub,"New document in limbo: "+t),n.su.add(r),cb(n))}function cb(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new $e(Yt.fromString(e)),r=n.lu.next();n._u.set(r,new g6(t)),n.ou=n.ou.insert(t,r),mM(n.remoteStore,new qa(io(GE(t.path)),r,"TargetPurposeLimboResolution",i_.le))}}async function fp(n,e,t){const r=Ze(n),i=[],s=[],a=[];r.ru.isEmpty()||(r.ru.forEach((u,c)=>{a.push(r.Pu(c,e,t).then(f=>{var p;if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=eb.Ps(c.targetId,f);s.push(g)}}))}),await Promise.all(a),r.nu.Q_(i),await async function(c,f){const p=Ze(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>fe.forEach(f,_=>fe.forEach(_.ls,A=>p.persistence.referenceDelegate.addReference(g,_.targetId,A)).next(()=>fe.forEach(_.hs,A=>p.persistence.referenceDelegate.removeReference(g,_.targetId,A)))))}catch(g){if(!Dh(g))throw g;Oe(tb,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const A=p.Ss.get(_),T=A.snapshotVersion,b=A.withLastLimboFreeSnapshotVersion(T);p.Ss=p.Ss.insert(_,b)}}}(r.localStore,s))}async function x6(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Oe(ub,"User change. New user:",e.toKey());const r=await hM(t.localStore,e);t.currentUser=e,function(s,a){s.cu.forEach(u=>{u.forEach(c=>{c.reject(new Be(me.CANCELLED,a))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fp(t,r.Ms)}}function k6(n,e){const t=Ze(n),r=t._u.get(e);if(r&&r.tu)return yt().add(r.key);{let i=yt();const s=t.iu.get(e);if(!s)return i;for(const a of s){const u=t.ru.get(a);i=i.unionWith(u.view.Wa)}return i}}function OM(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S6.bind(null,e),e.nu.Q_=f6.bind(null,e.eventManager),e.nu.Tu=d6.bind(null,e.eventManager),e}function I6(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class Kg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=d_(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return DF(this.persistence,new OF,e.initialUser,this.serializer)}Ru(e){return new cM(ZE.Ei,this.serializer)}Au(e){return new jF}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kg.provider={build:()=>new Kg};class O6 extends Kg{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){It(this.persistence.referenceDelegate instanceof $g,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gF(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new cM(r=>$g.Ei(r,t),this.serializer)}}class wT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ix(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x6.bind(null,this.syncEngine),await u6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new h6}()}createDatastore(e){const t=d_(e.databaseInfo.databaseId),r=function(s){return new GF(s)}(e.databaseInfo);return function(s,a,u,c){return new QF(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,u){return new JF(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Ix(this.syncEngine,t,0),function(){return Sx.C()?new Sx:new FF}())}createSyncEngine(e,t){return function(i,s,a,u,c,f,p){const g=new y6(i,s,a,u,c,f);return p&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ze(i);Oe(Mu,"RemoteStore shutting down."),s.aa.add(5),await hp(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}wT.provider={build:()=>new wT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ea("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="FirestoreClient";class N6{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=bN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Oe(gl,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Oe(gl,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ab(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function oA(n,e){n.asyncQueue.verifyOperationInProgress(),Oe(gl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await hM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Nx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await M6(n);Oe(gl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Rx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Rx(e.remoteStore,i)),n._onlineComponents=e}async function M6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe(gl,"Using user provided OfflineComponentProvider");try{await oA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===me.FAILED_PRECONDITION||i.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ah("Error using user provided cache. Falling back to memory cache: "+t),await oA(n,new Kg)}}else Oe(gl,"Using default OfflineComponentProvider"),await oA(n,new O6(void 0));return n._offlineComponents}async function MM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe(gl,"Using user provided OnlineComponentProvider"),await Nx(n,n._uninitializedComponentsProvider._online)):(Oe(gl,"Using default OnlineComponentProvider"),await Nx(n,new wT))),n._onlineComponents}function D6(n){return MM(n).then(e=>e.syncEngine)}async function DM(n){const e=await MM(n),t=e.eventManager;return t.onListen=_6.bind(null,e.syncEngine),t.onUnlisten=T6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=v6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E6.bind(null,e.syncEngine),t}function P6(n,e,t={}){const r=new Yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,f){const p=new NM({next:_=>{p.yu(),a.enqueueAndForget(()=>EM(s,g));const A=_.docs.has(u);!A&&_.fromCache?f.reject(new Be(me.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&_.fromCache&&c&&c.source==="server"?f.reject(new Be(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new bM(GE(u.path),p,{includeMetadataChanges:!0,Fa:!0});return TM(s,g)}(await DM(n),n.asyncQueue,e,t,r)),r.promise}function L6(n,e,t={}){const r=new Yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,f){const p=new NM({next:_=>{p.yu(),a.enqueueAndForget(()=>EM(s,g)),_.fromCache&&c.source==="server"?f.reject(new Be(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new bM(u,p,{includeMetadataChanges:!0,Fa:!0});return TM(s,g)}(await DM(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n,e,t){if(!t)throw new Be(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V6(n,e,t,r){if(e===!0&&r===!0)throw new Be(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dx(n){if(!$e.isDocumentKey(n))throw new Be(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Px(n){if($e.isDocumentKey(n))throw new Be(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function yl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hb(n);throw new Be(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="firestore.googleapis.com",Lx=!0;class Vx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VM,this.ssl=Lx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Lx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pF)throw new Be(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new q3;switch(r.type){case"firstParty":return new W3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Mx.get(t);r&&(Oe("ComponentProvider","Removing Datastore"),Mx.delete(t),r.terminate())}(this),Promise.resolve()}}function U6(n,e,t,r={}){var i;const s=(n=yl(n,g_))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;s.host!==VM&&s.host!==u&&ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:u,ssl:!1,emulatorOptions:r});if(!Jo(c,a)&&(n._setSettings(c),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=br.MOCK_USER;else{f=iN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Be(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new br(g)}n._authCredentials=new $3(new TN(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new y_(this.firestore,e,this._query)}}class Di{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new el(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Di(this.firestore,e,this._key)}}class el extends y_{constructor(e,t,r){super(e,t,GE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Di(this.firestore,null,new $e(e))}withConverter(e){return new el(this.firestore,e,this._path)}}function fb(n,e,...t){if(n=fn(n),LM("collection","path",e),n instanceof g_){const r=Yt.fromString(e,...t);return Px(r),new el(n,null,r)}{if(!(n instanceof Di||n instanceof el))throw new Be(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return Px(r),new el(n.firestore,null,r)}}function dp(n,e,...t){if(n=fn(n),arguments.length===1&&(e=bN.newId()),LM("doc","path",e),n instanceof g_){const r=Yt.fromString(e,...t);return Dx(r),new Di(n,null,new $e(r))}{if(!(n instanceof Di||n instanceof el))throw new Be(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return Dx(r),new Di(n.firestore,n instanceof el?n.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="AsyncQueue";class zx{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new dM(this,"async_queue_retry"),this.ju=()=>{const r=sA();r&&Oe(Ux,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=sA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=sA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Yo;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Dh(e))throw e;Oe(Ux,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,ea("INTERNAL UNHANDLED ERROR: ",Bx(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=ob.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&Ye(47125,{ec:Bx(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Bx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class pp extends g_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zx(e),this._firestoreClient=void 0,await e}}}function z6(n,e){const t=typeof n=="object"?n:zE(),r=typeof n=="string"?n:zg,i=Oh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=tN("firestore");s&&U6(i,...s)}return i}function db(n){if(n._terminated)throw new Be(me.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||B6(n),n._firestoreClient}function B6(n){var e,t,r;const i=n._freezeSettings(),s=function(u,c,f,p){return new uj(u,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,PM(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new N6(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mh(pr.fromBase64String(e))}catch(t){throw new Be(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mh(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Be(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=/^__.*__$/;class F6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new up(e,this.data,t,this.fieldTransforms)}}class UM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{oc:n})}}class v_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new v_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Wg(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(zM(this.oc)&&j6.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class H6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||d_(e)}dc(e,t,r,i=!1){return new v_({oc:e,methodName:t,Ec:r,path:fr.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BM(n){const e=n._freezeSettings(),t=d_(n._databaseId);return new H6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function q6(n,e,t,r,i,s={}){const a=n.dc(s.merge||s.mergeFields?2:0,e,t,i);vb("Data must be an object, but it was:",a,r);const u=FM(r,a);let c,f;if(s.merge)c=new Ii(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=RT(e,g,t);if(!a.contains(_))throw new Be(me.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);qM(p,_)||p.push(_)}c=new Ii(p),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new F6(new ni(u),c,f)}class A_ extends Lh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof A_}}function jM(n,e,t){return new v_({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gb extends Lh{_toFieldTransform(e){return new WE(e.path,new zd)}isEqual(e){return e instanceof gb}}class yb extends Lh{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=jM(this,e,!0),r=this.Ac.map(s=>Vh(s,t)),i=new hh(r);return new WE(e.path,i)}isEqual(e){return e instanceof yb&&Jo(this.Ac,e.Ac)}}class _b extends Lh{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=jM(this,e,!0),r=this.Ac.map(s=>Vh(s,t)),i=new fh(r);return new WE(e.path,i)}isEqual(e){return e instanceof _b&&Jo(this.Ac,e.Ac)}}function $6(n,e,t,r){const i=n.dc(1,e,t);vb("Data must be an object, but it was:",i,r);const s=[],a=ni.empty();bl(r,(c,f)=>{const p=Ab(e,c,t);f=fn(f);const g=i.hc(p);if(f instanceof A_)s.push(p);else{const _=Vh(f,g);_!=null&&(s.push(p),a.set(p,_))}});const u=new Ii(s);return new UM(a,u,i.fieldTransforms)}function G6(n,e,t,r,i,s){const a=n.dc(1,e,t),u=[RT(e,r,t)],c=[i];if(s.length%2!=0)throw new Be(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(RT(e,s[_])),c.push(s[_+1]);const f=[],p=ni.empty();for(let _=u.length-1;_>=0;--_)if(!qM(f,u[_])){const A=u[_];let T=c[_];T=fn(T);const b=a.hc(A);if(T instanceof A_)f.push(A);else{const S=Vh(T,b);S!=null&&(f.push(A),p.set(A,S))}}const g=new Ii(f);return new UM(p,g,a.fieldTransforms)}function Vh(n,e){if(HM(n=fn(n)))return vb("Unsupported field value:",e,n),FM(n,e);if(n instanceof Lh)return function(r,i){if(!zM(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const u of r){let c=Vh(u,i.Pc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=On.fromDate(r);return{timestampValue:qg(i.serializer,s)}}if(r instanceof On){const s=new On(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qg(i.serializer,s)}}if(r instanceof pb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mh)return{bytesValue:nM(i.serializer,r._byteString)};if(r instanceof Di){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mb)return function(a,u){return{mapValue:{fields:{[ON]:{stringValue:NN},[Bg]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Tc("VectorValues must only contain numeric values.");return KE(u.serializer,f)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${hb(r)}`)}(n,e)}function FM(n,e){const t={};return wN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bl(n,(r,i)=>{const s=Vh(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function HM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof On||n instanceof pb||n instanceof mh||n instanceof Di||n instanceof Lh||n instanceof mb)}function vb(n,e,t){if(!HM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=hb(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function RT(n,e,t){if((e=fn(e))instanceof __)return e._internalPath;if(typeof e=="string")return Ab(n,e);throw Wg("Field path arguments must be of type string or ",n,!1,void 0,t)}const K6=new RegExp("[~\\*/\\[\\]]");function Ab(n,e,t){if(e.search(K6)>=0)throw Wg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new __(...e.split("."))._internalPath}catch{throw Wg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wg(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Be(me.INVALID_ARGUMENT,u+n+c)}function qM(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Di(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W6 extends $M{data(){return super.data()}}function GM(n,e){return typeof e=="string"?Ab(n,e):e instanceof __?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Be(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q6{convertValue(e,t="none"){switch(pl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Bg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>_n(a.doubleValue));return new mb(s)}convertGeoPoint(e){return new pb(_n(e.latitude),_n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=o_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ld(e));default:return null}}convertTimestamp(e){const t=fl(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);It(lM(r),9688,{name:e});const i=new Vd(r.get(1),r.get(3)),s=new $e(r.popFirst(5));return i.isEqual(t)||ea(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KM extends $M{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class mg extends KM{data(e={}){return super.data(e)}}class J6{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new od(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new mg(this._firestore,this._userDataWriter,r.key,r,new od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const c=new mg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new od(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new mg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new od(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:Z6(u.type),doc:c,oldIndex:f,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Z6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(n){n=yl(n,Di);const e=yl(n.firestore,pp);return P6(db(e),n._key).then(t=>n9(e,n,t))}class WM extends Q6{constructor(e){super(),this.firestore=e}convertBytes(e){return new mh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Di(this.firestore,null,t)}}function YM(n){n=yl(n,y_);const e=yl(n.firestore,pp),t=db(e),r=new WM(e);return Y6(n._query),L6(t,n._query).then(i=>new J6(e,r,n,i))}function Tb(n,e,t,...r){n=yl(n,Di);const i=yl(n.firestore,pp),s=BM(i);let a;return a=typeof(e=fn(e))=="string"||e instanceof __?G6(s,"updateDoc",n._key,e,t,r):$6(s,"updateDoc",n._key,e),QM(i,[a.toMutation(n._key,so.exists(!0))])}function t9(n,e){const t=yl(n.firestore,pp),r=dp(n),i=X6(n.converter,e);return QM(t,[q6(BM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,so.exists(!1))]).then(()=>r)}function QM(n,e){return function(r,i){const s=new Yo;return r.asyncQueue.enqueueAndForget(async()=>b6(await D6(r),i,s)),s.promise}(db(n),e)}function n9(n,e,t){const r=t.docs.get(e._key),i=new WM(n);return new KM(n,i,e._key,r,new od(t.hasPendingWrites,t.fromCache),e.converter)}function r9(){return new gb("serverTimestamp")}function XM(...n){return new yb("arrayUnion",n)}function i9(...n){return new _b("arrayRemove",n)}(function(e,t=!0){(function(i){Nh=i})(Gu),Rs(new hs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new pp(new G3(r.getProvider("auth-internal")),new Y3(a,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Be(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(f.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),ri($C,GC,e),ri($C,GC,"esm2017")})();var s9="firebase",o9="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri(s9,o9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="firebasestorage.googleapis.com",ZM="storageBucket",a9=2*60*1e3,l9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends ms{constructor(e,t,r=0){super(aA(e),`Firebase Storage: ${t} (${aA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return aA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function aA(n){return"storage/"+n}function Eb(){const n="An unknown error occurred, please check the error payload for server response.";return new pn(dn.UNKNOWN,n)}function u9(n){return new pn(dn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function c9(n){return new pn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h9(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pn(dn.UNAUTHENTICATED,n)}function f9(){return new pn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d9(n){return new pn(dn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function p9(){return new pn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m9(){return new pn(dn.CANCELED,"User canceled the upload/download.")}function g9(n){return new pn(dn.INVALID_URL,"Invalid URL '"+n+"'.")}function y9(n){return new pn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _9(){return new pn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZM+"' property when initializing the app?")}function v9(){return new pn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function A9(){return new pn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function T9(n){return new pn(dn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function CT(n){return new pn(dn.INVALID_ARGUMENT,n)}function eD(){return new pn(dn.APP_DELETED,"The Firebase app was deleted.")}function E9(n){return new pn(dn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yd(n,e){return new pn(dn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function qf(n){throw new pn(dn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Oi.makeFromUrl(e,t)}catch{return new Oi(e,"")}if(r.path==="")return r;throw y9(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const p="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",A=new RegExp(`^https?://${g}/${p}/b/${i}/o${_}`,"i"),T={bucket:1,path:3},b=t===JM?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",C=new RegExp(`^https?://${b}/${i}/${S}`,"i"),j=[{regex:u,indices:c,postModify:s},{regex:A,indices:T,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<j.length;q++){const V=j[q],D=V.regex.exec(e);if(D){const N=D[V.indices.bucket];let k=D[V.indices.path];k||(k=""),r=new Oi(N,k),V.postModify(r);break}}if(r==null)throw g9(e);return r}}class b9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(n,e,t){let r=1,i=null,s=null,a=!1,u=0;function c(){return u===2}let f=!1;function p(...S){f||(f=!0,e.apply(null,S))}function g(S){i=setTimeout(()=>{i=null,n(A,c())},S)}function _(){s&&clearTimeout(s)}function A(S,...C){if(f){_();return}if(S){_(),p.call(null,S,...C);return}if(c()||a){_(),p.call(null,S,...C);return}r<64&&(r*=2);let j;u===1?(u=2,j=0):j=(r+Math.random())*1e3,g(j)}let T=!1;function b(S){T||(T=!0,_(),!f&&(i!==null?(S||(u=2),clearTimeout(i),g(0)):S||(u=1)))}return g(0),s=setTimeout(()=>{a=!0,b(!0)},t),b}function w9(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(n){return n!==void 0}function C9(n){return typeof n=="object"&&!Array.isArray(n)}function bb(n){return typeof n=="string"||n instanceof String}function jx(n){return Sb()&&n instanceof Blob}function Sb(){return typeof Blob<"u"}function Fx(n,e,t,r){if(r<e)throw CT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw CT(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function tD(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Eu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Eu||(Eu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,t,r,i,s,a,u,c,f,p,g,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=g,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,T)=>{this.resolve_=A,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new $m(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===Eu.NO_ERROR,c=s.getStatus();if(!u||x9(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Eu.ABORT;r(!1,new $m(!1,null,p));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new $m(f,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());R9(c)?s(c):s()}catch(c){a(c)}else if(u!==null){const c=Eb();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(i.canceled){const c=this.appDelete_?eD():m9();a(c)}else{const c=p9();a(c)}};this.canceled_?t(!1,new $m(!1,null,!0)):this.backoffId_=S9(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&w9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $m{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function I9(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function O9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function N9(n,e){e&&(n["X-Firebase-GMPID"]=e)}function M9(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function D9(n,e,t,r,i,s,a=!0){const u=tD(n.urlParams),c=n.url+u,f=Object.assign({},n.headers);return N9(f,e),I9(f,t),O9(f,s),M9(f,r),new k9(c,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function L9(...n){const e=P9();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Sb())return new Blob(n);throw new pn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function V9(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(n){if(typeof atob>"u")throw T9("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lA{constructor(e,t){this.data=e,this.contentType=t||null}}function z9(n,e){switch(n){case eo.RAW:return new lA(nD(e));case eo.BASE64:case eo.BASE64URL:return new lA(rD(n,e));case eo.DATA_URL:return new lA(j9(e),F9(e))}throw Eb()}function nD(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function B9(n){let e;try{e=decodeURIComponent(n)}catch{throw yd(eo.DATA_URL,"Malformed data URL.")}return nD(e)}function rD(n,e){switch(n){case eo.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw yd(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case eo.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw yd(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=U9(e)}catch(i){throw i.message.includes("polyfill")?i:yd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class iD{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw yd(eo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=H9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function j9(n){const e=new iD(n);return e.base64?rD(eo.BASE64,e.rest):B9(e.rest)}function F9(n){return new iD(n).contentType}function H9(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t){let r=0,i="";jx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(jx(this.data_)){const r=this.data_,i=V9(r,e,t);return i===null?null:new Ua(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ua(r,!0)}}static getBlob(...e){if(Sb()){const t=e.map(r=>r instanceof Ua?r.data_:r);return new Ua(L9.apply(null,t))}else{const t=e.map(a=>bb(a)?z9(eo.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let u=0;u<a.length;u++)i[s++]=a[u]}),new Ua(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n){let e;try{e=JSON.parse(n)}catch{return null}return C9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $9(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function oD(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(n,e){return e}let zr=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||G9}},Gm=null;function K9(n){return!bb(n)||n.length<2?n:oD(n)}function aD(){if(Gm)return Gm;const n=[];n.push(new zr("bucket")),n.push(new zr("generation")),n.push(new zr("metageneration")),n.push(new zr("name","fullPath",!0));function e(s,a){return K9(a)}const t=new zr("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new zr("size");return i.xform=r,n.push(i),n.push(new zr("timeCreated")),n.push(new zr("updated")),n.push(new zr("md5Hash",null,!0)),n.push(new zr("cacheControl",null,!0)),n.push(new zr("contentDisposition",null,!0)),n.push(new zr("contentEncoding",null,!0)),n.push(new zr("contentLanguage",null,!0)),n.push(new zr("contentType",null,!0)),n.push(new zr("metadata","customMetadata",!0)),Gm=n,Gm}function W9(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Oi(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function Y9(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return W9(r,n),r}function lD(n,e,t){const r=sD(e);return r===null?null:Y9(n,r,t)}function Q9(n,e,t,r){const i=sD(e);if(i===null||!bb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const p=n.bucket,g=n.fullPath,_="/b/"+a(p)+"/o/"+a(g),A=wb(_,t,r),T=tD({alt:"media",token:f});return A+T})[0]}function X9(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class uD{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(n){if(!n)throw Eb()}function J9(n,e){function t(r,i){const s=lD(n,i,e);return cD(s!==null),s}return t}function Z9(n,e){function t(r,i){const s=lD(n,i,e);return cD(s!==null),Q9(s,i,n.host,n._protocol)}return t}function hD(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=f9():i=h9():t.getStatus()===402?i=c9(n.bucket):t.getStatus()===403?i=d9(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function e5(n){const e=hD(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=u9(n.path)),s.serverResponse=i.serverResponse,s}return t}function t5(n,e,t){const r=e.fullServerUrl(),i=wb(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,u=new uD(i,s,Z9(n,t),a);return u.errorHandler=e5(e),u}function n5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function r5(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=n5(null,e)),r}function i5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let j="";for(let q=0;q<2;q++)j=j+Math.random().toString().slice(2);return j}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const f=r5(e,r,i),p=X9(f,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+c+"--",A=Ua.getBlob(g,r,_);if(A===null)throw v9();const T={name:f.fullPath},b=wb(s,n.host,n._protocol),S="POST",C=n.maxUploadRetryTime,L=new uD(b,S,J9(n,t),C);return L.urlParams=T,L.headers=a,L.body=A.uploadData(),L.errorHandler=hD(e),L}class s5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Eu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Eu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Eu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw qf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o5 extends s5{initXhr(){this.xhr_.responseType="text"}}function fD(){return new o5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this._service=e,t instanceof Oi?this._location=t:this._location=Oi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Du(e,t)}get root(){const e=new Oi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oD(this._location.path)}get storage(){return this._service}get parent(){const e=q9(this._location.path);if(e===null)return null;const t=new Oi(this._location.bucket,e);return new Du(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw E9(e)}}function a5(n,e,t){n._throwIfRoot("uploadBytes");const r=i5(n.storage,n._location,aD(),new Ua(e,!0),t);return n.storage.makeRequestWithTokens(r,fD).then(i=>({metadata:i,ref:n}))}function l5(n){n._throwIfRoot("getDownloadURL");const e=t5(n.storage,n._location,aD());return n.storage.makeRequestWithTokens(e,fD).then(t=>{if(t===null)throw A9();return t})}function u5(n,e){const t=$9(n._location.path,e),r=new Oi(n._location.bucket,t);return new Du(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(n){return/^[A-Za-z]+:\/\//.test(n)}function h5(n,e){return new Du(n,e)}function dD(n,e){if(n instanceof Rb){const t=n;if(t._bucket==null)throw _9();const r=new Du(t,t._bucket);return e!=null?dD(r,e):r}else return e!==void 0?u5(n,e):n}function f5(n,e){if(e&&c5(e)){if(n instanceof Rb)return h5(n,e);throw CT("To use ref(service, url), the first argument must be a Storage instance.")}else return dD(n,e)}function Hx(n,e){const t=e==null?void 0:e[ZM];return t==null?null:Oi.makeFromBucketSpec(t,n)}function d5(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:iN(i,n.app.options.projectId))}class Rb{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=JM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a9,this._maxUploadRetryTime=l9,this._requests=new Set,i!=null?this._bucket=Oi.makeFromBucketSpec(i,this._host):this._bucket=Hx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Oi.makeFromBucketSpec(this._url,e):this._bucket=Hx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Du(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new b9(eD());{const a=D9(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const qx="@firebase/storage",$x="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="storage";function p5(n,e,t){return n=fn(n),a5(n,e,t)}function m5(n){return n=fn(n),l5(n)}function g5(n,e){return n=fn(n),f5(n,e)}function y5(n=zE(),e){n=fn(n);const r=Oh(n,pD).getImmediate({identifier:e}),i=tN("storage");return i&&_5(r,...i),r}function _5(n,e,t,r={}){d5(n,e,t,r)}function v5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Rb(t,r,i,e,Gu)}function A5(){Rs(new hs(pD,v5,"PUBLIC").setMultipleInstances(!0)),ri(qx,$x,""),ri(qx,$x,"esm2017")}A5();function Cb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function mD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T5=mD,gD=new $u("auth","Firebase",mD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=new r_("@firebase/auth");function E5(n,...e){Yg.logLevel<=gt.WARN&&Yg.warn(`Auth (${Gu}): ${n}`,...e)}function gg(n,...e){Yg.logLevel<=gt.ERROR&&Yg.error(`Auth (${Gu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n,...e){throw kb(n,...e)}function ws(n,...e){return kb(n,...e)}function xb(n,e,t){const r=Object.assign(Object.assign({},T5()),{[e]:t});return new $u("auth","Firebase",r).create(e,{appName:n.name})}function tl(n){return xb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function b5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&fs(n,"argument-error"),xb(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kb(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gD.create(n,...e)}function We(n,e,...t){if(!n)throw kb(e,...t)}function Go(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gg(e),new Error(e)}function na(n,e){n||Go(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function S5(){return Gx()==="http:"||Gx()==="https:"}function Gx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S5()||sN()||"connection"in navigator)?navigator.onLine:!0}function R5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.shortDelay=e,this.longDelay=t,na(t>e,"Short delay should be less than long delay!"),this.isMobile=vB()||EB()}get(){return w5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n,e){na(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],k5=new mp(3e4,6e4);function wl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function oa(n,e,t,r,i={}){return _D(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=lp(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:c},s);return TB()||(f.referrerPolicy="no-referrer"),yD.fetch()(await vD(n,n.config.apiHost,t,u),f)})}async function _D(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},C5),e);try{const i=new O5(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Km(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Km(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Km(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Km(n,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw xb(n,p,f);fs(n,p)}}catch(i){if(i instanceof ms)throw i;fs(n,"network-request-failed",{message:String(i)})}}async function T_(n,e,t,r,i={}){const s=await oa(n,e,t,r,i);return"mfaPendingCredential"in s&&fs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function vD(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?Ib(n.config,i):`${n.config.apiScheme}://${i}`;return x5.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function I5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ws(this.auth,"network-request-failed")),k5.get())})}}function Km(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ws(n,e,r);return i.customData._tokenResponse=t,i}function Kx(n){return n!==void 0&&n.enterprise!==void 0}class N5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function M5(n,e){return oa(n,"GET","/v2/recaptchaConfig",wl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(n,e){return oa(n,"POST","/v1/accounts:delete",e)}async function Qg(n,e){return oa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P5(n,e=!1){const t=fn(n),r=await t.getIdToken(e),i=Ob(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_d(uA(i.auth_time)),issuedAtTime:_d(uA(i.iat)),expirationTime:_d(uA(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function uA(n){return Number(n)*1e3}function Ob(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gg("JWT malformed, contained fewer than 3 sections"),null;try{const i=ZO(t);return i?JSON.parse(i):(gg("Failed to decode base64 JWT payload"),null)}catch(i){return gg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Wx(n){const e=Ob(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ms&&L5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function L5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_d(this.lastLoginAt),this.creationTime=_d(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xg(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Bd(n,Qg(t,{idToken:r}));We(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?AD(s.providerUserInfo):[],u=z5(n.providerData,a),c=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new kT(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function U5(n){const e=fn(n);await Xg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function AD(n){return n.map(e=>{var{providerId:t}=e,r=Cb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(n,e){const t=await _D(n,{},async()=>{const r=lp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await vD(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",yD.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function j5(n,e){return oa(n,"POST","/v2/accounts:revokeToken",wl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=Wx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await B5(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Zc;return r&&(We(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(We(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zc,this.toJSON())}_performRefresh(){return Go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Cb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Bd(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return P5(this,e)}reload(){return U5(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(tl(this.auth));const e=await this.getIdToken();return await Bd(this,D5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,u,c,f,p;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,A=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(a=t.photoURL)!==null&&a!==void 0?a:void 0,b=(u=t.tenantId)!==null&&u!==void 0?u:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,C=(f=t.createdAt)!==null&&f!==void 0?f:void 0,L=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:j,emailVerified:q,isAnonymous:V,providerData:D,stsTokenManager:N}=t;We(j&&N,e,"internal-error");const k=Zc.fromJSON(this.name,N);We(typeof j=="string",e,"internal-error"),Ia(g,e.name),Ia(_,e.name),We(typeof q=="boolean",e,"internal-error"),We(typeof V=="boolean",e,"internal-error"),Ia(A,e.name),Ia(T,e.name),Ia(b,e.name),Ia(S,e.name),Ia(C,e.name),Ia(L,e.name);const x=new Ss({uid:j,auth:e,email:_,emailVerified:q,displayName:g,isAnonymous:V,photoURL:T,phoneNumber:A,tenantId:b,stsTokenManager:k,createdAt:C,lastLoginAt:L});return D&&Array.isArray(D)&&(x.providerData=D.map(z=>Object.assign({},z))),S&&(x._redirectEventId=S),x}static async _fromIdTokenResponse(e,t,r=!1){const i=new Zc;i.updateFromServerResponse(t);const s=new Ss({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xg(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];We(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?AD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new Zc;u.updateFromIdToken(r);const c=new Ss({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new kT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Map;function Ko(n){na(n instanceof Function,"Expected a class definition");let e=Yx.get(n);return e?(na(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Yx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TD.type="NONE";const Qx=TD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n,e,t){return`firebase:${n}:${e}:${t}`}class eh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yg(this.userKey,i.apiKey,s),this.fullPersistenceKey=yg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qg(this.auth,{idToken:e}).catch(()=>{});return t?Ss._fromGetAccountInfoResponse(this.auth,t,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new eh(Ko(Qx),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||Ko(Qx);const a=yg(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(a);if(p){let g;if(typeof p=="string"){const _=await Qg(e,{idToken:p}).catch(()=>{});if(!_)break;g=await Ss._fromGetAccountInfoResponse(e,_,p)}else g=Ss._fromJSON(e,p);f!==s&&(u=g),s=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new eh(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new eh(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ED(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CD(e))return"Blackberry";if(xD(e))return"Webos";if(bD(e))return"Safari";if((e.includes("chrome/")||SD(e))&&!e.includes("edge/"))return"Chrome";if(RD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ED(n=Ir()){return/firefox\//i.test(n)}function bD(n=Ir()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SD(n=Ir()){return/crios\//i.test(n)}function wD(n=Ir()){return/iemobile/i.test(n)}function RD(n=Ir()){return/android/i.test(n)}function CD(n=Ir()){return/blackberry/i.test(n)}function xD(n=Ir()){return/webos/i.test(n)}function Nb(n=Ir()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function F5(n=Ir()){var e;return Nb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function H5(){return bB()&&document.documentMode===10}function kD(n=Ir()){return Nb(n)||RD(n)||xD(n)||CD(n)||/windows phone/i.test(n)||wD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(n,e=[]){let t;switch(n){case"Browser":t=Xx(Ir());break;case"Worker":t=`${Xx(Ir())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(n,e={}){return oa(n,"GET","/v2/passwordPolicy",wl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=6;class K5{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:G5,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jx(this),this.idTokenSubscription=new Jx(this),this.beforeStateQueue=new q5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ko(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await eh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qg(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xg(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(tl(this));const t=e?fn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(tl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(tl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ko(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $5(this),t=new K5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $u("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await j5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ko(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await eh.create(this,[Ko(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ID(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&E5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Rl(n){return fn(n)}class Jx{constructor(e){this.auth=e,this.observer=null,this.addObserver=IB(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Y5(n){E_=n}function OD(n){return E_.loadJS(n)}function Q5(){return E_.recaptchaEnterpriseScript}function X5(){return E_.gapiScript}function J5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Z5{constructor(){this.enterprise=new eH}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eH{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tH="recaptcha-enterprise",ND="NO_RECAPTCHA";class nH{constructor(e){this.type=tH,this.auth=Rl(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{M5(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new N5(c);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(c=>{u(c)})})}function i(s,a,u){const c=window.grecaptcha;Kx(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(ND)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Z5().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&Kx(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Q5();c.length!==0&&(c+=u),OD(c).then(()=>{i(u,s,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function Zx(n,e,t,r=!1,i=!1){const s=new nH(n);let a;if(i)a=ND;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function IT(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Zx(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Zx(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(n,e){const t=Oh(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Jo(s,e??{}))return i;fs(i,"already-initialized")}return t.initialize({options:e})}function iH(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ko);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sH(n,e,t){const r=Rl(n);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=MD(e),{host:a,port:u}=oH(e),c=u===null?"":`:${u}`,f={url:`${s}//${a}${c}/`},p=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(Jo(f,r.config.emulator)&&Jo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,aH()}function MD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oH(n){const e=MD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ek(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:ek(a)}}}function ek(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function aH(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Go("not implemented")}_getIdTokenResponse(e){return Go("not implemented")}_linkToIdToken(e,t){return Go("not implemented")}_getReauthenticationResolver(e){return Go("not implemented")}}async function lH(n,e){return oa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uH(n,e){return T_(n,"POST","/v1/accounts:signInWithPassword",wl(n,e))}async function cH(n,e){return oa(n,"POST","/v1/accounts:sendOobCode",wl(n,e))}async function hH(n,e){return cH(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(n,e){return T_(n,"POST","/v1/accounts:signInWithEmailLink",wl(n,e))}async function dH(n,e){return T_(n,"POST","/v1/accounts:signInWithEmailLink",wl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Mb{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new jd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new jd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return IT(e,t,"signInWithPassword",uH);case"emailLink":return fH(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return IT(e,r,"signUpPassword",lH);case"emailLink":return dH(e,{idToken:t,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(n,e){return T_(n,"POST","/v1/accounts:signInWithIdp",wl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH="http://localhost";class Pu extends Mb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Cb(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Pu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return th(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,th(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,th(e,t)}buildRequest(){const e={requestUri:pH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lp(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gH(n){const e=td(nd(n)).link,t=e?td(nd(e)).deep_link_id:null,r=td(nd(n)).deep_link_id;return(r?td(nd(r)).link:null)||r||t||e||n}class Db{constructor(e){var t,r,i,s,a,u;const c=td(nd(e)),f=(t=c.apiKey)!==null&&t!==void 0?t:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,g=mH((i=c.mode)!==null&&i!==void 0?i:null);We(f&&p&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=gH(e);try{return new Db(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this.providerId=Uh.PROVIDER_ID}static credential(e,t){return jd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Db.parseLink(t);return We(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}Uh.PROVIDER_ID="password";Uh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends Pb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends gp{constructor(){super("facebook.com")}static credential(e){return Pu._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return za.credential(e.oauthAccessToken)}catch{return null}}}za.FACEBOOK_SIGN_IN_METHOD="facebook.com";za.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends gp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pu._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $o.credential(t,r)}catch{return null}}}$o.GOOGLE_SIGN_IN_METHOD="google.com";$o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends gp{constructor(){super("github.com")}static credential(e){return Pu._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.GITHUB_SIGN_IN_METHOD="github.com";Ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends gp{constructor(){super("twitter.com")}static credential(e,t){return Pu._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ja.credential(t,r)}catch{return null}}}ja.TWITTER_SIGN_IN_METHOD="twitter.com";ja.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ss._fromIdTokenResponse(e,r,i),a=tk(r);return new gh({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=tk(r);return new gh({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function tk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends ms{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Jg(e,t,r,i)}}function DD(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jg._fromErrorAndOperation(n,s,e,r):s})}async function yH(n,e,t=!1){const r=await Bd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return gh._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H(n,e,t=!1){const{auth:r}=n;if(Ci(r.app))return Promise.reject(tl(r));const i="reauthenticate";try{const s=await Bd(n,DD(r,i,e,n),t);We(s.idToken,r,"internal-error");const a=Ob(s.idToken);We(a,r,"internal-error");const{sub:u}=a;return We(n.uid===u,r,"user-mismatch"),gh._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(n,e,t=!1){if(Ci(n.app))return Promise.reject(tl(n));const r="signIn",i=await DD(n,r,e),s=await gh._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function vH(n,e){return PD(Rl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AH(n){const e=Rl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TH(n,e,t){const r=Rl(n);await IT(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",hH)}function EH(n,e,t){return Ci(n.app)?Promise.reject(tl(n)):vH(fn(n),Uh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&AH(n),r})}function bH(n,e,t,r){return fn(n).onIdTokenChanged(e,t,r)}function SH(n,e,t){return fn(n).beforeAuthStateChanged(e,t)}function LD(n,e,t,r){return fn(n).onAuthStateChanged(e,t,r)}function wH(n){return fn(n).signOut()}const Zg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zg,"1"),this.storage.removeItem(Zg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=1e3,CH=10;class UD extends VD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);H5()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,CH):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},RH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UD.type="LOCAL";const xH=UD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD extends VD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zD.type="SESSION";const BD=zD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new b_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async f=>f(t.origin,s)),c=await kH(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}b_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const f=Lb("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(){return window}function OH(n){ao().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return typeof ao().WorkerGlobalScope<"u"&&typeof ao().importScripts=="function"}async function NH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MH(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DH(){return jD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="firebaseLocalStorageDb",PH=1,ey="firebaseLocalStorage",HD="fbase_key";class yp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function S_(n,e){return n.transaction([ey],e?"readwrite":"readonly").objectStore(ey)}function LH(){const n=indexedDB.deleteDatabase(FD);return new yp(n).toPromise()}function OT(){const n=indexedDB.open(FD,PH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ey,{keyPath:HD})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ey)?e(r):(r.close(),await LH(),e(await OT()))})})}async function nk(n,e,t){const r=S_(n,!0).put({[HD]:e,value:t});return new yp(r).toPromise()}async function VH(n,e){const t=S_(n,!1).get(e),r=await new yp(t).toPromise();return r===void 0?null:r.value}function rk(n,e){const t=S_(n,!0).delete(e);return new yp(t).toPromise()}const UH=800,zH=3;class qD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await OT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=b_._getInstance(DH()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await NH(),!this.activeServiceWorker)return;this.sender=new IH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await OT();return await nk(e,Zg,"1"),await rk(e,Zg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>nk(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>VH(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rk(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=S_(i,!1).getAll();return new yp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qD.type="LOCAL";const BH=qD;new mp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n,e){return e?Ko(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb extends Mb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return th(e,this._buildIdpRequest())}_linkToIdToken(e,t){return th(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return th(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jH(n){return PD(n.auth,new Vb(n),n.bypassAuthState)}function FH(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),_H(t,new Vb(n),n.bypassAuthState)}async function HH(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),yH(t,new Vb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jH;case"linkViaPopup":case"linkViaRedirect":return HH;case"reauthViaPopup":case"reauthViaRedirect":return FH;default:fs(this.auth,"internal-error")}}resolve(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH=new mp(2e3,1e4);async function $H(n,e,t){if(Ci(n.app))return Promise.reject(ws(n,"operation-not-supported-in-this-environment"));const r=Rl(n);b5(n,e,Pb);const i=$D(r,t);return new mu(r,"signInViaPopup",e,i).executeNotNull()}class mu extends GD{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,mu.currentPopupAction&&mu.currentPopupAction.cancel(),mu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){na(this.filter.length===1,"Popup operations only handle one event");const e=Lb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qH.get())};e()}}mu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH="pendingRedirect",_g=new Map;class KH extends GD{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=_g.get(this.auth._key());if(!e){try{const r=await WH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_g.set(this.auth._key(),e)}return this.bypassAuthState||_g.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WH(n,e){const t=XH(e),r=QH(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function YH(n,e){_g.set(n._key(),e)}function QH(n){return Ko(n._redirectPersistence)}function XH(n){return yg(GH,n.config.apiKey,n.name)}async function JH(n,e,t=!1){if(Ci(n.app))return Promise.reject(tl(n));const r=Rl(n),i=$D(r,e),a=await new KH(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=10*60*1e3;class eq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!KD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZH&&this.cachedEventUids.clear(),this.cachedEventUids.has(ik(e))}saveEventToCache(e){this.cachedEventUids.add(ik(e)),this.lastProcessedEventTime=Date.now()}}function ik(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function KD({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KD(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nq(n,e={}){return oa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iq=/^https?/;async function sq(n){if(n.config.emulator)return;const{authorizedDomains:e}=await nq(n);for(const t of e)try{if(oq(t))return}catch{}fs(n,"unauthorized-domain")}function oq(n){const e=xT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!iq.test(t))return!1;if(rq.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq=new mp(3e4,6e4);function sk(){const n=ao().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lq(n){return new Promise((e,t)=>{var r,i,s;function a(){sk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sk(),t(ws(n,"network-request-failed"))},timeout:aq.get()})}if(!((i=(r=ao().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ao().gapi)===null||s===void 0)&&s.load)a();else{const u=J5("iframefcb");return ao()[u]=()=>{gapi.load?a():t(ws(n,"network-request-failed"))},OD(`${X5()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw vg=null,e})}let vg=null;function uq(n){return vg=vg||lq(n),vg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq=new mp(5e3,15e3),hq="__/auth/iframe",fq="emulator/auth/iframe",dq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mq(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ib(e,fq):`https://${n.config.authDomain}/${hq}`,r={apiKey:e.apiKey,appName:n.name,v:Gu},i=pq.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${lp(r).slice(1)}`}async function gq(n){const e=await uq(n),t=ao().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:mq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ws(n,"network-request-failed"),u=ao().setTimeout(()=>{s(a)},cq.get());function c(){ao().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_q=500,vq=600,Aq="_blank",Tq="http://localhost";class ok{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Eq(n,e,t,r=_q,i=vq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},yq),{width:r.toString(),height:i.toString(),top:s,left:a}),f=Ir().toLowerCase();t&&(u=SD(f)?Aq:t),ED(f)&&(e=e||Tq,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[A,T])=>`${_}${A}=${T},`,"");if(F5(f)&&u!=="_self")return bq(e||"",u),new ok(null);const g=window.open(e||"",u,p);We(g,n,"popup-blocked");try{g.focus()}catch{}return new ok(g)}function bq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq="__/auth/handler",wq="emulator/auth/handler",Rq=encodeURIComponent("fac");async function ak(n,e,t,r,i,s){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Gu,eventId:i};if(e instanceof Pb){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",kB(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))a[p]=g}if(e instanceof gp){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await n._getAppCheckToken(),f=c?`#${Rq}=${encodeURIComponent(c)}`:"";return`${Cq(n)}?${lp(u).slice(1)}${f}`}function Cq({config:n}){return n.emulator?Ib(n,wq):`https://${n.authDomain}/${Sq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="webStorageSupport";class xq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BD,this._completeRedirectFn=JH,this._overrideRedirectResult=YH}async _openPopup(e,t,r,i){var s;na((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await ak(e,t,r,xT(),i);return Eq(e,a,Lb())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await ak(e,t,r,xT(),i);return OH(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(na(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await gq(e),r=new eq(e);return t.register("authEvent",i=>(We(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cA,{type:cA},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[cA];a!==void 0&&t(!!a),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kD()||bD()||Nb()}}const kq=xq;var lk="@firebase/auth",uk="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nq(n){Rs(new hs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;We(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ID(n)},f=new W5(r,i,s,c);return iH(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new hs("auth-internal",e=>{const t=Rl(e.getProvider("auth").getImmediate());return(r=>new Iq(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(lk,uk,Oq(n)),ri(lk,uk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq=5*60,Dq=rN("authIdTokenMaxAge")||Mq;let ck=null;const Pq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Dq)return;const i=t==null?void 0:t.token;ck!==i&&(ck=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ty(n=zE()){const e=Oh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rH(n,{popupRedirectResolver:kq,persistence:[BH,xH,BD]}),r=rN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Pq(s.toString());SH(t,a,()=>a(t.currentUser)),bH(t,u=>a(u))}}const i=eN("auth");return i&&sH(t,`http://${i}`),t}function Lq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Y5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ws("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Lq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nq("Browser");const WD="@firebase/installations",Ub="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=1e4,QD=`w:${Ub}`,XD="FIS_v2",Vq="https://firebaseinstallations.googleapis.com/v1",Uq=60*60*1e3,zq="installations",Bq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Lu=new $u(zq,Bq,jq);function JD(n){return n instanceof ms&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD({projectId:n}){return`${Vq}/projects/${n}/installations`}function eP(n){return{token:n.token,requestStatus:2,expiresIn:Hq(n.expiresIn),creationTime:Date.now()}}async function tP(n,e){const r=(await e.json()).error;return Lu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Fq(n,{refreshToken:e}){const t=nP(n);return t.append("Authorization",qq(e)),t}async function rP(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Hq(n){return Number(n.replace("s","000"))}function qq(n){return`${XD} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $q({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ZD(n),i=nP(n),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const a={fid:t,authVersion:XD,appId:n.appId,sdkVersion:QD},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await rP(()=>fetch(r,u));if(c.ok){const f=await c.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:eP(f.authToken)}}else throw await tP("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gq(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq=/^[cdef][\w-]{21}$/,NT="";function Wq(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Yq(n);return Kq.test(t)?t:NT}catch{return NT}}function Yq(n){return Gq(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new Map;function oP(n,e){const t=w_(n);aP(t,e),Qq(t,e)}function aP(n,e){const t=sP.get(n);if(t)for(const r of t)r(e)}function Qq(n,e){const t=Xq();t&&t.postMessage({key:n,fid:e}),Jq()}let gu=null;function Xq(){return!gu&&"BroadcastChannel"in self&&(gu=new BroadcastChannel("[Firebase] FID Change"),gu.onmessage=n=>{aP(n.data.key,n.data.fid)}),gu}function Jq(){sP.size===0&&gu&&(gu.close(),gu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq="firebase-installations-database",e8=1,Vu="firebase-installations-store";let hA=null;function zb(){return hA||(hA=cN(Zq,e8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Vu)}}})),hA}async function ny(n,e){const t=w_(n),i=(await zb()).transaction(Vu,"readwrite"),s=i.objectStore(Vu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&oP(n,e.fid),e}async function lP(n){const e=w_(n),r=(await zb()).transaction(Vu,"readwrite");await r.objectStore(Vu).delete(e),await r.done}async function R_(n,e){const t=w_(n),i=(await zb()).transaction(Vu,"readwrite"),s=i.objectStore(Vu),a=await s.get(t),u=e(a);return u===void 0?await s.delete(t):await s.put(u,t),await i.done,u&&(!a||a.fid!==u.fid)&&oP(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(n){let e;const t=await R_(n.appConfig,r=>{const i=t8(r),s=n8(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===NT?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function t8(n){const e=n||{fid:Wq(),registrationStatus:0};return uP(e)}function n8(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Lu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=r8(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:i8(n)}:{installationEntry:e}}async function r8(n,e){try{const t=await $q(n,e);return ny(n.appConfig,t)}catch(t){throw JD(t)&&t.customData.serverCode===409?await lP(n.appConfig):await ny(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function i8(n){let e=await hk(n.appConfig);for(;e.registrationStatus===1;)await iP(100),e=await hk(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Bb(n);return r||t}return e}function hk(n){return R_(n,e=>{if(!e)throw Lu.create("installation-not-found");return uP(e)})}function uP(n){return s8(n)?{fid:n.fid,registrationStatus:0}:n}function s8(n){return n.registrationStatus===1&&n.registrationTime+YD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8({appConfig:n,heartbeatServiceProvider:e},t){const r=a8(n,t),i=Fq(n,t),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const a={installation:{sdkVersion:QD,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await rP(()=>fetch(r,u));if(c.ok){const f=await c.json();return eP(f)}else throw await tP("Generate Auth Token",c)}function a8(n,{fid:e}){return`${ZD(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(n,e=!1){let t;const r=await R_(n.appConfig,s=>{if(!cP(s))throw Lu.create("not-registered");const a=s.authToken;if(!e&&c8(a))return s;if(a.requestStatus===1)return t=l8(n,e),s;{if(!navigator.onLine)throw Lu.create("app-offline");const u=f8(s);return t=u8(n,u),u}});return t?await t:r.authToken}async function l8(n,e){let t=await fk(n.appConfig);for(;t.authToken.requestStatus===1;)await iP(100),t=await fk(n.appConfig);const r=t.authToken;return r.requestStatus===0?jb(n,e):r}function fk(n){return R_(n,e=>{if(!cP(e))throw Lu.create("not-registered");const t=e.authToken;return d8(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function u8(n,e){try{const t=await o8(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await ny(n.appConfig,r),t}catch(t){if(JD(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await lP(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ny(n.appConfig,r)}throw t}}function cP(n){return n!==void 0&&n.registrationStatus===2}function c8(n){return n.requestStatus===2&&!h8(n)}function h8(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Uq}function f8(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function d8(n){return n.requestStatus===1&&n.requestTime+YD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p8(n){const e=n,{installationEntry:t,registrationPromise:r}=await Bb(e);return r?r.catch(console.error):jb(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m8(n,e=!1){const t=n;return await g8(t),(await jb(t,e)).token}async function g8(n){const{registrationPromise:e}=await Bb(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(n){if(!n||!n.options)throw fA("App Configuration");if(!n.name)throw fA("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw fA(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function fA(n){return Lu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="installations",_8="installations-internal",v8=n=>{const e=n.getProvider("app").getImmediate(),t=y8(e),r=Oh(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},A8=n=>{const e=n.getProvider("app").getImmediate(),t=Oh(e,hP).getImmediate();return{getId:()=>p8(t),getToken:i=>m8(t,i)}};function T8(){Rs(new hs(hP,v8,"PUBLIC")),Rs(new hs(_8,A8,"PRIVATE"))}T8();ri(WD,Ub);ri(WD,Ub,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="analytics",E8="firebase_id",b8="origin",S8=60*1e3,w8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new r_("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ls=new $u("analytics","Analytics",R8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(n){if(!n.startsWith(Fb)){const e=ls.create("invalid-gtag-resource",{gtagURL:n});return ii.warn(e.message),""}return n}function fP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function x8(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function k8(n,e){const t=x8("firebase-js-sdk-policy",{createScriptURL:C8}),r=document.createElement("script"),i=`${Fb}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function I8(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function O8(n,e,t,r,i,s){const a=r[i];try{if(a)await e[a];else{const c=(await fP(t)).find(f=>f.measurementId===i);c&&await e[c.appId]}}catch(u){ii.error(u)}n("config",i,s)}async function N8(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const u=await fP(t);for(const c of a){const f=u.find(g=>g.measurementId===c),p=f&&e[f.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){ii.error(s)}}function M8(n,e,t,r){async function i(s,...a){try{if(s==="event"){const[u,c]=a;await N8(n,e,t,u,c)}else if(s==="config"){const[u,c]=a;await O8(n,e,t,r,u,c)}else if(s==="consent"){const[u,c]=a;n("consent",u,c)}else if(s==="get"){const[u,c,f]=a;n("get",u,c,f)}else if(s==="set"){const[u]=a;n("set",u)}else n(s,...a)}catch(u){ii.error(u)}}return i}function D8(n,e,t,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=M8(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function P8(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Fb)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=30,V8=1e3;class U8{constructor(e={},t=V8){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dP=new U8;function z8(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function B8(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:z8(r)},s=w8.replace("{app-id}",t),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let u="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw ls.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u})}return a.json()}async function j8(n,e=dP,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ls.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ls.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new q8;return setTimeout(async()=>{u.abort()},S8),pP({appId:r,apiKey:i,measurementId:s},a,u,e)}async function pP(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=dP){var s;const{appId:a,measurementId:u}=n;try{await F8(r,e)}catch(c){if(u)return ii.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:u};throw c}try{const c=await B8(n);return i.deleteThrottleMetadata(a),c}catch(c){const f=c;if(!H8(f)){if(i.deleteThrottleMetadata(a),u)return ii.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:u};throw c}const p=Number((s=f==null?void 0:f.customData)===null||s===void 0?void 0:s.httpStatus)===503?PC(t,i.intervalMillis,L8):PC(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(a,g),ii.debug(`Calling attemptFetch again in ${p} millis`),pP(n,g,r,i)}}function F8(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function H8(n){if(!(n instanceof ms)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class q8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function $8(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,a=Object.assign(Object.assign({},r),{send_to:s});n("event",t,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8(){if(oN())try{await aN()}catch(n){return ii.warn(ls.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ii.warn(ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function K8(n,e,t,r,i,s,a){var u;const c=j8(n);c.then(A=>{t[A.measurementId]=A.appId,n.options.measurementId&&A.measurementId!==n.options.measurementId&&ii.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>ii.error(A)),e.push(c);const f=G8().then(A=>{if(A)return r.getId()}),[p,g]=await Promise.all([c,f]);P8(s)||k8(s,p.measurementId),i("js",new Date);const _=(u=a==null?void 0:a.config)!==null&&u!==void 0?u:{};return _[b8]="firebase",_.update=!0,g!=null&&(_[E8]=g),i("config",p.measurementId,_),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.app=e}_delete(){return delete vd[this.app.options.appId],Promise.resolve()}}let vd={},pk=[];const mk={};let dA="dataLayer",Y8="gtag",gk,mP,yk=!1;function Q8(){const n=[];if(sN()&&n.push("This is a browser extension environment."),wB()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ls.create("invalid-analytics-context",{errorInfo:e});ii.warn(t.message)}}function X8(n,e,t){Q8();const r=n.options.appId;if(!r)throw ls.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ii.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ls.create("no-api-key");if(vd[r]!=null)throw ls.create("already-exists",{id:r});if(!yk){I8(dA);const{wrappedGtag:s,gtagCore:a}=D8(vd,pk,mk,dA,Y8);mP=s,gk=a,yk=!0}return vd[r]=K8(n,pk,mk,e,gk,dA,t),new W8(n)}function J8(n,e,t,r){n=fn(n),$8(mP,vd[n.app.options.appId],e,t,r).catch(i=>ii.error(i))}const _k="@firebase/analytics",vk="0.10.12";function Z8(){Rs(new hs(dk,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return X8(r,i,t)},"PUBLIC")),Rs(new hs("analytics-internal",n,"PRIVATE")),ri(_k,vk),ri(_k,vk,"esm2017");function n(e){try{const t=e.getProvider(dk).getImmediate();return{logEvent:(r,i,s)=>J8(t,r,i,s)}}catch(t){throw ls.create("interop-component-reg-failed",{reason:t})}}}Z8();const e7={apiKey:"AIzaSyCCa-PxslkzcIawmDzjvD7NfpfKDDHW_cY",authDomain:"mydailyreed.firebaseapp.com",projectId:"mydailyreed",storageBucket:"mydailyreed.firebasestorage.app",messagingSenderId:"784473877562",appId:"1:784473877562:web:86db61e82986c1bdd39903",measurementId:"G-MT4S33PKD0"},Hb=hN(e7),t7=y5(Hb),cu=ty(Hb),Yu=z6(Hb);function n7({isOpened:n}){const[e,t]=K.useState(!1);return I.jsx("button",{className:"ham-button",children:I.jsxs("svg",{className:`hamburger ${e?n?"open":"close":""}`,onClick:()=>{t(!0)},fill:"#c1ff72",viewBox:"0 0 100 100",width:"50",children:[I.jsx("g",{className:"top-group",children:I.jsx("line",{className:"line top",x1:"10",x2:"90",y1:"30",y2:"30"})}),I.jsx("g",{className:"middle-group",children:I.jsx("line",{className:"line middle",x1:"10",x2:"90",y1:"50",y2:"50"})}),I.jsx("g",{className:"bottom-group",children:I.jsx("line",{className:"line bottom",x1:"10",x2:"90",y1:"70",y2:"70"})})]})})}const ry="/assets/MDRLogoB-Y-uXmpVe.png",MT="/assets/facebookBlack-DTxLsc-z.png",DT="/assets/instagramBlack-f2rhpmha.png",PT="/assets/linkedinBlack-D22kkR36.png",Ak="/assets/arrow-b9VpQuFC.png";function Fo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Pi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},yh={duration:.5,overwrite:!1,delay:0},qb,dr,Qt,lo=1e8,Cr=1/lo,LT=Math.PI*2,r7=LT/4,i7=0,yP=Math.sqrt,s7=Math.cos,o7=Math.sin,Yn=function(e){return typeof e=="string"},hn=function(e){return typeof e=="function"},ra=function(e){return typeof e=="number"},$b=function(e){return typeof e>"u"},fo=function(e){return typeof e=="object"},si=function(e){return e!==!1},Gb=function(){return typeof window<"u"},Wm=function(e){return hn(e)||Yn(e)},_P=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},kr=Array.isArray,VT=/(?:-?\.?\d|\.)+/gi,vP=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Kc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,pA=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,AP=/[+-]=-?[.\d]+/,TP=/[^,'"\[\]\s]+/gi,a7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,nn,Js,UT,Kb,Vi={},iy={},EP,bP=function(e){return(iy=_h(e,Vi))&&ci},Wb=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Fd=function(e,t){return!t&&console.warn(e)},SP=function(e,t){return e&&(Vi[e]=t)&&iy&&(iy[e]=t)||Vi},Hd=function(){return 0},l7={suppressEvents:!0,isStart:!0,kill:!1},Ag={suppressEvents:!0,kill:!1},u7={suppressEvents:!0},Yb={},nl=[],zT={},wP,Ri={},mA={},Tk=30,Tg=[],Qb="",Xb=function(e){var t=e[0],r,i;if(fo(t)||hn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Tg.length;i--&&!Tg[i].targetTest(t););r=Tg[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new YP(e[i],r)))||e.splice(i,1);return e},bu=function(e){return e._gsap||Xb(as(e))[0]._gsap},RP=function(e,t,r){return(r=e[t])&&hn(r)?e[t]():$b(r)&&e.getAttribute&&e.getAttribute(t)||r},oi=function(e,t){return(e=e.split(",")).forEach(t)||e},vn=function(e){return Math.round(e*1e5)/1e5||0},xn=function(e){return Math.round(e*1e7)/1e7||0},nh=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},c7=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},sy=function(){var e=nl.length,t=nl.slice(0),r,i;for(zT={},nl.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},CP=function(e,t,r,i){nl.length&&!dr&&sy(),e.render(t,r,dr&&t<0&&(e._initted||e._startAt)),nl.length&&!dr&&sy()},xP=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(TP).length<2?t:Yn(e)?e.trim():e},kP=function(e){return e},Ui=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},h7=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},_h=function(e,t){for(var r in t)e[r]=t[r];return e},Ek=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=fo(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},oy=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Ad=function(e){var t=e.parent||nn,r=e.keyframes?h7(kr(e.keyframes)):Ui;if(si(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},f7=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},IP=function(e,t,r,i,s){var a=e[i],u;if(s)for(u=t[s];a&&a[s]>u;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},C_=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[r]===t&&(e[r]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},_l=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Su=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},d7=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},BT=function(e,t,r,i){return e._startAt&&(dr?e._startAt.revert(Ag):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},p7=function n(e){return!e||e._ts&&n(e.parent)},bk=function(e){return e._repeat?vh(e._tTime,e=e.duration()+e._rDelay)*e:0},vh=function(e,t){var r=Math.floor(e=xn(e/t));return e&&r===e?r-1:r},ay=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},x_=function(e){return e._end=xn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Cr)||0))},k_=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=xn(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),x_(e),r._dirty||Su(r,e)),e},OP=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=ay(e.rawTime(),t),(!t._dur||_p(0,t.totalDuration(),r)-t._tTime>Cr)&&t.render(r,!0)),Su(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},Zs=function(e,t,r,i){return t.parent&&_l(t),t._start=xn((ra(r)?r:r||e!==nn?ts(e,r,t):e._time)+t._delay),t._end=xn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),IP(e,t,"_first","_last",e._sort?"_start":0),jT(t)||(e._recent=t),i||OP(e,t),e._ts<0&&k_(e,e._tTime),e},NP=function(e,t){return(Vi.ScrollTrigger||Wb("scrollTrigger",t))&&Vi.ScrollTrigger.create(t,e)},MP=function(e,t,r,i,s){if(Zb(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!dr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&wP!==xi.frame)return nl.push(e),e._lazy=[s,i],1},m7=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},jT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},g7=function(e,t,r,i){var s=e.ratio,a=t<0||!t&&(!e._start&&m7(e)&&!(!e._initted&&jT(e))||(e._ts<0||e._dp._ts<0)&&!jT(e))?0:1,u=e._rDelay,c=0,f,p,g;if(u&&e._repeat&&(c=_p(0,e._tDur,t),p=vh(c,u),e._yoyo&&p&1&&(a=1-a),p!==vh(e._tTime,u)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||dr||i||e._zTime===Cr||!t&&e._zTime){if(!e._initted&&MP(e,t,i,r,c))return;for(g=e._zTime,e._zTime=t||(r?Cr:0),r||(r=t&&!g),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,f=e._pt;f;)f.r(a,f.d),f=f._next;t<0&&BT(e,t,r,!0),e._onUpdate&&!r&&Ni(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&Ni(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&_l(e,1),!r&&!dr&&(Ni(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},y7=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Ah=function(e,t,r,i){var s=e._repeat,a=xn(t)||0,u=e._tTime/e._tDur;return u&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:xn(a*(s+1)+e._rDelay*s):a,u>0&&!i&&k_(e,e._tTime=e._tDur*u),e.parent&&x_(e),r||Su(e.parent,e),e},Sk=function(e){return e instanceof jr?Su(e):Ah(e,e._dur)},_7={_start:0,endTime:Hd,totalDuration:Hd},ts=function n(e,t,r){var i=e.labels,s=e._recent||_7,a=e.duration()>=lo?s.endTime(!1):e._dur,u,c,f;return Yn(t)&&(isNaN(t)||t in i)?(c=t.charAt(0),f=t.substr(-1)==="%",u=t.indexOf("="),c==="<"||c===">"?(u>=0&&(t=t.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(f?(u<0?s:r).totalDuration()/100:1)):u<0?(t in i||(i[t]=a),i[t]):(c=parseFloat(t.charAt(u-1)+t.substr(u+1)),f&&r&&(c=c/100*(kr(r)?r[0]:r).totalDuration()),u>1?n(e,t.substr(0,u-1),r)+c:a+c)):t==null?a:+t},Td=function(e,t,r){var i=ra(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],u,c;if(i&&(a.duration=t[1]),a.parent=r,e){for(u=a,c=r;c&&!("immediateRender"in u);)u=c.vars.defaults||{},c=si(c.vars.inherit)&&c.parent;a.immediateRender=si(u.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Cn(t[0],a,t[s+1])},Cl=function(e,t){return e||e===0?t(e):t},_p=function(e,t,r){return r<e?e:r>t?t:r},Rr=function(e,t){return!Yn(e)||!(t=a7.exec(e))?"":t[1]},v7=function(e,t,r){return Cl(r,function(i){return _p(e,t,i)})},FT=[].slice,DP=function(e,t){return e&&fo(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&fo(e[0]))&&!e.nodeType&&e!==Js},A7=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Yn(i)&&!t||DP(i,1)?(s=r).push.apply(s,as(i)):r.push(i)})||r},as=function(e,t,r){return Qt&&!t&&Qt.selector?Qt.selector(e):Yn(e)&&!r&&(UT||!Th())?FT.call((t||Kb).querySelectorAll(e),0):kr(e)?A7(e,r):DP(e)?FT.call(e,0):e?[e]:[]},HT=function(e){return e=as(e)[0]||Fd("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return as(t,r.querySelectorAll?r:r===e?Fd("Invalid scope")||Kb.createElement("div"):e)}},PP=function(e){return e.sort(function(){return .5-Math.random()})},LP=function(e){if(hn(e))return e;var t=fo(e)?e:{each:e},r=wu(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},u=i>0&&i<1,c=isNaN(i)||u,f=t.axis,p=i,g=i;return Yn(i)?p=g={center:.5,edges:.5,end:1}[i]||0:!u&&c&&(p=i[0],g=i[1]),function(_,A,T){var b=(T||t).length,S=a[b],C,L,j,q,V,D,N,k,x;if(!S){if(x=t.grid==="auto"?0:(t.grid||[1,lo])[1],!x){for(N=-1e8;N<(N=T[x++].getBoundingClientRect().left)&&x<b;);x<b&&x--}for(S=a[b]=[],C=c?Math.min(x,b)*p-.5:i%x,L=x===lo?0:c?b*g/x-.5:i/x|0,N=0,k=lo,D=0;D<b;D++)j=D%x-C,q=L-(D/x|0),S[D]=V=f?Math.abs(f==="y"?q:j):yP(j*j+q*q),V>N&&(N=V),V<k&&(k=V);i==="random"&&PP(S),S.max=N-k,S.min=k,S.v=b=(parseFloat(t.amount)||parseFloat(t.each)*(x>b?b-1:f?f==="y"?b/x:x:Math.max(x,b/x))||0)*(i==="edges"?-1:1),S.b=b<0?s-b:s,S.u=Rr(t.amount||t.each)||0,r=r&&b<0?GP(r):r}return b=(S[_]-S.min)/S.max||0,xn(S.b+(r?r(b):b)*S.v)+S.u}},qT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=xn(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(ra(r)?0:Rr(r))}},VP=function(e,t){var r=kr(e),i,s;return!r&&fo(e)&&(i=r=e.radius||lo,e.values?(e=as(e.values),(s=!ra(e[0]))&&(i*=i)):e=qT(e.increment)),Cl(t,r?hn(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var u=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),f=lo,p=0,g=e.length,_,A;g--;)s?(_=e[g].x-u,A=e[g].y-c,_=_*_+A*A):_=Math.abs(e[g]-u),_<f&&(f=_,p=g);return p=!i||f<=i?e[p]:a,s||p===a||ra(a)?p:p+Rr(a)}:qT(e))},UP=function(e,t,r,i){return Cl(kr(e)?!t:r===!0?!!(r=0):!i,function(){return kr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},T7=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,a){return a(s)},i)}},E7=function(e,t){return function(r){return e(parseFloat(r))+(t||Rr(r))}},b7=function(e,t,r){return BP(e,t,0,1,r)},zP=function(e,t,r){return Cl(r,function(i){return e[~~t(i)]})},S7=function n(e,t,r){var i=t-e;return kr(e)?zP(e,n(0,e.length),t):Cl(r,function(s){return(i+(s-e)%i)%i+e})},w7=function n(e,t,r){var i=t-e,s=i*2;return kr(e)?zP(e,n(0,e.length-1),t):Cl(r,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},qd=function(e){for(var t=0,r="",i,s,a,u;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),u=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(u?TP:VT),r+=e.substr(t,i-t)+UP(u?s:+s[0],u?0:+s[1],+s[2]||1e-5),t=a+1;return r+e.substr(t,e.length-t)},BP=function(e,t,r,i,s){var a=t-e,u=i-r;return Cl(s,function(c){return r+((c-e)/a*u||0)})},R7=function n(e,t,r,i){var s=isNaN(e+t)?0:function(A){return(1-A)*e+A*t};if(!s){var a=Yn(e),u={},c,f,p,g,_;if(r===!0&&(i=1)&&(r=null),a)e={p:e},t={p:t};else if(kr(e)&&!kr(t)){for(p=[],g=e.length,_=g-2,f=1;f<g;f++)p.push(n(e[f-1],e[f]));g--,s=function(T){T*=g;var b=Math.min(_,~~T);return p[b](T-b)},r=t}else i||(e=_h(kr(e)?[]:{},e));if(!p){for(c in t)Jb.call(u,e,c,"get",t[c]);s=function(T){return nS(T,u)||(a?e.p:e)}}}return Cl(r,s)},wk=function(e,t,r){var i=e.labels,s=lo,a,u,c;for(a in i)u=i[a]-t,u<0==!!r&&u&&s>(u=Math.abs(u))&&(c=a,s=u);return c},Ni=function(e,t,r){var i=e.vars,s=i[t],a=Qt,u=e._ctx,c,f,p;if(s)return c=i[t+"Params"],f=i.callbackScope||e,r&&nl.length&&sy(),u&&(Qt=u),p=c?s.apply(f,c):s.call(f),Qt=a,p},ad=function(e){return _l(e),e.scrollTrigger&&e.scrollTrigger.kill(!!dr),e.progress()<1&&Ni(e,"onInterrupt"),e},Wc,jP=[],FP=function(e){if(e)if(e=!e.name&&e.default||e,Gb()||e.headless){var t=e.name,r=hn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Hd,render:nS,add:Jb,kill:F7,modifier:j7,rawVars:0},a={targetTest:0,get:0,getSetter:tS,aliases:{},register:0};if(Th(),e!==i){if(Ri[t])return;Ui(i,Ui(oy(e,s),a)),_h(i.prototype,_h(s,oy(e,a))),Ri[i.prop=t]=i,e.targetTest&&(Tg.push(i),Yb[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}SP(t,i),e.register&&e.register(ci,i,ai)}else jP.push(e)},Ht=255,ld={aqua:[0,Ht,Ht],lime:[0,Ht,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ht],navy:[0,0,128],white:[Ht,Ht,Ht],olive:[128,128,0],yellow:[Ht,Ht,0],orange:[Ht,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ht,0,0],pink:[Ht,192,203],cyan:[0,Ht,Ht],transparent:[Ht,Ht,Ht,0]},gA=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Ht+.5|0},HP=function(e,t,r){var i=e?ra(e)?[e>>16,e>>8&Ht,e&Ht]:0:ld.black,s,a,u,c,f,p,g,_,A,T;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ld[e])i=ld[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),u=e.charAt(3),e="#"+s+s+a+a+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ht,i&Ht,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ht,e&Ht]}else if(e.substr(0,3)==="hsl"){if(i=T=e.match(VT),!t)c=+i[0]%360/360,f=+i[1]/100,p=+i[2]/100,a=p<=.5?p*(f+1):p+f-p*f,s=p*2-a,i.length>3&&(i[3]*=1),i[0]=gA(c+1/3,s,a),i[1]=gA(c,s,a),i[2]=gA(c-1/3,s,a);else if(~e.indexOf("="))return i=e.match(vP),r&&i.length<4&&(i[3]=1),i}else i=e.match(VT)||ld.transparent;i=i.map(Number)}return t&&!T&&(s=i[0]/Ht,a=i[1]/Ht,u=i[2]/Ht,g=Math.max(s,a,u),_=Math.min(s,a,u),p=(g+_)/2,g===_?c=f=0:(A=g-_,f=p>.5?A/(2-g-_):A/(g+_),c=g===s?(a-u)/A+(a<u?6:0):g===a?(u-s)/A+2:(s-a)/A+4,c*=60),i[0]=~~(c+.5),i[1]=~~(f*100+.5),i[2]=~~(p*100+.5)),r&&i.length<4&&(i[3]=1),i},qP=function(e){var t=[],r=[],i=-1;return e.split(rl).forEach(function(s){var a=s.match(Kc)||[];t.push.apply(t,a),r.push(i+=a.length+1)}),t.c=r,t},Rk=function(e,t,r){var i="",s=(e+i).match(rl),a=t?"hsla(":"rgba(",u=0,c,f,p,g;if(!s)return e;if(s=s.map(function(_){return(_=HP(_,t,1))&&a+(t?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),r&&(p=qP(e),c=r.c,c.join(i)!==p.c.join(i)))for(f=e.replace(rl,"1").split(Kc),g=f.length-1;u<g;u++)i+=f[u]+(~c.indexOf(u)?s.shift()||a+"0,0,0,0)":(p.length?p:s.length?s:r).shift());if(!f)for(f=e.split(rl),g=f.length-1;u<g;u++)i+=f[u]+s[u];return i+f[g]},rl=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ld)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),C7=/hsl[a]?\(/,$P=function(e){var t=e.join(" "),r;if(rl.lastIndex=0,rl.test(t))return r=C7.test(t),e[1]=Rk(e[1],r),e[0]=Rk(e[0],r,qP(e[1])),!0},$d,xi=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,a=s,u=[],c,f,p,g,_,A,T=function b(S){var C=n()-i,L=S===!0,j,q,V,D;if((C>e||C<0)&&(r+=C-t),i+=C,V=i-r,j=V-a,(j>0||L)&&(D=++g.frame,_=V-g.time*1e3,g.time=V=V/1e3,a+=j+(j>=s?4:s-j),q=1),L||(c=f(b)),q)for(A=0;A<u.length;A++)u[A](V,_,D,S)};return g={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(S){return _/(1e3/(S||60))},wake:function(){EP&&(!UT&&Gb()&&(Js=UT=window,Kb=Js.document||{},Vi.gsap=ci,(Js.gsapVersions||(Js.gsapVersions=[])).push(ci.version),bP(iy||Js.GreenSockGlobals||!Js.gsap&&Js||{}),jP.forEach(FP)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&g.sleep(),f=p||function(S){return setTimeout(S,a-g.time*1e3+1|0)},$d=1,T(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(c),$d=0,f=Hd},lagSmoothing:function(S,C){e=S||1/0,t=Math.min(C||33,e)},fps:function(S){s=1e3/(S||240),a=g.time*1e3+s},add:function(S,C,L){var j=C?function(q,V,D,N){S(q,V,D,N),g.remove(j)}:S;return g.remove(S),u[L?"unshift":"push"](j),Th(),j},remove:function(S,C){~(C=u.indexOf(S))&&u.splice(C,1)&&A>=C&&A--},_listeners:u},g}(),Th=function(){return!$d&&xi.wake()},vt={},x7=/^[\d.\-M][\d.\-,\s]/,k7=/["']/g,I7=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,a=r.length,u,c,f;s<a;s++)c=r[s],u=s!==a-1?c.lastIndexOf(","):c.length,f=c.substr(0,u),t[i]=isNaN(f)?f.replace(k7,"").trim():+f,i=c.substr(u+1).trim();return t},O7=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},N7=function(e){var t=(e+"").split("("),r=vt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[I7(t[1])]:O7(e).split(",").map(xP)):vt._CE&&x7.test(e)?vt._CE("",e):r},GP=function(e){return function(t){return 1-e(1-t)}},KP=function n(e,t){for(var r=e._first,i;r;)r instanceof jr?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},wu=function(e,t){return e&&(hn(e)?e:vt[e]||N7(e))||t},Qu=function(e,t,r,i){r===void 0&&(r=function(c){return 1-t(1-c)}),i===void 0&&(i=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},a;return oi(e,function(u){vt[u]=Vi[u]=s,vt[a=u.toLowerCase()]=r;for(var c in s)vt[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=vt[u+"."+c]=s[c]}),s},WP=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},yA=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),a=s/LT*(Math.asin(1/i)||0),u=function(p){return p===1?1:i*Math.pow(2,-10*p)*o7((p-a)*s)+1},c=e==="out"?u:e==="in"?function(f){return 1-u(1-f)}:WP(u);return s=LT/s,c.config=function(f,p){return n(e,f,p)},c},_A=function n(e,t){t===void 0&&(t=1.70158);var r=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:WP(r);return i.config=function(s){return n(e,s)},i};oi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Qu(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});vt.Linear.easeNone=vt.none=vt.Linear.easeIn;Qu("Elastic",yA("in"),yA("out"),yA());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(u){return u<t?n*u*u:u<r?n*Math.pow(u-1.5/e,2)+.75:u<i?n*(u-=2.25/e)*u+.9375:n*Math.pow(u-2.625/e,2)+.984375};Qu("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Qu("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Qu("Circ",function(n){return-(yP(1-n*n)-1)});Qu("Sine",function(n){return n===1?1:-s7(n*r7)+1});Qu("Back",_A("in"),_A("out"),_A());vt.SteppedEase=vt.steps=Vi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,a=1-Cr;return function(u){return((i*_p(0,a,u)|0)+s)*r}}};yh.ease=vt["quad.out"];oi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Qb+=n+","+n+"Params,"});var YP=function(e,t){this.id=i7++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:RP,this.set=t?t.getSetter:tS},Gd=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ah(this,+t.duration,1,1),this.data=t.data,Qt&&(this._ctx=Qt,Qt.data.push(this)),$d||xi.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Ah(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Th(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(k_(this,r),!s._dp||s.parent||OP(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Zs(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Cr||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),CP(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+bk(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+bk(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?vh(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?ay(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-1e-8?0:this._rts,this.totalTime(_p(-Math.abs(this._delay),this._tDur,s),i!==!1),x_(this),d7(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Th(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Cr&&(this._tTime-=Cr)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Zs(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(si(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ay(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=u7);var i=dr;return dr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),dr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Sk(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Sk(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(ts(this,r),si(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,si(i)),this._dur||(this._zTime=-1e-8),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Cr)},e.eventCallback=function(r,i,s){var a=this.vars;return arguments.length>1?(i?(a[r]=i,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete a[r],this):a[r]},e.then=function(r){var i=this;return new Promise(function(s){var a=hn(r)?r:kP,u=function(){var f=i.then;i.then=null,hn(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=f),s(a),i.then=f};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?u():i._prom=u})},e.kill=function(){ad(this)},n}();Ui(Gd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var jr=function(n){gP(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=si(r.sortChildren),nn&&Zs(r.parent||nn,Fo(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&NP(Fo(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return Td(0,arguments,this),this},t.from=function(i,s,a){return Td(1,arguments,this),this},t.fromTo=function(i,s,a,u){return Td(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,Ad(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Cn(i,s,ts(this,a),1),this},t.call=function(i,s,a){return Zs(this,Cn.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,u,c,f,p){return a.duration=s,a.stagger=a.stagger||u,a.onComplete=f,a.onCompleteParams=p,a.parent=this,new Cn(i,a,ts(this,c)),this},t.staggerFrom=function(i,s,a,u,c,f,p){return a.runBackwards=1,Ad(a).immediateRender=si(a.immediateRender),this.staggerTo(i,s,a,u,c,f,p)},t.staggerFromTo=function(i,s,a,u,c,f,p,g){return u.startAt=a,Ad(u).immediateRender=si(u.immediateRender),this.staggerTo(i,s,u,c,f,p,g)},t.render=function(i,s,a){var u=this._time,c=this._dirty?this.totalDuration():this._tDur,f=this._dur,p=i<=0?0:xn(i),g=this._zTime<0!=i<0&&(this._initted||!f),_,A,T,b,S,C,L,j,q,V,D,N;if(this!==nn&&p>c&&i>=0&&(p=c),p!==this._tTime||a||g){if(u!==this._time&&f&&(p+=this._time-u,i+=this._time-u),_=p,q=this._start,j=this._ts,C=!j,g&&(f||(u=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(D=this._yoyo,S=f+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(S*100+i,s,a);if(_=xn(p%S),p===c?(b=this._repeat,_=f):(V=xn(p/S),b=~~V,b&&b===V&&(_=f,b--),_>f&&(_=f)),V=vh(this._tTime,S),!u&&this._tTime&&V!==b&&this._tTime-V*S-this._dur<=0&&(V=b),D&&b&1&&(_=f-_,N=1),b!==V&&!this._lock){var k=D&&V&1,x=k===(D&&b&1);if(b<V&&(k=!k),u=k?0:p%f?f:p,this._lock=1,this.render(u||(N?0:xn(b*S)),s,!f)._lock=0,this._tTime=p,!s&&this.parent&&Ni(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),u&&u!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,c=this._tDur,x&&(this._lock=2,u=k?f:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;KP(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(L=y7(this,xn(u),xn(_)),L&&(p-=_-(_=L._start))),this._tTime=p,this._time=_,this._act=!j,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,u=0),!u&&_&&!s&&!b&&(Ni(this,"onStart"),this._tTime!==p))return this;if(_>=u&&i>=0)for(A=this._first;A;){if(T=A._next,(A._act||_>=A._start)&&A._ts&&L!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(_-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(_-A._start)*A._ts,s,a),_!==this._time||!this._ts&&!C){L=0,T&&(p+=this._zTime=-1e-8);break}}A=T}else{A=this._last;for(var z=i<0?i:_;A;){if(T=A._prev,(A._act||z<=A._end)&&A._ts&&L!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(z-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(z-A._start)*A._ts,s,a||dr&&(A._initted||A._startAt)),_!==this._time||!this._ts&&!C){L=0,T&&(p+=this._zTime=z?-1e-8:Cr);break}}A=T}}if(L&&!s&&(this.pause(),L.render(_>=u?0:-1e-8)._zTime=_>=u?1:-1,this._ts))return this._start=q,x_(this),this.render(i,s,a);this._onUpdate&&!s&&Ni(this,"onUpdate",!0),(p===c&&this._tTime>=this.totalDuration()||!p&&u)&&(q===this._start||Math.abs(j)!==Math.abs(this._ts))&&(this._lock||((i||!f)&&(p===c&&this._ts>0||!p&&this._ts<0)&&_l(this,1),!s&&!(i<0&&!u)&&(p||u||!c)&&(Ni(this,p===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(ra(s)||(s=ts(this,s,i)),!(i instanceof Gd)){if(kr(i))return i.forEach(function(u){return a.add(u,s)}),this;if(Yn(i))return this.addLabel(i,s);if(hn(i))i=Cn.delayedCall(0,i);else return this}return this!==i?Zs(this,i,s):this},t.getChildren=function(i,s,a,u){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),u===void 0&&(u=-1e8);for(var c=[],f=this._first;f;)f._start>=u&&(f instanceof Cn?s&&c.push(f):(a&&c.push(f),i&&c.push.apply(c,f.getChildren(!0,s,a)))),f=f._next;return c},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return Yn(i)?this.removeLabel(i):hn(i)?this.killTweensOf(i):(i.parent===this&&C_(this,i),i===this._recent&&(this._recent=this._last),Su(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=xn(xi.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ts(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var u=Cn.delayedCall(0,s||Hd,a);return u.data="isPause",this._hasPause=1,Zs(this,u,ts(this,i))},t.removePause=function(i){var s=this._first;for(i=ts(this,i);s;)s._start===i&&s.data==="isPause"&&_l(s),s=s._next},t.killTweensOf=function(i,s,a){for(var u=this.getTweensOf(i,a),c=u.length;c--;)$a!==u[c]&&u[c].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],u=as(i),c=this._first,f=ra(s),p;c;)c instanceof Cn?c7(c._targets,u)&&(f?(!$a||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(p=c.getTweensOf(u,s)).length&&a.push.apply(a,p),c=c._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,u=ts(a,i),c=s,f=c.startAt,p=c.onStart,g=c.onStartParams,_=c.immediateRender,A,T=Cn.to(a,Ui({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:s.duration||Math.abs((u-(f&&"time"in f?f.time:a._time))/a.timeScale())||Cr,onStart:function(){if(a.pause(),!A){var S=s.duration||Math.abs((u-(f&&"time"in f?f.time:a._time))/a.timeScale());T._dur!==S&&Ah(T,S,0,1).render(T._time,!0,!0),A=1}p&&p.apply(T,g||[])}},s));return _?T.render(0):T},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,Ui({startAt:{time:ts(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),wk(this,ts(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),wk(this,ts(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Cr)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var u=this._first,c=this.labels,f;u;)u._start>=a&&(u._start+=i,u._end+=i),u=u._next;if(s)for(f in c)c[f]>=a&&(c[f]+=i);return Su(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Su(this)},t.totalDuration=function(i){var s=0,a=this,u=a._last,c=lo,f,p,g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(g=a.parent;u;)f=u._prev,u._dirty&&u.totalDuration(),p=u._start,p>c&&a._sort&&u._ts&&!a._lock?(a._lock=1,Zs(a,u,p-u._delay,1)._lock=0):c=p,p<0&&u._ts&&(s-=p,(!g&&!a._dp||g&&g.smoothChildTiming)&&(a._start+=p/a._ts,a._time-=p,a._tTime-=p),a.shiftChildren(-p,!1,-1/0),c=0),u._end>s&&u._ts&&(s=u._end),u=f;Ah(a,a===nn&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(nn._ts&&(CP(nn,ay(i,nn)),wP=xi.frame),xi.frame>=Tk){Tk+=Pi.autoSleep||120;var s=nn._first;if((!s||!s._ts)&&Pi.autoSleep&&xi._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||xi.sleep()}}},e}(Gd);Ui(jr.prototype,{_lock:0,_hasPause:0,_forcing:0});var M7=function(e,t,r,i,s,a,u){var c=new ai(this._pt,e,t,0,1,t2,null,s),f=0,p=0,g,_,A,T,b,S,C,L;for(c.b=r,c.e=i,r+="",i+="",(C=~i.indexOf("random("))&&(i=qd(i)),a&&(L=[r,i],a(L,e,t),r=L[0],i=L[1]),_=r.match(pA)||[];g=pA.exec(i);)T=g[0],b=i.substring(f,g.index),A?A=(A+1)%5:b.substr(-5)==="rgba("&&(A=1),T!==_[p++]&&(S=parseFloat(_[p-1])||0,c._pt={_next:c._pt,p:b||p===1?b:",",s:S,c:T.charAt(1)==="="?nh(S,T)-S:parseFloat(T)-S,m:A&&A<4?Math.round:0},f=pA.lastIndex);return c.c=f<i.length?i.substring(f,i.length):"",c.fp=u,(AP.test(i)||C)&&(c.e=0),this._pt=c,c},Jb=function(e,t,r,i,s,a,u,c,f,p){hn(i)&&(i=i(s||0,e,a));var g=e[t],_=r!=="get"?r:hn(g)?f?e[t.indexOf("set")||!hn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](f):e[t]():g,A=hn(g)?f?U7:ZP:eS,T;if(Yn(i)&&(~i.indexOf("random(")&&(i=qd(i)),i.charAt(1)==="="&&(T=nh(_,i)+(Rr(_)||0),(T||T===0)&&(i=T))),!p||_!==i||$T)return!isNaN(_*i)&&i!==""?(T=new ai(this._pt,e,t,+_||0,i-(_||0),typeof g=="boolean"?B7:e2,0,A),f&&(T.fp=f),u&&T.modifier(u,this,e),this._pt=T):(!g&&!(t in e)&&Wb(t,i),M7.call(this,e,t,_,i,A,c||Pi.stringFilter,f))},D7=function(e,t,r,i,s){if(hn(e)&&(e=Ed(e,s,t,r,i)),!fo(e)||e.style&&e.nodeType||kr(e)||_P(e))return Yn(e)?Ed(e,s,t,r,i):e;var a={},u;for(u in e)a[u]=Ed(e[u],s,t,r,i);return a},QP=function(e,t,r,i,s,a){var u,c,f,p;if(Ri[e]&&(u=new Ri[e]).init(s,u.rawVars?t[e]:D7(t[e],i,s,a,r),r,i,a)!==!1&&(r._pt=c=new ai(r._pt,s,e,0,1,u.render,u,0,u.priority),r!==Wc))for(f=r._ptLookup[r._targets.indexOf(s)],p=u._props.length;p--;)f[u._props[p]]=c;return u},$a,$T,Zb=function n(e,t,r){var i=e.vars,s=i.ease,a=i.startAt,u=i.immediateRender,c=i.lazy,f=i.onUpdate,p=i.runBackwards,g=i.yoyoEase,_=i.keyframes,A=i.autoRevert,T=e._dur,b=e._startAt,S=e._targets,C=e.parent,L=C&&C.data==="nested"?C.vars.targets:S,j=e._overwrite==="auto"&&!qb,q=e.timeline,V,D,N,k,x,z,U,B,P,Ee,be,Y,oe;if(q&&(!_||!s)&&(s="none"),e._ease=wu(s,yh.ease),e._yEase=g?GP(wu(g===!0?s:g,yh.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!q&&!!i.runBackwards,!q||_&&!i.stagger){if(B=S[0]?bu(S[0]).harness:0,Y=B&&i[B.prop],V=oy(i,Yb),b&&(b._zTime<0&&b.progress(1),t<0&&p&&u&&!A?b.render(-1,!0):b.revert(p&&T?Ag:l7),b._lazy=0),a){if(_l(e._startAt=Cn.set(S,Ui({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!b&&si(c),startAt:null,delay:0,onUpdate:f&&function(){return Ni(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dr||!u&&!A)&&e._startAt.revert(Ag),u&&T&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(p&&T&&!b){if(t&&(u=!1),N=Ui({overwrite:!1,data:"isFromStart",lazy:u&&!b&&si(c),immediateRender:u,stagger:0,parent:C},V),Y&&(N[B.prop]=Y),_l(e._startAt=Cn.set(S,N)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dr?e._startAt.revert(Ag):e._startAt.render(-1,!0)),e._zTime=t,!u)n(e._startAt,Cr,Cr);else if(!t)return}for(e._pt=e._ptCache=0,c=T&&si(c)||c&&!T,D=0;D<S.length;D++){if(x=S[D],U=x._gsap||Xb(S)[D]._gsap,e._ptLookup[D]=Ee={},zT[U.id]&&nl.length&&sy(),be=L===S?D:L.indexOf(x),B&&(P=new B).init(x,Y||V,e,be,L)!==!1&&(e._pt=k=new ai(e._pt,x,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(Ae){Ee[Ae]=k}),P.priority&&(z=1)),!B||Y)for(N in V)Ri[N]&&(P=QP(N,V,e,be,x,L))?P.priority&&(z=1):Ee[N]=k=Jb.call(e,x,N,"get",V[N],be,L,0,i.stringFilter);e._op&&e._op[D]&&e.kill(x,e._op[D]),j&&e._pt&&($a=e,nn.killTweensOf(x,Ee,e.globalTime(t)),oe=!e.parent,$a=0),e._pt&&c&&(zT[U.id]=1)}z&&n2(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!oe,_&&t<=0&&q.render(lo,!0,!0)},P7=function(e,t,r,i,s,a,u,c){var f=(e._pt&&e._ptCache||(e._ptCache={}))[t],p,g,_,A;if(!f)for(f=e._ptCache[t]=[],_=e._ptLookup,A=e._targets.length;A--;){if(p=_[A][t],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==t&&p.fp!==t;)p=p._next;if(!p)return $T=1,e.vars[t]="+=0",Zb(e,u),$T=0,c?Fd(t+" not eligible for reset"):1;f.push(p)}for(A=f.length;A--;)g=f[A],p=g._pt||g,p.s=(i||i===0)&&!s?i:p.s+(i||0)+a*p.c,p.c=r-p.s,g.e&&(g.e=vn(r)+Rr(g.e)),g.b&&(g.b=p.s+Rr(g.b))},L7=function(e,t){var r=e[0]?bu(e[0]).harness:0,i=r&&r.aliases,s,a,u,c;if(!i)return t;s=_h({},t);for(a in i)if(a in s)for(c=i[a].split(","),u=c.length;u--;)s[c[u]]=s[a];return s},V7=function(e,t,r,i){var s=t.ease||i||"power1.inOut",a,u;if(kr(t))u=r[e]||(r[e]=[]),t.forEach(function(c,f){return u.push({t:f/(t.length-1)*100,v:c,e:s})});else for(a in t)u=r[a]||(r[a]=[]),a==="ease"||u.push({t:parseFloat(e),v:t[a],e:s})},Ed=function(e,t,r,i,s){return hn(e)?e.call(t,r,i,s):Yn(e)&&~e.indexOf("random(")?qd(e):e},XP=Qb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",JP={};oi(XP+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return JP[n]=1});var Cn=function(n){gP(e,n);function e(r,i,s,a){var u;typeof i=="number"&&(s.duration=i,i=s,s=null),u=n.call(this,a?i:Ad(i))||this;var c=u.vars,f=c.duration,p=c.delay,g=c.immediateRender,_=c.stagger,A=c.overwrite,T=c.keyframes,b=c.defaults,S=c.scrollTrigger,C=c.yoyoEase,L=i.parent||nn,j=(kr(r)||_P(r)?ra(r[0]):"length"in i)?[r]:as(r),q,V,D,N,k,x,z,U;if(u._targets=j.length?Xb(j):Fd("GSAP target "+r+" not found. https://gsap.com",!Pi.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=A,T||_||Wm(f)||Wm(p)){if(i=u.vars,q=u.timeline=new jr({data:"nested",defaults:b||{},targets:L&&L.data==="nested"?L.vars.targets:j}),q.kill(),q.parent=q._dp=Fo(u),q._start=0,_||Wm(f)||Wm(p)){if(N=j.length,z=_&&LP(_),fo(_))for(k in _)~XP.indexOf(k)&&(U||(U={}),U[k]=_[k]);for(V=0;V<N;V++)D=oy(i,JP),D.stagger=0,C&&(D.yoyoEase=C),U&&_h(D,U),x=j[V],D.duration=+Ed(f,Fo(u),V,x,j),D.delay=(+Ed(p,Fo(u),V,x,j)||0)-u._delay,!_&&N===1&&D.delay&&(u._delay=p=D.delay,u._start+=p,D.delay=0),q.to(x,D,z?z(V,x,j):0),q._ease=vt.none;q.duration()?f=p=0:u.timeline=0}else if(T){Ad(Ui(q.vars.defaults,{ease:"none"})),q._ease=wu(T.ease||i.ease||"none");var B=0,P,Ee,be;if(kr(T))T.forEach(function(Y){return q.to(j,Y,">")}),q.duration();else{D={};for(k in T)k==="ease"||k==="easeEach"||V7(k,T[k],D,T.easeEach);for(k in D)for(P=D[k].sort(function(Y,oe){return Y.t-oe.t}),B=0,V=0;V<P.length;V++)Ee=P[V],be={ease:Ee.e,duration:(Ee.t-(V?P[V-1].t:0))/100*f},be[k]=Ee.v,q.to(j,be,B),B+=be.duration;q.duration()<f&&q.to({},{duration:f-q.duration()})}}f||u.duration(f=q.duration())}else u.timeline=0;return A===!0&&!qb&&($a=Fo(u),nn.killTweensOf(j),$a=0),Zs(L,Fo(u),s),i.reversed&&u.reverse(),i.paused&&u.paused(!0),(g||!f&&!T&&u._start===xn(L._time)&&si(g)&&p7(Fo(u))&&L.data!=="nested")&&(u._tTime=-1e-8,u.render(Math.max(0,-p)||0)),S&&NP(Fo(u),S),u}var t=e.prototype;return t.render=function(i,s,a){var u=this._time,c=this._tDur,f=this._dur,p=i<0,g=i>c-Cr&&!p?c:i<Cr?0:i,_,A,T,b,S,C,L,j,q;if(!f)g7(this,i,s,a);else if(g!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(_=g,j=this.timeline,this._repeat){if(b=f+this._rDelay,this._repeat<-1&&p)return this.totalTime(b*100+i,s,a);if(_=xn(g%b),g===c?(T=this._repeat,_=f):(S=xn(g/b),T=~~S,T&&T===S?(_=f,T--):_>f&&(_=f)),C=this._yoyo&&T&1,C&&(q=this._yEase,_=f-_),S=vh(this._tTime,b),_===u&&!a&&this._initted&&T===S)return this._tTime=g,this;T!==S&&(j&&this._yEase&&KP(j,C),this.vars.repeatRefresh&&!C&&!this._lock&&_!==b&&this._initted&&(this._lock=a=1,this.render(xn(b*T),!0).invalidate()._lock=0))}if(!this._initted){if(MP(this,p?i:_,a,s,g))return this._tTime=0,this;if(u!==this._time&&!(a&&this.vars.repeatRefresh&&T!==S))return this;if(f!==this._dur)return this.render(i,s,a)}if(this._tTime=g,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=L=(q||this._ease)(_/f),this._from&&(this.ratio=L=1-L),_&&!u&&!s&&!T&&(Ni(this,"onStart"),this._tTime!==g))return this;for(A=this._pt;A;)A.r(L,A.d),A=A._next;j&&j.render(i<0?i:j._dur*j._ease(_/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(p&&BT(this,i,s,a),Ni(this,"onUpdate")),this._repeat&&T!==S&&this.vars.onRepeat&&!s&&this.parent&&Ni(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(p&&!this._onUpdate&&BT(this,i,!0,!0),(i||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&_l(this,1),!s&&!(p&&!u)&&(g||u||C)&&(Ni(this,g===c?"onComplete":"onReverseComplete",!0),this._prom&&!(g<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,u,c){$d||xi.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||Zb(this,f),p=this._ease(f/this._dur),P7(this,i,s,a,u,p,f,c)?this.resetTo(i,s,a,u,1):(k_(this,0),this.parent||IP(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ad(this):this.scrollTrigger&&this.scrollTrigger.kill(!!dr),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,$a&&$a.vars.overwrite!==!0)._first||ad(this),this.parent&&a!==this.timeline.totalDuration()&&Ah(this,this._dur*this.timeline._tDur/a,0,1),this}var u=this._targets,c=i?as(i):u,f=this._ptLookup,p=this._pt,g,_,A,T,b,S,C;if((!s||s==="all")&&f7(u,c))return s==="all"&&(this._pt=0),ad(this);for(g=this._op=this._op||[],s!=="all"&&(Yn(s)&&(b={},oi(s,function(L){return b[L]=1}),s=b),s=L7(u,s)),C=u.length;C--;)if(~c.indexOf(u[C])){_=f[C],s==="all"?(g[C]=s,T=_,A={}):(A=g[C]=g[C]||{},T=s);for(b in T)S=_&&_[b],S&&((!("kill"in S.d)||S.d.kill(b)===!0)&&C_(this,S,"_pt"),delete _[b]),A!=="all"&&(A[b]=1)}return this._initted&&!this._pt&&p&&ad(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Td(1,arguments)},e.delayedCall=function(i,s,a,u){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:u})},e.fromTo=function(i,s,a){return Td(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return nn.killTweensOf(i,s,a)},e}(Gd);Ui(Cn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});oi("staggerTo,staggerFrom,staggerFromTo",function(n){Cn[n]=function(){var e=new jr,t=FT.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var eS=function(e,t,r){return e[t]=r},ZP=function(e,t,r){return e[t](r)},U7=function(e,t,r,i){return e[t](i.fp,r)},z7=function(e,t,r){return e.setAttribute(t,r)},tS=function(e,t){return hn(e[t])?ZP:$b(e[t])&&e.setAttribute?z7:eS},e2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},B7=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},t2=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},nS=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},j7=function(e,t,r,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,r),s=a},F7=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?C_(this,t,"_pt"):t.dep||(r=1),t=i;return!r},H7=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},n2=function(e){for(var t=e._pt,r,i,s,a;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=r}e._pt=s},ai=function(){function n(t,r,i,s,a,u,c,f,p){this.t=r,this.s=s,this.c=a,this.p=i,this.r=u||e2,this.d=c||this,this.set=f||eS,this.pr=p||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=H7,this.m=r,this.mt=s,this.tween=i},n}();oi(Qb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Yb[n]=1});Vi.TweenMax=Vi.TweenLite=Cn;Vi.TimelineLite=Vi.TimelineMax=jr;nn=new jr({sortChildren:!1,defaults:yh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Pi.stringFilter=$P;var Ru=[],Eg={},q7=[],Ck=0,$7=0,vA=function(e){return(Eg[e]||q7).map(function(t){return t()})},GT=function(){var e=Date.now(),t=[];e-Ck>2&&(vA("matchMediaInit"),Ru.forEach(function(r){var i=r.queries,s=r.conditions,a,u,c,f;for(u in i)a=Js.matchMedia(i[u]).matches,a&&(c=1),a!==s[u]&&(s[u]=a,f=1);f&&(r.revert(),c&&t.push(r))}),vA("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),Ck=e,vA("matchMedia"))},r2=function(){function n(t,r){this.selector=r&&HT(r),this.data=[],this._r=[],this.isReverted=!1,this.id=$7++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){hn(r)&&(s=i,i=r,r=hn);var a=this,u=function(){var f=Qt,p=a.selector,g;return f&&f!==a&&f.data.push(a),s&&(a.selector=HT(s)),Qt=a,g=i.apply(a,arguments),hn(g)&&a._r.push(g),Qt=f,a.selector=p,a.isReverted=!1,g};return a.last=u,r===hn?u(a,function(c){return a.add(null,c)}):r?a[r]=u:u},e.ignore=function(r){var i=Qt;Qt=null,r(this),Qt=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Cn&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var u=s.getTweens(),c=s.data.length,f;c--;)f=s.data[c],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(p){return u.splice(u.indexOf(p),1)}));for(u.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,g){return g.g-p.g||-1/0}).forEach(function(p){return p.t.revert(r)}),c=s.data.length;c--;)f=s.data[c],f instanceof jr?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof Cn)&&f.revert&&f.revert(r);s._r.forEach(function(p){return p(r,s)}),s.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),i)for(var a=Ru.length;a--;)Ru[a].id===this.id&&Ru.splice(a,1)},e.revert=function(r){this.kill(r||{})},n}(),G7=function(){function n(t){this.contexts=[],this.scope=t,Qt&&Qt.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){fo(r)||(r={matches:r});var a=new r2(0,s||this.scope),u=a.conditions={},c,f,p;Qt&&!a.selector&&(a.selector=Qt.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=r;for(f in r)f==="all"?p=1:(c=Js.matchMedia(r[f]),c&&(Ru.indexOf(a)<0&&Ru.push(a),(u[f]=c.matches)&&(p=1),c.addListener?c.addListener(GT):c.addEventListener("change",GT)));return p&&i(a,function(g){return a.add(null,g)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),ly={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return FP(i)})},timeline:function(e){return new jr(e)},getTweensOf:function(e,t){return nn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Yn(e)&&(e=as(e)[0]);var s=bu(e||{}).get,a=r?kP:xP;return r==="native"&&(r=""),e&&(t?a((Ri[t]&&Ri[t].get||s)(e,t,r,i)):function(u,c,f){return a((Ri[u]&&Ri[u].get||s)(e,u,c,f))})},quickSetter:function(e,t,r){if(e=as(e),e.length>1){var i=e.map(function(p){return ci.quickSetter(p,t,r)}),s=i.length;return function(p){for(var g=s;g--;)i[g](p)}}e=e[0]||{};var a=Ri[t],u=bu(e),c=u.harness&&(u.harness.aliases||{})[t]||t,f=a?function(p){var g=new a;Wc._pt=0,g.init(e,r?p+r:p,Wc,0,[e]),g.render(1,g),Wc._pt&&nS(1,Wc)}:u.set(e,c);return a?f:function(p){return f(e,c,r?p+r:p,u,1)}},quickTo:function(e,t,r){var i,s=ci.to(e,Ui((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),a=function(c,f,p){return s.resetTo(t,c,f,p)};return a.tween=s,a},isTweening:function(e){return nn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=wu(e.ease,yh.ease)),Ek(yh,e||{})},config:function(e){return Ek(Pi,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(u){return u&&!Ri[u]&&!Vi[u]&&Fd(t+" effect requires "+u+" plugin.")}),mA[t]=function(u,c,f){return r(as(u),Ui(c||{},s),f)},a&&(jr.prototype[t]=function(u,c,f){return this.add(mA[t](u,fo(c)?c:(f=c)&&{},this),f)})},registerEase:function(e,t){vt[e]=wu(t)},parseEase:function(e,t){return arguments.length?wu(e,t):vt},getById:function(e){return nn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new jr(e),i,s;for(r.smoothChildTiming=si(e.smoothChildTiming),nn.remove(r),r._dp=0,r._time=r._tTime=nn._time,i=nn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Cn&&i.vars.onComplete===i._targets[0]))&&Zs(r,i,i._start-i._delay),i=s;return Zs(nn,r,0),r},context:function(e,t){return e?new r2(e,t):Qt},matchMedia:function(e){return new G7(e)},matchMediaRefresh:function(){return Ru.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||GT()},addEventListener:function(e,t){var r=Eg[e]||(Eg[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Eg[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:S7,wrapYoyo:w7,distribute:LP,random:UP,snap:VP,normalize:b7,getUnit:Rr,clamp:v7,splitColor:HP,toArray:as,selector:HT,mapRange:BP,pipe:T7,unitize:E7,interpolate:R7,shuffle:PP},install:bP,effects:mA,ticker:xi,updateRoot:jr.updateRoot,plugins:Ri,globalTimeline:nn,core:{PropTween:ai,globals:SP,Tween:Cn,Timeline:jr,Animation:Gd,getCache:bu,_removeLinkedListItem:C_,reverting:function(){return dr},context:function(e){return e&&Qt&&(Qt.data.push(e),e._ctx=Qt),Qt},suppressOverwrites:function(e){return qb=e}}};oi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return ly[n]=Cn[n]});xi.add(jr.updateRoot);Wc=ly.to({},{duration:0});var K7=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},W7=function(e,t){var r=e._targets,i,s,a;for(i in t)for(s=r.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=K7(a,i)),a&&a.modifier&&a.modifier(t[i],e,r[s],i))},AA=function(e,t){return{name:e,rawVars:1,init:function(i,s,a){a._onInit=function(u){var c,f;if(Yn(s)&&(c={},oi(s,function(p){return c[p]=1}),s=c),t){c={};for(f in s)c[f]=t(s[f]);s=c}W7(u,s)}}}},ci=ly.registerPlugin({name:"attr",init:function(e,t,r,i,s){var a,u,c;this.tween=r;for(a in t)c=e.getAttribute(a)||"",u=this.add(e,"setAttribute",(c||0)+"",t[a],i,s,0,0,a),u.op=a,u.b=c,this._props.push(a)},render:function(e,t){for(var r=t._pt;r;)dr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},AA("roundProps",qT),AA("modifiers"),AA("snap",VP))||ly;Cn.version=jr.version=ci.version="3.12.7";EP=1;Gb()&&Th();vt.Power0;vt.Power1;vt.Power2;vt.Power3;vt.Power4;vt.Linear;vt.Quad;vt.Cubic;vt.Quart;vt.Quint;vt.Strong;vt.Elastic;vt.Back;vt.SteppedEase;vt.Bounce;vt.Sine;vt.Expo;vt.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var xk,Ga,rh,rS,yu,kk,iS,Y7=function(){return typeof window<"u"},ia={},au=180/Math.PI,ih=Math.PI/180,Lc=Math.atan2,Ik=1e8,sS=/([A-Z])/g,Q7=/(left|right|width|margin|padding|x)/i,X7=/[\s,\(]\S/,to={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},KT=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},J7=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Z7=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},e$=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},i2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},s2=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},t$=function(e,t,r){return e.style[t]=r},n$=function(e,t,r){return e.style.setProperty(t,r)},r$=function(e,t,r){return e._gsap[t]=r},i$=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},s$=function(e,t,r,i,s){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},o$=function(e,t,r,i,s){var a=e._gsap;a[t]=r,a.renderTransform(s,a)},rn="transform",li=rn+"Origin",a$=function n(e,t){var r=this,i=this.target,s=i.style,a=i._gsap;if(e in ia&&s){if(this.tfm=this.tfm||{},e!=="transform")e=to[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return r.tfm[u]=qo(i,u)}):this.tfm[e]=a.x?a[e]:qo(i,e),e===li&&(this.tfm.zOrigin=a.zOrigin);else return to.transform.split(",").forEach(function(u){return n.call(r,u,t)});if(this.props.indexOf(rn)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(li,t,"")),e=rn}(s||t)&&this.props.push(e,t,s[e])},o2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},l$=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(sS,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=iS(),(!s||!s.isStart)&&!r[rn]&&(o2(r),i.zOrigin&&r[li]&&(r[li]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},a2=function(e,t){var r={target:e,props:[],revert:l$,save:a$};return e._gsap||ci.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},l2,WT=function(e,t){var r=Ga.createElementNS?Ga.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ga.createElement(e);return r&&r.style?r:Ga.createElement(e)},uo=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(sS,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Eh(t)||t,1)||""},Ok="O,Moz,ms,Ms,Webkit".split(","),Eh=function(e,t,r){var i=t||yu,s=i.style,a=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(Ok[a]+e in s););return a<0?null:(a===3?"ms":a>=0?Ok[a]:"")+e},YT=function(){Y7()&&window.document&&(xk=window,Ga=xk.document,rh=Ga.documentElement,yu=WT("div")||{style:{}},WT("div"),rn=Eh(rn),li=rn+"Origin",yu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",l2=!!Eh("perspective"),iS=ci.core.reverting,rS=1)},Nk=function(e){var t=e.ownerSVGElement,r=WT("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),rh.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),rh.removeChild(r),s},Mk=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},u2=function(e){var t,r;try{t=e.getBBox()}catch{t=Nk(e),r=1}return t&&(t.width||t.height)||r||(t=Nk(e)),t&&!t.width&&!t.x&&!t.y?{x:+Mk(e,["x","cx","x1"])||0,y:+Mk(e,["y","cy","y1"])||0,width:0,height:0}:t},c2=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&u2(e))},Uu=function(e,t){if(t){var r=e.style,i;t in ia&&t!==li&&(t=rn),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(sS,"-$1").toLowerCase())):r.removeAttribute(t)}},Ka=function(e,t,r,i,s,a){var u=new ai(e._pt,t,r,0,1,a?s2:i2);return e._pt=u,u.b=i,u.e=s,e._props.push(r),u},Dk={deg:1,rad:1,turn:1},u$={grid:1,flex:1},vl=function n(e,t,r,i){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",u=yu.style,c=Q7.test(t),f=e.tagName.toLowerCase()==="svg",p=(f?"client":"offset")+(c?"Width":"Height"),g=100,_=i==="px",A=i==="%",T,b,S,C;if(i===a||!s||Dk[i]||Dk[a])return s;if(a!=="px"&&!_&&(s=n(e,t,r,"px")),C=e.getCTM&&c2(e),(A||a==="%")&&(ia[t]||~t.indexOf("adius")))return T=C?e.getBBox()[c?"width":"height"]:e[p],vn(A?s/T*g:s/100*T);if(u[c?"width":"height"]=g+(_?a:i),b=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!f?e:e.parentNode,C&&(b=(e.ownerSVGElement||{}).parentNode),(!b||b===Ga||!b.appendChild)&&(b=Ga.body),S=b._gsap,S&&A&&S.width&&c&&S.time===xi.time&&!S.uncache)return vn(s/S.width*g);if(A&&(t==="height"||t==="width")){var L=e.style[t];e.style[t]=g+i,T=e[p],L?e.style[t]=L:Uu(e,t)}else(A||a==="%")&&!u$[uo(b,"display")]&&(u.position=uo(e,"position")),b===e&&(u.position="static"),b.appendChild(yu),T=yu[p],b.removeChild(yu),u.position="absolute";return c&&A&&(S=bu(b),S.time=xi.time,S.width=b[p]),vn(_?T*s/g:T&&s?g/T*s:0)},qo=function(e,t,r,i){var s;return rS||YT(),t in to&&t!=="transform"&&(t=to[t],~t.indexOf(",")&&(t=t.split(",")[0])),ia[t]&&t!=="transform"?(s=Wd(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:cy(uo(e,li))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=uy[t]&&uy[t](e,t,r)||uo(e,t)||RP(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?vl(e,t,s,r)+r:s},c$=function(e,t,r,i){if(!r||r==="none"){var s=Eh(t,e,1),a=s&&uo(e,s,1);a&&a!==r?(t=s,r=a):t==="borderColor"&&(r=uo(e,"borderTopColor"))}var u=new ai(this._pt,e.style,t,0,1,t2),c=0,f=0,p,g,_,A,T,b,S,C,L,j,q,V;if(u.b=r,u.e=i,r+="",i+="",i==="auto"&&(b=e.style[t],e.style[t]=i,i=uo(e,t)||i,b?e.style[t]=b:Uu(e,t)),p=[r,i],$P(p),r=p[0],i=p[1],_=r.match(Kc)||[],V=i.match(Kc)||[],V.length){for(;g=Kc.exec(i);)S=g[0],L=i.substring(c,g.index),T?T=(T+1)%5:(L.substr(-5)==="rgba("||L.substr(-5)==="hsla(")&&(T=1),S!==(b=_[f++]||"")&&(A=parseFloat(b)||0,q=b.substr((A+"").length),S.charAt(1)==="="&&(S=nh(A,S)+q),C=parseFloat(S),j=S.substr((C+"").length),c=Kc.lastIndex-j.length,j||(j=j||Pi.units[t]||q,c===i.length&&(i+=j,u.e+=j)),q!==j&&(A=vl(e,t,b,j)||0),u._pt={_next:u._pt,p:L||f===1?L:",",s:A,c:C-A,m:T&&T<4||t==="zIndex"?Math.round:0});u.c=c<i.length?i.substring(c,i.length):""}else u.r=t==="display"&&i==="none"?s2:i2;return AP.test(i)&&(u.e=0),this._pt=u,u},Pk={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},h$=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=Pk[r]||r,t[1]=Pk[i]||i,t.join(" ")},f$=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,a=r._gsap,u,c,f;if(s==="all"||s===!0)i.cssText="",c=1;else for(s=s.split(","),f=s.length;--f>-1;)u=s[f],ia[u]&&(c=1,u=u==="transformOrigin"?li:rn),Uu(r,u);c&&(Uu(r,rn),a&&(a.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Wd(r,1),a.uncache=1,o2(i)))}},uy={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var a=e._pt=new ai(e._pt,t,r,0,0,f$);return a.u=i,a.pr=-10,a.tween=s,e._props.push(r),1}}},Kd=[1,0,0,1,0,0],h2={},f2=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Lk=function(e){var t=uo(e,rn);return f2(t)?Kd:t.substr(7).match(vP).map(vn)},oS=function(e,t){var r=e._gsap||bu(e),i=e.style,s=Lk(e),a,u,c,f;return r.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?Kd:s):(s===Kd&&!e.offsetParent&&e!==rh&&!r.svg&&(c=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,u=e.nextElementSibling,rh.appendChild(e)),s=Lk(e),c?i.display=c:Uu(e,"display"),f&&(u?a.insertBefore(e,u):a?a.appendChild(e):rh.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},QT=function(e,t,r,i,s,a){var u=e._gsap,c=s||oS(e,!0),f=u.xOrigin||0,p=u.yOrigin||0,g=u.xOffset||0,_=u.yOffset||0,A=c[0],T=c[1],b=c[2],S=c[3],C=c[4],L=c[5],j=t.split(" "),q=parseFloat(j[0])||0,V=parseFloat(j[1])||0,D,N,k,x;r?c!==Kd&&(N=A*S-T*b)&&(k=q*(S/N)+V*(-b/N)+(b*L-S*C)/N,x=q*(-T/N)+V*(A/N)-(A*L-T*C)/N,q=k,V=x):(D=u2(e),q=D.x+(~j[0].indexOf("%")?q/100*D.width:q),V=D.y+(~(j[1]||j[0]).indexOf("%")?V/100*D.height:V)),i||i!==!1&&u.smooth?(C=q-f,L=V-p,u.xOffset=g+(C*A+L*b)-C,u.yOffset=_+(C*T+L*S)-L):u.xOffset=u.yOffset=0,u.xOrigin=q,u.yOrigin=V,u.smooth=!!i,u.origin=t,u.originIsAbsolute=!!r,e.style[li]="0px 0px",a&&(Ka(a,u,"xOrigin",f,q),Ka(a,u,"yOrigin",p,V),Ka(a,u,"xOffset",g,u.xOffset),Ka(a,u,"yOffset",_,u.yOffset)),e.setAttribute("data-svg-origin",q+" "+V)},Wd=function(e,t){var r=e._gsap||new YP(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,a="px",u="deg",c=getComputedStyle(e),f=uo(e,li)||"0",p,g,_,A,T,b,S,C,L,j,q,V,D,N,k,x,z,U,B,P,Ee,be,Y,oe,Ae,je,H,ie,pe,ae,Re,Ce;return p=g=_=b=S=C=L=j=q=0,A=T=1,r.svg=!!(e.getCTM&&c2(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[rn]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[rn]!=="none"?c[rn]:"")),i.scale=i.rotate=i.translate="none"),N=oS(e,r.svg),r.svg&&(r.uncache?(Ae=e.getBBox(),f=r.xOrigin-Ae.x+"px "+(r.yOrigin-Ae.y)+"px",oe=""):oe=!t&&e.getAttribute("data-svg-origin"),QT(e,oe||f,!!oe||r.originIsAbsolute,r.smooth!==!1,N)),V=r.xOrigin||0,D=r.yOrigin||0,N!==Kd&&(U=N[0],B=N[1],P=N[2],Ee=N[3],p=be=N[4],g=Y=N[5],N.length===6?(A=Math.sqrt(U*U+B*B),T=Math.sqrt(Ee*Ee+P*P),b=U||B?Lc(B,U)*au:0,L=P||Ee?Lc(P,Ee)*au+b:0,L&&(T*=Math.abs(Math.cos(L*ih))),r.svg&&(p-=V-(V*U+D*P),g-=D-(V*B+D*Ee))):(Ce=N[6],ae=N[7],H=N[8],ie=N[9],pe=N[10],Re=N[11],p=N[12],g=N[13],_=N[14],k=Lc(Ce,pe),S=k*au,k&&(x=Math.cos(-k),z=Math.sin(-k),oe=be*x+H*z,Ae=Y*x+ie*z,je=Ce*x+pe*z,H=be*-z+H*x,ie=Y*-z+ie*x,pe=Ce*-z+pe*x,Re=ae*-z+Re*x,be=oe,Y=Ae,Ce=je),k=Lc(-P,pe),C=k*au,k&&(x=Math.cos(-k),z=Math.sin(-k),oe=U*x-H*z,Ae=B*x-ie*z,je=P*x-pe*z,Re=Ee*z+Re*x,U=oe,B=Ae,P=je),k=Lc(B,U),b=k*au,k&&(x=Math.cos(k),z=Math.sin(k),oe=U*x+B*z,Ae=be*x+Y*z,B=B*x-U*z,Y=Y*x-be*z,U=oe,be=Ae),S&&Math.abs(S)+Math.abs(b)>359.9&&(S=b=0,C=180-C),A=vn(Math.sqrt(U*U+B*B+P*P)),T=vn(Math.sqrt(Y*Y+Ce*Ce)),k=Lc(be,Y),L=Math.abs(k)>2e-4?k*au:0,q=Re?1/(Re<0?-Re:Re):0),r.svg&&(oe=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!f2(uo(e,rn)),oe&&e.setAttribute("transform",oe))),Math.abs(L)>90&&Math.abs(L)<270&&(s?(A*=-1,L+=b<=0?180:-180,b+=b<=0?180:-180):(T*=-1,L+=L<=0?180:-180)),t=t||r.uncache,r.x=p-((r.xPercent=p&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-p)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=g-((r.yPercent=g&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=_+a,r.scaleX=vn(A),r.scaleY=vn(T),r.rotation=vn(b)+u,r.rotationX=vn(S)+u,r.rotationY=vn(C)+u,r.skewX=L+u,r.skewY=j+u,r.transformPerspective=q+a,(r.zOrigin=parseFloat(f.split(" ")[2])||!t&&r.zOrigin||0)&&(i[li]=cy(f)),r.xOffset=r.yOffset=0,r.force3D=Pi.force3D,r.renderTransform=r.svg?p$:l2?d2:d$,r.uncache=0,r},cy=function(e){return(e=e.split(" "))[0]+" "+e[1]},TA=function(e,t,r){var i=Rr(t);return vn(parseFloat(t)+parseFloat(vl(e,"x",r+"px",i)))+i},d$=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,d2(e,t)},ru="0deg",$f="0px",iu=") ",d2=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.z,f=r.rotation,p=r.rotationY,g=r.rotationX,_=r.skewX,A=r.skewY,T=r.scaleX,b=r.scaleY,S=r.transformPerspective,C=r.force3D,L=r.target,j=r.zOrigin,q="",V=C==="auto"&&e&&e!==1||C===!0;if(j&&(g!==ru||p!==ru)){var D=parseFloat(p)*ih,N=Math.sin(D),k=Math.cos(D),x;D=parseFloat(g)*ih,x=Math.cos(D),a=TA(L,a,N*x*-j),u=TA(L,u,-Math.sin(D)*-j),c=TA(L,c,k*x*-j+j)}S!==$f&&(q+="perspective("+S+iu),(i||s)&&(q+="translate("+i+"%, "+s+"%) "),(V||a!==$f||u!==$f||c!==$f)&&(q+=c!==$f||V?"translate3d("+a+", "+u+", "+c+") ":"translate("+a+", "+u+iu),f!==ru&&(q+="rotate("+f+iu),p!==ru&&(q+="rotateY("+p+iu),g!==ru&&(q+="rotateX("+g+iu),(_!==ru||A!==ru)&&(q+="skew("+_+", "+A+iu),(T!==1||b!==1)&&(q+="scale("+T+", "+b+iu),L.style[rn]=q||"translate(0, 0)"},p$=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.rotation,f=r.skewX,p=r.skewY,g=r.scaleX,_=r.scaleY,A=r.target,T=r.xOrigin,b=r.yOrigin,S=r.xOffset,C=r.yOffset,L=r.forceCSS,j=parseFloat(a),q=parseFloat(u),V,D,N,k,x;c=parseFloat(c),f=parseFloat(f),p=parseFloat(p),p&&(p=parseFloat(p),f+=p,c+=p),c||f?(c*=ih,f*=ih,V=Math.cos(c)*g,D=Math.sin(c)*g,N=Math.sin(c-f)*-_,k=Math.cos(c-f)*_,f&&(p*=ih,x=Math.tan(f-p),x=Math.sqrt(1+x*x),N*=x,k*=x,p&&(x=Math.tan(p),x=Math.sqrt(1+x*x),V*=x,D*=x)),V=vn(V),D=vn(D),N=vn(N),k=vn(k)):(V=g,k=_,D=N=0),(j&&!~(a+"").indexOf("px")||q&&!~(u+"").indexOf("px"))&&(j=vl(A,"x",a,"px"),q=vl(A,"y",u,"px")),(T||b||S||C)&&(j=vn(j+T-(T*V+b*N)+S),q=vn(q+b-(T*D+b*k)+C)),(i||s)&&(x=A.getBBox(),j=vn(j+i/100*x.width),q=vn(q+s/100*x.height)),x="matrix("+V+","+D+","+N+","+k+","+j+","+q+")",A.setAttribute("transform",x),L&&(A.style[rn]=x)},m$=function(e,t,r,i,s){var a=360,u=Yn(s),c=parseFloat(s)*(u&&~s.indexOf("rad")?au:1),f=c-i,p=i+f+"deg",g,_;return u&&(g=s.split("_")[1],g==="short"&&(f%=a,f!==f%(a/2)&&(f+=f<0?a:-360)),g==="cw"&&f<0?f=(f+a*Ik)%a-~~(f/a)*a:g==="ccw"&&f>0&&(f=(f-a*Ik)%a-~~(f/a)*a)),e._pt=_=new ai(e._pt,t,r,i,f,J7),_.e=p,_.u="deg",e._props.push(r),_},Vk=function(e,t){for(var r in t)e[r]=t[r];return e},g$=function(e,t,r){var i=Vk({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,u,c,f,p,g,_,A,T;i.svg?(f=r.getAttribute("transform"),r.setAttribute("transform",""),a[rn]=t,u=Wd(r,1),Uu(r,rn),r.setAttribute("transform",f)):(f=getComputedStyle(r)[rn],a[rn]=t,u=Wd(r,1),a[rn]=f);for(c in ia)f=i[c],p=u[c],f!==p&&s.indexOf(c)<0&&(A=Rr(f),T=Rr(p),g=A!==T?vl(r,c,f,T):parseFloat(f),_=parseFloat(p),e._pt=new ai(e._pt,u,c,g,_-g,KT),e._pt.u=T||0,e._props.push(c));Vk(u,i)};oi("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",a=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(u){return e<2?n+u:"border"+u+n});uy[e>1?"border"+n:n]=function(u,c,f,p,g){var _,A;if(arguments.length<4)return _=a.map(function(T){return qo(u,T,f)}),A=_.join(" "),A.split(_[0]).length===5?_[0]:A;_=(p+"").split(" "),A={},a.forEach(function(T,b){return A[T]=_[b]=_[b]||_[(b-1)/2|0]}),u.init(c,A,g)}});var p2={name:"css",register:YT,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var a=this._props,u=e.style,c=r.vars.startAt,f,p,g,_,A,T,b,S,C,L,j,q,V,D,N,k;rS||YT(),this.styles=this.styles||a2(e),k=this.styles.props,this.tween=r;for(b in t)if(b!=="autoRound"&&(p=t[b],!(Ri[b]&&QP(b,t,r,i,e,s)))){if(A=typeof p,T=uy[b],A==="function"&&(p=p.call(r,i,e,s),A=typeof p),A==="string"&&~p.indexOf("random(")&&(p=qd(p)),T)T(this,e,b,p,r)&&(N=1);else if(b.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(b)+"").trim(),p+="",rl.lastIndex=0,rl.test(f)||(S=Rr(f),C=Rr(p)),C?S!==C&&(f=vl(e,b,f,C)+C):S&&(p+=S),this.add(u,"setProperty",f,p,i,s,0,0,b),a.push(b),k.push(b,0,u[b]);else if(A!=="undefined"){if(c&&b in c?(f=typeof c[b]=="function"?c[b].call(r,i,e,s):c[b],Yn(f)&&~f.indexOf("random(")&&(f=qd(f)),Rr(f+"")||f==="auto"||(f+=Pi.units[b]||Rr(qo(e,b))||""),(f+"").charAt(1)==="="&&(f=qo(e,b))):f=qo(e,b),_=parseFloat(f),L=A==="string"&&p.charAt(1)==="="&&p.substr(0,2),L&&(p=p.substr(2)),g=parseFloat(p),b in to&&(b==="autoAlpha"&&(_===1&&qo(e,"visibility")==="hidden"&&g&&(_=0),k.push("visibility",0,u.visibility),Ka(this,u,"visibility",_?"inherit":"hidden",g?"inherit":"hidden",!g)),b!=="scale"&&b!=="transform"&&(b=to[b],~b.indexOf(",")&&(b=b.split(",")[0]))),j=b in ia,j){if(this.styles.save(b),q||(V=e._gsap,V.renderTransform&&!t.parseTransform||Wd(e,t.parseTransform),D=t.smoothOrigin!==!1&&V.smooth,q=this._pt=new ai(this._pt,u,rn,0,1,V.renderTransform,V,0,-1),q.dep=1),b==="scale")this._pt=new ai(this._pt,V,"scaleY",V.scaleY,(L?nh(V.scaleY,L+g):g)-V.scaleY||0,KT),this._pt.u=0,a.push("scaleY",b),b+="X";else if(b==="transformOrigin"){k.push(li,0,u[li]),p=h$(p),V.svg?QT(e,p,0,D,0,this):(C=parseFloat(p.split(" ")[2])||0,C!==V.zOrigin&&Ka(this,V,"zOrigin",V.zOrigin,C),Ka(this,u,b,cy(f),cy(p)));continue}else if(b==="svgOrigin"){QT(e,p,1,D,0,this);continue}else if(b in h2){m$(this,V,b,_,L?nh(_,L+p):p);continue}else if(b==="smoothOrigin"){Ka(this,V,"smooth",V.smooth,p);continue}else if(b==="force3D"){V[b]=p;continue}else if(b==="transform"){g$(this,p,e);continue}}else b in u||(b=Eh(b)||b);if(j||(g||g===0)&&(_||_===0)&&!X7.test(p)&&b in u)S=(f+"").substr((_+"").length),g||(g=0),C=Rr(p)||(b in Pi.units?Pi.units[b]:S),S!==C&&(_=vl(e,b,f,C)),this._pt=new ai(this._pt,j?V:u,b,_,(L?nh(_,L+g):g)-_,!j&&(C==="px"||b==="zIndex")&&t.autoRound!==!1?e$:KT),this._pt.u=C||0,S!==C&&C!=="%"&&(this._pt.b=f,this._pt.r=Z7);else if(b in u)c$.call(this,e,b,f,L?L+p:p);else if(b in e)this.add(e,b,f||e[b],L?L+p:p,i,s);else if(b!=="parseTransform"){Wb(b,p);continue}j||(b in u?k.push(b,0,u[b]):typeof e[b]=="function"?k.push(b,2,e[b]()):k.push(b,1,f||e[b])),a.push(b)}}N&&n2(this)},render:function(e,t){if(t.tween._time||!iS())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:qo,aliases:to,getSetter:function(e,t,r){var i=to[t];return i&&i.indexOf(",")<0&&(t=i),t in ia&&t!==li&&(e._gsap.x||qo(e,"x"))?r&&kk===r?t==="scale"?i$:r$:(kk=r||{})&&(t==="scale"?s$:o$):e.style&&!$b(e.style[t])?t$:~t.indexOf("-")?n$:tS(e,t)},core:{_removeProperty:Uu,_getMatrix:oS}};ci.utils.checkPrefix=Eh;ci.core.getStyleSaver=a2;(function(n,e,t,r){var i=oi(n+","+e+","+t,function(s){ia[s]=1});oi(e,function(s){Pi.units[s]="deg",h2[s]=1}),to[i[13]]=n+","+e,oi(r,function(s){var a=s.split(":");to[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");oi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Pi.units[n]="px"});ci.registerPlugin(p2);var bg=ci.registerPlugin(p2)||ci;bg.core.Tween;function y$(n){let t=window.scrollY||window.pageYOffset,r=n.getBoundingClientRect().top+t,i=performance.now();function s(u){const c=(u-i)/800;c<1?(window.scrollTo(0,t+(r-t)*a(c)),requestAnimationFrame(s)):window.scrollTo(0,r)}function a(u){return u<.5?4*u*u*u:(u-1)*(2*u-2)*(2*u-2)+1}requestAnimationFrame(s)}function bh(n){const e=document.querySelector(n);e&&y$(e)}function _$(){const[n,e]=K.useState(null),[t,r]=K.useState(window.innerWidth),[i,s]=K.useState(null),[a,u]=K.useState(null),c=El(),[f,p]=K.useState(""),[g,_]=K.useState([]),[A,T]=K.useState([]),b=[{linkName:"Home",link:"/"},{linkName:"About",link:"/about"},{linkName:"Blogs",link:"/blogs"},{linkName:"Contact",link:"#footer"}],S=K.useCallback(V=>{e(V)},[]),C=K.useCallback(()=>{e(null)},[]);K.useEffect(()=>{const V=()=>r(window.innerWidth);return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),K.useEffect(()=>{(async()=>{try{const N=(await YM(fb(Yu,"blogs"))).docs.map(k=>({id:k.id,...k.data()}));_(N)}catch(D){console.error("Error fetching blogs:",D)}})()},[]);const L=()=>{console.log("searching");const V=f.trim().toLowerCase();if(!V){console.log("nothing"),T([]);return}const D=V[0],N=new Set;g.forEach(x=>{Array.isArray(x.categories)&&x.categories.forEach(z=>{z.toLowerCase().includes(V)&&N.add(z.toLowerCase())})});const k=g.filter(x=>{var P,Ee;const z=((P=x.title)==null?void 0:P.toLowerCase())||"",U=((Ee=x.subtitle)==null?void 0:Ee.toLowerCase())||"",B=Array.isArray(x.categories)?x.categories.map(be=>be.toLowerCase()):[];return z.includes(V)||U.includes(V)||z[0]===D||B.some(be=>be.includes(V))||B.some(be=>N.has(be))});T(k)};K.useEffect(()=>{n!==null&&bg.from(".active",{scaleX:0,transformOrigin:"50% 50%",ease:"power4.out",duration:.8})},[n]);function j(){i?i&&(u(!1),bg.to(".navbar-phone-dropdown-container",{x:"-100%",duration:1.2,ease:"power4.in",onComplete:()=>{s(!1)}})):(s(!0),u(!0))}function q(V){i?V==="#footer"?(j(),setTimeout(()=>{bh(V)},1300)):(c(V),j()):V==="#footer"?bh(V):c(V)}return console.log("filtered",A),console.log("all",g),K.useEffect(()=>{i?(bg.from(".navbar-phone-dropdown-container",{transform:"translateX(-100%)",duration:1.2,ease:"power3.inOut"}),document.body.classList.add("no-scroll")):document.body.classList.remove("no-scroll")},[i]),I.jsx("nav",{id:"nav",className:"nav-main-container charcoal-bg",children:t<=700?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"logo-ham-container",children:[I.jsx("div",{className:"logo",children:I.jsx("img",{src:ry,onClick:()=>{c("/"),e(0)}})}),I.jsx("div",{className:"nav-hamburger-container ",onClick:()=>j(),children:I.jsx(n7,{isOpened:a})})]}),I.jsxs("div",{className:"quick-search-container",children:[I.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search...",value:f,onChange:V=>p(V.target.value)}),I.jsx("button",{onClick:()=>{console.log("Search button clicked!"),L()},className:"arrow-button green-bg",style:{zIndex:"9"},children:I.jsx("img",{src:Ak})}),A.length>0&&I.jsx("div",{className:"search-results-container",children:A.map(V=>I.jsxs("div",{className:"search-result",onClick:()=>{c(`/singleBlog/${V.id}`),p(""),T([])},children:[V.title," ",V.part&&`Part ${V.part}`]},V.id))})]}),i&&I.jsx("div",{className:"navbar-phone-dropdown-container dark-silver-bg",children:I.jsx("div",{className:"dropdown-links-container",children:b.map((V,D)=>I.jsx("div",{children:I.jsxs("h3",{className:"outfit-font dropdown-link-name ",onClick:()=>{S(D),q(V.link)},children:[V.linkName,n===D&&I.jsx("div",{className:"active"})]})},V.linkName))})})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"quick-search-container",children:[I.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search...",value:f,onChange:V=>p(V.target.value)}),I.jsx("button",{onClick:()=>{console.log("Search button clicked!"),L()},className:"arrow-button green-bg",style:{zIndex:"9"},children:I.jsx("img",{src:Ak})}),A.length>0&&I.jsx("div",{className:"search-results-container",children:A.map(V=>I.jsxs("div",{className:"search-result",onClick:()=>{c(`/singleBlog/${V.id}`),p(""),T([])},children:[V.title," ",V.part&&`Part ${V.part}`]},V.id))})]}),I.jsxs("div",{className:"logo-links",children:[I.jsx("img",{src:ry,onClick:()=>{c("/"),e(0)}}),I.jsx("div",{className:"links",children:b.map((V,D)=>I.jsxs("div",{onMouseEnter:()=>S(D),onMouseLeave:C,onClick:()=>q(V.link),className:"link-container",children:[I.jsx("h1",{className:"outfit-font",children:V.linkName}),n===D&&I.jsx("div",{className:"active"})]},V.linkName))})]}),I.jsxs("div",{className:"socials ",children:[I.jsx("img",{src:MT}),I.jsx("img",{src:DT}),I.jsx("img",{src:PT})]})]})})}const Uk="/assets/import-CjaYub2X.png",v$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHvUExURf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGbS3AIAAACkdFJOUwABAgMEBQcICQoLDQ4PExQXGRocHR8gISIjJScoKSssLS4vMDIzNDU2Nzo7PT4/QUJDREVGR0hJSktMTU5PUVRVW11fYWJkZWZnaGxxc3Z3eXp7fX6BhYeIiYqOj5CTlZaam52foKSlpqeoq6yusLKztLa4ur6/wMHCxMXHyMrLzM3Oz9DS1NXX2dvc3t/g4+Tm6Ort7u/w8fLz9PX4+fr7/P3+smXS9wAAAAlwSFlzAAAPrwAAD68B1qQibQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGHaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyI+PHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj48dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L3g6eG1wbWV0YT4NCjw/eHBhY2tldCBlbmQ9J3cnPz4slJgLAAAJtElEQVR4Xu3d+7cVZQHH4UHULpbSxUyzzBQts+gGpWmmlqVWVohpJd66qSiammZ4K01NyDTRvIQU/aEtLuI5L+ecvffMe515nh/fmT2zXJ/vWgdwsek6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoDEbLr1m2207n3jxxSd23rbtmks3hNcZsXUbr3/8wP+WOfD49RvXhfcxSltuf2l5/He8dPuW8F5GZ9NjYfelHtsU3s+onPdgmDz04HnhZxiNM3eEuVey48zwc4zDVfvC1ivbd1X4SUbg+O1h6NVtPz78NK07+aGw8loeOjn8PG07a3fYeG27zwqfQMsueiMsPMsbF4XPoF2XzPnLv6X2XRI+hVb16W8B49GvvwWMRd/+FjAO/ftbwBgM6W8B7RvW3wJaN7S/BbRteH8LaFmM/hbQrjj9LaBVsfpbQJvi9beAFsXsbwHtidvfAloTu78FtCV+fwtoSYr+FtCONP0toBWp+ltAG9L1t4AWpOxvAfVL298Cape6vwXULX1/C6hZjv4WUK88/S2gVrn6W0Cd8vW3gBrl7G8B9cnb3wJqk7u/BdQlf38LqEmJ/hZQjzL9LaAWpfpbQB3K9beAGpTsbwHlle1vAaWV7m8BZZXvbwEl1dDfAsqpo78FlFJLfwsoo57+FlBCTf0tIL+6+ltAbrX1t4C86utvATnV2N8C8qmzvwXkUmt/C8ij3v4WkEPN/S0gvbr7W0Bqtfe3gLTq728BKbXQ3wLSaaO/BaTSSn8LSKOd/haQQkv9LSC+tvpbQGyt9beAuNrrbwExtdjfAuJps78FxNJqfwuIo93+FhBDy/0tYLi2+1vAUK33t4Bh2u9vAUOMob8F9DeO/hbQV5b+e/eGJwlYQB95+p97rgXUKVP/rrOAKmXrbwFVytjfAiqUtb8FVCdzfwuoTPb+FlCVAv0toCJF+ltANQr1t4BKFOtvAVUo2N8CKlC0vwUUV7i/BRRWvL8FFFVBfwsoqIr+FlBMJf0toJBq+ltAERX1t4ACqupvAdlV1t8CMquuvwVkVWF/C8ioyv4WkE2l/S0gk2r7W0AWFfe3gAyq7m8ByVXe3wISq76/BSTVQH8LSKiJ/haQTCP9LSCRZvpbQBIN9beABJrqbwHRNdbfAiJrrr8FRJWn/8bwtcNYQDRN9reAaBrtbwGRNNvfAqJouL8FRNB0fwsYrPH+FjBQ8/0tYJAR9LeAAUbR3wJ6G0l/C+hpNP0toJcR9beAHkbV3wIWNrL+FrCg0fW3gIWMsL8FLGCU/S1gbiPtbwFzGm1/C5jLiPtbwBxG3d8CZhp5fwuYYfT9LWBNE+hvAWuYRH8LWFWW/q8W728Bq5hMfwtY0YT6W8AKJtXfAo4xsf4WEJhcfwtYZoL9LWCJSfa3gKMm2t8Cjphsfws4ZML9LWDq/S0gU//zwtfWY+ILmHz/iS9A/2kvQP9DJrsA/Y+Y6AL0P2qSC9B/iQkuQP9lJrcA/QMTW4D+x5jUAvRfwYQWoP+KJrMA/VcxkQXov6pJLED/NUxgAfqvafQL0H+GkS9A/5lGvQD95zDiBeg/l9EuQP85jXQB+s9tlAvQfwEjXID+CxndAvRf0MgWoP/CRrUA/XsY0QL072U0C9C/p5EsQP/eRrEA/QcYwQL0H6T5Beg/UOML0H+wphegfwQNL0D/KJpdgP6RNLoA/aNpcgF5+p8fvnacGlyA/lE1twD9I2tsAfpH19QC9E+goQXon0QzC9A/kUYWoH8yTSxA/4QaWID+SVW/AP0Tq3wB+idX9QL0z6DiBeifRbUL0D+TShegfzZVLkD/jCpcgP5ZVbeALP1f0/+oyhagf3ZVLUD/AipagP5FVLMA/QupZAH6F1PFAvQvqIIF6F9U8QXoX1jhBehfXNEFXKx/eXkWcHH42oPOfjO8LwH9Z8mygDfPDl/bdafsCe9KQP/Zsixgzynha094OLwnAf3nkWUBD58QvPXW8I4E9J9PlgXcuvydV4fXE9B/XlkWcPXSN579dng5Pv3nl2MBby/9heB94dX49F9EjgXc/+7rLgivxaf/YnIs4PNH35b+dwD6LyrDAv74zru+Fl6J7rXPLv+vY7YMC/j6kVc9GV6ITf8+0i/gz+sOveiS8Dw2/ftJv4BvHXrPb8LjyPTvK/kCfnfwLetfCY/j0r+/1AvYu77rugvD07j0HyL1Ar7Qdd1N4WFU+g+TeAE/77ru2fAwJv2HSruAZ7vutPAsJv2HS7uA07orwqOI9I8h6QKu6K4Lj+LRP46UC7iuuzk8ikb/WBIu4OburvAoFv3jSbeAu7pHwqNI9I8p2QIe6Z4Pj+LQP65UC3i+ez08ikL/2BIt4PXurfAoBv3jS7OAt7oXwqMI9E8hyQJe6B4Nj4bTP40UC3i02xEeDaZ/KgkWcHe3PTwaSv904i9ge/fT8Ggg/VOKvoCfdN8Nj4bRP63YC/hO9+nwaBD9U4u8gE913d/DswH0Ty/qAvZ0XXdLeNif/jnEXMD2ruu2hIe96Z9HxAVs7rruPbG+G0j/XKIt4M0TDz7u3vC4H/3zibWAew897crwuBf9c4q0gCsPPeyEGP8/SP+8oizghSPfFHV5eGFx+ucWYwGXH3nWcc+EVxalf37DF/DMce88a+hfENe/hMELWPKVwbvCawvRv4yBC9i15FGbwouL0L+UYQvYtPRRN4ZX56d/OUMW8LNlTzru/vD6vF773LIHkVX/Bdx39FeAh33gufCO+ehfVt8FPHtS+KQzXg3vmYf+pfVbwCunh8/pus3/Ce+aTf/y+ixg/5fCpxz0/YUX8LLv/6zAOf8Iu8zy9uH/B3CMryy4pac+Gj6BEj604B/j/PPgV0Ot6PSFvi/ozveGn6eME38dtlnL06eGn3/XSTvDu1f13x+HH6acH8z/4/vu94UfXmrdDeH9q/jXiv/yGKV8dc4f3we2Hv5+4NVdMM93x++//SPh5yhrw/Z5/tnHBzaGn1vB5lnfHn7gzjPCz1Deqb+a9XPgT18MP7OydZet+ceC938m/AB1+OSaf9P36YvC+1e3/tu/XeUrpP/2S3/2U7FzbvxrWOywl+/45qwf/oH1F94U/qZw/0M//ER4G7X52LUP/DsI99S28xesf8THL7v2hjt+/5eX9uy659at3/vGB8Pr1On9X77iR7+48w/P7d51zy1br7r4w+F1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGIf/AziVKmKNHw2DAAAAAElFTkSuQmCC";function zk(){return I.jsx("button",{className:"to-top-button green-bg",children:I.jsx("img",{src:v$})})}function il({text:n,fontSize:e,margin:t,onClick:r}){return I.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:e||"clamp(1.8rem, 1.9vw, 2rem)",margin:t},onClick:r,children:n})}function A$(){const[n,e]=K.useState(window.innerWidth),t=El();return K.useEffect(()=>{const r=()=>e(window.innerWidth);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),I.jsx("section",{id:"footer",className:"footer-main-container",children:n<800?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"footer-logo-signup",children:I.jsx("img",{src:ry})}),I.jsxs("div",{className:"footer-contact",children:[I.jsx("h1",{className:"outfit-font",children:"Contacts:"}),I.jsxs("div",{className:"footer-icons",children:[I.jsx("img",{src:PT}),I.jsx("img",{src:MT}),I.jsx("img",{src:DT})]})]}),I.jsx("div",{className:"footer-blerb",children:I.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),I.jsxs("div",{className:"footer-newsletter",children:[I.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),I.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),I.jsx(il,{text:"Submit",fontSize:"1.3rem"})]}),I.jsx("div",{className:"to-top-button",onClick:()=>bh("#nav"),children:I.jsx(zk,{})}),I.jsx("a",{href:"#nav",children:I.jsx("img",{src:Uk,className:"login-button",onClick:()=>{t("/login")}})})]}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"footer-blerb",children:I.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),I.jsxs("div",{className:"footer-logo-signup",children:[I.jsx("img",{src:ry}),I.jsxs("div",{className:"footer-newsletter",children:[I.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),I.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),I.jsx(il,{text:"Submit"})]})]}),I.jsxs("div",{className:"footer-contact",children:[I.jsx("h1",{className:"outfit-font",children:"Contacts:"}),I.jsxs("div",{className:"footer-icons",children:[I.jsx("img",{src:PT}),I.jsx("img",{src:MT}),I.jsx("img",{src:DT})]})]}),I.jsx("div",{className:"to-top-button",onClick:()=>bh("#nav"),children:I.jsx(zk,{})}),I.jsx("a",{href:"#nav",children:I.jsx("img",{src:Uk,className:"login-button",onClick:()=>{t("/login")}})})]})})}const T$=["Monday Devotional","Thursday Lessons","Tuesday Article","Uncategorized","Wednesday Inspiration","Thoughts","Taxes","Experiences"];function E$(){const n=e=>e.length>10?"size-c":e.length>=6?"size-b":"size-a";return I.jsxs("section",{className:"common-cat-container green-bg",children:[I.jsx("h1",{className:"outfit-font",children:"Common Categories:"}),I.jsx("div",{className:"category-bento-container",children:T$.map((e,t)=>I.jsx("h3",{className:`category silver-bg outfit-font ${n(e)}`,children:e},t))})]})}function vp(){return I.jsx("div",{className:"loader-container ",children:I.jsxs("div",{className:"typewriter",children:[I.jsx("div",{className:"slide",children:I.jsx("i",{})}),I.jsx("div",{className:"paper"}),I.jsx("div",{className:"keyboard"})]})})}function b$(){const{state:n}=FO();return I.jsxs("div",{className:"main-container",children:[I.jsx(_$,{}),n==="loading"?I.jsx(vp,{}):I.jsx("div",{children:I.jsx(wz,{})}),I.jsx(E$,{}),I.jsx(A$,{})]})}function S$(){const{state:n}=FO();return I.jsx("div",{className:"main-container",children:n==="loading"?"loading...":I.jsx("h1",{children:"Error"})})}const aS=ty(),w$=fb(Yu,"blogs"),R$=async()=>(await YM(w$)).docs.map(e=>({id:e.id,...e.data()})),Sg=async n=>{const e=dp(Yu,"blogs",n),t=await e9(e);if(!t.exists())throw new Error("Blog not found");return{id:t.id,...t.data()}},C$=async n=>{if(!aS.currentUser)throw new Error("User not authenticated");return(await t9(fb(Yu,"blogs"),{...n,likes:[],comments:[],datePosted:r9()})).id},x$=async n=>{const e=aS.currentUser;if(!e)throw new Error("Not authenticated");const t=dp(Yu,"blogs",n);return await Tb(t,{likes:XM(e.uid)}),{success:!0}},k$=async n=>{const e=aS.currentUser;if(!e)throw new Error("Not authenticated");const t=dp(Yu,"blogs",n);return await Tb(t,{likes:i9(e.uid)}),{success:!0}},I$=async(n,e,t)=>{const r=dp(Yu,"blogs",n),i={name:t,comment:e,date:On.now()};return await Tb(r,{comments:XM(i)}),{success:!0}};function m2(){return I.jsxs("div",{className:"loader",children:[I.jsx("div",{className:"bar1"}),I.jsx("div",{className:"bar2"}),I.jsx("div",{className:"bar3"}),I.jsx("div",{className:"bar4"}),I.jsx("div",{className:"bar5"}),I.jsx("div",{className:"bar6"}),I.jsx("div",{className:"bar7"}),I.jsx("div",{className:"bar8"}),I.jsx("div",{className:"bar9"}),I.jsx("div",{className:"bar10"}),I.jsx("div",{className:"bar11"}),I.jsx("div",{className:"bar12"})]})}const g2="/assets/Artc1-CST6bCyG.png";function hy({isVertical:n=!1,title:e,height:t,marginBottom:r,trending:i=!1,maxCount:s}){const[a,u]=K.useState([]),[c,f]=K.useState(!0),p=K.useRef(null),g=El(),_=s??4;return K.useEffect(()=>{(async()=>{try{f(!0);const T=await R$(),b=T.some(C=>typeof C.likes=="number");let S;i&&b?S=[...T].sort((C,L)=>(L.likes||0)-(C.likes||0)):S=[...T].sort((C,L)=>{var V,D,N,k;const j=((D=(V=C.datePosted)==null?void 0:V.toDate)==null?void 0:D.call(V))||new Date(0);return(((k=(N=L.datePosted)==null?void 0:N.toDate)==null?void 0:k.call(N))||new Date(0))-j}),u(S)}catch(T){console.error("Failed to fetch blogs:",T)}finally{f(!1)}})()},[i]),I.jsxs("section",{className:"display-column",children:[I.jsxs("div",{className:"title-container",children:[I.jsx("h1",{className:"outfit-font",children:e}),I.jsx("div",{className:"line-blog"})]}),I.jsx("div",{ref:p,className:`blog-column-container ${n?"vertical":"horizontal"}`,children:c?I.jsx(m2,{}):a.slice(0,_).map((A,T)=>{var b;return I.jsxs("div",{className:"blog-info-container",style:{marginBottom:r},onClick:()=>{g(`/singleBlog/${A.id}`),bh("#nav")},children:[I.jsx("img",{src:A.imgUrl||g2,alt:A.title||"Blog image",style:{height:t}}),I.jsx("p",{className:"playfair-thin-font",children:((b=A.categories)==null?void 0:b[0])||"Uncategorized"}),I.jsxs("h3",{children:[A.title||"Untitled"," ",A.part?`Part ${A.part}`:""]}),I.jsx("p",{className:"playfair-thin-font silver-text",children:A.author||"Unknown Author"})]},A.id||T)})})]})}const O$="/assets/MDRLogoCup-BgPHFgxi.png",N$="/assets/MDRHeroBgPhone-CqPQrG5g.png";function M$(){const[n,e]=K.useState(window.innerWidth);return K.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),I.jsx("section",{className:"hero-main-container",children:n<=600?I.jsxs(I.Fragment,{children:[I.jsx("img",{src:N$}),I.jsx("h1",{className:"playfair-font green-text",children:"My"}),I.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),I.jsx("h1",{className:"playfair-font green-text",children:"Reed"}),I.jsx(il,{text:"See Blogs"})]}):I.jsxs(I.Fragment,{children:[I.jsx("img",{src:O$})," ",I.jsx("h1",{className:"playfair-font green-text",children:"My"}),I.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),I.jsx("h1",{style:{marginBottom:"10px"},className:"playfair-font green-text",children:"Reed"}),I.jsx(il,{text:"See Blogs"})]})})}function D$(){return I.jsxs("div",{className:"display-column",children:[I.jsx(M$,{}),I.jsxs("div",{style:{padding:"0px 20px"},className:"display-column ",children:[I.jsx(hy,{title:"Latest",isVertical:!1,marginBottom:"40px"}),I.jsx(hy,{title:"Trending",isVertical:!1,marginBottom:"40px",trending:!0})]})]})}const P$={element:D$()};function XT({author:n}){const e=K.useRef(null),[t,r]=K.useState(0),i=sa();return K.useEffect(()=>{const s=()=>{e.current&&r(e.current.offsetHeight)};return setTimeout(()=>{s()},[500]),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[i]),console.log("height",t),I.jsxs("div",{ref:e,className:"sidebar-main-container silver-bg",children:[I.jsx(hy,{title:"Latest",maxCount:3}),I.jsx(hy,{title:"Trending",maxCount:2})]})}function L$(){return I.jsxs("section",{className:"about-info-main-section",children:[I.jsxs("div",{className:"about-info",children:[I.jsx("h3",{className:"outfit-thin-font",children:"My Daily Reed. When you read and respond, in any way, it’s an inexplicable connection. PLEASE share your thoughts. The space between a writer and the reader is sacred. Because there are only so many heartbeats and pen strokes we can share in this life. What we share should be thought-provoking, meaningful, and dare I say. FUN!"}),I.jsxs("ul",{className:"playfair-font",children:[I.jsx("li",{children:"Monday-Devotion"}),I.jsx("li",{children:"Tuesday-Article"}),I.jsx("li",{children:"Wednesday-Inspiration/Insight"}),I.jsx("li",{children:"Thursday-Lessons from a Grocery Store"}),I.jsx("li",{children:"Friday-Your Turn"})]})]}),I.jsx(XT,{author:"My Daily Reed"})]})}const V$="/assets/MDRAboutTree-JE1PMwgt.png";function U$(){return I.jsxs("section",{className:"about-title-main-container charcoal-bg",children:[I.jsx("h1",{className:"playfair-font ",children:"My Daily Reed"}),I.jsx("img",{src:V$}),I.jsx("h1",{className:"playfair-font",children:"About"})]})}function z$(){return I.jsxs("div",{className:"display-column",children:[I.jsx(U$,{}),I.jsx(L$,{})]})}const B$={element:z$()};/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:y2,setPrototypeOf:Bk,isFrozen:j$,getPrototypeOf:F$,getOwnPropertyDescriptor:H$}=Object;let{freeze:Fr,seal:ds,create:_2}=Object,{apply:JT,construct:ZT}=typeof Reflect<"u"&&Reflect;Fr||(Fr=function(e){return e});ds||(ds=function(e){return e});JT||(JT=function(e,t,r){return e.apply(t,r)});ZT||(ZT=function(e,t){return new e(...t)});const Ym=Hr(Array.prototype.forEach),q$=Hr(Array.prototype.lastIndexOf),jk=Hr(Array.prototype.pop),Gf=Hr(Array.prototype.push),$$=Hr(Array.prototype.splice),wg=Hr(String.prototype.toLowerCase),EA=Hr(String.prototype.toString),Fk=Hr(String.prototype.match),Kf=Hr(String.prototype.replace),G$=Hr(String.prototype.indexOf),K$=Hr(String.prototype.trim),Es=Hr(Object.prototype.hasOwnProperty),Br=Hr(RegExp.prototype.test),Wf=W$(TypeError);function Hr(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return JT(n,e,r)}}function W$(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ZT(n,t)}}function mt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wg;Bk&&Bk(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(j$(e)||(e[r]=s),i=s)}n[i]=!0}return n}function Y$(n){for(let e=0;e<n.length;e++)Es(n,e)||(n[e]=null);return n}function lu(n){const e=_2(null);for(const[t,r]of y2(n))Es(n,t)&&(Array.isArray(r)?e[t]=Y$(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=lu(r):e[t]=r);return e}function Yf(n,e){for(;n!==null;){const r=H$(n,e);if(r){if(r.get)return Hr(r.get);if(typeof r.value=="function")return Hr(r.value)}n=F$(n)}function t(){return null}return t}const Hk=Fr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),bA=Fr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),SA=Fr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Q$=Fr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wA=Fr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),X$=Fr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),qk=Fr(["#text"]),$k=Fr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),RA=Fr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Gk=Fr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qm=Fr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),J$=ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Z$=ds(/<%[\w\W]*|[\w\W]*%>/gm),eG=ds(/\$\{[\w\W]*/gm),tG=ds(/^data-[\-\w.\u00B7-\uFFFF]+$/),nG=ds(/^aria-[\-\w]+$/),v2=ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),rG=ds(/^(?:\w+script|data):/i),iG=ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),A2=ds(/^html$/i),sG=ds(/^[a-z][.\w]*(-[.\w]+)+$/i);var Kk=Object.freeze({__proto__:null,ARIA_ATTR:nG,ATTR_WHITESPACE:iG,CUSTOM_ELEMENT:sG,DATA_ATTR:tG,DOCTYPE_NAME:A2,ERB_EXPR:Z$,IS_ALLOWED_URI:v2,IS_SCRIPT_OR_DATA:rG,MUSTACHE_EXPR:J$,TMPLIT_EXPR:eG});const Qf={element:1,text:3,progressingInstruction:7,comment:8,document:9},oG=function(){return typeof window>"u"?null:window},aG=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Wk=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function T2(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oG();const e=_e=>T2(_e);if(e.version="3.2.5",e.removed=[],!n||!n.document||n.document.nodeType!==Qf.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:u,Element:c,NodeFilter:f,NamedNodeMap:p=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:_,trustedTypes:A}=n,T=c.prototype,b=Yf(T,"cloneNode"),S=Yf(T,"remove"),C=Yf(T,"nextSibling"),L=Yf(T,"childNodes"),j=Yf(T,"parentNode");if(typeof a=="function"){const _e=t.createElement("template");_e.content&&_e.content.ownerDocument&&(t=_e.content.ownerDocument)}let q,V="";const{implementation:D,createNodeIterator:N,createDocumentFragment:k,getElementsByTagName:x}=t,{importNode:z}=r;let U=Wk();e.isSupported=typeof y2=="function"&&typeof j=="function"&&D&&D.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:P,TMPLIT_EXPR:Ee,DATA_ATTR:be,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:Ae,CUSTOM_ELEMENT:je}=Kk;let{IS_ALLOWED_URI:H}=Kk,ie=null;const pe=mt({},[...Hk,...bA,...SA,...wA,...qk]);let ae=null;const Re=mt({},[...$k,...RA,...Gk,...Qm]);let Ce=Object.seal(_2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ve=null,Kt=null,Rt=!0,mr=!0,Ut=!1,Nn=!0,Zn=!1,di=!0,Xt=!1,gs=!1,ks=!1,on=!1,Is=!1,zi=!1,ys=!0,Bi=!1;const pi="user-content-";let gr=!0,Kr=!1,Mr={},ut=null;const et=mt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Mn=null;const Jt=mt({},["audio","video","img","source","image","track"]);let Os=null;const Dr=mt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pr="http://www.w3.org/1998/Math/MathML",Lr="http://www.w3.org/2000/svg",Tn="http://www.w3.org/1999/xhtml";let En=Tn,mi=!1,yr=null;const Ns=mt({},[Pr,Lr,Tn],EA);let Wr=mt({},["mi","mo","mn","ms","mtext"]),ji=mt({},["annotation-xml"]);const Yr=mt({},["title","style","font","a","script"]);let er=null;const Ms=["application/xhtml+xml","text/html"],tr="text/html";let Ot=null,nr=null;const Ds=t.createElement("form"),$=function(G){return G instanceof RegExp||G instanceof Function},X=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(nr&&nr===G)){if((!G||typeof G!="object")&&(G={}),G=lu(G),er=Ms.indexOf(G.PARSER_MEDIA_TYPE)===-1?tr:G.PARSER_MEDIA_TYPE,Ot=er==="application/xhtml+xml"?EA:wg,ie=Es(G,"ALLOWED_TAGS")?mt({},G.ALLOWED_TAGS,Ot):pe,ae=Es(G,"ALLOWED_ATTR")?mt({},G.ALLOWED_ATTR,Ot):Re,yr=Es(G,"ALLOWED_NAMESPACES")?mt({},G.ALLOWED_NAMESPACES,EA):Ns,Os=Es(G,"ADD_URI_SAFE_ATTR")?mt(lu(Dr),G.ADD_URI_SAFE_ATTR,Ot):Dr,Mn=Es(G,"ADD_DATA_URI_TAGS")?mt(lu(Jt),G.ADD_DATA_URI_TAGS,Ot):Jt,ut=Es(G,"FORBID_CONTENTS")?mt({},G.FORBID_CONTENTS,Ot):et,Ve=Es(G,"FORBID_TAGS")?mt({},G.FORBID_TAGS,Ot):{},Kt=Es(G,"FORBID_ATTR")?mt({},G.FORBID_ATTR,Ot):{},Mr=Es(G,"USE_PROFILES")?G.USE_PROFILES:!1,Rt=G.ALLOW_ARIA_ATTR!==!1,mr=G.ALLOW_DATA_ATTR!==!1,Ut=G.ALLOW_UNKNOWN_PROTOCOLS||!1,Nn=G.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Zn=G.SAFE_FOR_TEMPLATES||!1,di=G.SAFE_FOR_XML!==!1,Xt=G.WHOLE_DOCUMENT||!1,on=G.RETURN_DOM||!1,Is=G.RETURN_DOM_FRAGMENT||!1,zi=G.RETURN_TRUSTED_TYPE||!1,ks=G.FORCE_BODY||!1,ys=G.SANITIZE_DOM!==!1,Bi=G.SANITIZE_NAMED_PROPS||!1,gr=G.KEEP_CONTENT!==!1,Kr=G.IN_PLACE||!1,H=G.ALLOWED_URI_REGEXP||v2,En=G.NAMESPACE||Tn,Wr=G.MATHML_TEXT_INTEGRATION_POINTS||Wr,ji=G.HTML_INTEGRATION_POINTS||ji,Ce=G.CUSTOM_ELEMENT_HANDLING||{},G.CUSTOM_ELEMENT_HANDLING&&$(G.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ce.tagNameCheck=G.CUSTOM_ELEMENT_HANDLING.tagNameCheck),G.CUSTOM_ELEMENT_HANDLING&&$(G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ce.attributeNameCheck=G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),G.CUSTOM_ELEMENT_HANDLING&&typeof G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ce.allowCustomizedBuiltInElements=G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zn&&(mr=!1),Is&&(on=!0),Mr&&(ie=mt({},qk),ae=[],Mr.html===!0&&(mt(ie,Hk),mt(ae,$k)),Mr.svg===!0&&(mt(ie,bA),mt(ae,RA),mt(ae,Qm)),Mr.svgFilters===!0&&(mt(ie,SA),mt(ae,RA),mt(ae,Qm)),Mr.mathMl===!0&&(mt(ie,wA),mt(ae,Gk),mt(ae,Qm))),G.ADD_TAGS&&(ie===pe&&(ie=lu(ie)),mt(ie,G.ADD_TAGS,Ot)),G.ADD_ATTR&&(ae===Re&&(ae=lu(ae)),mt(ae,G.ADD_ATTR,Ot)),G.ADD_URI_SAFE_ATTR&&mt(Os,G.ADD_URI_SAFE_ATTR,Ot),G.FORBID_CONTENTS&&(ut===et&&(ut=lu(ut)),mt(ut,G.FORBID_CONTENTS,Ot)),gr&&(ie["#text"]=!0),Xt&&mt(ie,["html","head","body"]),ie.table&&(mt(ie,["tbody"]),delete Ve.tbody),G.TRUSTED_TYPES_POLICY){if(typeof G.TRUSTED_TYPES_POLICY.createHTML!="function")throw Wf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof G.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Wf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');q=G.TRUSTED_TYPES_POLICY,V=q.createHTML("")}else q===void 0&&(q=aG(A,i)),q!==null&&typeof V=="string"&&(V=q.createHTML(""));Fr&&Fr(G),nr=G}},Z=mt({},[...bA,...SA,...Q$]),ce=mt({},[...wA,...X$]),ye=function(G){let de=j(G);(!de||!de.tagName)&&(de={namespaceURI:En,tagName:"template"});const we=wg(G.tagName),tt=wg(de.tagName);return yr[G.namespaceURI]?G.namespaceURI===Lr?de.namespaceURI===Tn?we==="svg":de.namespaceURI===Pr?we==="svg"&&(tt==="annotation-xml"||Wr[tt]):!!Z[we]:G.namespaceURI===Pr?de.namespaceURI===Tn?we==="math":de.namespaceURI===Lr?we==="math"&&ji[tt]:!!ce[we]:G.namespaceURI===Tn?de.namespaceURI===Lr&&!ji[tt]||de.namespaceURI===Pr&&!Wr[tt]?!1:!ce[we]&&(Yr[we]||!Z[we]):!!(er==="application/xhtml+xml"&&yr[G.namespaceURI]):!1},Se=function(G){Gf(e.removed,{element:G});try{j(G).removeChild(G)}catch{S(G)}},Ue=function(G,de){try{Gf(e.removed,{attribute:de.getAttributeNode(G),from:de})}catch{Gf(e.removed,{attribute:null,from:de})}if(de.removeAttribute(G),G==="is")if(on||Is)try{Se(de)}catch{}else try{de.setAttribute(G,"")}catch{}},Ie=function(G){let de=null,we=null;if(ks)G="<remove></remove>"+G;else{const Ct=Fk(G,/^[\r\n\t ]+/);we=Ct&&Ct[0]}er==="application/xhtml+xml"&&En===Tn&&(G='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+G+"</body></html>");const tt=q?q.createHTML(G):G;if(En===Tn)try{de=new _().parseFromString(tt,er)}catch{}if(!de||!de.documentElement){de=D.createDocument(En,"template",null);try{de.documentElement.innerHTML=mi?V:tt}catch{}}const zt=de.body||de.documentElement;return G&&we&&zt.insertBefore(t.createTextNode(we),zt.childNodes[0]||null),En===Tn?x.call(de,Xt?"html":"body")[0]:Xt?de.documentElement:zt},Ne=function(G){return N.call(G.ownerDocument||G,G,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Le=function(G){return G instanceof g&&(typeof G.nodeName!="string"||typeof G.textContent!="string"||typeof G.removeChild!="function"||!(G.attributes instanceof p)||typeof G.removeAttribute!="function"||typeof G.setAttribute!="function"||typeof G.namespaceURI!="string"||typeof G.insertBefore!="function"||typeof G.hasChildNodes!="function")},Fe=function(G){return typeof u=="function"&&G instanceof u};function xe(_e,G,de){Ym(_e,we=>{we.call(e,G,de,nr)})}const He=function(G){let de=null;if(xe(U.beforeSanitizeElements,G,null),Le(G))return Se(G),!0;const we=Ot(G.nodeName);if(xe(U.uponSanitizeElement,G,{tagName:we,allowedTags:ie}),G.hasChildNodes()&&!Fe(G.firstElementChild)&&Br(/<[/\w!]/g,G.innerHTML)&&Br(/<[/\w!]/g,G.textContent)||G.nodeType===Qf.progressingInstruction||di&&G.nodeType===Qf.comment&&Br(/<[/\w]/g,G.data))return Se(G),!0;if(!ie[we]||Ve[we]){if(!Ve[we]&&St(we)&&(Ce.tagNameCheck instanceof RegExp&&Br(Ce.tagNameCheck,we)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(we)))return!1;if(gr&&!ut[we]){const tt=j(G)||G.parentNode,zt=L(G)||G.childNodes;if(zt&&tt){const Ct=zt.length;for(let Zt=Ct-1;Zt>=0;--Zt){const Bt=b(zt[Zt],!0);Bt.__removalCount=(G.__removalCount||0)+1,tt.insertBefore(Bt,C(G))}}}return Se(G),!0}return G instanceof c&&!ye(G)||(we==="noscript"||we==="noembed"||we==="noframes")&&Br(/<\/no(script|embed|frames)/i,G.innerHTML)?(Se(G),!0):(Zn&&G.nodeType===Qf.text&&(de=G.textContent,Ym([B,P,Ee],tt=>{de=Kf(de,tt," ")}),G.textContent!==de&&(Gf(e.removed,{element:G.cloneNode()}),G.textContent=de)),xe(U.afterSanitizeElements,G,null),!1)},it=function(G,de,we){if(ys&&(de==="id"||de==="name")&&(we in t||we in Ds))return!1;if(!(mr&&!Kt[de]&&Br(be,de))){if(!(Rt&&Br(Y,de))){if(!ae[de]||Kt[de]){if(!(St(G)&&(Ce.tagNameCheck instanceof RegExp&&Br(Ce.tagNameCheck,G)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(G))&&(Ce.attributeNameCheck instanceof RegExp&&Br(Ce.attributeNameCheck,de)||Ce.attributeNameCheck instanceof Function&&Ce.attributeNameCheck(de))||de==="is"&&Ce.allowCustomizedBuiltInElements&&(Ce.tagNameCheck instanceof RegExp&&Br(Ce.tagNameCheck,we)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(we))))return!1}else if(!Os[de]){if(!Br(H,Kf(we,Ae,""))){if(!((de==="src"||de==="xlink:href"||de==="href")&&G!=="script"&&G$(we,"data:")===0&&Mn[G])){if(!(Ut&&!Br(oe,Kf(we,Ae,"")))){if(we)return!1}}}}}}return!0},St=function(G){return G!=="annotation-xml"&&Fk(G,je)},_t=function(G){xe(U.beforeSanitizeAttributes,G,null);const{attributes:de}=G;if(!de||Le(G))return;const we={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae,forceKeepAttr:void 0};let tt=de.length;for(;tt--;){const zt=de[tt],{name:Ct,namespaceURI:Zt,value:Bt}=zt,mn=Ot(Ct);let Pe=Ct==="value"?Bt:K$(Bt);if(we.attrName=mn,we.attrValue=Pe,we.keepAttr=!0,we.forceKeepAttr=void 0,xe(U.uponSanitizeAttribute,G,we),Pe=we.attrValue,Bi&&(mn==="id"||mn==="name")&&(Ue(Ct,G),Pe=pi+Pe),di&&Br(/((--!?|])>)|<\/(style|title)/i,Pe)){Ue(Ct,G);continue}if(we.forceKeepAttr||(Ue(Ct,G),!we.keepAttr))continue;if(!Nn&&Br(/\/>/i,Pe)){Ue(Ct,G);continue}Zn&&Ym([B,P,Ee],_r=>{Pe=Kf(Pe,_r," ")});const en=Ot(G.nodeName);if(it(en,mn,Pe)){if(q&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!Zt)switch(A.getAttributeType(en,mn)){case"TrustedHTML":{Pe=q.createHTML(Pe);break}case"TrustedScriptURL":{Pe=q.createScriptURL(Pe);break}}try{Zt?G.setAttributeNS(Zt,Ct,Pe):G.setAttribute(Ct,Pe),Le(G)?Se(G):jk(e.removed)}catch{}}}xe(U.afterSanitizeAttributes,G,null)},ft=function _e(G){let de=null;const we=Ne(G);for(xe(U.beforeSanitizeShadowDOM,G,null);de=we.nextNode();)xe(U.uponSanitizeShadowNode,de,null),He(de),_t(de),de.content instanceof s&&_e(de.content);xe(U.afterSanitizeShadowDOM,G,null)};return e.sanitize=function(_e){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=null,we=null,tt=null,zt=null;if(mi=!_e,mi&&(_e="<!-->"),typeof _e!="string"&&!Fe(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw Wf("dirty is not a string, aborting")}else throw Wf("toString is not a function");if(!e.isSupported)return _e;if(gs||X(G),e.removed=[],typeof _e=="string"&&(Kr=!1),Kr){if(_e.nodeName){const Bt=Ot(_e.nodeName);if(!ie[Bt]||Ve[Bt])throw Wf("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof u)de=Ie("<!---->"),we=de.ownerDocument.importNode(_e,!0),we.nodeType===Qf.element&&we.nodeName==="BODY"||we.nodeName==="HTML"?de=we:de.appendChild(we);else{if(!on&&!Zn&&!Xt&&_e.indexOf("<")===-1)return q&&zi?q.createHTML(_e):_e;if(de=Ie(_e),!de)return on?null:zi?V:""}de&&ks&&Se(de.firstChild);const Ct=Ne(Kr?_e:de);for(;tt=Ct.nextNode();)He(tt),_t(tt),tt.content instanceof s&&ft(tt.content);if(Kr)return _e;if(on){if(Is)for(zt=k.call(de.ownerDocument);de.firstChild;)zt.appendChild(de.firstChild);else zt=de;return(ae.shadowroot||ae.shadowrootmode)&&(zt=z.call(r,zt,!0)),zt}let Zt=Xt?de.outerHTML:de.innerHTML;return Xt&&ie["!doctype"]&&de.ownerDocument&&de.ownerDocument.doctype&&de.ownerDocument.doctype.name&&Br(A2,de.ownerDocument.doctype.name)&&(Zt="<!DOCTYPE "+de.ownerDocument.doctype.name+`>
`+Zt),Zn&&Ym([B,P,Ee],Bt=>{Zt=Kf(Zt,Bt," ")}),q&&zi?q.createHTML(Zt):Zt},e.setConfig=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(_e),gs=!0},e.clearConfig=function(){nr=null,gs=!1},e.isValidAttribute=function(_e,G,de){nr||X({});const we=Ot(_e),tt=Ot(G);return it(we,tt,de)},e.addHook=function(_e,G){typeof G=="function"&&Gf(U[_e],G)},e.removeHook=function(_e,G){if(G!==void 0){const de=q$(U[_e],G);return de===-1?void 0:$$(U[_e],de,1)[0]}return jk(U[_e])},e.removeHooks=function(_e){U[_e]=[]},e.removeAllHooks=function(){U=Wk()},e}var E2=T2();function Yk({title:n,subTitle:e,author:t,datePosted:r,readTime:i,titleImg:s,part:a,partUrl:u,partName:c,description:f}){El();const p=r!=null&&r.toDate?r.toDate().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):new Date(r).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return I.jsxs("div",{className:"sb-title-main-container charcoal-bg white-text",children:[I.jsx("p",{className:"sb-sub outfit-font",children:e}),I.jsx("h1",{className:"sb-title playfair-font",style:{marginBottom:"40px"},children:n}),a&&I.jsxs("h6",{className:"sb-part silver-bg outfit-font",style:{padding:"5px 20px",borderRadius:"5rem",color:"black"},children:["Part: ",a]}),I.jsx("img",{src:s||g2,alt:"Blog banner"}),I.jsx("p",{className:"sb-title-blerb outfit-thin-font",dangerouslySetInnerHTML:{__html:E2.sanitize(f)}}),c&&I.jsx(il,{onClick:()=>window.location.href=u,text:c}),I.jsxs("div",{className:"sb-title-info-container",children:[I.jsxs("div",{className:"sb-title-info",children:[I.jsx("h6",{className:"outfit-xthin-font",children:"Author:"}),I.jsx("h5",{className:"playfair-font",children:t||"Unknown"})]}),I.jsxs("div",{className:"sb-title-info",children:[I.jsx("h6",{className:"outfit-xthin-font",children:"Read Time:"}),I.jsx("h5",{className:"playfair-font",children:i||"N/A"})]}),I.jsxs("div",{className:"sb-title-info",children:[I.jsx("h6",{className:"outfit-xthin-font",children:"Date Posted:"}),I.jsx("h5",{className:"playfair-font",children:p})]})]})]})}const lG="/assets/likeFilled-BbC8tfBI.png",uG="/assets/likeEmpty-BD2cNi-E.png";function cG(){var f,p;const{id:n}=BO(),[e,t]=K.useState(null),[r,i]=K.useState(!1),[s,a]=K.useState("");K.useEffect(()=>{(async()=>{var _;try{const A=await Sg(n);t(A);const T=ty().currentUser;T&&((_=A.likes)!=null&&_.includes(T.uid))&&i(!0)}catch(A){console.error("Failed to fetch blog:",A)}})()},[n]);const u=async()=>{if(!(!e||!ty().currentUser))try{r?await k$(n):await x$(n);const _=await Sg(n);t(_),i(!r)}catch(_){console.error("Failed to toggle like:",_)}},c=async()=>{if(!(!s.trim()||!e))try{await I$(n,s,"Anonymous");const g=await Sg(n);t(g),a("")}catch(g){console.error("Failed to submit comment:",g)}};return e?I.jsxs("section",{className:"social-main-container",children:[I.jsxs("div",{className:"like-and-comment-container",children:[I.jsxs("div",{className:"like-and-share",children:[I.jsxs("div",{className:"like-container",children:[I.jsxs("div",{className:"like",children:[I.jsx("img",{src:r?lG:uG,onClick:u,alt:"like button"}),I.jsxs("p",{children:[((f=e.likes)==null?void 0:f.length)||0," likes"]})]}),I.jsx("h1",{className:"outfit-font",children:"Leave a like"})]}),I.jsxs("div",{className:"share-container",children:[I.jsx("h1",{className:"outfit-font",children:"Share This:"}),I.jsxs("div",{children:[I.jsx(il,{text:"X",fontSize:".8rem"}),I.jsx(il,{text:"Facebook",fontSize:".8rem"})]})]})]}),I.jsxs("div",{className:"leave-comment",children:[I.jsx("h1",{className:"outfit-font",children:"Leave a Comment:"}),I.jsx("textarea",{className:"outfit-font silver-bg",value:s,onChange:g=>a(g.target.value),placeholder:"leave a comment..."}),I.jsx(il,{text:"Submit",margin:"0 auto",fontSize:"1.3rem",onClick:c})]})]}),I.jsxs("div",{className:"comment-container",children:[I.jsx("h1",{className:"outfit-font",children:"Comments:"}),I.jsx("div",{className:"comments silver-bg",children:(p=e.comments)==null?void 0:p.map((g,_)=>I.jsxs(Sr.Fragment,{children:[I.jsxs("h1",{className:"commenter-name outfit-font",children:[g.name||"Reader",":"]}),I.jsx("p",{className:"comment outfit-font",children:g.comment})]},_))})]})]}):I.jsx("p",{children:"Loading..."})}function Qk({content:n}){return Array.isArray(n)?I.jsx("div",{className:"sb-article-main-container",children:I.jsxs("div",{className:"sb-article-container",children:[n.filter(e=>e.type!=="Description").map((e,t)=>e.type==="Article"?I.jsx("div",{className:"outfit-thin-font sb-article-section",dangerouslySetInnerHTML:{__html:E2.sanitize(e.value)}},e._id||t):e.type==="Image"?I.jsx("img",{src:e.value,alt:`article-section-${t}`,className:"sb-article-image"},e._id||t):null),I.jsx(cG,{})]})}):I.jsx(vp,{})}function hG(){var s,a;const[n,e]=K.useState(window.innerWidth),[t,r]=K.useState(null),{id:i}=BO();return K.useEffect(()=>{const u=()=>e(window.innerWidth);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),K.useEffect(()=>{(async()=>{try{const c=await Sg(i);r(c)}catch(c){console.error("Failed to fetch blog:",c)}})(),bh("#nav")},[i]),I.jsx("section",{id:"single-blog",className:"display-column",children:t?I.jsxs(I.Fragment,{children:[" ",n<600?I.jsxs(I.Fragment,{children:[I.jsx(Yk,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,part:t.part,partName:t.partName,partUrl:t.partUrl,description:(s=t.content.find(u=>u.type==="Description"))==null?void 0:s.value,redirectLink:t.redirectLink}),I.jsx("div",{className:"padding-40",children:I.jsx(Qk,{content:t.content})}),I.jsx(XT,{author:"My Daily Reed"})]}):I.jsxs(I.Fragment,{children:[I.jsx(Yk,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,partName:t.partName,partUrl:t.partUrl,part:t.part,description:(a=t.content.find(u=>u.type==="Description"))==null?void 0:a.value}),I.jsxs("div",{className:"flex-between padding-40 pos-relative",children:[I.jsx(Qk,{content:t.content}),I.jsx(XT,{author:"My Daily Reed"})]})]})]}):I.jsx(I.Fragment,{children:I.jsx(vp,{})})})}const fG={element:I.jsx(hG,{})};function dG(){const[n,e]=K.useState(!1),[t,r]=K.useState(""),[i,s]=K.useState(""),[a,u]=K.useState(""),c=El();K.useEffect(()=>{const _=LD(cu,A=>{A&&(e(!0),setTimeout(()=>{c("/dashboard")},[1e3]))});return()=>_()},[]);const f=async _=>{_.preventDefault();try{await EH(cu,t,i),c("/dashboard")}catch{u("Incorrect Email/Password")}},p=async()=>{const _=new $o,A="urok.dance@gmail.com";try{(await $H(cu,_)).user.email!==A?(await cu.signOut(),u("Access denied: unauthorized Google account.")):(console.log("Google login successful"),c("/dashboard"))}catch(T){console.error(T),u("Google sign-in failed.")}},g=async()=>{if(!t){u("Please enter your email first.");return}try{await TH(cu,t),alert("Password reset email sent. Check your inbox.")}catch(_){u(_.message)}};return I.jsx(I.Fragment,{children:n?I.jsx(I.Fragment,{children:I.jsx(vp,{})}):I.jsxs(I.Fragment,{children:[" ",I.jsx("section",{className:"display-column charcoal-bg neg-marg",children:I.jsxs("div",{className:"form-container green-bg",children:[I.jsx("p",{className:"title outfit-font",children:"Login"}),I.jsxs("form",{className:"form",onSubmit:f,children:[I.jsxs("div",{className:"input-group",children:[I.jsx("label",{htmlFor:"email",className:"outfit-thin-font",children:"Email"}),I.jsx("input",{type:"text",name:"email",placeholder:"email@email.com",id:"email",value:t,onChange:_=>r(_.target.value)})]}),I.jsxs("div",{className:"input-group",children:[I.jsx("label",{htmlFor:"password",className:"outfit-thin-font",children:"Password"}),I.jsx("input",{type:"password",name:"password",id:"password",placeholder:"password",value:i,onChange:_=>s(_.target.value)}),I.jsx("div",{className:"forgot",children:I.jsx("button",{type:"button",className:"forgot-password-btn outfit-font",onClick:g,children:"Forgot Password?"})})]}),I.jsx("button",{type:"submit",className:"sign charcoal-bg",children:"Sign in"}),a&&I.jsx("p",{className:"error-message",children:a})]}),I.jsxs("div",{className:"social-message",children:[I.jsx("div",{className:"line"}),I.jsx("p",{className:"message",children:"Login with Google"}),I.jsx("div",{className:"line"})]}),I.jsx("div",{className:"social-icons",children:I.jsx("button",{type:"button","aria-label":"Log in with Google",className:"icon",onClick:p,children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:I.jsx("path",{d:"M16.318 13.714v5.484h9.078c-0.37 2.354-2.745 6.901-9.078 6.901-5.458 0-9.917-4.521-9.917-10.099s4.458-10.099 9.917-10.099c3.109 0 5.193 1.318 6.38 2.464l4.339-4.182c-2.786-2.599-6.396-4.182-10.719-4.182-8.844 0-16 7.151-16 16s7.156 16 16 16c9.234 0 15.365-6.49 15.365-15.635 0-1.052-0.115-1.854-0.255-2.651z"})})})})]})})]})})}const pG={element:I.jsx(dG,{})},b2=K.createContext();function mG({children:n}){const[e,t]=K.useState(null),[r,i]=K.useState(!0);return K.useEffect(()=>{const s=LD(cu,a=>{t(a),i(!1)});return()=>s()},[]),I.jsx(b2.Provider,{value:{currentUser:e},children:r?I.jsx(vp,{}):n})}function gG(){return K.useContext(b2)}function Xk({children:n}){const{currentUser:e}=gG();return e?n:I.jsx(Sz,{to:"/login"})}const yG="/assets/dashboardBg-Dtd5WdDk.jpg",_G="/assets/dashboardBgPhone-Dn_QPInV.jpg";function vG(){const[n,e]=K.useState(window.innerWidth);return K.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),I.jsx("section",{className:"db-hero-main-container",children:n<=600?I.jsxs(I.Fragment,{children:[I.jsx("img",{src:_G}),I.jsx("h1",{className:"outfit-font ",children:"Welcome"}),I.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),I.jsx("h1",{className:"outfit-font green-text",children:"Dashboard"})]}):I.jsxs(I.Fragment,{children:[I.jsx("img",{src:yG})," ",I.jsx("h1",{className:"outfit-font green-text",children:"Welcome"}),I.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),I.jsx("h1",{style:{marginBottom:"10px"},className:"outfit-font green-text",children:"Dashboard"})]})})}const AG="/assets/add-xRAkvvij.png",TG="/assets/edit-MfBVzi6v.png";function EG(){const n=El(),e=async()=>{try{await wH(cu),n("/login")}catch(t){console.error("Error signing out:",t)}};return I.jsxs("section",{style:{height:"600px",padding:"40px",gap:"50px"},className:"display-column charcoal-bg neg-marg",children:[I.jsxs("div",{className:"db-direction-container green-bg",onClick:t=>{t.preventDefault(),n("/createBlog"),window.scrollTo(0,0)},children:[I.jsx("h1",{className:"outfit-font",children:"Create a Blog Post"}),I.jsx("img",{src:AG})]}),I.jsxs("div",{className:"db-direction-container green-bg",children:[I.jsx("h1",{className:"outfit-font",children:"Edit a Blog Post"}),I.jsx("img",{src:TG})]}),I.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:"1.5rem"},onClick:()=>{e(),window.scrollTo(0,0)},children:"Logout"})]})}function bG(){return I.jsxs("section",{className:"dashboard-main",children:[I.jsx(vG,{}),I.jsx(EG,{})]})}const Jk=async(n,e="blogFolder")=>{if(!n)throw new Error("No file provided");const t=g5(t7,`${e}/${Date.now()}-${n.name}`);return await p5(t,n),await m5(t)};function lr(n){this.content=n}lr.prototype={constructor:lr,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new lr(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new lr(t)},addToStart:function(n,e){return new lr([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new lr(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new lr(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=lr.from(n),n.size?new lr(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=lr.from(n),n.size?new lr(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=lr.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};lr.from=function(n){if(n instanceof lr)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new lr(e)};function S2(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=S2(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function w2(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),u=e.child(--s),c=a.nodeSize;if(a==u){t-=c,r-=c;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let f=0,p=Math.min(a.text.length,u.text.length);for(;f<p&&a.text[a.text.length-f-1]==u.text[u.text.length-f-1];)f++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let f=w2(a.content,u.content,t-1,r-1);if(f)return f}t-=c,r-=c}}class ge{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,u=0;u<t;a++){let c=this.content[a],f=u+c.nodeSize;if(f>e&&r(c,i+u,s||null,a)!==!1&&c.content.size){let p=u+1;c.nodesBetween(Math.max(0,e-p),Math.min(c.content.size,t-p),r,i+p)}u=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(u,c)=>{let f=u.isText?u.text.slice(Math.max(e,c)-c,t-c):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&f||u.isTextblock)&&r&&(a?a=!1:s+=r),s+=f},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ge(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let u=this.content[s],c=a+u.nodeSize;c>e&&((a<e||c>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=c}return new ge(r,i)}cutByIndex(e,t){return e==t?ge.empty:e==0&&t==this.content.length?this:new ge(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ge(i,s)}addToStart(e){return new ge([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ge(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return S2(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return w2(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Xm(0,e);if(e==this.size)return Xm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),a=i+s.nodeSize;if(a>=e)return a==e||t>0?Xm(r+1,a):Xm(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ge.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ge(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ge.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ge(t||e,r)}static from(e){if(!e)return ge.empty;if(e instanceof ge)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ge([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ge.empty=new ge([],0);const CA={index:0,offset:0};function Xm(n,e){return CA.index=n,CA.offset=e,CA}function fy(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!fy(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!fy(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let qt=class eE{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&fy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return eE.none;if(e instanceof eE)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};qt.none=[];class dy extends Error{}class ke{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=C2(this.content,e+this.openStart,t);return r&&new ke(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ke(R2(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ke.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ke(ge.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new ke(e,r,i)}}ke.empty=new ke(ge.empty,0,0);function R2(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||s.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(R2(s.content,e-i-1,t-i-1)))}function C2(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=C2(a.content,e-s-1,t);return u&&n.replaceChild(i,a.copy(u))}function SG(n,e,t){if(t.openStart>n.depth)throw new dy("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new dy("Inconsistent open depths");return x2(n,e,t,0)}function x2(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=x2(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return xu(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=wG(t,n);return xu(s,I2(n,a,u,e,r))}else return xu(s,py(n,e,r))}function k2(n,e){if(!e.type.compatibleContent(n.type))throw new dy("Cannot join "+e.type.name+" onto "+n.type.name)}function tE(n,e,t){let r=n.node(t);return k2(r,e.node(t)),r}function Cu(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function bd(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Cu(n.nodeAfter,r),s++));for(let u=s;u<a;u++)Cu(i.child(u),r);e&&e.depth==t&&e.textOffset&&Cu(e.nodeBefore,r)}function xu(n,e){return n.type.checkContent(e),n.copy(e)}function I2(n,e,t,r,i){let s=n.depth>i&&tE(n,e,i+1),a=r.depth>i&&tE(t,r,i+1),u=[];return bd(null,n,i,u),s&&a&&e.index(i)==t.index(i)?(k2(s,a),Cu(xu(s,I2(n,e,t,r,i+1)),u)):(s&&Cu(xu(s,py(n,e,i+1)),u),bd(e,t,i,u),a&&Cu(xu(a,py(t,r,i+1)),u)),bd(r,null,i,u),new ge(u)}function py(n,e,t){let r=[];if(bd(null,n,t,r),n.depth>t){let i=tE(n,e,t+1);Cu(xu(i,py(n,e,t+1)),r)}return bd(e,null,t,r),new ge(r)}function wG(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(ge.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Yd{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return qt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new my(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:u,offset:c}=a.content.findIndex(s),f=s-c;if(r.push(a,u,i+c),!f||(a=a.child(u),a.isText))break;s=f-1,i+=c+1}return new Yd(t,r,s)}static resolveCached(e,t){let r=Zk.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else Zk.set(e,r=new RG);let i=r.elts[r.i]=Yd.resolve(e,t);return r.i=(r.i+1)%CG,i}}class RG{constructor(){this.elts=[],this.i=0}}const CG=12,Zk=new WeakMap;class my{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const xG=Object.create(null);let sl=class nE{constructor(e,t,r,i=qt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ge.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&fy(this.attrs,t||e.defaultAttrs||xG)&&qt.sameSet(this.marks,r||qt.none)}copy(e=null){return e==this.content?this:new nE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new nE(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ke.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),f=i.node(a).content.cut(i.pos-u,s.pos-u);return new ke(f,i.depth-a,s.depth-a)}replace(e,t,r){return SG(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Yd.resolveCached(this,e)}resolveNoCache(e){return Yd.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),O2(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ge.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=qt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!qt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ge.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};sl.prototype.text=void 0;class gy extends sl{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):O2(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new gy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new gy(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function O2(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class zu{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new kG(e,t);if(r.next==null)return zu.empty;let i=N2(r);r.next&&r.err("Unexpected trailing text");let s=LG(PG(i));return VG(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,u){let c=a.matchFragment(e,r);if(c&&(!t||c.validEnd))return ge.from(u.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:g}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let _=s(g,u.concat(p));if(_)return _}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:u,next:c}=s.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}zu.empty=new zu(!0);class kG{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function N2(n){let e=[];do e.push(IG(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function IG(n){let e=[];do e.push(OG(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function OG(n){let e=DG(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=NG(n,e);else break;return e}function eI(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function NG(n,e){let t=eI(n),r=t;return n.eat(",")&&(n.next!="}"?r=eI(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function MG(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function DG(n){if(n.eat("(")){let e=N2(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=MG(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function PG(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,c){let f={term:c,to:u};return e[a].push(f),f}function i(a,u){a.forEach(c=>c.to=u)}function s(a,u){if(a.type=="choice")return a.exprs.reduce((c,f)=>c.concat(s(f,u)),[]);if(a.type=="seq")for(let c=0;;c++){let f=s(a.exprs[c],u);if(c==a.exprs.length-1)return f;i(f,u=t())}else if(a.type=="star"){let c=t();return r(u,c),i(s(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=t();return i(s(a.expr,u),c),i(s(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(u)].concat(s(a.expr,u));if(a.type=="range"){let c=u;for(let f=0;f<a.min;f++){let p=t();i(s(a.expr,c),p),c=p}if(a.max==-1)i(s(a.expr,c),c);else for(let f=a.min;f<a.max;f++){let p=t();r(c,p),i(s(a.expr,c),p),c=p}return[r(c)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function M2(n,e){return e-n}function tI(n,e){let t=[];return r(e),t.sort(M2);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:u,to:c}=s[a];!u&&t.indexOf(c)==-1&&r(c)}}}function LG(n){let e=Object.create(null);return t(tI(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:c})=>{if(!u)return;let f;for(let p=0;p<i.length;p++)i[p][0]==u&&(f=i[p][1]);tI(n,c).forEach(p=>{f||i.push([u,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let s=e[r.join(",")]=new zu(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(M2);s.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return s}}function VG(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:c,next:f}=i.next[u];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function D2(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function P2(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function L2(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function V2(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new zG(n,r,e[r]);return t}let nI=class U2{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=V2(e,r.attrs),this.defaultAttrs=D2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==zu.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:P2(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new sl(this,this.computeAttrs(e),ge.from(t),qt.setFrom(r))}createChecked(e=null,t,r){return t=ge.from(t),this.checkContent(t),new sl(this,this.computeAttrs(e),t,qt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ge.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(ge.empty,!0);return s?new sl(this,e,t.append(s),qt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){L2(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:qt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new U2(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function UG(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class zG{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?UG(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class I_{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=V2(e,i.attrs),this.excluded=null;let s=D2(this.attrs);this.instance=s?new qt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new qt(this,P2(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new I_(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){L2(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class z2{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=lr.from(e.nodes),t.marks=lr.from(e.marks||{}),this.nodes=nI.compile(this.spec.nodes,this),this.marks=I_.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=zu.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?rI(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:rI(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof nI){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new gy(r,r.defaultAttrs,e,qt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return sl.fromJSON(this,e)}markFromJSON(e){return qt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function rI(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let u in n.marks){let c=n.marks[u];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function BG(n){return n.tag!=null}function jG(n){return n.style!=null}class ol{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(BG(i))this.tags.push(i);else if(jG(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new sI(this,t,!1);return r.addAll(e,qt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new sI(this,t,!0);return r.addAll(e,qt.none,t.from,t.to),ke.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(qG(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=oI(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=oI(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ol(e,ol.schemaRules(e)))}}const B2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},FG={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},j2={ol:!0,ul:!0},Qd=1,rE=2,Rg=4;function iI(n,e,t){return e!=null?(e?Qd:0)|(e==="full"?rE:0):n&&n.whitespace=="pre"?Qd|rE:t&-5}class Jm{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=qt.none,this.match=s||(a&Rg?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ge.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=ge.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ge.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!B2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class sI{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=iI(null,t.preserveWhitespace,0)|(r?Rg:0);i?s=new Jm(i.type,i.attrs,qt.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new Jm(null,null,qt.none,!0,null,a):s=new Jm(e.schema.topNodeType,null,qt.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&rE?"full":this.localPreserveWS||(i.options&Qd)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],u=e.previousSibling;(!a||u&&u.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;j2.hasOwnProperty(a)&&this.parser.normalizeLists&&HG(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(c?c.ignore:FG.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let f,p=this.needsBlock;if(B2.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=c&&c.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),f&&this.sync(s),this.needsBlock=p}else{let f=this.readStyles(e,t);f&&this.addElementByRule(e,c,f,c.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let u=void 0;;){let c=this.parser.matchStyle(s,a,this,u);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(f=>!c.clearMark(f)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)u=c;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(a,t.attrs||null,r,t.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(u)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];a!=u;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,u=0;a>=0;a--){let c=this.nodes[a],f=c.findWrapping(e);if(f&&(!i||i.length>f.length+u)&&(i=f,s=c,!f.length))break;if(c.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=qt.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):aI(u.type,e.type))&&(a=u.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=iI(e,s,a.options);a.options&Rg&&a.content.length==0&&(u|=Rg);let c=qt.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):aI(f.type,e))?(c=f.addToSet(c),!1):!0),this.nodes.push(new Jm(e,t,c,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Qd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(u,c)=>{for(;u>=0;u--){let f=t[u];if(f==""){if(u==t.length-1||u==0)continue;for(;c>=s;c--)if(a(u-1,c))return!0;return!1}else{let p=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function HG(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&j2.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function qG(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function oI(n){let e={};for(let t in n)e[t]=n[t];return e}function aI(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=u=>{s.push(u);for(let c=0;c<u.edgeCount;c++){let{type:f,next:p}=u.edge(c);if(f==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class Xu{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=xA(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let u=0,c=0;for(;u<s.length&&c<a.marks.length;){let f=a.marks[c];if(!this.marks[f.type.name]){c++;continue}if(!f.eq(s[u][0])||f.type.spec.spanning===!1)break;u++,c++}for(;u<s.length;)i=s.pop()[1];for(;c<a.marks.length;){let f=a.marks[c++],p=this.serializeMark(f,a.isInline,t);p&&(s.push([f,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Cg(xA(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Cg(xA(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Cg(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Xu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=lI(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return lI(e.marks)}}function lI(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function xA(n){return n.document||window.document}const uI=new WeakMap;function $G(n){let e=uI.get(n);return e===void 0&&uI.set(n,e=GG(n)),e}function GG(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Cg(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=$G(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let u,c=t?n.createElementNS(t,i):n.createElement(i),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let g in f)if(f[g]!=null){let _=g.indexOf(" ");_>0?c.setAttributeNS(g.slice(0,_),g.slice(_+1),f[g]):c.setAttribute(g,f[g])}}for(let g=p;g<e.length;g++){let _=e[g];if(_===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:A,contentDOM:T}=Cg(n,_,t,r);if(c.appendChild(A),T){if(u)throw new RangeError("Multiple content holes");u=T}}}return{dom:c,contentDOM:u}}const F2=65535,H2=Math.pow(2,16);function KG(n,e){return n+e*H2}function cI(n){return n&F2}function WG(n){return(n-(n&F2))/H2}const q2=1,$2=2,xg=4,G2=8;class iE{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&G2)>0}get deletedBefore(){return(this.delInfo&(q2|xg))>0}get deletedAfter(){return(this.delInfo&($2|xg))>0}get deletedAcross(){return(this.delInfo&xg)>0}}class ki{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ki.empty)return ki.empty}recover(e){let t=0,r=cI(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+WG(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?i:0);if(c>e)break;let f=this.ranges[u+s],p=this.ranges[u+a],g=c+f;if(e<=g){let _=f?e==c?-1:e==g?1:t:t,A=c+i+(_<0?0:p);if(r)return A;let T=e==(t<0?c:g)?null:KG(u/3,e-c),b=e==c?$2:e==g?q2:xg;return(t<0?e!=c:e!=g)&&(b|=G2),new iE(A,b,T)}i+=p-f}return r?e+i:new iE(e+i,0,null)}touches(e,t){let r=0,i=cI(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let f=this.ranges[u+s],p=c+f;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-f}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?s:0),c=a+(this.inverted?0:s),f=this.ranges[i+t],p=this.ranges[i+r];e(u,u+f,c,c+p),s+=p-f}}invert(){return new ki(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ki.empty:new ki(e<0?[0,-e,0]:[0,0,e])}}ki.empty=new ki([]);class Xd{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Xd(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Xd;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],u=a.mapResult(e,t);if(u.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new iE(e,i,null)}}const kA=Object.create(null);class Nr{getMap(){return ki.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=kA[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in kA)throw new RangeError("Duplicate use of step JSON ID "+e);return kA[e]=t,t.prototype.jsonID=e,t}}class In{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new In(e,null)}static fail(e){return new In(null,e)}static fromReplace(e,t,r,i){try{return In.ok(e.replace(t,r,i))}catch(s){if(s instanceof dy)return In.fail(s.message);throw s}}}function lS(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(lS(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return ge.fromArray(r)}class Wa extends Nr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ke(lS(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return In.fromReplace(e,this.from,this.to,s)}invert(){return new no(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Wa(t.pos,r.pos,this.mark)}merge(e){return e instanceof Wa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Wa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Wa(t.from,t.to,e.markFromJSON(t.mark))}}Nr.jsonID("addMark",Wa);class no extends Nr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new ke(lS(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return In.fromReplace(e,this.from,this.to,r)}invert(){return new Wa(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new no(t.pos,r.pos,this.mark)}merge(e){return e instanceof no&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new no(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new no(t.from,t.to,e.markFromJSON(t.mark))}}Nr.jsonID("removeMark",no);class Ya extends Nr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return In.fromReplace(e,this.pos,this.pos+1,new ke(ge.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ya(this.pos,t.marks[i]);return new Ya(this.pos,this.mark)}}return new Bu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ya(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ya(t.pos,e.markFromJSON(t.mark))}}Nr.jsonID("addNodeMark",Ya);class Bu extends Nr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return In.fromReplace(e,this.pos,this.pos+1,new ke(ge.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ya(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Bu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Bu(t.pos,e.markFromJSON(t.mark))}}Nr.jsonID("removeNodeMark",Bu);class Gn extends Nr{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&sE(e,this.from,this.to)?In.fail("Structure replace would overwrite content"):In.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ki([this.from,this.to-this.from,this.slice.size])}invert(e){return new Gn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Gn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Gn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ke.empty:new ke(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Gn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ke.empty:new ke(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Gn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Gn(t.from,t.to,ke.fromJSON(e,t.slice),!!t.structure)}}Nr.jsonID("replace",Gn);class Kn extends Nr{constructor(e,t,r,i,s,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=u}apply(e){if(this.structure&&(sE(e,this.from,this.gapFrom)||sE(e,this.gapTo,this.to)))return In.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return In.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?In.fromReplace(e,this.from,this.to,r):In.fail("Content does not fit in gap")}getMap(){return new ki([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Kn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Kn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kn(t.from,t.to,t.gapFrom,t.gapTo,ke.fromJSON(e,t.slice),t.insert,!!t.structure)}}Nr.jsonID("replaceAround",Kn);function sE(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function YG(n,e,t,r){let i=[],s=[],a,u;n.doc.nodesBetween(e,t,(c,f,p)=>{if(!c.isInline)return;let g=c.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let _=Math.max(f,e),A=Math.min(f+c.nodeSize,t),T=r.addToSet(g);for(let b=0;b<g.length;b++)g[b].isInSet(T)||(a&&a.to==_&&a.mark.eq(g[b])?a.to=A:i.push(a=new no(_,A,g[b])));u&&u.to==_?u.to=A:s.push(u=new Wa(_,A,r))}}),i.forEach(c=>n.step(c)),s.forEach(c=>n.step(c))}function QG(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;s++;let c=null;if(r instanceof I_){let f=a.marks,p;for(;p=r.isInSet(f);)(c||(c=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let f=Math.min(u+a.nodeSize,t);for(let p=0;p<c.length;p++){let g=c[p],_;for(let A=0;A<i.length;A++){let T=i[A];T.step==s-1&&g.eq(i[A].style)&&(_=T)}_?(_.to=f,_.step=s):i.push({style:g,from:Math.max(u,e),to:f,step:s})}}}),i.forEach(a=>n.step(new no(a.from,a.to,a.style)))}function uS(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],u=e+1;for(let c=0;c<s.childCount;c++){let f=s.child(c),p=u+f.nodeSize,g=r.matchType(f.type);if(!g)a.push(new Gn(u,p,ke.empty));else{r=g;for(let _=0;_<f.marks.length;_++)t.allowsMarkType(f.marks[_].type)||n.step(new no(u,p,f.marks[_]));if(i&&f.isText&&t.whitespace!="pre"){let _,A=/\r?\n|\r/g,T;for(;_=A.exec(f.text);)T||(T=new ke(ge.from(t.schema.text(" ",t.allowedMarks(f.marks))),0,0)),a.push(new Gn(u+_.index,u+_.index+_[0].length,T))}}u=p}if(!r.validEnd){let c=r.fillBefore(ge.empty,!0);n.replace(u,u,new ke(c,0,0))}for(let c=a.length-1;c>=0;c--)n.step(a[c])}function XG(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function zh(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,a,t))return r;if(r==0||i.type.spec.isolating||!XG(i,s,a))break}return null}function JG(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),u=i.after(s+1),c=a,f=u,p=ge.empty,g=0;for(let T=s,b=!1;T>t;T--)b||r.index(T)>0?(b=!0,p=ge.from(r.node(T).copy(p)),g++):c--;let _=ge.empty,A=0;for(let T=s,b=!1;T>t;T--)b||i.after(T+1)<i.end(T)?(b=!0,_=ge.from(i.node(T).copy(_)),A++):f++;n.step(new Kn(c,f,a,u,new ke(p.append(_),g,A),p.size-g,!0))}function cS(n,e,t=null,r=n){let i=ZG(n,e),s=i&&eK(r,e);return s?i.map(hI).concat({type:e,attrs:t}).concat(s.map(hI)):null}function hI(n){return{type:n,attrs:null}}function ZG(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function eK(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;c&&f<i;f++)c=c.matchType(t.child(f).type);return!c||!c.validEnd?null:a}function tK(n,e,t){let r=ge.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ge.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new Kn(i,s,i,s,new ke(r,0,0),t.length,!0))}function nK(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let c=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,c)&&rK(n.doc,n.mapping.slice(s).map(u),r)){let f=null;if(r.schema.linebreakReplacement){let A=r.whitespace=="pre",T=!!r.contentMatch.matchType(r.schema.linebreakReplacement);A&&!T?f=!1:!A&&T&&(f=!0)}f===!1&&W2(n,a,u,s),uS(n,n.mapping.slice(s).map(u,1),r,void 0,f===null);let p=n.mapping.slice(s),g=p.map(u,1),_=p.map(u+a.nodeSize,1);return n.step(new Kn(g,_,g+1,_-1,new ke(ge.from(r.create(c,null,a.marks)),0,0),1,!0)),f===!0&&K2(n,a,u,s),!1}})}function K2(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(i.text);){let c=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function W2(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function rK(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function iK(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Kn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ke(ge.from(a),0,0),1,!0))}function Qo(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,p=t-2;f>s;f--,p--){let g=i.node(f),_=i.index(f);if(g.type.spec.isolating)return!1;let A=g.content.cutByIndex(_,g.childCount),T=r&&r[p+1];T&&(A=A.replaceChild(0,T.type.create(T.attrs)));let b=r&&r[p]||g;if(!g.canReplace(_+1,g.childCount)||!b.type.validContent(A))return!1}let u=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(u,u,c?c.type:i.node(s+1).type)}function sK(n,e,t=1,r){let i=n.doc.resolve(e),s=ge.empty,a=ge.empty;for(let u=i.depth,c=i.depth-t,f=t-1;u>c;u--,f--){s=ge.from(i.node(u).copy(s));let p=r&&r[f];a=ge.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new Gn(e,e,new ke(s.append(a),t,t),!0))}function xl(n,e){let t=n.resolve(e),r=t.index();return Y2(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function oK(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function Y2(n,e){return!!(n&&e&&!n.isLeaf&&oK(n,e))}function O_(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,a,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),a=r.node(i+1)),s&&!s.isTextblock&&Y2(s,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function aK(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);W2(n,p.node(),p.before(),u)}a.inlineContent&&uS(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let c=n.mapping.slice(u),f=c.map(e-t);if(n.step(new Gn(f,c.map(e+t,-1),ke.empty,!0)),r===!0){let p=n.doc.resolve(f);K2(n,p.node(),p.before(),n.steps.length)}return n}function lK(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Q2(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),f=r.node(a),p=!1;if(s==1)p=f.canReplace(c,c,i);else{let g=f.contentMatchAt(c).findWrapping(i.firstChild.type);p=g&&f.canReplaceWith(c,c,g[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function N_(n,e,t=e,r=ke.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return X2(i,s,r)?new Gn(e,t,r):new uK(i,s,r).fit()}function X2(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class uK{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ge.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ge.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,u=i.depth;for(;a&&u&&s.childCount==1;)s=s.firstChild.content,a--,u--;let c=new ke(s,a,u);return e>-1?new Kn(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new Gn(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=IA(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:c,match:f}=this.frontier[u],p,g=null;if(t==1&&(a?f.matchType(a.type)||(g=f.fillBefore(ge.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:g};if(t==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=IA(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ke(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=IA(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new ke(ud(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new ke(ud(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,f=0,p=[],{match:g,type:_}=this.frontier[t];if(i){for(let b=0;b<i.childCount;b++)p.push(i.child(b));g=g.matchFragment(i)}let A=u.size+e-(a.content.size-a.openEnd);for(;f<u.childCount;){let b=u.child(f),S=g.matchType(b.type);if(!S)break;f++,(f>1||c==0||b.content.size)&&(g=S,p.push(J2(b.mark(_.allowedMarks(b.marks)),f==1?c:0,f==u.childCount?A:-1)))}let T=f==u.childCount;T||(A=-1),this.placed=cd(this.placed,t,ge.from(p)),this.frontier[t].match=g,T&&A<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,S=u;b<A;b++){let C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=T?e==0?ke.empty:new ke(ud(a.content,e-1,1),e-1,A<0?a.openEnd:e-1):new ke(ud(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!OA(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=OA(e,t,i,r,s);if(a){for(let u=t-1;u>=0;u--){let{match:c,type:f}=this.frontier[u],p=OA(e,u,f,c,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=cd(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=cd(this.placed,this.depth,ge.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ge.empty,!0);t.childCount&&(this.placed=cd(this.placed,this.frontier.length,t))}}function ud(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ud(n.firstChild.content,e-1,t)))}function cd(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(cd(n.lastChild.content,e-1,t)))}function IA(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function J2(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,J2(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ge.empty,!0)))),n.copy(r)}function OA(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,a);return u&&!cK(t,s.content,a)?u:null}function cK(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function hK(n){return n.spec.defining||n.spec.definingForContent}function fK(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(X2(i,s,r))return n.step(new Gn(e,t,r));let a=eL(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let _=i.depth,A=i.pos-1;_>0;_--,A--){let T=i.node(_).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;a.indexOf(_)>-1?u=_:i.before(_)==A&&a.splice(1,0,-_)}let c=a.indexOf(u),f=[],p=r.openStart;for(let _=r.content,A=0;;A++){let T=_.firstChild;if(f.push(T),A==r.openStart)break;_=T.content}for(let _=p-1;_>=0;_--){let A=f[_],T=hK(A.type);if(T&&!A.sameMarkup(i.node(Math.abs(u)-1)))p=_;else if(T||!A.type.isTextblock)break}for(let _=r.openStart;_>=0;_--){let A=(_+p+1)%(r.openStart+1),T=f[A];if(T)for(let b=0;b<a.length;b++){let S=a[(b+c)%a.length],C=!0;S<0&&(C=!1,S=-S);let L=i.node(S-1),j=i.index(S-1);if(L.canReplaceWith(j,j,T.type,T.marks))return n.replace(i.before(S),C?s.after(S):t,new ke(Z2(r.content,0,r.openStart,A),A,r.openEnd))}}let g=n.steps.length;for(let _=a.length-1;_>=0&&(n.replace(e,t,r),!(n.steps.length>g));_--){let A=a[_];A<0||(e=i.before(A),t=s.after(A))}}function Z2(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Z2(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(ge.empty,!0))}return n}function dK(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=lK(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new ke(ge.from(r),0,0))}function pK(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=eL(r,i);for(let a=0;a<s.length;a++){let u=s[a],c=a==s.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function eL(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class sh extends Nr{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return In.fromReplace(e,this.pos,this.pos+1,new ke(ge.from(i),0,t.isLeaf?0:1))}getMap(){return ki.empty}invert(e){return new sh(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new sh(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new sh(t.pos,t.attr,t.value)}}Nr.jsonID("attr",sh);class Jd extends Nr{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return In.ok(r)}getMap(){return ki.empty}invert(e){return new Jd(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Jd(t.attr,t.value)}}Nr.jsonID("docAttr",Jd);let Sh=class extends Error{};Sh=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Sh.prototype=Object.create(Error.prototype);Sh.prototype.constructor=Sh;Sh.prototype.name="TransformError";class tL{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Xd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Sh(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=ke.empty){let i=N_(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new ke(ge.from(r),0,0))}delete(e,t){return this.replace(e,t,ke.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return fK(this,e,t,r),this}replaceRangeWith(e,t,r){return dK(this,e,t,r),this}deleteRange(e,t){return pK(this,e,t),this}lift(e,t){return JG(this,e,t),this}join(e,t=1){return aK(this,e,t),this}wrap(e,t){return tK(this,e,t),this}setBlockType(e,t=e,r,i=null){return nK(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return iK(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new sh(e,t,r)),this}setDocAttribute(e,t){return this.step(new Jd(e,t)),this}addNodeMark(e,t){return this.step(new Ya(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof qt)t.isInSet(r.marks)&&this.step(new Bu(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new Bu(e,s)),i=s.removeFromSet(i);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return sK(this,e,t,r),this}addMark(e,t,r){return YG(this,e,t,r),this}removeMark(e,t,r){return QG(this,e,t,r),this}clearIncompatible(e,t,r){return uS(this,e,t,r),this}}const NA=Object.create(null);class rt{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new mK(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ke.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:c,$to:f}=a[u],p=e.mapping.slice(s);e.replaceRange(p.map(c.pos),p.map(f.pos),u?ke.empty:t),u==0&&pI(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s],c=e.mapping.slice(r),f=c.map(a.pos),p=c.map(u.pos);s?e.deleteRange(f,p):(e.replaceRangeWith(f,p,t),pI(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Je(e):qc(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?qc(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):qc(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Li(e.node(0))}static atStart(e){return qc(e,e,0,0,1)||new Li(e)}static atEnd(e){return qc(e,e,e.content.size,e.childCount,-1)||new Li(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=NA[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in NA)throw new RangeError("Duplicate use of selection JSON ID "+e);return NA[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Je.between(this.$anchor,this.$head).getBookmark()}}rt.prototype.visible=!0;class mK{constructor(e,t){this.$from=e,this.$to=t}}let fI=!1;function dI(n){!fI&&!n.parent.inlineContent&&(fI=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Je extends rt{constructor(e,t=e){dI(e),dI(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return rt.near(r);let i=e.resolve(t.map(this.anchor));return new Je(i.parent.inlineContent?i:r,r)}replace(e,t=ke.empty){if(super.replace(e,t),t==ke.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new M_(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Je(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=rt.findFrom(t,r,!0)||rt.findFrom(t,-r,!0);if(s)t=s.$head;else return rt.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(rt.findFrom(e,-r,!0)||rt.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Je(e,t)}}rt.jsonID("text",Je);class M_{constructor(e,t){this.anchor=e,this.head=t}map(e){return new M_(e.map(this.anchor),e.map(this.head))}resolve(e){return Je.between(e.resolve(this.anchor),e.resolve(this.head))}}class qe extends rt{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?rt.near(s):new qe(s)}content(){return new ke(ge.from(this.node),0,0)}eq(e){return e instanceof qe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new hS(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new qe(e.resolve(t.anchor))}static create(e,t){return new qe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}qe.prototype.visible=!1;rt.jsonID("node",qe);class hS{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new M_(r,r):new hS(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&qe.isSelectable(r)?new qe(t):rt.near(t)}}class Li extends rt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ke.empty){if(t==ke.empty){e.delete(0,e.doc.content.size);let r=rt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Li(e)}map(e){return new Li(e)}eq(e){return e instanceof Li}getBookmark(){return gK}}rt.jsonID("all",Li);const gK={map(){return this},resolve(n){return new Li(n)}};function qc(n,e,t,r,i,s=!1){if(e.inlineContent)return Je.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!s&&qe.isSelectable(u))return qe.create(n,t-(i<0?u.nodeSize:0))}else{let c=qc(n,u,t+i,i<0?u.childCount:0,i,s);if(c)return c}t+=u.nodeSize*i}return null}function pI(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Gn||i instanceof Kn))return;let s=n.mapping.maps[r],a;s.forEach((u,c,f,p)=>{a==null&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const mI=1,gI=2,yI=4;class yK extends tL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|mI)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&mI)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=gI,this}ensureMarks(e){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&gI)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||qt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(rt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=yI,this}get scrolledIntoView(){return(this.updated&yI)>0}}function _I(n,e){return!e||!n?n:n.bind(e)}class hd{constructor(e,t,r){this.name=e,this.init=_I(t.init,r),this.apply=_I(t.apply,r)}}const _K=[new hd("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new hd("selection",{init(n,e){return n.selection||rt.atStart(e.doc)},apply(n){return n.selection}}),new hd("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new hd("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class MA{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=_K.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new hd(r.key,r.spec.state,r))})}}class Yc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let c=i?i[a].n:0,f=i?i[a].state:this,p=c<t.length&&u.spec.appendTransaction.call(u,c?t.slice(c):t,f,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Yc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new yK(this)}static create(e){let t=new MA(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Yc(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new MA(this.schema,e.plugins),r=t.fields,i=new Yc(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new MA(e.schema,e.plugins),s=new Yc(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=sl.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=rt.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],f=c.spec.state;if(c.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){s[a.name]=f.fromJSON.call(c,e,t[u],s);return}}s[a.name]=a.init(e,s)}}),s}}function nL(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=nL(i,e,{})),t[r]=i}return t}class Jn{constructor(e){this.spec=e,this.props={},e.props&&nL(e.props,this,this.props),this.key=e.key?e.key.key:rL("plugin")}getState(e){return e[this.key]}}const DA=Object.create(null);function rL(n){return n in DA?n+"$"+ ++DA[n]:(DA[n]=0,n+"$")}class fi{constructor(e="key"){this.key=rL(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const cr=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},wh=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let oE=null;const Ho=function(n,e,t){let r=oE||(oE=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},vK=function(){oE=null},ju=function(n,e,t,r){return t&&(vI(n,e,t,r,-1)||vI(n,e,t,r,1))},AK=/^(img|br|input|textarea|hr)$/i;function vI(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ss(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Ap(n)||AK.test(n.nodeName)||n.contentEditable=="false")return!1;e=cr(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?ss(n):0}else return!1}}function ss(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function TK(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=ss(n)}else if(n.parentNode&&!Ap(n))e=cr(n),n=n.parentNode;else return null}}function EK(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ap(n))e=cr(n)+1,n=n.parentNode;else return null}}function bK(n,e,t){for(let r=e==0,i=e==ss(n);r||i;){if(n==t)return!0;let s=cr(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==ss(n)}}function Ap(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const D_=function(n){return n.focusNode&&ju(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function hu(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function SK(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function wK(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(ss(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(ss(r.startContainer),r.startOffset)}}}const po=typeof navigator<"u"?navigator:null,AI=typeof document<"u"?document:null,kl=po&&po.userAgent||"",aE=/Edge\/(\d+)/.exec(kl),iL=/MSIE \d/.exec(kl),lE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kl),ui=!!(iL||lE||aE),al=iL?document.documentMode:lE?+lE[1]:aE?+aE[1]:0,Cs=!ui&&/gecko\/(\d+)/i.test(kl);Cs&&+(/Firefox\/(\d+)/.exec(kl)||[0,0])[1];const uE=!ui&&/Chrome\/(\d+)/.exec(kl),xr=!!uE,sL=uE?+uE[1]:0,qr=!ui&&!!po&&/Apple Computer/.test(po.vendor),Rh=qr&&(/Mobile\/\w+/.test(kl)||!!po&&po.maxTouchPoints>2),is=Rh||(po?/Mac/.test(po.platform):!1),RK=po?/Win/.test(po.platform):!1,Wo=/Android \d/.test(kl),Tp=!!AI&&"webkitFontSmoothing"in AI.documentElement.style,CK=Tp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function xK(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Uo(n,e){return typeof n=="number"?n:n[e]}function kK(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function TI(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=wh(a);continue}let u=a,c=u==s.body,f=c?xK(s):kK(u),p=0,g=0;if(e.top<f.top+Uo(r,"top")?g=-(f.top-e.top+Uo(i,"top")):e.bottom>f.bottom-Uo(r,"bottom")&&(g=e.bottom-e.top>f.bottom-f.top?e.top+Uo(i,"top")-f.top:e.bottom-f.bottom+Uo(i,"bottom")),e.left<f.left+Uo(r,"left")?p=-(f.left-e.left+Uo(i,"left")):e.right>f.right-Uo(r,"right")&&(p=e.right-f.right+Uo(i,"right")),p||g)if(c)s.defaultView.scrollBy(p,g);else{let A=u.scrollLeft,T=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let b=u.scrollLeft-A,S=u.scrollTop-T;e={left:e.left-b,top:e.top-S,right:e.right-b,bottom:e.bottom-S}}let _=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(_))break;a=_=="absolute"?a.offsetParent:wh(a)}}function IK(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(s,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=t-20){r=u,i=c.top;break}}return{refDOM:r,refTop:i,stack:oL(n.dom)}}function oL(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=wh(r));return e}function OK({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;aL(t,r==0?0:r-e)}function aL(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Vc=null;function NK(n){if(n.setActive)return n.setActive();if(Vc)return n.focus(Vc);let e=oL(n);n.focus(Vc==null?{get preventScroll(){return Vc={preventScroll:!0},!0}}:void 0),Vc||(Vc=!1,aL(e,0))}function lL(n,e){let t,r=2e8,i,s=0,a=e.top,u=e.top,c,f;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let _;if(p.nodeType==1)_=p.getClientRects();else if(p.nodeType==3)_=Ho(p).getClientRects();else continue;for(let A=0;A<_.length;A++){let T=_[A];if(T.top<=a&&T.bottom>=u){a=Math.max(T.bottom,a),u=Math.min(T.top,u);let b=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(b<r){t=p,r=b,i=b&&t.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,p.nodeType==1&&b&&(s=g+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!c&&T.left<=e.left&&T.right>=e.left&&(c=p,f={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!t&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(s=g+1)}}return!t&&c&&(t=c,i=f,r=0),t&&t.nodeType==3?MK(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:lL(t,i)}function MK(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Ma(r,1);if(s.top!=s.bottom&&fS(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function fS(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function DK(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function PK(n,e,t){let{node:r,offset:i}=lL(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function LK(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let u=n.docView.nearestDesc(s,!0),c;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((c=u.dom.getBoundingClientRect()).width||c.height)&&(u.node.isBlock&&u.parent&&(!a&&c.left>r.left||c.top>r.top?i=u.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(i=u.posAfter),a=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function uL(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let u=a.getClientRects();for(let c=0;c<u.length;c++){let f=u[c];if(fS(e,f))return uL(a,e,f)}}if((s=(s+1)%r)==i)break}return n}function VK(n,e){let t=n.dom.ownerDocument,r,i=0,s=wK(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=n.dom.getBoundingClientRect();if(!fS(e,f)||(a=uL(n.dom,e,f),!a))return null}if(qr)for(let f=a;r&&f;f=wh(f))f.draggable&&(r=void 0);if(a=DK(a,e),r){if(Cs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let f;Tp&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=LK(n,r,i,e))}u==null&&(u=PK(n,a,e));let c=n.docView.nearestDesc(a,!0);return{pos:u,inside:c?c.posAtStart-c.border:-1}}function EI(n){return n.top<n.bottom||n.left<n.right}function Ma(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(EI(r))return r}return Array.prototype.find.call(t,EI)||n.getBoundingClientRect()}const UK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function cL(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Tp||Cs;if(r.nodeType==3)if(a&&(UK.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let c=Ma(Ho(r,i,i),t);if(Cs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Ma(Ho(r,i-1,i-1),-1);if(f.top==c.top){let p=Ma(Ho(r,i,i+1),-1);if(p.top!=c.top)return Xf(p,p.left<f.left)}}return c}else{let c=i,f=i,p=t<0?1:-1;return t<0&&!i?(f++,p=-1):t>=0&&i==r.nodeValue.length?(c--,p=1):t<0?c--:f++,Xf(Ma(Ho(r,c,f),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return PA(c.getBoundingClientRect(),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];if(c.nodeType==1)return PA(c.getBoundingClientRect(),!0)}return PA(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1],f=c.nodeType==3?Ho(c,ss(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(f)return Xf(Ma(f,1),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let f=c?c.nodeType==3?Ho(c,0,a?0:1):c.nodeType==1?c:null:null;if(f)return Xf(Ma(f,-1),!0)}return Xf(Ma(r.nodeType==3?Ho(r):r,-t),t>=0)}function Xf(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function PA(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function hL(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function zK(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return hL(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let a=cL(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=Ho(u,0,u.nodeValue.length).getClientRects();else continue;for(let f=0;f<c.length;f++){let p=c[f];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const BK=/[\u0590-\u08ac]/;function jK(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,u=n.domSelection();return u?!BK.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?s:a:hL(n,e,()=>{let{focusNode:c,focusOffset:f,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),_=u.caretBidiLevel;u.modify("move",t,"character");let A=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:T,focusOffset:b}=n.domSelectionRange(),S=T&&!A.contains(T.nodeType==1?T:T.parentNode)||c==T&&f==b;try{u.collapse(p,g),c&&(c!=p||f!=g)&&u.extend&&u.extend(c,f)}catch{}return _!=null&&(u.caretBidiLevel=_),S}):r.pos==r.start()||r.pos==r.end()}let bI=null,SI=null,wI=!1;function FK(n,e,t){return bI==e&&SI==t?wI:(bI=e,SI=t,wI=t=="up"||t=="down"?zK(n,e,t):jK(n,e,t))}const us=0,RI=1,_u=2,mo=3;class Ep{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=us,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>cr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let u=i.children[a];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],u=s+a.size;if(u>e||a instanceof dL){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof fL&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?cr(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?cr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,u=0;;u++){let c=this.children[u],f=a+c.size;if(i==-1&&e<=f){let p=a+c.border;if(e>=p&&t<=f-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,p);e=a;for(let g=u;g>0;g--){let _=this.children[g-1];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(1)){i=cr(_.dom)+1;break}e-=_.size}i==-1&&(i=0)}if(i>-1&&(f>t||u==this.children.length-1)){t=f;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=cr(g.dom);break}t+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let A=0,T=0;A<this.children.length;A++){let b=this.children[A],S=T+b.size;if(s>T&&a<S)return b.setSelection(e-T-b.border,t-T-b.border,r,i);T=S}let u=this.domFromPos(e,e?-1:1),c=t==e?u:this.domFromPos(t,t?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((Cs||qr)&&e==t){let{node:A,offset:T}=u;if(A.nodeType==3){if(g=!!(T&&A.nodeValue[T-1]==`
`),g&&T==A.nodeValue.length)for(let b=A,S;b;b=b.parentNode){if(S=b.nextSibling){S.nodeName=="BR"&&(u=c={node:S.parentNode,offset:cr(S)+1});break}let C=b.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let b=A.childNodes[T-1];g=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(Cs&&p.focusNode&&p.focusNode!=c.node&&p.focusNode.nodeType==1){let A=p.focusNode.childNodes[p.focusOffset];A&&A.contentEditable=="false"&&(i=!0)}if(!(i||g&&qr)&&ju(u.node,u.offset,p.anchorNode,p.anchorOffset)&&ju(c.node,c.offset,p.focusNode,p.focusOffset))return;let _=!1;if((f.extend||e==t)&&!g){f.collapse(u.node,u.offset);try{e!=t&&f.extend(c.node,c.offset),_=!0}catch{}}if(!_){if(e>t){let T=u;u=c,c=T}let A=document.createRange();A.setEnd(c.node,c.offset),A.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(A)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+s.border,c=a-s.border;if(e>=u&&t<=c){this.dirty=e==r||t==a?_u:RI,e==u&&t==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=mo:s.markDirty(e-u,t-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?_u:mo}r=a}this.dirty=_u}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?_u:RI;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class fL extends Ep{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==us&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class HK extends Ep{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Fu extends Ep{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=Xu.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Fu(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&mo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=mo&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=us){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=us}}slice(e,t,r){let i=Fu.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=hE(s,t,a,r)),e>0&&(s=hE(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ll extends Ep{constructor(e,t,r,i,s,a,u,c,f){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,s,a){let u=s.nodeViews[t.type.name],c,f=u&&u(t,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),p=f&&f.dom,g=f&&f.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=Xu.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let _=p;return p=gL(p,r,t),f?c=new qK(e,t,r,i,p,g||null,_,f,s,a+1):t.isText?new P_(e,t,r,i,p,_,s):new ll(e,t,r,i,p,g||null,_,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ge.empty)}return e}matchesNode(e,t,r){return this.dirty==us&&e.eq(this.node)&&yy(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,u=s&&s.pos<0,c=new GK(this,a&&a.node,e);YK(this.node,this.innerDeco,(f,p,g)=>{f.spec.marks?c.syncToMarks(f.spec.marks,r,e):f.type.side>=0&&!g&&c.syncToMarks(p==this.node.childCount?qt.none:this.node.child(p).marks,r,e),c.placeWidget(f,e,i)},(f,p,g,_)=>{c.syncToMarks(f.marks,r,e);let A;c.findNodeMatch(f,p,g,_)||u&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(A=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(f,p,g,A,e)||c.updateNextNode(f,p,g,e,_,i)||c.addNode(f,p,g,e,i),i+=f.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==_u)&&(a&&this.protectLocalComposition(e,a),pL(this.contentDOM,this.children,e),Rh&&QK(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Je)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,u=XK(this.node.content,a,r-t,i-t);return u<0?null:{node:s,pos:u,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new HK(this,s,t,i);e.input.compositionNodes.push(a),this.children=hE(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==mo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=us}updateOuterDeco(e){if(yy(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=mL(this.dom,this.nodeDOM,cE(this.outerDeco,this.node,t),cE(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function CI(n,e,t,r,i){gL(r,e,n);let s=new ll(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class P_ extends ll{constructor(e,t,r,i,s,a,u){super(e,t,r,i,s,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==mo||this.dirty!=us&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=us||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=us,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new P_(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=mo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class dL extends Ep{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==us&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class qK extends ll{constructor(e,t,r,i,s,a,u,c,f,p){super(e,t,r,i,s,a,u,f,p),this.spec=c}update(e,t,r,i){if(this.dirty==mo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function pL(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=xI(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof Fu){let c=r?r.previousSibling:n.lastChild;pL(a.contentDOM,a.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=xI(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Sd=function(n){n&&(this.nodeName=n)};Sd.prototype=Object.create(null);const vu=[new Sd];function cE(n,e,t){if(n.length==0)return vu;let r=t?vu[0]:new Sd,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new Sd(a.nodeName));for(let u in a){let c=a[u];c!=null&&(t&&i.length==1&&i.push(r=new Sd(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return i}function mL(n,e,t,r){if(t==vu&&r==vu)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],u=t[s];if(s){let c;u&&u.nodeName==a.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),u=vu[0]),i=c}$K(i,u||vu[0],a)}return i}function $K(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function gL(n,e,t){return mL(n,n,vu,cE(e,t,n.nodeType!=1))}function yy(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function xI(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class GK{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=KK(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=us,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let f=this.top.children[c];if(f.matchesMark(e[s])&&!this.isLocked(f.dom)){u=c;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let c=Fu.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let f=this.top.children[u];if(f.matchesNode(e,t,r)&&!this.preMatch.matched.has(f)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==mo&&a.dom==a.contentDOM&&(a.dirty=_u),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let u=this.index;u<this.top.children.length;u++){let c=this.top.children[u];if(c instanceof ll){let f=this.preMatch.matched.get(c);if(f!=null&&f!=s)return!1;let p=c.dom,g,_=this.isLocked(p)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=mo&&yy(t,c.outerDeco));if(!_&&c.update(e,t,r,i))return this.destroyBetween(this.index,u),c.dom!=p&&(this.changed=!0),this.index++,!0;if(!_&&(g=this.recreateWrapper(c,e,t,r,i,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=_u,g.updateChildren(i,a+1),g.dirty=us),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!yy(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=ll.create(this.top,t,r,i,s,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let c of u.children)c.parent=u}return e.destroy(),u}addNode(e,t,r,i,s){let a=ll.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new fL(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Fu;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof P_)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qr||xr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new dL(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function KK(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let f=t.children[r-1];if(f instanceof Fu)t=f,r=f.children.length;else{u=f,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=u.node;if(c){if(c!=n.child(i-1))break;--i,s.set(u,i),a.push(u)}}return{index:i,matched:s,matches:a.reverse()}}function WK(n,e){return n.type.side-e.type.side}function YK(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let f=0;f<n.childCount;f++){let p=n.child(f);r(p,i,e.forChild(s,p),f),s+=p.nodeSize}return}let a=0,u=[],c=null;for(let f=0;;){let p,g;for(;a<i.length&&i[a].to==s;){let S=i[a++];S.widget&&(p?(g||(g=[p])).push(S):p=S)}if(p)if(g){g.sort(WK);for(let S=0;S<g.length;S++)t(g[S],f,!!c)}else t(p,f,!!c);let _,A;if(c)A=-1,_=c,c=null;else if(f<n.childCount)A=f,_=n.child(f++);else break;for(let S=0;S<u.length;S++)u[S].to<=s&&u.splice(S--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)u.push(i[a++]);let T=s+_.nodeSize;if(_.isText){let S=T;a<i.length&&i[a].from<S&&(S=i[a].from);for(let C=0;C<u.length;C++)u[C].to<S&&(S=u[C].to);S<T&&(c=_.cut(S-s),_=_.cut(0,S-s),T=S,A=-1)}else for(;a<i.length&&i[a].to<T;)a++;let b=_.isInline&&!_.isLeaf?u.filter(S=>!S.inline):u.slice();r(_,b,e.forChild(s,_),A),s=T}}function QK(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function XK(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),u=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<n.childCount;){let f=n.child(i++);if(s+=f.nodeSize,!f.isText)break;c+=f.text}if(s>=t){if(s>=r&&c.slice(r-e.length-u,r-u)==e)return r-e.length;let f=u<r?c.lastIndexOf(e,r-u-1):-1;if(f>=0&&f+e.length+u>=t)return u+f;if(t==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function hE(n,e,t,r,i){let s=[];for(let a=0,u=0;a<n.length;a++){let c=n[a],f=u,p=u+=c.size;f>=t||p<=e?s.push(c):(f<e&&s.push(c.slice(0,e-f,r)),i&&(s.push(i),i=void 0),p>t&&s.push(c.slice(t-f,c.size,r)))}return s}function dS(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),c,f;if(D_(t)){for(c=a;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&qe.isSelectable(g)&&i.parent&&!(g.isInline&&bK(t.focusNode,t.focusOffset,i.dom))){let _=i.posBefore;f=new qe(a==_?u:r.resolve(_))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=a,_=a;for(let A=0;A<t.rangeCount;A++){let T=t.getRangeAt(A);g=Math.min(g,n.docView.posFromDOM(T.startContainer,T.startOffset,1)),_=Math.max(_,n.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(g<0)return null;[c,a]=_==n.state.selection.anchor?[_,g]:[g,_],u=r.resolve(a)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let p=r.resolve(c);if(!f){let g=e=="pointer"||n.state.selection.head<u.pos&&!s?1:-1;f=pS(n,p,u,g)}return f}function yL(n){return n.editable?n.hasFocus():vL(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Xo(n,e=!1){let t=n.state.selection;if(_L(n,t),!!yL(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&xr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ju(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)ZK(n);else{let{anchor:r,head:i}=t,s,a;kI&&!(t instanceof Je)&&(t.$from.parent.inlineContent||(s=II(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=II(n,t.to))),n.docView.setSelection(r,i,n,e),kI&&(s&&OI(s),a&&OI(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&JK(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const kI=qr||xr&&sL<63;function II(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(qr&&i&&i.contentEditable=="false")return LA(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return LA(i);if(s)return LA(s)}}function LA(n){return n.contentEditable="true",qr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function OI(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function JK(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!yL(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function ZK(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,cr(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&ui&&al<=11&&(r.disabled=!0,r.disabled=!1)}function _L(n,e){if(e instanceof qe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(NI(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else NI(n)}function NI(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function pS(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Je.between(e,t,r)}function MI(n){return n.editable&&!n.hasFocus()?!1:vL(n)}function vL(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function eW(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ju(e.node,e.offset,t.anchorNode,t.anchorOffset)}function fE(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&rt.findFrom(s,e)}function Da(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function DI(n,e,t){let r=n.state.selection;if(r instanceof Je)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Da(n,new Je(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=fE(n.state,e);return i&&i instanceof qe?Da(n,i):!1}else if(!(is&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?qe.isSelectable(s)?Da(n,new qe(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Tp?Da(n,new Je(n.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof qe&&r.node.isInline)return Da(n,new Je(e>0?r.$to:r.$from));{let i=fE(n.state,e);return i?Da(n,i):!1}}}function _y(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function wd(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Uc(n,e){return e<0?tW(n):nW(n)}function tW(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(Cs&&t.nodeType==1&&r<_y(t)&&wd(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(wd(u,-1))i=t,s=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(AL(t))break;{let u=t.previousSibling;for(;u&&wd(u,-1);)i=t.parentNode,s=cr(u),u=u.previousSibling;if(u)t=u,r=_y(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?dE(n,t,r):i&&dE(n,i,s)}function nW(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=_y(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(wd(u,1))s=t,a=++r;else break}else{if(AL(t))break;{let u=t.nextSibling;for(;u&&wd(u,1);)s=u.parentNode,a=cr(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=_y(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&dE(n,s,a)}function AL(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function rW(n,e){for(;n&&e==n.childNodes.length&&!Ap(n);)e=cr(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function iW(n,e){for(;n&&!e&&!Ap(n);)e=cr(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function dE(n,e,t){if(e.nodeType!=3){let s,a;(a=rW(e,t))?(e=a,t=0):(s=iW(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(D_(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Xo(n)},50)}function PI(n,e){let t=n.state.doc.resolve(e);if(!(xr||RK)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function LI(n,e,t){let r=n.state.selection;if(r instanceof Je&&!r.empty||t.indexOf("s")>-1||is&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=fE(n.state,e);if(a&&a instanceof qe)return Da(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,u=r instanceof Li?rt.near(a,e):rt.findFrom(a,e);return u?Da(n,u):!1}return!1}function VI(n,e){if(!(n.state.selection instanceof Je))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function UI(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function sW(n){if(!qr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;UI(n,r,"true"),setTimeout(()=>UI(n,r,"false"),20)}return!1}function oW(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function aW(n,e){let t=e.keyCode,r=oW(e);if(t==8||is&&t==72&&r=="c")return VI(n,-1)||Uc(n,-1);if(t==46&&!e.shiftKey||is&&t==68&&r=="c")return VI(n,1)||Uc(n,1);if(t==13||t==27)return!0;if(t==37||is&&t==66&&r=="c"){let i=t==37?PI(n,n.state.selection.from)=="ltr"?-1:1:-1;return DI(n,i,r)||Uc(n,i)}else if(t==39||is&&t==70&&r=="c"){let i=t==39?PI(n,n.state.selection.from)=="ltr"?1:-1:1;return DI(n,i,r)||Uc(n,i)}else{if(t==38||is&&t==80&&r=="c")return LI(n,-1,r)||Uc(n,-1);if(t==40||is&&t==78&&r=="c")return sW(n)||LI(n,1,r)||Uc(n,1);if(r==(is?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function mS(n,e){n.someProp("transformCopied",A=>{e=A(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let A=r.firstChild;t.push(A.type.name,A.attrs!=A.type.defaultAttrs?A.attrs:null),r=A.content}let a=n.someProp("clipboardSerializer")||Xu.fromSchema(n.state.schema),u=RL(),c=u.createElement("div");c.appendChild(a.serializeFragment(r,{document:u}));let f=c.firstChild,p,g=0;for(;f&&f.nodeType==1&&(p=wL[f.nodeName.toLowerCase()]);){for(let A=p.length-1;A>=0;A--){let T=u.createElement(p[A]);for(;c.firstChild;)T.appendChild(c.firstChild);c.appendChild(T),g++}f=c.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${g?` -${g}`:""} ${JSON.stringify(t)}`);let _=n.someProp("clipboardTextSerializer",A=>A(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:_,slice:e}}function TL(n,e,t,r,i){let s=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let c=e&&(r||s||!t);if(c){if(n.someProp("transformPastedText",_=>{e=_(e,s||r,n)}),s)return e?new ke(ge.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ke.empty;let g=n.someProp("clipboardTextParser",_=>_(e,i,r,n));if(g)u=g;else{let _=i.marks(),{schema:A}=n.state,T=Xu.fromSchema(A);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let S=a.appendChild(document.createElement("p"));b&&S.appendChild(T.serializeNode(A.text(b,_)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),a=hW(t),Tp&&fW(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let _=a.firstChild;for(;_&&_.nodeType!=1;)_=_.nextSibling;if(!_)break;a=_}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||ol.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||p),context:i,ruleFromNode(_){return _.nodeName=="BR"&&!_.nextSibling&&_.parentNode&&!lW.test(_.parentNode.nodeName)?{ignore:!0}:null}})),p)u=dW(zI(u,+p[1],+p[2]),p[4]);else if(u=ke.maxOpen(uW(u.content,i),!0),u.openStart||u.openEnd){let g=0,_=0;for(let A=u.content.firstChild;g<u.openStart&&!A.type.spec.isolating;g++,A=A.firstChild);for(let A=u.content.lastChild;_<u.openEnd&&!A.type.spec.isolating;_++,A=A.lastChild);u=zI(u,g,_)}return n.someProp("transformPasted",g=>{u=g(u,n)}),u}const lW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function uW(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(u=>{if(!a)return;let c=i.findWrapping(u.type),f;if(!c)return a=null;if(f=a.length&&s.length&&bL(c,s,u,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=SL(a[a.length-1],s.length));let p=EL(u,c);a.push(p),i=i.matchType(p.type),s=c}}),a)return ge.from(a)}return n}function EL(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ge.from(n));return n}function bL(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=bL(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ge.from(EL(t,n,i+1))))}}function SL(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,SL(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ge.empty,!0);return n.copy(t.append(r))}function pE(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(s=0),i<r-1&&(u=pE(u,e,t,r,i+1,s)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(ge.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function zI(n,e,t){return e<n.openStart&&(n=new ke(pE(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ke(pE(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const wL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let BI=null;function RL(){return BI||(BI=document.implementation.createHTMLDocument("title"))}let VA=null;function cW(n){let e=window.trustedTypes;return e?(VA||(VA=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),VA.createHTML(n)):n}function hW(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=RL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&wL[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=cW(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function fW(n){let e=n.querySelectorAll(xr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function dW(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let c=t.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;i=ge.from(c.create(r[u+1],i)),s++,a++}return new ke(i,s,a)}const $r={},Gr={},pW={touchstart:!0,touchmove:!0};class mW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function gW(n){for(let e in $r){let t=$r[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{_W(n,r)&&!gS(n,r)&&(n.editable||!(r.type in Gr))&&t(n,r)},pW[e]?{passive:!0}:void 0)}qr&&n.dom.addEventListener("input",()=>null),mE(n)}function Qa(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function yW(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function mE(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>gS(n,r))})}function gS(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function _W(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function vW(n,e){!gS(n,e)&&$r[e.type]&&(n.editable||!(e.type in Gr))&&$r[e.type](n,e)}Gr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!xL(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Wo&&xr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Rh&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,hu(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||aW(n,t)?t.preventDefault():Qa(n,"key")};Gr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Gr.keypress=(n,e)=>{let t=e;if(xL(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||is&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Je)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function L_(n){return{left:n.clientX,top:n.clientY}}function AW(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function yS(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,u=>a>s.depth?u(n,t,s.nodeAfter,s.before(a),i,!0):u(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function oh(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function TW(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&qe.isSelectable(r)?(oh(n,new qe(t)),!0):!1}function EW(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof qe&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let u=a>s.depth?s.nodeAfter:s.node(a);if(qe.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(oh(n,qe.create(n.state.doc,i)),!0):!1}function bW(n,e,t,r,i){return yS(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?EW(n,t):TW(n,t))}function SW(n,e,t,r){return yS(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function wW(n,e,t,r){return yS(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||RW(n,t,r)}function RW(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(oh(n,Je.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(a.inlineContent)oh(n,Je.create(r,u+1,u+1+a.content.size));else if(qe.isSelectable(a))oh(n,qe.create(r,u));else continue;return!0}}function _S(n){return vy(n)}const CL=is?"metaKey":"ctrlKey";$r.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=_S(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&AW(t,n.input.lastClick)&&!t[CL]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let a=n.posAtCoords(L_(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new CW(n,a,t,!!r)):(s=="doubleClick"?SW:wW)(n,a.pos,a.inside,t)?t.preventDefault():Qa(n,"pointer"))};class CW{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[CL],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:f}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof qe&&f.from<=a&&f.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(L_(e))),this.updateAllowDefault(e),this.allowDefault||!t?Qa(this.view,"pointer"):bW(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qr&&this.mightDrag&&!this.mightDrag.node.isAtom||xr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(oh(this.view,rt.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Qa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}$r.touchstart=n=>{n.input.lastTouch=Date.now(),_S(n),Qa(n,"pointer")};$r.touchmove=n=>{n.input.lastTouch=Date.now(),Qa(n,"pointer")};$r.contextmenu=n=>_S(n);function xL(n,e){return n.composing?!0:qr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const xW=Wo?5e3:-1;Gr.compositionstart=Gr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Je&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),vy(n,!0),n.markCursor=null;else if(vy(n,!e.selection.empty),Cs&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}kL(n,xW)};Gr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,kL(n,20))};function kL(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>vy(n),e))}function IL(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=IW());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function kW(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=TK(e.focusNode,e.focusOffset),r=EK(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function IW(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function vy(n,e=!1){if(!(Wo&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),IL(n),e||n.docView&&n.docView.dirty){let t=dS(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function OW(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Zd=ui&&al<15||Rh&&CK<604;$r.copy=Gr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Zd?null:t.clipboardData,a=r.content(),{dom:u,text:c}=mS(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",c)):OW(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function NW(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function MW(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ep(n,r.value,null,i,e):ep(n,r.textContent,r.innerHTML,i,e)},50)}function ep(n,e,t,r,i){let s=TL(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,i,s||ke.empty)))return!0;if(!s)return!1;let a=NW(s),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function OL(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Gr.paste=(n,e)=>{let t=e;if(n.composing&&!Wo)return;let r=Zd?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ep(n,OL(r),r.getData("text/html"),i,t)?t.preventDefault():MW(n,t)};class NL{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const DW=is?"altKey":"ctrlKey";function ML(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[DW]}$r.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(L_(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof qe?i.to-1:i.to))){if(r&&r.mightDrag)a=qe.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(a=qe.create(n.state.doc,g.posBefore))}}let u=(a||n.state.selection).content(),{dom:c,text:f,slice:p}=mS(n,u);(!t.dataTransfer.files.length||!xr||sL>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Zd?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",Zd||t.dataTransfer.setData("text/plain",f),n.dragging=new NL(p,ML(n,t),a)};$r.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Gr.dragover=Gr.dragenter=(n,e)=>e.preventDefault();Gr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(L_(t));if(!i)return;let s=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",T=>{a=T(a,n)}):a=TL(n,OL(t.dataTransfer),Zd?null:t.dataTransfer.getData("text/html"),!1,s);let u=!!(r&&ML(n,t));if(n.someProp("handleDrop",T=>T(n,t,a||ke.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let c=a?Q2(n.state.doc,s.pos,a):s.pos;c==null&&(c=s.pos);let f=n.state.tr;if(u){let{node:T}=r;T?T.replace(f):f.deleteSelection()}let p=f.mapping.map(c),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,_=f.doc;if(g?f.replaceRangeWith(p,p,a.content.firstChild):f.replaceRange(p,p,a),f.doc.eq(_))return;let A=f.doc.resolve(p);if(g&&qe.isSelectable(a.content.firstChild)&&A.nodeAfter&&A.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new qe(A));else{let T=f.mapping.map(c);f.mapping.maps[f.mapping.maps.length-1].forEach((b,S,C,L)=>T=L),f.setSelection(pS(n,A,f.doc.resolve(T)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))};$r.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Xo(n)},20))};$r.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};$r.beforeinput=(n,e)=>{if(xr&&Wo&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,hu(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Gr)$r[n]=Gr[n];function tp(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ay{constructor(e,t){this.toDOM=e,this.spec=t||ku,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Mi(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ay&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ul{constructor(e,t){this.attrs=e,this.spec=t||ku}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Mi(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ul&&tp(this.attrs,e.attrs)&&tp(this.spec,e.spec)}static is(e){return e.type instanceof ul}destroy(){}}class vS{constructor(e,t){this.attrs=e,this.spec=t||ku}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Mi(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof vS&&tp(this.attrs,e.attrs)&&tp(this.spec,e.spec)}destroy(){}}class Mi{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Mi(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Mi(e,e,new Ay(t,r))}static inline(e,t,r,i){return new Mi(e,t,new ul(r,i))}static node(e,t,r,i){return new Mi(e,t,new vS(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ul}get widget(){return this.type instanceof Ay}}const $c=[],ku={};class kn{constructor(e,t){this.local=e.length?e:$c,this.children=t.length?t:$c}static create(e,t){return t.length?Ty(t,e,0,ku):Er}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,s)}}map(e,t,r){return this==Er||e.maps.length==0?this:this.mapInner(e,t,0,0,r||ku)}mapInner(e,t,r,i,s){let a;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,i);c&&c.type.valid(t,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?PW(this.children,a||[],e,t,r,i,s):a?new kn(a.sort(Iu),$c):Er}add(e,t){return t.length?this==Er?kn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((u,c)=>{let f=c+r,p;if(p=PL(t,u,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(u,p,f+1):i.splice(s,0,c,c+u.nodeSize,Ty(p,u,f+1,ku)),s+=3}});let a=DL(s?LL(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new kn(a.length?this.local.concat(a).sort(Iu):this.local,i||this.children)}remove(e){return e.length==0||this==Er?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,u=r[s]+t,c=r[s+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<c&&(e[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(a,u+1);f!=Er?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new kn(i,r):Er}forChild(e,t){if(this==Er)return this;if(t.isLeaf)return kn.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,a=s+t.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<a&&c.to>s&&c.type instanceof ul){let f=Math.max(s,c.from)-s,p=Math.min(a,c.to)-s;f<p&&(i||(i=[])).push(c.copy(f,p))}}if(i){let u=new kn(i.sort(Iu),$c);return r?new Fa([u,r]):u}return r||Er}eq(e){if(this==e)return!0;if(!(e instanceof kn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return AS(this.localsInner(e))}localsInner(e){if(this==Er)return $c;if(e.inlineContent||!this.local.some(ul.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ul||t.push(this.local[r]);return t}forEachSet(e){e(this)}}kn.empty=new kn([],[]);kn.removeOverlap=AS;const Er=kn.empty;class Fa{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,ku));return Fa.from(r)}forChild(e,t){if(t.isLeaf)return kn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Er&&(s instanceof Fa?r=r.concat(s.members):r.push(s))}return Fa.from(r)}eq(e){if(!(e instanceof Fa)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?AS(r?t:t.sort(Iu)):$c}static from(e){switch(e.length){case 0:return Er;case 1:return e[0];default:return new Fa(e.every(t=>t instanceof kn)?e:e.reduce((t,r)=>t.concat(r instanceof kn?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function PW(n,e,t,r,i,s,a){let u=n.slice();for(let f=0,p=s;f<t.maps.length;f++){let g=0;t.maps[f].forEach((_,A,T,b)=>{let S=b-T-(A-_);for(let C=0;C<u.length;C+=3){let L=u[C+1];if(L<0||_>L+p-g)continue;let j=u[C]+p-g;A>=j?u[C+1]=_<=j?-2:-1:_>=p&&S&&(u[C]+=S,u[C+1]+=S)}g+=S}),p=t.maps[f].map(p,-1)}let c=!1;for(let f=0;f<u.length;f+=3)if(u[f+1]<0){if(u[f+1]==-2){c=!0,u[f+1]=-1;continue}let p=t.map(n[f]+s),g=p-i;if(g<0||g>=r.content.size){c=!0;continue}let _=t.map(n[f+1]+s,-1),A=_-i,{index:T,offset:b}=r.content.findIndex(g),S=r.maybeChild(T);if(S&&b==g&&b+S.nodeSize==A){let C=u[f+2].mapInner(t,S,p+1,n[f]+s+1,a);C!=Er?(u[f]=g,u[f+1]=A,u[f+2]=C):(u[f+1]=-2,c=!0)}else c=!0}if(c){let f=LW(u,n,e,t,i,s,a),p=Ty(f,r,0,a);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,_=0;g<p.children.length;g+=3){let A=p.children[g];for(;_<u.length&&u[_]<A;)_+=3;u.splice(_,0,p.children[g],p.children[g+1],p.children[g+2])}}return new kn(e.sort(Iu),u)}function DL(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Mi(i.from+e,i.to+e,i.type))}return t}function LW(n,e,t,r,i,s,a){function u(c,f){for(let p=0;p<c.local.length;p++){let g=c.local[p].map(r,i,f);g?t.push(g):a.onRemove&&a.onRemove(c.local[p].spec)}for(let p=0;p<c.children.length;p+=3)u(c.children[p+2],c.children[p]+f+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&u(n[c+2],e[c]+s+1);return t}function PL(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function LL(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ty(n,e,t,r){let i=[],s=!1;e.forEach((u,c)=>{let f=PL(n,u,c+t);if(f){s=!0;let p=Ty(f,u,t+c+1,r);p!=Er&&i.push(c,c+u.nodeSize,p)}});let a=DL(s?LL(n):n,-t).sort(Iu);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new kn(a,i):Er}function Iu(n,e){return n.from-e.from||n.to-e.to}function AS(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),jI(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),jI(e,i,r.copy(s.from,r.to)));break}}}return e}function jI(n,e,t){for(;e<n.length&&Iu(t,n[e])>0;)e++;n.splice(e,0,t)}function UA(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Er&&e.push(r)}),n.cursorWrapper&&e.push(kn.create(n.state.doc,[n.cursorWrapper.deco])),Fa.from(e)}const VW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},UW=ui&&al<=11;class zW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class BW{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new zW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ui&&al<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),UW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,VW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(MI(this.view)){if(this.suppressingSelectionUpdates)return Xo(this.view);if(ui&&al<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ju(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=wh(s))t.add(s);for(let s=e.anchorNode;s;s=wh(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&MI(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,u=!1,c=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],c);g&&(s=s<0?g.from:Math.min(g.from,s),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(u=!0))}if(Cs&&c.length){let p=c.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,_]=p;g.parentNode&&g.parentNode.parentNode==_.parentNode?_.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let _ of p){let A=_.parentNode;A&&A.nodeName=="LI"&&(!g||HW(e,g)!=A)&&_.remove()}}}let f=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&D_(r)&&(f=dS(e))&&f.eq(rt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xo(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),jW(e)),this.handleDOMChange(s,a,u,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xo(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ui&&al<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:_}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(s=_)}let a=i&&i.parentNode==e.target?cr(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?cr(s):e.target.childNodes.length,f=r.localPosFromDOM(e.target,c,1);return{from:u,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let FI=new WeakMap,HI=!1;function jW(n){if(!FI.has(n)&&(FI.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Cs,HI)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),HI=!0}}function qI(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return ju(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function FW(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return qI(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?qI(n,t):null}function HW(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function qW(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:u}=n.docView.parseRange(e,t),c=n.domSelectionRange(),f,p=c.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:c.anchorOffset}],D_(c)||f.push({node:c.focusNode,offset:c.focusOffset})),xr&&n.input.lastKeyCode===8)for(let S=s;S>i;S--){let C=r.childNodes[S-1],L=C.pmViewDesc;if(C.nodeName=="BR"&&!L){s=S;break}if(!L||L.size)break}let g=n.state.doc,_=n.someProp("domParser")||ol.fromSchema(n.state.schema),A=g.resolve(a),T=null,b=_.parse(r,{topNode:A.parent,topMatch:A.parent.contentMatchAt(A.index()),topOpen:!0,from:i,to:s,preserveWhitespace:A.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:$W,context:A});if(f&&f[0].pos!=null){let S=f[0].pos,C=f[1]&&f[1].pos;C==null&&(C=S),T={anchor:S+a,head:C+a}}return{doc:b,sel:T,from:a,to:u}}function $W(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(qr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||qr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const GW=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function KW(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let x=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,z=dS(n,x);if(z&&!n.state.selection.eq(z)){if(xr&&Wo&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",B=>B(n,hu(13,"Enter"))))return;let U=n.state.tr.setSelection(z);x=="pointer"?U.setMeta("pointer",!0):x=="key"&&U.scrollIntoView(),s&&U.setMeta("composition",s),n.dispatch(U)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let c=n.state.selection,f=qW(n,e,t),p=n.state.doc,g=p.slice(f.from,f.to),_,A;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(_=n.state.selection.to,A="end"):(_=n.state.selection.from,A="start"),n.input.lastKeyCode=null;let T=QW(g.content,f.doc.content,f.from,_,A);if(T&&n.input.domChangeCount++,(Rh&&n.input.lastIOSEnter>Date.now()-225||Wo)&&i.some(x=>x.nodeType==1&&!GW.test(x.nodeName))&&(!T||T.endA>=T.endB)&&n.someProp("handleKeyDown",x=>x(n,hu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!T)if(r&&c instanceof Je&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))T={start:c.from,endA:c.to,endB:c.to};else{if(f.sel){let x=$I(n,n.state.doc,f.sel);if(x&&!x.eq(n.state.selection)){let z=n.state.tr.setSelection(x);s&&z.setMeta("composition",s),n.dispatch(z)}}return}n.state.selection.from<n.state.selection.to&&T.start==T.endB&&n.state.selection instanceof Je&&(T.start>n.state.selection.from&&T.start<=n.state.selection.from+2&&n.state.selection.from>=f.from?T.start=n.state.selection.from:T.endA<n.state.selection.to&&T.endA>=n.state.selection.to-2&&n.state.selection.to<=f.to&&(T.endB+=n.state.selection.to-T.endA,T.endA=n.state.selection.to)),ui&&al<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>f.from&&f.doc.textBetween(T.start-f.from-1,T.start-f.from+1)=="  "&&(T.start--,T.endA--,T.endB--);let b=f.doc.resolveNoCache(T.start-f.from),S=f.doc.resolveNoCache(T.endB-f.from),C=p.resolve(T.start),L=b.sameParent(S)&&b.parent.inlineContent&&C.end()>=T.endA,j;if((Rh&&n.input.lastIOSEnter>Date.now()-225&&(!L||i.some(x=>x.nodeName=="DIV"||x.nodeName=="P"))||!L&&b.pos<f.doc.content.size&&(!b.sameParent(S)||!b.parent.inlineContent)&&!/\S/.test(f.doc.textBetween(b.pos,S.pos,"",""))&&(j=rt.findFrom(f.doc.resolve(b.pos+1),1,!0))&&j.head>b.pos)&&n.someProp("handleKeyDown",x=>x(n,hu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>T.start&&YW(p,T.start,T.endA,b,S)&&n.someProp("handleKeyDown",x=>x(n,hu(8,"Backspace")))){Wo&&xr&&n.domObserver.suppressSelectionUpdates();return}xr&&T.endB==T.start&&(n.input.lastChromeDelete=Date.now()),Wo&&!L&&b.start()!=S.start()&&S.parentOffset==0&&b.depth==S.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==T.endA&&(T.endB-=2,S=f.doc.resolveNoCache(T.endB-f.from),setTimeout(()=>{n.someProp("handleKeyDown",function(x){return x(n,hu(13,"Enter"))})},20));let q=T.start,V=T.endA,D,N,k;if(L){if(b.pos==S.pos)ui&&al<=11&&b.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xo(n),20)),D=n.state.tr.delete(q,V),N=p.resolve(T.start).marksAcross(p.resolve(T.endA));else if(T.endA==T.endB&&(k=WW(b.parent.content.cut(b.parentOffset,S.parentOffset),C.parent.content.cut(C.parentOffset,T.endA-C.start()))))D=n.state.tr,k.type=="add"?D.addMark(q,V,k.mark):D.removeMark(q,V,k.mark);else if(b.parent.child(b.index()).isText&&b.index()==S.index()-(S.textOffset?0:1)){let x=b.parent.textBetween(b.parentOffset,S.parentOffset);if(n.someProp("handleTextInput",z=>z(n,q,V,x)))return;D=n.state.tr.insertText(x,q,V)}}if(D||(D=n.state.tr.replace(q,V,f.doc.slice(T.start-f.from,T.endB-f.from))),f.sel){let x=$I(n,D.doc,f.sel);x&&!(xr&&n.composing&&x.empty&&(T.start!=T.endB||n.input.lastChromeDelete<Date.now()-100)&&(x.head==q||x.head==D.mapping.map(V)-1)||ui&&x.empty&&x.head==q)&&D.setSelection(x)}N&&D.ensureMarks(N),s&&D.setMeta("composition",s),n.dispatch(D.scrollIntoView())}function $I(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:pS(n,e.resolve(t.anchor),e.resolve(t.head))}function WW(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,u,c;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],a="add",c=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&s.length==1)u=s[0],a="remove",c=p=>p.mark(u.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(c(e.child(p)));if(ge.from(f).eq(n))return{mark:u,type:a}}function YW(n,e,t,r,i){if(t-e<=i.pos-r.pos||zA(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&t==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(zA(s,!0,!0));return!a.parent.isTextblock||a.pos>t||zA(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function zA(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function QW(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(a,u));r-=a+c-s}if(a<s&&n.size<e.size){let c=r<=s&&r>=a?s-r:0;s-=c,s&&s<e.size&&GI(e.textBetween(s-1,s+1))&&(s+=c?1:-1),u=s+(u-a),a=s}else if(u<s){let c=r<=s&&r>=u?s-r:0;s-=c,s&&s<n.size&&GI(n.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-u),u=s}return{start:s,endA:a,endB:u}}function GI(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class XW{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new mW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(XI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=YI(this),WI(this),this.nodeViews=QI(this),this.docView=CI(this.state.doc,KI(this),UA(this),this.dom,this),this.domObserver=new BW(this,(r,i,s,a)=>KW(this,r,i,s,a)),this.domObserver.start(),gW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&mE(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(XI),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(IL(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let A=QI(this);ZW(A,this.nodeViews)&&(this.nodeViews=A,s=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&mE(this),this.editable=YI(this),WI(this);let c=UA(this),f=KI(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,f,c);(g||!e.selection.eq(i.selection))&&(a=!0);let _=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&IK(this);if(a){this.domObserver.stop();let A=g&&(ui||xr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&JW(i.selection,e.selection);if(g){let T=xr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=kW(this)),(s||!this.docView.update(e.doc,f,c,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=CI(e.doc,f,c,this.dom,this)),T&&!this.trackWrites&&(A=!0)}A||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&eW(this))?Xo(this,A):(_L(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():_&&OK(_)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof qe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&TI(this,t.getBoundingClientRect(),e)}else TI(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new NL(e.slice,e.move,i<0?void 0:qe.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let u=s[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(ui){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&NK(this.dom),Xo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return VK(this,e)}coordsAtPos(e,t=1){return cL(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return FK(this,t||this.state,e)}pasteHTML(e,t){return ep(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ep(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return mS(this,e)}destroy(){this.docView&&(yW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],UA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,vK())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return vW(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?qr&&this.root.nodeType===11&&SK(this.dom.ownerDocument)==this.dom&&FW(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function KI(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Mi.node(0,n.state.doc.content.size,e)]}function WI(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Mi.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function YI(n){return!n.someProp("editable",e=>e(n.state)===!1)}function JW(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function QI(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function ZW(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function XI(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Al={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ey={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},eY=typeof navigator<"u"&&/Mac/.test(navigator.platform),tY=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var hr=0;hr<10;hr++)Al[48+hr]=Al[96+hr]=String(hr);for(var hr=1;hr<=24;hr++)Al[hr+111]="F"+hr;for(var hr=65;hr<=90;hr++)Al[hr]=String.fromCharCode(hr+32),Ey[hr]=String.fromCharCode(hr);for(var BA in Al)Ey.hasOwnProperty(BA)||(Ey[BA]=Al[BA]);function nY(n){var e=eY&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||tY&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ey:Al)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const rY=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),iY=typeof navigator<"u"&&/Win/.test(navigator.platform);function sY(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))rY?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function oY(n){let e=Object.create(null);for(let t in n)e[sY(t)]=n[t];return e}function jA(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function aY(n){return new Jn({props:{handleKeyDown:VL(n)}})}function VL(n){let e=oY(n);return function(t,r){let i=nY(r),s,a=e[jA(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[jA(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(iY&&r.ctrlKey&&r.altKey)&&(s=Al[r.keyCode])&&s!=i){let u=e[jA(s,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const TS=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function UL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const zL=(n,e,t)=>{let r=UL(n,t);if(!r)return!1;let i=ES(r);if(!i){let a=r.blockRange(),u=a&&zh(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(WL(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Ch(s,"end")||qe.isSelectable(s)))for(let a=r.depth;;a--){let u=N_(n.doc,r.before(a),r.after(a),ke.empty);if(u&&u.slice.size<u.to-u.from){if(e){let c=n.tr.step(u);c.setSelection(Ch(s,"end")?rt.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):qe.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},lY=(n,e,t)=>{let r=UL(n,t);if(!r)return!1;let i=ES(r);return i?BL(n,i,e):!1},uY=(n,e,t)=>{let r=FL(n,t);if(!r)return!1;let i=bS(r);return i?BL(n,i,e):!1};function BL(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=e.nodeAfter,u=a,c=e.pos+1;for(;!u.isTextblock;c++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let f=N_(n.doc,s,c,ke.empty);if(!f||f.from!=s||f instanceof Gn&&f.slice.size>=c-s)return!1;if(t){let p=n.tr.step(f);p.setSelection(Je.create(p.doc,s)),t(p.scrollIntoView())}return!0}function Ch(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const jL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=ES(r)}let a=s&&s.nodeBefore;return!a||!qe.isSelectable(a)?!1:(e&&e(n.tr.setSelection(qe.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function ES(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function FL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const HL=(n,e,t)=>{let r=FL(n,t);if(!r)return!1;let i=bS(r);if(!i)return!1;let s=i.nodeAfter;if(WL(n,i,e,1))return!0;if(r.parent.content.size==0&&(Ch(s,"start")||qe.isSelectable(s))){let a=N_(n.doc,r.before(),r.after(),ke.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(Ch(s,"start")?rt.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):qe.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},qL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=bS(r)}let a=s&&s.nodeAfter;return!a||!qe.isSelectable(a)?!1:(e&&e(n.tr.setSelection(qe.create(n.doc,s.pos)).scrollIntoView()),!0)};function bS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const cY=(n,e)=>{let t=n.selection,r=t instanceof qe,i;if(r){if(t.node.isTextblock||!xl(n.doc,t.from))return!1;i=t.from}else if(i=O_(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(qe.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},hY=(n,e)=>{let t=n.selection,r;if(t instanceof qe){if(t.node.isTextblock||!xl(n.doc,t.to))return!1;r=t.to}else if(r=O_(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},fY=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&zh(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},$L=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function SS(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const dY=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=SS(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let u=t.after(),c=n.tr.replaceWith(u,u,a.createAndFill());c.setSelection(rt.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},GL=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Li||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=SS(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,s.createAndFill());u.setSelection(Je.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},KL=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Qo(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&zh(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function pY(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof qe&&e.selection.node.isBlock)return!r.parentOffset||!Qo(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,u,c=!1,f=!1;for(let A=r.depth;;A--)if(r.node(A).isBlock){c=r.end(A)==r.pos+(r.depth-A),f=r.start(A)==r.pos-(r.depth-A),u=SS(r.node(A-1).contentMatchAt(r.indexAfter(A-1))),s.unshift(c&&u?{type:u}:null),a=A;break}else{if(A==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof Je||e.selection instanceof Li)&&p.deleteSelection();let g=p.mapping.map(r.pos),_=Qo(p.doc,g,s.length,s);if(_||(s[0]=u?{type:u}:null,_=Qo(p.doc,g,s.length,s)),!_)return!1;if(p.split(g,s.length,s),!c&&f&&r.node(a).type!=u){let A=p.mapping.map(r.before(a)),T=p.doc.resolve(A);u&&r.node(a-1).canReplaceWith(T.index(),T.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const mY=pY(),gY=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(qe.create(n.doc,i))),!0)};function yY(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||xl(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function WL(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,u,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&yY(n,e,t))return!0;let f=!c&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(a[0]||s.type).validEnd){if(t){let A=e.pos+s.nodeSize,T=ge.empty;for(let C=a.length-1;C>=0;C--)T=ge.from(a[C].create(null,T));T=ge.from(i.copy(T));let b=n.tr.step(new Kn(e.pos-1,A,e.pos,A,new ke(T,1,0),a.length,!0)),S=b.doc.resolve(A+2*a.length);S.nodeAfter&&S.nodeAfter.type==i.type&&xl(b.doc,S.pos)&&b.join(S.pos),t(b.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&c?null:rt.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),_=g&&zh(g);if(_!=null&&_>=e.depth)return t&&t(n.tr.lift(g,_).scrollIntoView()),!0;if(f&&Ch(s,"start",!0)&&Ch(i,"end")){let A=i,T=[];for(;T.push(A),!A.isTextblock;)A=A.lastChild;let b=s,S=1;for(;!b.isTextblock;b=b.firstChild)S++;if(A.canReplace(A.childCount,A.childCount,b.content)){if(t){let C=ge.empty;for(let j=T.length-1;j>=0;j--)C=ge.from(T[j].copy(C));let L=n.tr.step(new Kn(e.pos-T.length,e.pos+s.nodeSize,e.pos+S,e.pos+s.nodeSize-S,new ke(C,T.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function YL(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Je.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const _Y=YL(-1),vY=YL(1);function AY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),u=a&&cS(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function JI(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(a,u,(c,f)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)i=!0;else{let p=t.doc.resolve(f),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:c}}=t.selection.ranges[a];s.setBlockType(u,c,n,e)}r(s.scrollIntoView())}return!0}}function wS(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}wS(TS,zL,jL);wS(TS,HL,qL);wS($L,GL,KL,mY);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function TY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s);if(!a)return!1;let u=r?t.tr:null;return EY(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function EY(n,e,t,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);s=new my(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new my(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=cS(s,t,r,e);return u?(n&&bY(n,e,u,i,t),!0):!1}function bY(n,e,t,r,i){let s=ge.empty;for(let p=t.length-1;p>=0;p--)s=ge.from(t[p].type.create(t[p].attrs,s));n.step(new Kn(e.start-(r?2:0),e.end,e.start,e.end,new ke(s,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,c=e.start+t.length-(r?2:0),f=e.parent;for(let p=e.startIndex,g=e.endIndex,_=!0;p<g;p++,_=!1)!_&&Qo(n.doc,c,u)&&(n.split(c,u),c+=2*u),c+=f.child(p).nodeSize;return n}function SY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?wY(e,t,n,s):RY(e,t,s):!0:!1}}function wY(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Kn(s-1,a,s,a,new ke(ge.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new my(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=zh(r);if(u==null)return!1;i.lift(r,u);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return xl(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function RY(n,e,t){let r=n.tr,i=t.parent;for(let A=t.end,T=t.endIndex-1,b=t.startIndex;T>b;T--)A-=i.child(T).nodeSize,r.delete(A-1,A+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,c=t.endIndex==i.childCount,f=s.node(-1),p=s.index(-1);if(!f.canReplace(p+(u?0:1),p+1,a.content.append(c?ge.empty:ge.from(i))))return!1;let g=s.pos,_=g+a.nodeSize;return r.step(new Kn(g-(u?1:0),_+(c?1:0),g+1,_-1,new ke((u?ge.empty:ge.from(i.copy(ge.empty))).append(c?ge.empty:ge.from(i.copy(ge.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function CY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let u=s.parent,c=u.child(a-1);if(c.type!=n)return!1;if(t){let f=c.lastChild&&c.lastChild.type==u.type,p=ge.from(f?n.create():null),g=new ke(ge.from(n.create(null,ge.from(u.type.create(null,p)))),f?3:1,0),_=s.start,A=s.end;t(e.tr.step(new Kn(_-(f?3:1),A,_,A,g,1,!0)).scrollIntoView())}return!0}}function V_(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class U_{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([u,c])=>[u,(...p)=>{const g=c(...p)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u=[],c=!!e,f=e||s.tr,p=()=>(!c&&t&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(f),u.every(_=>_===!0)),g={...Object.fromEntries(Object.entries(r).map(([_,A])=>[_,(...b)=>{const S=this.buildProps(f,t),C=A(...b)(S);return u.push(C),g}])),run:p};return g}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,a=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([c,f])=>[c,(...p)=>f(...p)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u={tr:e,editor:i,view:a,state:V_({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,f])=>[c,(...p)=>f(...p)(u)]))}};return u}}class xY{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function De(n,e,t){return n.config[e]===void 0&&n.parent?De(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?De(n.parent,e,t):null}):n.config[e]}function z_(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function QL(n){const e=[],{nodeExtensions:t,markExtensions:r}=z_(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage,extensions:i},c=De(a,"addGlobalAttributes",u);if(!c)return;c().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([_,A])=>{e.push({type:g,name:_,attribute:{...s,...A}})})})})}),i.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},c=De(a,"addAttributes",u);if(!c)return;const f=c();Object.entries(f).forEach(([p,g])=>{const _={...s,...g};typeof(_==null?void 0:_.default)=="function"&&(_.default=_.default()),_!=null&&_.isRequired&&(_==null?void 0:_.default)===void 0&&delete _.default,e.push({type:a.name,name:p,attribute:_})})}),e}function Qn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Xn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],f=u.filter(p=>!c.includes(p));r[i]=[...c,...f].join(" ")}else if(i==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;c.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());f.set(g,_)}),u.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());f.set(g,_)}),r[i]=Array.from(f.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[i]=s}),r},{})}function gE(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Xn(t,r),{})}function XL(n){return typeof n=="function"}function at(n,e=void 0,...t){return XL(n)?e?n.bind(e)(...t):n(...t):n}function kY(n={}){return Object.keys(n).length===0&&n.constructor===Object}function IY(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function ZI(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):IY(t.getAttribute(a.name));return u==null?s:{...s,[a.name]:u}},{});return{...r,...i}}}}function eO(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&kY(t)?!1:t!=null))}function OY(n,e){var t;const r=QL(n),{nodeExtensions:i,markExtensions:s}=z_(n),a=(t=i.find(f=>De(f,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(i.map(f=>{const p=r.filter(C=>C.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},_=n.reduce((C,L)=>{const j=De(L,"extendNodeSchema",g);return{...C,...j?j(f):{}}},{}),A=eO({..._,content:at(De(f,"content",g)),marks:at(De(f,"marks",g)),group:at(De(f,"group",g)),inline:at(De(f,"inline",g)),atom:at(De(f,"atom",g)),selectable:at(De(f,"selectable",g)),draggable:at(De(f,"draggable",g)),code:at(De(f,"code",g)),whitespace:at(De(f,"whitespace",g)),linebreakReplacement:at(De(f,"linebreakReplacement",g)),defining:at(De(f,"defining",g)),isolating:at(De(f,"isolating",g)),attrs:Object.fromEntries(p.map(C=>{var L;return[C.name,{default:(L=C==null?void 0:C.attribute)===null||L===void 0?void 0:L.default}]}))}),T=at(De(f,"parseHTML",g));T&&(A.parseDOM=T.map(C=>ZI(C,p)));const b=De(f,"renderHTML",g);b&&(A.toDOM=C=>b({node:C,HTMLAttributes:gE(C,p)}));const S=De(f,"renderText",g);return S&&(A.toText=S),[f.name,A]})),c=Object.fromEntries(s.map(f=>{const p=r.filter(S=>S.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},_=n.reduce((S,C)=>{const L=De(C,"extendMarkSchema",g);return{...S,...L?L(f):{}}},{}),A=eO({..._,inclusive:at(De(f,"inclusive",g)),excludes:at(De(f,"excludes",g)),group:at(De(f,"group",g)),spanning:at(De(f,"spanning",g)),code:at(De(f,"code",g)),attrs:Object.fromEntries(p.map(S=>{var C;return[S.name,{default:(C=S==null?void 0:S.attribute)===null||C===void 0?void 0:C.default}]}))}),T=at(De(f,"parseHTML",g));T&&(A.parseDOM=T.map(S=>ZI(S,p)));const b=De(f,"renderHTML",g);return b&&(A.toDOM=S=>b({mark:S,HTMLAttributes:gE(S,p)})),[f.name,A]}));return new z2({topNode:a,nodes:u,marks:c})}function FA(n,e){return e.nodes[n]||e.marks[n]||null}function tO(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function RS(n,e){const t=Xu.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const NY=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,u)=>{var c,f;const p=((f=(c=i.type.spec).toText)===null||f===void 0?void 0:f.call(c,{node:i,pos:s,parent:a,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-s))}),t};function CS(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class B_{constructor(e){this.find=e.find,this.handler=e.handler}}const MY=(n,e)=>{if(CS(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Zm(n){var e;const{editor:t,from:r,to:i,text:s,rules:a,plugin:u}=n,{view:c}=t;if(c.composing)return!1;const f=c.state.doc.resolve(r);if(f.parent.type.spec.code||!((e=f.nodeBefore||f.nodeAfter)===null||e===void 0)&&e.marks.find(_=>_.type.spec.code))return!1;let p=!1;const g=NY(f)+s;return a.forEach(_=>{if(p)return;const A=MY(g,_.find);if(!A)return;const T=c.state.tr,b=V_({state:c.state,transaction:T}),S={from:r-(A[0].length-s.length),to:i},{commands:C,chain:L,can:j}=new U_({editor:t,state:b});_.handler({state:b,range:S,match:A,commands:C,chain:L,can:j})===null||!T.steps.length||(T.setMeta(u,{transform:T,from:r,to:i,text:s}),c.dispatch(T),p=!0)}),p}function DY(n){const{editor:e,rules:t}=n,r=new Jn({state:{init(){return null},apply(i,s,a){const u=i.getMeta(r);if(u)return u;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:p}=c;typeof p=="string"?p=p:p=RS(ge.from(p),a.schema);const{from:g}=c,_=g+p.length;Zm({editor:e,from:g,to:_,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,u){return Zm({editor:e,from:s,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Zm({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Zm({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function PY(n){return Object.prototype.toString.call(n).slice(8,-1)}function eg(n){return PY(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function j_(n,e){const t={...n};return eg(n)&&eg(e)&&Object.keys(e).forEach(r=>{eg(e[r])&&eg(n[r])?t[r]=j_(n[r],e[r]):t[r]=e[r]}),t}class go{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(De(this,"addOptions",{name:this.name}))),this.storage=at(De(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new go(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>j_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new go(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(De(t,"addOptions",{name:t.name})),t.storage=at(De(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(f=>(f==null?void 0:f.type.name)===t.name))return!1;const c=a.find(f=>(f==null?void 0:f.type.name)===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function LY(n){return typeof n=="number"}class VY{constructor(e){this.find=e.find,this.handler=e.handler}}const UY=(n,e,t)=>{if(CS(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function zY(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:a,dropEvent:u}=n,{commands:c,chain:f,can:p}=new U_({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,i,(A,T)=>{if(!A.isTextblock||A.type.spec.code)return;const b=Math.max(r,T),S=Math.min(i,T+A.content.size),C=A.textBetween(b-T,S-T,void 0,"￼");UY(C,s.find,a).forEach(j=>{if(j.index===void 0)return;const q=b+j.index+1,V=q+j[0].length,D={from:t.tr.mapping.map(q),to:t.tr.mapping.map(V)},N=s.handler({state:t,range:D,match:j,commands:c,chain:f,can:p,pasteEvent:a,dropEvent:u});g.push(N)})}),g.every(A=>A!==null)}let tg=null;const BY=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function jY(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const c=({state:p,from:g,to:_,rule:A,pasteEvt:T})=>{const b=p.tr,S=V_({state:p,transaction:b});if(!(!zY({editor:e,state:S,from:Math.max(g-1,0),to:_.b-1,rule:A,pasteEvent:T,dropEvent:u})||!b.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return t.map(p=>new Jn({view(g){const _=T=>{var b;r=!((b=g.dom.parentElement)===null||b===void 0)&&b.contains(T.target)?g.dom.parentElement:null,r&&(tg=e)},A=()=>{tg&&(tg=null)};return window.addEventListener("dragstart",_),window.addEventListener("dragend",A),{destroy(){window.removeEventListener("dragstart",_),window.removeEventListener("dragend",A)}}},props:{handleDOMEvents:{drop:(g,_)=>{if(s=r===g.dom.parentElement,u=_,!s){const A=tg;A&&setTimeout(()=>{const T=A.state.selection;T&&A.commands.deleteRange({from:T.from,to:T.to})},10)}return!1},paste:(g,_)=>{var A;const T=(A=_.clipboardData)===null||A===void 0?void 0:A.getData("text/html");return a=_,i=!!(T!=null&&T.includes("data-pm-slice")),!1}}},appendTransaction:(g,_,A)=>{const T=g[0],b=T.getMeta("uiEvent")==="paste"&&!i,S=T.getMeta("uiEvent")==="drop"&&!s,C=T.getMeta("applyPasteRules"),L=!!C;if(!b&&!S&&!L)return;if(L){let{text:V}=C;typeof V=="string"?V=V:V=RS(ge.from(V),A.schema);const{from:D}=C,N=D+V.length,k=BY(V);return c({rule:p,state:A,from:D,to:{b:N},pasteEvt:k})}const j=_.doc.content.findDiffStart(A.doc.content),q=_.doc.content.findDiffEnd(A.doc.content);if(!(!LY(j)||!q||j===q.b))return c({rule:p,state:A,from:j,to:q,pasteEvt:a})}}))}function FY(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Qc{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Qc.resolve(e),this.schema=OY(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Qc.sort(Qc.flatten(e)),r=FY(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=De(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=De(r,"priority")||100,a=De(i,"priority")||100;return s>a?-1:s<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:FA(t.name,this.schema)},i=De(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Qc.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(a=>{const u={name:a.name,options:a.options,storage:a.storage,editor:e,type:FA(a.name,this.schema)},c=[],f=De(a,"addKeyboardShortcuts",u);let p={};if(a.type==="mark"&&De(a,"exitable",u)&&(p.ArrowRight=()=>go.handleExit({editor:e,mark:a})),f){const b=Object.fromEntries(Object.entries(f()).map(([S,C])=>[S,()=>C({editor:e})]));p={...p,...b}}const g=aY(p);c.push(g);const _=De(a,"addInputRules",u);tO(a,e.options.enableInputRules)&&_&&r.push(..._());const A=De(a,"addPasteRules",u);tO(a,e.options.enablePasteRules)&&A&&i.push(...A());const T=De(a,"addProseMirrorPlugins",u);if(T){const b=T();c.push(...b)}return c}).flat();return[DY({editor:e,rules:r}),...jY({editor:e,rules:i}),...s]}get attributes(){return QL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=z_(this.extensions);return Object.fromEntries(t.filter(r=>!!De(r,"addNodeView")).map(r=>{const i=this.attributes.filter(c=>c.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Qn(r.name,this.schema)},a=De(r,"addNodeView",s);if(!a)return[];const u=(c,f,p,g,_)=>{const A=gE(c,i);return a()({node:c,view:f,getPos:p,decorations:g,innerDecorations:_,editor:e,extension:r,HTMLAttributes:A})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:FA(e.name,this.schema)};e.type==="mark"&&(!((t=at(De(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=De(e,"onBeforeCreate",r),s=De(e,"onCreate",r),a=De(e,"onUpdate",r),u=De(e,"onSelectionUpdate",r),c=De(e,"onTransaction",r),f=De(e,"onFocus",r),p=De(e,"onBlur",r),g=De(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),c&&this.editor.on("transaction",c),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}}class Or{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(De(this,"addOptions",{name:this.name}))),this.storage=at(De(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Or(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>j_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Or({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(De(t,"addOptions",{name:t.name})),t.storage=at(De(t,"addStorage",{name:t.name,options:t.options})),t}}function JL(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,i,(c,f,p,g)=>{var _;c.isBlock&&f>r&&(u+=s);const A=a==null?void 0:a[c.type.name];if(A)return p&&(u+=A({node:c,pos:f,parent:p,index:g,range:e})),!1;c.isText&&(u+=(_=c==null?void 0:c.text)===null||_===void 0?void 0:_.slice(Math.max(r,f)-f,i-f))}),u}function ZL(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const HY=Or.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Jn({key:new fi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),c=ZL(t);return JL(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),qY=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),$Y=(n=!1)=>({commands:e})=>e.setContent("",n),GY=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(u,c)=>{if(u.type.isText)return;const{doc:f,mapping:p}=e,g=f.resolve(p.map(c)),_=f.resolve(p.map(c+u.nodeSize)),A=g.blockRange(_);if(!A)return;const T=zh(A);if(u.type.isTextblock){const{defaultType:b}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(A.start,b)}(T||T===0)&&e.lift(A,T)})}),!0},KY=n=>e=>n(e),WY=()=>({state:n,dispatch:e})=>GL(n,e),YY=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new Je(r.doc.resolve(a-1))),!0},QY=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),c=i.after(s);n.delete(u,c).scrollIntoView()}return!0}return!1},XY=n=>({tr:e,state:t,dispatch:r})=>{const i=Qn(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const c=s.before(a),f=s.after(a);e.delete(c,f).scrollIntoView()}return!0}return!1},JY=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},ZY=()=>({state:n,dispatch:e})=>TS(n,e),eQ=()=>({commands:n})=>n.keyboardShortcut("Enter"),tQ=()=>({state:n,dispatch:e})=>dY(n,e);function by(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:CS(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function eV(n,e,t={}){return n.find(r=>r.type===e&&by(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function nO(n,e,t={}){return!!eV(n,e,t)}function xS(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!eV([...i.node.marks],e,t)))return;let a=i.index,u=n.start()+i.offset,c=a+1,f=u+i.node.nodeSize;for(;a>0&&nO([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;c<n.parent.childCount&&nO([...n.parent.child(c).marks],e,t);)f+=n.parent.child(c).nodeSize,c+=1;return{from:u,to:f}}function Il(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const nQ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Il(n,r.schema),{doc:a,selection:u}=t,{$from:c,from:f,to:p}=u;if(i){const g=xS(c,s,e);if(g&&g.from<=f&&g.to>=p){const _=Je.create(a,g.from,g.to);t.setSelection(_)}}return!0},rQ=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function tV(n){return n instanceof Je}function Au(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function nV(n,e=null){if(!e)return null;const t=rt.atStart(n),r=rt.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?Je.create(n,Au(0,i,s),Au(n.content.size,i,s)):Je.create(n,Au(e,i,s),Au(e,i,s))}function iQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function kS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const sQ=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(kS()||iQ())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!tV(t.state.selection))return a(),!0;const u=nV(i.doc,n)||t.state.selection,c=t.state.selection.eq(u);return s&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},oQ=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),aQ=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),rV=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&rV(r)}return n};function ng(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return rV(t)}function Sy(n,e,t){if(n instanceof sl||n instanceof ge)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ge.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),Sy("",e,t)}if(i){if(t.errorOnInvalidContent){let a=!1,u="";const c=new z2({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,u=typeof f=="string"?f:f.outerHTML,null)}]}})});if(t.slice?ol.fromSchema(c).parseSlice(ng(n),t.parseOptions):ol.fromSchema(c).parse(ng(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=ol.fromSchema(e);return t.slice?s.parseSlice(ng(n),t.parseOptions).content:s.parse(ng(n),t.parseOptions)}return Sy("",e,t)}function lQ(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Gn||i instanceof Kn))return;const s=n.mapping.maps[r];let a=0;s.forEach((u,c,f,p)=>{a===0&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const uQ=n=>!("type"in n),cQ=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;try{u=Sy(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck})}catch(T){return s.emit("contentError",{editor:s,error:T,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:c,to:f}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},p=!0,g=!0;if((uQ(u)?u:[u]).forEach(T=>{T.check(),p=p?T.isText&&T.marks.length===0:!1,g=g?T.isBlock:!1}),c===f&&g){const{parent:T}=r.doc.resolve(c);T.isTextblock&&!T.type.spec.code&&!T.childCount&&(c-=1,f+=1)}let A;if(p){if(Array.isArray(e))A=e.map(T=>T.text||"").join("");else if(e instanceof ge){let T="";e.forEach(b=>{b.text&&(T+=b.text)}),A=T}else typeof e=="object"&&e&&e.text?A=e.text:A=e;r.insertText(A,c,f)}else A=u,r.replaceWith(c,f,A);t.updateSelection&&lQ(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:A}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:A})}return!0},hQ=()=>({state:n,dispatch:e})=>cY(n,e),fQ=()=>({state:n,dispatch:e})=>hY(n,e),dQ=()=>({state:n,dispatch:e})=>zL(n,e),pQ=()=>({state:n,dispatch:e})=>HL(n,e),mQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=O_(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},gQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=O_(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},yQ=()=>({state:n,dispatch:e})=>lY(n,e),_Q=()=>({state:n,dispatch:e})=>uY(n,e);function iV(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function vQ(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u+=1){const c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))kS()||iV()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const AQ=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=vQ(n).split(/-(?!$)/),a=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",f=>f(t,u))});return c==null||c.steps.forEach(f=>{const p=f.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function np(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,a=e?Qn(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(g,_)=>{if(g.isText)return;const A=Math.max(r,_),T=Math.min(i,_+g.nodeSize);u.push({node:g,from:A,to:T})});const c=i-r,f=u.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>by(g.node.attrs,t,{strict:!1}));return s?!!f.length:f.reduce((g,_)=>g+_.to-_.from,0)>=c}const TQ=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return np(t,i,e)?fY(t,r):!1},EQ=()=>({state:n,dispatch:e})=>KL(n,e),bQ=n=>({state:e,dispatch:t})=>{const r=Qn(n,e.schema);return SY(r)(e,t)},SQ=()=>({state:n,dispatch:e})=>$L(n,e);function F_(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function rO(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const wQ=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=F_(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Qn(n,r.schema)),u==="mark"&&(a=Il(n,r.schema)),i&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(f,p)=>{s&&s===f.type&&t.setNodeMarkup(p,void 0,rO(f.attrs,e)),a&&f.marks.length&&f.marks.forEach(g=>{a===g.type&&t.addMark(p,p+f.nodeSize,a.create(rO(g.attrs,e)))})})}),!0):!1},RQ=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),CQ=()=>({tr:n,dispatch:e})=>{if(e){const t=new Li(n.doc);n.setSelection(t)}return!0},xQ=()=>({state:n,dispatch:e})=>jL(n,e),kQ=()=>({state:n,dispatch:e})=>qL(n,e),IQ=()=>({state:n,dispatch:e})=>gY(n,e),OQ=()=>({state:n,dispatch:e})=>vY(n,e),NQ=()=>({state:n,dispatch:e})=>_Y(n,e);function yE(n,e,t={},r={}){return Sy(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const MQ=(n,e=!1,t={},r={})=>({editor:i,tr:s,dispatch:a,commands:u})=>{var c,f;const{doc:p}=s;if(t.preserveWhitespace!=="full"){const g=yE(n,i.schema,t,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck});return a&&s.replaceWith(0,p.content.size,g).setMeta("preventUpdate",!e),!0}return a&&s.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(f=r.errorOnInvalidContent)!==null&&f!==void 0?f:i.options.enableContentCheck})};function sV(n,e){const t=Il(e,n.schema),{from:r,to:i,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const u=a.find(c=>c.type.name===t.name);return u?{...u.attrs}:{}}function DQ(n,e){const t=new tL(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function PQ(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function LQ(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function VQ(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function IS(n){return e=>VQ(e.$from,n)}function UQ(n,e){const t={from:0,to:n.content.size};return JL(n,t,e)}function zQ(n,e){const t=Qn(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,u=>{s.push(u)});const a=s.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function oV(n,e){const t=F_(typeof e=="string"?e:e.name,n.schema);return t==="node"?zQ(n,e):t==="mark"?sV(n,e):{}}function BQ(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function jQ(n){const e=BQ(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function FQ(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((u,c)=>{a.push({from:u,to:c})});else{const{from:u,to:c}=t[s];if(u===void 0||c===void 0)return;a.push({from:u,to:c})}a.forEach(({from:u,to:c})=>{const f=e.slice(s).map(u,-1),p=e.slice(s).map(c),g=e.invert().map(f,-1),_=e.invert().map(p);r.push({oldRange:{from:g,to:_},newRange:{from:f,to:p}})})}),jQ(r)}function OS(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),a=xS(s,i.type);a&&r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}function kg(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function _E(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Il(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>by(g.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:g,$to:_})=>{const A=g.pos,T=_.pos;n.doc.nodesBetween(A,T,(b,S)=>{if(!b.isText&&!b.marks.length)return;const C=Math.max(A,S),L=Math.min(T,S+b.nodeSize),j=L-C;a+=j,u.push(...b.marks.map(q=>({mark:q,from:C,to:L})))})}),a===0)return!1;const c=u.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>by(g.mark.attrs,t,{strict:!1})).reduce((g,_)=>g+_.to-_.from,0),f=u.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,_)=>g+_.to-_.from,0);return(c>0?c+f:c)>=a}function HQ(n,e,t={}){if(!e)return np(n,null,t)||_E(n,null,t);const r=F_(e,n.schema);return r==="node"?np(n,e,t):r==="mark"?_E(n,e,t):!1}function iO(n,e){const{nodeExtensions:t}=z_(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=at(De(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function H_(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(H_(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function qQ(n){return n instanceof qe}function $Q(n,e,t){var r;const{selection:i}=e;let s=null;if(tV(i)&&(s=i.$cursor),s){const u=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(u)||!u.some(c=>c.type.excludes(t))}const{ranges:a}=i;return a.some(({$from:u,$to:c})=>{let f=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,c.pos,(p,g,_)=>{if(f)return!1;if(p.isInline){const A=!_||_.type.allowsMarkType(t),T=!!t.isInSet(p.marks)||!p.marks.some(b=>b.type.excludes(t));f=A&&T}return!f}),f})}const GQ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:a,ranges:u}=s,c=Il(n,r.schema);if(i)if(a){const f=sV(r,c);t.addStoredMark(c.create({...f,...e}))}else u.forEach(f=>{const p=f.$from.pos,g=f.$to.pos;r.doc.nodesBetween(p,g,(_,A)=>{const T=Math.max(A,p),b=Math.min(A+_.nodeSize,g);_.marks.find(C=>C.type===c)?_.marks.forEach(C=>{c===C.type&&t.addMark(T,b,c.create({...C.attrs,...e}))}):t.addMark(T,b,c.create(e))})});return $Q(r,t,c)},KQ=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),WQ=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Qn(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>JI(s,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>JI(s,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},YQ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Au(n,0,r.content.size),s=qe.create(r,i);e.setSelection(s)}return!0},QQ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,a=Je.atStart(r).from,u=Je.atEnd(r).to,c=Au(i,a,u),f=Au(s,a,u),p=Je.create(r,c,f);e.setSelection(p)}return!0},XQ=n=>({state:e,dispatch:t})=>{const r=Qn(n,e.schema);return CY(r)(e,t)};function sO(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const JQ=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:u,$to:c}=s,f=i.extensionManager.attributes,p=kg(f,u.node().type.name,u.node().attrs);if(s instanceof qe&&s.node.isBlock)return!u.parentOffset||!Qo(a,u.pos)?!1:(r&&(n&&sO(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=c.parentOffset===c.parent.content.size,_=u.depth===0?void 0:PQ(u.node(-1).contentMatchAt(u.indexAfter(-1)));let A=g&&_?[{type:_,attrs:p}]:void 0,T=Qo(e.doc,e.mapping.map(u.pos),1,A);if(!A&&!T&&Qo(e.doc,e.mapping.map(u.pos),1,_?[{type:_}]:void 0)&&(T=!0,A=_?[{type:_,attrs:p}]:void 0),r){if(T&&(s instanceof Je&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,A),_&&!g&&!u.parentOffset&&u.parent.type!==_)){const b=e.mapping.map(u.before()),S=e.doc.resolve(b);u.node(-1).canReplaceWith(S.index(),S.index()+1,_)&&e.setNodeMarkup(e.mapping.map(u.before()),_)}n&&sO(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return T},ZQ=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var a;const u=Qn(n,r.schema),{$from:c,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||c.depth<2||!c.sameParent(f))return!1;const g=c.node(-1);if(g.type!==u)return!1;const _=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let C=ge.empty;const L=c.index(-1)?1:c.index(-2)?2:3;for(let k=c.depth-L;k>=c.depth-3;k-=1)C=ge.from(c.node(k).copy(C));const j=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,q={...kg(_,c.node().type.name,c.node().attrs),...e},V=((a=u.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(q))||void 0;C=C.append(ge.from(u.createAndFill(null,V)||void 0));const D=c.before(c.depth-(L-1));t.replace(D,c.after(-j),new ke(C,4-L,0));let N=-1;t.doc.nodesBetween(D,t.doc.content.size,(k,x)=>{if(N>-1)return!1;k.isTextblock&&k.content.size===0&&(N=x+1)}),N>-1&&t.setSelection(Je.near(t.doc.resolve(N))),t.scrollIntoView()}return!0}const A=f.pos===c.end()?g.contentMatchAt(0).defaultType:null,T={...kg(_,g.type.name,g.attrs),...e},b={...kg(_,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,f.pos);const S=A?[{type:u,attrs:T},{type:A,attrs:b}]:[{type:u,attrs:T}];if(!Qo(t.doc,c.pos,2))return!1;if(i){const{selection:C,storedMarks:L}=r,{splittableMarks:j}=s.extensionManager,q=L||C.$to.parentOffset&&C.$from.marks();if(t.split(c.pos,2,S).scrollIntoView(),!q||!i)return!0;const V=q.filter(D=>j.includes(D.type.name));t.ensureMarks(V)}return!0},HA=(n,e)=>{const t=IS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&xl(n.doc,t.pos)&&n.join(t.pos),!0},qA=(n,e)=>{const t=IS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&xl(n.doc,r)&&n.join(r),!0},eX=(n,e,t,r={})=>({editor:i,tr:s,state:a,dispatch:u,chain:c,commands:f,can:p})=>{const{extensions:g,splittableMarks:_}=i.extensionManager,A=Qn(n,a.schema),T=Qn(e,a.schema),{selection:b,storedMarks:S}=a,{$from:C,$to:L}=b,j=C.blockRange(L),q=S||b.$to.parentOffset&&b.$from.marks();if(!j)return!1;const V=IS(D=>iO(D.type.name,g))(b);if(j.depth>=1&&V&&j.depth-V.depth<=1){if(V.node.type===A)return f.liftListItem(T);if(iO(V.node.type.name,g)&&A.validContent(V.node.content)&&u)return c().command(()=>(s.setNodeMarkup(V.pos,A),!0)).command(()=>HA(s,A)).command(()=>qA(s,A)).run()}return!t||!q||!u?c().command(()=>p().wrapInList(A,r)?!0:f.clearNodes()).wrapInList(A,r).command(()=>HA(s,A)).command(()=>qA(s,A)).run():c().command(()=>{const D=p().wrapInList(A,r),N=q.filter(k=>_.includes(k.type.name));return s.ensureMarks(N),D?!0:f.clearNodes()}).wrapInList(A,r).command(()=>HA(s,A)).command(()=>qA(s,A)).run()},tX=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,a=Il(n,r.schema);return _E(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},nX=(n,e,t={})=>({state:r,commands:i})=>{const s=Qn(n,r.schema),a=Qn(e,r.schema),u=np(r,s,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),u?i.setNode(a,c):i.setNode(s,{...c,...t})},rX=(n,e={})=>({state:t,commands:r})=>{const i=Qn(n,t.schema);return np(t,i,e)?r.lift(i):r.wrapIn(i,e)},iX=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const a=n.tr,u=s.transform;for(let c=u.steps.length-1;c>=0;c-=1)a.step(u.steps[c].invert(u.docs[c]));if(s.text){const c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,c))}else a.delete(s.from,s.to)}return!0}}return!1},sX=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},oX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,c=Il(n,r.schema),{$from:f,empty:p,ranges:g}=u;if(!i)return!0;if(p&&a){let{from:_,to:A}=u;const T=(s=f.marks().find(S=>S.type===c))===null||s===void 0?void 0:s.attrs,b=xS(f,c,T);b&&(_=b.from,A=b.to),t.removeMark(_,A,c)}else g.forEach(_=>{t.removeMark(_.$from.pos,_.$to.pos,c)});return t.removeStoredMark(c),!0},aX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=F_(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Qn(n,r.schema)),u==="mark"&&(a=Il(n,r.schema)),i&&t.selection.ranges.forEach(c=>{const f=c.$from.pos,p=c.$to.pos;let g,_,A,T;t.selection.empty?r.doc.nodesBetween(f,p,(b,S)=>{s&&s===b.type&&(A=Math.max(S,f),T=Math.min(S+b.nodeSize,p),g=S,_=b)}):r.doc.nodesBetween(f,p,(b,S)=>{S<f&&s&&s===b.type&&(A=Math.max(S,f),T=Math.min(S+b.nodeSize,p),g=S,_=b),S>=f&&S<=p&&(s&&s===b.type&&t.setNodeMarkup(S,void 0,{...b.attrs,...e}),a&&b.marks.length&&b.marks.forEach(C=>{if(a===C.type){const L=Math.max(S,f),j=Math.min(S+b.nodeSize,p);t.addMark(L,j,a.create({...C.attrs,...e}))}}))}),_&&(g!==void 0&&t.setNodeMarkup(g,void 0,{..._.attrs,...e}),a&&_.marks.length&&_.marks.forEach(b=>{a===b.type&&t.addMark(A,T,a.create({...b.attrs,...e}))}))}),!0):!1},lX=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return AY(i,e)(t,r)},uX=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return TY(i,e)(t,r)};var cX=Object.freeze({__proto__:null,blur:qY,clearContent:$Y,clearNodes:GY,command:KY,createParagraphNear:WY,cut:YY,deleteCurrentNode:QY,deleteNode:XY,deleteRange:JY,deleteSelection:ZY,enter:eQ,exitCode:tQ,extendMarkRange:nQ,first:rQ,focus:sQ,forEach:oQ,insertContent:aQ,insertContentAt:cQ,joinBackward:dQ,joinDown:fQ,joinForward:pQ,joinItemBackward:mQ,joinItemForward:gQ,joinTextblockBackward:yQ,joinTextblockForward:_Q,joinUp:hQ,keyboardShortcut:AQ,lift:TQ,liftEmptyBlock:EQ,liftListItem:bQ,newlineInCode:SQ,resetAttributes:wQ,scrollIntoView:RQ,selectAll:CQ,selectNodeBackward:xQ,selectNodeForward:kQ,selectParentNode:IQ,selectTextblockEnd:OQ,selectTextblockStart:NQ,setContent:MQ,setMark:GQ,setMeta:KQ,setNode:WQ,setNodeSelection:YQ,setTextSelection:QQ,sinkListItem:XQ,splitBlock:JQ,splitListItem:ZQ,toggleList:eX,toggleMark:tX,toggleNode:nX,toggleWrap:rX,undoInputRule:iX,unsetAllMarks:sX,unsetMark:oX,updateAttributes:aX,wrapIn:lX,wrapInList:uX});const hX=Or.create({name:"commands",addCommands(){return{...cX}}}),fX=Or.create({name:"drop",addProseMirrorPlugins(){return[new Jn({key:new fi("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),dX=Or.create({name:"editable",addProseMirrorPlugins(){return[new Jn({key:new fi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),pX=new fi("focusEvents"),mX=Or.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Jn({key:pX,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),gX=Or.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:c,doc:f}=u,{empty:p,$anchor:g}=c,{pos:_,parent:A}=g,T=g.parent.isTextblock&&_>0?u.doc.resolve(_-1):g,b=T.parent.type.spec.isolating,S=g.pos-g.parentOffset,C=b&&T.parent.childCount===1?S===g.pos:rt.atStart(f).from===_;return!p||!A.type.isTextblock||A.textContent.length||!C||C&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return kS()||iV()?s:i},addProseMirrorPlugins(){return[new Jn({key:new fi("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(b=>b.getMeta("composition")))return;const r=n.some(b=>b.docChanged)&&!e.doc.eq(t.doc),i=n.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:u}=e.selection,c=rt.atStart(e.doc).from,f=rt.atEnd(e.doc).to;if(s||!(a===c&&u===f)||!H_(t.doc))return;const _=t.tr,A=V_({state:t,transaction:_}),{commands:T}=new U_({editor:this.editor,state:A});if(T.clearNodes(),!!_.steps.length)return _}})]}}),yX=Or.create({name:"paste",addProseMirrorPlugins(){return[new Jn({key:new fi("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),_X=Or.create({name:"tabindex",addProseMirrorPlugins(){return[new Jn({key:new fi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class fu{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new fu(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new fu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new fu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=this.pos+r+(s?0:1),u=this.resolvedPos.doc.resolve(a);if(!i&&u.depth<=this.depth)return;const c=new fu(u,this.editor,i,i?t:null);i&&(c.actualDepth=this.depth+1),e.push(new fu(u,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const c=a[u];if(s[c]!==t[c])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(c=>t[c]===a.node.attrs[c])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const vX=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function AX(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class TX extends xY{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=AX(vX,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=XL(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=r.filter(u=>!u.key.startsWith(a))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[dX,HY.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),hX,mX,gX,_X,fX,yX].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Qc(i,this)}createCommandManager(){this.commandManager=new U_({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=yE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=yE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=nV(t,this.options.autofocus);this.view=new XW(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Yc.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return oV(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return HQ(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return RS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return UQ(this.state.doc,{blockSeparator:t,textSerializers:{...ZL(this.schema),...r}})}get isEmpty(){return H_(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new fu(t,this)}get $doc(){return this.$pos(0)}}function xh(n){return new B_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];if(a){const c=u.search(/\S/),f=t.from+u.indexOf(a),p=f+a.length;if(OS(t.from,t.to,e.doc).filter(A=>A.mark.type.excluded.find(b=>b===n.type&&b!==A.mark.type)).filter(A=>A.to>f).length)return null;p<t.to&&s.delete(p,t.to),f>t.from&&s.delete(t.from+c,f);const _=t.from+c+a.length;s.addMark(t.from+c,_,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function EX(n){return new B_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let u=t.to;const c=n.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=a+f;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,a+r[0].length-1),s.replaceWith(p,u,c)}else if(r[0]){const f=n.type.isInline?a:a-1;s.insert(f,n.type.create(i)).delete(s.mapping.map(a),s.mapping.map(u))}s.scrollIntoView()}})}function vE(n){return new B_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=at(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function rp(n){return new B_({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=at(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),c=a.doc.resolve(t.from).blockRange(),f=c&&cS(c,n.type,s);if(!f)return null;if(a.wrap(c,f),n.keepMarks&&n.editor){const{selection:g,storedMarks:_}=e,{splittableMarks:A}=n.editor.extensionManager,T=_||g.$to.parentOffset&&g.$from.marks();if(T){const b=T.filter(S=>A.includes(S.type.name));a.ensureMarks(b)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(g,s).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&xl(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)}})}class hi{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(De(this,"addOptions",{name:this.name}))),this.storage=at(De(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new hi(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>j_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new hi(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(De(t,"addOptions",{name:t.name})),t.storage=at(De(t,"addStorage",{name:t.name,options:t.options})),t}}function Hu(n){return new VY({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=at(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,u=r[r.length-1],c=r[0];let f=t.to;if(u){const p=c.search(/\S/),g=t.from+c.indexOf(u),_=g+u.length;if(OS(t.from,t.to,e.doc).filter(T=>T.mark.type.excluded.find(S=>S===n.type&&S!==T.mark.type)).filter(T=>T.to>g).length)return null;_<t.to&&a.delete(_,t.to),g>t.from&&a.delete(t.from+p,g),f=t.from+p+u.length,a.addMark(t.from+p,f,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}function bX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var aV={exports:{}},$A={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO;function SX(){if(oO)return $A;oO=1;var n=Sr;function e(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function u(g,_){var A=_(),T=r({inst:{value:A,getSnapshot:_}}),b=T[0].inst,S=T[1];return s(function(){b.value=A,b.getSnapshot=_,c(b)&&S({inst:b})},[g,A,_]),i(function(){return c(b)&&S({inst:b}),g(function(){c(b)&&S({inst:b})})},[g]),a(A),A}function c(g){var _=g.getSnapshot;g=g.value;try{var A=_();return!t(g,A)}catch{return!0}}function f(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return $A.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,$A}aV.exports=SX();var NS=aV.exports;const wX=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},RX=({contentComponent:n})=>{const e=NS.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Sr.createElement(Sr.Fragment,null,Object.values(e))};function CX(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:lB.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class xX extends Sr.Component{constructor(e){var t;super(e),this.editorContentRef=Sr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=CX(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Sr.createElement(Sr.Fragment,null,Sr.createElement("div",{ref:wX(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Sr.createElement(RX,{contentComponent:e.contentComponent}))}}const kX=K.forwardRef((n,e)=>{const t=Sr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Sr.createElement(xX,{key:t,innerRef:e,...n})}),IX=Sr.memo(kX);var OX=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},NX=bX(OX),lV={exports:{}},GA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO;function MX(){if(aO)return GA;aO=1;var n=Sr,e=NS;function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,c=n.useDebugValue;return GA.useSyncExternalStoreWithSelector=function(f,p,g,_,A){var T=s(null);if(T.current===null){var b={hasValue:!1,value:null};T.current=b}else b=T.current;T=u(function(){function C(D){if(!L){if(L=!0,j=D,D=_(D),A!==void 0&&b.hasValue){var N=b.value;if(A(N,D))return q=N}return q=D}if(N=q,r(j,D))return N;var k=_(D);return A!==void 0&&A(N,k)?N:(j=D,q=k)}var L=!1,j,q,V=g===void 0?null:g;return[function(){return C(p())},V===null?void 0:function(){return C(V())}]},[p,g,_,A]);var S=i(f,T[0],T[1]);return a(function(){b.hasValue=!0,b.value=S},[S]),c(S),S},GA}lV.exports=MX();var DX=lV.exports;const PX=typeof window<"u"?K.useLayoutEffect:K.useEffect;class LX{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function VX(n){var e;const[t]=K.useState(()=>new LX(n.editor)),r=DX.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:NX);return PX(()=>t.watch(n.editor),[n.editor,t]),K.useDebugValue(r),r}const UX=!1,AE=typeof window>"u",zX=AE||!!(typeof window<"u"&&window.next);class MS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?AE||zX?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new TX(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=t.extensions)===null||a===void 0?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?MS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function BX(n={},e=[]){const t=K.useRef(n);t.current=n;const[r]=K.useState(()=>new MS(t)),i=NS.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return K.useDebugValue(i),K.useEffect(r.onRender(e)),VX({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&s===0?0:s+1}),i}const jX=K.createContext({editor:null});jX.Consumer;const FX=K.createContext({onDragStart:void 0}),HX=()=>K.useContext(FX);Sr.forwardRef((n,e)=>{const{onDragStart:t}=HX(),r=n.as||"div";return Sr.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const qX=/^\s*>\s$/,$X=hi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[rp({find:qX,type:this.type})]}}),GX=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,KX=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,WX=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,YX=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,QX=go.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[xh({find:GX,type:this.type}),xh({find:WX,type:this.type})]},addPasteRules(){return[Hu({find:KX,type:this.type}),Hu({find:YX,type:this.type})]}}),XX="listItem",lO="textStyle",uO=/^\s*([-+*])\s$/,JX=hi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(XX,this.editor.getAttributes(lO)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=rp({find:uO,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=rp({find:uO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(lO),editor:this.editor})),[n]}}),ZX=/(^|[^`])`([^`]+)`(?!`)/,eJ=/(^|[^`])`([^`]+)`(?!`)/g,tJ=go.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[xh({find:ZX,type:this.type})]},addPasteRules(){return[Hu({find:eJ,type:this.type})]}}),nJ=/^```([a-z]+)?[\s\n]$/,rJ=/^~~~([a-z]+)?[\s\n]$/,iJ=hi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Xn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:f})=>(f.setSelection(rt.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[vE({find:nJ,type:this.type,getAttributes:n=>({language:n[1]})}),vE({find:rJ,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Jn({key:new fi("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:a,schema:u}=n.state,c=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(Je.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),sJ=hi.create({name:"doc",topNode:!0,content:"block+"});function oJ(n={}){return new Jn({view(e){return new aJ(e,n)}})}class aJ{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(t){let g=e.nodeBefore,_=e.nodeAfter;if(g||_){let A=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(A){let T=A.getBoundingClientRect(),b=g?T.bottom:T.top;g&&_&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*u;r={left:T.left,right:T.right,top:b-S,bottom:b+S}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),_=this.width/2*a;r={left:g.left-_,right:g.left+_,top:g.top,bottom:g.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let f,p;if(!c||c==document.body&&getComputedStyle(c).position=="static")f=-pageXOffset,p=-pageYOffset;else{let g=c.getBoundingClientRect(),_=g.width/c.offsetWidth,A=g.height/c.offsetHeight;f=g.left-c.scrollLeft*_,p=g.top-c.scrollTop*A}this.element.style.left=(r.left-f)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=Q2(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const lJ=Or.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[oJ(this.options)]}});class cn extends rt{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return cn.valid(r)?new cn(r):rt.near(r)}content(){return ke.empty}eq(e){return e instanceof cn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cn(e.resolve(t.pos))}getBookmark(){return new DS(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!uJ(e)||!cJ(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&cn.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){s=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let c=e.doc.resolve(i);if(cn.valid(c))return c}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!qe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let u=e.doc.resolve(i);if(cn.valid(u))return u}return null}}}cn.prototype.visible=!1;cn.findFrom=cn.findGapCursorFrom;rt.jsonID("gapcursor",cn);class DS{constructor(e){this.pos=e}map(e){return new DS(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return cn.valid(t)?new cn(t):rt.near(t)}}function uJ(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function cJ(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function hJ(){return new Jn({props:{decorations:mJ,createSelectionBetween(n,e,t){return e.pos==t.pos&&cn.valid(t)?new cn(t):null},handleClick:dJ,handleKeyDown:fJ,handleDOMEvents:{beforeinput:pJ}}})}const fJ=VL({ArrowLeft:rg("horiz",-1),ArrowRight:rg("horiz",1),ArrowUp:rg("vert",-1),ArrowDown:rg("vert",1)});function rg(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,u=e>0?a.$to:a.$from,c=a.empty;if(a instanceof Je){if(!s.endOfTextblock(t)||u.depth==0)return!1;c=!1,u=r.doc.resolve(e>0?u.after():u.before())}let f=cn.findGapCursorFrom(u,e,c);return f?(i&&i(r.tr.setSelection(new cn(f))),!0):!1}}function dJ(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!cn.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&qe.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new cn(r))),!0)}function pJ(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof cn))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=ge.empty;for(let a=r.length-1;a>=0;a--)i=ge.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new ke(i,0,0));return s.setSelection(Je.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function mJ(n){if(!(n.selection instanceof cn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",kn.create(n.doc,[Mi.widget(n.selection.head,e,{key:"gapcursor"})])}const gJ=Or.create({name:"gapCursor",addProseMirrorPlugins(){return[hJ()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=at(De(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),yJ=hi.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Xn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&c&&a){const g=c.filter(_=>u.includes(_.type.name));f.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_J=hi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Xn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>vE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var wy=200,Wn=function(){};Wn.prototype.append=function(e){return e.length?(e=Wn.from(e),!this.length&&e||e.length<wy&&this.leafAppend(e)||this.length<wy&&e.leafPrepend(this)||this.appendInner(e)):this};Wn.prototype.prepend=function(e){return e.length?Wn.from(e).append(this):this};Wn.prototype.appendInner=function(e){return new vJ(this,e)};Wn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Wn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Wn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Wn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Wn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};Wn.from=function(e){return e instanceof Wn?e:e&&e.length?new uV(e):Wn.empty};var uV=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,u){for(var c=s;c<a;c++)if(i(this.values[c],u+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,u){for(var c=s-1;c>=a;c--)if(i(this.values[c],u+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=wy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=wy)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Wn);Wn.empty=new uV([]);var vJ=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),a)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,a+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Wn);const AJ=500;class bs{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,u,c,f=[],p=[];return this.items.forEach((g,_)=>{if(!g.step){i||(i=this.remapping(r,_+1),s=i.maps.length),s--,p.push(g);return}if(i){p.push(new Ws(g.map));let A=g.step.map(i.slice(s)),T;A&&a.maybeStep(A).doc&&(T=a.mapping.maps[a.mapping.maps.length-1],f.push(new Ws(T,void 0,void 0,f.length+p.length))),s--,T&&i.appendMap(T,s)}else a.maybeStep(g.step);if(g.selection)return u=i?g.selection.map(i.slice(s)):g.selection,c=new bs(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:u}}addTransform(e,t,r,i){let s=[],a=this.eventCount,u=this.items,c=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),_=new Ws(e.mapping.maps[p],g,t),A;(A=c&&c.merge(_))&&(_=A,p?s.pop():u=u.slice(0,u.length-1)),s.push(_),t&&(a++,t=void 0),i||(c=_)}let f=a-r.depth;return f>EJ&&(u=TJ(u,f),a-=f),new bs(u.append(s),a)}remapping(e,t){let r=new Xd;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new bs(this.items.append(e.map(t=>new Ws(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(_=>{_.selection&&u--},i);let c=t;this.items.forEach(_=>{let A=s.getMirror(--c);if(A==null)return;a=Math.min(a,A);let T=s.maps[A];if(_.step){let b=e.steps[A].invert(e.docs[A]),S=_.selection&&_.selection.map(s.slice(c+1,A));S&&u++,r.push(new Ws(T,b,S))}else r.push(new Ws(T))},i);let f=[];for(let _=t;_<a;_++)f.push(new Ws(s.maps[_]));let p=this.items.slice(0,i).append(f).append(r),g=new bs(p,u);return g.emptyItemCount()>AJ&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(t.slice(r)),f=c&&c.getMap();if(r--,f&&t.appendMap(f,r),c){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let g=new Ws(f.invert(),c,p),_,A=i.length-1;(_=i.length&&i[A].merge(g))?i[A]=_:i.push(g)}}else a.map&&r--},this.items.length,0),new bs(Wn.from(i.reverse()),s)}}bs.empty=new bs(Wn.empty,0);function TJ(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Ws{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ws(t.getMap().invert(),t,this.selection)}}}class Pa{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const EJ=20;function bJ(n,e,t,r){let i=t.getMeta(Ou),s;if(i)return i.historyState;t.getMeta(RJ)&&(n=new Pa(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Ou))return a.getMeta(Ou).redo?new Pa(n.done.addTransform(t,void 0,r,Ig(e)),n.undone,cO(t.mapping.maps),n.prevTime,n.prevComposition):new Pa(n.done,n.undone.addTransform(t,void 0,r,Ig(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),c=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!SJ(t,n.prevRanges)),f=a?KA(n.prevRanges,t.mapping):cO(t.mapping.maps);return new Pa(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,Ig(e)),bs.empty,f,t.time,u??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Pa(n.done.rebased(t,s),n.undone.rebased(t,s),KA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Pa(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),KA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function SJ(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function cO(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function KA(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function wJ(n,e,t){let r=Ig(e),i=Ou.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),u=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new Pa(t?u:s.remaining,t?s.remaining:u,null,0,-1);return s.transform.setSelection(a).setMeta(Ou,{redo:t,historyState:c})}let WA=!1,hO=null;function Ig(n){let e=n.plugins;if(hO!=e){WA=!1,hO=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){WA=!0;break}}return WA}const Ou=new fi("history"),RJ=new fi("closeHistory");function CJ(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Jn({key:Ou,state:{init(){return new Pa(bs.empty,bs.empty,null,0,-1)},apply(e,t,r){return bJ(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?hV:r=="historyRedo"?fV:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function cV(n,e){return(t,r)=>{let i=Ou.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=wJ(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const hV=cV(!1,!0),fV=cV(!0,!0),xJ=Or.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>hV(n,e),redo:()=>({state:n,dispatch:e})=>fV(n,e)}},addProseMirrorPlugins(){return[CJ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),kJ=hi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Xn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):qQ(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:a,dispatch:u})=>{var c;if(u){const{$to:f}=a.selection,p=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?a.setSelection(Je.create(a.doc,f.pos+1)):f.nodeAfter.isBlock?a.setSelection(qe.create(a.doc,f.pos)):a.setSelection(Je.create(a.doc,f.pos));else{const g=(c=f.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();g&&(a.insert(p,g),a.setSelection(Je.create(a.doc,p+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[EX({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),IJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,OJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,NJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,MJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,DJ=go.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[xh({find:IJ,type:this.type}),xh({find:NJ,type:this.type})]},addPasteRules(){return[Hu({find:OJ,type:this.type}),Hu({find:MJ,type:this.type})]}}),PJ=hi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Xn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),LJ="listItem",fO="textStyle",dO=/^(\d+)\.\s$/,VJ=hi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Xn(this.options.HTMLAttributes,t),0]:["ol",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(LJ,this.editor.getAttributes(fO)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=rp({find:dO,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=rp({find:dO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(fO)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),UJ=hi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),zJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,BJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,jJ=go.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[xh({find:zJ,type:this.type})]},addPasteRules(){return[Hu({find:BJ,type:this.type})]}}),FJ=hi.create({name:"text",group:"inline"}),HJ=Or.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(QX.configure(this.options.bold)),this.options.blockquote!==!1&&n.push($X.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(JX.configure(this.options.bulletList)),this.options.code!==!1&&n.push(tJ.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(iJ.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(sJ.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(lJ.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(gJ.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(yJ.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(_J.configure(this.options.heading)),this.options.history!==!1&&n.push(xJ.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(kJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(DJ.configure(this.options.italic)),this.options.listItem!==!1&&n.push(PJ.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(VJ.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(UJ.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(jJ.configure(this.options.strike)),this.options.text!==!1&&n.push(FJ.configure(this.options.text)),n}}),qJ=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const s=t.getAttribute("style"),a=(i=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${a};${s}`)})},$J=go.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&qJ(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),GJ=Or.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Jn({key:new fi("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const s=this.editor.isEmpty;return n.descendants((a,u)=>{const c=r>=u&&r<=u+a.nodeSize,f=!a.isLeaf&&H_(a);if((c||!this.options.showOnlyCurrent)&&f){const p=[this.options.emptyNodeClass];s&&p.push(this.options.emptyEditorClass);const g=Mi.node(u,u+a.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:u,hasAnchor:c}):this.options.placeholder});i.push(g)}return this.options.includeChildren}),kn.create(n,i)}}})]}}),KJ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",WJ="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",kh=(n,e)=>{for(const t in e)n[t]=e[t];return n},TE="numeric",EE="ascii",bE="alpha",Rd="asciinumeric",fd="alphanumeric",SE="domain",dV="emoji",YJ="scheme",QJ="slashscheme",YA="whitespace";function XJ(n,e){return n in e||(e[n]=[]),e[n]}function Tu(n,e,t){e[TE]&&(e[Rd]=!0,e[fd]=!0),e[EE]&&(e[Rd]=!0,e[bE]=!0),e[Rd]&&(e[fd]=!0),e[bE]&&(e[fd]=!0),e[fd]&&(e[SE]=!0),e[dV]&&(e[SE]=!0);for(const r in e){const i=XJ(r,t);i.indexOf(n)<0&&i.push(n)}}function JJ(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function ti(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}ti.groups={};ti.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||ti.groups;let i;return e&&e.j?i=e:(i=new ti(e),t&&r&&Tu(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(n[a]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||ti.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let a,u=i.go(n);if(u?(a=new ti,kh(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new ti,s){if(r)if(a.t&&typeof a.t=="string"){const c=kh(JJ(a.t,r),t);Tu(s,c,r)}else t&&Tu(s,t,r);a.t=s}return i.j[n]=a,a}};const st=(n,e,t,r,i)=>n.ta(e,t,r,i),un=(n,e,t,r,i)=>n.tr(e,t,r,i),pO=(n,e,t,r,i)=>n.ts(e,t,r,i),ve=(n,e,t,r,i)=>n.tt(e,t,r,i),jo="WORD",wE="UWORD",pV="ASCIINUMERICAL",mV="ALPHANUMERICAL",ip="LOCALHOST",RE="TLD",CE="UTLD",Og="SCHEME",Gc="SLASH_SCHEME",PS="NUM",xE="WS",LS="NL",Cd="OPENBRACE",xd="CLOSEBRACE",Ry="OPENBRACKET",Cy="CLOSEBRACKET",xy="OPENPAREN",ky="CLOSEPAREN",Iy="OPENANGLEBRACKET",Oy="CLOSEANGLEBRACKET",Ny="FULLWIDTHLEFTPAREN",My="FULLWIDTHRIGHTPAREN",Dy="LEFTCORNERBRACKET",Py="RIGHTCORNERBRACKET",Ly="LEFTWHITECORNERBRACKET",Vy="RIGHTWHITECORNERBRACKET",Uy="FULLWIDTHLESSTHAN",zy="FULLWIDTHGREATERTHAN",By="AMPERSAND",VS="APOSTROPHE",jy="ASTERISK",La="AT",Fy="BACKSLASH",Hy="BACKTICK",qy="CARET",Ha="COLON",US="COMMA",$y="DOLLAR",Ys="DOT",Gy="EQUALS",zS="EXCLAMATION",ns="HYPHEN",kd="PERCENT",Ky="PIPE",Wy="PLUS",Yy="POUND",Id="QUERY",BS="QUOTE",gV="FULLWIDTHMIDDLEDOT",jS="SEMI",Qs="SLASH",Od="TILDE",Qy="UNDERSCORE",yV="EMOJI",Xy="SYM";var _V=Object.freeze({__proto__:null,WORD:jo,UWORD:wE,ASCIINUMERICAL:pV,ALPHANUMERICAL:mV,LOCALHOST:ip,TLD:RE,UTLD:CE,SCHEME:Og,SLASH_SCHEME:Gc,NUM:PS,WS:xE,NL:LS,OPENBRACE:Cd,CLOSEBRACE:xd,OPENBRACKET:Ry,CLOSEBRACKET:Cy,OPENPAREN:xy,CLOSEPAREN:ky,OPENANGLEBRACKET:Iy,CLOSEANGLEBRACKET:Oy,FULLWIDTHLEFTPAREN:Ny,FULLWIDTHRIGHTPAREN:My,LEFTCORNERBRACKET:Dy,RIGHTCORNERBRACKET:Py,LEFTWHITECORNERBRACKET:Ly,RIGHTWHITECORNERBRACKET:Vy,FULLWIDTHLESSTHAN:Uy,FULLWIDTHGREATERTHAN:zy,AMPERSAND:By,APOSTROPHE:VS,ASTERISK:jy,AT:La,BACKSLASH:Fy,BACKTICK:Hy,CARET:qy,COLON:Ha,COMMA:US,DOLLAR:$y,DOT:Ys,EQUALS:Gy,EXCLAMATION:zS,HYPHEN:ns,PERCENT:kd,PIPE:Ky,PLUS:Wy,POUND:Yy,QUERY:Id,QUOTE:BS,FULLWIDTHMIDDLEDOT:gV,SEMI:jS,SLASH:Qs,TILDE:Od,UNDERSCORE:Qy,EMOJI:yV,SYM:Xy});const zo=/[a-z]/,Jf=new RegExp("\\p{L}","u"),QA=new RegExp("\\p{Emoji}","u"),Bo=/\d/,XA=/\s/,mO="\r",JA=`
`,ZJ="️",eZ="‍",ZA="￼";let ig=null,sg=null;function tZ(n=[]){const e={};ti.groups=e;const t=new ti;ig==null&&(ig=gO(KJ)),sg==null&&(sg=gO(WJ)),ve(t,"'",VS),ve(t,"{",Cd),ve(t,"}",xd),ve(t,"[",Ry),ve(t,"]",Cy),ve(t,"(",xy),ve(t,")",ky),ve(t,"<",Iy),ve(t,">",Oy),ve(t,"（",Ny),ve(t,"）",My),ve(t,"「",Dy),ve(t,"」",Py),ve(t,"『",Ly),ve(t,"』",Vy),ve(t,"＜",Uy),ve(t,"＞",zy),ve(t,"&",By),ve(t,"*",jy),ve(t,"@",La),ve(t,"`",Hy),ve(t,"^",qy),ve(t,":",Ha),ve(t,",",US),ve(t,"$",$y),ve(t,".",Ys),ve(t,"=",Gy),ve(t,"!",zS),ve(t,"-",ns),ve(t,"%",kd),ve(t,"|",Ky),ve(t,"+",Wy),ve(t,"#",Yy),ve(t,"?",Id),ve(t,'"',BS),ve(t,"/",Qs),ve(t,";",jS),ve(t,"~",Od),ve(t,"_",Qy),ve(t,"\\",Fy),ve(t,"・",gV);const r=un(t,Bo,PS,{[TE]:!0});un(r,Bo,r);const i=un(r,zo,pV,{[Rd]:!0}),s=un(r,Jf,mV,{[fd]:!0}),a=un(t,zo,jo,{[EE]:!0});un(a,Bo,i),un(a,zo,a),un(i,Bo,i),un(i,zo,i);const u=un(t,Jf,wE,{[bE]:!0});un(u,zo),un(u,Bo,s),un(u,Jf,u),un(s,Bo,s),un(s,zo),un(s,Jf,s);const c=ve(t,JA,LS,{[YA]:!0}),f=ve(t,mO,xE,{[YA]:!0}),p=un(t,XA,xE,{[YA]:!0});ve(t,ZA,p),ve(f,JA,c),ve(f,ZA,p),un(f,XA,p),ve(p,mO),ve(p,JA),un(p,XA,p),ve(p,ZA,p);const g=un(t,QA,yV,{[dV]:!0});ve(g,"#"),un(g,QA,g),ve(g,ZJ,g);const _=ve(g,eZ);ve(_,"#"),un(_,QA,g);const A=[[zo,a],[Bo,i]],T=[[zo,null],[Jf,u],[Bo,s]];for(let b=0;b<ig.length;b++)Oa(t,ig[b],RE,jo,A);for(let b=0;b<sg.length;b++)Oa(t,sg[b],CE,wE,T);Tu(RE,{tld:!0,ascii:!0},e),Tu(CE,{utld:!0,alpha:!0},e),Oa(t,"file",Og,jo,A),Oa(t,"mailto",Og,jo,A),Oa(t,"http",Gc,jo,A),Oa(t,"https",Gc,jo,A),Oa(t,"ftp",Gc,jo,A),Oa(t,"ftps",Gc,jo,A),Tu(Og,{scheme:!0,ascii:!0},e),Tu(Gc,{slashscheme:!0,ascii:!0},e),n=n.sort((b,S)=>b[0]>S[0]?1:-1);for(let b=0;b<n.length;b++){const S=n[b][0],L=n[b][1]?{[YJ]:!0}:{[QJ]:!0};S.indexOf("-")>=0?L[SE]=!0:zo.test(S)?Bo.test(S)?L[Rd]=!0:L[EE]=!0:L[TE]=!0,pO(t,S,S,L)}return pO(t,"localhost",ip,{ascii:!0}),t.jd=new ti(Xy),{start:t,tokens:kh({groups:e},_V)}}function vV(n,e){const t=nZ(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,i=[];let s=0,a=0;for(;a<r;){let u=n,c=null,f=0,p=null,g=-1,_=-1;for(;a<r&&(c=u.go(t[a]));)u=c,u.accepts()?(g=0,_=0,p=u):g>=0&&(g+=t[a].length,_++),f+=t[a].length,s+=t[a].length,a++;s-=g,a-=_,f-=g,i.push({t:p.t,v:e.slice(s-f,s),s:s-f,e:s})}return i}function nZ(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,a=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Oa(n,e,t,r,i){let s;const a=e.length;for(let u=0;u<a-1;u++){const c=e[u];n.j[c]?s=n.j[c]:(s=new ti(r),s.jr=i.slice(),n.j[c]=s),n=s}return s=new ti(t),s.jr=i.slice(),n.j[e[a-1]]=s,s}function gO(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const sp={defaultProtocol:"http",events:null,format:yO,formatHref:yO,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function FS(n,e=null){let t=kh({},sp);n&&(t=kh(t,n instanceof FS?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}FS.prototype={o:sp,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:sp[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function yO(n){return n}function AV(n,e){this.t="token",this.v=n,this.tk=e}AV.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=sp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),a={},u=n.get("className",t,e),c=n.get("target",t,e),f=n.get("rel",t,e),p=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),c&&(a.target=c),f&&(a.rel=f),p&&kh(a,p),{tagName:i,attributes:a,content:s,eventListeners:g}}};function q_(n,e){class t extends AV{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const _O=q_("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),vO=q_("text"),rZ=q_("nl"),og=q_("url",{isLink:!0,toHref(n=sp.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==ip&&n[1].t===Ha}}),es=n=>new ti(n);function iZ({groups:n}){const e=n.domain.concat([By,jy,La,Fy,Hy,qy,$y,Gy,ns,PS,kd,Ky,Wy,Yy,Qs,Xy,Od,Qy]),t=[Ha,US,Ys,zS,kd,Id,BS,jS,Iy,Oy,Cd,xd,Cy,Ry,xy,ky,Ny,My,Dy,Py,Ly,Vy,Uy,zy],r=[By,VS,jy,Fy,Hy,qy,$y,Gy,ns,Cd,xd,kd,Ky,Wy,Yy,Id,Qs,Xy,Od,Qy],i=es(),s=ve(i,Od);st(s,r,s),st(s,n.domain,s);const a=es(),u=es(),c=es();st(i,n.domain,a),st(i,n.scheme,u),st(i,n.slashscheme,c),st(a,r,s),st(a,n.domain,a);const f=ve(a,La);ve(s,La,f),ve(u,La,f),ve(c,La,f);const p=ve(s,Ys);st(p,r,s),st(p,n.domain,s);const g=es();st(f,n.domain,g),st(g,n.domain,g);const _=ve(g,Ys);st(_,n.domain,g);const A=es(_O);st(_,n.tld,A),st(_,n.utld,A),ve(f,ip,A);const T=ve(g,ns);ve(T,ns,T),st(T,n.domain,g),st(A,n.domain,g),ve(A,Ys,_),ve(A,ns,T);const b=ve(A,Ha);st(b,n.numeric,_O);const S=ve(a,ns),C=ve(a,Ys);ve(S,ns,S),st(S,n.domain,a),st(C,r,s),st(C,n.domain,a);const L=es(og);st(C,n.tld,L),st(C,n.utld,L),st(L,n.domain,a),st(L,r,s),ve(L,Ys,C),ve(L,ns,S),ve(L,La,f);const j=ve(L,Ha),q=es(og);st(j,n.numeric,q);const V=es(og),D=es();st(V,e,V),st(V,t,D),st(D,e,V),st(D,t,D),ve(L,Qs,V),ve(q,Qs,V);const N=ve(u,Ha),k=ve(c,Ha),x=ve(k,Qs),z=ve(x,Qs);st(u,n.domain,a),ve(u,Ys,C),ve(u,ns,S),st(c,n.domain,a),ve(c,Ys,C),ve(c,ns,S),st(N,n.domain,V),ve(N,Qs,V),ve(N,Id,V),st(z,n.domain,V),st(z,e,V),ve(z,Qs,V);const U=[[Cd,xd],[Ry,Cy],[xy,ky],[Iy,Oy],[Ny,My],[Dy,Py],[Ly,Vy],[Uy,zy]];for(let B=0;B<U.length;B++){const[P,Ee]=U[B],be=ve(V,P);ve(D,P,be),ve(be,Ee,V);const Y=es(og);st(be,e,Y);const oe=es();st(be,t),st(Y,e,Y),st(Y,t,oe),st(oe,e,Y),st(oe,t,oe),ve(Y,Ee,V),ve(oe,Ee,V)}return ve(i,ip,L),ve(i,LS,rZ),{start:i,tokens:_V}}function sZ(n,e,t){let r=t.length,i=0,s=[],a=[];for(;i<r;){let u=n,c=null,f=null,p=0,g=null,_=-1;for(;i<r&&!(c=u.go(t[i].t));)a.push(t[i++]);for(;i<r&&(f=c||u.go(t[i].t));)c=null,u=f,u.accepts()?(_=0,g=u):_>=0&&_++,i++,p++;if(_<0)i-=p,i<r&&(a.push(t[i]),i++);else{a.length>0&&(s.push(eT(vO,e,a)),a=[]),i-=_,p-=_;const A=g.t,T=t.slice(i-p,i);s.push(eT(A,e,T))}}return a.length>0&&s.push(eT(vO,e,a)),s}function eT(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const oZ=typeof console<"u"&&console&&console.warn||(()=>{}),aZ="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Gt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function lZ(){return ti.groups={},Gt.scanner=null,Gt.parser=null,Gt.tokenQueue=[],Gt.pluginQueue=[],Gt.customSchemes=[],Gt.initialized=!1,Gt}function AO(n,e=!1){if(Gt.initialized&&oZ(`linkifyjs: already initialized - will not register custom scheme "${n}" ${aZ}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Gt.customSchemes.push([n,e])}function uZ(){Gt.scanner=tZ(Gt.customSchemes);for(let n=0;n<Gt.tokenQueue.length;n++)Gt.tokenQueue[n][1]({scanner:Gt.scanner});Gt.parser=iZ(Gt.scanner.tokens);for(let n=0;n<Gt.pluginQueue.length;n++)Gt.pluginQueue[n][1]({scanner:Gt.scanner,parser:Gt.parser});return Gt.initialized=!0,Gt}function HS(n){return Gt.initialized||uZ(),sZ(Gt.parser.start,n,vV(Gt.scanner.start,n))}HS.scan=vV;function TV(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new FS(t),i=HS(n),s=[];for(let a=0;a<i.length;a++){const u=i[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}function cZ(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function hZ(n){return new Jn({key:new fi("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(f=>f.docChanged)&&!t.doc.eq(r.doc),s=e.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,u=DQ(t.doc,[...e]);if(FQ(u).forEach(({newRange:f})=>{const p=LQ(r.doc,f,A=>A.isTextblock);let g,_;if(p.length>1?(g=p[0],_=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):p.length&&r.doc.textBetween(f.from,f.to," "," ").endsWith(" ")&&(g=p[0],_=r.doc.textBetween(g.pos,f.to,void 0," ")),g&&_){const A=_.split(" ").filter(C=>C!=="");if(A.length<=0)return!1;const T=A[A.length-1],b=g.pos+_.lastIndexOf(T);if(!T)return!1;const S=HS(T).map(C=>C.toObject(n.defaultProtocol));if(!cZ(S))return!1;S.filter(C=>C.isLink).map(C=>({...C,from:b+C.start+1,to:b+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{OS(C.from,C.to,r.doc).some(L=>L.mark.type===n.type)||a.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!a.steps.length)return a}})}function fZ(n){return new Jn({key:new fi("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=r.target;const u=[];for(;a.nodeName!=="DIV";)u.push(a),a=a.parentNode;if(!u.find(_=>_.nodeName==="A"))return!1;const c=oV(e.state,n.type.name),f=r.target,p=(i=f==null?void 0:f.href)!==null&&i!==void 0?i:c.href,g=(s=f==null?void 0:f.target)!==null&&s!==void 0?s:c.target;return f&&p?(window.open(p,g),!0):!1}}})}function dZ(n){return new Jn({key:new fi("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:a}=s;if(a)return!1;let u="";r.content.forEach(f=>{u+=f.textContent});const c=TV(u,{defaultProtocol:n.defaultProtocol}).find(f=>f.isLink&&f.value===u);return!u||!c?!1:n.editor.commands.setMark(n.type,{href:c.href})}}})}const pZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function su(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(pZ,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const mZ=go.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){AO(n);return}AO(n.scheme,n.optionalSlashes)})},onDestroy(){lZ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!su(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!su(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!su(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Xn(this.options.HTMLAttributes,n),0]:["a",Xn(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!su(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!su(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Hu({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=TV(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!su(a,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(hZ({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!su(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(fZ({type:this.type})),this.options.linkOnPaste&&n.push(dZ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}});function gZ({onChange:n}){const e=BX({extensions:[HJ,$J,GJ.configure({placeholder:"Start typing here..."}),mZ],content:"",onUpdate:({editor:r})=>{n(r.getHTML())}});if(!e)return null;const t=r=>{r.preventDefault()};return I.jsxs("div",{className:"editor-wrapper dark-silver-bg",children:[I.jsxs("div",{className:"toolbar",children:[I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleBold().run()},className:e.isActive("bold")?"active":"",children:"Bold"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleItalic().run()},className:e.isActive("italic")?"active":"",children:"Italic"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleHeading({level:1}).run()},className:e.isActive("heading",{level:1})?"active":"",children:"H1"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleHeading({level:2}).run()},className:e.isActive("heading",{level:2})?"active":"",children:"H2"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleBulletList().run()},className:e.isActive("bulletList")?"active":"",children:"Bullet List"}),I.jsx("button",{type:"button",onClick:r=>{t(r);const i=e.getAttributes("link").href;let s=window.prompt("Enter URL",i||"");s!==null&&(s&&!s.startsWith("http://")&&!s.startsWith("https://")&&(s=`https://${s}`),s===""?e.chain().focus().unsetLink().run():e.chain().focus().setLink({href:s}).run())},className:e.isActive("link")?"active":"",children:"Link"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().undo().run()},children:"Undo"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().redo().run()},children:"Redo"})]}),I.jsx(IX,{editor:e,className:"editor-content"})]})}const yZ="/assets/menu-DAMTkw-O.png",_Z="/assets/check-BWpW0xC-.png",vZ="/assets/description-C5Kf4JsE.png",AZ="/assets/image-CvEaPl9Q.png",TZ="/assets/content-writing-Co6lRQM-.png",EZ="/assets/shuffle-BkdvClfH.png";function bZ(){const[n,e]=K.useState(null),[t,r]=K.useState({}),[i,s]=K.useState(!1),[a,u]=K.useState(!1),[c,f]=K.useState([]),[p,g]=K.useState(null),[_,A]=K.useState(null),[T,b]=K.useState(null),[S,C]=K.useState([]),[L,j]=K.useState(null),[q,V]=K.useState(null),D=[{img:vZ,type:"Description",label:"Description"},{img:EZ,type:"Redirect",label:"Redirect Link"},{img:TZ,type:"Article",label:"Article Content"},{img:AZ,type:"Image",label:"Image Upload"}],N=U=>{f(U==="Redirect"?B=>[...B,{type:U,value:{partName:"",partUrl:""}}]:B=>[...B,{type:U,value:""}]),u(!1)},k=(U,B,P=null)=>{const Ee=[...c];if(P&&typeof Ee[U].value=="object"?Ee[U].value={...Ee[U].value,[P]:B}:Ee[U].value=B,f(Ee),Ee[U].type==="Image"&&B instanceof File){const be=URL.createObjectURL(B);r(Y=>({...Y,[U]:be}))}};console.log(c);const x=(U,B)=>{switch(U.type){case"Description":case"Article":return I.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[I.jsx("label",{style:{fontSize:"1.5rem"},className:"input-label outfit-font",children:U.type}),I.jsx(gZ,{onChange:P=>k(B,P)})]},B);case"Redirect":return I.jsxs("div",{style:{marginBottom:"100px",padding:"30px 3%"},className:"display-column",children:[I.jsx("label",{className:"input-label outfit-font",children:"Redirect Name"}),I.jsx("input",{className:"input",type:"text",value:U.value.name,placeholder:"Part 3, or Part 1",style:{marginBottom:"30px",padding:"10px 20px"},onChange:P=>k(B,P.target.value,"partName")}),I.jsx("label",{className:"input-label outfit-font",children:"Redirect Url"}),I.jsx("input",{className:"input",type:"url",style:{padding:"10px 20px"},value:U.value.url,onChange:P=>k(B,P.target.value,"partUrl")})]},B);case"Image":return I.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[I.jsx("label",{className:"input-label outfit-font",children:"Upload Image"}),I.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:P=>k(B,P.target.files[0])}),t[B]&&I.jsx("img",{src:t[B],alt:"Preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]},B);default:return null}},z=async U=>{var P,Ee;U.preventDefault(),s(!0);let B=null;try{const be=document.querySelector('input[type="file"]');be!=null&&be.files[0]&&(B=await Jk(be.files[0]));const Y=await Promise.all(c.map(async pe=>{if(pe.type==="Image"&&pe.value instanceof File){const ae=await Jk(pe.value);return{...pe,value:ae}}return pe})),oe=c.find(pe=>pe.type==="Redirect"),Ae=((P=oe==null?void 0:oe.value)==null?void 0:P.partName)||null,je=((Ee=oe==null?void 0:oe.value)==null?void 0:Ee.partUrl)||null,ie=await C$({title:p,subTitle:L,partName:Ae,partUrl:je,part:q,author:_,readTime:T,imgUrl:B,content:Y,categories:S});alert(`Blog created successfully! ID: ${ie}`)}catch(be){console.error("Error submitting blog:",be),alert("Failed to submit blog")}finally{s(!1)}};return I.jsxs("section",{className:"create-blog-main",children:[I.jsx("h1",{className:"outfit-font",children:"Create a Blog"}),I.jsx("div",{className:"display-column",children:I.jsxs("form",{className:"form",children:[I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Title:"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>g(U.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Category Title (optional):"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>j(U.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Part Number (optional):"}),I.jsx("input",{className:"input-part",type:"number",onChange:U=>V(U.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Author:"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>A(U.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Read Time:"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>b(U.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Categories:"}),I.jsx("input",{className:"input playfair-font",type:"text",placeholder:"e.g. Monday Devotion, Tuesday Article",onChange:U=>C(U.target.value.split(",").map(B=>B.trim()).filter(B=>B!==""))}),S.length>0&&I.jsxs("div",{className:"category-container outfit-font",children:["Categories:",S.map(U=>I.jsx("div",{className:"cat silver-bg",children:U},U))]})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Photo:"}),I.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:U=>{const B=U.target.files[0];B&&e(URL.createObjectURL(B))}}),n&&I.jsx("img",{src:n,alt:"Main preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]}),I.jsxs("div",{className:"form-array-container",children:[c.map((U,B)=>x(U,B)),I.jsxs("div",{className:"add-to-array",children:[I.jsx("img",{className:"form-icon menu-icon off-white-bg",src:yZ,onClick:()=>u(!a)}),i?I.jsx("div",{className:"post-loader-container",children:I.jsx(m2,{})}):I.jsx("img",{className:"form-icon submit-icon off-white-bg",src:_Z,onClick:z}),I.jsx("div",{className:`expanded-icons ${a?"show":""}`,children:D.map((U,B)=>I.jsx("img",{src:U.img,title:U.label,className:"form-icon",onClick:()=>N(U.type)},B))})]})]})]})})]})}const SZ=Qz([{path:"/",element:I.jsx(b$,{}),errorElement:I.jsx(S$,{}),children:[{path:"/",...P$},{path:"/about",...B$},{path:"/singleBlog/:id",...fG},{path:"/login",...pG},{path:"/dashboard",element:I.jsx(Xk,{children:I.jsx(bG,{})})},{path:"/createBlog",element:I.jsx(Xk,{children:I.jsx(bZ,{})})}]}]);e4.createRoot(document.getElementById("root")).render(I.jsx(K.StrictMode,{children:I.jsx(mG,{children:I.jsx(uB,{router:SZ})})}));
