import{r,a as j,j as e,g as w}from"./index-BeP9_3gn.js";import{B as N}from"./BlogsContainer-DghBZAza.js";import{P as v}from"./PostLoader-C2TeVUX7.js";import"./react-DJG_os-6.js";import"./firebase-DohhskBT.js";import"./gsap-Brfk6Bdo.js";import"./x-button-DkK3Y9wF.js";function E(){const[A,p]=r.useState([]),{category:t}=j(),[x,g]=r.useState(!0),[y,l]=r.useState([]),[B,a]=r.useState(null);return r.useEffect(()=>{(async()=>{g(!0),a(!1);try{const n=await w();console.log("refresh",t),console.log("data",n);const f=[...n].sort((s,o)=>{var c,u,d,h;if(typeof s.likes=="number"&&typeof o.likes=="number")return(o.likes||0)-(s.likes||0);const i=((u=(c=s.datePosted)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date(0);return(((h=(d=o.datePosted)==null?void 0:d.toDate)==null?void 0:h.call(d))||new Date(0))-i});if(p(f),t){const s=t.trim().toLowerCase();if(s){const o=f.filter(i=>Array.isArray(i.categories)&&i.categories.some(m=>m.toLowerCase()===s));o.length>0?(l(o),a(!1)):(l([]),a(!0),console.warn(`No blogs found with category: ${s}`))}else l([]),a(!0)}else l([]),a(!0)}catch(n){console.error("Failed to fetch blogs:",n)}finally{g(!1)}})()},[t]),console.log("load",t),e.jsxs("div",{className:"display-column",style:{padding:"40px 20px"},children:[e.jsxs("div",{className:"title-container",children:[e.jsxs("div",{className:"info-container",children:[e.jsx("h1",{className:"outfit-font",children:"Blogs with category:"}),e.jsx("h1",{className:"outfit-font",children:` ${t}`})]}),e.jsx("div",{className:"line-blog"})]}),x?e.jsx("div",{style:{marginTop:"100px",marginBottom:"100px"},children:e.jsx(v,{})}):B?e.jsx("h1",{className:"outfit-font display-column",style:{textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"No blogs were found with that category"}):e.jsx("div",{style:{width:"100%"},children:e.jsx(N,{blogArray:y,nav:"singleBlog",line:!1,subTitle:` ${t}`,maxCount:100})})]})}export{E as default};
