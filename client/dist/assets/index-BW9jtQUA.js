(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function bN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qv={exports:{}},zf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC;function e4(){if(iC)return zf;iC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return zf.Fragment=e,zf.jsx=t,zf.jsxs=t,zf}var sC;function t4(){return sC||(sC=1,qv.exports=e4()),qv.exports}var C=t4(),$v={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function n4(){if(oC)return nt;oC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function _(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function S(F,se,ge){this.props=F,this.context=se,this.refs=E,this.updater=ge||A}S.prototype.isReactComponent={},S.prototype.setState=function(F,se){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,se,"setState")},S.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function k(){}k.prototype=S.prototype;function L(F,se,ge){this.props=F,this.context=se,this.refs=E,this.updater=ge||A}var B=L.prototype=new k;B.constructor=L,T(B,S.prototype),B.isPureReactComponent=!0;var q=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function O(F,se,ge,le,Re,Se){return ge=Se.ref,{$$typeof:n,type:F,key:se,ref:ge!==void 0?ge:null,props:Se}}function I(F,se){return O(F.type,se,void 0,void 0,void 0,F.props)}function x(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function z(F){var se={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ge){return se[ge]})}var U=/\/+/g;function j(F,se){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):se.toString(36)}function P(){}function ae(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(P,P):(F.status="pending",F.then(function(se){F.status==="pending"&&(F.status="fulfilled",F.value=se)},function(se){F.status==="pending"&&(F.status="rejected",F.reason=se)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function fe(F,se,ge,le,Re){var Se=typeof F;(Se==="undefined"||Se==="boolean")&&(F=null);var Le=!1;if(F===null)Le=!0;else switch(Se){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(F.$$typeof){case n:case e:Le=!0;break;case p:return Le=F._init,fe(Le(F._payload),se,ge,le,Re)}}if(Le)return Re=Re(F),Le=le===""?"."+j(F,0):le,q(Re)?(ge="",Le!=null&&(ge=Le.replace(U,"$&/")+"/"),fe(Re,se,ge,"",function(mr){return mr})):Re!=null&&(x(Re)&&(Re=I(Re,ge+(Re.key==null||F&&F.key===Re.key?"":(""+Re.key).replace(U,"$&/")+"/")+Le)),se.push(Re)),1;Le=0;var Kt=le===""?".":le+":";if(q(F))for(var Rt=0;Rt<F.length;Rt++)le=F[Rt],Se=Kt+j(le,Rt),Le+=fe(le,se,ge,Se,Re);else if(Rt=_(F),typeof Rt=="function")for(F=Rt.call(F),Rt=0;!(le=F.next()).done;)le=le.value,Se=Kt+j(le,Rt++),Le+=fe(le,se,ge,Se,Re);else if(Se==="object"){if(typeof F.then=="function")return fe(ae(F),se,ge,le,Re);throw se=String(F),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Le}function Y(F,se,ge){if(F==null)return F;var le=[],Re=0;return fe(F,le,"","",function(Se){return se.call(ge,Se,Re++)}),le}function ne(F){if(F._status===-1){var se=F._result;se=se(),se.then(function(ge){(F._status===0||F._status===-1)&&(F._status=1,F._result=ge)},function(ge){(F._status===0||F._status===-1)&&(F._status=2,F._result=ge)}),F._status===-1&&(F._status=0,F._result=se)}if(F._status===1)return F._result.default;throw F._result}var Te=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function xe(){}return nt.Children={map:Y,forEach:function(F,se,ge){Y(F,function(){se.apply(this,arguments)},ge)},count:function(F){var se=0;return Y(F,function(){se++}),se},toArray:function(F){return Y(F,function(se){return se})||[]},only:function(F){if(!x(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},nt.Component=S,nt.Fragment=t,nt.Profiler=i,nt.PureComponent=L,nt.StrictMode=r,nt.Suspense=c,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,nt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return V.H.useMemoCache(F)}},nt.cache=function(F){return function(){return F.apply(null,arguments)}},nt.cloneElement=function(F,se,ge){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var le=T({},F.props),Re=F.key,Se=void 0;if(se!=null)for(Le in se.ref!==void 0&&(Se=void 0),se.key!==void 0&&(Re=""+se.key),se)!M.call(se,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&se.ref===void 0||(le[Le]=se[Le]);var Le=arguments.length-2;if(Le===1)le.children=ge;else if(1<Le){for(var Kt=Array(Le),Rt=0;Rt<Le;Rt++)Kt[Rt]=arguments[Rt+2];le.children=Kt}return O(F.type,Re,void 0,void 0,Se,le)},nt.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},nt.createElement=function(F,se,ge){var le,Re={},Se=null;if(se!=null)for(le in se.key!==void 0&&(Se=""+se.key),se)M.call(se,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Re[le]=se[le]);var Le=arguments.length-2;if(Le===1)Re.children=ge;else if(1<Le){for(var Kt=Array(Le),Rt=0;Rt<Le;Rt++)Kt[Rt]=arguments[Rt+2];Re.children=Kt}if(F&&F.defaultProps)for(le in Le=F.defaultProps,Le)Re[le]===void 0&&(Re[le]=Le[le]);return O(F,Se,void 0,void 0,null,Re)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(F){return{$$typeof:u,render:F}},nt.isValidElement=x,nt.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:ne}},nt.memo=function(F,se){return{$$typeof:f,type:F,compare:se===void 0?null:se}},nt.startTransition=function(F){var se=V.T,ge={};V.T=ge;try{var le=F(),Re=V.S;Re!==null&&Re(ge,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(xe,Te)}catch(Se){Te(Se)}finally{V.T=se}},nt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},nt.use=function(F){return V.H.use(F)},nt.useActionState=function(F,se,ge){return V.H.useActionState(F,se,ge)},nt.useCallback=function(F,se){return V.H.useCallback(F,se)},nt.useContext=function(F){return V.H.useContext(F)},nt.useDebugValue=function(){},nt.useDeferredValue=function(F,se){return V.H.useDeferredValue(F,se)},nt.useEffect=function(F,se,ge){var le=V.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(F,se)},nt.useId=function(){return V.H.useId()},nt.useImperativeHandle=function(F,se,ge){return V.H.useImperativeHandle(F,se,ge)},nt.useInsertionEffect=function(F,se){return V.H.useInsertionEffect(F,se)},nt.useLayoutEffect=function(F,se){return V.H.useLayoutEffect(F,se)},nt.useMemo=function(F,se){return V.H.useMemo(F,se)},nt.useOptimistic=function(F,se){return V.H.useOptimistic(F,se)},nt.useReducer=function(F,se,ge){return V.H.useReducer(F,se,ge)},nt.useRef=function(F){return V.H.useRef(F)},nt.useState=function(F){return V.H.useState(F)},nt.useSyncExternalStore=function(F,se,ge){return V.H.useSyncExternalStore(F,se,ge)},nt.useTransition=function(){return V.H.useTransition()},nt.version="19.1.0",nt}var aC;function OE(){return aC||(aC=1,$v.exports=n4()),$v.exports}var G=OE();const Sr=bN(G);var Gv={exports:{}},Bf={},Kv={exports:{}},Wv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function r4(){return lC||(lC=1,function(n){function e(Y,ne){var Te=Y.length;Y.push(ne);e:for(;0<Te;){var xe=Te-1>>>1,F=Y[xe];if(0<i(F,ne))Y[xe]=ne,Y[Te]=F,Te=xe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ne=Y[0],Te=Y.pop();if(Te!==ne){Y[0]=Te;e:for(var xe=0,F=Y.length,se=F>>>1;xe<se;){var ge=2*(xe+1)-1,le=Y[ge],Re=ge+1,Se=Y[Re];if(0>i(le,Te))Re<F&&0>i(Se,le)?(Y[xe]=Se,Y[Re]=Te,xe=Re):(Y[xe]=le,Y[ge]=Te,xe=ge);else if(Re<F&&0>i(Se,Te))Y[xe]=Se,Y[Re]=Te,xe=Re;else break e}}return ne}function i(Y,ne){var Te=Y.sortIndex-ne.sortIndex;return Te!==0?Te:Y.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var c=[],f=[],p=1,g=null,_=3,A=!1,T=!1,E=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(Y){for(var ne=t(f);ne!==null;){if(ne.callback===null)r(f);else if(ne.startTime<=Y)r(f),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=t(f)}}function V(Y){if(E=!1,q(Y),!T)if(t(c)!==null)T=!0,M||(M=!0,j());else{var ne=t(f);ne!==null&&fe(V,ne.startTime-Y)}}var M=!1,O=-1,I=5,x=-1;function z(){return S?!0:!(n.unstable_now()-x<I)}function U(){if(S=!1,M){var Y=n.unstable_now();x=Y;var ne=!0;try{e:{T=!1,E&&(E=!1,L(O),O=-1),A=!0;var Te=_;try{t:{for(q(Y),g=t(c);g!==null&&!(g.expirationTime>Y&&z());){var xe=g.callback;if(typeof xe=="function"){g.callback=null,_=g.priorityLevel;var F=xe(g.expirationTime<=Y);if(Y=n.unstable_now(),typeof F=="function"){g.callback=F,q(Y),ne=!0;break t}g===t(c)&&r(c),q(Y)}else r(c);g=t(c)}if(g!==null)ne=!0;else{var se=t(f);se!==null&&fe(V,se.startTime-Y),ne=!1}}break e}finally{g=null,_=Te,A=!1}ne=void 0}}finally{ne?j():M=!1}}}var j;if(typeof B=="function")j=function(){B(U)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ae=P.port2;P.port1.onmessage=U,j=function(){ae.postMessage(null)}}else j=function(){k(U,0)};function fe(Y,ne){O=k(function(){Y(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var Te=_;_=ne;try{return Y()}finally{_=Te}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Te=_;_=Y;try{return ne()}finally{_=Te}},n.unstable_scheduleCallback=function(Y,ne,Te){var xe=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?xe+Te:xe):Te=xe,Y){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Te+F,Y={id:p++,callback:ne,priorityLevel:Y,startTime:Te,expirationTime:F,sortIndex:-1},Te>xe?(Y.sortIndex=Te,e(f,Y),t(c)===null&&Y===t(f)&&(E?(L(O),O=-1):E=!0,fe(V,Te-xe))):(Y.sortIndex=F,e(c,Y),T||A||(T=!0,M||(M=!0,j()))),Y},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(Y){var ne=_;return function(){var Te=_;_=ne;try{return Y.apply(this,arguments)}finally{_=Te}}}}(Wv)),Wv}var uC;function i4(){return uC||(uC=1,Kv.exports=r4()),Kv.exports}var Yv={exports:{}},Ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC;function s4(){if(cC)return Ar;cC=1;var n=OE();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:f,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ar.createPortal=function(c,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(c,f,null,p)},Ar.flushSync=function(c){var f=a.T,p=r.p;try{if(a.T=null,r.p=2,c)return c()}finally{a.T=f,r.p=p,r.d.f()}},Ar.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Ar.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ar.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:A}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:_,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ar.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Ar.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ar.preloadModule=function(c,f){if(typeof c=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Ar.requestFormReset=function(c){r.d.r(c)},Ar.unstable_batchedUpdates=function(c,f){return c(f)},Ar.useFormState=function(c,f,p){return a.H.useFormState(c,f,p)},Ar.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ar.version="19.1.0",Ar}var hC;function SN(){if(hC)return Yv.exports;hC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yv.exports=s4(),Yv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function o4(){if(fC)return Bf;fC=1;var n=i4(),e=OE(),t=SN();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(r(188))}function c(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var h=o,d=l;;){var y=h.return;if(y===null)break;var v=y.alternate;if(v===null){if(d=y.return,d!==null){h=d;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===h)return u(y),o;if(v===d)return u(y),l;v=v.sibling}throw Error(r(188))}if(h.return!==d.return)h=y,d=v;else{for(var R=!1,N=y.child;N;){if(N===h){R=!0,h=y,d=v;break}if(N===d){R=!0,d=y,h=v;break}N=N.sibling}if(!R){for(N=v.child;N;){if(N===h){R=!0,h=v,d=y;break}if(N===d){R=!0,d=v,h=y;break}N=N.sibling}if(!R)throw Error(r(189))}}if(h.alternate!==d)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:l}function f(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=f(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function j(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function ae(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case V:return"Suspense";case M:return"SuspenseList";case x:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case B:return(o.displayName||"Context")+".Provider";case L:return(o._context.displayName||"Context")+".Consumer";case q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return l=o.displayName||null,l!==null?l:ae(o.type)||"Memo";case I:l=o._payload,o=o._init;try{return ae(o(l))}catch{}}return null}var fe=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},xe=[],F=-1;function se(o){return{current:o}}function ge(o){0>F||(o.current=xe[F],xe[F]=null,F--)}function le(o,l){F++,xe[F]=o.current,o.current=l}var Re=se(null),Se=se(null),Le=se(null),Kt=se(null);function Rt(o,l){switch(le(Le,l),le(Se,o),le(Re,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?OR(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=OR(l),o=MR(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ge(Re),le(Re,o)}function mr(){ge(Re),ge(Se),ge(Le)}function Ut(o){o.memoizedState!==null&&le(Kt,o);var l=Re.current,h=MR(l,o.type);l!==h&&(le(Se,o),le(Re,h))}function On(o){Se.current===o&&(ge(Re),ge(Se)),Kt.current===o&&(ge(Kt),Df._currentValue=Te)}var Zn=Object.prototype.hasOwnProperty,di=n.unstable_scheduleCallback,Xt=n.unstable_cancelCallback,gs=n.unstable_shouldYield,ks=n.unstable_requestPaint,on=n.unstable_now,Is=n.unstable_getCurrentPriorityLevel,zi=n.unstable_ImmediatePriority,ys=n.unstable_UserBlockingPriority,Bi=n.unstable_NormalPriority,pi=n.unstable_LowPriority,gr=n.unstable_IdlePriority,Kr=n.log,Mr=n.unstable_setDisableYieldValue,ut=null,et=null;function Mn(o){if(typeof Kr=="function"&&Mr(o),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(ut,o)}catch{}}var Jt=Math.clz32?Math.clz32:Pr,Ns=Math.log,Dr=Math.LN2;function Pr(o){return o>>>=0,o===0?32:31-(Ns(o)/Dr|0)|0}var Lr=256,Tn=4194304;function En(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function mi(o,l,h){var d=o.pendingLanes;if(d===0)return 0;var y=0,v=o.suspendedLanes,R=o.pingedLanes;o=o.warmLanes;var N=d&134217727;return N!==0?(d=N&~v,d!==0?y=En(d):(R&=N,R!==0?y=En(R):h||(h=N&~o,h!==0&&(y=En(h))))):(N=d&~v,N!==0?y=En(N):R!==0?y=En(R):h||(h=d&~o,h!==0&&(y=En(h)))),y===0?0:l!==0&&l!==y&&(l&v)===0&&(v=y&-y,h=l&-l,v>=h||v===32&&(h&4194048)!==0)?l:y}function yr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Os(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var o=Lr;return Lr<<=1,(Lr&4194048)===0&&(Lr=256),o}function ji(){var o=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),o}function Yr(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function er(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ms(o,l,h,d,y,v){var R=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var N=o.entanglements,H=o.expirationTimes,te=o.hiddenUpdates;for(h=R&~h;0<h;){var ue=31-Jt(h),de=1<<ue;N[ue]=0,H[ue]=-1;var re=te[ue];if(re!==null)for(te[ue]=null,ue=0;ue<re.length;ue++){var ie=re[ue];ie!==null&&(ie.lane&=-536870913)}h&=~de}d!==0&&tr(o,d,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(R&~l))}function tr(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Jt(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|h&4194090}function Nt(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var d=31-Jt(h),y=1<<d;y&l|o[d]&l&&(o[d]|=l),h&=~y}}function nr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ds(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function $(){var o=ne.p;return o!==0?o:(o=window.event,o===void 0?32:JR(o.type))}function X(o,l){var h=ne.p;try{return ne.p=o,l()}finally{ne.p=h}}var Z=Math.random().toString(36).slice(2),he="__reactFiber$"+Z,ve="__reactProps$"+Z,we="__reactContainer$"+Z,ze="__reactEvents$"+Z,Ne="__reactListeners$"+Z,Me="__reactHandles$"+Z,Ue="__reactResources$"+Z,Fe="__reactMarker$"+Z;function ke(o){delete o[he],delete o[ve],delete o[ze],delete o[Ne],delete o[Me]}function He(o){var l=o[he];if(l)return l;for(var h=o.parentNode;h;){if(l=h[we]||h[he]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=VR(o);o!==null;){if(h=o[he])return h;o=VR(o)}return l}o=h,h=o.parentNode}return null}function it(o){if(o=o[he]||o[we]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function St(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function _t(o){var l=o[Ue];return l||(l=o[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ft(o){o[Fe]=!0}var Ae=new Set,K={};function me(o,l){Ce(o,l),Ce(o+"Capture",l)}function Ce(o,l){for(K[o]=l,o=0;o<l.length;o++)Ae.add(l[o])}var tt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},Ct={};function Zt(o){return Zn.call(Ct,o)?!0:Zn.call(zt,o)?!1:tt.test(o)?Ct[o]=!0:(zt[o]=!0,!1)}function Bt(o,l,h){if(Zt(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function mn(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function Ve(o,l,h,d){if(d===null)o.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+d)}}var en,_r;function Qr(o){if(en===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);en=l&&l[1]||"",_r=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+o+_r}var Ps=!1;function jt(o,l){if(!o||Ps)return"";Ps=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ie){var re=ie}Reflect.construct(o,[],de)}else{try{de.call()}catch(ie){re=ie}o.call(de.prototype)}}else{try{throw Error()}catch(ie){re=ie}(de=o())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ie){if(ie&&re&&typeof ie.stack=="string")return[ie.stack,re.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),R=v[0],N=v[1];if(R&&N){var H=R.split(`
`),te=N.split(`
`);for(y=d=0;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;for(;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;if(d===H.length||y===te.length)for(d=H.length-1,y=te.length-1;1<=d&&0<=y&&H[d]!==te[y];)y--;for(;1<=d&&0<=y;d--,y--)if(H[d]!==te[y]){if(d!==1||y!==1)do if(d--,y--,0>y||H[d]!==te[y]){var ue=`
`+H[d].replace(" at new "," at ");return o.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",o.displayName)),ue}while(1<=d&&0<=y);break}}}finally{Ps=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Qr(h):""}function Fi(o){switch(o.tag){case 26:case 27:case 5:return Qr(o.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return jt(o.type,!1);case 11:return jt(o.type.render,!1);case 1:return jt(o.type,!0);case 31:return Qr("Activity");default:return""}}function yo(o){try{var l="";do l+=Fi(o),o=o.return;while(o);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function rr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function jh(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function W_(o){var l=jh(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),d=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,v=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(R){d=""+R,v.call(this,R)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Zu(o){o._valueTracker||(o._valueTracker=W_(o))}function Fh(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),d="";return o&&(d=jh(o)?o.checked?"true":"false":o.value),o=d,o!==h?(l.setValue(o),!0):!1}function Ol(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Y_=/[\n"\\]/g;function bn(o){return o.replace(Y_,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function gi(o,l,h,d,y,v,R,N){o.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.type=R:o.removeAttribute("type"),l!=null?R==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+rr(l)):o.value!==""+rr(l)&&(o.value=""+rr(l)):R!=="submit"&&R!=="reset"||o.removeAttribute("value"),l!=null?la(o,R,rr(l)):h!=null?la(o,R,rr(h)):d!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.name=""+rr(N):o.removeAttribute("name")}function Ml(o,l,h,d,y,v,R,N){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),l!=null||h!=null){if(!(v!=="submit"&&v!=="reset"||l!=null))return;h=h!=null?""+rr(h):"",l=l!=null?""+rr(l):h,N||l===o.value||(o.value=l),o.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=N?o.checked:!!d,o.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.name=R)}function la(o,l,h){l==="number"&&Ol(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function _o(o,l,h,d){if(o=o.options,l){l={};for(var y=0;y<h.length;y++)l["$"+h[y]]=!0;for(h=0;h<o.length;h++)y=l.hasOwnProperty("$"+o[h].value),o[h].selected!==y&&(o[h].selected=y),y&&d&&(o[h].defaultSelected=!0)}else{for(h=""+rr(h),l=null,y=0;y<o.length;y++){if(o[y].value===h){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Dt(o,l,h){if(l!=null&&(l=""+rr(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+rr(h):""}function Dl(o,l,h,d){if(l==null){if(d!=null){if(h!=null)throw Error(r(92));if(fe(d)){if(1<d.length)throw Error(r(93));d=d[0]}h=d}h==null&&(h=""),l=h}h=rr(l),o.defaultValue=h,d=o.textContent,d===h&&d!==""&&d!==null&&(o.value=d)}function Hi(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var Pl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sp(o,l,h){var d=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,h):typeof h!="number"||h===0||Pl.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function Hh(o,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&h[y]!==d&&Sp(o,y,d)}else for(var v in l)l.hasOwnProperty(v)&&Sp(o,v,l[v])}function qh(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),X_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ec(o){return X_.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var vo=null;function qi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ao=null,To=null;function $h(o){var l=it(o);if(l&&(o=l.stateNode)){var h=o[ve]||null;e:switch(o=l.stateNode,l.type){case"input":if(gi(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+bn(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var d=h[l];if(d!==o&&d.form===o.form){var y=d[ve]||null;if(!y)throw Error(r(90));gi(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<h.length;l++)d=h[l],d.form===o.form&&Fh(d)}break e;case"textarea":Dt(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&_o(o,!!h.multiple,l,!1)}}}var Ls=!1;function wp(o,l,h){if(Ls)return o(l,h);Ls=!0;try{var d=o(l);return d}finally{if(Ls=!1,(Ao!==null||To!==null)&&(_m(),Ao&&(l=Ao,o=To,To=Ao=null,$h(l),o)))for(l=0;l<o.length;l++)$h(o[l])}}function Ll(o,l){var h=o.stateNode;if(h===null)return null;var d=h[ve]||null;if(d===null)return null;h=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(_s)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{$i=!1}var Vs=null,ua=null,Eo=null;function Gh(){if(Eo)return Eo;var o,l=ua,h=l.length,d,y="value"in Vs?Vs.value:Vs.textContent,v=y.length;for(o=0;o<h&&l[o]===y[o];o++);var R=h-o;for(d=1;d<=R&&l[h-d]===y[v-d];d++);return Eo=y.slice(o,1<d?1-d:void 0)}function Us(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function zs(){return!0}function Kh(){return!1}function Bn(o){function l(h,d,y,v,R){this._reactName=h,this._targetInst=y,this.type=d,this.nativeEvent=v,this.target=R,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(h=o[N],this[N]=h?h(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?zs:Kh,this.isPropagationStopped=Kh,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),l}var kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=Bn(kt),Ul=p({},kt,{view:0,detail:0}),Rp=Bn(Ul),nc,rc,Bs,zl=p({},Ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Bs&&(Bs&&o.type==="mousemove"?(nc=o.screenX-Bs.screenX,rc=o.screenY-Bs.screenY):rc=nc=0,Bs=o),nc)},movementY:function(o){return"movementY"in o?o.movementY:rc}}),Gi=Bn(zl),Cp=p({},zl,{dataTransfer:0}),J_=Bn(Cp),Bl=p({},Ul,{relatedTarget:0}),ic=Bn(Bl),Wh=p({},kt,{animationName:0,elapsedTime:0,pseudoElement:0}),sc=Bn(Wh),xp=p({},kt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),oc=Bn(xp),Z_=p({},kt,{data:0}),Yh=Bn(Z_),jl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qh(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Ip[o])?!!l[o]:!1}function Fl(){return Qh}var Np=p({},Ul,{key:function(o){if(o.key){var l=jl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Us(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?kp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(o){return o.type==="keypress"?Us(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Us(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ac=Bn(Np),Op=p({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xh=Bn(Op),bo=p({},Ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),Mp=Bn(bo),Dp=p({},kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pp=Bn(Dp),Lp=p({},zl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),lc=Bn(Lp),Vr=p({},kt,{newState:0,oldState:0}),Vp=Bn(Vr),Up=[9,13,27,32],js=_s&&"CompositionEvent"in window,m=null;_s&&"documentMode"in document&&(m=document.documentMode);var b=_s&&"TextEvent"in window&&!m,w=_s&&(!js||m&&8<m&&11>=m),D=" ",J=!1;function oe(o,l){switch(o){case"keyup":return Up.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var At=!1;function Dn(o,l){switch(o){case"compositionend":return be(l);case"keypress":return l.which!==32?null:(J=!0,D);case"textInput":return o=l.data,o===D&&J?null:o;default:return null}}function Tt(o,l){if(At)return o==="compositionend"||!js&&oe(o,l)?(o=Gh(),Eo=ua=Vs=null,At=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return w&&l.locale!=="ko"?null:l.data;default:return null}}var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!jn[o.type]:l==="textarea"}function So(o,l,h,d){Ao?To?To.push(d):To=[d]:Ao=d,l=Sm(l,"onChange"),0<l.length&&(h=new tc("onChange","change",null,h,d),o.push({event:h,listeners:l}))}var ir=null,Fs=null;function Jh(o){CR(o,0)}function zp(o){var l=St(o);if(Fh(l))return o}function WS(o,l){if(o==="change")return l}var YS=!1;if(_s){var e0;if(_s){var t0="oninput"in document;if(!t0){var QS=document.createElement("div");QS.setAttribute("oninput","return;"),t0=typeof QS.oninput=="function"}e0=t0}else e0=!1;YS=e0&&(!document.documentMode||9<document.documentMode)}function XS(){ir&&(ir.detachEvent("onpropertychange",JS),Fs=ir=null)}function JS(o){if(o.propertyName==="value"&&zp(Fs)){var l=[];So(l,Fs,o,qi(o)),wp(Jh,l)}}function IV(o,l,h){o==="focusin"?(XS(),ir=l,Fs=h,ir.attachEvent("onpropertychange",JS)):o==="focusout"&&XS()}function NV(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return zp(Fs)}function OV(o,l){if(o==="click")return zp(l)}function MV(o,l){if(o==="input"||o==="change")return zp(l)}function DV(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var yi=typeof Object.is=="function"?Object.is:DV;function Zh(o,l){if(yi(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),d=Object.keys(l);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var y=h[d];if(!Zn.call(l,y)||!yi(o[y],l[y]))return!1}return!0}function ZS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ew(o,l){var h=ZS(o);o=0;for(var d;h;){if(h.nodeType===3){if(d=o+h.textContent.length,o<=l&&d>=l)return{node:h,offset:l-o};o=d}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=ZS(h)}}function tw(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?tw(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function nw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ol(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=Ol(o.document)}return l}function n0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var PV=_s&&"documentMode"in document&&11>=document.documentMode,uc=null,r0=null,ef=null,i0=!1;function rw(o,l,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;i0||uc==null||uc!==Ol(d)||(d=uc,"selectionStart"in d&&n0(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ef&&Zh(ef,d)||(ef=d,d=Sm(r0,"onSelect"),0<d.length&&(l=new tc("onSelect","select",null,l,h),o.push({event:l,listeners:d}),l.target=uc)))}function Hl(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var cc={animationend:Hl("Animation","AnimationEnd"),animationiteration:Hl("Animation","AnimationIteration"),animationstart:Hl("Animation","AnimationStart"),transitionrun:Hl("Transition","TransitionRun"),transitionstart:Hl("Transition","TransitionStart"),transitioncancel:Hl("Transition","TransitionCancel"),transitionend:Hl("Transition","TransitionEnd")},s0={},iw={};_s&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function ql(o){if(s0[o])return s0[o];if(!cc[o])return o;var l=cc[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in iw)return s0[o]=l[h];return o}var sw=ql("animationend"),ow=ql("animationiteration"),aw=ql("animationstart"),LV=ql("transitionrun"),VV=ql("transitionstart"),UV=ql("transitioncancel"),lw=ql("transitionend"),uw=new Map,o0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o0.push("scrollEnd");function vs(o,l){uw.set(o,l),me(l,[o])}var cw=new WeakMap;function Ki(o,l){if(typeof o=="object"&&o!==null){var h=cw.get(o);return h!==void 0?h:(l={value:o,source:l,stack:yo(l)},cw.set(o,l),l)}return{value:o,source:l,stack:yo(l)}}var Wi=[],hc=0,a0=0;function Bp(){for(var o=hc,l=a0=hc=0;l<o;){var h=Wi[l];Wi[l++]=null;var d=Wi[l];Wi[l++]=null;var y=Wi[l];Wi[l++]=null;var v=Wi[l];if(Wi[l++]=null,d!==null&&y!==null){var R=d.pending;R===null?y.next=y:(y.next=R.next,R.next=y),d.pending=y}v!==0&&hw(h,y,v)}}function jp(o,l,h,d){Wi[hc++]=o,Wi[hc++]=l,Wi[hc++]=h,Wi[hc++]=d,a0|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function l0(o,l,h,d){return jp(o,l,h,d),Fp(o)}function fc(o,l){return jp(o,null,null,l),Fp(o)}function hw(o,l,h){o.lanes|=h;var d=o.alternate;d!==null&&(d.lanes|=h);for(var y=!1,v=o.return;v!==null;)v.childLanes|=h,d=v.alternate,d!==null&&(d.childLanes|=h),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&l!==null&&(y=31-Jt(h),o=v.hiddenUpdates,d=o[y],d===null?o[y]=[l]:d.push(l),l.lane=h|536870912),v):null}function Fp(o){if(50<Rf)throw Rf=0,pv=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var dc={};function zV(o,l,h,d){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(o,l,h,d){return new zV(o,l,h,d)}function u0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function wo(o,l){var h=o.alternate;return h===null?(h=_i(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function fw(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Hp(o,l,h,d,y,v){var R=0;if(d=o,typeof o=="function")u0(o)&&(R=1);else if(typeof o=="string")R=jU(o,h,Re.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case x:return o=_i(31,h,l,y),o.elementType=x,o.lanes=v,o;case T:return $l(h.children,y,v,l);case E:R=8,y|=24;break;case S:return o=_i(12,h,l,y|2),o.elementType=S,o.lanes=v,o;case V:return o=_i(13,h,l,y),o.elementType=V,o.lanes=v,o;case M:return o=_i(19,h,l,y),o.elementType=M,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case k:case B:R=10;break e;case L:R=9;break e;case q:R=11;break e;case O:R=14;break e;case I:R=16,d=null;break e}R=29,h=Error(r(130,o===null?"null":typeof o,"")),d=null}return l=_i(R,h,l,y),l.elementType=o,l.type=d,l.lanes=v,l}function $l(o,l,h,d){return o=_i(7,o,d,l),o.lanes=h,o}function c0(o,l,h){return o=_i(6,o,null,l),o.lanes=h,o}function h0(o,l,h){return l=_i(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var pc=[],mc=0,qp=null,$p=0,Yi=[],Qi=0,Gl=null,Ro=1,Co="";function Kl(o,l){pc[mc++]=$p,pc[mc++]=qp,qp=o,$p=l}function dw(o,l,h){Yi[Qi++]=Ro,Yi[Qi++]=Co,Yi[Qi++]=Gl,Gl=o;var d=Ro;o=Co;var y=32-Jt(d)-1;d&=~(1<<y),h+=1;var v=32-Jt(l)+y;if(30<v){var R=y-y%5;v=(d&(1<<R)-1).toString(32),d>>=R,y-=R,Ro=1<<32-Jt(l)+y|h<<y|d,Co=v+o}else Ro=1<<v|h<<y|d,Co=o}function f0(o){o.return!==null&&(Kl(o,1),dw(o,1,0))}function d0(o){for(;o===qp;)qp=pc[--mc],pc[mc]=null,$p=pc[--mc],pc[mc]=null;for(;o===Gl;)Gl=Yi[--Qi],Yi[Qi]=null,Co=Yi[--Qi],Yi[Qi]=null,Ro=Yi[--Qi],Yi[Qi]=null}var Ur=null,an=null,xt=!1,Wl=null,Hs=!1,p0=Error(r(519));function Yl(o){var l=Error(r(418,""));throw rf(Ki(l,o)),p0}function pw(o){var l=o.stateNode,h=o.type,d=o.memoizedProps;switch(l[he]=o,l[ve]=d,h){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(h=0;h<xf.length;h++)pt(xf[h],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Ml(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Zu(l);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Dl(l,d.value,d.defaultValue,d.children),Zu(l)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||d.suppressHydrationWarning===!0||NR(l.textContent,h)?(d.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),d.onScroll!=null&&pt("scroll",l),d.onScrollEnd!=null&&pt("scrollend",l),d.onClick!=null&&(l.onclick=wm),l=!0):l=!1,l||Yl(o)}function mw(o){for(Ur=o.return;Ur;)switch(Ur.tag){case 5:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:Ur=Ur.return}}function tf(o){if(o!==Ur)return!1;if(!xt)return mw(o),xt=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Iv(o.type,o.memoizedProps)),h=!h),h&&an&&Yl(o),mw(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(l===0){an=Ts(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++;o=o.nextSibling}an=null}}else l===27?(l=an,wa(o.type)?(o=Dv,Dv=null,an=o):an=l):an=Ur?Ts(o.stateNode.nextSibling):null;return!0}function nf(){an=Ur=null,xt=!1}function gw(){var o=Wl;return o!==null&&(Zr===null?Zr=o:Zr.push.apply(Zr,o),Wl=null),o}function rf(o){Wl===null?Wl=[o]:Wl.push(o)}var m0=se(null),Ql=null,xo=null;function ca(o,l,h){le(m0,l._currentValue),l._currentValue=h}function ko(o){o._currentValue=m0.current,ge(m0)}function g0(o,l,h){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===h)break;o=o.return}}function y0(o,l,h,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var R=y.child;v=v.firstContext;e:for(;v!==null;){var N=v;v=y;for(var H=0;H<l.length;H++)if(N.context===l[H]){v.lanes|=h,N=v.alternate,N!==null&&(N.lanes|=h),g0(v.return,h,o),d||(R=null);break e}v=N.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(r(341));R.lanes|=h,v=R.alternate,v!==null&&(v.lanes|=h),g0(R,h,o),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===o){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function sf(o,l,h,d){o=null;for(var y=l,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var N=y.type;yi(y.pendingProps.value,R.value)||(o!==null?o.push(N):o=[N])}}else if(y===Kt.current){if(R=y.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Df):o=[Df])}y=y.return}o!==null&&y0(l,o,h,d),l.flags|=262144}function Gp(o){for(o=o.firstContext;o!==null;){if(!yi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Xl(o){Ql=o,xo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function vr(o){return yw(Ql,o)}function Kp(o,l){return Ql===null&&Xl(o),yw(o,l)}function yw(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},xo===null){if(o===null)throw Error(r(308));xo=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else xo=xo.next=l;return h}var BV=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},jV=n.unstable_scheduleCallback,FV=n.unstable_NormalPriority,Ln={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _0(){return{controller:new BV,data:new Map,refCount:0}}function of(o){o.refCount--,o.refCount===0&&jV(FV,function(){o.controller.abort()})}var af=null,v0=0,gc=0,yc=null;function HV(o,l){if(af===null){var h=af=[];v0=0,gc=Tv(),yc={status:"pending",value:void 0,then:function(d){h.push(d)}}}return v0++,l.then(_w,_w),l}function _w(){if(--v0===0&&af!==null){yc!==null&&(yc.status="fulfilled");var o=af;af=null,gc=0,yc=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function qV(o,l){var h=[],d={status:"pending",value:null,reason:null,then:function(y){h.push(y)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<h.length;y++)(0,h[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<h.length;y++)(0,h[y])(void 0)}),d}var vw=Y.S;Y.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&HV(o,l),vw!==null&&vw(o,l)};var Jl=se(null);function A0(){var o=Jl.current;return o!==null?o:$t.pooledCache}function Wp(o,l){l===null?le(Jl,Jl.current):le(Jl,l.pool)}function Aw(){var o=A0();return o===null?null:{parent:Ln._currentValue,pool:o}}var lf=Error(r(460)),Tw=Error(r(474)),Yp=Error(r(542)),T0={then:function(){}};function Ew(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Qp(){}function bw(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(Qp,Qp),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ww(o),o;default:if(typeof l.status=="string")l.then(Qp,Qp);else{if(o=$t,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ww(o),o}throw uf=l,lf}}var uf=null;function Sw(){if(uf===null)throw Error(r(459));var o=uf;return uf=null,o}function ww(o){if(o===lf||o===Yp)throw Error(r(483))}var ha=!1;function E0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function b0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function fa(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function da(o,l,h){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(Ot&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=Fp(o),hw(o,null,h),l}return jp(o,d,l,h),Fp(o)}function cf(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var d=l.lanes;d&=o.pendingLanes,h|=d,l.lanes=h,Nt(o,h)}}function S0(o,l){var h=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var y=null,v=null;if(h=h.firstBaseUpdate,h!==null){do{var R={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};v===null?y=v=R:v=v.next=R,h=h.next}while(h!==null);v===null?y=v=l:v=v.next=l}else y=v=l;h={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var w0=!1;function hf(){if(w0){var o=yc;if(o!==null)throw o}}function ff(o,l,h,d){w0=!1;var y=o.updateQueue;ha=!1;var v=y.firstBaseUpdate,R=y.lastBaseUpdate,N=y.shared.pending;if(N!==null){y.shared.pending=null;var H=N,te=H.next;H.next=null,R===null?v=te:R.next=te,R=H;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,N=ue.lastBaseUpdate,N!==R&&(N===null?ue.firstBaseUpdate=te:N.next=te,ue.lastBaseUpdate=H))}if(v!==null){var de=y.baseState;R=0,ue=te=H=null,N=v;do{var re=N.lane&-536870913,ie=re!==N.lane;if(ie?(Et&re)===re:(d&re)===re){re!==0&&re===gc&&(w0=!0),ue!==null&&(ue=ue.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Qe=o,Ge=N;re=l;var Vt=h;switch(Ge.tag){case 1:if(Qe=Ge.payload,typeof Qe=="function"){de=Qe.call(Vt,de,re);break e}de=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ge.payload,re=typeof Qe=="function"?Qe.call(Vt,de,re):Qe,re==null)break e;de=p({},de,re);break e;case 2:ha=!0}}re=N.callback,re!==null&&(o.flags|=64,ie&&(o.flags|=8192),ie=y.callbacks,ie===null?y.callbacks=[re]:ie.push(re))}else ie={lane:re,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ue===null?(te=ue=ie,H=de):ue=ue.next=ie,R|=re;if(N=N.next,N===null){if(N=y.shared.pending,N===null)break;ie=N,N=ie.next,ie.next=null,y.lastBaseUpdate=ie,y.shared.pending=null}}while(!0);ue===null&&(H=de),y.baseState=H,y.firstBaseUpdate=te,y.lastBaseUpdate=ue,v===null&&(y.shared.lanes=0),Ta|=R,o.lanes=R,o.memoizedState=de}}function Rw(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Cw(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)Rw(h[o],l)}var _c=se(null),Xp=se(0);function xw(o,l){o=Lo,le(Xp,o),le(_c,l),Lo=o|l.baseLanes}function R0(){le(Xp,Lo),le(_c,_c.current)}function C0(){Lo=Xp.current,ge(_c),ge(Xp)}var pa=0,ot=null,Pt=null,Sn=null,Jp=!1,vc=!1,Zl=!1,Zp=0,df=0,Ac=null,$V=0;function gn(){throw Error(r(321))}function x0(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!yi(o[h],l[h]))return!1;return!0}function k0(o,l,h,d,y,v){return pa=v,ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Y.H=o===null||o.memoizedState===null?h1:f1,Zl=!1,v=h(d,y),Zl=!1,vc&&(v=Iw(l,h,d,y)),kw(o),v}function kw(o){Y.H=sm;var l=Pt!==null&&Pt.next!==null;if(pa=0,Sn=Pt=ot=null,Jp=!1,df=0,Ac=null,l)throw Error(r(300));o===null||Fn||(o=o.dependencies,o!==null&&Gp(o)&&(Fn=!0))}function Iw(o,l,h,d){ot=o;var y=0;do{if(vc&&(Ac=null),df=0,vc=!1,25<=y)throw Error(r(301));if(y+=1,Sn=Pt=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=JV,v=l(h,d)}while(vc);return v}function GV(){var o=Y.H,l=o.useState()[0];return l=typeof l.then=="function"?pf(l):l,o=o.useState()[0],(Pt!==null?Pt.memoizedState:null)!==o&&(ot.flags|=1024),l}function I0(){var o=Zp!==0;return Zp=0,o}function N0(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function O0(o){if(Jp){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Jp=!1}pa=0,Sn=Pt=ot=null,vc=!1,df=Zp=0,Ac=null}function Xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?ot.memoizedState=Sn=o:Sn=Sn.next=o,Sn}function wn(){if(Pt===null){var o=ot.alternate;o=o!==null?o.memoizedState:null}else o=Pt.next;var l=Sn===null?ot.memoizedState:Sn.next;if(l!==null)Sn=l,Pt=o;else{if(o===null)throw ot.alternate===null?Error(r(467)):Error(r(310));Pt=o,o={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Sn===null?ot.memoizedState=Sn=o:Sn=Sn.next=o}return Sn}function M0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pf(o){var l=df;return df+=1,Ac===null&&(Ac=[]),o=bw(Ac,o,l),l=ot,(Sn===null?l.memoizedState:Sn.next)===null&&(l=l.alternate,Y.H=l===null||l.memoizedState===null?h1:f1),o}function em(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return pf(o);if(o.$$typeof===B)return vr(o)}throw Error(r(438,String(o)))}function D0(o){var l=null,h=ot.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var d=ot.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=M0(),ot.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),d=0;d<o;d++)h[d]=z;return l.index++,h}function Io(o,l){return typeof l=="function"?l(o):l}function tm(o){var l=wn();return P0(l,Pt,o)}function P0(o,l,h){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=h;var y=o.baseQueue,v=d.pending;if(v!==null){if(y!==null){var R=y.next;y.next=v.next,v.next=R}l.baseQueue=y=v,d.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{l=y.next;var N=R=null,H=null,te=l,ue=!1;do{var de=te.lane&-536870913;if(de!==te.lane?(Et&de)===de:(pa&de)===de){var re=te.revertLane;if(re===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),de===gc&&(ue=!0);else if((pa&re)===re){te=te.next,re===gc&&(ue=!0);continue}else de={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},H===null?(N=H=de,R=v):H=H.next=de,ot.lanes|=re,Ta|=re;de=te.action,Zl&&h(v,de),v=te.hasEagerState?te.eagerState:h(v,de)}else re={lane:de,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},H===null?(N=H=re,R=v):H=H.next=re,ot.lanes|=de,Ta|=de;te=te.next}while(te!==null&&te!==l);if(H===null?R=v:H.next=N,!yi(v,o.memoizedState)&&(Fn=!0,ue&&(h=yc,h!==null)))throw h;o.memoizedState=v,o.baseState=R,o.baseQueue=H,d.lastRenderedState=v}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function L0(o){var l=wn(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var d=h.dispatch,y=h.pending,v=l.memoizedState;if(y!==null){h.pending=null;var R=y=y.next;do v=o(v,R.action),R=R.next;while(R!==y);yi(v,l.memoizedState)||(Fn=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),h.lastRenderedState=v}return[v,d]}function Nw(o,l,h){var d=ot,y=wn(),v=xt;if(v){if(h===void 0)throw Error(r(407));h=h()}else h=l();var R=!yi((Pt||y).memoizedState,h);R&&(y.memoizedState=h,Fn=!0),y=y.queue;var N=Dw.bind(null,d,y,o);if(mf(2048,8,N,[o]),y.getSnapshot!==l||R||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,Tc(9,nm(),Mw.bind(null,d,y,h,l),null),$t===null)throw Error(r(349));v||(pa&124)!==0||Ow(d,l,h)}return h}function Ow(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=ot.updateQueue,l===null?(l=M0(),ot.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function Mw(o,l,h,d){l.value=h,l.getSnapshot=d,Pw(l)&&Lw(o)}function Dw(o,l,h){return h(function(){Pw(l)&&Lw(o)})}function Pw(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!yi(o,h)}catch{return!0}}function Lw(o){var l=fc(o,2);l!==null&&bi(l,o,2)}function V0(o){var l=Xr();if(typeof o=="function"){var h=o;if(o=h(),Zl){Mn(!0);try{h()}finally{Mn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:o},l}function Vw(o,l,h,d){return o.baseState=h,P0(o,Pt,typeof d=="function"?d:Io)}function KV(o,l,h,d,y){if(im(o))throw Error(r(485));if(o=l.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){v.listeners.push(R)}};Y.T!==null?h(!0):v.isTransition=!1,d(v),h=l.pending,h===null?(v.next=l.pending=v,Uw(l,v)):(v.next=h.next,l.pending=h.next=v)}}function Uw(o,l){var h=l.action,d=l.payload,y=o.state;if(l.isTransition){var v=Y.T,R={};Y.T=R;try{var N=h(y,d),H=Y.S;H!==null&&H(R,N),zw(o,l,N)}catch(te){U0(o,l,te)}finally{Y.T=v}}else try{v=h(y,d),zw(o,l,v)}catch(te){U0(o,l,te)}}function zw(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){Bw(o,l,d)},function(d){return U0(o,l,d)}):Bw(o,l,h)}function Bw(o,l,h){l.status="fulfilled",l.value=h,jw(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,Uw(o,h)))}function U0(o,l,h){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=h,jw(l),l=l.next;while(l!==d)}o.action=null}function jw(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function Fw(o,l){return l}function Hw(o,l){if(xt){var h=$t.formState;if(h!==null){e:{var d=ot;if(xt){if(an){t:{for(var y=an,v=Hs;y.nodeType!==8;){if(!v){y=null;break t}if(y=Ts(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){an=Ts(y.nextSibling),d=y.data==="F!";break e}}Yl(d)}d=!1}d&&(l=h[0])}}return h=Xr(),h.memoizedState=h.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fw,lastRenderedState:l},h.queue=d,h=l1.bind(null,ot,d),d.dispatch=h,d=V0(!1),v=H0.bind(null,ot,!1,d.queue),d=Xr(),y={state:l,dispatch:null,action:o,pending:null},d.queue=y,h=KV.bind(null,ot,y,v,h),y.dispatch=h,d.memoizedState=o,[l,h,!1]}function qw(o){var l=wn();return $w(l,Pt,o)}function $w(o,l,h){if(l=P0(o,l,Fw)[0],o=tm(Io)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=pf(l)}catch(R){throw R===lf?Yp:R}else d=l;l=wn();var y=l.queue,v=y.dispatch;return h!==l.memoizedState&&(ot.flags|=2048,Tc(9,nm(),WV.bind(null,y,h),null)),[d,v,o]}function WV(o,l){o.action=l}function Gw(o){var l=wn(),h=Pt;if(h!==null)return $w(l,h,o);wn(),l=l.memoizedState,h=wn();var d=h.queue.dispatch;return h.memoizedState=o,[l,d,!1]}function Tc(o,l,h,d){return o={tag:o,create:h,deps:d,inst:l,next:null},l=ot.updateQueue,l===null&&(l=M0(),ot.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(d=h.next,h.next=o,o.next=d,l.lastEffect=o),o}function nm(){return{destroy:void 0,resource:void 0}}function Kw(){return wn().memoizedState}function rm(o,l,h,d){var y=Xr();d=d===void 0?null:d,ot.flags|=o,y.memoizedState=Tc(1|l,nm(),h,d)}function mf(o,l,h,d){var y=wn();d=d===void 0?null:d;var v=y.memoizedState.inst;Pt!==null&&d!==null&&x0(d,Pt.memoizedState.deps)?y.memoizedState=Tc(l,v,h,d):(ot.flags|=o,y.memoizedState=Tc(1|l,v,h,d))}function Ww(o,l){rm(8390656,8,o,l)}function Yw(o,l){mf(2048,8,o,l)}function Qw(o,l){return mf(4,2,o,l)}function Xw(o,l){return mf(4,4,o,l)}function Jw(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Zw(o,l,h){h=h!=null?h.concat([o]):null,mf(4,4,Jw.bind(null,l,o),h)}function z0(){}function e1(o,l){var h=wn();l=l===void 0?null:l;var d=h.memoizedState;return l!==null&&x0(l,d[1])?d[0]:(h.memoizedState=[o,l],o)}function t1(o,l){var h=wn();l=l===void 0?null:l;var d=h.memoizedState;if(l!==null&&x0(l,d[1]))return d[0];if(d=o(),Zl){Mn(!0);try{o()}finally{Mn(!1)}}return h.memoizedState=[d,l],d}function B0(o,l,h){return h===void 0||(pa&1073741824)!==0?o.memoizedState=l:(o.memoizedState=h,o=iR(),ot.lanes|=o,Ta|=o,h)}function n1(o,l,h,d){return yi(h,l)?h:_c.current!==null?(o=B0(o,h,d),yi(o,l)||(Fn=!0),o):(pa&42)===0?(Fn=!0,o.memoizedState=h):(o=iR(),ot.lanes|=o,Ta|=o,l)}function r1(o,l,h,d,y){var v=ne.p;ne.p=v!==0&&8>v?v:8;var R=Y.T,N={};Y.T=N,H0(o,!1,l,h);try{var H=y(),te=Y.S;if(te!==null&&te(N,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ue=qV(H,d);gf(o,l,ue,Ei(o))}else gf(o,l,d,Ei(o))}catch(de){gf(o,l,{then:function(){},status:"rejected",reason:de},Ei())}finally{ne.p=v,Y.T=R}}function YV(){}function j0(o,l,h,d){if(o.tag!==5)throw Error(r(476));var y=i1(o).queue;r1(o,y,l,Te,h===null?YV:function(){return s1(o),h(d)})}function i1(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:Te},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function s1(o){var l=i1(o).next.queue;gf(o,l,{},Ei())}function F0(){return vr(Df)}function o1(){return wn().memoizedState}function a1(){return wn().memoizedState}function QV(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=Ei();o=fa(h);var d=da(l,o,h);d!==null&&(bi(d,l,h),cf(d,l,h)),l={cache:_0()},o.payload=l;return}l=l.return}}function XV(o,l,h){var d=Ei();h={lane:d,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},im(o)?u1(l,h):(h=l0(o,l,h,d),h!==null&&(bi(h,o,d),c1(h,l,d)))}function l1(o,l,h){var d=Ei();gf(o,l,h,d)}function gf(o,l,h,d){var y={lane:d,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(im(o))u1(l,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var R=l.lastRenderedState,N=v(R,h);if(y.hasEagerState=!0,y.eagerState=N,yi(N,R))return jp(o,l,y,0),$t===null&&Bp(),!1}catch{}finally{}if(h=l0(o,l,y,d),h!==null)return bi(h,o,d),c1(h,l,d),!0}return!1}function H0(o,l,h,d){if(d={lane:2,revertLane:Tv(),action:d,hasEagerState:!1,eagerState:null,next:null},im(o)){if(l)throw Error(r(479))}else l=l0(o,h,d,2),l!==null&&bi(l,o,2)}function im(o){var l=o.alternate;return o===ot||l!==null&&l===ot}function u1(o,l){vc=Jp=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function c1(o,l,h){if((h&4194048)!==0){var d=l.lanes;d&=o.pendingLanes,h|=d,l.lanes=h,Nt(o,h)}}var sm={readContext:vr,use:em,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn},h1={readContext:vr,use:em,useCallback:function(o,l){return Xr().memoizedState=[o,l===void 0?null:l],o},useContext:vr,useEffect:Ww,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,rm(4194308,4,Jw.bind(null,l,o),h)},useLayoutEffect:function(o,l){return rm(4194308,4,o,l)},useInsertionEffect:function(o,l){rm(4,2,o,l)},useMemo:function(o,l){var h=Xr();l=l===void 0?null:l;var d=o();if(Zl){Mn(!0);try{o()}finally{Mn(!1)}}return h.memoizedState=[d,l],d},useReducer:function(o,l,h){var d=Xr();if(h!==void 0){var y=h(l);if(Zl){Mn(!0);try{h(l)}finally{Mn(!1)}}}else y=l;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=XV.bind(null,ot,o),[d.memoizedState,o]},useRef:function(o){var l=Xr();return o={current:o},l.memoizedState=o},useState:function(o){o=V0(o);var l=o.queue,h=l1.bind(null,ot,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:z0,useDeferredValue:function(o,l){var h=Xr();return B0(h,o,l)},useTransition:function(){var o=V0(!1);return o=r1.bind(null,ot,o.queue,!0,!1),Xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var d=ot,y=Xr();if(xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),$t===null)throw Error(r(349));(Et&124)!==0||Ow(d,l,h)}y.memoizedState=h;var v={value:h,getSnapshot:l};return y.queue=v,Ww(Dw.bind(null,d,v,o),[o]),d.flags|=2048,Tc(9,nm(),Mw.bind(null,d,v,h,l),null),h},useId:function(){var o=Xr(),l=$t.identifierPrefix;if(xt){var h=Co,d=Ro;h=(d&~(1<<32-Jt(d)-1)).toString(32)+h,l="«"+l+"R"+h,h=Zp++,0<h&&(l+="H"+h.toString(32)),l+="»"}else h=$V++,l="«"+l+"r"+h.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:F0,useFormState:Hw,useActionState:Hw,useOptimistic:function(o){var l=Xr();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=H0.bind(null,ot,!0,h),h.dispatch=l,[o,l]},useMemoCache:D0,useCacheRefresh:function(){return Xr().memoizedState=QV.bind(null,ot)}},f1={readContext:vr,use:em,useCallback:e1,useContext:vr,useEffect:Yw,useImperativeHandle:Zw,useInsertionEffect:Qw,useLayoutEffect:Xw,useMemo:t1,useReducer:tm,useRef:Kw,useState:function(){return tm(Io)},useDebugValue:z0,useDeferredValue:function(o,l){var h=wn();return n1(h,Pt.memoizedState,o,l)},useTransition:function(){var o=tm(Io)[0],l=wn().memoizedState;return[typeof o=="boolean"?o:pf(o),l]},useSyncExternalStore:Nw,useId:o1,useHostTransitionStatus:F0,useFormState:qw,useActionState:qw,useOptimistic:function(o,l){var h=wn();return Vw(h,Pt,o,l)},useMemoCache:D0,useCacheRefresh:a1},JV={readContext:vr,use:em,useCallback:e1,useContext:vr,useEffect:Yw,useImperativeHandle:Zw,useInsertionEffect:Qw,useLayoutEffect:Xw,useMemo:t1,useReducer:L0,useRef:Kw,useState:function(){return L0(Io)},useDebugValue:z0,useDeferredValue:function(o,l){var h=wn();return Pt===null?B0(h,o,l):n1(h,Pt.memoizedState,o,l)},useTransition:function(){var o=L0(Io)[0],l=wn().memoizedState;return[typeof o=="boolean"?o:pf(o),l]},useSyncExternalStore:Nw,useId:o1,useHostTransitionStatus:F0,useFormState:Gw,useActionState:Gw,useOptimistic:function(o,l){var h=wn();return Pt!==null?Vw(h,Pt,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:D0,useCacheRefresh:a1},Ec=null,yf=0;function om(o){var l=yf;return yf+=1,Ec===null&&(Ec=[]),bw(Ec,o,l)}function _f(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function am(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function d1(o){var l=o._init;return l(o._payload)}function p1(o){function l(Q,W){if(o){var ee=Q.deletions;ee===null?(Q.deletions=[W],Q.flags|=16):ee.push(W)}}function h(Q,W){if(!o)return null;for(;W!==null;)l(Q,W),W=W.sibling;return null}function d(Q){for(var W=new Map;Q!==null;)Q.key!==null?W.set(Q.key,Q):W.set(Q.index,Q),Q=Q.sibling;return W}function y(Q,W){return Q=wo(Q,W),Q.index=0,Q.sibling=null,Q}function v(Q,W,ee){return Q.index=ee,o?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<W?(Q.flags|=67108866,W):ee):(Q.flags|=67108866,W)):(Q.flags|=1048576,W)}function R(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function N(Q,W,ee,ce){return W===null||W.tag!==6?(W=c0(ee,Q.mode,ce),W.return=Q,W):(W=y(W,ee),W.return=Q,W)}function H(Q,W,ee,ce){var De=ee.type;return De===T?ue(Q,W,ee.props.children,ce,ee.key):W!==null&&(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&d1(De)===W.type)?(W=y(W,ee.props),_f(W,ee),W.return=Q,W):(W=Hp(ee.type,ee.key,ee.props,null,Q.mode,ce),_f(W,ee),W.return=Q,W)}function te(Q,W,ee,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=h0(ee,Q.mode,ce),W.return=Q,W):(W=y(W,ee.children||[]),W.return=Q,W)}function ue(Q,W,ee,ce,De){return W===null||W.tag!==7?(W=$l(ee,Q.mode,ce,De),W.return=Q,W):(W=y(W,ee),W.return=Q,W)}function de(Q,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=c0(""+W,Q.mode,ee),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return ee=Hp(W.type,W.key,W.props,null,Q.mode,ee),_f(ee,W),ee.return=Q,ee;case A:return W=h0(W,Q.mode,ee),W.return=Q,W;case I:var ce=W._init;return W=ce(W._payload),de(Q,W,ee)}if(fe(W)||j(W))return W=$l(W,Q.mode,ee,null),W.return=Q,W;if(typeof W.then=="function")return de(Q,om(W),ee);if(W.$$typeof===B)return de(Q,Kp(Q,W),ee);am(Q,W)}return null}function re(Q,W,ee,ce){var De=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return De!==null?null:N(Q,W,""+ee,ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return ee.key===De?H(Q,W,ee,ce):null;case A:return ee.key===De?te(Q,W,ee,ce):null;case I:return De=ee._init,ee=De(ee._payload),re(Q,W,ee,ce)}if(fe(ee)||j(ee))return De!==null?null:ue(Q,W,ee,ce,null);if(typeof ee.then=="function")return re(Q,W,om(ee),ce);if(ee.$$typeof===B)return re(Q,W,Kp(Q,ee),ce);am(Q,ee)}return null}function ie(Q,W,ee,ce,De){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Q=Q.get(ee)||null,N(W,Q,""+ce,De);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case _:return Q=Q.get(ce.key===null?ee:ce.key)||null,H(W,Q,ce,De);case A:return Q=Q.get(ce.key===null?ee:ce.key)||null,te(W,Q,ce,De);case I:var ct=ce._init;return ce=ct(ce._payload),ie(Q,W,ee,ce,De)}if(fe(ce)||j(ce))return Q=Q.get(ee)||null,ue(W,Q,ce,De,null);if(typeof ce.then=="function")return ie(Q,W,ee,om(ce),De);if(ce.$$typeof===B)return ie(Q,W,ee,Kp(W,ce),De);am(W,ce)}return null}function Qe(Q,W,ee,ce){for(var De=null,ct=null,Be=W,Ke=W=0,qn=null;Be!==null&&Ke<ee.length;Ke++){Be.index>Ke?(qn=Be,Be=null):qn=Be.sibling;var wt=re(Q,Be,ee[Ke],ce);if(wt===null){Be===null&&(Be=qn);break}o&&Be&&wt.alternate===null&&l(Q,Be),W=v(wt,W,Ke),ct===null?De=wt:ct.sibling=wt,ct=wt,Be=qn}if(Ke===ee.length)return h(Q,Be),xt&&Kl(Q,Ke),De;if(Be===null){for(;Ke<ee.length;Ke++)Be=de(Q,ee[Ke],ce),Be!==null&&(W=v(Be,W,Ke),ct===null?De=Be:ct.sibling=Be,ct=Be);return xt&&Kl(Q,Ke),De}for(Be=d(Be);Ke<ee.length;Ke++)qn=ie(Be,Q,Ke,ee[Ke],ce),qn!==null&&(o&&qn.alternate!==null&&Be.delete(qn.key===null?Ke:qn.key),W=v(qn,W,Ke),ct===null?De=qn:ct.sibling=qn,ct=qn);return o&&Be.forEach(function(Ia){return l(Q,Ia)}),xt&&Kl(Q,Ke),De}function Ge(Q,W,ee,ce){if(ee==null)throw Error(r(151));for(var De=null,ct=null,Be=W,Ke=W=0,qn=null,wt=ee.next();Be!==null&&!wt.done;Ke++,wt=ee.next()){Be.index>Ke?(qn=Be,Be=null):qn=Be.sibling;var Ia=re(Q,Be,wt.value,ce);if(Ia===null){Be===null&&(Be=qn);break}o&&Be&&Ia.alternate===null&&l(Q,Be),W=v(Ia,W,Ke),ct===null?De=Ia:ct.sibling=Ia,ct=Ia,Be=qn}if(wt.done)return h(Q,Be),xt&&Kl(Q,Ke),De;if(Be===null){for(;!wt.done;Ke++,wt=ee.next())wt=de(Q,wt.value,ce),wt!==null&&(W=v(wt,W,Ke),ct===null?De=wt:ct.sibling=wt,ct=wt);return xt&&Kl(Q,Ke),De}for(Be=d(Be);!wt.done;Ke++,wt=ee.next())wt=ie(Be,Q,Ke,wt.value,ce),wt!==null&&(o&&wt.alternate!==null&&Be.delete(wt.key===null?Ke:wt.key),W=v(wt,W,Ke),ct===null?De=wt:ct.sibling=wt,ct=wt);return o&&Be.forEach(function(ZU){return l(Q,ZU)}),xt&&Kl(Q,Ke),De}function Vt(Q,W,ee,ce){if(typeof ee=="object"&&ee!==null&&ee.type===T&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:e:{for(var De=ee.key;W!==null;){if(W.key===De){if(De=ee.type,De===T){if(W.tag===7){h(Q,W.sibling),ce=y(W,ee.props.children),ce.return=Q,Q=ce;break e}}else if(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&d1(De)===W.type){h(Q,W.sibling),ce=y(W,ee.props),_f(ce,ee),ce.return=Q,Q=ce;break e}h(Q,W);break}else l(Q,W);W=W.sibling}ee.type===T?(ce=$l(ee.props.children,Q.mode,ce,ee.key),ce.return=Q,Q=ce):(ce=Hp(ee.type,ee.key,ee.props,null,Q.mode,ce),_f(ce,ee),ce.return=Q,Q=ce)}return R(Q);case A:e:{for(De=ee.key;W!==null;){if(W.key===De)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){h(Q,W.sibling),ce=y(W,ee.children||[]),ce.return=Q,Q=ce;break e}else{h(Q,W);break}else l(Q,W);W=W.sibling}ce=h0(ee,Q.mode,ce),ce.return=Q,Q=ce}return R(Q);case I:return De=ee._init,ee=De(ee._payload),Vt(Q,W,ee,ce)}if(fe(ee))return Qe(Q,W,ee,ce);if(j(ee)){if(De=j(ee),typeof De!="function")throw Error(r(150));return ee=De.call(ee),Ge(Q,W,ee,ce)}if(typeof ee.then=="function")return Vt(Q,W,om(ee),ce);if(ee.$$typeof===B)return Vt(Q,W,Kp(Q,ee),ce);am(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(h(Q,W.sibling),ce=y(W,ee),ce.return=Q,Q=ce):(h(Q,W),ce=c0(ee,Q.mode,ce),ce.return=Q,Q=ce),R(Q)):h(Q,W)}return function(Q,W,ee,ce){try{yf=0;var De=Vt(Q,W,ee,ce);return Ec=null,De}catch(Be){if(Be===lf||Be===Yp)throw Be;var ct=_i(29,Be,null,Q.mode);return ct.lanes=ce,ct.return=Q,ct}finally{}}}var bc=p1(!0),m1=p1(!1),Xi=se(null),qs=null;function ma(o){var l=o.alternate;le(Vn,Vn.current&1),le(Xi,o),qs===null&&(l===null||_c.current!==null||l.memoizedState!==null)&&(qs=o)}function g1(o){if(o.tag===22){if(le(Vn,Vn.current),le(Xi,o),qs===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(qs=o)}}else ga()}function ga(){le(Vn,Vn.current),le(Xi,Xi.current)}function No(o){ge(Xi),qs===o&&(qs=null),ge(Vn)}var Vn=se(0);function lm(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Mv(h)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function q0(o,l,h,d){l=o.memoizedState,h=h(d,l),h=h==null?l:p({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var $0={enqueueSetState:function(o,l,h){o=o._reactInternals;var d=Ei(),y=fa(d);y.payload=l,h!=null&&(y.callback=h),l=da(o,y,d),l!==null&&(bi(l,o,d),cf(l,o,d))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var d=Ei(),y=fa(d);y.tag=1,y.payload=l,h!=null&&(y.callback=h),l=da(o,y,d),l!==null&&(bi(l,o,d),cf(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=Ei(),d=fa(h);d.tag=2,l!=null&&(d.callback=l),l=da(o,d,h),l!==null&&(bi(l,o,h),cf(l,o,h))}};function y1(o,l,h,d,y,v,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,v,R):l.prototype&&l.prototype.isPureReactComponent?!Zh(h,d)||!Zh(y,v):!0}function _1(o,l,h,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,d),l.state!==o&&$0.enqueueReplaceState(l,l.state,null)}function eu(o,l){var h=l;if("ref"in l){h={};for(var d in l)d!=="ref"&&(h[d]=l[d])}if(o=o.defaultProps){h===l&&(h=p({},h));for(var y in o)h[y]===void 0&&(h[y]=o[y])}return h}var um=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function v1(o){um(o)}function A1(o){console.error(o)}function T1(o){um(o)}function cm(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function E1(o,l,h){try{var d=o.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function G0(o,l,h){return h=fa(h),h.tag=3,h.payload={element:null},h.callback=function(){cm(o,l)},h}function b1(o){return o=fa(o),o.tag=3,o}function S1(o,l,h,d){var y=h.type.getDerivedStateFromError;if(typeof y=="function"){var v=d.value;o.payload=function(){return y(v)},o.callback=function(){E1(l,h,d)}}var R=h.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(o.callback=function(){E1(l,h,d),typeof y!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function ZV(o,l,h,d,y){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=h.alternate,l!==null&&sf(l,h,y,!0),h=Xi.current,h!==null){switch(h.tag){case 13:return qs===null?gv():h.alternate===null&&ln===0&&(ln=3),h.flags&=-257,h.flags|=65536,h.lanes=y,d===T0?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([d]):l.add(d),_v(o,d,y)),!1;case 22:return h.flags|=65536,d===T0?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([d]):h.add(d)),_v(o,d,y)),!1}throw Error(r(435,h.tag))}return _v(o,d,y),gv(),!1}if(xt)return l=Xi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==p0&&(o=Error(r(422),{cause:d}),rf(Ki(o,h)))):(d!==p0&&(l=Error(r(423),{cause:d}),rf(Ki(l,h))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=Ki(d,h),y=G0(o.stateNode,d,y),S0(o,y),ln!==4&&(ln=2)),!1;var v=Error(r(520),{cause:d});if(v=Ki(v,h),wf===null?wf=[v]:wf.push(v),ln!==4&&(ln=2),l===null)return!0;d=Ki(d,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=y&-y,h.lanes|=o,o=G0(h.stateNode,d,o),S0(h,o),!1;case 1:if(l=h.type,v=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ea===null||!Ea.has(v))))return h.flags|=65536,y&=-y,h.lanes|=y,y=b1(y),S1(y,o,h,d),S0(h,y),!1}h=h.return}while(h!==null);return!1}var w1=Error(r(461)),Fn=!1;function sr(o,l,h,d){l.child=o===null?m1(l,null,h,d):bc(l,o.child,h,d)}function R1(o,l,h,d,y){h=h.render;var v=l.ref;if("ref"in d){var R={};for(var N in d)N!=="ref"&&(R[N]=d[N])}else R=d;return Xl(l),d=k0(o,l,h,R,v,y),N=I0(),o!==null&&!Fn?(N0(o,l,y),Oo(o,l,y)):(xt&&N&&f0(l),l.flags|=1,sr(o,l,d,y),l.child)}function C1(o,l,h,d,y){if(o===null){var v=h.type;return typeof v=="function"&&!u0(v)&&v.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=v,x1(o,l,v,d,y)):(o=Hp(h.type,null,d,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(v=o.child,!ev(o,y)){var R=v.memoizedProps;if(h=h.compare,h=h!==null?h:Zh,h(R,d)&&o.ref===l.ref)return Oo(o,l,y)}return l.flags|=1,o=wo(v,d),o.ref=l.ref,o.return=l,l.child=o}function x1(o,l,h,d,y){if(o!==null){var v=o.memoizedProps;if(Zh(v,d)&&o.ref===l.ref)if(Fn=!1,l.pendingProps=d=v,ev(o,y))(o.flags&131072)!==0&&(Fn=!0);else return l.lanes=o.lanes,Oo(o,l,y)}return K0(o,l,h,d,y)}function k1(o,l,h){var d=l.pendingProps,y=d.children,v=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=v!==null?v.baseLanes|h:h,o!==null){for(y=l.child=o.child,v=0;y!==null;)v=v|y.lanes|y.childLanes,y=y.sibling;l.childLanes=v&~d}else l.childLanes=0,l.child=null;return I1(o,l,d,h)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Wp(l,v!==null?v.cachePool:null),v!==null?xw(l,v):R0(),g1(l);else return l.lanes=l.childLanes=536870912,I1(o,l,v!==null?v.baseLanes|h:h,h)}else v!==null?(Wp(l,v.cachePool),xw(l,v),ga(),l.memoizedState=null):(o!==null&&Wp(l,null),R0(),ga());return sr(o,l,y,h),l.child}function I1(o,l,h,d){var y=A0();return y=y===null?null:{parent:Ln._currentValue,pool:y},l.memoizedState={baseLanes:h,cachePool:y},o!==null&&Wp(l,null),R0(),g1(l),o!==null&&sf(o,l,d,!0),null}function hm(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function K0(o,l,h,d,y){return Xl(l),h=k0(o,l,h,d,void 0,y),d=I0(),o!==null&&!Fn?(N0(o,l,y),Oo(o,l,y)):(xt&&d&&f0(l),l.flags|=1,sr(o,l,h,y),l.child)}function N1(o,l,h,d,y,v){return Xl(l),l.updateQueue=null,h=Iw(l,d,h,y),kw(o),d=I0(),o!==null&&!Fn?(N0(o,l,v),Oo(o,l,v)):(xt&&d&&f0(l),l.flags|=1,sr(o,l,h,v),l.child)}function O1(o,l,h,d,y){if(Xl(l),l.stateNode===null){var v=dc,R=h.contextType;typeof R=="object"&&R!==null&&(v=vr(R)),v=new h(d,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$0,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=d,v.state=l.memoizedState,v.refs={},E0(l),R=h.contextType,v.context=typeof R=="object"&&R!==null?vr(R):dc,v.state=l.memoizedState,R=h.getDerivedStateFromProps,typeof R=="function"&&(q0(l,h,R,d),v.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(R=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),R!==v.state&&$0.enqueueReplaceState(v,v.state,null),ff(l,d,v,y),hf(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){v=l.stateNode;var N=l.memoizedProps,H=eu(h,N);v.props=H;var te=v.context,ue=h.contextType;R=dc,typeof ue=="object"&&ue!==null&&(R=vr(ue));var de=h.getDerivedStateFromProps;ue=typeof de=="function"||typeof v.getSnapshotBeforeUpdate=="function",N=l.pendingProps!==N,ue||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(N||te!==R)&&_1(l,v,d,R),ha=!1;var re=l.memoizedState;v.state=re,ff(l,d,v,y),hf(),te=l.memoizedState,N||re!==te||ha?(typeof de=="function"&&(q0(l,h,de,d),te=l.memoizedState),(H=ha||y1(l,h,H,d,re,te,R))?(ue||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=te),v.props=d,v.state=te,v.context=R,d=H):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{v=l.stateNode,b0(o,l),R=l.memoizedProps,ue=eu(h,R),v.props=ue,de=l.pendingProps,re=v.context,te=h.contextType,H=dc,typeof te=="object"&&te!==null&&(H=vr(te)),N=h.getDerivedStateFromProps,(te=typeof N=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==de||re!==H)&&_1(l,v,d,H),ha=!1,re=l.memoizedState,v.state=re,ff(l,d,v,y),hf();var ie=l.memoizedState;R!==de||re!==ie||ha||o!==null&&o.dependencies!==null&&Gp(o.dependencies)?(typeof N=="function"&&(q0(l,h,N,d),ie=l.memoizedState),(ue=ha||y1(l,h,ue,d,re,ie,H)||o!==null&&o.dependencies!==null&&Gp(o.dependencies))?(te||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ie,H),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ie,H)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&re===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&re===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=ie),v.props=d,v.state=ie,v.context=H,d=ue):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&re===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&re===o.memoizedState||(l.flags|=1024),d=!1)}return v=d,hm(o,l),d=(l.flags&128)!==0,v||d?(v=l.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,o!==null&&d?(l.child=bc(l,o.child,null,y),l.child=bc(l,null,h,y)):sr(o,l,h,y),l.memoizedState=v.state,o=l.child):o=Oo(o,l,y),o}function M1(o,l,h,d){return nf(),l.flags|=256,sr(o,l,h,d),l.child}var W0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Y0(o){return{baseLanes:o,cachePool:Aw()}}function Q0(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=Ji),o}function D1(o,l,h){var d=l.pendingProps,y=!1,v=(l.flags&128)!==0,R;if((R=v)||(R=o!==null&&o.memoizedState===null?!1:(Vn.current&2)!==0),R&&(y=!0,l.flags&=-129),R=(l.flags&32)!==0,l.flags&=-33,o===null){if(xt){if(y?ma(l):ga(),xt){var N=an,H;if(H=N){e:{for(H=N,N=Hs;H.nodeType!==8;){if(!N){N=null;break e}if(H=Ts(H.nextSibling),H===null){N=null;break e}}N=H}N!==null?(l.memoizedState={dehydrated:N,treeContext:Gl!==null?{id:Ro,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},H=_i(18,null,null,0),H.stateNode=N,H.return=l,l.child=H,Ur=l,an=null,H=!0):H=!1}H||Yl(l)}if(N=l.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Mv(N)?l.lanes=32:l.lanes=536870912,null;No(l)}return N=d.children,d=d.fallback,y?(ga(),y=l.mode,N=fm({mode:"hidden",children:N},y),d=$l(d,y,h,null),N.return=l,d.return=l,N.sibling=d,l.child=N,y=l.child,y.memoizedState=Y0(h),y.childLanes=Q0(o,R,h),l.memoizedState=W0,d):(ma(l),X0(l,N))}if(H=o.memoizedState,H!==null&&(N=H.dehydrated,N!==null)){if(v)l.flags&256?(ma(l),l.flags&=-257,l=J0(o,l,h)):l.memoizedState!==null?(ga(),l.child=o.child,l.flags|=128,l=null):(ga(),y=d.fallback,N=l.mode,d=fm({mode:"visible",children:d.children},N),y=$l(y,N,h,null),y.flags|=2,d.return=l,y.return=l,d.sibling=y,l.child=d,bc(l,o.child,null,h),d=l.child,d.memoizedState=Y0(h),d.childLanes=Q0(o,R,h),l.memoizedState=W0,l=y);else if(ma(l),Mv(N)){if(R=N.nextSibling&&N.nextSibling.dataset,R)var te=R.dgst;R=te,d=Error(r(419)),d.stack="",d.digest=R,rf({value:d,source:null,stack:null}),l=J0(o,l,h)}else if(Fn||sf(o,l,h,!1),R=(h&o.childLanes)!==0,Fn||R){if(R=$t,R!==null&&(d=h&-h,d=(d&42)!==0?1:nr(d),d=(d&(R.suspendedLanes|h))!==0?0:d,d!==0&&d!==H.retryLane))throw H.retryLane=d,fc(o,d),bi(R,o,d),w1;N.data==="$?"||gv(),l=J0(o,l,h)}else N.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=H.treeContext,an=Ts(N.nextSibling),Ur=l,xt=!0,Wl=null,Hs=!1,o!==null&&(Yi[Qi++]=Ro,Yi[Qi++]=Co,Yi[Qi++]=Gl,Ro=o.id,Co=o.overflow,Gl=l),l=X0(l,d.children),l.flags|=4096);return l}return y?(ga(),y=d.fallback,N=l.mode,H=o.child,te=H.sibling,d=wo(H,{mode:"hidden",children:d.children}),d.subtreeFlags=H.subtreeFlags&65011712,te!==null?y=wo(te,y):(y=$l(y,N,h,null),y.flags|=2),y.return=l,d.return=l,d.sibling=y,l.child=d,d=y,y=l.child,N=o.child.memoizedState,N===null?N=Y0(h):(H=N.cachePool,H!==null?(te=Ln._currentValue,H=H.parent!==te?{parent:te,pool:te}:H):H=Aw(),N={baseLanes:N.baseLanes|h,cachePool:H}),y.memoizedState=N,y.childLanes=Q0(o,R,h),l.memoizedState=W0,d):(ma(l),h=o.child,o=h.sibling,h=wo(h,{mode:"visible",children:d.children}),h.return=l,h.sibling=null,o!==null&&(R=l.deletions,R===null?(l.deletions=[o],l.flags|=16):R.push(o)),l.child=h,l.memoizedState=null,h)}function X0(o,l){return l=fm({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function fm(o,l){return o=_i(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function J0(o,l,h){return bc(l,o.child,null,h),o=X0(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function P1(o,l,h){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),g0(o.return,l,h)}function Z0(o,l,h,d,y){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:y}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=h,v.tailMode=y)}function L1(o,l,h){var d=l.pendingProps,y=d.revealOrder,v=d.tail;if(sr(o,l,d.children,h),d=Vn.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&P1(o,h,l);else if(o.tag===19)P1(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(le(Vn,d),y){case"forwards":for(h=l.child,y=null;h!==null;)o=h.alternate,o!==null&&lm(o)===null&&(y=h),h=h.sibling;h=y,h===null?(y=l.child,l.child=null):(y=h.sibling,h.sibling=null),Z0(l,!1,y,h,v);break;case"backwards":for(h=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&lm(o)===null){l.child=y;break}o=y.sibling,y.sibling=h,h=y,y=o}Z0(l,!0,h,null,v);break;case"together":Z0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Oo(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),Ta|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(sf(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,h=wo(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=wo(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function ev(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Gp(o)))}function eU(o,l,h){switch(l.tag){case 3:Rt(l,l.stateNode.containerInfo),ca(l,Ln,o.memoizedState.cache),nf();break;case 27:case 5:Ut(l);break;case 4:Rt(l,l.stateNode.containerInfo);break;case 10:ca(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(ma(l),l.flags|=128,null):(h&l.child.childLanes)!==0?D1(o,l,h):(ma(l),o=Oo(o,l,h),o!==null?o.sibling:null);ma(l);break;case 19:var y=(o.flags&128)!==0;if(d=(h&l.childLanes)!==0,d||(sf(o,l,h,!1),d=(h&l.childLanes)!==0),y){if(d)return L1(o,l,h);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Vn,Vn.current),d)break;return null;case 22:case 23:return l.lanes=0,k1(o,l,h);case 24:ca(l,Ln,o.memoizedState.cache)}return Oo(o,l,h)}function V1(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)Fn=!0;else{if(!ev(o,h)&&(l.flags&128)===0)return Fn=!1,eU(o,l,h);Fn=(o.flags&131072)!==0}else Fn=!1,xt&&(l.flags&1048576)!==0&&dw(l,$p,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var d=l.elementType,y=d._init;if(d=y(d._payload),l.type=d,typeof d=="function")u0(d)?(o=eu(d,o),l.tag=1,l=O1(null,l,d,o,h)):(l.tag=0,l=K0(null,l,d,o,h));else{if(d!=null){if(y=d.$$typeof,y===q){l.tag=11,l=R1(null,l,d,o,h);break e}else if(y===O){l.tag=14,l=C1(null,l,d,o,h);break e}}throw l=ae(d)||d,Error(r(306,l,""))}}return l;case 0:return K0(o,l,l.type,l.pendingProps,h);case 1:return d=l.type,y=eu(d,l.pendingProps),O1(o,l,d,y,h);case 3:e:{if(Rt(l,l.stateNode.containerInfo),o===null)throw Error(r(387));d=l.pendingProps;var v=l.memoizedState;y=v.element,b0(o,l),ff(l,d,null,h);var R=l.memoizedState;if(d=R.cache,ca(l,Ln,d),d!==v.cache&&y0(l,[Ln],h,!0),hf(),d=R.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:R.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=M1(o,l,d,h);break e}else if(d!==y){y=Ki(Error(r(424)),l),rf(y),l=M1(o,l,d,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(an=Ts(o.firstChild),Ur=l,xt=!0,Wl=null,Hs=!0,h=m1(l,null,d,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(nf(),d===y){l=Oo(o,l,h);break e}sr(o,l,d,h)}l=l.child}return l;case 26:return hm(o,l),o===null?(h=jR(l.type,null,l.pendingProps,null))?l.memoizedState=h:xt||(h=l.type,o=l.pendingProps,d=Rm(Le.current).createElement(h),d[he]=l,d[ve]=o,ar(d,h,o),ft(d),l.stateNode=d):l.memoizedState=jR(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ut(l),o===null&&xt&&(d=l.stateNode=UR(l.type,l.pendingProps,Le.current),Ur=l,Hs=!0,y=an,wa(l.type)?(Dv=y,an=Ts(d.firstChild)):an=y),sr(o,l,l.pendingProps.children,h),hm(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&xt&&((y=d=an)&&(d=xU(d,l.type,l.pendingProps,Hs),d!==null?(l.stateNode=d,Ur=l,an=Ts(d.firstChild),Hs=!1,y=!0):y=!1),y||Yl(l)),Ut(l),y=l.type,v=l.pendingProps,R=o!==null?o.memoizedProps:null,d=v.children,Iv(y,v)?d=null:R!==null&&Iv(y,R)&&(l.flags|=32),l.memoizedState!==null&&(y=k0(o,l,GV,null,null,h),Df._currentValue=y),hm(o,l),sr(o,l,d,h),l.child;case 6:return o===null&&xt&&((o=h=an)&&(h=kU(h,l.pendingProps,Hs),h!==null?(l.stateNode=h,Ur=l,an=null,o=!0):o=!1),o||Yl(l)),null;case 13:return D1(o,l,h);case 4:return Rt(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=bc(l,null,d,h):sr(o,l,d,h),l.child;case 11:return R1(o,l,l.type,l.pendingProps,h);case 7:return sr(o,l,l.pendingProps,h),l.child;case 8:return sr(o,l,l.pendingProps.children,h),l.child;case 12:return sr(o,l,l.pendingProps.children,h),l.child;case 10:return d=l.pendingProps,ca(l,l.type,d.value),sr(o,l,d.children,h),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,Xl(l),y=vr(y),d=d(y),l.flags|=1,sr(o,l,d,h),l.child;case 14:return C1(o,l,l.type,l.pendingProps,h);case 15:return x1(o,l,l.type,l.pendingProps,h);case 19:return L1(o,l,h);case 31:return d=l.pendingProps,h=l.mode,d={mode:d.mode,children:d.children},o===null?(h=fm(d,h),h.ref=l.ref,l.child=h,h.return=l,l=h):(h=wo(o.child,d),h.ref=l.ref,l.child=h,h.return=l,l=h),l;case 22:return k1(o,l,h);case 24:return Xl(l),d=vr(Ln),o===null?(y=A0(),y===null&&(y=$t,v=_0(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=h),y=v),l.memoizedState={parent:d,cache:y},E0(l),ca(l,Ln,y)):((o.lanes&h)!==0&&(b0(o,l),ff(l,null,null,h),hf()),y=o.memoizedState,v=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ca(l,Ln,d)):(d=v.cache,ca(l,Ln,d),d!==y.cache&&y0(l,[Ln],h,!0))),sr(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Mo(o){o.flags|=4}function U1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!GR(l)){if(l=Xi.current,l!==null&&((Et&4194048)===Et?qs!==null:(Et&62914560)!==Et&&(Et&536870912)===0||l!==qs))throw uf=T0,Tw;o.flags|=8192}}function dm(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?ji():536870912,o.lanes|=l,Cc|=l)}function vf(o,l){if(!xt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function tn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,d=0;if(l)for(var y=o.child;y!==null;)h|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)h|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=h,l}function tU(o,l,h){var d=l.pendingProps;switch(d0(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(l),null;case 1:return tn(l),null;case 3:return h=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ko(Ln),mr(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(tf(l)?Mo(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,gw())),tn(l),null;case 26:return h=l.memoizedState,o===null?(Mo(l),h!==null?(tn(l),U1(l,h)):(tn(l),l.flags&=-16777217)):h?h!==o.memoizedState?(Mo(l),tn(l),U1(l,h)):(tn(l),l.flags&=-16777217):(o.memoizedProps!==d&&Mo(l),tn(l),l.flags&=-16777217),null;case 27:On(l),h=Le.current;var y=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return tn(l),null}o=Re.current,tf(l)?pw(l):(o=UR(y,d,h),l.stateNode=o,Mo(l))}return tn(l),null;case 5:if(On(l),h=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return tn(l),null}if(o=Re.current,tf(l))pw(l);else{switch(y=Rm(Le.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(h,{is:d.is}):y.createElement(h)}}o[he]=l,o[ve]=d;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=o;e:switch(ar(o,h,d),h){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Mo(l)}}return tn(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(o=Le.current,tf(l)){if(o=l.stateNode,h=l.memoizedProps,d=null,y=Ur,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[he]=l,o=!!(o.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||NR(o.nodeValue,h)),o||Yl(l)}else o=Rm(o).createTextNode(d),o[he]=l,l.stateNode=o}return tn(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=tf(l),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[he]=l}else nf(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),y=!1}else y=gw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(No(l),l):(No(l),null)}if(No(l),(l.flags&128)!==0)return l.lanes=h,l;if(h=d!==null,o=o!==null&&o.memoizedState!==null,h){d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==y&&(d.flags|=2048)}return h!==o&&h&&(l.child.flags|=8192),dm(l,l.updateQueue),tn(l),null;case 4:return mr(),o===null&&wv(l.stateNode.containerInfo),tn(l),null;case 10:return ko(l.type),tn(l),null;case 19:if(ge(Vn),y=l.memoizedState,y===null)return tn(l),null;if(d=(l.flags&128)!==0,v=y.rendering,v===null)if(d)vf(y,!1);else{if(ln!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(v=lm(o),v!==null){for(l.flags|=128,vf(y,!1),o=v.updateQueue,l.updateQueue=o,dm(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)fw(h,o),h=h.sibling;return le(Vn,Vn.current&1|2),l.child}o=o.sibling}y.tail!==null&&on()>gm&&(l.flags|=128,d=!0,vf(y,!1),l.lanes=4194304)}else{if(!d)if(o=lm(v),o!==null){if(l.flags|=128,d=!0,o=o.updateQueue,l.updateQueue=o,dm(l,o),vf(y,!0),y.tail===null&&y.tailMode==="hidden"&&!v.alternate&&!xt)return tn(l),null}else 2*on()-y.renderingStartTime>gm&&h!==536870912&&(l.flags|=128,d=!0,vf(y,!1),l.lanes=4194304);y.isBackwards?(v.sibling=l.child,l.child=v):(o=y.last,o!==null?o.sibling=v:l.child=v,y.last=v)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=on(),l.sibling=null,o=Vn.current,le(Vn,d?o&1|2:o&1),l):(tn(l),null);case 22:case 23:return No(l),C0(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(h&536870912)!==0&&(l.flags&128)===0&&(tn(l),l.subtreeFlags&6&&(l.flags|=8192)):tn(l),h=l.updateQueue,h!==null&&dm(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048),o!==null&&ge(Jl),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),ko(Ln),tn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function nU(o,l){switch(d0(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ko(Ln),mr(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return On(l),null;case 13:if(No(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));nf()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ge(Vn),null;case 4:return mr(),null;case 10:return ko(l.type),null;case 22:case 23:return No(l),C0(),o!==null&&ge(Jl),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return ko(Ln),null;case 25:return null;default:return null}}function z1(o,l){switch(d0(l),l.tag){case 3:ko(Ln),mr();break;case 26:case 27:case 5:On(l);break;case 4:mr();break;case 13:No(l);break;case 19:ge(Vn);break;case 10:ko(l.type);break;case 22:case 23:No(l),C0(),o!==null&&ge(Jl);break;case 24:ko(Ln)}}function Af(o,l){try{var h=l.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var y=d.next;h=y;do{if((h.tag&o)===o){d=void 0;var v=h.create,R=h.inst;d=v(),R.destroy=d}h=h.next}while(h!==y)}}catch(N){Ft(l,l.return,N)}}function ya(o,l,h){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var v=y.next;d=v;do{if((d.tag&o)===o){var R=d.inst,N=R.destroy;if(N!==void 0){R.destroy=void 0,y=l;var H=h,te=N;try{te()}catch(ue){Ft(y,H,ue)}}}d=d.next}while(d!==v)}}catch(ue){Ft(l,l.return,ue)}}function B1(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{Cw(l,h)}catch(d){Ft(o,o.return,d)}}}function j1(o,l,h){h.props=eu(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(d){Ft(o,l,d)}}function Tf(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof h=="function"?o.refCleanup=h(d):h.current=d}}catch(y){Ft(o,l,y)}}function $s(o,l){var h=o.ref,d=o.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(y){Ft(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(y){Ft(o,l,y)}else h.current=null}function F1(o){var l=o.type,h=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break e;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(y){Ft(o,o.return,y)}}function tv(o,l,h){try{var d=o.stateNode;bU(d,o.type,h,l),d[ve]=l}catch(y){Ft(o,o.return,y)}}function H1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&wa(o.type)||o.tag===4}function nv(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||H1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&wa(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function rv(o,l,h){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=wm));else if(d!==4&&(d===27&&wa(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(rv(o,l,h),o=o.sibling;o!==null;)rv(o,l,h),o=o.sibling}function pm(o,l,h){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(d!==4&&(d===27&&wa(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(pm(o,l,h),o=o.sibling;o!==null;)pm(o,l,h),o=o.sibling}function q1(o){var l=o.stateNode,h=o.memoizedProps;try{for(var d=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);ar(l,d,h),l[he]=o,l[ve]=h}catch(v){Ft(o,o.return,v)}}var Do=!1,yn=!1,iv=!1,$1=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function rU(o,l){if(o=o.containerInfo,xv=Om,o=nw(o),n0(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var y=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{h.nodeType,v.nodeType}catch{h=null;break e}var R=0,N=-1,H=-1,te=0,ue=0,de=o,re=null;t:for(;;){for(var ie;de!==h||y!==0&&de.nodeType!==3||(N=R+y),de!==v||d!==0&&de.nodeType!==3||(H=R+d),de.nodeType===3&&(R+=de.nodeValue.length),(ie=de.firstChild)!==null;)re=de,de=ie;for(;;){if(de===o)break t;if(re===h&&++te===y&&(N=R),re===v&&++ue===d&&(H=R),(ie=de.nextSibling)!==null)break;de=re,re=de.parentNode}de=ie}h=N===-1||H===-1?null:{start:N,end:H}}else h=null}h=h||{start:0,end:0}}else h=null;for(kv={focusedElem:o,selectionRange:h},Om=!1,Hn=l;Hn!==null;)if(l=Hn,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Hn=o;else for(;Hn!==null;){switch(l=Hn,v=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,h=l,y=v.memoizedProps,v=v.memoizedState,d=h.stateNode;try{var Qe=eu(h.type,y,h.elementType===h.type);o=d.getSnapshotBeforeUpdate(Qe,v),d.__reactInternalSnapshotBeforeUpdate=o}catch(Ge){Ft(h,h.return,Ge)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)Ov(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ov(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,Hn=o;break}Hn=l.return}}function G1(o,l,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:_a(o,h),d&4&&Af(5,h);break;case 1:if(_a(o,h),d&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(R){Ft(h,h.return,R)}else{var y=eu(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(R){Ft(h,h.return,R)}}d&64&&B1(h),d&512&&Tf(h,h.return);break;case 3:if(_a(o,h),d&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{Cw(o,l)}catch(R){Ft(h,h.return,R)}}break;case 27:l===null&&d&4&&q1(h);case 26:case 5:_a(o,h),l===null&&d&4&&F1(h),d&512&&Tf(h,h.return);break;case 12:_a(o,h);break;case 13:_a(o,h),d&4&&Y1(o,h),d&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=fU.bind(null,h),IU(o,h))));break;case 22:if(d=h.memoizedState!==null||Do,!d){l=l!==null&&l.memoizedState!==null||yn,y=Do;var v=yn;Do=d,(yn=l)&&!v?va(o,h,(h.subtreeFlags&8772)!==0):_a(o,h),Do=y,yn=v}break;case 30:break;default:_a(o,h)}}function K1(o){var l=o.alternate;l!==null&&(o.alternate=null,K1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&ke(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Wt=null,Jr=!1;function Po(o,l,h){for(h=h.child;h!==null;)W1(o,l,h),h=h.sibling}function W1(o,l,h){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(ut,h)}catch{}switch(h.tag){case 26:yn||$s(h,l),Po(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:yn||$s(h,l);var d=Wt,y=Jr;wa(h.type)&&(Wt=h.stateNode,Jr=!1),Po(o,l,h),If(h.stateNode),Wt=d,Jr=y;break;case 5:yn||$s(h,l);case 6:if(d=Wt,y=Jr,Wt=null,Po(o,l,h),Wt=d,Jr=y,Wt!==null)if(Jr)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(h.stateNode)}catch(v){Ft(h,l,v)}else try{Wt.removeChild(h.stateNode)}catch(v){Ft(h,l,v)}break;case 18:Wt!==null&&(Jr?(o=Wt,LR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Uf(o)):LR(Wt,h.stateNode));break;case 4:d=Wt,y=Jr,Wt=h.stateNode.containerInfo,Jr=!0,Po(o,l,h),Wt=d,Jr=y;break;case 0:case 11:case 14:case 15:yn||ya(2,h,l),yn||ya(4,h,l),Po(o,l,h);break;case 1:yn||($s(h,l),d=h.stateNode,typeof d.componentWillUnmount=="function"&&j1(h,l,d)),Po(o,l,h);break;case 21:Po(o,l,h);break;case 22:yn=(d=yn)||h.memoizedState!==null,Po(o,l,h),yn=d;break;default:Po(o,l,h)}}function Y1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Uf(o)}catch(h){Ft(l,l.return,h)}}function iU(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new $1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new $1),l;default:throw Error(r(435,o.tag))}}function sv(o,l){var h=iU(o);l.forEach(function(d){var y=dU.bind(null,o,d);h.has(d)||(h.add(d),d.then(y,y))})}function vi(o,l){var h=l.deletions;if(h!==null)for(var d=0;d<h.length;d++){var y=h[d],v=o,R=l,N=R;e:for(;N!==null;){switch(N.tag){case 27:if(wa(N.type)){Wt=N.stateNode,Jr=!1;break e}break;case 5:Wt=N.stateNode,Jr=!1;break e;case 3:case 4:Wt=N.stateNode.containerInfo,Jr=!0;break e}N=N.return}if(Wt===null)throw Error(r(160));W1(v,R,y),Wt=null,Jr=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Q1(l,o),l=l.sibling}var As=null;function Q1(o,l){var h=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:vi(l,o),Ai(o),d&4&&(ya(3,o,o.return),Af(3,o),ya(5,o,o.return));break;case 1:vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),d&64&&Do&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var y=As;if(vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),d&4){var v=h!==null?h.memoizedState:null;if(d=o.memoizedState,h===null)if(d===null)if(o.stateNode===null){e:{d=o.type,h=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Fe]||v[he]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(d),y.head.insertBefore(v,y.querySelector("head > title"))),ar(v,d,h),v[he]=o,ft(v),d=v;break e;case"link":var R=qR("link","href",y).get(d+(h.href||""));if(R){for(var N=0;N<R.length;N++)if(v=R[N],v.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&v.getAttribute("rel")===(h.rel==null?null:h.rel)&&v.getAttribute("title")===(h.title==null?null:h.title)&&v.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){R.splice(N,1);break t}}v=y.createElement(d),ar(v,d,h),y.head.appendChild(v);break;case"meta":if(R=qR("meta","content",y).get(d+(h.content||""))){for(N=0;N<R.length;N++)if(v=R[N],v.getAttribute("content")===(h.content==null?null:""+h.content)&&v.getAttribute("name")===(h.name==null?null:h.name)&&v.getAttribute("property")===(h.property==null?null:h.property)&&v.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&v.getAttribute("charset")===(h.charSet==null?null:h.charSet)){R.splice(N,1);break t}}v=y.createElement(d),ar(v,d,h),y.head.appendChild(v);break;default:throw Error(r(468,d))}v[he]=o,ft(v),d=v}o.stateNode=d}else $R(y,o.type,o.stateNode);else o.stateNode=HR(y,d,o.memoizedProps);else v!==d?(v===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):v.count--,d===null?$R(y,o.type,o.stateNode):HR(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&tv(o,o.memoizedProps,h.memoizedProps)}break;case 27:vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),h!==null&&d&4&&tv(o,o.memoizedProps,h.memoizedProps);break;case 5:if(vi(l,o),Ai(o),d&512&&(yn||h===null||$s(h,h.return)),o.flags&32){y=o.stateNode;try{Hi(y,"")}catch(ie){Ft(o,o.return,ie)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,tv(o,y,h!==null?h.memoizedProps:y)),d&1024&&(iv=!0);break;case 6:if(vi(l,o),Ai(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,h=o.stateNode;try{h.nodeValue=d}catch(ie){Ft(o,o.return,ie)}}break;case 3:if(km=null,y=As,As=Cm(l.containerInfo),vi(l,o),As=y,Ai(o),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Uf(l.containerInfo)}catch(ie){Ft(o,o.return,ie)}iv&&(iv=!1,X1(o));break;case 4:d=As,As=Cm(o.stateNode.containerInfo),vi(l,o),Ai(o),As=d;break;case 12:vi(l,o),Ai(o);break;case 13:vi(l,o),Ai(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(hv=on()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,sv(o,d)));break;case 22:y=o.memoizedState!==null;var H=h!==null&&h.memoizedState!==null,te=Do,ue=yn;if(Do=te||y,yn=ue||H,vi(l,o),yn=ue,Do=te,Ai(o),d&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(h===null||H||Do||yn||tu(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){H=h=l;try{if(v=H.stateNode,y)R=v.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{N=H.stateNode;var de=H.memoizedProps.style,re=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ie){Ft(H,H.return,ie)}}}else if(l.tag===6){if(h===null){H=l;try{H.stateNode.nodeValue=y?"":H.memoizedProps}catch(ie){Ft(H,H.return,ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,sv(o,h))));break;case 19:vi(l,o),Ai(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,sv(o,d)));break;case 30:break;case 21:break;default:vi(l,o),Ai(o)}}function Ai(o){var l=o.flags;if(l&2){try{for(var h,d=o.return;d!==null;){if(H1(d)){h=d;break}d=d.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var y=h.stateNode,v=nv(o);pm(o,v,y);break;case 5:var R=h.stateNode;h.flags&32&&(Hi(R,""),h.flags&=-33);var N=nv(o);pm(o,N,R);break;case 3:case 4:var H=h.stateNode.containerInfo,te=nv(o);rv(o,te,H);break;default:throw Error(r(161))}}catch(ue){Ft(o,o.return,ue)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function X1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;X1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function _a(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)G1(o,l.alternate,l),l=l.sibling}function tu(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:ya(4,l,l.return),tu(l);break;case 1:$s(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&j1(l,l.return,h),tu(l);break;case 27:If(l.stateNode);case 26:case 5:$s(l,l.return),tu(l);break;case 22:l.memoizedState===null&&tu(l);break;case 30:tu(l);break;default:tu(l)}o=o.sibling}}function va(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=o,v=l,R=v.flags;switch(v.tag){case 0:case 11:case 15:va(y,v,h),Af(4,v);break;case 1:if(va(y,v,h),d=v,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(te){Ft(d,d.return,te)}if(d=v,y=d.updateQueue,y!==null){var N=d.stateNode;try{var H=y.shared.hiddenCallbacks;if(H!==null)for(y.shared.hiddenCallbacks=null,y=0;y<H.length;y++)Rw(H[y],N)}catch(te){Ft(d,d.return,te)}}h&&R&64&&B1(v),Tf(v,v.return);break;case 27:q1(v);case 26:case 5:va(y,v,h),h&&d===null&&R&4&&F1(v),Tf(v,v.return);break;case 12:va(y,v,h);break;case 13:va(y,v,h),h&&R&4&&Y1(y,v);break;case 22:v.memoizedState===null&&va(y,v,h),Tf(v,v.return);break;case 30:break;default:va(y,v,h)}l=l.sibling}}function ov(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&of(h))}function av(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&of(o))}function Gs(o,l,h,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)J1(o,l,h,d),l=l.sibling}function J1(o,l,h,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Gs(o,l,h,d),y&2048&&Af(9,l);break;case 1:Gs(o,l,h,d);break;case 3:Gs(o,l,h,d),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&of(o)));break;case 12:if(y&2048){Gs(o,l,h,d),o=l.stateNode;try{var v=l.memoizedProps,R=v.id,N=v.onPostCommit;typeof N=="function"&&N(R,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(H){Ft(l,l.return,H)}}else Gs(o,l,h,d);break;case 13:Gs(o,l,h,d);break;case 23:break;case 22:v=l.stateNode,R=l.alternate,l.memoizedState!==null?v._visibility&2?Gs(o,l,h,d):Ef(o,l):v._visibility&2?Gs(o,l,h,d):(v._visibility|=2,Sc(o,l,h,d,(l.subtreeFlags&10256)!==0)),y&2048&&ov(R,l);break;case 24:Gs(o,l,h,d),y&2048&&av(l.alternate,l);break;default:Gs(o,l,h,d)}}function Sc(o,l,h,d,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var v=o,R=l,N=h,H=d,te=R.flags;switch(R.tag){case 0:case 11:case 15:Sc(v,R,N,H,y),Af(8,R);break;case 23:break;case 22:var ue=R.stateNode;R.memoizedState!==null?ue._visibility&2?Sc(v,R,N,H,y):Ef(v,R):(ue._visibility|=2,Sc(v,R,N,H,y)),y&&te&2048&&ov(R.alternate,R);break;case 24:Sc(v,R,N,H,y),y&&te&2048&&av(R.alternate,R);break;default:Sc(v,R,N,H,y)}l=l.sibling}}function Ef(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,d=l,y=d.flags;switch(d.tag){case 22:Ef(h,d),y&2048&&ov(d.alternate,d);break;case 24:Ef(h,d),y&2048&&av(d.alternate,d);break;default:Ef(h,d)}l=l.sibling}}var bf=8192;function wc(o){if(o.subtreeFlags&bf)for(o=o.child;o!==null;)Z1(o),o=o.sibling}function Z1(o){switch(o.tag){case 26:wc(o),o.flags&bf&&o.memoizedState!==null&&HU(As,o.memoizedState,o.memoizedProps);break;case 5:wc(o);break;case 3:case 4:var l=As;As=Cm(o.stateNode.containerInfo),wc(o),As=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=bf,bf=16777216,wc(o),bf=l):wc(o));break;default:wc(o)}}function eR(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Sf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var d=l[h];Hn=d,nR(d,o)}eR(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)tR(o),o=o.sibling}function tR(o){switch(o.tag){case 0:case 11:case 15:Sf(o),o.flags&2048&&ya(9,o,o.return);break;case 3:Sf(o);break;case 12:Sf(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,mm(o)):Sf(o);break;default:Sf(o)}}function mm(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var d=l[h];Hn=d,nR(d,o)}eR(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:ya(8,l,l.return),mm(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,mm(l));break;default:mm(l)}o=o.sibling}}function nR(o,l){for(;Hn!==null;){var h=Hn;switch(h.tag){case 0:case 11:case 15:ya(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:of(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Hn=d;else e:for(h=o;Hn!==null;){d=Hn;var y=d.sibling,v=d.return;if(K1(d),d===h){Hn=null;break e}if(y!==null){y.return=v,Hn=y;break e}Hn=v}}}var sU={getCacheForType:function(o){var l=vr(Ln),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h}},oU=typeof WeakMap=="function"?WeakMap:Map,Ot=0,$t=null,dt=null,Et=0,Mt=0,Ti=null,Aa=!1,Rc=!1,lv=!1,Lo=0,ln=0,Ta=0,nu=0,uv=0,Ji=0,Cc=0,wf=null,Zr=null,cv=!1,hv=0,gm=1/0,ym=null,Ea=null,or=0,ba=null,xc=null,kc=0,fv=0,dv=null,rR=null,Rf=0,pv=null;function Ei(){if((Ot&2)!==0&&Et!==0)return Et&-Et;if(Y.T!==null){var o=gc;return o!==0?o:Tv()}return $()}function iR(){Ji===0&&(Ji=(Et&536870912)===0||xt?Wr():536870912);var o=Xi.current;return o!==null&&(o.flags|=32),Ji}function bi(o,l,h){(o===$t&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)&&(Ic(o,0),Sa(o,Et,Ji,!1)),er(o,h),((Ot&2)===0||o!==$t)&&(o===$t&&((Ot&2)===0&&(nu|=h),ln===4&&Sa(o,Et,Ji,!1)),Ks(o))}function sR(o,l,h){if((Ot&6)!==0)throw Error(r(327));var d=!h&&(l&124)===0&&(l&o.expiredLanes)===0||yr(o,l),y=d?uU(o,l):yv(o,l,!0),v=d;do{if(y===0){Rc&&!d&&Sa(o,l,0,!1);break}else{if(h=o.current.alternate,v&&!aU(h)){y=yv(o,l,!1),v=!1;continue}if(y===2){if(v=l,o.errorRecoveryDisabledLanes&v)var R=0;else R=o.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){l=R;e:{var N=o;y=wf;var H=N.current.memoizedState.isDehydrated;if(H&&(Ic(N,R).flags|=256),R=yv(N,R,!1),R!==2){if(lv&&!H){N.errorRecoveryDisabledLanes|=v,nu|=v,y=4;break e}v=Zr,Zr=y,v!==null&&(Zr===null?Zr=v:Zr.push.apply(Zr,v))}y=R}if(v=!1,y!==2)continue}}if(y===1){Ic(o,0),Sa(o,l,0,!0);break}e:{switch(d=o,v=y,v){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Sa(d,l,Ji,!Aa);break e;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=hv+300-on(),10<y)){if(Sa(d,l,Ji,!Aa),mi(d,0,!0)!==0)break e;d.timeoutHandle=DR(oR.bind(null,d,h,Zr,ym,cv,l,Ji,nu,Cc,Aa,v,2,-0,0),y);break e}oR(d,h,Zr,ym,cv,l,Ji,nu,Cc,Aa,v,0,-0,0)}}break}while(!0);Ks(o)}function oR(o,l,h,d,y,v,R,N,H,te,ue,de,re,ie){if(o.timeoutHandle=-1,de=l.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(Mf={stylesheets:null,count:0,unsuspend:FU},Z1(l),de=qU(),de!==null)){o.cancelPendingCommit=de(dR.bind(null,o,l,v,h,d,y,R,N,H,ue,1,re,ie)),Sa(o,v,R,!te);return}dR(o,l,v,h,d,y,R,N,H)}function aU(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var y=h[d],v=y.getSnapshot;y=y.value;try{if(!yi(v(),y))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Sa(o,l,h,d){l&=~uv,l&=~nu,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var y=l;0<y;){var v=31-Jt(y),R=1<<v;d[v]=-1,y&=~R}h!==0&&tr(o,h,l)}function _m(){return(Ot&6)===0?(Cf(0),!1):!0}function mv(){if(dt!==null){if(Mt===0)var o=dt.return;else o=dt,xo=Ql=null,O0(o),Ec=null,yf=0,o=dt;for(;o!==null;)z1(o.alternate,o),o=o.return;dt=null}}function Ic(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,wU(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),mv(),$t=o,dt=h=wo(o.current,null),Et=l,Mt=0,Ti=null,Aa=!1,Rc=yr(o,l),lv=!1,Cc=Ji=uv=nu=Ta=ln=0,Zr=wf=null,cv=!1,(l&8)!==0&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var y=31-Jt(d),v=1<<y;l|=o[y],d&=~v}return Lo=l,Bp(),h}function aR(o,l){ot=null,Y.H=sm,l===lf||l===Yp?(l=Sw(),Mt=3):l===Tw?(l=Sw(),Mt=4):Mt=l===w1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ti=l,dt===null&&(ln=1,cm(o,Ki(l,o.current)))}function lR(){var o=Y.H;return Y.H=sm,o===null?sm:o}function uR(){var o=Y.A;return Y.A=sU,o}function gv(){ln=4,Aa||(Et&4194048)!==Et&&Xi.current!==null||(Rc=!0),(Ta&134217727)===0&&(nu&134217727)===0||$t===null||Sa($t,Et,Ji,!1)}function yv(o,l,h){var d=Ot;Ot|=2;var y=lR(),v=uR();($t!==o||Et!==l)&&(ym=null,Ic(o,l)),l=!1;var R=ln;e:do try{if(Mt!==0&&dt!==null){var N=dt,H=Ti;switch(Mt){case 8:mv(),R=6;break e;case 3:case 2:case 9:case 6:Xi.current===null&&(l=!0);var te=Mt;if(Mt=0,Ti=null,Nc(o,N,H,te),h&&Rc){R=0;break e}break;default:te=Mt,Mt=0,Ti=null,Nc(o,N,H,te)}}lU(),R=ln;break}catch(ue){aR(o,ue)}while(!0);return l&&o.shellSuspendCounter++,xo=Ql=null,Ot=d,Y.H=y,Y.A=v,dt===null&&($t=null,Et=0,Bp()),R}function lU(){for(;dt!==null;)cR(dt)}function uU(o,l){var h=Ot;Ot|=2;var d=lR(),y=uR();$t!==o||Et!==l?(ym=null,gm=on()+500,Ic(o,l)):Rc=yr(o,l);e:do try{if(Mt!==0&&dt!==null){l=dt;var v=Ti;t:switch(Mt){case 1:Mt=0,Ti=null,Nc(o,l,v,1);break;case 2:case 9:if(Ew(v)){Mt=0,Ti=null,hR(l);break}l=function(){Mt!==2&&Mt!==9||$t!==o||(Mt=7),Ks(o)},v.then(l,l);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:Ew(v)?(Mt=0,Ti=null,hR(l)):(Mt=0,Ti=null,Nc(o,l,v,7));break;case 5:var R=null;switch(dt.tag){case 26:R=dt.memoizedState;case 5:case 27:var N=dt;if(!R||GR(R)){Mt=0,Ti=null;var H=N.sibling;if(H!==null)dt=H;else{var te=N.return;te!==null?(dt=te,vm(te)):dt=null}break t}}Mt=0,Ti=null,Nc(o,l,v,5);break;case 6:Mt=0,Ti=null,Nc(o,l,v,6);break;case 8:mv(),ln=6;break e;default:throw Error(r(462))}}cU();break}catch(ue){aR(o,ue)}while(!0);return xo=Ql=null,Y.H=d,Y.A=y,Ot=h,dt!==null?0:($t=null,Et=0,Bp(),ln)}function cU(){for(;dt!==null&&!gs();)cR(dt)}function cR(o){var l=V1(o.alternate,o,Lo);o.memoizedProps=o.pendingProps,l===null?vm(o):dt=l}function hR(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=N1(h,l,l.pendingProps,l.type,void 0,Et);break;case 11:l=N1(h,l,l.pendingProps,l.type.render,l.ref,Et);break;case 5:O0(l);default:z1(h,l),l=dt=fw(l,Lo),l=V1(h,l,Lo)}o.memoizedProps=o.pendingProps,l===null?vm(o):dt=l}function Nc(o,l,h,d){xo=Ql=null,O0(l),Ec=null,yf=0;var y=l.return;try{if(ZV(o,y,l,h,Et)){ln=1,cm(o,Ki(h,o.current)),dt=null;return}}catch(v){if(y!==null)throw dt=y,v;ln=1,cm(o,Ki(h,o.current)),dt=null;return}l.flags&32768?(xt||d===1?o=!0:Rc||(Et&536870912)!==0?o=!1:(Aa=o=!0,(d===2||d===9||d===3||d===6)&&(d=Xi.current,d!==null&&d.tag===13&&(d.flags|=16384))),fR(l,o)):vm(l)}function vm(o){var l=o;do{if((l.flags&32768)!==0){fR(l,Aa);return}o=l.return;var h=tU(l.alternate,l,Lo);if(h!==null){dt=h;return}if(l=l.sibling,l!==null){dt=l;return}dt=l=o}while(l!==null);ln===0&&(ln=5)}function fR(o,l){do{var h=nU(o.alternate,o);if(h!==null){h.flags&=32767,dt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){dt=o;return}dt=o=h}while(o!==null);ln=6,dt=null}function dR(o,l,h,d,y,v,R,N,H){o.cancelPendingCommit=null;do Am();while(or!==0);if((Ot&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(v=l.lanes|l.childLanes,v|=a0,Ms(o,h,v,R,N,H),o===$t&&(dt=$t=null,Et=0),xc=l,ba=o,kc=h,fv=v,dv=y,rR=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,pU(Bi,function(){return _R(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,y=ne.p,ne.p=2,R=Ot,Ot|=4;try{rU(o,l,h)}finally{Ot=R,ne.p=y,Y.T=d}}or=1,pR(),mR(),gR()}}function pR(){if(or===1){or=0;var o=ba,l=xc,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null;var d=ne.p;ne.p=2;var y=Ot;Ot|=4;try{Q1(l,o);var v=kv,R=nw(o.containerInfo),N=v.focusedElem,H=v.selectionRange;if(R!==N&&N&&N.ownerDocument&&tw(N.ownerDocument.documentElement,N)){if(H!==null&&n0(N)){var te=H.start,ue=H.end;if(ue===void 0&&(ue=te),"selectionStart"in N)N.selectionStart=te,N.selectionEnd=Math.min(ue,N.value.length);else{var de=N.ownerDocument||document,re=de&&de.defaultView||window;if(re.getSelection){var ie=re.getSelection(),Qe=N.textContent.length,Ge=Math.min(H.start,Qe),Vt=H.end===void 0?Ge:Math.min(H.end,Qe);!ie.extend&&Ge>Vt&&(R=Vt,Vt=Ge,Ge=R);var Q=ew(N,Ge),W=ew(N,Vt);if(Q&&W&&(ie.rangeCount!==1||ie.anchorNode!==Q.node||ie.anchorOffset!==Q.offset||ie.focusNode!==W.node||ie.focusOffset!==W.offset)){var ee=de.createRange();ee.setStart(Q.node,Q.offset),ie.removeAllRanges(),Ge>Vt?(ie.addRange(ee),ie.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),ie.addRange(ee))}}}}for(de=[],ie=N;ie=ie.parentNode;)ie.nodeType===1&&de.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var ce=de[N];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Om=!!xv,kv=xv=null}finally{Ot=y,ne.p=d,Y.T=h}}o.current=l,or=2}}function mR(){if(or===2){or=0;var o=ba,l=xc,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=Y.T,Y.T=null;var d=ne.p;ne.p=2;var y=Ot;Ot|=4;try{G1(o,l.alternate,l)}finally{Ot=y,ne.p=d,Y.T=h}}or=3}}function gR(){if(or===4||or===3){or=0,ks();var o=ba,l=xc,h=kc,d=rR;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?or=5:(or=0,xc=ba=null,yR(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Ea=null),Ds(h),l=l.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(ut,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=Y.T,y=ne.p,ne.p=2,Y.T=null;try{for(var v=o.onRecoverableError,R=0;R<d.length;R++){var N=d[R];v(N.value,{componentStack:N.stack})}}finally{Y.T=l,ne.p=y}}(kc&3)!==0&&Am(),Ks(o),y=o.pendingLanes,(h&4194090)!==0&&(y&42)!==0?o===pv?Rf++:(Rf=0,pv=o):Rf=0,Cf(0)}}function yR(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,of(l)))}function Am(o){return pR(),mR(),gR(),_R()}function _R(){if(or!==5)return!1;var o=ba,l=fv;fv=0;var h=Ds(kc),d=Y.T,y=ne.p;try{ne.p=32>h?32:h,Y.T=null,h=dv,dv=null;var v=ba,R=kc;if(or=0,xc=ba=null,kc=0,(Ot&6)!==0)throw Error(r(331));var N=Ot;if(Ot|=4,tR(v.current),J1(v,v.current,R,h),Ot=N,Cf(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(ut,v)}catch{}return!0}finally{ne.p=y,Y.T=d,yR(o,l)}}function vR(o,l,h){l=Ki(h,l),l=G0(o.stateNode,l,2),o=da(o,l,2),o!==null&&(er(o,2),Ks(o))}function Ft(o,l,h){if(o.tag===3)vR(o,o,h);else for(;l!==null;){if(l.tag===3){vR(l,o,h);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ea===null||!Ea.has(d))){o=Ki(h,o),h=b1(2),d=da(l,h,2),d!==null&&(S1(h,d,l,o),er(d,2),Ks(d));break}}l=l.return}}function _v(o,l,h){var d=o.pingCache;if(d===null){d=o.pingCache=new oU;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(h)||(lv=!0,y.add(h),o=hU.bind(null,o,l,h),l.then(o,o))}function hU(o,l,h){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,$t===o&&(Et&h)===h&&(ln===4||ln===3&&(Et&62914560)===Et&&300>on()-hv?(Ot&2)===0&&Ic(o,0):uv|=h,Cc===Et&&(Cc=0)),Ks(o)}function AR(o,l){l===0&&(l=ji()),o=fc(o,l),o!==null&&(er(o,l),Ks(o))}function fU(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),AR(o,h)}function dU(o,l){var h=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(h=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),AR(o,h)}function pU(o,l){return di(o,l)}var Tm=null,Oc=null,vv=!1,Em=!1,Av=!1,ru=0;function Ks(o){o!==Oc&&o.next===null&&(Oc===null?Tm=Oc=o:Oc=Oc.next=o),Em=!0,vv||(vv=!0,gU())}function Cf(o,l){if(!Av&&Em){Av=!0;do for(var h=!1,d=Tm;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var v=0;else{var R=d.suspendedLanes,N=d.pingedLanes;v=(1<<31-Jt(42|o)+1)-1,v&=y&~(R&~N),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(h=!0,SR(d,v))}else v=Et,v=mi(d,d===$t?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||yr(d,v)||(h=!0,SR(d,v));d=d.next}while(h);Av=!1}}function mU(){TR()}function TR(){Em=vv=!1;var o=0;ru!==0&&(SU()&&(o=ru),ru=0);for(var l=on(),h=null,d=Tm;d!==null;){var y=d.next,v=ER(d,l);v===0?(d.next=null,h===null?Tm=y:h.next=y,y===null&&(Oc=h)):(h=d,(o!==0||(v&3)!==0)&&(Em=!0)),d=y}Cf(o)}function ER(o,l){for(var h=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var R=31-Jt(v),N=1<<R,H=y[R];H===-1?((N&h)===0||(N&d)!==0)&&(y[R]=Os(N,l)):H<=l&&(o.expiredLanes|=N),v&=~N}if(l=$t,h=Et,h=mi(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,h===0||o===l&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Xt(d),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||yr(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(d!==null&&Xt(d),Ds(h)){case 2:case 8:h=ys;break;case 32:h=Bi;break;case 268435456:h=gr;break;default:h=Bi}return d=bR.bind(null,o),h=di(h,d),o.callbackPriority=l,o.callbackNode=h,l}return d!==null&&d!==null&&Xt(d),o.callbackPriority=2,o.callbackNode=null,2}function bR(o,l){if(or!==0&&or!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Am()&&o.callbackNode!==h)return null;var d=Et;return d=mi(o,o===$t?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(sR(o,d,l),ER(o,on()),o.callbackNode!=null&&o.callbackNode===h?bR.bind(null,o):null)}function SR(o,l){if(Am())return null;sR(o,l,!0)}function gU(){RU(function(){(Ot&6)!==0?di(zi,mU):TR()})}function Tv(){return ru===0&&(ru=Wr()),ru}function wR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ec(""+o)}function RR(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function yU(o,l,h,d,y){if(l==="submit"&&h&&h.stateNode===y){var v=wR((y[ve]||null).action),R=d.submitter;R&&(l=(l=R[ve]||null)?wR(l.formAction):R.getAttribute("formAction"),l!==null&&(v=l,R=null));var N=new tc("action","action",null,d,y);o.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ru!==0){var H=R?RR(y,R):new FormData(y);j0(h,{pending:!0,data:H,method:y.method,action:v},null,H)}}else typeof v=="function"&&(N.preventDefault(),H=R?RR(y,R):new FormData(y),j0(h,{pending:!0,data:H,method:y.method,action:v},v,H))},currentTarget:y}]})}}for(var Ev=0;Ev<o0.length;Ev++){var bv=o0[Ev],_U=bv.toLowerCase(),vU=bv[0].toUpperCase()+bv.slice(1);vs(_U,"on"+vU)}vs(sw,"onAnimationEnd"),vs(ow,"onAnimationIteration"),vs(aw,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(LV,"onTransitionRun"),vs(VV,"onTransitionStart"),vs(UV,"onTransitionCancel"),vs(lw,"onTransitionEnd"),Ce("onMouseEnter",["mouseout","mouseover"]),Ce("onMouseLeave",["mouseout","mouseover"]),Ce("onPointerEnter",["pointerout","pointerover"]),Ce("onPointerLeave",["pointerout","pointerover"]),me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),me("onBeforeInput",["compositionend","keypress","textInput","paste"]),me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xf));function CR(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var d=o[h],y=d.event;d=d.listeners;e:{var v=void 0;if(l)for(var R=d.length-1;0<=R;R--){var N=d[R],H=N.instance,te=N.currentTarget;if(N=N.listener,H!==v&&y.isPropagationStopped())break e;v=N,y.currentTarget=te;try{v(y)}catch(ue){um(ue)}y.currentTarget=null,v=H}else for(R=0;R<d.length;R++){if(N=d[R],H=N.instance,te=N.currentTarget,N=N.listener,H!==v&&y.isPropagationStopped())break e;v=N,y.currentTarget=te;try{v(y)}catch(ue){um(ue)}y.currentTarget=null,v=H}}}}function pt(o,l){var h=l[ze];h===void 0&&(h=l[ze]=new Set);var d=o+"__bubble";h.has(d)||(xR(l,o,2,!1),h.add(d))}function Sv(o,l,h){var d=0;l&&(d|=4),xR(h,o,d,l)}var bm="_reactListening"+Math.random().toString(36).slice(2);function wv(o){if(!o[bm]){o[bm]=!0,Ae.forEach(function(h){h!=="selectionchange"&&(AU.has(h)||Sv(h,!1,o),Sv(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[bm]||(l[bm]=!0,Sv("selectionchange",!1,l))}}function xR(o,l,h,d){switch(JR(l)){case 2:var y=KU;break;case 8:y=WU;break;default:y=zv}h=y.bind(null,l,h,o),y=void 0,!$i||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(l,h,{capture:!0,passive:y}):o.addEventListener(l,h,!0):y!==void 0?o.addEventListener(l,h,{passive:y}):o.addEventListener(l,h,!1)}function Rv(o,l,h,d,y){var v=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var N=d.stateNode.containerInfo;if(N===y)break;if(R===4)for(R=d.return;R!==null;){var H=R.tag;if((H===3||H===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;N!==null;){if(R=He(N),R===null)return;if(H=R.tag,H===5||H===6||H===26||H===27){d=v=R;continue e}N=N.parentNode}}d=d.return}wp(function(){var te=v,ue=qi(h),de=[];e:{var re=uw.get(o);if(re!==void 0){var ie=tc,Qe=o;switch(o){case"keypress":if(Us(h)===0)break e;case"keydown":case"keyup":ie=ac;break;case"focusin":Qe="focus",ie=ic;break;case"focusout":Qe="blur",ie=ic;break;case"beforeblur":case"afterblur":ie=ic;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=J_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Mp;break;case sw:case ow:case aw:ie=sc;break;case lw:ie=Pp;break;case"scroll":case"scrollend":ie=Rp;break;case"wheel":ie=lc;break;case"copy":case"cut":case"paste":ie=oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Xh;break;case"toggle":case"beforetoggle":ie=Vp}var Ge=(l&4)!==0,Vt=!Ge&&(o==="scroll"||o==="scrollend"),Q=Ge?re!==null?re+"Capture":null:re;Ge=[];for(var W=te,ee;W!==null;){var ce=W;if(ee=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||ee===null||Q===null||(ce=Ll(W,Q),ce!=null&&Ge.push(kf(W,ce,ee))),Vt)break;W=W.return}0<Ge.length&&(re=new ie(re,Qe,null,h,ue),de.push({event:re,listeners:Ge}))}}if((l&7)===0){e:{if(re=o==="mouseover"||o==="pointerover",ie=o==="mouseout"||o==="pointerout",re&&h!==vo&&(Qe=h.relatedTarget||h.fromElement)&&(He(Qe)||Qe[we]))break e;if((ie||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,ie?(Qe=h.relatedTarget||h.toElement,ie=te,Qe=Qe?He(Qe):null,Qe!==null&&(Vt=s(Qe),Ge=Qe.tag,Qe!==Vt||Ge!==5&&Ge!==27&&Ge!==6)&&(Qe=null)):(ie=null,Qe=te),ie!==Qe)){if(Ge=Gi,ce="onMouseLeave",Q="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(Ge=Xh,ce="onPointerLeave",Q="onPointerEnter",W="pointer"),Vt=ie==null?re:St(ie),ee=Qe==null?re:St(Qe),re=new Ge(ce,W+"leave",ie,h,ue),re.target=Vt,re.relatedTarget=ee,ce=null,He(ue)===te&&(Ge=new Ge(Q,W+"enter",Qe,h,ue),Ge.target=ee,Ge.relatedTarget=Vt,ce=Ge),Vt=ce,ie&&Qe)t:{for(Ge=ie,Q=Qe,W=0,ee=Ge;ee;ee=Mc(ee))W++;for(ee=0,ce=Q;ce;ce=Mc(ce))ee++;for(;0<W-ee;)Ge=Mc(Ge),W--;for(;0<ee-W;)Q=Mc(Q),ee--;for(;W--;){if(Ge===Q||Q!==null&&Ge===Q.alternate)break t;Ge=Mc(Ge),Q=Mc(Q)}Ge=null}else Ge=null;ie!==null&&kR(de,re,ie,Ge,!1),Qe!==null&&Vt!==null&&kR(de,Vt,Qe,Ge,!0)}}e:{if(re=te?St(te):window,ie=re.nodeName&&re.nodeName.toLowerCase(),ie==="select"||ie==="input"&&re.type==="file")var De=WS;else if(Pn(re))if(YS)De=MV;else{De=NV;var ct=IV}else ie=re.nodeName,!ie||ie.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?te&&qh(te.elementType)&&(De=WS):De=OV;if(De&&(De=De(o,te))){So(de,De,h,ue);break e}ct&&ct(o,re,te),o==="focusout"&&te&&re.type==="number"&&te.memoizedProps.value!=null&&la(re,"number",re.value)}switch(ct=te?St(te):window,o){case"focusin":(Pn(ct)||ct.contentEditable==="true")&&(uc=ct,r0=te,ef=null);break;case"focusout":ef=r0=uc=null;break;case"mousedown":i0=!0;break;case"contextmenu":case"mouseup":case"dragend":i0=!1,rw(de,h,ue);break;case"selectionchange":if(PV)break;case"keydown":case"keyup":rw(de,h,ue)}var Be;if(js)e:{switch(o){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else At?oe(o,h)&&(Ke="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ke="onCompositionStart");Ke&&(w&&h.locale!=="ko"&&(At||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&At&&(Be=Gh()):(Vs=ue,ua="value"in Vs?Vs.value:Vs.textContent,At=!0)),ct=Sm(te,Ke),0<ct.length&&(Ke=new Yh(Ke,o,null,h,ue),de.push({event:Ke,listeners:ct}),Be?Ke.data=Be:(Be=be(h),Be!==null&&(Ke.data=Be)))),(Be=b?Dn(o,h):Tt(o,h))&&(Ke=Sm(te,"onBeforeInput"),0<Ke.length&&(ct=new Yh("onBeforeInput","beforeinput",null,h,ue),de.push({event:ct,listeners:Ke}),ct.data=Be)),yU(de,o,te,h,ue)}CR(de,l)})}function kf(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Sm(o,l){for(var h=l+"Capture",d=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Ll(o,h),y!=null&&d.unshift(kf(o,y,v)),y=Ll(o,l),y!=null&&d.push(kf(o,y,v))),o.tag===3)return d;o=o.return}return[]}function Mc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function kR(o,l,h,d,y){for(var v=l._reactName,R=[];h!==null&&h!==d;){var N=h,H=N.alternate,te=N.stateNode;if(N=N.tag,H!==null&&H===d)break;N!==5&&N!==26&&N!==27||te===null||(H=te,y?(te=Ll(h,v),te!=null&&R.unshift(kf(h,te,H))):y||(te=Ll(h,v),te!=null&&R.push(kf(h,te,H)))),h=h.return}R.length!==0&&o.push({event:l,listeners:R})}var TU=/\r\n?/g,EU=/\u0000|\uFFFD/g;function IR(o){return(typeof o=="string"?o:""+o).replace(TU,`
`).replace(EU,"")}function NR(o,l){return l=IR(l),IR(o)===l}function wm(){}function Lt(o,l,h,d,y,v){switch(h){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Hi(o,""+d);break;case"className":mn(o,"class",d);break;case"tabIndex":mn(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(o,h,d);break;case"style":Hh(o,d,v);break;case"data":if(l!=="object"){mn(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(h);break}d=ec(""+d),o.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(h==="formAction"?(l!=="input"&&Lt(o,l,"name",y.name,y,null),Lt(o,l,"formEncType",y.formEncType,y,null),Lt(o,l,"formMethod",y.formMethod,y,null),Lt(o,l,"formTarget",y.formTarget,y,null)):(Lt(o,l,"encType",y.encType,y,null),Lt(o,l,"method",y.method,y,null),Lt(o,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(h);break}d=ec(""+d),o.setAttribute(h,d);break;case"onClick":d!=null&&(o.onclick=wm);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(h=d.__html,h!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}h=ec(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(h,""+d):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":d===!0?o.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(h,d):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(h,d):o.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(h):o.setAttribute(h,d);break;case"popover":pt("beforetoggle",o),pt("toggle",o),Bt(o,"popover",d);break;case"xlinkActuate":Ve(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ve(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ve(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ve(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ve(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ve(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ve(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ve(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ve(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Bt(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Q_.get(h)||h,Bt(o,h,d))}}function Cv(o,l,h,d,y,v){switch(h){case"style":Hh(o,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(h=d.__html,h!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof d=="string"?Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&Hi(o,""+d);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"onClick":d!=null&&(o.onclick=wm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!K.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(y=h.endsWith("Capture"),l=h.slice(2,y?h.length-7:void 0),v=o[ve]||null,v=v!=null?v[h]:null,typeof v=="function"&&o.removeEventListener(l,v,y),typeof d=="function")){typeof v!="function"&&v!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,d,y);break e}h in o?o[h]=d:d===!0?o.setAttribute(h,""):Bt(o,h,d)}}}function ar(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",o),pt("load",o);var d=!1,y=!1,v;for(v in h)if(h.hasOwnProperty(v)){var R=h[v];if(R!=null)switch(v){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,v,R,h,null)}}y&&Lt(o,l,"srcSet",h.srcSet,h,null),d&&Lt(o,l,"src",h.src,h,null);return;case"input":pt("invalid",o);var N=v=R=y=null,H=null,te=null;for(d in h)if(h.hasOwnProperty(d)){var ue=h[d];if(ue!=null)switch(d){case"name":y=ue;break;case"type":R=ue;break;case"checked":H=ue;break;case"defaultChecked":te=ue;break;case"value":v=ue;break;case"defaultValue":N=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,l));break;default:Lt(o,l,d,ue,h,null)}}Ml(o,v,N,H,te,R,y,!1),Zu(o);return;case"select":pt("invalid",o),d=R=v=null;for(y in h)if(h.hasOwnProperty(y)&&(N=h[y],N!=null))switch(y){case"value":v=N;break;case"defaultValue":R=N;break;case"multiple":d=N;default:Lt(o,l,y,N,h,null)}l=v,h=R,o.multiple=!!d,l!=null?_o(o,!!d,l,!1):h!=null&&_o(o,!!d,h,!0);return;case"textarea":pt("invalid",o),v=y=d=null;for(R in h)if(h.hasOwnProperty(R)&&(N=h[R],N!=null))switch(R){case"value":d=N;break;case"defaultValue":y=N;break;case"children":v=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:Lt(o,l,R,N,h,null)}Dl(o,d,y,v),Zu(o);return;case"option":for(H in h)if(h.hasOwnProperty(H)&&(d=h[H],d!=null))switch(H){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Lt(o,l,H,d,h,null)}return;case"dialog":pt("beforetoggle",o),pt("toggle",o),pt("cancel",o),pt("close",o);break;case"iframe":case"object":pt("load",o);break;case"video":case"audio":for(d=0;d<xf.length;d++)pt(xf[d],o);break;case"image":pt("error",o),pt("load",o);break;case"details":pt("toggle",o);break;case"embed":case"source":case"link":pt("error",o),pt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in h)if(h.hasOwnProperty(te)&&(d=h[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,te,d,h,null)}return;default:if(qh(l)){for(ue in h)h.hasOwnProperty(ue)&&(d=h[ue],d!==void 0&&Cv(o,l,ue,d,h,void 0));return}}for(N in h)h.hasOwnProperty(N)&&(d=h[N],d!=null&&Lt(o,l,N,d,h,null))}function bU(o,l,h,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,R=null,N=null,H=null,te=null,ue=null;for(ie in h){var de=h[ie];if(h.hasOwnProperty(ie)&&de!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=de;default:d.hasOwnProperty(ie)||Lt(o,l,ie,null,d,de)}}for(var re in d){var ie=d[re];if(de=h[re],d.hasOwnProperty(re)&&(ie!=null||de!=null))switch(re){case"type":v=ie;break;case"name":y=ie;break;case"checked":te=ie;break;case"defaultChecked":ue=ie;break;case"value":R=ie;break;case"defaultValue":N=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,l));break;default:ie!==de&&Lt(o,l,re,ie,d,de)}}gi(o,R,N,H,te,ue,v,y);return;case"select":ie=R=N=re=null;for(v in h)if(H=h[v],h.hasOwnProperty(v)&&H!=null)switch(v){case"value":break;case"multiple":ie=H;default:d.hasOwnProperty(v)||Lt(o,l,v,null,d,H)}for(y in d)if(v=d[y],H=h[y],d.hasOwnProperty(y)&&(v!=null||H!=null))switch(y){case"value":re=v;break;case"defaultValue":N=v;break;case"multiple":R=v;default:v!==H&&Lt(o,l,y,v,d,H)}l=N,h=R,d=ie,re!=null?_o(o,!!h,re,!1):!!d!=!!h&&(l!=null?_o(o,!!h,l,!0):_o(o,!!h,h?[]:"",!1));return;case"textarea":ie=re=null;for(N in h)if(y=h[N],h.hasOwnProperty(N)&&y!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Lt(o,l,N,null,d,y)}for(R in d)if(y=d[R],v=h[R],d.hasOwnProperty(R)&&(y!=null||v!=null))switch(R){case"value":re=y;break;case"defaultValue":ie=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==v&&Lt(o,l,R,y,d,v)}Dt(o,re,ie);return;case"option":for(var Qe in h)if(re=h[Qe],h.hasOwnProperty(Qe)&&re!=null&&!d.hasOwnProperty(Qe))switch(Qe){case"selected":o.selected=!1;break;default:Lt(o,l,Qe,null,d,re)}for(H in d)if(re=d[H],ie=h[H],d.hasOwnProperty(H)&&re!==ie&&(re!=null||ie!=null))switch(H){case"selected":o.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Lt(o,l,H,re,d,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in h)re=h[Ge],h.hasOwnProperty(Ge)&&re!=null&&!d.hasOwnProperty(Ge)&&Lt(o,l,Ge,null,d,re);for(te in d)if(re=d[te],ie=h[te],d.hasOwnProperty(te)&&re!==ie&&(re!=null||ie!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:Lt(o,l,te,re,d,ie)}return;default:if(qh(l)){for(var Vt in h)re=h[Vt],h.hasOwnProperty(Vt)&&re!==void 0&&!d.hasOwnProperty(Vt)&&Cv(o,l,Vt,void 0,d,re);for(ue in d)re=d[ue],ie=h[ue],!d.hasOwnProperty(ue)||re===ie||re===void 0&&ie===void 0||Cv(o,l,ue,re,d,ie);return}}for(var Q in h)re=h[Q],h.hasOwnProperty(Q)&&re!=null&&!d.hasOwnProperty(Q)&&Lt(o,l,Q,null,d,re);for(de in d)re=d[de],ie=h[de],!d.hasOwnProperty(de)||re===ie||re==null&&ie==null||Lt(o,l,de,re,d,ie)}var xv=null,kv=null;function Rm(o){return o.nodeType===9?o:o.ownerDocument}function OR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MR(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Iv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Nv=null;function SU(){var o=window.event;return o&&o.type==="popstate"?o===Nv?!1:(Nv=o,!0):(Nv=null,!1)}var DR=typeof setTimeout=="function"?setTimeout:void 0,wU=typeof clearTimeout=="function"?clearTimeout:void 0,PR=typeof Promise=="function"?Promise:void 0,RU=typeof queueMicrotask=="function"?queueMicrotask:typeof PR<"u"?function(o){return PR.resolve(null).then(o).catch(CU)}:DR;function CU(o){setTimeout(function(){throw o})}function wa(o){return o==="head"}function LR(o,l){var h=l,d=0,y=0;do{var v=h.nextSibling;if(o.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(0<d&&8>d){h=d;var R=o.ownerDocument;if(h&1&&If(R.documentElement),h&2&&If(R.body),h&4)for(h=R.head,If(h),R=h.firstChild;R;){var N=R.nextSibling,H=R.nodeName;R[Fe]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&R.rel.toLowerCase()==="stylesheet"||h.removeChild(R),R=N}}if(y===0){o.removeChild(v),Uf(l);return}y--}else h==="$"||h==="$?"||h==="$!"?y++:d=h.charCodeAt(0)-48;else d=0;h=v}while(h);Uf(l)}function Ov(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Ov(h),ke(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function xU(o,l,h,d){for(;o.nodeType===1;){var y=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Fe])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Ts(o.nextSibling),o===null)break}return null}function kU(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Ts(o.nextSibling),o===null))return null;return o}function Mv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function IU(o,l){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")l();else{var d=function(){l(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ts(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Dv=null;function VR(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}function UR(o,l,h){switch(l=Rm(h),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function If(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);ke(o)}var Zi=new Map,zR=new Set;function Cm(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Vo=ne.d;ne.d={f:NU,r:OU,D:MU,C:DU,L:PU,m:LU,X:UU,S:VU,M:zU};function NU(){var o=Vo.f(),l=_m();return o||l}function OU(o){var l=it(o);l!==null&&l.tag===5&&l.type==="form"?s1(l):Vo.r(o)}var Dc=typeof document>"u"?null:document;function BR(o,l,h){var d=Dc;if(d&&typeof l=="string"&&l){var y=bn(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof h=="string"&&(y+='[crossorigin="'+h+'"]'),zR.has(y)||(zR.add(y),o={rel:o,crossOrigin:h,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),ar(l,"link",o),ft(l),d.head.appendChild(l)))}}function MU(o){Vo.D(o),BR("dns-prefetch",o,null)}function DU(o,l){Vo.C(o,l),BR("preconnect",o,l)}function PU(o,l,h){Vo.L(o,l,h);var d=Dc;if(d&&o&&l){var y='link[rel="preload"][as="'+bn(l)+'"]';l==="image"&&h&&h.imageSrcSet?(y+='[imagesrcset="'+bn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(y+='[imagesizes="'+bn(h.imageSizes)+'"]')):y+='[href="'+bn(o)+'"]';var v=y;switch(l){case"style":v=Pc(o);break;case"script":v=Lc(o)}Zi.has(v)||(o=p({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),Zi.set(v,o),d.querySelector(y)!==null||l==="style"&&d.querySelector(Nf(v))||l==="script"&&d.querySelector(Of(v))||(l=d.createElement("link"),ar(l,"link",o),ft(l),d.head.appendChild(l)))}}function LU(o,l){Vo.m(o,l);var h=Dc;if(h&&o){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+bn(d)+'"][href="'+bn(o)+'"]',v=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Lc(o)}if(!Zi.has(v)&&(o=p({rel:"modulepreload",href:o},l),Zi.set(v,o),h.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Of(v)))return}d=h.createElement("link"),ar(d,"link",o),ft(d),h.head.appendChild(d)}}}function VU(o,l,h){Vo.S(o,l,h);var d=Dc;if(d&&o){var y=_t(d).hoistableStyles,v=Pc(o);l=l||"default";var R=y.get(v);if(!R){var N={loading:0,preload:null};if(R=d.querySelector(Nf(v)))N.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},h),(h=Zi.get(v))&&Pv(o,h);var H=R=d.createElement("link");ft(H),ar(H,"link",o),H._p=new Promise(function(te,ue){H.onload=te,H.onerror=ue}),H.addEventListener("load",function(){N.loading|=1}),H.addEventListener("error",function(){N.loading|=2}),N.loading|=4,xm(R,l,d)}R={type:"stylesheet",instance:R,count:1,state:N},y.set(v,R)}}}function UU(o,l){Vo.X(o,l);var h=Dc;if(h&&o){var d=_t(h).hoistableScripts,y=Lc(o),v=d.get(y);v||(v=h.querySelector(Of(y)),v||(o=p({src:o,async:!0},l),(l=Zi.get(y))&&Lv(o,l),v=h.createElement("script"),ft(v),ar(v,"link",o),h.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function zU(o,l){Vo.M(o,l);var h=Dc;if(h&&o){var d=_t(h).hoistableScripts,y=Lc(o),v=d.get(y);v||(v=h.querySelector(Of(y)),v||(o=p({src:o,async:!0,type:"module"},l),(l=Zi.get(y))&&Lv(o,l),v=h.createElement("script"),ft(v),ar(v,"link",o),h.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function jR(o,l,h,d){var y=(y=Le.current)?Cm(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=Pc(h.href),h=_t(y).hoistableStyles,d=h.get(l),d||(d={type:"style",instance:null,count:0,state:null},h.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Pc(h.href);var v=_t(y).hoistableStyles,R=v.get(o);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,R),(v=y.querySelector(Nf(o)))&&!v._p&&(R.instance=v,R.state.loading=5),Zi.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Zi.set(o,h),v||BU(y,o,h,R.state))),l&&d===null)throw Error(r(528,""));return R}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Lc(h),h=_t(y).hoistableScripts,d=h.get(l),d||(d={type:"script",instance:null,count:0,state:null},h.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Pc(o){return'href="'+bn(o)+'"'}function Nf(o){return'link[rel="stylesheet"]['+o+"]"}function FR(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function BU(o,l,h,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),ar(l,"link",h),ft(l),o.head.appendChild(l))}function Lc(o){return'[src="'+bn(o)+'"]'}function Of(o){return"script[async]"+o}function HR(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+bn(h.href)+'"]');if(d)return l.instance=d,ft(d),d;var y=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),ft(d),ar(d,"style",y),xm(d,h.precedence,o),l.instance=d;case"stylesheet":y=Pc(h.href);var v=o.querySelector(Nf(y));if(v)return l.state.loading|=4,l.instance=v,ft(v),v;d=FR(h),(y=Zi.get(y))&&Pv(d,y),v=(o.ownerDocument||o).createElement("link"),ft(v);var R=v;return R._p=new Promise(function(N,H){R.onload=N,R.onerror=H}),ar(v,"link",d),l.state.loading|=4,xm(v,h.precedence,o),l.instance=v;case"script":return v=Lc(h.src),(y=o.querySelector(Of(v)))?(l.instance=y,ft(y),y):(d=h,(y=Zi.get(v))&&(d=p({},h),Lv(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),ft(y),ar(y,"link",d),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,xm(d,h.precedence,o));return l.instance}function xm(o,l,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,v=y,R=0;R<d.length;R++){var N=d[R];if(N.dataset.precedence===l)v=N;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function Pv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Lv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var km=null;function qR(o,l,h){if(km===null){var d=new Map,y=km=new Map;y.set(h,d)}else y=km,d=y.get(h),d||(d=new Map,y.set(h,d));if(d.has(o))return d;for(d.set(o,null),h=h.getElementsByTagName(o),y=0;y<h.length;y++){var v=h[y];if(!(v[Fe]||v[he]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var R=v.getAttribute(l)||"";R=o+R;var N=d.get(R);N?N.push(v):d.set(R,[v])}}return d}function $R(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function jU(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function GR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Mf=null;function FU(){}function HU(o,l,h){if(Mf===null)throw Error(r(475));var d=Mf;if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Pc(h.href),v=o.querySelector(Nf(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Im.bind(d),o.then(d,d)),l.state.loading|=4,l.instance=v,ft(v);return}v=o.ownerDocument||o,h=FR(h),(y=Zi.get(y))&&Pv(h,y),v=v.createElement("link"),ft(v);var R=v;R._p=new Promise(function(N,H){R.onload=N,R.onerror=H}),ar(v,"link",h),l.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=Im.bind(d),o.addEventListener("load",l),o.addEventListener("error",l))}}function qU(){if(Mf===null)throw Error(r(475));var o=Mf;return o.stylesheets&&o.count===0&&Vv(o,o.stylesheets),0<o.count?function(l){var h=setTimeout(function(){if(o.stylesheets&&Vv(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(h)}}:null}function Im(){if(this.count--,this.count===0){if(this.stylesheets)Vv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Nm=null;function Vv(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Nm=new Map,l.forEach($U,o),Nm=null,Im.call(o))}function $U(o,l){if(!(l.state.loading&4)){var h=Nm.get(o);if(h)var d=h.get(null);else{h=new Map,Nm.set(o,h);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var R=y[v];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(h.set(R.dataset.precedence,R),d=R)}d&&h.set(null,d)}y=l.instance,R=y.getAttribute("data-precedence"),v=h.get(R)||d,v===d&&h.set(null,y),h.set(R,y),this.count++,d=Im.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var Df={$$typeof:B,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function GU(o,l,h,d,y,v,R,N){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function KR(o,l,h,d,y,v,R,N,H,te,ue,de){return o=new GU(o,l,h,R,N,H,te,de),l=1,v===!0&&(l|=24),v=_i(3,null,null,l),o.current=v,v.stateNode=o,l=_0(),l.refCount++,o.pooledCache=l,l.refCount++,v.memoizedState={element:d,isDehydrated:h,cache:l},E0(v),o}function WR(o){return o?(o=dc,o):dc}function YR(o,l,h,d,y,v){y=WR(y),d.context===null?d.context=y:d.pendingContext=y,d=fa(l),d.payload={element:h},v=v===void 0?null:v,v!==null&&(d.callback=v),h=da(o,d,l),h!==null&&(bi(h,o,l),cf(h,o,l))}function QR(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function Uv(o,l){QR(o,l),(o=o.alternate)&&QR(o,l)}function XR(o){if(o.tag===13){var l=fc(o,67108864);l!==null&&bi(l,o,67108864),Uv(o,67108864)}}var Om=!0;function KU(o,l,h,d){var y=Y.T;Y.T=null;var v=ne.p;try{ne.p=2,zv(o,l,h,d)}finally{ne.p=v,Y.T=y}}function WU(o,l,h,d){var y=Y.T;Y.T=null;var v=ne.p;try{ne.p=8,zv(o,l,h,d)}finally{ne.p=v,Y.T=y}}function zv(o,l,h,d){if(Om){var y=Bv(d);if(y===null)Rv(o,l,d,Mm,h),ZR(o,d);else if(QU(y,o,l,h,d))d.stopPropagation();else if(ZR(o,d),l&4&&-1<YU.indexOf(o)){for(;y!==null;){var v=it(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var R=En(v.pendingLanes);if(R!==0){var N=v;for(N.pendingLanes|=2,N.entangledLanes|=2;R;){var H=1<<31-Jt(R);N.entanglements[1]|=H,R&=~H}Ks(v),(Ot&6)===0&&(gm=on()+500,Cf(0))}}break;case 13:N=fc(v,2),N!==null&&bi(N,v,2),_m(),Uv(v,2)}if(v=Bv(d),v===null&&Rv(o,l,d,Mm,h),v===y)break;y=v}y!==null&&d.stopPropagation()}else Rv(o,l,d,null,h)}}function Bv(o){return o=qi(o),jv(o)}var Mm=null;function jv(o){if(Mm=null,o=He(o),o!==null){var l=s(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=a(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Mm=o,null}function JR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Is()){case zi:return 2;case ys:return 8;case Bi:case pi:return 32;case gr:return 268435456;default:return 32}default:return 32}}var Fv=!1,Ra=null,Ca=null,xa=null,Pf=new Map,Lf=new Map,ka=[],YU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZR(o,l){switch(o){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Pf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lf.delete(l.pointerId)}}function Vf(o,l,h,d,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:l,domEventName:h,eventSystemFlags:d,nativeEvent:v,targetContainers:[y]},l!==null&&(l=it(l),l!==null&&XR(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function QU(o,l,h,d,y){switch(l){case"focusin":return Ra=Vf(Ra,o,l,h,d,y),!0;case"dragenter":return Ca=Vf(Ca,o,l,h,d,y),!0;case"mouseover":return xa=Vf(xa,o,l,h,d,y),!0;case"pointerover":var v=y.pointerId;return Pf.set(v,Vf(Pf.get(v)||null,o,l,h,d,y)),!0;case"gotpointercapture":return v=y.pointerId,Lf.set(v,Vf(Lf.get(v)||null,o,l,h,d,y)),!0}return!1}function eC(o){var l=He(o.target);if(l!==null){var h=s(l);if(h!==null){if(l=h.tag,l===13){if(l=a(h),l!==null){o.blockedOn=l,X(o.priority,function(){if(h.tag===13){var d=Ei();d=nr(d);var y=fc(h,d);y!==null&&bi(y,h,d),Uv(h,d)}});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Dm(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=Bv(o.nativeEvent);if(h===null){h=o.nativeEvent;var d=new h.constructor(h.type,h);vo=d,h.target.dispatchEvent(d),vo=null}else return l=it(h),l!==null&&XR(l),o.blockedOn=h,!1;l.shift()}return!0}function tC(o,l,h){Dm(o)&&h.delete(l)}function XU(){Fv=!1,Ra!==null&&Dm(Ra)&&(Ra=null),Ca!==null&&Dm(Ca)&&(Ca=null),xa!==null&&Dm(xa)&&(xa=null),Pf.forEach(tC),Lf.forEach(tC)}function Pm(o,l){o.blockedOn===l&&(o.blockedOn=null,Fv||(Fv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,XU)))}var Lm=null;function nC(o){Lm!==o&&(Lm=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Lm===o&&(Lm=null);for(var l=0;l<o.length;l+=3){var h=o[l],d=o[l+1],y=o[l+2];if(typeof d!="function"){if(jv(d||h)===null)continue;break}var v=it(h);v!==null&&(o.splice(l,3),l-=3,j0(v,{pending:!0,data:y,method:h.method,action:d},d,y))}}))}function Uf(o){function l(H){return Pm(H,o)}Ra!==null&&Pm(Ra,o),Ca!==null&&Pm(Ca,o),xa!==null&&Pm(xa,o),Pf.forEach(l),Lf.forEach(l);for(var h=0;h<ka.length;h++){var d=ka[h];d.blockedOn===o&&(d.blockedOn=null)}for(;0<ka.length&&(h=ka[0],h.blockedOn===null);)eC(h),h.blockedOn===null&&ka.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var y=h[d],v=h[d+1],R=y[ve]||null;if(typeof v=="function")R||nC(h);else if(R){var N=null;if(v&&v.hasAttribute("formAction")){if(y=v,R=v[ve]||null)N=R.formAction;else if(jv(y)!==null)continue}else N=R.action;typeof N=="function"?h[d+1]=N:(h.splice(d,3),d-=3),nC(h)}}}function Hv(o){this._internalRoot=o}Vm.prototype.render=Hv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,d=Ei();YR(h,d,o,l,null,null)},Vm.prototype.unmount=Hv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;YR(o.current,2,null,o,null,null),_m(),l[we]=null}};function Vm(o){this._internalRoot=o}Vm.prototype.unstable_scheduleHydration=function(o){if(o){var l=$();o={blockedOn:null,target:o,priority:l};for(var h=0;h<ka.length&&l!==0&&l<ka[h].priority;h++);ka.splice(h,0,o),h===0&&eC(o)}};var rC=e.version;if(rC!=="19.1.0")throw Error(r(527,rC,"19.1.0"));ne.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=c(l),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var JU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Um.isDisabled&&Um.supportsFiber)try{ut=Um.inject(JU),et=Um}catch{}}return Bf.createRoot=function(o,l){if(!i(o))throw Error(r(299));var h=!1,d="",y=v1,v=A1,R=T1,N=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(N=l.unstable_transitionCallbacks)),l=KR(o,1,!1,null,null,h,d,y,v,R,N,null),o[we]=l.current,wv(o),new Hv(l)},Bf.hydrateRoot=function(o,l,h){if(!i(o))throw Error(r(299));var d=!1,y="",v=v1,R=A1,N=T1,H=null,te=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onUncaughtError!==void 0&&(v=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(N=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(H=h.unstable_transitionCallbacks),h.formState!==void 0&&(te=h.formState)),l=KR(o,1,!0,l,h??null,d,y,v,R,N,H,te),l.context=WR(null),h=l.current,d=Ei(),d=nr(d),y=fa(d),y.callback=null,da(h,y,d),h=d,l.current.lanes=h,er(l,h),Ks(l),o[we]=l.current,wv(o),new Vm(l)},Bf.version="19.1.0",Bf}var dC;function a4(){if(dC)return Gv.exports;dC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gv.exports=o4(),Gv.exports}var l4=a4(),jf={},pC;function u4(){if(pC)return jf;pC=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.parse=a,jf.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function a(_,A){const T=new s,E=_.length;if(E<2)return T;const S=(A==null?void 0:A.decode)||p;let k=0;do{const L=_.indexOf("=",k);if(L===-1)break;const B=_.indexOf(";",k),q=B===-1?E:B;if(L>q){k=_.lastIndexOf(";",L-1)+1;continue}const V=u(_,k,L),M=c(_,L,V),O=_.slice(V,M);if(T[O]===void 0){let I=u(_,L+1,q),x=c(_,q,I);const z=S(_.slice(I,x));T[O]=z}k=q+1}while(k<E);return T}function u(_,A,T){do{const E=_.charCodeAt(A);if(E!==32&&E!==9)return A}while(++A<T);return T}function c(_,A,T){for(;A>T;){const E=_.charCodeAt(--A);if(E!==32&&E!==9)return A+1}return T}function f(_,A,T){const E=(T==null?void 0:T.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const S=E(A);if(!e.test(S))throw new TypeError(`argument val is invalid: ${A}`);let k=_+"="+S;if(!T)return k;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);k+="; Max-Age="+T.maxAge}if(T.domain){if(!t.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);k+="; Domain="+T.domain}if(T.path){if(!r.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);k+="; Path="+T.path}if(T.expires){if(!g(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);k+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(k+="; HttpOnly"),T.secure&&(k+="; Secure"),T.partitioned&&(k+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return k}function p(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function g(_){return i.call(_)==="[object Date]"}return jf}u4();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wN=n=>{throw TypeError(n)},c4=(n,e,t)=>e.has(n)||wN("Cannot "+t),Qv=(n,e,t)=>(c4(n,e,"read from private field"),t?t.call(n):e.get(n)),h4=(n,e,t)=>e.has(n)?wN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),mC="popstate";function f4(n={}){function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Md("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:hl(i)}return p4(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function An(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d4(){return Math.random().toString(36).substring(2,10)}function gC(n,e){return{usr:n.state,key:n.key,idx:e}}function Md(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?El(e):e,state:t,key:e&&e.key||r||d4()}}function hl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function El(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function p4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",c=null,f=p();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function p(){return(a.state||{idx:null}).idx}function g(){u="POP";let S=p(),k=S==null?null:S-f;f=S,c&&c({action:u,location:E.location,delta:k})}function _(S,k){u="PUSH";let L=Md(E.location,S,k);f=p()+1;let B=gC(L,f),q=E.createHref(L);try{a.pushState(B,"",q)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(q)}s&&c&&c({action:u,location:E.location,delta:1})}function A(S,k){u="REPLACE";let L=Md(E.location,S,k);f=p();let B=gC(L,f),q=E.createHref(L);a.replaceState(B,"",q),s&&c&&c({action:u,location:E.location,delta:0})}function T(S){let k=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof S=="string"?S:hl(S);return L=L.replace(/ $/,"%20"),ht(k,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,k)}let E={get action(){return u},get location(){return n(i,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(mC,g),c=S,()=>{i.removeEventListener(mC,g),c=null}},createHref(S){return e(i,S)},createURL:T,encodeLocation(S){let k=T(S);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:A,go(S){return a.go(S)}};return E}var ed,yC=class{constructor(n){if(h4(this,ed,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Qv(this,ed).has(n))return Qv(this,ed).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Qv(this,ed).set(n,e)}};ed=new WeakMap;var m4=new Set(["lazy","caseSensitive","path","id","index","children"]);function g4(n){return m4.has(n)}var y4=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function _4(n){return y4.has(n)}function v4(n){return n.index===!0}function Dg(n,e,t=[],r={}){return n.map((i,s)=>{let a=[...t,String(s)],u=typeof i.id=="string"?i.id:a.join("-");if(ht(i.index!==!0||!i.children,"Cannot specify children on an index route"),ht(!r[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),v4(i)){let c={...i,...e(i),id:u};return r[u]=c,c}else{let c={...i,...e(i),id:u,children:void 0};return r[u]=c,i.children&&(c.children=Dg(i.children,e,a,r)),c}})}function Ua(n,e,t="/"){return ug(n,e,t,!1)}function ug(n,e,t,r){let i=typeof e=="string"?El(e):e,s=cs(i.pathname||"/",t);if(s==null)return null;let a=RN(n);T4(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=O4(s);u=I4(a[c],f,r)}return u}function A4(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function RN(n,e=[],t=[],r=""){let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=ro([r,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(ht(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),RN(s.children,e,p,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:x4(f,s.index),routesMeta:p})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of CN(s.path))i(s,a,c)}),e}function CN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=CN(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function T4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:k4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var E4=/^:[\w-]+$/,b4=3,S4=2,w4=1,R4=10,C4=-2,_C=n=>n==="*";function x4(n,e){let t=n.split("/"),r=t.length;return t.some(_C)&&(r+=C4),e&&(r+=S4),t.filter(i=>!_C(i)).reduce((i,s)=>i+(E4.test(s)?b4:s===""?w4:R4),r)}function k4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function I4(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=Pg({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),_=c.route;if(!g&&f&&t&&!r[r.length-1].route.index&&(g=Pg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:ro([s,g.pathname]),pathnameBase:P4(ro([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=ro([s,g.pathnameBase]))}return a}function Pg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=N4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:g},_)=>{if(p==="*"){let T=u[_]||"";a=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const A=u[_];return g&&!A?f[p]=void 0:f[p]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function N4(n,e=!1,t=!0){An(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function O4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return An(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function cs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function M4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?El(n):n;return{pathname:t?t.startsWith("/")?t:D4(t,e):e,search:L4(r),hash:V4(i)}}function D4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Xv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function e_(n){let e=xN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function t_(n,e,t,r=!1){let i;typeof n=="string"?i=El(n):(i={...n},ht(!i.pathname||!i.pathname.includes("?"),Xv("?","pathname","search",i)),ht(!i.pathname||!i.pathname.includes("#"),Xv("#","pathname","hash",i)),ht(!i.search||!i.search.includes("#"),Xv("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?e[g]:"/"}let c=M4(i,u),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}var ro=n=>n.join("/").replace(/\/\/+/g,"/"),P4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),L4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,V4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Lg=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Dd(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var kN=["POST","PUT","PATCH","DELETE"],U4=new Set(kN),z4=["GET",...kN],B4=new Set(z4),j4=new Set([301,302,303,307,308]),F4=new Set([307,308]),Jv={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},H4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ff={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ME=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q4=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),IN="remix-router-transitions",NN=Symbol("ResetLoaderData");function $4(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ht(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],i=n.mapRouteProperties||q4,s={},a=Dg(n.routes,i,void 0,s),u,c=n.basename||"/",f=n.dataStrategy||Q4,p={unstable_middleware:!1,...n.future},g=null,_=new Set,A=null,T=null,E=null,S=n.hydrationData!=null,k=Ua(a,n.history.location,c),L=!1,B=null;if(k==null&&!n.patchRoutesOnNavigation){let $=rs(404,{pathname:n.history.location.pathname}),{matches:X,route:Z}=IC(a);k=X,B={[Z.id]:$}}k&&!n.hydrationData&&tr(k,a,n.history.location.pathname).active&&(k=null);let q;if(k)if(k.some($=>$.route.lazy))q=!1;else if(!k.some($=>$.route.loader))q=!0;else{let $=n.hydrationData?n.hydrationData.loaderData:null,X=n.hydrationData?n.hydrationData.errors:null;if(X){let Z=k.findIndex(he=>X[he.route.id]!==void 0);q=k.slice(0,Z+1).every(he=>!sT(he.route,$,X))}else q=k.every(Z=>!sT(Z.route,$,X))}else{q=!1,k=[];let $=tr(null,a,n.history.location.pathname);$.active&&$.matches&&(L=!0,k=$.matches)}let V,M={historyAction:n.history.action,location:n.history.location,matches:k,initialized:q,navigation:Jv,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||B,fetchers:new Map,blockers:new Map},O="POP",I=!1,x,z=!1,U=new Map,j=null,P=!1,ae=!1,fe=new Set,Y=new Map,ne=0,Te=-1,xe=new Map,F=new Set,se=new Map,ge=new Map,le=new Set,Re=new Map,Se,Le=null;function Kt(){if(g=n.history.listen(({action:$,location:X,delta:Z})=>{if(Se){Se(),Se=void 0;return}An(Re.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=Os({currentLocation:M.location,nextLocation:X,historyAction:$});if(he&&Z!=null){let ve=new Promise(we=>{Se=we});n.history.go(Z*-1),yr(he,{state:"blocked",location:X,proceed(){yr(he,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),ve.then(()=>n.history.go(Z))},reset(){let we=new Map(M.blockers);we.set(he,Ff),Ut({blockers:we})}});return}return Xt($,X)}),t){az(e,U);let $=()=>lz(e,U);e.addEventListener("pagehide",$),j=()=>e.removeEventListener("pagehide",$)}return M.initialized||Xt("POP",M.location,{initialHydration:!0}),V}function Rt(){g&&g(),j&&j(),_.clear(),x&&x.abort(),M.fetchers.forEach(($,X)=>Jt(X)),M.blockers.forEach(($,X)=>mi(X))}function mr($){return _.add($),()=>_.delete($)}function Ut($,X={}){M={...M,...$};let Z=[],he=[];M.fetchers.forEach((ve,we)=>{ve.state==="idle"&&(le.has(we)?Z.push(we):he.push(we))}),le.forEach(ve=>{!M.fetchers.has(ve)&&!Y.has(ve)&&Z.push(ve)}),[..._].forEach(ve=>ve(M,{deletedFetchers:Z,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),Z.forEach(ve=>Jt(ve)),he.forEach(ve=>M.fetchers.delete(ve))}function On($,X,{flushSync:Z}={}){var Ue,Fe;let he=M.actionData!=null&&M.navigation.formMethod!=null&&wi(M.navigation.formMethod)&&M.navigation.state==="loading"&&((Ue=$.state)==null?void 0:Ue._isRedirect)!==!0,ve;X.actionData?Object.keys(X.actionData).length>0?ve=X.actionData:ve=null:he?ve=M.actionData:ve=null;let we=X.loaderData?xC(M.loaderData,X.loaderData,X.matches||[],X.errors):M.loaderData,ze=M.blockers;ze.size>0&&(ze=new Map(ze),ze.forEach((ke,He)=>ze.set(He,Ff)));let Ne=I===!0||M.navigation.formMethod!=null&&wi(M.navigation.formMethod)&&((Fe=$.state)==null?void 0:Fe._isRedirect)!==!0;u&&(a=u,u=void 0),P||O==="POP"||(O==="PUSH"?n.history.push($,$.state):O==="REPLACE"&&n.history.replace($,$.state));let Me;if(O==="POP"){let ke=U.get(M.location.pathname);ke&&ke.has($.pathname)?Me={currentLocation:M.location,nextLocation:$}:U.has($.pathname)&&(Me={currentLocation:$,nextLocation:M.location})}else if(z){let ke=U.get(M.location.pathname);ke?ke.add($.pathname):(ke=new Set([$.pathname]),U.set(M.location.pathname,ke)),Me={currentLocation:M.location,nextLocation:$}}Ut({...X,actionData:ve,loaderData:we,historyAction:O,location:$,initialized:!0,navigation:Jv,revalidation:"idle",restoreScrollPosition:Ms($,X.matches||M.matches),preventScrollReset:Ne,blockers:ze},{viewTransitionOpts:Me,flushSync:Z===!0}),O="POP",I=!1,z=!1,P=!1,ae=!1,Le==null||Le.resolve(),Le=null}async function Zn($,X){if(typeof $=="number"){n.history.go($);return}let Z=iT(M.location,M.matches,c,$,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:he,submission:ve,error:we}=vC(!1,Z,X),ze=M.location,Ne=Md(M.location,he,X&&X.state);Ne={...Ne,...n.history.encodeLocation(Ne)};let Me=X&&X.replace!=null?X.replace:void 0,Ue="PUSH";Me===!0?Ue="REPLACE":Me===!1||ve!=null&&wi(ve.formMethod)&&ve.formAction===M.location.pathname+M.location.search&&(Ue="REPLACE");let Fe=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,ke=(X&&X.flushSync)===!0,He=Os({currentLocation:ze,nextLocation:Ne,historyAction:Ue});if(He){yr(He,{state:"blocked",location:Ne,proceed(){yr(He,{state:"proceeding",proceed:void 0,reset:void 0,location:Ne}),Zn($,X)},reset(){let it=new Map(M.blockers);it.set(He,Ff),Ut({blockers:it})}});return}await Xt(Ue,Ne,{submission:ve,pendingError:we,preventScrollReset:Fe,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:ke})}function di(){Le||(Le=uz()),Mr(),Ut({revalidation:"loading"});let $=Le.promise;return M.navigation.state==="submitting"?$:M.navigation.state==="idle"?(Xt(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),$):(Xt(O||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:z===!0}),$)}async function Xt($,X,Z){x&&x.abort(),x=null,O=$,P=(Z&&Z.startUninterruptedRevalidation)===!0,er(M.location,M.matches),I=(Z&&Z.preventScrollReset)===!0,z=(Z&&Z.enableViewTransition)===!0;let he=u||a,ve=Z&&Z.overrideNavigation,we=Z!=null&&Z.initialHydration&&M.matches&&M.matches.length>0&&!L?M.matches:Ua(he,X,c),ze=(Z&&Z.flushSync)===!0;if(we&&M.initialized&&!ae&&nz(M.location,X)&&!(Z&&Z.submission&&wi(Z.submission.formMethod))){On(X,{matches:we},{flushSync:ze});return}let Ne=tr(we,he,X.pathname);if(Ne.active&&Ne.matches&&(we=Ne.matches),!we){let{error:_t,notFoundMatches:ft,route:Ae}=Wr(X.pathname);On(X,{matches:ft,loaderData:{},errors:{[Ae.id]:_t}},{flushSync:ze});return}x=new AbortController;let Me=Bc(n.history,X,x.signal,Z&&Z.submission),Ue=new yC(n.unstable_getContext?await n.unstable_getContext():void 0),Fe;if(Z&&Z.pendingError)Fe=[cu(we).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&wi(Z.submission.formMethod)){let _t=await gs(Me,X,Z.submission,we,Ue,Ne.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:ze});if(_t.shortCircuited)return;if(_t.pendingActionResult){let[ft,Ae]=_t.pendingActionResult;if(Si(Ae)&&Dd(Ae.error)&&Ae.error.status===404){x=null,On(X,{matches:_t.matches,loaderData:{},errors:{[ft]:Ae.error}});return}}we=_t.matches||we,Fe=_t.pendingActionResult,ve=Zv(X,Z.submission),ze=!1,Ne.active=!1,Me=Bc(n.history,Me.url,Me.signal)}let{shortCircuited:ke,matches:He,loaderData:it,errors:St}=await ks(Me,X,we,Ue,Ne.active,ve,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,ze,Fe);ke||(x=null,On(X,{matches:He||we,...kC(Fe),loaderData:it,errors:St}))}async function gs($,X,Z,he,ve,we,ze,Ne={}){Mr();let Me=sz(X,Z);if(Ut({navigation:Me},{flushSync:Ne.flushSync===!0}),we){let ke=await Nt(he,X.pathname,$.signal);if(ke.type==="aborted")return{shortCircuited:!0};if(ke.type==="error"){let He=cu(ke.partialMatches).route.id;return{matches:ke.partialMatches,pendingActionResult:[He,{type:"error",error:ke.error}]}}else if(ke.matches)he=ke.matches;else{let{notFoundMatches:He,error:it,route:St}=Wr(X.pathname);return{matches:He,pendingActionResult:[St.id,{type:"error",error:it}]}}}let Ue,Fe=td(he,X);if(!Fe.route.action&&!Fe.route.lazy)Ue={type:"error",error:rs(405,{method:$.method,pathname:X.pathname,routeId:Fe.route.id})};else{let ke=Jc(i,s,$,he,Fe,ze?[]:r,ve),He=await gr($,ke,ve,null);if(Ue=He[Fe.route.id],!Ue){for(let it of he)if(He[it.route.id]){Ue=He[it.route.id];break}}if($.signal.aborted)return{shortCircuited:!0}}if(pu(Ue)){let ke;return Ne&&Ne.replace!=null?ke=Ne.replace:ke=wC(Ue.response.headers.get("Location"),new URL($.url),c)===M.location.pathname+M.location.search,await pi($,Ue,!0,{submission:Z,replace:ke}),{shortCircuited:!0}}if(Si(Ue)){let ke=cu(he,Fe.route.id);return(Ne&&Ne.replace)!==!0&&(O="PUSH"),{matches:he,pendingActionResult:[ke.route.id,Ue,Fe.route.id]}}return{matches:he,pendingActionResult:[Fe.route.id,Ue]}}async function ks($,X,Z,he,ve,we,ze,Ne,Me,Ue,Fe,ke){let He=we||Zv(X,ze),it=ze||Ne||OC(He),St=!P&&!Ue;if(ve){if(St){let en=on(ke);Ut({navigation:He,...en!==void 0?{actionData:en}:{}},{flushSync:Fe})}let Ve=await Nt(Z,X.pathname,$.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){let en=cu(Ve.partialMatches).route.id;return{matches:Ve.partialMatches,loaderData:{},errors:{[en]:Ve.error}}}else if(Ve.matches)Z=Ve.matches;else{let{error:en,notFoundMatches:_r,route:Qr}=Wr(X.pathname);return{matches:_r,loaderData:{},errors:{[Qr.id]:en}}}}let _t=u||a,{dsMatches:ft,revalidatingFetchers:Ae}=AC($,he,i,s,n.history,M,Z,it,X,Ue?[]:r,Ue===!0,ae,fe,le,se,F,_t,c,ke);if(Te=++ne,!n.dataStrategy&&!ft.some(Ve=>Ve.shouldLoad)&&Ae.length===0){let Ve=Lr();return On(X,{matches:Z,loaderData:{},errors:ke&&Si(ke[1])?{[ke[0]]:ke[1].error}:null,...kC(ke),...Ve?{fetchers:new Map(M.fetchers)}:{}},{flushSync:Fe}),{shortCircuited:!0}}if(St){let Ve={};if(!ve){Ve.navigation=He;let en=on(ke);en!==void 0&&(Ve.actionData=en)}Ae.length>0&&(Ve.fetchers=Is(Ae)),Ut(Ve,{flushSync:Fe})}Ae.forEach(Ve=>{Dr(Ve.key),Ve.controller&&Y.set(Ve.key,Ve.controller)});let K=()=>Ae.forEach(Ve=>Dr(Ve.key));x&&x.signal.addEventListener("abort",K);let{loaderResults:me,fetcherResults:Ce}=await Kr(ft,Ae,$,he);if($.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",K),Ae.forEach(Ve=>Y.delete(Ve.key));let tt=zm(me);if(tt)return await pi($,tt.result,!0,{replace:Me}),{shortCircuited:!0};if(tt=zm(Ce),tt)return F.add(tt.key),await pi($,tt.result,!0,{replace:Me}),{shortCircuited:!0};let{loaderData:zt,errors:Ct}=CC(M,Z,me,ke,Ae,Ce);Ue&&M.errors&&(Ct={...M.errors,...Ct});let Zt=Lr(),Bt=Tn(Te),mn=Zt||Bt||Ae.length>0;return{matches:Z,loaderData:zt,errors:Ct,...mn?{fetchers:new Map(M.fetchers)}:{}}}function on($){if($&&!Si($[1]))return{[$[0]]:$[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function Is($){return $.forEach(X=>{let Z=M.fetchers.get(X.key),he=Hf(void 0,Z?Z.data:void 0);M.fetchers.set(X.key,he)}),new Map(M.fetchers)}async function zi($,X,Z,he){Dr($);let ve=(he&&he.flushSync)===!0,we=u||a,ze=iT(M.location,M.matches,c,Z,X,he==null?void 0:he.relative),Ne=Ua(we,ze,c),Me=tr(Ne,we,ze);if(Me.active&&Me.matches&&(Ne=Me.matches),!Ne){et($,X,rs(404,{pathname:ze}),{flushSync:ve});return}let{path:Ue,submission:Fe,error:ke}=vC(!0,ze,he);if(ke){et($,X,ke,{flushSync:ve});return}let He=td(Ne,Ue),it=new yC(n.unstable_getContext?await n.unstable_getContext():void 0),St=(he&&he.preventScrollReset)===!0;if(Fe&&wi(Fe.formMethod)){await ys($,X,Ue,He,Ne,it,Me.active,ve,St,Fe);return}se.set($,{routeId:X,path:Ue}),await Bi($,X,Ue,He,Ne,it,Me.active,ve,St,Fe)}async function ys($,X,Z,he,ve,we,ze,Ne,Me,Ue){Mr(),se.delete($);function Fe(jt){if(!jt.route.action&&!jt.route.lazy){let Fi=rs(405,{method:Ue.formMethod,pathname:Z,routeId:X});return et($,X,Fi,{flushSync:Ne}),!0}return!1}if(!ze&&Fe(he))return;let ke=M.fetchers.get($);ut($,oz(Ue,ke),{flushSync:Ne});let He=new AbortController,it=Bc(n.history,Z,He.signal,Ue);if(ze){let jt=await Nt(ve,Z,it.signal,$);if(jt.type==="aborted")return;if(jt.type==="error"){et($,X,jt.error,{flushSync:Ne});return}else if(jt.matches){if(ve=jt.matches,he=td(ve,Z),Fe(he))return}else{et($,X,rs(404,{pathname:Z}),{flushSync:Ne});return}}Y.set($,He);let St=ne,_t=Jc(i,s,it,ve,he,r,we),Ae=(await gr(it,_t,we,$))[he.route.id];if(it.signal.aborted){Y.get($)===He&&Y.delete($);return}if(le.has($)){if(pu(Ae)||Si(Ae)){ut($,Ma(void 0));return}}else{if(pu(Ae))if(Y.delete($),Te>St){ut($,Ma(void 0));return}else return F.add($),ut($,Hf(Ue)),pi(it,Ae,!1,{fetcherSubmission:Ue,preventScrollReset:Me});if(Si(Ae)){et($,X,Ae.error);return}}let K=M.navigation.location||M.location,me=Bc(n.history,K,He.signal),Ce=u||a,tt=M.navigation.state!=="idle"?Ua(Ce,M.navigation.location,c):M.matches;ht(tt,"Didn't find any matches after fetcher action");let zt=++ne;xe.set($,zt);let Ct=Hf(Ue,Ae.data);M.fetchers.set($,Ct);let{dsMatches:Zt,revalidatingFetchers:Bt}=AC(me,we,i,s,n.history,M,tt,Ue,K,r,!1,ae,fe,le,se,F,Ce,c,[he.route.id,Ae]);Bt.filter(jt=>jt.key!==$).forEach(jt=>{let Fi=jt.key,yo=M.fetchers.get(Fi),rr=Hf(void 0,yo?yo.data:void 0);M.fetchers.set(Fi,rr),Dr(Fi),jt.controller&&Y.set(Fi,jt.controller)}),Ut({fetchers:new Map(M.fetchers)});let mn=()=>Bt.forEach(jt=>Dr(jt.key));He.signal.addEventListener("abort",mn);let{loaderResults:Ve,fetcherResults:en}=await Kr(Zt,Bt,me,we);if(He.signal.aborted)return;He.signal.removeEventListener("abort",mn),xe.delete($),Y.delete($),Bt.forEach(jt=>Y.delete(jt.key));let _r=zm(Ve);if(_r)return pi(me,_r.result,!1,{preventScrollReset:Me});if(_r=zm(en),_r)return F.add(_r.key),pi(me,_r.result,!1,{preventScrollReset:Me});let{loaderData:Qr,errors:Ps}=CC(M,tt,Ve,void 0,Bt,en);if(M.fetchers.has($)){let jt=Ma(Ae.data);M.fetchers.set($,jt)}Tn(zt),M.navigation.state==="loading"&&zt>Te?(ht(O,"Expected pending action"),x&&x.abort(),On(M.navigation.location,{matches:tt,loaderData:Qr,errors:Ps,fetchers:new Map(M.fetchers)})):(Ut({errors:Ps,loaderData:xC(M.loaderData,Qr,tt,Ps),fetchers:new Map(M.fetchers)}),ae=!1)}async function Bi($,X,Z,he,ve,we,ze,Ne,Me,Ue){let Fe=M.fetchers.get($);ut($,Hf(Ue,Fe?Fe.data:void 0),{flushSync:Ne});let ke=new AbortController,He=Bc(n.history,Z,ke.signal);if(ze){let Ae=await Nt(ve,Z,He.signal,$);if(Ae.type==="aborted")return;if(Ae.type==="error"){et($,X,Ae.error,{flushSync:Ne});return}else if(Ae.matches)ve=Ae.matches,he=td(ve,Z);else{et($,X,rs(404,{pathname:Z}),{flushSync:Ne});return}}Y.set($,ke);let it=ne,St=Jc(i,s,He,ve,he,r,we),ft=(await gr(He,St,we,$))[he.route.id];if(Y.get($)===ke&&Y.delete($),!He.signal.aborted){if(le.has($)){ut($,Ma(void 0));return}if(pu(ft))if(Te>it){ut($,Ma(void 0));return}else{F.add($),await pi(He,ft,!1,{preventScrollReset:Me});return}if(Si(ft)){et($,X,ft.error);return}ut($,Ma(ft.data))}}async function pi($,X,Z,{submission:he,fetcherSubmission:ve,preventScrollReset:we,replace:ze}={}){X.response.headers.has("X-Remix-Revalidate")&&(ae=!0);let Ne=X.response.headers.get("Location");ht(Ne,"Expected a Location header on the redirect Response"),Ne=wC(Ne,new URL($.url),c);let Me=Md(M.location,Ne,{_isRedirect:!0});if(t){let St=!1;if(X.response.headers.has("X-Remix-Reload-Document"))St=!0;else if(ME.test(Ne)){const _t=n.history.createURL(Ne);St=_t.origin!==e.location.origin||cs(_t.pathname,c)==null}if(St){ze?e.location.replace(Ne):e.location.assign(Ne);return}}x=null;let Ue=ze===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Fe,formAction:ke,formEncType:He}=M.navigation;!he&&!ve&&Fe&&ke&&He&&(he=OC(M.navigation));let it=he||ve;if(F4.has(X.response.status)&&it&&wi(it.formMethod))await Xt(Ue,Me,{submission:{...it,formAction:Ne},preventScrollReset:we||I,enableViewTransition:Z?z:void 0});else{let St=Zv(Me,he);await Xt(Ue,Me,{overrideNavigation:St,fetcherSubmission:ve,preventScrollReset:we||I,enableViewTransition:Z?z:void 0})}}async function gr($,X,Z,he){let ve,we={};try{ve=await X4(f,$,X,he,Z,!1)}catch(ze){return X.filter(Ne=>Ne.shouldLoad).forEach(Ne=>{we[Ne.route.id]={type:"error",error:ze}}),we}for(let[ze,Ne]of Object.entries(ve))if(rz(Ne)){let Me=Ne.result;we[ze]={type:"redirect",response:ez(Me,$,ze,X,c)}}else we[ze]=await Z4(Ne);return we}async function Kr($,X,Z,he){let ve=gr(Z,$,he,null),we=Promise.all(X.map(async Me=>{if(Me.matches&&Me.match&&Me.request&&Me.controller){let Fe=(await gr(Me.request,Me.matches,he,Me.key))[Me.match.route.id];return{[Me.key]:Fe}}else return Promise.resolve({[Me.key]:{type:"error",error:rs(404,{pathname:Me.path})}})})),ze=await ve,Ne=(await we).reduce((Me,Ue)=>Object.assign(Me,Ue),{});return{loaderResults:ze,fetcherResults:Ne}}function Mr(){ae=!0,se.forEach(($,X)=>{Y.has(X)&&fe.add(X),Dr(X)})}function ut($,X,Z={}){M.fetchers.set($,X),Ut({fetchers:new Map(M.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function et($,X,Z,he={}){let ve=cu(M.matches,X);Jt($),Ut({errors:{[ve.route.id]:Z},fetchers:new Map(M.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function Mn($){return ge.set($,(ge.get($)||0)+1),le.has($)&&le.delete($),M.fetchers.get($)||H4}function Jt($){let X=M.fetchers.get($);Y.has($)&&!(X&&X.state==="loading"&&xe.has($))&&Dr($),se.delete($),xe.delete($),F.delete($),le.delete($),fe.delete($),M.fetchers.delete($)}function Ns($){let X=(ge.get($)||0)-1;X<=0?(ge.delete($),le.add($)):ge.set($,X),Ut({fetchers:new Map(M.fetchers)})}function Dr($){let X=Y.get($);X&&(X.abort(),Y.delete($))}function Pr($){for(let X of $){let Z=Mn(X),he=Ma(Z.data);M.fetchers.set(X,he)}}function Lr(){let $=[],X=!1;for(let Z of F){let he=M.fetchers.get(Z);ht(he,`Expected fetcher: ${Z}`),he.state==="loading"&&(F.delete(Z),$.push(Z),X=!0)}return Pr($),X}function Tn($){let X=[];for(let[Z,he]of xe)if(he<$){let ve=M.fetchers.get(Z);ht(ve,`Expected fetcher: ${Z}`),ve.state==="loading"&&(Dr(Z),xe.delete(Z),X.push(Z))}return Pr(X),X.length>0}function En($,X){let Z=M.blockers.get($)||Ff;return Re.get($)!==X&&Re.set($,X),Z}function mi($){M.blockers.delete($),Re.delete($)}function yr($,X){let Z=M.blockers.get($)||Ff;ht(Z.state==="unblocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="proceeding"||Z.state==="blocked"&&X.state==="unblocked"||Z.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${X.state}`);let he=new Map(M.blockers);he.set($,X),Ut({blockers:he})}function Os({currentLocation:$,nextLocation:X,historyAction:Z}){if(Re.size===0)return;Re.size>1&&An(!1,"A router only supports one blocker at a time");let he=Array.from(Re.entries()),[ve,we]=he[he.length-1],ze=M.blockers.get(ve);if(!(ze&&ze.state==="proceeding")&&we({currentLocation:$,nextLocation:X,historyAction:Z}))return ve}function Wr($){let X=rs(404,{pathname:$}),Z=u||a,{matches:he,route:ve}=IC(Z);return{notFoundMatches:he,route:ve,error:X}}function ji($,X,Z){if(A=$,E=X,T=Z||null,!S&&M.navigation===Jv){S=!0;let he=Ms(M.location,M.matches);he!=null&&Ut({restoreScrollPosition:he})}return()=>{A=null,E=null,T=null}}function Yr($,X){return T&&T($,X.map(he=>A4(he,M.loaderData)))||$.key}function er($,X){if(A&&E){let Z=Yr($,X);A[Z]=E()}}function Ms($,X){if(A){let Z=Yr($,X),he=A[Z];if(typeof he=="number")return he}return null}function tr($,X,Z){if(n.patchRoutesOnNavigation)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:ug(X,Z,c,!0)}}else return{active:!0,matches:ug(X,Z,c,!0)||[]};return{active:!1,matches:null}}async function Nt($,X,Z,he){if(!n.patchRoutesOnNavigation)return{type:"success",matches:$};let ve=$;for(;;){let we=u==null,ze=u||a,Ne=s;try{await n.patchRoutesOnNavigation({signal:Z,path:X,matches:ve,fetcherKey:he,patch:(Fe,ke)=>{Z.aborted||TC(Fe,ke,ze,Ne,i)}})}catch(Fe){return{type:"error",error:Fe,partialMatches:ve}}finally{we&&!Z.aborted&&(a=[...a])}if(Z.aborted)return{type:"aborted"};let Me=Ua(ze,X,c);if(Me)return{type:"success",matches:Me};let Ue=ug(ze,X,c,!0);if(!Ue||ve.length===Ue.length&&ve.every((Fe,ke)=>Fe.route.id===Ue[ke].route.id))return{type:"success",matches:null};ve=Ue}}function nr($){s={},u=Dg($,i,void 0,s)}function Ds($,X){let Z=u==null;TC($,X,u||a,s,i),Z&&(a=[...a],Ut({}))}return V={get basename(){return c},get future(){return p},get state(){return M},get routes(){return a},get window(){return e},initialize:Kt,subscribe:mr,enableScrollRestoration:ji,navigate:Zn,fetch:zi,revalidate:di,createHref:$=>n.history.createHref($),encodeLocation:$=>n.history.encodeLocation($),getFetcher:Mn,deleteFetcher:Ns,dispose:Rt,getBlocker:En,deleteBlocker:mi,patchRoutes:Ds,_internalFetchControllers:Y,_internalSetRoutes:nr},V}function G4(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function iT(n,e,t,r,i,s){let a,u;if(i){a=[];for(let f of e)if(a.push(f),f.route.id===i){u=f;break}}else a=e,u=e[e.length-1];let c=t_(r||".",e_(a),cs(n.pathname,t)||n.pathname,s==="path");if(r==null&&(c.search=n.search,c.hash=n.hash),(r==null||r===""||r===".")&&u){let f=DE(c.search);if(u.route.index&&!f)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&f){let p=new URLSearchParams(c.search),g=p.getAll("index");p.delete("index"),g.filter(A=>A).forEach(A=>p.append("index",A));let _=p.toString();c.search=_?`?${_}`:""}}return t!=="/"&&(c.pathname=c.pathname==="/"?t:ro([t,c.pathname])),hl(c)}function vC(n,e,t){if(!t||!G4(t))return{path:e};if(t.formMethod&&!iz(t.formMethod))return{path:e,error:rs(405,{method:t.formMethod})};let r=()=>({path:e,error:rs(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=VN(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!wi(s))return r();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((_,[A,T])=>`${_}${A}=${T}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!wi(s))return r();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}ht(typeof FormData=="function","FormData is not available in this environment");let u,c;if(t.formData)u=aT(t.formData),c=t.formData;else if(t.body instanceof FormData)u=aT(t.body),c=t.body;else if(t.body instanceof URLSearchParams)u=t.body,c=RC(u);else if(t.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(t.body),c=RC(u)}catch{return r()}let f={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(wi(f.formMethod))return{path:e,submission:f};let p=El(e);return n&&p.search&&DE(p.search)&&u.append("index",""),p.search=`?${u}`,{path:hl(p),submission:f}}function AC(n,e,t,r,i,s,a,u,c,f,p,g,_,A,T,E,S,k,L){var j;let B=L?Si(L[1])?L[1].error:L[1].data:void 0,q=i.createURL(s.location),V=i.createURL(c),M;if(p&&s.errors){let P=Object.keys(s.errors)[0];M=a.findIndex(ae=>ae.route.id===P)}else if(L&&Si(L[1])){let P=L[0];M=a.findIndex(ae=>ae.route.id===P)-1}let O=L?L[1].statusCode:void 0,I=O&&O>=400,x={currentUrl:q,currentParams:((j=s.matches[0])==null?void 0:j.params)||{},nextUrl:V,nextParams:a[0].params,...u,actionResult:B,actionStatus:O},z=a.map((P,ae)=>{let{route:fe}=P,Y=null;if(M!=null&&ae>M?Y=!1:fe.lazy?Y=!0:fe.loader==null?Y=!1:p?Y=sT(fe,s.loaderData,s.errors):K4(s.loaderData,s.matches[ae],P)&&(Y=!0),Y!==null)return oT(t,r,n,P,f,e,Y);let ne=I?!1:g||q.pathname+q.search===V.pathname+V.search||q.search!==V.search||W4(s.matches[ae],P),Te={...x,defaultShouldRevalidate:ne},xe=Vg(P,Te);return oT(t,r,n,P,f,e,xe,Te)}),U=[];return T.forEach((P,ae)=>{if(p||!a.some(se=>se.route.id===P.routeId)||A.has(ae))return;let fe=Ua(S,P.path,k);if(!fe){U.push({key:ae,routeId:P.routeId,path:P.path,matches:null,match:null,request:null,controller:null});return}if(E.has(ae))return;let Y=s.fetchers.get(ae),ne=td(fe,P.path),Te=new AbortController,xe=Bc(i,P.path,Te.signal),F=null;if(_.has(ae))_.delete(ae),F=Jc(t,r,xe,fe,ne,f,e);else if(Y&&Y.state!=="idle"&&Y.data===void 0)g&&(F=Jc(t,r,xe,fe,ne,f,e));else{let se={...x,defaultShouldRevalidate:I?!1:g};Vg(ne,se)&&(F=Jc(t,r,xe,fe,ne,f,e,se))}F&&U.push({key:ae,routeId:P.routeId,path:P.path,matches:F,match:ne,request:xe,controller:Te})}),{dsMatches:z,revalidatingFetchers:U}}function sT(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function K4(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function W4(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Vg(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function TC(n,e,t,r,i){let s;if(n){let c=r[n];ht(c,`No route found to patch children into: routeId = ${n}`),c.children||(c.children=[]),s=c.children}else s=t;let a=e.filter(c=>!s.some(f=>ON(c,f))),u=Dg(a,i,[n||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...u)}function ON(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>ON(t,s))}):!1}var EC=new WeakMap,MN=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let i=t[e.id];if(ht(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[n];if(!s)return;let a=EC.get(i);a||(a={},EC.set(i,a));let u=a[n];if(u)return u;let c=(async()=>{let f=g4(n),g=i[n]!==void 0&&n!=="hasErrorBoundary";if(f)An(!f,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),a[n]=Promise.resolve();else if(g)An(!1,`Route "${i.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let _=await s();_!=null&&(Object.assign(i,{[n]:_}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[n]=void 0,Object.values(i.lazy).every(_=>_===void 0)&&(i.lazy=void 0))})();return a[n]=c,c},bC=new WeakMap;function Y4(n,e,t,r,i){let s=t[n.id];if(ht(s,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let p=bC.get(s);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let g=(async()=>{ht(typeof n.lazy=="function","No lazy route function found");let _=await n.lazy(),A={};for(let T in _){let E=_[T];if(E===void 0)continue;let S=_4(T),L=s[T]!==void 0&&T!=="hasErrorBoundary";S?An(!S,"Route property "+T+" is not a supported property to be returned from a lazy route function. This property will be ignored."):L?An(!L,`Route "${s.id}" has a static property "${T}" defined but its lazy function is also returning a value for this property. The lazy route property "${T}" will be ignored.`):A[T]=E}Object.assign(s,A),Object.assign(s,{...r(s),lazy:void 0})})();return bC.set(s,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let a=Object.keys(n.lazy),u=[],c;for(let p of a){if(i&&i.includes(p))continue;let g=MN({key:p,route:n,manifest:t,mapRouteProperties:r});g&&(u.push(g),p===e&&(c=g))}let f=u.length>0?Promise.all(u).then(()=>{}):void 0;return f==null||f.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:c}}async function SC(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{t[e[s].route.id]=i}),t}async function Q4(n){return n.matches.some(e=>e.route.unstable_middleware)?DN(n,!1,()=>SC(n),(e,t)=>({[t]:{type:"error",result:e}})):SC(n)}async function DN(n,e,t,r){let{matches:i,request:s,params:a,context:u}=n,c={handlerResult:void 0};try{let f=i.flatMap(g=>g.route.unstable_middleware?g.route.unstable_middleware.map(_=>[g.route.id,_]):[]),p=await PN({request:s,params:a,context:u},f,e,c,t);return e?p:c.handlerResult}catch(f){if(!c.middlewareError)throw f;let p=await r(c.middlewareError.error,c.middlewareError.routeId);return c.handlerResult?Object.assign(c.handlerResult,p):p}}async function PN(n,e,t,r,i,s=0){let{request:a}=n;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let u=e[s];if(!u)return r.handlerResult=await i(),r.handlerResult;let[c,f]=u,p=!1,g,_=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");p=!0,await PN(n,e,t,r,i,s+1)};try{let A=await f({request:n.request,params:n.params,context:n.context},_);return p?A===void 0?g:A:_()}catch(A){throw r.middlewareError?r.middlewareError.error!==A&&(r.middlewareError={routeId:c,error:A}):r.middlewareError={routeId:c,error:A},A}}function LN(n,e,t,r,i){let s=MN({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:n}),a=Y4(r.route,wi(t.method)?"action":"loader",e,n,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function oT(n,e,t,r,i,s,a,u=null){let c=!1,f=LN(n,e,t,r,i);return{...r,_lazyPromises:f,shouldLoad:a,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler(p){return c=!0,u?typeof p=="boolean"?Vg(r,{...u,defaultShouldRevalidate:p}):Vg(r,u):a},resolve(p){return c||a||p&&t.method==="GET"&&(r.route.lazy||r.route.loader)?J4({request:t,match:r,lazyHandlerPromise:f==null?void 0:f.handler,lazyRoutePromise:f==null?void 0:f.route,handlerOverride:p,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Jc(n,e,t,r,i,s,a,u=null){return r.map(c=>c.route.id!==i.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler:()=>!1,_lazyPromises:LN(n,e,t,c,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:oT(n,e,t,c,s,a,!0,u))}async function X4(n,e,t,r,i,s){t.some(f=>{var p;return(p=f._lazyPromises)==null?void 0:p.middleware})&&await Promise.all(t.map(f=>{var p;return(p=f._lazyPromises)==null?void 0:p.middleware}));let a={request:e,params:t[0].params,context:i,matches:t},c=await n({...a,fetcherKey:r,unstable_runClientMiddleware:f=>{let p=a;return DN(p,!1,()=>f({...p,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(g,_)=>({[_]:{type:"error",result:g}}))}});try{await Promise.all(t.flatMap(f=>{var p,g;return[(p=f._lazyPromises)==null?void 0:p.handler,(g=f._lazyPromises)==null?void 0:g.route]}))}catch{}return c}async function J4({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let a,u,c=wi(n.method),f=c?"action":"loader",p=g=>{let _,A=new Promise((S,k)=>_=k);u=()=>_(),n.signal.addEventListener("abort",u);let T=S=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${f}" [routeId: ${e.route.id}]`)):g({request:n,params:e.params,context:s},...S!==void 0?[S]:[]),E=(async()=>{try{return{type:"data",result:await(i?i(k=>T(k)):T())}}catch(S){return{type:"error",result:S}}})();return Promise.race([E,A])};try{let g=c?e.route.action:e.route.loader;if(t||r)if(g){let _,[A]=await Promise.all([p(g).catch(T=>{_=T}),t,r]);if(_!==void 0)throw _;a=A}else{await t;let _=c?e.route.action:e.route.loader;if(_)[a]=await Promise.all([p(_),r]);else if(f==="action"){let A=new URL(n.url),T=A.pathname+A.search;throw rs(405,{method:n.method,pathname:T,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(g)a=await p(g);else{let _=new URL(n.url),A=_.pathname+_.search;throw rs(404,{pathname:A})}}catch(g){return{type:"error",result:g}}finally{u&&n.signal.removeEventListener("abort",u)}return a}async function Z4(n){var r,i,s,a,u,c;let{result:e,type:t}=n;if(UN(e)){let f;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Lg(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:"data",data:f,statusCode:e.status,headers:e.headers}}return t==="error"?NC(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Lg(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:Dd(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Dd(e)?e.status:void 0}:NC(e)?{type:"data",data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function ez(n,e,t,r,i){let s=n.headers.get("Location");if(ht(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!ME.test(s)){let a=r.slice(0,r.findIndex(u=>u.route.id===t)+1);s=iT(new URL(e.url),a,i,s),n.headers.set("Location",s)}return n}function wC(n,e,t){if(ME.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=cs(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return n}function Bc(n,e,t,r){let i=n.createURL(VN(e)).toString(),s={signal:t};if(r&&wi(r.formMethod)){let{formMethod:a,formEncType:u}=r;s.method=a.toUpperCase(),u==="application/json"?(s.headers=new Headers({"Content-Type":u}),s.body=JSON.stringify(r.json)):u==="text/plain"?s.body=r.text:u==="application/x-www-form-urlencoded"&&r.formData?s.body=aT(r.formData):s.body=r.formData}return new Request(i,s)}function aT(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function RC(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function tz(n,e,t,r=!1,i=!1){let s={},a=null,u,c=!1,f={},p=t&&Si(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let _=g.route.id,A=e[_];if(ht(!pu(A),"Cannot handle redirect results in processLoaderData"),Si(A)){let T=A.error;if(p!==void 0&&(T=p,p=void 0),a=a||{},i)a[_]=T;else{let E=cu(n,_);a[E.route.id]==null&&(a[E.route.id]=T)}r||(s[_]=NN),c||(c=!0,u=Dd(A.error)?A.error.status:500),A.headers&&(f[_]=A.headers)}else s[_]=A.data,A.statusCode&&A.statusCode!==200&&!c&&(u=A.statusCode),A.headers&&(f[_]=A.headers)}),p!==void 0&&t&&(a={[t[0]]:p},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:u||200,loaderHeaders:f}}function CC(n,e,t,r,i,s){let{loaderData:a,errors:u}=tz(e,t,r);return i.filter(c=>!c.matches||c.matches.some(f=>f.shouldLoad)).forEach(c=>{let{key:f,match:p,controller:g}=c,_=s[f];if(ht(_,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Si(_)){let A=cu(n.matches,p==null?void 0:p.route.id);u&&u[A.route.id]||(u={...u,[A.route.id]:_.error}),n.fetchers.delete(f)}else if(pu(_))ht(!1,"Unhandled fetcher revalidation redirect");else{let A=Ma(_.data);n.fetchers.set(f,A)}}),{loaderData:a,errors:u}}function xC(n,e,t,r){let i=Object.entries(e).filter(([,s])=>s!==NN).reduce((s,[a,u])=>(s[a]=u,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&s.route.loader&&(i[a]=n[a]),r&&r.hasOwnProperty(a))break}return i}function kC(n){return n?Si(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function cu(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function IC(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rs(n,{pathname:e,routeId:t,method:r,type:i,message:s}={}){let a="Unknown Server Error",u="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&e&&t?u=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(u="Unable to encode submission body")):n===403?(a="Forbidden",u=`Route "${t}" does not match URL "${e}"`):n===404?(a="Not Found",u=`No route matches URL "${e}"`):n===405&&(a="Method Not Allowed",r&&e&&t?u=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(u=`Invalid request method "${r.toUpperCase()}"`)),new Lg(n||500,a,new Error(u),!0)}function zm(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(pu(i))return{key:r,result:i}}}function VN(n){let e=typeof n=="string"?El(n):n;return hl({...e,hash:""})}function nz(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function rz(n){return UN(n.result)&&j4.has(n.result.status)}function Si(n){return n.type==="error"}function pu(n){return(n&&n.type)==="redirect"}function NC(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function UN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function iz(n){return B4.has(n.toUpperCase())}function wi(n){return U4.has(n.toUpperCase())}function DE(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function td(n,e){let t=typeof e=="string"?El(e).search:e.search;if(n[n.length-1].route.index&&DE(t||""))return n[n.length-1];let r=xN(n);return r[r.length-1]}function OC(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:s,json:a}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:a,text:void 0}}}function Zv(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function sz(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Hf(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function oz(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Ma(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function az(n,e){try{let t=n.sessionStorage.getItem(IN);if(t){let r=JSON.parse(t);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function lz(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(IN,JSON.stringify(t))}catch(r){An(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function uz(){let n,e,t=new Promise((r,i)=>{n=async s=>{r(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Gu=G.createContext(null);Gu.displayName="DataRouter";var lp=G.createContext(null);lp.displayName="DataRouterState";var PE=G.createContext({isTransitioning:!1});PE.displayName="ViewTransition";var zN=G.createContext(new Map);zN.displayName="Fetchers";var cz=G.createContext(null);cz.displayName="Await";var xs=G.createContext(null);xs.displayName="Navigation";var n_=G.createContext(null);n_.displayName="Location";var ps=G.createContext({outlet:null,matches:[],isDataRoute:!1});ps.displayName="Route";var LE=G.createContext(null);LE.displayName="RouteError";function hz(n,{relative:e}={}){ht(Nh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=G.useContext(xs),{hash:i,pathname:s,search:a}=up(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:ro([t,s])),r.createHref({pathname:u,search:a,hash:i})}function Nh(){return G.useContext(n_)!=null}function oa(){return ht(Nh(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(n_).location}var BN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jN(n){G.useContext(xs).static||G.useLayoutEffect(n)}function bl(){let{isDataRoute:n}=G.useContext(ps);return n?wz():fz()}function fz(){ht(Nh(),"useNavigate() may be used only in the context of a <Router> component.");let n=G.useContext(Gu),{basename:e,navigator:t}=G.useContext(xs),{matches:r}=G.useContext(ps),{pathname:i}=oa(),s=JSON.stringify(e_(r)),a=G.useRef(!1);return jN(()=>{a.current=!0}),G.useCallback((c,f={})=>{if(An(a.current,BN),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=t_(c,JSON.parse(s),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ro([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,s,i,n])}var dz=G.createContext(null);function pz(n){let e=G.useContext(ps).outlet;return e&&G.createElement(dz.Provider,{value:n},e)}function VE(){let{matches:n}=G.useContext(ps),e=n[n.length-1];return e?e.params:{}}function up(n,{relative:e}={}){let{matches:t}=G.useContext(ps),{pathname:r}=oa(),i=JSON.stringify(e_(t));return G.useMemo(()=>t_(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function mz(n,e,t,r){ht(Nh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=G.useContext(xs),{matches:a}=G.useContext(ps),u=a[a.length-1],c=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let L=g&&g.path||"";qN(f,!g||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let _=oa(),A;A=_;let T=A.pathname||"/",E=T;if(p!=="/"){let L=p.replace(/^\//,"").split("/");E="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let S=!s&&t&&t.matches&&t.matches.length>0?t.matches:Ua(n,{pathname:E});return An(g||S!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),An(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Az(S&&S.map(L=>Object.assign({},L,{params:Object.assign({},c,L.params),pathname:ro([p,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:ro([p,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,t,r)}function gz(){let n=Sz(),e=Dd(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=G.createElement(G.Fragment,null,G.createElement("p",null,"💿 Hey developer 👋"),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:s},"ErrorBoundary")," or"," ",G.createElement("code",{style:s},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:i},t):null,a)}var yz=G.createElement(gz,null),_z=class extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?G.createElement(ps.Provider,{value:this.props.routeContext},G.createElement(LE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vz({routeContext:n,match:e,children:t}){let r=G.useContext(Gu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(ps.Provider,{value:n},t)}function Az(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let c=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);ht(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let f=i[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:p,errors:g}=t,_=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||_){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,f,p)=>{let g,_=!1,A=null,T=null;t&&(g=s&&f.route.id?s[f.route.id]:void 0,A=f.route.errorElement||yz,a&&(u<0&&p===0?(qN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):u===p&&(_=!0,T=f.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,p+1)),S=()=>{let k;return g?k=A:_?k=T:f.route.Component?k=G.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=c,G.createElement(vz,{match:f,routeContext:{outlet:c,matches:E,isDataRoute:t!=null},children:k})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?G.createElement(_z,{location:t.location,revalidation:t.revalidation,component:A,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function UE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tz(n){let e=G.useContext(Gu);return ht(e,UE(n)),e}function FN(n){let e=G.useContext(lp);return ht(e,UE(n)),e}function Ez(n){let e=G.useContext(ps);return ht(e,UE(n)),e}function zE(n){let e=Ez(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function bz(){return zE("useRouteId")}function HN(){return FN("useNavigation").navigation}function Sz(){var r;let n=G.useContext(LE),e=FN("useRouteError"),t=zE("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function wz(){let{router:n}=Tz("useNavigate"),e=zE("useNavigate"),t=G.useRef(!1);return jN(()=>{t.current=!0}),G.useCallback(async(i,s={})=>{An(t.current,BN),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var MC={};function qN(n,e,t){!e&&!MC[n]&&(MC[n]=!0,An(!1,t))}var DC={};function PC(n,e){!n&&!DC[e]&&(DC[e]=!0,console.warn(e))}function Rz(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&An(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:G.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&An(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:G.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&An(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:G.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var Cz=["HydrateFallback","hydrateFallbackElement"],xz=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function kz({router:n,flushSync:e}){let[t,r]=G.useState(n.state),[i,s]=G.useState(),[a,u]=G.useState({isTransitioning:!1}),[c,f]=G.useState(),[p,g]=G.useState(),[_,A]=G.useState(),T=G.useRef(new Map),E=G.useCallback((B,{deletedFetchers:q,flushSync:V,viewTransitionOpts:M})=>{B.fetchers.forEach((I,x)=>{I.data!==void 0&&T.current.set(x,I.data)}),q.forEach(I=>T.current.delete(I)),PC(V===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(PC(M==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!O){e&&V?e(()=>r(B)):G.startTransition(()=>r(B));return}if(e&&V){e(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let I=n.window.document.startViewTransition(()=>{e(()=>r(B))});I.finished.finally(()=>{e(()=>{f(void 0),g(void 0),s(void 0),u({isTransitioning:!1})})}),e(()=>g(I));return}p?(c&&c.resolve(),p.skipTransition(),A({state:B,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(s(B),u({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,p,c]);G.useLayoutEffect(()=>n.subscribe(E),[n,E]),G.useEffect(()=>{a.isTransitioning&&!a.flushSync&&f(new xz)},[a]),G.useEffect(()=>{if(c&&i&&n.window){let B=i,q=c.promise,V=n.window.document.startViewTransition(async()=>{G.startTransition(()=>r(B)),await q});V.finished.finally(()=>{f(void 0),g(void 0),s(void 0),u({isTransitioning:!1})}),g(V)}},[i,c,n.window]),G.useEffect(()=>{c&&i&&t.location.key===i.location.key&&c.resolve()},[c,p,t.location,i]),G.useEffect(()=>{!a.isTransitioning&&_&&(s(_.state),u({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),A(void 0))},[a.isTransitioning,_]);let S=G.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:B=>n.navigate(B),push:(B,q,V)=>n.navigate(B,{state:q,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(B,q,V)=>n.navigate(B,{replace:!0,state:q,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),k=n.basename||"/",L=G.useMemo(()=>({router:n,navigator:S,static:!1,basename:k}),[n,S,k]);return G.createElement(G.Fragment,null,G.createElement(Gu.Provider,{value:L},G.createElement(lp.Provider,{value:t},G.createElement(zN.Provider,{value:T.current},G.createElement(PE.Provider,{value:a},G.createElement(Dz,{basename:k,location:t.location,navigationType:t.historyAction,navigator:S},G.createElement(Iz,{routes:n.routes,future:n.future,state:t})))))),null)}var Iz=G.memo(Nz);function Nz({routes:n,future:e,state:t}){return mz(n,void 0,t,e)}function Oz({to:n,replace:e,state:t,relative:r}){ht(Nh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=G.useContext(xs);An(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=G.useContext(ps),{pathname:a}=oa(),u=bl(),c=t_(n,e_(s),a,r==="path"),f=JSON.stringify(c);return G.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:r})},[u,f,r,e,t]),null}function Mz(n){return pz(n.context)}function Dz({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){ht(!Nh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),u=G.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=El(t));let{pathname:c="/",search:f="",hash:p="",state:g=null,key:_="default"}=t,A=G.useMemo(()=>{let T=cs(c,a);return T==null?null:{location:{pathname:T,search:f,hash:p,state:g,key:_},navigationType:r}},[a,c,f,p,g,_,r]);return An(A!=null,`<Router basename="${a}"> is not able to match the URL "${c}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:G.createElement(xs.Provider,{value:u},G.createElement(n_.Provider,{children:e,value:A}))}var cg="get",hg="application/x-www-form-urlencoded";function r_(n){return n!=null&&typeof n.tagName=="string"}function Pz(n){return r_(n)&&n.tagName.toLowerCase()==="button"}function Lz(n){return r_(n)&&n.tagName.toLowerCase()==="form"}function Vz(n){return r_(n)&&n.tagName.toLowerCase()==="input"}function Uz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zz(n,e){return n.button===0&&(!e||e==="_self")&&!Uz(n)}var Bm=null;function Bz(){if(Bm===null)try{new FormData(document.createElement("form"),0),Bm=!1}catch{Bm=!0}return Bm}var jz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eA(n){return n!=null&&!jz.has(n)?(An(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hg}"`),null):n}function Fz(n,e){let t,r,i,s,a;if(Lz(n)){let u=n.getAttribute("action");r=u?cs(u,e):null,t=n.getAttribute("method")||cg,i=eA(n.getAttribute("enctype"))||hg,s=new FormData(n)}else if(Pz(n)||Vz(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?cs(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||cg,i=eA(n.getAttribute("formenctype"))||eA(u.getAttribute("enctype"))||hg,s=new FormData(u,n),!Bz()){let{name:f,type:p,value:g}=n;if(p==="image"){let _=f?`${f}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else f&&s.append(f,g)}}else{if(r_(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cg,r=null,i=hg,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}function BE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Hz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qz(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $z(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await Hz(s,t);return a.links?a.links():[]}return[]}));return Yz(r.flat(1).filter(qz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function LC(n,e,t,r,i,s){let a=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,u=(c,f)=>{var p;return t[f].pathname!==c.pathname||((p=t[f].route.path)==null?void 0:p.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,f)=>a(c,f)||u(c,f)):s==="data"?e.filter((c,f)=>{var g;let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let _=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Gz(n,e,{includeHydrateFallback:t}={}){return Kz(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Kz(n){return[...new Set(n)]}function Wz(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Yz(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(Wz(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}var Qz=new Set([100,101,204,205]);function Xz(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&cs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function $N(){let n=G.useContext(Gu);return BE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Jz(){let n=G.useContext(lp);return BE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var jE=G.createContext(void 0);jE.displayName="FrameworkContext";function GN(){let n=G.useContext(jE);return BE(n,"You must render this element inside a <HydratedRouter> element"),n}function Zz(n,e){let t=G.useContext(jE),[r,i]=G.useState(!1),[s,a]=G.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=e,_=G.useRef(null);G.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let E=k=>{k.forEach(L=>{a(L.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[n]),G.useEffect(()=>{if(r){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[r]);let A=()=>{i(!0)},T=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,_,{}]:[s,_,{onFocus:qf(u,A),onBlur:qf(c,T),onMouseEnter:qf(f,A),onMouseLeave:qf(p,T),onTouchStart:qf(g,A)}]:[!1,_,{}]}function qf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function eB({page:n,...e}){let{router:t}=$N(),r=G.useMemo(()=>Ua(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?G.createElement(nB,{page:n,matches:r,...e}):null}function tB(n){let{manifest:e,routeModules:t}=GN(),[r,i]=G.useState([]);return G.useEffect(()=>{let s=!1;return $z(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function nB({page:n,matches:e,...t}){let r=oa(),{manifest:i,routeModules:s}=GN(),{basename:a}=$N(),{loaderData:u,matches:c}=Jz(),f=G.useMemo(()=>LC(n,e,c,i,r,"data"),[n,e,c,i,r]),p=G.useMemo(()=>LC(n,e,c,i,r,"assets"),[n,e,c,i,r]),g=G.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,E=!1;if(e.forEach(k=>{var B;let L=i.routes[k.route.id];!L||!L.hasLoader||(!f.some(q=>q.route.id===k.route.id)&&k.route.id in u&&((B=s[k.route.id])!=null&&B.shouldRevalidate)||L.hasClientLoader?E=!0:T.add(k.route.id))}),T.size===0)return[];let S=Xz(n,a);return E&&T.size>0&&S.searchParams.set("_routes",e.filter(k=>T.has(k.route.id)).map(k=>k.route.id).join(",")),[S.pathname+S.search]},[a,u,r,i,f,e,n,s]),_=G.useMemo(()=>Gz(p,i),[p,i]),A=tB(p);return G.createElement(G.Fragment,null,g.map(T=>G.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),_.map(T=>G.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),A.map(({key:T,link:E})=>G.createElement("link",{key:T,...E})))}function rB(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var KN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KN&&(window.__reactRouterVersion="7.5.3")}catch{}function iB(n,e){return $4({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:f4({window:e==null?void 0:e.window}),hydrationData:sB(),routes:n,mapRouteProperties:Rz,hydrationRouteProperties:Cz,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function sB(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:oB(n.errors)}),n}function oB(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new Lg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[r]=a}catch{}}if(t[r]==null){let s=new Error(i.message);s.stack="",t[r]=s}}else t[r]=i;return t}var WN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YN=G.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:u,target:c,to:f,preventScrollReset:p,viewTransition:g,..._},A){let{basename:T}=G.useContext(xs),E=typeof f=="string"&&WN.test(f),S,k=!1;if(typeof f=="string"&&E&&(S=f,KN))try{let x=new URL(window.location.href),z=f.startsWith("//")?new URL(x.protocol+f):new URL(f),U=cs(z.pathname,T);z.origin===x.origin&&U!=null?f=U+z.search+z.hash:k=!0}catch{An(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=hz(f,{relative:i}),[B,q,V]=Zz(r,_),M=cB(f,{replace:a,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:g});function O(x){e&&e(x),x.defaultPrevented||M(x)}let I=G.createElement("a",{..._,...V,href:S||L,onClick:k||s?e:O,ref:rB(A,q),target:c,"data-discover":!E&&t==="render"?"true":void 0});return B&&!E?G.createElement(G.Fragment,null,I,G.createElement(eB,{page:L})):I});YN.displayName="Link";var aB=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:u,children:c,...f},p){let g=up(a,{relative:f.relative}),_=oa(),A=G.useContext(lp),{navigator:T,basename:E}=G.useContext(xs),S=A!=null&&mB(g)&&u===!0,k=T.encodeLocation?T.encodeLocation(g).pathname:g.pathname,L=_.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(L=L.toLowerCase(),B=B?B.toLowerCase():null,k=k.toLowerCase()),B&&E&&(B=cs(B,E)||B);const q=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let V=L===k||!i&&L.startsWith(k)&&L.charAt(q)==="/",M=B!=null&&(B===k||!i&&B.startsWith(k)&&B.charAt(k.length)==="/"),O={isActive:V,isPending:M,isTransitioning:S},I=V?e:void 0,x;typeof r=="function"?x=r(O):x=[r,V?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let z=typeof s=="function"?s(O):s;return G.createElement(YN,{...f,"aria-current":I,className:x,ref:p,style:z,to:a,viewTransition:u},typeof c=="function"?c(O):c)});aB.displayName="NavLink";var lB=G.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=cg,action:u,onSubmit:c,relative:f,preventScrollReset:p,viewTransition:g,..._},A)=>{let T=dB(),E=pB(u,{relative:f}),S=a.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&WN.test(u),L=B=>{if(c&&c(B),B.defaultPrevented)return;B.preventDefault();let q=B.nativeEvent.submitter,V=(q==null?void 0:q.getAttribute("formmethod"))||a;T(q||B.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:i,state:s,relative:f,preventScrollReset:p,viewTransition:g})};return G.createElement("form",{ref:A,method:S,action:E,onSubmit:r?c:L,..._,"data-discover":!k&&n==="render"?"true":void 0})});lB.displayName="Form";function uB(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QN(n){let e=G.useContext(Gu);return ht(e,uB(n)),e}function cB(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let u=bl(),c=oa(),f=up(n,{relative:s});return G.useCallback(p=>{if(zz(p,e)){p.preventDefault();let g=t!==void 0?t:hl(c)===hl(f);u(n,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,u,f,t,r,e,n,i,s,a])}var hB=0,fB=()=>`__${String(++hB)}__`;function dB(){let{router:n}=QN("useSubmit"),{basename:e}=G.useContext(xs),t=bz();return G.useCallback(async(r,i={})=>{let{action:s,method:a,encType:u,formData:c,body:f}=Fz(r,e);if(i.navigate===!1){let p=i.fetcherKey||fB();await n.fetch(p,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||a,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||a,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function pB(n,{relative:e}={}){let{basename:t}=G.useContext(xs),r=G.useContext(ps);ht(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...up(n||".",{relative:e})},a=oa();if(n==null){s.search=a.search;let u=new URLSearchParams(s.search),c=u.getAll("index");if(c.some(p=>p==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:ro([t,s.pathname])),hl(s)}function mB(n,e={}){let t=G.useContext(PE);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=QN("useViewTransitionState"),i=up(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=cs(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=cs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Pg(i.pathname,a)!=null||Pg(i.pathname,s)!=null}new TextEncoder;[...Qz];var XN=SN();const gB=bN(XN);/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yB(n){return G.createElement(kz,{flushSync:XN.flushSync,...n})}const _B=()=>{};var VC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vB=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ZN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let _=(u&15)<<2|f>>6,A=f&63;c||(A=64,a||(_=64)),r.push(t[p],t[g],t[_],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||f==null||g==null)throw new AB;const _=s<<2|u>>4;if(r.push(_),f!==64){const A=u<<4&240|f>>2;if(r.push(A),g!==64){const T=f<<6&192|g;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class AB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TB=function(n){const e=JN(n);return ZN.encodeByteArray(e,!0)},Ug=function(n){return TB(n).replace(/\./g,"")},eO=function(n){try{return ZN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=()=>EB().__FIREBASE_DEFAULTS__,SB=()=>{if(typeof process>"u"||typeof VC>"u")return;const n=VC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eO(n[1]);return e&&JSON.parse(e)},i_=()=>{try{return _B()||bB()||SB()||wB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tO=n=>{var e,t;return(t=(e=i_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},nO=n=>{const e=tO(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},rO=()=>{var n;return(n=i_())===null||n===void 0?void 0:n.config},iO=n=>{var e;return(e=i_())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ug(JSON.stringify(t)),Ug(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function xB(){var n;const e=(n=i_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NB(){const n=Ir();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OB(){return!xB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aO(){try{return typeof indexedDB=="object"}catch{return!1}}function lO(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function MB(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="FirebaseError";class ms extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=DB,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?PB(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new ms(i,u,r)}}function PB(n,e){return n.replace(LB,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const LB=/\{\$([^}]+)}/g;function VB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(UC(s)&&UC(a)){if(!Jo(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function UC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function rd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function UB(n,e){const t=new zB(n,e);return t.subscribe.bind(t)}class zB{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");BB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tA),i.error===void 0&&(i.error=tA),i.complete===void 0&&(i.complete=tA);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BB(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tA(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB=1e3,FB=2,HB=4*60*60*1e3,qB=.5;function zC(n,e=jB,t=FB){const r=e*Math.pow(t,n),i=Math.round(qB*r*(Math.random()-.5)*2);return Math.min(HB,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n){return n&&n._delegate?n._delegate:n}class hs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new RB;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KB(e))try{this.getOrInitializeService({instanceIdentifier:au})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=au){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=au){return this.instances.has(e)}getOptions(e=au){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=au){return this.component?this.component.multipleInstances?e:au:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GB(n){return n===au?void 0:n}function KB(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $B(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(gt||(gt={}));const YB={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},QB=gt.INFO,XB={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},JB=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=XB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s_{constructor(e){this.name=e,this._logLevel=QB,this._logHandler=JB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const ZB=(n,e)=>e.some(t=>n instanceof t);let BC,jC;function e3(){return BC||(BC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t3(){return jC||(jC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uO=new WeakMap,lT=new WeakMap,cO=new WeakMap,nA=new WeakMap,FE=new WeakMap;function n3(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ja(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&uO.set(t,n)}).catch(()=>{}),FE.set(e,n),e}function r3(n){if(lT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});lT.set(n,e)}let uT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ja(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function i3(n){uT=n(uT)}function s3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rA(this),e,...t);return cO.set(r,e.sort?e.sort():[e]),Ja(r)}:t3().includes(n)?function(...e){return n.apply(rA(this),e),Ja(uO.get(this))}:function(...e){return Ja(n.apply(rA(this),e))}}function o3(n){return typeof n=="function"?s3(n):(n instanceof IDBTransaction&&r3(n),ZB(n,e3())?new Proxy(n,uT):n)}function Ja(n){if(n instanceof IDBRequest)return n3(n);if(nA.has(n))return nA.get(n);const e=o3(n);return e!==n&&(nA.set(n,e),FE.set(e,n)),e}const rA=n=>FE.get(n);function hO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=Ja(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ja(a.result),c.oldVersion,c.newVersion,Ja(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const a3=["get","getKey","getAll","getAllKeys","count"],l3=["put","add","delete","clear"],iA=new Map;function FC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(iA.get(e))return iA.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=l3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||a3.includes(t)))return;const s=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&c.done]))[0]};return iA.set(e,s),s}i3(n=>({...n,get:(e,t,r)=>FC(e,t)||n.get(e,t,r),has:(e,t)=>!!FC(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function c3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cT="@firebase/app",HC="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new s_("@firebase/app"),h3="@firebase/app-compat",f3="@firebase/analytics-compat",d3="@firebase/analytics",p3="@firebase/app-check-compat",m3="@firebase/app-check",g3="@firebase/auth",y3="@firebase/auth-compat",_3="@firebase/database",v3="@firebase/data-connect",A3="@firebase/database-compat",T3="@firebase/functions",E3="@firebase/functions-compat",b3="@firebase/installations",S3="@firebase/installations-compat",w3="@firebase/messaging",R3="@firebase/messaging-compat",C3="@firebase/performance",x3="@firebase/performance-compat",k3="@firebase/remote-config",I3="@firebase/remote-config-compat",N3="@firebase/storage",O3="@firebase/storage-compat",M3="@firebase/firestore",D3="@firebase/vertexai",P3="@firebase/firestore-compat",L3="firebase",V3="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="[DEFAULT]",U3={[cT]:"fire-core",[h3]:"fire-core-compat",[d3]:"fire-analytics",[f3]:"fire-analytics-compat",[m3]:"fire-app-check",[p3]:"fire-app-check-compat",[g3]:"fire-auth",[y3]:"fire-auth-compat",[_3]:"fire-rtdb",[v3]:"fire-data-connect",[A3]:"fire-rtdb-compat",[T3]:"fire-fn",[E3]:"fire-fn-compat",[b3]:"fire-iid",[S3]:"fire-iid-compat",[w3]:"fire-fcm",[R3]:"fire-fcm-compat",[C3]:"fire-perf",[x3]:"fire-perf-compat",[k3]:"fire-rc",[I3]:"fire-rc-compat",[N3]:"fire-gcs",[O3]:"fire-gcs-compat",[M3]:"fire-fst",[P3]:"fire-fst-compat",[D3]:"fire-vertex","fire-js":"fire-js",[L3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new Map,z3=new Map,fT=new Map;function qC(n,e){try{n.container.addComponent(e)}catch(t){Zo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n){const e=n.name;if(fT.has(e))return Zo.debug(`There were multiple attempts to register component ${e}.`),!1;fT.set(e,n);for(const t of zg.values())qC(t,n);for(const t of z3.values())qC(t,n);return!0}function Oh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ci(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Za=new Ku("app","Firebase",B3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Za.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=V3;function fO(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hT,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Za.create("bad-app-name",{appName:String(i)});if(t||(t=rO()),!t)throw Za.create("no-options");const s=zg.get(i);if(s){if(Jo(t,s.options)&&Jo(r,s.config))return s;throw Za.create("duplicate-app",{appName:i})}const a=new WB(i);for(const c of fT.values())a.addComponent(c);const u=new j3(t,r,a);return zg.set(i,u),u}function HE(n=hT){const e=zg.get(n);if(!e&&n===hT&&rO())return fO();if(!e)throw Za.create("no-app",{appName:n});return e}function ri(n,e,t){var r;let i=(r=U3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zo.warn(u.join(" "));return}Rs(new hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="firebase-heartbeat-database",H3=1,Pd="firebase-heartbeat-store";let sA=null;function dO(){return sA||(sA=hO(F3,H3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Za.create("idb-open",{originalErrorMessage:n.message})})),sA}async function q3(n){try{const t=(await dO()).transaction(Pd),r=await t.objectStore(Pd).get(pO(n));return await t.done,r}catch(e){if(e instanceof ms)Zo.warn(e.message);else{const t=Za.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zo.warn(t.message)}}}async function $C(n,e){try{const r=(await dO()).transaction(Pd,"readwrite");await r.objectStore(Pd).put(e,pO(n)),await r.done}catch(t){if(t instanceof ms)Zo.warn(t.message);else{const r=Za.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zo.warn(r.message)}}}function pO(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=1024,G3=30;class K3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=GC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>G3){const a=Q3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=GC(),{heartbeatsToSend:r,unsentEntries:i}=W3(this._heartbeatsCache.heartbeats),s=Ug(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Zo.warn(t),""}}}function GC(){return new Date().toISOString().substring(0,10)}function W3(n,e=$3){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),KC(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),KC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Y3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aO()?lO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await q3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $C(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $C(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function KC(n){return Ug(JSON.stringify({version:2,heartbeats:n})).length}function Q3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(n){Rs(new hs("platform-logger",e=>new u3(e),"PRIVATE")),Rs(new hs("heartbeat",e=>new K3(e),"PRIVATE")),ri(cT,HC,n),ri(cT,HC,"esm2017"),ri("fire-js","")}X3("");var WC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var el,mO;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function x(){}x.prototype=I.prototype,O.D=I.prototype,O.prototype=new x,O.prototype.constructor=O,O.C=function(z,U,j){for(var P=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)P[ae-2]=arguments[ae];return I.prototype[U].apply(z,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,I,x){x||(x=0);var z=Array(16);if(typeof I=="string")for(var U=0;16>U;++U)z[U]=I.charCodeAt(x++)|I.charCodeAt(x++)<<8|I.charCodeAt(x++)<<16|I.charCodeAt(x++)<<24;else for(U=0;16>U;++U)z[U]=I[x++]|I[x++]<<8|I[x++]<<16|I[x++]<<24;I=O.g[0],x=O.g[1],U=O.g[2];var j=O.g[3],P=I+(j^x&(U^j))+z[0]+3614090360&4294967295;I=x+(P<<7&4294967295|P>>>25),P=j+(U^I&(x^U))+z[1]+3905402710&4294967295,j=I+(P<<12&4294967295|P>>>20),P=U+(x^j&(I^x))+z[2]+606105819&4294967295,U=j+(P<<17&4294967295|P>>>15),P=x+(I^U&(j^I))+z[3]+3250441966&4294967295,x=U+(P<<22&4294967295|P>>>10),P=I+(j^x&(U^j))+z[4]+4118548399&4294967295,I=x+(P<<7&4294967295|P>>>25),P=j+(U^I&(x^U))+z[5]+1200080426&4294967295,j=I+(P<<12&4294967295|P>>>20),P=U+(x^j&(I^x))+z[6]+2821735955&4294967295,U=j+(P<<17&4294967295|P>>>15),P=x+(I^U&(j^I))+z[7]+4249261313&4294967295,x=U+(P<<22&4294967295|P>>>10),P=I+(j^x&(U^j))+z[8]+1770035416&4294967295,I=x+(P<<7&4294967295|P>>>25),P=j+(U^I&(x^U))+z[9]+2336552879&4294967295,j=I+(P<<12&4294967295|P>>>20),P=U+(x^j&(I^x))+z[10]+4294925233&4294967295,U=j+(P<<17&4294967295|P>>>15),P=x+(I^U&(j^I))+z[11]+2304563134&4294967295,x=U+(P<<22&4294967295|P>>>10),P=I+(j^x&(U^j))+z[12]+1804603682&4294967295,I=x+(P<<7&4294967295|P>>>25),P=j+(U^I&(x^U))+z[13]+4254626195&4294967295,j=I+(P<<12&4294967295|P>>>20),P=U+(x^j&(I^x))+z[14]+2792965006&4294967295,U=j+(P<<17&4294967295|P>>>15),P=x+(I^U&(j^I))+z[15]+1236535329&4294967295,x=U+(P<<22&4294967295|P>>>10),P=I+(U^j&(x^U))+z[1]+4129170786&4294967295,I=x+(P<<5&4294967295|P>>>27),P=j+(x^U&(I^x))+z[6]+3225465664&4294967295,j=I+(P<<9&4294967295|P>>>23),P=U+(I^x&(j^I))+z[11]+643717713&4294967295,U=j+(P<<14&4294967295|P>>>18),P=x+(j^I&(U^j))+z[0]+3921069994&4294967295,x=U+(P<<20&4294967295|P>>>12),P=I+(U^j&(x^U))+z[5]+3593408605&4294967295,I=x+(P<<5&4294967295|P>>>27),P=j+(x^U&(I^x))+z[10]+38016083&4294967295,j=I+(P<<9&4294967295|P>>>23),P=U+(I^x&(j^I))+z[15]+3634488961&4294967295,U=j+(P<<14&4294967295|P>>>18),P=x+(j^I&(U^j))+z[4]+3889429448&4294967295,x=U+(P<<20&4294967295|P>>>12),P=I+(U^j&(x^U))+z[9]+568446438&4294967295,I=x+(P<<5&4294967295|P>>>27),P=j+(x^U&(I^x))+z[14]+3275163606&4294967295,j=I+(P<<9&4294967295|P>>>23),P=U+(I^x&(j^I))+z[3]+4107603335&4294967295,U=j+(P<<14&4294967295|P>>>18),P=x+(j^I&(U^j))+z[8]+1163531501&4294967295,x=U+(P<<20&4294967295|P>>>12),P=I+(U^j&(x^U))+z[13]+2850285829&4294967295,I=x+(P<<5&4294967295|P>>>27),P=j+(x^U&(I^x))+z[2]+4243563512&4294967295,j=I+(P<<9&4294967295|P>>>23),P=U+(I^x&(j^I))+z[7]+1735328473&4294967295,U=j+(P<<14&4294967295|P>>>18),P=x+(j^I&(U^j))+z[12]+2368359562&4294967295,x=U+(P<<20&4294967295|P>>>12),P=I+(x^U^j)+z[5]+4294588738&4294967295,I=x+(P<<4&4294967295|P>>>28),P=j+(I^x^U)+z[8]+2272392833&4294967295,j=I+(P<<11&4294967295|P>>>21),P=U+(j^I^x)+z[11]+1839030562&4294967295,U=j+(P<<16&4294967295|P>>>16),P=x+(U^j^I)+z[14]+4259657740&4294967295,x=U+(P<<23&4294967295|P>>>9),P=I+(x^U^j)+z[1]+2763975236&4294967295,I=x+(P<<4&4294967295|P>>>28),P=j+(I^x^U)+z[4]+1272893353&4294967295,j=I+(P<<11&4294967295|P>>>21),P=U+(j^I^x)+z[7]+4139469664&4294967295,U=j+(P<<16&4294967295|P>>>16),P=x+(U^j^I)+z[10]+3200236656&4294967295,x=U+(P<<23&4294967295|P>>>9),P=I+(x^U^j)+z[13]+681279174&4294967295,I=x+(P<<4&4294967295|P>>>28),P=j+(I^x^U)+z[0]+3936430074&4294967295,j=I+(P<<11&4294967295|P>>>21),P=U+(j^I^x)+z[3]+3572445317&4294967295,U=j+(P<<16&4294967295|P>>>16),P=x+(U^j^I)+z[6]+76029189&4294967295,x=U+(P<<23&4294967295|P>>>9),P=I+(x^U^j)+z[9]+3654602809&4294967295,I=x+(P<<4&4294967295|P>>>28),P=j+(I^x^U)+z[12]+3873151461&4294967295,j=I+(P<<11&4294967295|P>>>21),P=U+(j^I^x)+z[15]+530742520&4294967295,U=j+(P<<16&4294967295|P>>>16),P=x+(U^j^I)+z[2]+3299628645&4294967295,x=U+(P<<23&4294967295|P>>>9),P=I+(U^(x|~j))+z[0]+4096336452&4294967295,I=x+(P<<6&4294967295|P>>>26),P=j+(x^(I|~U))+z[7]+1126891415&4294967295,j=I+(P<<10&4294967295|P>>>22),P=U+(I^(j|~x))+z[14]+2878612391&4294967295,U=j+(P<<15&4294967295|P>>>17),P=x+(j^(U|~I))+z[5]+4237533241&4294967295,x=U+(P<<21&4294967295|P>>>11),P=I+(U^(x|~j))+z[12]+1700485571&4294967295,I=x+(P<<6&4294967295|P>>>26),P=j+(x^(I|~U))+z[3]+2399980690&4294967295,j=I+(P<<10&4294967295|P>>>22),P=U+(I^(j|~x))+z[10]+4293915773&4294967295,U=j+(P<<15&4294967295|P>>>17),P=x+(j^(U|~I))+z[1]+2240044497&4294967295,x=U+(P<<21&4294967295|P>>>11),P=I+(U^(x|~j))+z[8]+1873313359&4294967295,I=x+(P<<6&4294967295|P>>>26),P=j+(x^(I|~U))+z[15]+4264355552&4294967295,j=I+(P<<10&4294967295|P>>>22),P=U+(I^(j|~x))+z[6]+2734768916&4294967295,U=j+(P<<15&4294967295|P>>>17),P=x+(j^(U|~I))+z[13]+1309151649&4294967295,x=U+(P<<21&4294967295|P>>>11),P=I+(U^(x|~j))+z[4]+4149444226&4294967295,I=x+(P<<6&4294967295|P>>>26),P=j+(x^(I|~U))+z[11]+3174756917&4294967295,j=I+(P<<10&4294967295|P>>>22),P=U+(I^(j|~x))+z[2]+718787259&4294967295,U=j+(P<<15&4294967295|P>>>17),P=x+(j^(U|~I))+z[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(U+(P<<21&4294967295|P>>>11))&4294967295,O.g[2]=O.g[2]+U&4294967295,O.g[3]=O.g[3]+j&4294967295}r.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var x=I-this.blockSize,z=this.B,U=this.h,j=0;j<I;){if(U==0)for(;j<=x;)i(this,O,j),j+=this.blockSize;if(typeof O=="string"){for(;j<I;)if(z[U++]=O.charCodeAt(j++),U==this.blockSize){i(this,z),U=0;break}}else for(;j<I;)if(z[U++]=O[j++],U==this.blockSize){i(this,z),U=0;break}}this.h=U,this.o+=I},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var x=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=x&255,x/=256;for(this.u(O),O=Array(16),I=x=0;4>I;++I)for(var z=0;32>z;z+=8)O[x++]=this.g[I]>>>z&255;return O};function s(O,I){var x=u;return Object.prototype.hasOwnProperty.call(x,O)?x[O]:x[O]=I(O)}function a(O,I){this.h=I;for(var x=[],z=!0,U=O.length-1;0<=U;U--){var j=O[U]|0;z&&j==I||(x[U]=j,z=!1)}this.g=x}var u={};function c(O){return-128<=O&&128>O?s(O,function(I){return new a([I|0],0>I?-1:0)}):new a([O|0],0>O?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return S(f(-O));for(var I=[],x=1,z=0;O>=x;z++)I[z]=O/x|0,x*=4294967296;return new a(I,0)}function p(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return S(p(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(I,8)),z=g,U=0;U<O.length;U+=8){var j=Math.min(8,O.length-U),P=parseInt(O.substring(U,U+j),I);8>j?(j=f(Math.pow(I,j)),z=z.j(j).add(f(P))):(z=z.j(x),z=z.add(f(P)))}return z}var g=c(0),_=c(1),A=c(16777216);n=a.prototype,n.m=function(){if(E(this))return-S(this).m();for(var O=0,I=1,x=0;x<this.g.length;x++){var z=this.i(x);O+=(0<=z?z:4294967296+z)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(T(this))return"0";if(E(this))return"-"+S(this).toString(O);for(var I=f(Math.pow(O,6)),x=this,z="";;){var U=q(x,I).g;x=k(x,U.j(I));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(O);if(x=U,T(x))return j+z;for(;6>j.length;)j="0"+j;z=j+z}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function T(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function E(O){return O.h==-1}n.l=function(O){return O=k(this,O),E(O)?-1:T(O)?0:1};function S(O){for(var I=O.g.length,x=[],z=0;z<I;z++)x[z]=~O.g[z];return new a(x,~O.h).add(_)}n.abs=function(){return E(this)?S(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),x=[],z=0,U=0;U<=I;U++){var j=z+(this.i(U)&65535)+(O.i(U)&65535),P=(j>>>16)+(this.i(U)>>>16)+(O.i(U)>>>16);z=P>>>16,j&=65535,P&=65535,x[U]=P<<16|j}return new a(x,x[x.length-1]&-2147483648?-1:0)};function k(O,I){return O.add(S(I))}n.j=function(O){if(T(this)||T(O))return g;if(E(this))return E(O)?S(this).j(S(O)):S(S(this).j(O));if(E(O))return S(this.j(S(O)));if(0>this.l(A)&&0>O.l(A))return f(this.m()*O.m());for(var I=this.g.length+O.g.length,x=[],z=0;z<2*I;z++)x[z]=0;for(z=0;z<this.g.length;z++)for(var U=0;U<O.g.length;U++){var j=this.i(z)>>>16,P=this.i(z)&65535,ae=O.i(U)>>>16,fe=O.i(U)&65535;x[2*z+2*U]+=P*fe,L(x,2*z+2*U),x[2*z+2*U+1]+=j*fe,L(x,2*z+2*U+1),x[2*z+2*U+1]+=P*ae,L(x,2*z+2*U+1),x[2*z+2*U+2]+=j*ae,L(x,2*z+2*U+2)}for(z=0;z<I;z++)x[z]=x[2*z+1]<<16|x[2*z];for(z=I;z<2*I;z++)x[z]=0;return new a(x,0)};function L(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function B(O,I){this.g=O,this.h=I}function q(O,I){if(T(I))throw Error("division by zero");if(T(O))return new B(g,g);if(E(O))return I=q(S(O),I),new B(S(I.g),S(I.h));if(E(I))return I=q(O,S(I)),new B(S(I.g),I.h);if(30<O.g.length){if(E(O)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var x=_,z=I;0>=z.l(O);)x=V(x),z=V(z);var U=M(x,1),j=M(z,1);for(z=M(z,2),x=M(x,2);!T(z);){var P=j.add(z);0>=P.l(O)&&(U=U.add(x),j=P),z=M(z,1),x=M(x,1)}return I=k(O,U.j(I)),new B(U,I)}for(U=g;0<=O.l(I);){for(x=Math.max(1,Math.floor(O.m()/I.m())),z=Math.ceil(Math.log(x)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),j=f(x),P=j.j(I);E(P)||0<P.l(O);)x-=z,j=f(x),P=j.j(I);T(j)&&(j=_),U=U.add(j),O=k(O,P)}return new B(U,O)}n.A=function(O){return q(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),x=[],z=0;z<I;z++)x[z]=this.i(z)&O.i(z);return new a(x,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),x=[],z=0;z<I;z++)x[z]=this.i(z)|O.i(z);return new a(x,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),x=[],z=0;z<I;z++)x[z]=this.i(z)^O.i(z);return new a(x,this.h^O.h)};function V(O){for(var I=O.g.length+1,x=[],z=0;z<I;z++)x[z]=O.i(z)<<1|O.i(z-1)>>>31;return new a(x,O.h)}function M(O,I){var x=I>>5;I%=32;for(var z=O.g.length-x,U=[],j=0;j<z;j++)U[j]=0<I?O.i(j+x)>>>I|O.i(j+x+1)<<32-I:O.i(j+x);return new a(U,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mO=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,el=a}).apply(typeof WC<"u"?WC:typeof self<"u"?self:typeof window<"u"?window:{});var jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gO,id,yO,fg,dT,_O,vO,AO;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,w){return m==Array.prototype||m==Object.prototype||(m[b]=w.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof jm=="object"&&jm];for(var b=0;b<m.length;++b){var w=m[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(m,b){if(b)e:{var w=r;m=m.split(".");for(var D=0;D<m.length-1;D++){var J=m[D];if(!(J in w))break e;w=w[J]}m=m[m.length-1],D=w[m],b=b(D),b!=D&&b!=null&&e(w,m,{configurable:!0,writable:!0,value:b})}}function s(m,b){m instanceof String&&(m+="");var w=0,D=!1,J={next:function(){if(!D&&w<m.length){var oe=w++;return{value:b(oe,m[oe]),done:!1}}return D=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(m){return m||function(){return s(this,function(b,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function f(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function p(m,b,w){return m.call.apply(m.bind,arguments)}function g(m,b,w){if(!m)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,D),m.apply(b,J)}}return function(){return m.apply(b,arguments)}}function _(m,b,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,_.apply(null,arguments)}function A(m,b){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function T(m,b){function w(){}w.prototype=b.prototype,m.aa=b.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(D,J,oe){for(var be=Array(arguments.length-2),At=2;At<arguments.length;At++)be[At-2]=arguments[At];return b.prototype[J].apply(D,be)}}function E(m){const b=m.length;if(0<b){const w=Array(b);for(let D=0;D<b;D++)w[D]=m[D];return w}return[]}function S(m,b){for(let w=1;w<arguments.length;w++){const D=arguments[w];if(c(D)){const J=m.length||0,oe=D.length||0;m.length=J+oe;for(let be=0;be<oe;be++)m[J+be]=D[be]}else m.push(D)}}class k{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function L(m){return/^[\s\xa0]*$/.test(m)}function B(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function q(m){return q[" "](m),m}q[" "]=function(){};var V=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function M(m,b,w){for(const D in m)b.call(w,m[D],D,m)}function O(m,b){for(const w in m)b.call(void 0,m[w],w,m)}function I(m){const b={};for(const w in m)b[w]=m[w];return b}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(m,b){let w,D;for(let J=1;J<arguments.length;J++){D=arguments[J];for(w in D)m[w]=D[w];for(let oe=0;oe<x.length;oe++)w=x[oe],Object.prototype.hasOwnProperty.call(D,w)&&(m[w]=D[w])}}function U(m){var b=1;m=m.split(":");const w=[];for(;0<b&&m.length;)w.push(m.shift()),b--;return m.length&&w.push(m.join(":")),w}function j(m){u.setTimeout(()=>{throw m},0)}function P(){var m=xe;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class ae{constructor(){this.h=this.g=null}add(b,w){const D=fe.get();D.set(b,w),this.h?this.h.next=D:this.g=D,this.h=D}}var fe=new k(()=>new Y,m=>m.reset());class Y{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Te=!1,xe=new ae,F=()=>{const m=u.Promise.resolve(void 0);ne=()=>{m.then(se)}};var se=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(w){j(w)}var b=fe;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}Te=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,b),u.removeEventListener("test",w,b)}catch{}return m}();function Se(m,b){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(V){e:{try{q(b.nodeName);var J=!0;break e}catch{}J=!1}J||(b=null)}}else w=="mouseover"?b=m.fromElement:w=="mouseout"&&(b=m.toElement);this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Le[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Se.aa.h.call(this)}}T(Se,le);var Le={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Kt="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function mr(m,b,w,D,J){this.listener=m,this.proxy=null,this.src=b,this.type=w,this.capture=!!D,this.ha=J,this.key=++Rt,this.da=this.fa=!1}function Ut(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function On(m){this.src=m,this.g={},this.h=0}On.prototype.add=function(m,b,w,D,J){var oe=m.toString();m=this.g[oe],m||(m=this.g[oe]=[],this.h++);var be=di(m,b,D,J);return-1<be?(b=m[be],w||(b.fa=!1)):(b=new mr(b,this.src,oe,!!D,J),b.fa=w,m.push(b)),b};function Zn(m,b){var w=b.type;if(w in m.g){var D=m.g[w],J=Array.prototype.indexOf.call(D,b,void 0),oe;(oe=0<=J)&&Array.prototype.splice.call(D,J,1),oe&&(Ut(b),m.g[w].length==0&&(delete m.g[w],m.h--))}}function di(m,b,w,D){for(var J=0;J<m.length;++J){var oe=m[J];if(!oe.da&&oe.listener==b&&oe.capture==!!w&&oe.ha==D)return J}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),gs={};function ks(m,b,w,D,J){if(Array.isArray(b)){for(var oe=0;oe<b.length;oe++)ks(m,b[oe],w,D,J);return null}return w=Mr(w),m&&m[Kt]?m.K(b,w,f(D)?!!D.capture:!1,J):on(m,b,w,!1,D,J)}function on(m,b,w,D,J,oe){if(!b)throw Error("Invalid event type");var be=f(J)?!!J.capture:!!J,At=gr(m);if(At||(m[Xt]=At=new On(m)),w=At.add(b,w,D,be,oe),w.proxy)return w;if(D=Is(),w.proxy=D,D.src=m,D.listener=w,m.addEventListener)Re||(J=be),J===void 0&&(J=!1),m.addEventListener(b.toString(),D,J);else if(m.attachEvent)m.attachEvent(Bi(b.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Is(){function m(w){return b.call(m.src,m.listener,w)}const b=pi;return m}function zi(m,b,w,D,J){if(Array.isArray(b))for(var oe=0;oe<b.length;oe++)zi(m,b[oe],w,D,J);else D=f(D)?!!D.capture:!!D,w=Mr(w),m&&m[Kt]?(m=m.i,b=String(b).toString(),b in m.g&&(oe=m.g[b],w=di(oe,w,D,J),-1<w&&(Ut(oe[w]),Array.prototype.splice.call(oe,w,1),oe.length==0&&(delete m.g[b],m.h--)))):m&&(m=gr(m))&&(b=m.g[b.toString()],m=-1,b&&(m=di(b,w,D,J)),(w=-1<m?b[m]:null)&&ys(w))}function ys(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[Kt])Zn(b.i,m);else{var w=m.type,D=m.proxy;b.removeEventListener?b.removeEventListener(w,D,m.capture):b.detachEvent?b.detachEvent(Bi(w),D):b.addListener&&b.removeListener&&b.removeListener(D),(w=gr(b))?(Zn(w,m),w.h==0&&(w.src=null,b[Xt]=null)):Ut(m)}}}function Bi(m){return m in gs?gs[m]:gs[m]="on"+m}function pi(m,b){if(m.da)m=!0;else{b=new Se(b,this);var w=m.listener,D=m.ha||m.src;m.fa&&ys(m),m=w.call(D,b)}return m}function gr(m){return m=m[Xt],m instanceof On?m:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mr(m){return typeof m=="function"?m:(m[Kr]||(m[Kr]=function(b){return m.handleEvent(b)}),m[Kr])}function ut(){ge.call(this),this.i=new On(this),this.M=this,this.F=null}T(ut,ge),ut.prototype[Kt]=!0,ut.prototype.removeEventListener=function(m,b,w,D){zi(this,m,b,w,D)};function et(m,b){var w,D=m.F;if(D)for(w=[];D;D=D.F)w.push(D);if(m=m.M,D=b.type||b,typeof b=="string")b=new le(b,m);else if(b instanceof le)b.target=b.target||m;else{var J=b;b=new le(D,m),z(b,J)}if(J=!0,w)for(var oe=w.length-1;0<=oe;oe--){var be=b.g=w[oe];J=Mn(be,D,!0,b)&&J}if(be=b.g=m,J=Mn(be,D,!0,b)&&J,J=Mn(be,D,!1,b)&&J,w)for(oe=0;oe<w.length;oe++)be=b.g=w[oe],J=Mn(be,D,!1,b)&&J}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var w=m.g[b],D=0;D<w.length;D++)Ut(w[D]);delete m.g[b],m.h--}}this.F=null},ut.prototype.K=function(m,b,w,D){return this.i.add(String(m),b,!1,w,D)},ut.prototype.L=function(m,b,w,D){return this.i.add(String(m),b,!0,w,D)};function Mn(m,b,w,D){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var J=!0,oe=0;oe<b.length;++oe){var be=b[oe];if(be&&!be.da&&be.capture==w){var At=be.listener,Dn=be.ha||be.src;be.fa&&Zn(m.i,be),J=At.call(Dn,D)!==!1&&J}}return J&&!D.defaultPrevented}function Jt(m,b,w){if(typeof m=="function")w&&(m=_(m,w));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(m,b||0)}function Ns(m){m.g=Jt(()=>{m.g=null,m.i&&(m.i=!1,Ns(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class Dr extends ge{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ns(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pr(m){ge.call(this),this.h=m,this.g={}}T(Pr,ge);var Lr=[];function Tn(m){M(m.g,function(b,w){this.g.hasOwnProperty(w)&&ys(b)},m),m.g={}}Pr.prototype.N=function(){Pr.aa.N.call(this),Tn(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=u.JSON.stringify,mi=u.JSON.parse,yr=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Os(){}Os.prototype.h=null;function Wr(m){return m.h||(m.h=m.i())}function ji(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function er(){le.call(this,"d")}T(er,le);function Ms(){le.call(this,"c")}T(Ms,le);var tr={},Nt=null;function nr(){return Nt=Nt||new ut}tr.La="serverreachability";function Ds(m){le.call(this,tr.La,m)}T(Ds,le);function $(m){const b=nr();et(b,new Ds(b))}tr.STAT_EVENT="statevent";function X(m,b){le.call(this,tr.STAT_EVENT,m),this.stat=b}T(X,le);function Z(m){const b=nr();et(b,new X(b,m))}tr.Ma="timingevent";function he(m,b){le.call(this,tr.Ma,m),this.size=b}T(he,le);function ve(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},b)}function we(){this.g=!0}we.prototype.xa=function(){this.g=!1};function ze(m,b,w,D,J,oe){m.info(function(){if(m.g)if(oe)for(var be="",At=oe.split("&"),Dn=0;Dn<At.length;Dn++){var Tt=At[Dn].split("=");if(1<Tt.length){var jn=Tt[0];Tt=Tt[1];var Pn=jn.split("_");be=2<=Pn.length&&Pn[1]=="type"?be+(jn+"="+Tt+"&"):be+(jn+"=redacted&")}}else be=null;else be=oe;return"XMLHTTP REQ ("+D+") [attempt "+J+"]: "+b+`
`+w+`
`+be})}function Ne(m,b,w,D,J,oe,be){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+J+"]: "+b+`
`+w+`
`+oe+" "+be})}function Me(m,b,w,D){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Fe(m,w)+(D?" "+D:"")})}function Ue(m,b){m.info(function(){return"TIMEOUT: "+b})}we.prototype.info=function(){};function Fe(m,b){if(!m.g)return b;if(!b)return null;try{var w=JSON.parse(b);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var D=w[m];if(!(2>D.length)){var J=D[1];if(Array.isArray(J)&&!(1>J.length)){var oe=J[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var be=1;be<J.length;be++)J[be]=""}}}}return En(w)}catch{return b}}var ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},it;function St(){}T(St,Os),St.prototype.g=function(){return new XMLHttpRequest},St.prototype.i=function(){return{}},it=new St;function _t(m,b,w,D){this.j=m,this.i=b,this.l=w,this.R=D||1,this.U=new Pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}var Ae={},K={};function me(m,b,w){m.L=1,m.v=Dl(gi(b)),m.m=w,m.P=!0,Ce(m,null)}function Ce(m,b){m.F=Date.now(),Ct(m),m.A=gi(m.v);var w=m.A,D=m.R;Array.isArray(D)||(D=[String(D)]),$h(w.i,"t",D),m.C=0,w=m.j.J,m.h=new ft,m.g=Pp(m.j,w?b:null,!m.m),0<m.O&&(m.M=new Dr(_(m.Y,m,m.g),m.O)),b=m.U,w=m.g,D=m.ca;var J="readystatechange";Array.isArray(J)||(J&&(Lr[0]=J.toString()),J=Lr);for(var oe=0;oe<J.length;oe++){var be=ks(w,J[oe],D||b.handleEvent,!1,b.h||b);if(!be)break;b.g[be.key]=be}b=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),$(),ze(m.i,m.u,m.A,m.l,m.R,m.m)}_t.prototype.ca=function(m){m=m.target;const b=this.M;b&&Gi(m)==3?b.j():this.Y(m)},_t.prototype.Y=function(m){try{if(m==this.g)e:{const Pn=Gi(this.g);var b=this.g.Ba();const So=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||Cp(this.g)))){this.J||Pn!=4||b==7||(b==8||0>=So?$(3):$(2)),Bt(this);var w=this.g.Z();this.X=w;t:if(tt(this)){var D=Cp(this.g);m="";var J=D.length,oe=Gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ve(this),mn(this);var be="";break t}this.h.i=new u.TextDecoder}for(b=0;b<J;b++)this.h.h=!0,m+=this.h.i.decode(D[b],{stream:!(oe&&b==J-1)});D.length=0,this.h.g+=m,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=w==200,Ne(this.i,this.u,this.A,this.l,this.R,Pn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var At,Dn=this.g;if((At=Dn.g?Dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(At)){var Tt=At;break t}}Tt=null}if(w=Tt)Me(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,en(this,w);else{this.o=!1,this.s=3,Z(12),Ve(this),mn(this);break e}}if(this.P){w=!0;let ir;for(;!this.J&&this.C<be.length;)if(ir=zt(this,be),ir==K){Pn==4&&(this.s=4,Z(14),w=!1),Me(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==Ae){this.s=4,Z(15),Me(this.i,this.l,be,"[Invalid Chunk]"),w=!1;break}else Me(this.i,this.l,ir,null),en(this,ir);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||be.length!=0||this.h.h||(this.s=1,Z(16),w=!1),this.o=this.o&&w,!w)Me(this.i,this.l,be,"[Invalid Chunked Response]"),Ve(this),mn(this);else if(0<be.length&&!this.W){this.W=!0;var jn=this.j;jn.g==this&&jn.ba&&!jn.M&&(jn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Fl(jn),jn.M=!0,Z(11))}}else Me(this.i,this.l,be,null),en(this,be);Pn==4&&Ve(this),this.o&&!this.J&&(Pn==4?Op(this.j,this):(this.o=!1,Ct(this)))}else J_(this.g),w==400&&0<be.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Ve(this),mn(this)}}}catch{}finally{}};function tt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function zt(m,b){var w=m.C,D=b.indexOf(`
`,w);return D==-1?K:(w=Number(b.substring(w,D)),isNaN(w)?Ae:(D+=1,D+w>b.length?K:(b=b.slice(D,D+w),m.C=D+w,b)))}_t.prototype.cancel=function(){this.J=!0,Ve(this)};function Ct(m){m.S=Date.now()+m.I,Zt(m,m.I)}function Zt(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=ve(_(m.ba,m),b)}function Bt(m){m.B&&(u.clearTimeout(m.B),m.B=null)}_t.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Ue(this.i,this.A),this.L!=2&&($(),Z(17)),Ve(this),this.s=2,mn(this)):Zt(this,this.S-m)};function mn(m){m.j.G==0||m.J||Op(m.j,m)}function Ve(m){Bt(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,Tn(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function en(m,b){try{var w=m.j;if(w.G!=0&&(w.g==m||Fi(w.h,m))){if(!m.K&&Fi(w.h,m)&&w.G==3){try{var D=w.Da.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var J=D;if(J[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)ac(w),sc(w);else break e;Qh(w),Z(18)}}else w.za=J[1],0<w.za-w.T&&37500>J[2]&&w.F&&w.v==0&&!w.C&&(w.C=ve(_(w.Za,w),6e3));if(1>=jt(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else bo(w,11)}else if((m.K||w.g==m)&&ac(w),!L(b))for(J=w.Da.g.parse(b),b=0;b<J.length;b++){let Tt=J[b];if(w.T=Tt[0],Tt=Tt[1],w.G==2)if(Tt[0]=="c"){w.K=Tt[1],w.ia=Tt[2];const jn=Tt[3];jn!=null&&(w.la=jn,w.j.info("VER="+w.la));const Pn=Tt[4];Pn!=null&&(w.Aa=Pn,w.j.info("SVER="+w.Aa));const So=Tt[5];So!=null&&typeof So=="number"&&0<So&&(D=1.5*So,w.L=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const ir=m.g;if(ir){const Fs=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var oe=D.h;oe.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(yo(oe,oe.h),oe.h=null))}if(D.D){const Jh=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Jh&&(D.ya=Jh,Dt(D.I,D.D,Jh))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),D=w;var be=m;if(D.qa=Dp(D,D.J?D.ia:null,D.W),be.K){rr(D.h,be);var At=be,Dn=D.L;Dn&&(At.I=Dn),At.B&&(Bt(At),Ct(At)),D.g=be}else Ip(D);0<w.i.length&&oc(w)}else Tt[0]!="stop"&&Tt[0]!="close"||bo(w,7);else w.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?bo(w,7):Wh(w):Tt[0]!="noop"&&w.l&&w.l.ta(Tt),w.v=0)}}$(4)}catch{}}var _r=class{constructor(m,b){this.g=m,this.map=b}};function Qr(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ps(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function jt(m){return m.h?1:m.g?m.g.size:0}function Fi(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function yo(m,b){m.g?m.g.add(b):m.h=b}function rr(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Qr.prototype.cancel=function(){if(this.i=jh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function jh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const w of m.g.values())b=b.concat(w.D);return b}return E(m.i)}function W_(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var b=[],w=m.length,D=0;D<w;D++)b.push(m[D]);return b}b=[],w=0;for(D in m)b[w++]=m[D];return b}function Zu(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var b=[];m=m.length;for(var w=0;w<m;w++)b.push(w);return b}b=[],w=0;for(const D in m)b[w++]=D;return b}}}function Fh(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var w=Zu(m),D=W_(m),J=D.length,oe=0;oe<J;oe++)b.call(void 0,D[oe],w&&w[oe],m)}var Ol=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y_(m,b){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var D=m[w].indexOf("="),J=null;if(0<=D){var oe=m[w].substring(0,D);J=m[w].substring(D+1)}else oe=m[w];b(oe,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function bn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof bn){this.h=m.h,Ml(this,m.j),this.o=m.o,this.g=m.g,la(this,m.s),this.l=m.l;var b=m.i,w=new vo;w.i=b.i,b.g&&(w.g=new Map(b.g),w.h=b.h),_o(this,w),this.m=m.m}else m&&(b=String(m).match(Ol))?(this.h=!1,Ml(this,b[1]||"",!0),this.o=Hi(b[2]||""),this.g=Hi(b[3]||"",!0),la(this,b[4]),this.l=Hi(b[5]||"",!0),_o(this,b[6]||"",!0),this.m=Hi(b[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}bn.prototype.toString=function(){var m=[],b=this.j;b&&m.push(Pl(b,Hh,!0),":");var w=this.g;return(w||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Pl(b,Hh,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Pl(w,w.charAt(0)=="/"?Q_:qh,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Pl(w,ec)),m.join("")};function gi(m){return new bn(m)}function Ml(m,b,w){m.j=w?Hi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function la(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function _o(m,b,w){b instanceof vo?(m.i=b,wp(m.i,m.h)):(w||(b=Pl(b,X_)),m.i=new vo(b,m.h))}function Dt(m,b,w){m.i.set(b,w)}function Dl(m){return Dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Hi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Pl(m,b,w){return typeof m=="string"?(m=encodeURI(m).replace(b,Sp),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Sp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Hh=/[#\/\?@]/g,qh=/[#\?:]/g,Q_=/[#\?]/g,X_=/[#\?@]/g,ec=/#/g;function vo(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function qi(m){m.g||(m.g=new Map,m.h=0,m.i&&Y_(m.i,function(b,w){m.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=vo.prototype,n.add=function(m,b){qi(this),this.i=null,m=Ls(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(b),this.h+=1,this};function Ao(m,b){qi(m),b=Ls(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function To(m,b){return qi(m),b=Ls(m,b),m.g.has(b)}n.forEach=function(m,b){qi(this),this.g.forEach(function(w,D){w.forEach(function(J){m.call(b,J,D,this)},this)},this)},n.na=function(){qi(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),w=[];for(let D=0;D<b.length;D++){const J=m[D];for(let oe=0;oe<J.length;oe++)w.push(b[D])}return w},n.V=function(m){qi(this);let b=[];if(typeof m=="string")To(this,m)&&(b=b.concat(this.g.get(Ls(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)b=b.concat(m[w])}return b},n.set=function(m,b){return qi(this),this.i=null,m=Ls(this,m),To(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function $h(m,b,w){Ao(m,b),0<w.length&&(m.i=null,m.g.set(Ls(m,b),E(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var w=0;w<b.length;w++){var D=b[w];const oe=encodeURIComponent(String(D)),be=this.V(D);for(D=0;D<be.length;D++){var J=oe;be[D]!==""&&(J+="="+encodeURIComponent(String(be[D]))),m.push(J)}}return this.i=m.join("&")};function Ls(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function wp(m,b){b&&!m.j&&(qi(m),m.i=null,m.g.forEach(function(w,D){var J=D.toLowerCase();D!=J&&(Ao(this,D),$h(this,J,w))},m)),m.j=b}function Ll(m,b){const w=new we;if(u.Image){const D=new Image;D.onload=A($i,w,"TestLoadImage: loaded",!0,b,D),D.onerror=A($i,w,"TestLoadImage: error",!1,b,D),D.onabort=A($i,w,"TestLoadImage: abort",!1,b,D),D.ontimeout=A($i,w,"TestLoadImage: timeout",!1,b,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else b(!1)}function _s(m,b){const w=new we,D=new AbortController,J=setTimeout(()=>{D.abort(),$i(w,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:D.signal}).then(oe=>{clearTimeout(J),oe.ok?$i(w,"TestPingServer: ok",!0,b):$i(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),$i(w,"TestPingServer: error",!1,b)})}function $i(m,b,w,D,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),D(w)}catch{}}function Vl(){this.g=new yr}function Vs(m,b,w){const D=w||"";try{Fh(m,function(J,oe){let be=J;f(J)&&(be=En(J)),b.push(D+oe+"="+encodeURIComponent(be))})}catch(J){throw b.push(D+"type="+encodeURIComponent("_badmap")),J}}function ua(m){this.l=m.Ub||null,this.j=m.eb||!1}T(ua,Os),ua.prototype.g=function(){return new Eo(this.l,this.j)},ua.prototype.i=function(m){return function(){return m}}({});function Eo(m,b){ut.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Eo,ut),n=Eo.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,zs(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Us(this):zs(this),this.readyState==3&&Gh(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Us(this))},n.Qa=function(m){this.g&&(this.response=m,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(m){m.readyState=4,m.l=null,m.j=null,m.v=null,zs(m)}n.setRequestHeader=function(m,b){this.u.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=b.next();return m.join(`\r
`)};function zs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Kh(m){let b="";return M(m,function(w,D){b+=D,b+=":",b+=w,b+=`\r
`}),b}function Bn(m,b,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=Kh(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):Dt(m,b,w))}function kt(m){ut.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(kt,ut);var tc=/^https?$/i,Ul=["POST","PUT"];n=kt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,b,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():it.g(),this.v=this.o?Wr(this.o):Wr(it),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(oe){Rp(this,oe);return}if(m=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var J in D)w.set(J,D[J]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const oe of D.keys())w.set(oe,D.get(oe));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(oe=>oe.toLowerCase()=="content-type"),J=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ul,b,void 0))||D||J||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,be]of w)this.g.setRequestHeader(oe,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zl(this),this.u=!0,this.g.send(m),this.u=!1}catch(oe){Rp(this,oe)}};function Rp(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,nc(m),Bs(m)}function nc(m){m.A||(m.A=!0,et(m,"complete"),et(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,et(this,"complete"),et(this,"abort"),Bs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rc(this):this.bb())},n.bb=function(){rc(this)};function rc(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Gi(m)!=4||m.Z()!=2)){if(m.u&&Gi(m)==4)Jt(m.Ea,0,m);else if(et(m,"readystatechange"),Gi(m)==4){m.h=!1;try{const be=m.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var D;if(D=be===0){var J=String(m.D).match(Ol)[1]||null;!J&&u.self&&u.self.location&&(J=u.self.location.protocol.slice(0,-1)),D=!tc.test(J?J.toLowerCase():"")}w=D}if(w)et(m,"complete"),et(m,"success");else{m.m=6;try{var oe=2<Gi(m)?m.g.statusText:""}catch{oe=""}m.l=oe+" ["+m.Z()+"]",nc(m)}}finally{Bs(m)}}}}function Bs(m,b){if(m.g){zl(m);const w=m.g,D=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||et(m,"ready");try{w.onreadystatechange=D}catch{}}}function zl(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Gi(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Gi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),mi(b)}};function Cp(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function J_(m){const b={};m=(m.g&&2<=Gi(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(L(m[D]))continue;var w=U(m[D]);const J=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const oe=b[J]||[];b[J]=oe,oe.push(w)}O(b,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bl(m,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||b}function ic(m){this.Aa=0,this.i=[],this.j=new we,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bl("baseRetryDelayMs",5e3,m),this.cb=Bl("retryDelaySeedMs",1e4,m),this.Wa=Bl("forwardChannelMaxRetries",2,m),this.wa=Bl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(m&&m.concurrentRequestLimit),this.Da=new Vl,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ic.prototype,n.la=8,n.G=1,n.connect=function(m,b,w,D){Z(0),this.W=m,this.H=b||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.I=Dp(this,null,this.W),oc(this)};function Wh(m){if(xp(m),m.G==3){var b=m.U++,w=gi(m.I);if(Dt(w,"SID",m.K),Dt(w,"RID",b),Dt(w,"TYPE","terminate"),jl(m,w),b=new _t(m,m.j,b),b.L=2,b.v=Dl(gi(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=b.v,w=!0),w||(b.g=Pp(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Ct(b)}Mp(m)}function sc(m){m.g&&(Fl(m),m.g.cancel(),m.g=null)}function xp(m){sc(m),m.u&&(u.clearTimeout(m.u),m.u=null),ac(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function oc(m){if(!Ps(m.h)&&!m.s){m.s=!0;var b=m.Ga;ne||F(),Te||(ne(),Te=!0),xe.add(b,m),m.B=0}}function Z_(m,b){return jt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=ve(_(m.Ga,m,b),Xh(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const J=new _t(this,this.j,m);let oe=this.o;if(this.S&&(oe?(oe=I(oe),z(oe,this.S)):oe=this.S),this.m!==null||this.O||(J.H=oe,oe=null),this.P)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,4096<b){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=kp(this,J,b),w=gi(this.I),Dt(w,"RID",m),Dt(w,"CVER",22),this.D&&Dt(w,"X-HTTP-Session-Id",this.D),jl(this,w),oe&&(this.O?b="headers="+encodeURIComponent(String(Kh(oe)))+"&"+b:this.m&&Bn(w,this.m,oe)),yo(this.h,J),this.Ua&&Dt(w,"TYPE","init"),this.P?(Dt(w,"$req",b),Dt(w,"SID","null"),J.T=!0,me(J,w,null)):me(J,w,b),this.G=2}}else this.G==3&&(m?Yh(this,m):this.i.length==0||Ps(this.h)||Yh(this))};function Yh(m,b){var w;b?w=b.l:w=m.U++;const D=gi(m.I);Dt(D,"SID",m.K),Dt(D,"RID",w),Dt(D,"AID",m.T),jl(m,D),m.m&&m.o&&Bn(D,m.m,m.o),w=new _t(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),b&&(m.i=b.D.concat(m.i)),b=kp(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),yo(m.h,w),me(w,D,b)}function jl(m,b){m.H&&M(m.H,function(w,D){Dt(b,D,w)}),m.l&&Fh({},function(w,D){Dt(b,D,w)})}function kp(m,b,w){w=Math.min(m.i.length,w);var D=m.l?_(m.l.Na,m.l,m):null;e:{var J=m.i;let oe=-1;for(;;){const be=["count="+w];oe==-1?0<w?(oe=J[0].g,be.push("ofs="+oe)):oe=0:be.push("ofs="+oe);let At=!0;for(let Dn=0;Dn<w;Dn++){let Tt=J[Dn].g;const jn=J[Dn].map;if(Tt-=oe,0>Tt)oe=Math.max(0,J[Dn].g-100),At=!1;else try{Vs(jn,be,"req"+Tt+"_")}catch{D&&D(jn)}}if(At){D=be.join("&");break e}}}return m=m.i.splice(0,w),b.D=m,D}function Ip(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;ne||F(),Te||(ne(),Te=!0),xe.add(b,m),m.v=0}}function Qh(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=ve(_(m.Fa,m),Xh(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Np(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=ve(_(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),sc(this),Np(this))};function Fl(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Np(m){m.g=new _t(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=gi(m.qa);Dt(b,"RID","rpc"),Dt(b,"SID",m.K),Dt(b,"AID",m.T),Dt(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&Dt(b,"TO",m.ja),Dt(b,"TYPE","xmlhttp"),jl(m,b),m.m&&m.o&&Bn(b,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Dl(gi(b)),w.m=null,w.P=!0,Ce(w,m)}n.Za=function(){this.C!=null&&(this.C=null,sc(this),Qh(this),Z(19))};function ac(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Op(m,b){var w=null;if(m.g==b){ac(m),Fl(m),m.g=null;var D=2}else if(Fi(m.h,b))w=b.D,rr(m.h,b),D=1;else return;if(m.G!=0){if(b.o)if(D==1){w=b.m?b.m.length:0,b=Date.now()-b.F;var J=m.B;D=nr(),et(D,new he(D,w)),oc(m)}else Ip(m);else if(J=b.s,J==3||J==0&&0<b.X||!(D==1&&Z_(m,b)||D==2&&Qh(m)))switch(w&&0<w.length&&(b=m.h,b.i=b.i.concat(w)),J){case 1:bo(m,5);break;case 4:bo(m,10);break;case 3:bo(m,6);break;default:bo(m,2)}}}function Xh(m,b){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*b}function bo(m,b){if(m.j.info("Error code "+b),b==2){var w=_(m.fb,m),D=m.Xa;const J=!D;D=new bn(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ml(D,"https"),Dl(D),J?Ll(D.toString(),w):_s(D.toString(),w)}else Z(2);m.G=0,m.l&&m.l.sa(b),Mp(m),xp(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Mp(m){if(m.G=0,m.ka=[],m.l){const b=jh(m.h);(b.length!=0||m.i.length!=0)&&(S(m.ka,b),S(m.ka,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.ra()}}function Dp(m,b,w){var D=w instanceof bn?gi(w):new bn(w);if(D.g!="")b&&(D.g=b+"."+D.g),la(D,D.s);else{var J=u.location;D=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;var oe=new bn(null);D&&Ml(oe,D),b&&(oe.g=b),J&&la(oe,J),w&&(oe.l=w),D=oe}return w=m.D,b=m.ya,w&&b&&Dt(D,w,b),Dt(D,"VER",m.la),jl(m,D),D}function Pp(m,b,w){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new kt(new ua({eb:w})):new kt(m.pa),b.Ha(m.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lp(){}n=Lp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lc(){}lc.prototype.g=function(m,b){return new Vr(m,b)};function Vr(m,b){ut.call(this),this.g=new ic(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!L(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!L(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new js(this)}T(Vr,ut),Vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){Wh(this.g)},Vr.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=En(m),m=w);b.i.push(new _r(b.Ya++,m)),b.G==3&&oc(b)},Vr.prototype.N=function(){this.g.l=null,delete this.j,Wh(this.g),delete this.g,Vr.aa.N.call(this)};function Vp(m){er.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const w in b){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}T(Vp,er);function Up(){Ms.call(this),this.status=1}T(Up,Ms);function js(m){this.g=m}T(js,Lp),js.prototype.ua=function(){et(this.g,"a")},js.prototype.ta=function(m){et(this.g,new Vp(m))},js.prototype.sa=function(m){et(this.g,new Up)},js.prototype.ra=function(){et(this.g,"b")},lc.prototype.createWebChannel=lc.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,AO=function(){return new lc},vO=function(){return nr()},_O=tr,dT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,fg=ke,He.COMPLETE="complete",yO=He,ji.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,id=ji,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,gO=kt}).apply(typeof jm<"u"?jm:typeof self<"u"?self:typeof window<"u"?window:{});const YC="@firebase/firestore",QC="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new s_("@firebase/firestore");function jc(){return Mu.logLevel}function Oe(n,...e){if(Mu.logLevel<=gt.DEBUG){const t=e.map(qE);Mu.debug(`Firestore (${Mh}): ${n}`,...t)}}function ea(n,...e){if(Mu.logLevel<=gt.ERROR){const t=e.map(qE);Mu.error(`Firestore (${Mh}): ${n}`,...t)}}function lh(n,...e){if(Mu.logLevel<=gt.WARN){const t=e.map(qE);Mu.warn(`Firestore (${Mh}): ${n}`,...t)}}function qE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TO(n,r,t)}function TO(n,e,t){let r=`FIRESTORE (${Mh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ea(r),new Error(r)}function It(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||TO(e,i,r)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(br.UNAUTHENTICATED))}shutdown(){}}class Z3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ej{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new Yo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yo,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yo)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new EO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class tj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new tj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const r=s=>{s.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new XC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new XC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ij(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function pT(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return lt(r,i);{const s=bO(),a=sj(s.encode(JC(n,t)),s.encode(JC(e,t)));return a!==0?a:lt(r,i)}}t+=r>65535?2:1}return lt(n.length,e.length)}function JC(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function sj(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function uh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=-62135596800,ex=1e6;class Nn{static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ex);return new Nn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZC)throw new je(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ex}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ZC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Nn(0,0))}static max(){return new Xe(new Nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="__name__";class Xs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Xs.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return lt(e.length,t.length)}static compareSegments(e,t){const r=Xs.isNumericId(e),i=Xs.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Xs.extractNumericId(e).compare(Xs.extractNumericId(t)):pT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return el.fromString(e.substring(4,e.length-2))}}class Yt extends Xs{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const oj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Xs{construct(e,t,r){return new fr(e,t,r)}static isValidIdentifier(e){return oj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tx}static keyField(){return new fr([tx])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new je(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new je(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new je(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new je(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Yt.fromString(e))}static fromName(e){return new $e(Yt.fromString(e).popFirst(5))}static empty(){return new $e(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Yt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=-1;function aj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Xe.fromTimestamp(r===1e9?new Nn(t+1,0):new Nn(t,r));return new fl(i,$e.empty(),e)}function lj(n){return new fl(n.readTime,n.key,Ld)}class fl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fl(Xe.min(),$e.empty(),Ld)}static max(){return new fl(Xe.max(),$e.empty(),Ld)}}function uj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$e.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==cj)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&t()},c=>r(c))}),a=!0,s===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new pe((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const f=c;t(e[f]).next(p=>{a[f]=p,++u,u===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new pe((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function fj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ph(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}o_.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=-1;function a_(n){return n==null}function Bg(n){return n===0&&1/n==-1/0}function dj(n){return typeof n=="number"&&Number.isInteger(n)&&!Bg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="";function pj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nx(e)),e=mj(n.get(t),e);return nx(e)}function mj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case wO:t+="";break;default:t+=s}}return t}function nx(n){return n+wO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fm(this.root,e,this.comparator,!0)}}class Fm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ur(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ix(this.data.getIterator())}getIteratorFrom(e){return new ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new Ii([])}unionWith(e){let t=new zn(fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new CO("Invalid base64 string: "+s):s}}(e);return new pr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const gj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dl(n){if(It(!!n,39018),typeof n=="string"){let e=0;const t=gj.exec(n);if(It(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(n.seconds),nanos:_n(n.nanos)}}function _n(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pl(n){return typeof n=="string"?pr.fromBase64String(n):pr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="server_timestamp",kO="__type__",IO="__previous_value__",NO="__local_write_time__";function GE(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[kO])===null||t===void 0?void 0:t.stringValue)===xO}function l_(n){const e=n.mapValue.fields[IO];return GE(e)?l_(e):e}function Vd(n){const e=dl(n.mapValue.fields[NO].timestampValue);return new Nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,t,r,i,s,a,u,c,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f}}const jg="(default)";class Ud{constructor(e,t){this.projectId=e,this.database=t||jg}static empty(){return new Ud("","")}get isDefaultDatabase(){return this.database===jg}isEqual(e){return e instanceof Ud&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="__type__",_j="__max__",Hm={mapValue:{}},MO="__vector__",Fg="value";function ml(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?GE(n)?4:Aj(n)?9007199254740991:vj(n)?10:11:Ye(28295,{value:n})}function co(n,e){if(n===e)return!0;const t=ml(n);if(t!==ml(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vd(n).isEqual(Vd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=dl(i.timestampValue),u=dl(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return pl(i.bytesValue).isEqual(pl(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=_n(i.doubleValue),u=_n(s.doubleValue);return a===u?Bg(a)===Bg(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return uh(n.arrayValue.values||[],e.arrayValue.values||[],co);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(rx(a)!==rx(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!co(a[c],u[c])))return!1;return!0}(n,e);default:return Ye(52216,{left:n})}}function zd(n,e){return(n.values||[]).find(t=>co(t,e))!==void 0}function ch(n,e){if(n===e)return 0;const t=ml(n),r=ml(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(s,a){const u=_n(s.integerValue||s.doubleValue),c=_n(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return sx(n.timestampValue,e.timestampValue);case 4:return sx(Vd(n),Vd(e));case 5:return pT(n.stringValue,e.stringValue);case 6:return function(s,a){const u=pl(s),c=pl(a);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const p=lt(u[f],c[f]);if(p!==0)return p}return lt(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const u=lt(_n(s.latitude),_n(a.latitude));return u!==0?u:lt(_n(s.longitude),_n(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ox(n.arrayValue,e.arrayValue);case 10:return function(s,a){var u,c,f,p;const g=s.fields||{},_=a.fields||{},A=(u=g[Fg])===null||u===void 0?void 0:u.arrayValue,T=(c=_[Fg])===null||c===void 0?void 0:c.arrayValue,E=lt(((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return E!==0?E:ox(A,T)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Hm.mapValue&&a===Hm.mapValue)return 0;if(s===Hm.mapValue)return 1;if(a===Hm.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),f=a.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=pT(c[g],p[g]);if(_!==0)return _;const A=ch(u[c[g]],f[p[g]]);if(A!==0)return A}return lt(c.length,p.length)}(n.mapValue,e.mapValue);default:throw Ye(23264,{Pe:t})}}function sx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=dl(n),r=dl(e),i=lt(t.seconds,r.seconds);return i!==0?i:lt(t.nanos,r.nanos)}function ox(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ch(t[i],r[i]);if(s)return s}return lt(t.length,r.length)}function hh(n){return mT(n)}function mT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=dl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return pl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=mT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${mT(t.fields[a])}`;return i+"}"}(n.mapValue):Ye(61005,{value:n})}function dg(n){switch(ml(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=l_(n);return e?16+dg(e):16;case 5:return 2*n.stringValue.length;case 6:return pl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+dg(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Sl(r.fields,(s,a)=>{i+=s.length+dg(a)}),i}(n.mapValue);default:throw Ye(13486,{value:n})}}function gT(n){return!!n&&"integerValue"in n}function KE(n){return!!n&&"arrayValue"in n}function ax(n){return!!n&&"nullValue"in n}function lx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pg(n){return!!n&&"mapValue"in n}function vj(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[OO])===null||t===void 0?void 0:t.stringValue)===MO}function pd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Aj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_j}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pd(t)}setAll(e){let t=fr.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=pd(a):i.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());pg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ni(pd(this.value))}}function DO(n){const e=[];return Sl(n.fields,(t,r)=>{const i=new fr([t]);if(pg(r)){const s=DO(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new wr(e,0,Xe.min(),Xe.min(),Xe.min(),ni.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,Xe.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,Xe.min(),Xe.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,Xe.min(),Xe.min(),ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t){this.position=e,this.inclusive=t}}function ux(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=$e.comparator($e.fromName(a.referenceValue),t.key):r=ch(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!co(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{}class Un extends PO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bj(e,t,r):t==="array-contains"?new Rj(e,r):t==="in"?new Cj(e,r):t==="not-in"?new xj(e,r):t==="array-contains-any"?new kj(e,r):new Un(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Sj(e,r):new wj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ch(t,this.value)):t!==null&&ml(this.value)===ml(t)&&this.matchesComparison(ch(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ho extends PO{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ho(e,t)}matches(e){return LO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function LO(n){return n.op==="and"}function VO(n){return Ej(n)&&LO(n)}function Ej(n){for(const e of n.filters)if(e instanceof ho)return!1;return!0}function yT(n){if(n instanceof Un)return n.field.canonicalString()+n.op.toString()+hh(n.value);if(VO(n))return n.filters.map(e=>yT(e)).join(",");{const e=n.filters.map(t=>yT(t)).join(",");return`${n.op}(${e})`}}function UO(n,e){return n instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.field.isEqual(i.field)&&co(r.value,i.value)}(n,e):n instanceof ho?function(r,i){return i instanceof ho&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&UO(a,i.filters[u]),!0):!1}(n,e):void Ye(19439)}function zO(n){return n instanceof Un?function(t){return`${t.field.canonicalString()} ${t.op} ${hh(t.value)}`}(n):n instanceof ho?function(t){return t.op.toString()+" {"+t.getFilters().map(zO).join(" ,")+"}"}(n):"Filter"}class bj extends Un{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sj extends Un{constructor(e,t){super(e,"in",t),this.keys=BO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wj extends Un{constructor(e,t){super(e,"not-in",t),this.keys=BO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Rj extends Un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return KE(t)&&zd(t.arrayValue,this.value)}}class Cj extends Un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zd(this.value.arrayValue,t)}}class xj extends Un{constructor(e,t){super(e,"not-in",t)}matches(e){if(zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zd(this.value.arrayValue,t)}}class kj extends Un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!KE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Ie=null}}function hx(n,e=null,t=[],r=[],i=null,s=null,a=null){return new Ij(n,e,t,r,i,s,a)}function WE(n){const e=Ze(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),a_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hh(r)).join(",")),e.Ie=t}return e.Ie}function YE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Tj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cx(n.startAt,e.startAt)&&cx(n.endAt,e.endAt)}function _T(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Nj(n,e,t,r,i,s,a,u){return new u_(n,e,t,r,i,s,a,u)}function QE(n){return new u_(n)}function fx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Oj(n){return n.collectionGroup!==null}function md(n){const e=Ze(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new zn(fr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new qg(s,r))}),t.has(fr.keyField().canonicalString())||e.Ee.push(new qg(fr.keyField(),r))}return e.Ee}function io(n){const e=Ze(n);return e.de||(e.de=Mj(e,md(n))),e.de}function Mj(n,e){if(n.limitType==="F")return hx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new qg(i.field,s)});const t=n.endAt?new Hg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hg(n.startAt.position,n.startAt.inclusive):null;return hx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vT(n,e,t){return new u_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function c_(n,e){return YE(io(n),io(e))&&n.limitType===e.limitType}function jO(n){return`${WE(io(n))}|lt:${n.limitType}`}function Fc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zO(i)).join(", ")}]`),a_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hh(i)).join(",")),`Target(${r})`}(io(n))}; limitType=${n.limitType})`}function h_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of md(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,c){const f=ux(a,u,c);return a.inclusive?f<=0:f<0}(r.startAt,md(r),i)||r.endAt&&!function(a,u,c){const f=ux(a,u,c);return a.inclusive?f>=0:f>0}(r.endAt,md(r),i))}(n,e)}function Dj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FO(n){return(e,t)=>{let r=!1;for(const i of md(n)){const s=Pj(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Pj(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(s,a,u){const c=a.data.field(s),f=u.data.field(s);return c!==null&&f!==null?ch(c,f):Ye(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return RO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=new sn($e.comparator);function ta(){return Lj}const HO=new sn($e.comparator);function sd(...n){let e=HO;for(const t of n)e=e.insert(t.key,t);return e}function qO(n){let e=HO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function mu(){return gd()}function $O(){return gd()}function gd(){return new Yu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Vj=new sn($e.comparator),Uj=new zn($e.comparator);function yt(...n){let e=Uj;for(const t of n)e=e.add(t);return e}const zj=new zn(lt);function Bj(){return zj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bg(e)?"-0":e}}function GO(n){return{integerValue:""+n}}function jj(n,e){return dj(e)?GO(e):XE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this._=void 0}}function Fj(n,e,t){return n instanceof Bd?function(i,s){const a={fields:{[kO]:{stringValue:xO},[NO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&GE(s)&&(s=l_(s)),s&&(a.fields[IO]=s),{mapValue:a}}(t,e):n instanceof fh?WO(n,e):n instanceof dh?YO(n,e):function(i,s){const a=KO(i,s),u=dx(a)+dx(i.Re);return gT(a)&&gT(i.Re)?GO(u):XE(i.serializer,u)}(n,e)}function Hj(n,e,t){return n instanceof fh?WO(n,e):n instanceof dh?YO(n,e):t}function KO(n,e){return n instanceof $g?function(r){return gT(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Bd extends f_{}class fh extends f_{constructor(e){super(),this.elements=e}}function WO(n,e){const t=QO(e);for(const r of n.elements)t.some(i=>co(i,r))||t.push(r);return{arrayValue:{values:t}}}class dh extends f_{constructor(e){super(),this.elements=e}}function YO(n,e){let t=QO(e);for(const r of n.elements)t=t.filter(i=>!co(i,r));return{arrayValue:{values:t}}}class $g extends f_{constructor(e,t){super(),this.serializer=e,this.Re=t}}function dx(n){return _n(n.integerValue||n.doubleValue)}function QO(n){return KE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t){this.field=e,this.transform=t}}function qj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof fh&&i instanceof fh||r instanceof dh&&i instanceof dh?uh(r.elements,i.elements,co):r instanceof $g&&i instanceof $g?co(r.Re,i.Re):r instanceof Bd&&i instanceof Bd}(n.transform,e.transform)}class $j{constructor(e,t){this.version=e,this.transformResults=t}}class so{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new so}static exists(e){return new so(void 0,e)}static updateTime(e){return new so(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class d_{}function XO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ZO(n.key,so.none()):new hp(n.key,n.data,so.none());{const t=n.data,r=ni.empty();let i=new zn(fr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new wl(n.key,r,new Ii(i.toArray()),so.none())}}function Gj(n,e,t){n instanceof hp?function(i,s,a){const u=i.value.clone(),c=mx(i.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof wl?function(i,s,a){if(!mg(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=mx(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(JO(i)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function yd(n,e,t,r){return n instanceof hp?function(s,a,u,c){if(!mg(s.precondition,a))return u;const f=s.value.clone(),p=gx(s.fieldTransforms,c,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof wl?function(s,a,u,c){if(!mg(s.precondition,a))return u;const f=gx(s.fieldTransforms,c,a),p=a.data;return p.setAll(JO(s)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,a,u){return mg(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function Kj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=KO(r.transform,i||null);s!=null&&(t===null&&(t=ni.empty()),t.set(r.field,s))}return t||null}function px(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uh(r,i,(s,a)=>qj(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hp extends d_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wl extends d_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function JO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mx(n,e,t){const r=new Map;It(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,Hj(a,u,t[i]))}return r}function gx(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,Fj(s,a,e))}return r}class ZO extends d_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wj extends d_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Gj(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$O();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const c=XO(a,u);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yt())}isEqual(e){return this.batchId===e.batchId&&uh(this.mutations,e.mutations,(t,r)=>px(t,r))&&uh(this.baseMutations,e.baseMutations,(t,r)=>px(t,r))}}class ZE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return Vj}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new ZE(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,bt;function Jj(n){switch(n){case ye.OK:return Ye(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function eM(n){if(n===void 0)return ea("GRPC error has no .code"),ye.UNKNOWN;switch(n){case Rn.OK:return ye.OK;case Rn.CANCELLED:return ye.CANCELLED;case Rn.UNKNOWN:return ye.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return ye.INTERNAL;case Rn.UNAVAILABLE:return ye.UNAVAILABLE;case Rn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Rn.NOT_FOUND:return ye.NOT_FOUND;case Rn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Rn.ABORTED:return ye.ABORTED;case Rn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Rn.DATA_LOSS:return ye.DATA_LOSS;default:return Ye(39323,{code:n})}}(bt=Rn||(Rn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=new el([4294967295,4294967295],0);function yx(n){const e=bO().encode(n),t=new mO;return t.update(e),new Uint8Array(t.digest())}function _x(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new el([t,r],0),new el([i,s],0)]}class eb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new od(`Invalid padding: ${t}`);if(r<0)throw new od(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new od(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new od(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=el.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(el.fromNumber(r)));return i.compare(Zj)===1&&(i=new el([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=yx(e),[r,i]=_x(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);if(!this.be(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new eb(s,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.pe===0)return;const t=yx(e),[r,i]=_x(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class od extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,fp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new p_(Xe.min(),i,new sn(lt),ta(),yt())}}class fp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new fp(r,t,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class tM{constructor(e,t){this.targetId=e,this.Ce=t}}class nM{constructor(e,t,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class vx{constructor(){this.Fe=0,this.Me=Ax(),this.xe=pr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=yt(),t=yt(),r=yt();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye(38017,{changeType:s})}}),new fp(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Ax()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,It(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class eF{constructor(e){this.ze=e,this.je=new Map,this.He=ta(),this.Je=qm(),this.Ye=qm(),this.Ze=new sn(lt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(_T(s))if(r===0){const a=new $e(s.path);this.tt(t,a,wr.newNoDocument(a,Xe.min()))}else It(r===1,20013,{expectedCount:r});else{const a=this.ut(t);if(a!==r){const u=this.ct(e),c=u?this.lt(u,e,a):1;if(c!==0){this.st(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=pl(r).toUint8Array()}catch(c){if(c instanceof CO)return lh("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new eb(a,i,s)}catch(c){return lh(c instanceof od?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.pe===0?null:u}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.ze.Pt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,a)=>{const u=this._t(a);if(u){if(s.current&&_T(u.target)){const c=new $e(u.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,wr.newNoDocument(c,e))}s.Le&&(t.set(a,s.qe()),s.Qe())}});let r=yt();this.Ye.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const i=new p_(e,t,this.Ze,this.He,r);return this.He=ta(),this.Je=qm(),this.Ye=qm(),this.Ze=new sn(lt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new vx,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new zn(lt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new zn(lt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new vx),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function qm(){return new sn($e.comparator)}function Ax(){return new sn($e.comparator)}const tF={asc:"ASCENDING",desc:"DESCENDING"},nF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rF={and:"AND",or:"OR"};class iF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function AT(n,e){return n.useProto3Json||a_(e)?e:{value:e}}function Gg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sF(n,e){return Gg(n,e.toTimestamp())}function oo(n){return It(!!n,49232),Xe.fromTimestamp(function(t){const r=dl(t);return new Nn(r.seconds,r.nanos)}(n))}function tb(n,e){return TT(n,e).canonicalString()}function TT(n,e){const t=function(i){return new Yt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function iM(n){const e=Yt.fromString(n);return It(uM(e),10190,{key:e.toString()}),e}function ET(n,e){return tb(n.databaseId,e.path)}function oA(n,e){const t=iM(e);if(t.get(1)!==n.databaseId.projectId)throw new je(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(oM(t))}function sM(n,e){return tb(n.databaseId,e)}function oF(n){const e=iM(n);return e.length===4?Yt.emptyPath():oM(e)}function bT(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oM(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Tx(n,e,t){return{name:ET(n,e),fields:t.value.mapValue.fields}}function aF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ye(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,p){return f.useProto3Json?(It(p===void 0||typeof p=="string",58123),pr.fromBase64String(p||"")):(It(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),pr.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const p=f.code===void 0?ye.UNKNOWN:eM(f.code);return new je(p,f.message||"")}(a);t=new nM(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=oA(n,r.document.name),s=oo(r.document.updateTime),a=r.document.createTime?oo(r.document.createTime):Xe.min(),u=new ni({mapValue:{fields:r.document.fields}}),c=wr.newFoundDocument(i,s,a,u),f=r.targetIds||[],p=r.removedTargetIds||[];t=new gg(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=oA(n,r.document),s=r.readTime?oo(r.readTime):Xe.min(),a=wr.newNoDocument(i,s),u=r.removedTargetIds||[];t=new gg([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=oA(n,r.document),s=r.removedTargetIds||[];t=new gg([],s,i,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new Xj(i,s),u=r.targetId;t=new tM(u,a)}}return t}function lF(n,e){let t;if(e instanceof hp)t={update:Tx(n,e.key,e.value)};else if(e instanceof ZO)t={delete:ET(n,e.key)};else if(e instanceof wl)t={update:Tx(n,e.key,e.data),updateMask:yF(e.fieldMask)};else{if(!(e instanceof Wj))return Ye(16599,{ft:e.type});t={verify:ET(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const u=a.transform;if(u instanceof Bd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof fh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof dh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof $g)return{fieldPath:a.field.canonicalString(),increment:u.Re};throw Ye(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ye(27497)}(n,e.precondition)),t}function uF(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map(t=>function(i,s){let a=i.updateTime?oo(i.updateTime):oo(s);return a.isEqual(Xe.min())&&(a=oo(s)),new $j(a,i.transformResults||[])}(t,e))):[]}function cF(n,e){return{documents:[sM(n,e.path)]}}function hF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sM(n,i);const s=function(f){if(f.length!==0)return lM(ho.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(p=>function(_){return{field:Hc(_.field),direction:pF(_.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=AT(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function fF(n){let e=oF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(g){const _=aM(g);return _ instanceof ho&&VO(_)?_.getFilters():[_]}(t.where));let a=[];t.orderBy&&(a=function(g){return g.map(_=>function(T){return new qg(qc(T.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(t.orderBy));let u=null;t.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,a_(_)?null:_}(t.limit));let c=null;t.startAt&&(c=function(g){const _=!!g.before,A=g.values||[];return new Hg(A,_)}(t.startAt));let f=null;return t.endAt&&(f=function(g){const _=!g.before,A=g.values||[];return new Hg(A,_)}(t.endAt)),Nj(e,i,a,s,u,"F",c,f)}function dF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qc(t.unaryFilter.field);return Un.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qc(t.unaryFilter.field);return Un.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qc(t.unaryFilter.field);return Un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qc(t.unaryFilter.field);return Un.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(n):n.fieldFilter!==void 0?function(t){return Un.create(qc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ho.create(t.compositeFilter.filters.map(r=>aM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(t.compositeFilter.op))}(n):Ye(30097,{filter:n})}function pF(n){return tF[n]}function mF(n){return nF[n]}function gF(n){return rF[n]}function Hc(n){return{fieldPath:n.canonicalString()}}function qc(n){return fr.fromServerFormat(n.fieldPath)}function lM(n){return n instanceof Un?function(t){if(t.op==="=="){if(lx(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NAN"}};if(ax(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lx(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NAN"}};if(ax(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(t.field),op:mF(t.op),value:t.value}}}(n):n instanceof ho?function(t){const r=t.getFilters().map(i=>lM(i));return r.length===1?r[0]:{compositeFilter:{op:gF(t.op),filters:r}}}(n):Ye(54877,{filter:n})}function yF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,t,r,i,s=Xe.min(),a=Xe.min(),u=pr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.wt=e}}function vF(n){const e=fF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.yn=new TF}addToCollectionParentIndex(e,t){return this.yn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(fl.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(fl.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class TF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(Yt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cM=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(cM,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ph(0)}static ir(){return new ph(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="LruGarbageCollector",EF=1048576;function Sx([n,e],[t,r]){const i=lt(n,t);return i===0?lt(e,r):i}class bF{constructor(e){this.cr=e,this.buffer=new zn(Sx),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Sx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Oe(bx,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ph(t)?Oe(bx,"Ignoring IndexedDB error during garbage collection: ",t):await Dh(t)}await this.Ir(3e5)})}}class wF{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(o_.le);const r=new bF(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Ex)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ex):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,a,u,c,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(f=Date.now(),jc()<=gt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-p}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function RF(n,e){return new wF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.changes=new Yu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yd(r.mutation,i,Ii.empty(),Nn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yt()){const i=mu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=sd();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=mu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let s=ta();const a=gd(),u=function(){return gd()}();return t.forEach((c,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof wl)?s=s.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),yd(p.mutation,f,p.mutation.getFieldMask(),Nn.now())):a.set(f.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((f,p)=>a.set(f,p)),t.forEach((f,p)=>{var g;return u.set(f,new xF(p,(g=a.get(f))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){const r=gd();let i=new sn((a,u)=>a-u),s=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=t.get(c);if(f===null)return;let p=r.get(c)||Ii.empty();p=u.applyToLocalView(f,p),r.set(c,p);const g=(i.get(u.batchId)||yt()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,p=c.value,g=$O();p.forEach(_=>{if(!s.has(_)){const A=XO(t.get(_),r.get(_));A!==null&&g.set(_,A),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return pe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return $e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Oj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):pe.resolve(mu());let u=Ld,c=s;return a.next(f=>pe.forEach(f,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?pe.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,c,f,yt())).next(p=>({batchId:u,changes:qO(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let i=sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=sd();return this.indexManager.getCollectionParents(e,s).next(u=>pe.forEach(u,c=>{const f=function(g,_){return new u_(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((c,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,wr.newInvalidDocument(p)))});let u=sd();return a.forEach((c,f)=>{const p=s.get(c);p!==void 0&&yd(p.mutation,f,Ii.empty(),Nn.now()),h_(t,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:oo(i.createTime)}}(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:vF(i.bundledQuery),readTime:oo(i.readTime)}}(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.overlays=new sn($e.comparator),this.Or=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mu();return pe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=mu(),s=t.length+1,a=new $e(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new sn((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=s.get(f.largestBatchId);p===null&&(p=mu(),s=s.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=mu(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=i)););return pe.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Qj(t,r));let s=this.Or.get(t);s===void 0&&(s=yt(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.Nr=new zn($n.Br),this.Lr=new zn($n.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new $n(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new $n(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new $e(new Yt([])),r=new $n(t,e),i=new $n(t,e+1),s=[];return this.Lr.forEachInRange([r,i],a=>{this.Qr(a),s.push(a.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new $e(new Yt([])),r=new $n(t,e),i=new $n(t,e+1);let s=yt();return this.Lr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new $n(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $n{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return $e.comparator(e.key,t.key)||lt(e.Gr,t.Gr)}static kr(e,t){return lt(e.Gr,t.Gr)||$e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new zn($n.Br)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Yj(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.zr=this.zr.add(new $n(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return pe.resolve(a)}lookupMutationBatch(e,t){return pe.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return pe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?$E:this.Jn-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $n(t,0),i=new $n(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],a=>{const u=this.jr(a.Gr);s.push(u)}),pe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(lt);return t.forEach(i=>{const s=new $n(i,0),a=new $n(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,a],u=>{r=r.add(u.Gr)})}),pe.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;$e.isDocumentKey(s)||(s=s.child(""));const a=new $n(new $e(s),0);let u=new zn(lt);return this.zr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Gr)),!0)},a),pe.resolve(this.Jr(u))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){It(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return pe.forEach(t.mutations,i=>{const s=new $n(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new $n(t,0),i=this.zr.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.Zr=e,this.docs=function(){return new sn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=ta();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ta();const a=t.path,u=new $e(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||uj(lj(p),r)<=0||(i.has(p.key)||h_(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return pe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ye(9500)}Xr(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new PF(this)}getSize(e){return pe.resolve(this.size)}}class PF extends CF{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.persistence=e,this.ei=new Yu(t=>WE(t),YE),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ti=0,this.ni=new nb,this.targetCount=0,this.ri=ph.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),pe.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new ph(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.ar(t),pe.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ei.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),pe.waitFor(s).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),pe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t){this.ii={},this.overlays={},this.si=new o_(0),this.oi=!1,this.oi=!0,this._i=new OF,this.referenceDelegate=e(this),this.ai=new LF(this),this.indexManager=new AF,this.remoteDocumentCache=function(i){return new DF(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new _F(t),this.ci=new IF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new MF(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new VF(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return pe.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class VF extends hj{constructor(e){super(),this.currentSequenceNumber=e}}class rb{constructor(e){this.persistence=e,this.Ti=new nb,this.Ii=null}static Ei(e){return new rb(e)}get di(){if(this.Ii)return this.Ii;throw Ye(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.di,r=>{const i=$e.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,Xe.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return pe.or([()=>pe.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Kg{constructor(e,t){this.persistence=e,this.Ri=new Yu(r=>pj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=RF(this,t)}static Ei(e,t){return new Kg(e,t)}li(){}hi(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return pe.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?pe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,a=>this.gr(e,a,t).next(u=>{u||(r++,s.removeEntry(a,Xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),pe.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dg(e.data.value)),t}gr(e,t,r){return pe.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=yt(),i=yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ib(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return OB()?8:fj(Ir())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new UF;return this.fs(e,t,a).next(u=>{if(s.result=u,this.Is)return this.gs(e,t,a,u.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(jc()<=gt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",Fc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),pe.resolve()):(jc()<=gt.DEBUG&&Oe("QueryEngine","Query:",Fc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(jc()<=gt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",Fc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,io(t))):pe.resolve())}Rs(e,t){if(fx(t))return pe.resolve(null);let r=io(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vT(t,null,"F"),r=io(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=yt(...s);return this.As.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.ps(t,u);return this.ys(t,f,a,c.readTime)?this.Rs(e,vT(t,null,"F")):this.ws(e,f,t,c)}))})))}Vs(e,t,r,i){return fx(t)||i.isEqual(Xe.min())?pe.resolve(null):this.As.getDocuments(e,r).next(s=>{const a=this.ps(t,s);return this.ys(t,a,r,i)?pe.resolve(null):(jc()<=gt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fc(t)),this.ws(e,a,t,aj(i,Ld)).next(u=>u))})}ps(e,t){let r=new zn(FO(e));return t.forEach((i,s)=>{h_(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return jc()<=gt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Fc(t)),this.As.getDocumentsMatchingQuery(e,t,fl.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="LocalStore",BF=3e8;class jF{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new sn(lt),this.Ds=new Yu(s=>WE(s),YE),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kF(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function FF(n,e,t,r){return new jF(n,e,t,r)}async function fM(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let c=yt();for(const f of i){a.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of s){u.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(r,c).next(f=>({Ms:f,removedBatchIds:a,addedBatchIds:u}))})})}function HF(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(u,c,f,p){const g=f.batch,_=g.keys();let A=pe.resolve();return _.forEach(T=>{A=A.next(()=>p.getEntry(c,T)).next(E=>{const S=f.docVersions.get(T);It(S!==null,48541),E.version.compareTo(S)<0&&(g.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),p.addEntry(E)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=yt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function dM(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function qF(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const u=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;u.push(t.ai.removeMatchingKeys(s,p.removedDocuments,g).next(()=>t.ai.addMatchingKeys(s,p.addedDocuments,g)));let A=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(pr.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),i=i.insert(g,A),function(E,S,k){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=BF?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,A,p)&&u.push(t.ai.updateTargetData(s,A))});let c=ta(),f=yt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push($F(s,a,e.documentUpdates).next(p=>{c=p.xs,f=p.Os})),!r.isEqual(Xe.min())){const p=t.ai.getLastRemoteSnapshotVersion(s).next(g=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return pe.waitFor(u).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,f)).next(()=>c)}).then(s=>(t.Ss=i,s))}function $F(n,e,t){let r=yt(),i=yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=ta();return t.forEach((u,c)=>{const f=s.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Xe.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):Oe(sb,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{xs:a,Os:i}})}function GF(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$E),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KF(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,pe.resolve(i)):t.ai.allocateTargetId(r).next(a=>(i=new $a(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function ST(n,e,t){const r=Ze(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ph(a))throw a;Oe(sb,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function wx(n,e,t){const r=Ze(n);let i=Xe.min(),s=yt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,p){const g=Ze(c),_=g.Ds.get(p);return _!==void 0?pe.resolve(g.Ss.get(_)):g.ai.getTargetData(f,p)}(r,a,io(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>r.bs.getDocumentsMatchingQuery(a,e,t?i:Xe.min(),t?s:yt())).next(u=>(WF(r,Dj(e),u),{documents:u,Ns:s})))}function WF(n,e,t){let r=n.vs.get(e)||Xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class Rx{constructor(){this.activeTargetIds=Bj()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YF{constructor(){this.So=new Rx,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Rx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="ConnectivityMonitor";class xx{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Oe(Cx,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Oe(Cx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $m=null;function wT(){return $m===null?$m=function(){return 268435456+Math.round(2147483648*Math.random())}():$m++,"0x"+$m.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="RestConnection",XF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JF{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===jg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const a=wT(),u=this.$o(e,t.toUriEncodedString());Oe(aA,`Sending RPC '${e}' ${a}:`,u,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(c,i,s),this.Ko(e,u,c,r).then(f=>(Oe(aA,`Received RPC '${e}' ${a}: `,f),f),f=>{throw lh(aA,`RPC '${e}' ${a} failed with error: `,f,"url: ",u,"request:",r),f})}Wo(e,t,r,i,s,a){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=XF[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class e6 extends JF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=wT();return new Promise((a,u)=>{const c=new gO;c.setWithCredentials(!0),c.listenOnce(yO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fg.NO_ERROR:const p=c.getResponseJson();Oe(Tr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case fg.TIMEOUT:Oe(Tr,`RPC '${e}' ${s} timed out`),u(new je(ye.DEADLINE_EXCEEDED,"Request time out"));break;case fg.HTTP_ERROR:const g=c.getStatus();if(Oe(Tr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const T=function(S){const k=S.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(k)>=0?k:ye.UNKNOWN}(A.status);u(new je(T,A.message))}else u(new je(ye.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new je(ye.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{s_:e,streamId:s,o_:c.getLastErrorCode(),__:c.getLastError()})}}finally{Oe(Tr,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);Oe(Tr,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",f,r,15)})}a_(e,t,r){const i=wT(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=AO(),u=vO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=s.join("");Oe(Tr,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=a.createWebChannel(p,c);let _=!1,A=!1;const T=new ZF({Go:S=>{A?Oe(Tr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(Oe(Tr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Oe(Tr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},zo:()=>g.close()}),E=(S,k,L)=>{S.listen(k,B=>{try{L(B)}catch(q){setTimeout(()=>{throw q},0)}})};return E(g,id.EventType.OPEN,()=>{A||(Oe(Tr,`RPC '${e}' stream ${i} transport opened.`),T.t_())}),E(g,id.EventType.CLOSE,()=>{A||(A=!0,Oe(Tr,`RPC '${e}' stream ${i} transport closed`),T.r_())}),E(g,id.EventType.ERROR,S=>{A||(A=!0,lh(Tr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),T.r_(new je(ye.UNAVAILABLE,"The operation could not be completed")))}),E(g,id.EventType.MESSAGE,S=>{var k;if(!A){const L=S.data[0];It(!!L,16349);const B=L,q=(B==null?void 0:B.error)||((k=B[0])===null||k===void 0?void 0:k.error);if(q){Oe(Tr,`RPC '${e}' stream ${i} received error:`,q);const V=q.status;let M=function(x){const z=Rn[x];if(z!==void 0)return eM(z)}(V),O=q.message;M===void 0&&(M=ye.INTERNAL,O="Unknown error status: "+V+" with message "+q.message),A=!0,T.r_(new je(M,O)),g.close()}else Oe(Tr,`RPC '${e}' stream ${i} received:`,L),T.i_(L)}}),E(u,_O.STAT_EVENT,S=>{S.stat===dT.PROXY?Oe(Tr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===dT.NOPROXY&&Oe(Tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.n_()},0),T}}function lA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(n){return new iF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="PersistentStream";class mM{constructor(e,t,r,i,s,a,u,c){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new pM(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(ea(t.toString()),ea("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new je(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Oe(kx,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Oe(kx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t6 extends mM{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=aF(this.serializer,e),r=function(s){if(!("targetChange"in s))return Xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Xe.min():a.readTime?oo(a.readTime):Xe.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=bT(this.serializer),t.addTarget=function(s,a){let u;const c=a.target;if(u=_T(c)?{documents:cF(s,c)}:{query:hF(s,c).gt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=rM(s,a.resumeToken);const f=AT(s,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Xe.min())>0){u.readTime=Gg(s,a.snapshotVersion.toTimestamp());const f=AT(s,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=dF(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=bT(this.serializer),t.removeTarget=e,this.F_(t)}}class n6 extends mM{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=uF(e.writeResults,e.commitTime),r=oo(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=bT(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lF(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{}class i6 extends r6{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new je(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Qo(e,TT(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(ye.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Wo(e,TT(t,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new je(ye.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class s6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ea(t),this.ea=!1):Oe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du="RemoteStore";class o6{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(a=>{r.enqueueAndForget(async()=>{Qu(this)&&(Oe(Du,"Restarting streams for network reachability change."),await async function(c){const f=Ze(c);f.aa.add(4),await dp(f),f.la.set("Unknown"),f.aa.delete(4),await g_(f)}(this))})}),this.la=new s6(r,i)}}async function g_(n){if(Qu(n))for(const e of n.ua)await e(!0)}async function dp(n){for(const e of n.ua)await e(!1)}function gM(n,e){const t=Ze(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),ub(t)?lb(t):Lh(t).b_()&&ab(t,e))}function ob(n,e){const t=Ze(n),r=Lh(t);t._a.delete(e),r.b_()&&yM(t,e),t._a.size===0&&(r.b_()?r.v_():Qu(t)&&t.la.set("Unknown"))}function ab(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lh(n).U_(e)}function yM(n,e){n.ha.Ke(e),Lh(n).K_(e)}function lb(n){n.ha=new eF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Lh(n).start(),n.la.ta()}function ub(n){return Qu(n)&&!Lh(n).w_()&&n._a.size>0}function Qu(n){return Ze(n).aa.size===0}function _M(n){n.ha=void 0}async function a6(n){n.la.set("Online")}async function l6(n){n._a.forEach((e,t)=>{ab(n,e)})}async function u6(n,e){_M(n),ub(n)?(n.la.ia(e),lb(n)):n.la.set("Unknown")}async function c6(n,e,t){if(n.la.set("Online"),e instanceof nM&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i._a.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i._a.delete(u),i.ha.removeTarget(u))}(n,e)}catch(r){Oe(Du,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wg(n,r)}else if(e instanceof gg?n.ha.Xe(e):e instanceof tM?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Xe.min()))try{const r=await dM(n.localStore);t.compareTo(r)>=0&&await function(s,a){const u=s.ha.It(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=s._a.get(f);p&&s._a.set(f,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const p=s._a.get(c);if(!p)return;s._a.set(c,p.withResumeToken(pr.EMPTY_BYTE_STRING,p.snapshotVersion)),yM(s,c);const g=new $a(p.target,c,f,p.sequenceNumber);ab(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Oe(Du,"Failed to raise snapshot:",r),await Wg(n,r)}}async function Wg(n,e,t){if(!Ph(e))throw e;n.aa.add(1),await dp(n),n.la.set("Offline"),t||(t=()=>dM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Oe(Du,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await g_(n)})}function vM(n,e){return e().catch(t=>Wg(n,t,e))}async function y_(n){const e=Ze(n),t=gl(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:$E;for(;h6(e);)try{const i=await GF(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,f6(e,i)}catch(i){await Wg(e,i)}AM(e)&&TM(e)}function h6(n){return Qu(n)&&n.oa.length<10}function f6(n,e){n.oa.push(e);const t=gl(n);t.b_()&&t.W_&&t.G_(e.mutations)}function AM(n){return Qu(n)&&!gl(n).w_()&&n.oa.length>0}function TM(n){gl(n).start()}async function d6(n){gl(n).H_()}async function p6(n){const e=gl(n);for(const t of n.oa)e.G_(t.mutations)}async function m6(n,e,t){const r=n.oa.shift(),i=ZE.from(r,e,t);await vM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await y_(n)}async function g6(n,e){e&&gl(n).W_&&await async function(r,i){if(function(a){return Jj(a)&&a!==ye.ABORTED}(i.code)){const s=r.oa.shift();gl(r).D_(),await vM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await y_(r)}}(n,e),AM(n)&&TM(n)}async function Ix(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Oe(Du,"RemoteStore received new credentials");const r=Qu(t);t.aa.add(3),await dp(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await g_(t)}async function y6(n,e){const t=Ze(n);e?(t.aa.delete(2),await g_(t)):e||(t.aa.add(2),await dp(t),t.la.set("Unknown"))}function Lh(n){return n.Pa||(n.Pa=function(t,r,i){const s=Ze(t);return s.Y_(),new t6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:a6.bind(null,n),Jo:l6.bind(null,n),Zo:u6.bind(null,n),Q_:c6.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),ub(n)?lb(n):n.la.set("Unknown")):(await n.Pa.stop(),_M(n))})),n.Pa}function gl(n){return n.Ta||(n.Ta=function(t,r,i){const s=Ze(t);return s.Y_(),new n6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:d6.bind(null,n),Zo:g6.bind(null,n),z_:p6.bind(null,n),j_:m6.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await y_(n)):(await n.Ta.stop(),n.oa.length>0&&(Oe(Du,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new cb(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hb(n,e){if(ea("AsyncQueue",`${e}: ${n}`),Ph(n))return new je(ye.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{static emptySet(e){return new Zc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=sd(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.Ia=new sn($e.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ye(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class mh{constructor(e,t,r,i,s,a,u,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new mh(e,t,Zc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class v6{constructor(){this.queries=Ox(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=Ze(t),s=i.queries;i.queries=Ox(),s.forEach((a,u)=>{for(const c of u.Ra)c.onError(r)})})(this,new je(ye.ABORTED,"Firestore shutting down"))}}function Ox(){return new Yu(n=>jO(n),c_)}async function EM(n,e){const t=Ze(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new _6,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=hb(a,`Initialization of query '${Fc(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&fb(t)}async function bM(n,e){const t=Ze(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Ra.indexOf(e);a>=0&&(s.Ra.splice(a,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function A6(n,e){const t=Ze(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Ra)u.pa(i)&&(r=!0);a.Aa=i}}r&&fb(t)}function T6(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function fb(n){n.fa.forEach(e=>{e.next()})}var RT,Mx;(Mx=RT||(RT={})).ya="default",Mx.Cache="cache";class SM{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new mh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==RT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.key=e}}class RM{constructor(e){this.key=e}}class E6{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=yt(),this.mutatedKeys=yt(),this.Ua=FO(e),this.Ka=new Zc(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new Nx,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),A=h_(this.query,g)?g:null,T=!!_&&this.mutatedKeys.has(_.key),E=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let S=!1;_&&A?_.data.isEqual(A.data)?T!==E&&(r.track({type:3,doc:A}),S=!0):this.ja(_,A)||(r.track({type:2,doc:A}),S=!0,(c&&this.Ua(A,c)>0||f&&this.Ua(A,f)<0)&&(u=!0)):!_&&A?(r.track({type:0,doc:A}),S=!0):_&&!A&&(r.track({type:1,doc:_}),S=!0,(c||f)&&(u=!0)),S&&(A?(a=a.add(A),s=E?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ka:a,za:r,ys:u,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((p,g)=>function(A,T){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:S})}};return E(A)-E(T)}(p.type,g.type)||this.Ua(p.doc,g.doc)),this.Ha(r),i=i!=null&&i;const u=t&&!i?this.Ja():[],c=this.$a.size===0&&this.current&&!i?1:0,f=c!==this.Qa;return this.Qa=c,a.length!==0||f?{snapshot:new mh(this.query,e.Ka,s,a,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:u}:{Ya:u}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Nx,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=yt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new RM(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new wM(r))}),t}Xa(e){this.qa=e.Ns,this.$a=yt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return mh.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const db="SyncEngine";class b6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class S6{constructor(e){this.key=e,this.tu=!1}}class w6{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Yu(u=>jO(u),c_),this.iu=new Map,this.su=new Set,this.ou=new sn($e.comparator),this._u=new Map,this.au=new nb,this.uu={},this.cu=new Map,this.lu=ph.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function R6(n,e,t=!0){const r=OM(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await CM(r,e,t,!0),i}async function C6(n,e){const t=OM(n);await CM(t,e,!0,!1)}async function CM(n,e,t,r){const i=await KF(n.localStore,io(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await x6(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&gM(n.remoteStore,i),u}async function x6(n,e,t,r,i){n.Pu=(g,_,A)=>async function(E,S,k,L){let B=S.view.Ga(k);B.ys&&(B=await wx(E.localStore,S.query,!1).then(({documents:O})=>S.view.Ga(O,B)));const q=L&&L.targetChanges.get(S.targetId),V=L&&L.targetMismatches.get(S.targetId)!=null,M=S.view.applyChanges(B,E.isPrimaryClient,q,V);return Px(E,S.targetId,M.Ya),M.snapshot}(n,g,_,A);const s=await wx(n.localStore,e,!0),a=new E6(e,s.Ns),u=a.Ga(s.documents),c=fp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,c);Px(n,t,f.Ya);const p=new b6(e,t,a);return n.ru.set(e,p),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),f.snapshot}async function k6(n,e,t){const r=Ze(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(a=>!c_(a,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ST(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ob(r.remoteStore,i.targetId),CT(r,i.targetId)}).catch(Dh)):(CT(r,i.targetId),await ST(r.localStore,i.targetId,!0))}async function I6(n,e){const t=Ze(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ob(t.remoteStore,r.targetId))}async function N6(n,e,t){const r=U6(n);try{const i=await function(a,u){const c=Ze(a),f=Nn.now(),p=u.reduce((A,T)=>A.add(T.key),yt());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let T=ta(),E=yt();return c.Cs.getEntries(A,p).next(S=>{T=S,T.forEach((k,L)=>{L.isValidDocument()||(E=E.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,T)).next(S=>{g=S;const k=[];for(const L of u){const B=Kj(L,g.get(L.key).overlayedDocument);B!=null&&k.push(new wl(L.key,B,DO(B.value.mapValue),so.exists(!0)))}return c.mutationQueue.addMutationBatch(A,f,k,u)}).next(S=>{_=S;const k=S.applyToLocalDocumentSet(g,E);return c.documentOverlayCache.saveOverlays(A,S.batchId,k)})}).then(()=>({batchId:_.batchId,changes:qO(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,c){let f=a.uu[a.currentUser.toKey()];f||(f=new sn(lt)),f=f.insert(u,c),a.uu[a.currentUser.toKey()]=f}(r,i.batchId,t),await pp(r,i.changes),await y_(r.remoteStore)}catch(i){const s=hb(i,"Failed to persist write");t.reject(s)}}async function xM(n,e){const t=Ze(n);try{const r=await qF(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t._u.get(s);a&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.tu=!0:i.modifiedDocuments.size>0?It(a.tu,14607):i.removedDocuments.size>0&&(It(a.tu,42227),a.tu=!1))}),await pp(t,r,e)}catch(r){await Dh(r)}}function Dx(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,a)=>{const u=a.view.ga(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){const c=Ze(a);c.onlineState=u;let f=!1;c.queries.forEach((p,g)=>{for(const _ of g.Ra)_.ga(u)&&(f=!0)}),f&&fb(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O6(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let a=new sn($e.comparator);a=a.insert(s,wr.newNoDocument(s,Xe.min()));const u=yt().add(s),c=new p_(Xe.min(),new Map,new sn(lt),a,u);await xM(r,c),r.ou=r.ou.remove(s),r._u.delete(e),pb(r)}else await ST(r.localStore,e,!1).then(()=>CT(r,e,t)).catch(Dh)}async function M6(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=await HF(t.localStore,e);IM(t,r,null),kM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pp(t,i)}catch(i){await Dh(i)}}async function D6(n,e,t){const r=Ze(n);try{const i=await function(a,u){const c=Ze(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(It(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>c.localDocuments.getDocuments(f,p))})}(r.localStore,e);IM(r,e,t),kM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pp(r,i)}catch(i){await Dh(i)}}function kM(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function IM(n,e,t){const r=Ze(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function CT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||NM(n,r)})}function NM(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(ob(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),pb(n))}function Px(n,e,t){for(const r of t)r instanceof wM?(n.au.addReference(r.key,e),P6(n,r)):r instanceof RM?(Oe(db,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||NM(n,r.key)):Ye(19791,{Iu:r})}function P6(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(Oe(db,"New document in limbo: "+t),n.su.add(r),pb(n))}function pb(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new $e(Yt.fromString(e)),r=n.lu.next();n._u.set(r,new S6(t)),n.ou=n.ou.insert(t,r),gM(n.remoteStore,new $a(io(QE(t.path)),r,"TargetPurposeLimboResolution",o_.le))}}async function pp(n,e,t){const r=Ze(n),i=[],s=[],a=[];r.ru.isEmpty()||(r.ru.forEach((u,c)=>{a.push(r.Pu(c,e,t).then(f=>{var p;if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=ib.Ps(c.targetId,f);s.push(g)}}))}),await Promise.all(a),r.nu.Q_(i),await async function(c,f){const p=Ze(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>pe.forEach(f,_=>pe.forEach(_.ls,A=>p.persistence.referenceDelegate.addReference(g,_.targetId,A)).next(()=>pe.forEach(_.hs,A=>p.persistence.referenceDelegate.removeReference(g,_.targetId,A)))))}catch(g){if(!Ph(g))throw g;Oe(sb,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const A=p.Ss.get(_),T=A.snapshotVersion,E=A.withLastLimboFreeSnapshotVersion(T);p.Ss=p.Ss.insert(_,E)}}}(r.localStore,s))}async function L6(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Oe(db,"User change. New user:",e.toKey());const r=await fM(t.localStore,e);t.currentUser=e,function(s,a){s.cu.forEach(u=>{u.forEach(c=>{c.reject(new je(ye.CANCELLED,a))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pp(t,r.Ms)}}function V6(n,e){const t=Ze(n),r=t._u.get(e);if(r&&r.tu)return yt().add(r.key);{let i=yt();const s=t.iu.get(e);if(!s)return i;for(const a of s){const u=t.ru.get(a);i=i.unionWith(u.view.Wa)}return i}}function OM(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O6.bind(null,e),e.nu.Q_=A6.bind(null,e.eventManager),e.nu.Tu=T6.bind(null,e.eventManager),e}function U6(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D6.bind(null,e),e}class Yg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=m_(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return FF(this.persistence,new zF,e.initialUser,this.serializer)}Ru(e){return new hM(rb.Ei,this.serializer)}Au(e){return new YF}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yg.provider={build:()=>new Yg};class z6 extends Yg{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){It(this.persistence.referenceDelegate instanceof Kg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SF(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new hM(r=>Kg.Ei(r,t),this.serializer)}}class xT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=L6.bind(null,this.syncEngine),await y6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v6}()}createDatastore(e){const t=m_(e.databaseInfo.databaseId),r=function(s){return new e6(s)}(e.databaseInfo);return function(s,a,u,c){return new i6(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,u){return new o6(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Dx(this.syncEngine,t,0),function(){return xx.C()?new xx:new QF}())}createSyncEngine(e,t){return function(i,s,a,u,c,f,p){const g=new w6(i,s,a,u,c,f);return p&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ze(i);Oe(Du,"RemoteStore shutting down."),s.aa.add(5),await dp(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}xT.provider={build:()=>new xT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ea("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="FirestoreClient";class B6{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=SO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Oe(yl,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Oe(yl,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hb(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uA(n,e){n.asyncQueue.verifyOperationInProgress(),Oe(yl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Lx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await j6(n);Oe(yl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ix(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ix(e.remoteStore,i)),n._onlineComponents=e}async function j6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe(yl,"Using user provided OfflineComponentProvider");try{await uA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;lh("Error using user provided cache. Falling back to memory cache: "+t),await uA(n,new Yg)}}else Oe(yl,"Using default OfflineComponentProvider"),await uA(n,new z6(void 0));return n._offlineComponents}async function DM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe(yl,"Using user provided OnlineComponentProvider"),await Lx(n,n._uninitializedComponentsProvider._online)):(Oe(yl,"Using default OnlineComponentProvider"),await Lx(n,new xT))),n._onlineComponents}function F6(n){return DM(n).then(e=>e.syncEngine)}async function PM(n){const e=await DM(n),t=e.eventManager;return t.onListen=R6.bind(null,e.syncEngine),t.onUnlisten=k6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=I6.bind(null,e.syncEngine),t}function H6(n,e,t={}){const r=new Yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,f){const p=new MM({next:_=>{p.yu(),a.enqueueAndForget(()=>bM(s,g));const A=_.docs.has(u);!A&&_.fromCache?f.reject(new je(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&_.fromCache&&c&&c.source==="server"?f.reject(new je(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new SM(QE(u.path),p,{includeMetadataChanges:!0,Fa:!0});return EM(s,g)}(await PM(n),n.asyncQueue,e,t,r)),r.promise}function q6(n,e,t={}){const r=new Yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,f){const p=new MM({next:_=>{p.yu(),a.enqueueAndForget(()=>bM(s,g)),_.fromCache&&c.source==="server"?f.reject(new je(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new SM(u,p,{includeMetadataChanges:!0,Fa:!0});return EM(s,g)}(await PM(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(n,e,t){if(!t)throw new je(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $6(n,e,t,r){if(e===!0&&r===!0)throw new je(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ux(n){if(!$e.isDocumentKey(n))throw new je(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zx(n){if($e.isDocumentKey(n))throw new je(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function _l(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mb(n);throw new je(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="firestore.googleapis.com",Bx=!0;class jx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new je(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UM,this.ssl=Bx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Bx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EF)throw new je(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new je(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new je(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new je(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class __{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J3;switch(r.type){case"firstParty":return new nj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Vx.get(t);r&&(Oe("ComponentProvider","Removing Datastore"),Vx.delete(t),r.terminate())}(this),Promise.resolve()}}function G6(n,e,t,r={}){var i;const s=(n=_l(n,__))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;s.host!==UM&&s.host!==u&&lh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:u,ssl:!1,emulatorOptions:r});if(!Jo(c,a)&&(n._setSettings(c),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=br.MOCK_USER;else{f=sO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new je(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new br(g)}n._authCredentials=new Z3(new EO(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new v_(this.firestore,e,this._query)}}class Di{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Di(this.firestore,e,this._key)}}class tl extends v_{constructor(e,t,r){super(e,t,QE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Di(this.firestore,null,new $e(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function gb(n,e,...t){if(n=fn(n),VM("collection","path",e),n instanceof __){const r=Yt.fromString(e,...t);return zx(r),new tl(n,null,r)}{if(!(n instanceof Di||n instanceof tl))throw new je(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return zx(r),new tl(n.firestore,null,r)}}function Pu(n,e,...t){if(n=fn(n),arguments.length===1&&(e=SO.newId()),VM("doc","path",e),n instanceof __){const r=Yt.fromString(e,...t);return Ux(r),new Di(n,null,new $e(r))}{if(!(n instanceof Di||n instanceof tl))throw new je(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return Ux(r),new Di(n.firestore,n instanceof tl?n.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="AsyncQueue";class Hx{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new pM(this,"async_queue_retry"),this.ju=()=>{const r=lA();r&&Oe(Fx,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=lA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=lA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Yo;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Ph(e))throw e;Oe(Fx,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,ea("INTERNAL UNHANDLED ERROR: ",qx(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=cb.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&Ye(47125,{ec:qx(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function qx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class mp extends __{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Hx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hx(e),this._firestoreClient=void 0,await e}}}function K6(n,e){const t=typeof n=="object"?n:HE(),r=typeof n=="string"?n:jg,i=Oh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=nO("firestore");s&&G6(i,...s)}return i}function yb(n){if(n._terminated)throw new je(ye.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||W6(n),n._firestoreClient}function W6(n){var e,t,r;const i=n._freezeSettings(),s=function(u,c,f,p){return new yj(u,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,LM(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new B6(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gh(pr.fromBase64String(e))}catch(t){throw new je(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gh(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=/^__.*__$/;class Q6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wl(e,this.data,this.fieldMask,t,this.fieldTransforms):new hp(e,this.data,t,this.fieldTransforms)}}class zM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{oc:n})}}class T_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new T_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Qg(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(BM(this.oc)&&Y6.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class X6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||m_(e)}dc(e,t,r,i=!1){return new T_({oc:e,methodName:t,Ec:r,path:fr.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jM(n){const e=n._freezeSettings(),t=m_(n._databaseId);return new X6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function J6(n,e,t,r,i,s={}){const a=n.dc(s.merge||s.mergeFields?2:0,e,t,i);bb("Data must be an object, but it was:",a,r);const u=HM(r,a);let c,f;if(s.merge)c=new Ii(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=kT(e,g,t);if(!a.contains(_))throw new je(ye.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);$M(p,_)||p.push(_)}c=new Ii(p),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new Q6(new ni(u),c,f)}class E_ extends Vh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof E_}}function FM(n,e,t){return new T_({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ab extends Vh{_toFieldTransform(e){return new JE(e.path,new Bd)}isEqual(e){return e instanceof Ab}}class Tb extends Vh{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=FM(this,e,!0),r=this.Ac.map(s=>Uh(s,t)),i=new fh(r);return new JE(e.path,i)}isEqual(e){return e instanceof Tb&&Jo(this.Ac,e.Ac)}}class Eb extends Vh{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=FM(this,e,!0),r=this.Ac.map(s=>Uh(s,t)),i=new dh(r);return new JE(e.path,i)}isEqual(e){return e instanceof Eb&&Jo(this.Ac,e.Ac)}}function Z6(n,e,t,r){const i=n.dc(1,e,t);bb("Data must be an object, but it was:",i,r);const s=[],a=ni.empty();Sl(r,(c,f)=>{const p=Sb(e,c,t);f=fn(f);const g=i.hc(p);if(f instanceof E_)s.push(p);else{const _=Uh(f,g);_!=null&&(s.push(p),a.set(p,_))}});const u=new Ii(s);return new zM(a,u,i.fieldTransforms)}function e9(n,e,t,r,i,s){const a=n.dc(1,e,t),u=[kT(e,r,t)],c=[i];if(s.length%2!=0)throw new je(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(kT(e,s[_])),c.push(s[_+1]);const f=[],p=ni.empty();for(let _=u.length-1;_>=0;--_)if(!$M(f,u[_])){const A=u[_];let T=c[_];T=fn(T);const E=a.hc(A);if(T instanceof E_)f.push(A);else{const S=Uh(T,E);S!=null&&(f.push(A),p.set(A,S))}}const g=new Ii(f);return new zM(p,g,a.fieldTransforms)}function Uh(n,e){if(qM(n=fn(n)))return bb("Unsupported field value:",e,n),HM(n,e);if(n instanceof Vh)return function(r,i){if(!BM(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const u of r){let c=Uh(u,i.Pc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Nn.fromDate(r);return{timestampValue:Gg(i.serializer,s)}}if(r instanceof Nn){const s=new Nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gg(i.serializer,s)}}if(r instanceof _b)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gh)return{bytesValue:rM(i.serializer,r._byteString)};if(r instanceof Di){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vb)return function(a,u){return{mapValue:{fields:{[OO]:{stringValue:MO},[Fg]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Tc("VectorValues must only contain numeric values.");return XE(u.serializer,f)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${mb(r)}`)}(n,e)}function HM(n,e){const t={};return RO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sl(n,(r,i)=>{const s=Uh(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function qM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof _b||n instanceof gh||n instanceof Di||n instanceof Vh||n instanceof vb)}function bb(n,e,t){if(!qM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=mb(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function kT(n,e,t){if((e=fn(e))instanceof A_)return e._internalPath;if(typeof e=="string")return Sb(n,e);throw Qg("Field path arguments must be of type string or ",n,!1,void 0,t)}const t9=new RegExp("[~\\*/\\[\\]]");function Sb(n,e,t){if(e.search(t9)>=0)throw Qg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new A_(...e.split("."))._internalPath}catch{throw Qg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qg(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new je(ye.INVALID_ARGUMENT,u+n+c)}function $M(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Di(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class n9 extends GM{data(){return super.data()}}function KM(n,e){return typeof e=="string"?Sb(n,e):e instanceof A_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new je(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i9{convertValue(e,t="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Fg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>_n(a.doubleValue));return new vb(s)}convertGeoPoint(e){return new _b(_n(e.latitude),_n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=l_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vd(e));default:return null}}convertTimestamp(e){const t=dl(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);It(uM(r),9688,{name:e});const i=new Ud(r.get(1),r.get(3)),s=new $e(r.popFirst(5));return i.isEqual(t)||ea(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WM extends GM{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(KM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yg extends WM{data(e={}){return super.data(e)}}class o9{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ad(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yg(this._firestore,this._userDataWriter,r.key,r,new ad(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const c=new yg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ad(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new yg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ad(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:a9(u.type),doc:c,oldIndex:f,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function a9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(n){n=_l(n,Di);const e=_l(n.firestore,mp);return H6(yb(e),n._key).then(t=>u9(e,n,t))}class QM extends i9{constructor(e){super(),this.firestore=e}convertBytes(e){return new gh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Di(this.firestore,null,t)}}function XM(n){n=_l(n,v_);const e=_l(n.firestore,mp),t=yb(e),r=new QM(e);return r9(n._query),q6(t,n._query).then(i=>new o9(e,r,n,i))}function b_(n,e,t,...r){n=_l(n,Di);const i=_l(n.firestore,mp),s=jM(i);let a;return a=typeof(e=fn(e))=="string"||e instanceof A_?e9(s,"updateDoc",n._key,e,t,r):Z6(s,"updateDoc",n._key,e),JM(i,[a.toMutation(n._key,so.exists(!0))])}function l9(n,e){const t=_l(n.firestore,mp),r=Pu(n),i=s9(n.converter,e);return JM(t,[J6(jM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,so.exists(!1))]).then(()=>r)}function JM(n,e){return function(r,i){const s=new Yo;return r.asyncQueue.enqueueAndForget(async()=>N6(await F6(r),i,s)),s.promise}(yb(n),e)}function u9(n,e,t){const r=t.docs.get(e._key),i=new QM(n);return new WM(n,i,e._key,r,new ad(t.hasPendingWrites,t.fromCache),e.converter)}function c9(){return new Ab("serverTimestamp")}function ZM(...n){return new Tb("arrayUnion",n)}function h9(...n){return new Eb("arrayRemove",n)}(function(e,t=!0){(function(i){Mh=i})(Wu),Rs(new hs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new mp(new ej(r.getProvider("auth-internal")),new rj(a,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new je(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ud(f.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),ri(YC,QC,e),ri(YC,QC,"esm2017")})();function f9(n){let t=window.scrollY||window.pageYOffset,r=n.getBoundingClientRect().top+t,i=performance.now();function s(u){const c=(u-i)/800;c<1?(window.scrollTo(0,t+(r-t)*a(c)),requestAnimationFrame(s)):window.scrollTo(0,r)}function a(u){return u<.5?4*u*u*u:(u-1)*(2*u-2)*(2*u-2)+1}requestAnimationFrame(s)}function yh(n){const e=document.querySelector(n);e&&f9(e)}function d9({isOpened:n}){const[e,t]=G.useState(!1);return C.jsx("button",{className:"ham-button",children:C.jsxs("svg",{className:`hamburger ${e?n?"open":"close":""}`,onClick:()=>{t(!0)},fill:"#c1ff72",viewBox:"0 0 100 100",width:"50",children:[C.jsx("g",{className:"top-group",children:C.jsx("line",{className:"line top",x1:"10",x2:"90",y1:"30",y2:"30"})}),C.jsx("g",{className:"middle-group",children:C.jsx("line",{className:"line middle",x1:"10",x2:"90",y1:"50",y2:"50"})}),C.jsx("g",{className:"bottom-group",children:C.jsx("line",{className:"line bottom",x1:"10",x2:"90",y1:"70",y2:"70"})})]})})}var p9="firebase",m9="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri(p9,m9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebasestorage.googleapis.com",tD="storageBucket",g9=2*60*1e3,y9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends ms{constructor(e,t,r=0){super(cA(e),`Firebase Storage: ${t} (${cA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function cA(n){return"storage/"+n}function wb(){const n="An unknown error occurred, please check the error payload for server response.";return new pn(dn.UNKNOWN,n)}function _9(n){return new pn(dn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function v9(n){return new pn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function A9(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pn(dn.UNAUTHENTICATED,n)}function T9(){return new pn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function E9(n){return new pn(dn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function b9(){return new pn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S9(){return new pn(dn.CANCELED,"User canceled the upload/download.")}function w9(n){return new pn(dn.INVALID_URL,"Invalid URL '"+n+"'.")}function R9(n){return new pn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function C9(){return new pn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tD+"' property when initializing the app?")}function x9(){return new pn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function k9(){return new pn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function I9(n){return new pn(dn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function IT(n){return new pn(dn.INVALID_ARGUMENT,n)}function nD(){return new pn(dn.APP_DELETED,"The Firebase app was deleted.")}function N9(n){return new pn(dn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _d(n,e){return new pn(dn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $f(n){throw new pn(dn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ni.makeFromUrl(e,t)}catch{return new Ni(e,"")}if(r.path==="")return r;throw R9(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const p="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",A=new RegExp(`^https?://${g}/${p}/b/${i}/o${_}`,"i"),T={bucket:1,path:3},E=t===eD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",k=new RegExp(`^https?://${E}/${i}/${S}`,"i"),B=[{regex:u,indices:c,postModify:s},{regex:A,indices:T,postModify:f},{regex:k,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<B.length;q++){const V=B[q],M=V.regex.exec(e);if(M){const O=M[V.indices.bucket];let I=M[V.indices.path];I||(I=""),r=new Ni(O,I),V.postModify(r);break}}if(r==null)throw w9(e);return r}}class O9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(n,e,t){let r=1,i=null,s=null,a=!1,u=0;function c(){return u===2}let f=!1;function p(...S){f||(f=!0,e.apply(null,S))}function g(S){i=setTimeout(()=>{i=null,n(A,c())},S)}function _(){s&&clearTimeout(s)}function A(S,...k){if(f){_();return}if(S){_(),p.call(null,S,...k);return}if(c()||a){_(),p.call(null,S,...k);return}r<64&&(r*=2);let B;u===1?(u=2,B=0):B=(r+Math.random())*1e3,g(B)}let T=!1;function E(S){T||(T=!0,_(),!f&&(i!==null?(S||(u=2),clearTimeout(i),g(0)):S||(u=1)))}return g(0),s=setTimeout(()=>{a=!0,E(!0)},t),E}function D9(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(n){return n!==void 0}function L9(n){return typeof n=="object"&&!Array.isArray(n)}function Rb(n){return typeof n=="string"||n instanceof String}function $x(n){return Cb()&&n instanceof Blob}function Cb(){return typeof Blob<"u"}function Gx(n,e,t,r){if(r<e)throw IT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw IT(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function rD(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var bu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(bu||(bu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,t,r,i,s,a,u,c,f,p,g,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=g,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,T)=>{this.resolve_=A,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Gm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===bu.NO_ERROR,c=s.getStatus();if(!u||V9(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===bu.ABORT;r(!1,new Gm(!1,null,p));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Gm(f,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());P9(c)?s(c):s()}catch(c){a(c)}else if(u!==null){const c=wb();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(i.canceled){const c=this.appDelete_?nD():S9();a(c)}else{const c=b9();a(c)}};this.canceled_?t(!1,new Gm(!1,null,!0)):this.backoffId_=M9(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&D9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function z9(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function B9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function j9(n,e){e&&(n["X-Firebase-GMPID"]=e)}function F9(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function H9(n,e,t,r,i,s,a=!0){const u=rD(n.urlParams),c=n.url+u,f=Object.assign({},n.headers);return j9(f,e),z9(f,t),B9(f,s),F9(f,r),new U9(c,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $9(...n){const e=q9();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Cb())return new Blob(n);throw new pn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function G9(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(n){if(typeof atob>"u")throw I9("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hA{constructor(e,t){this.data=e,this.contentType=t||null}}function W9(n,e){switch(n){case eo.RAW:return new hA(iD(e));case eo.BASE64:case eo.BASE64URL:return new hA(sD(n,e));case eo.DATA_URL:return new hA(Q9(e),X9(e))}throw wb()}function iD(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Y9(n){let e;try{e=decodeURIComponent(n)}catch{throw _d(eo.DATA_URL,"Malformed data URL.")}return iD(e)}function sD(n,e){switch(n){case eo.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw _d(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case eo.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw _d(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=K9(e)}catch(i){throw i.message.includes("polyfill")?i:_d(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class oD{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw _d(eo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=J9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Q9(n){const e=new oD(n);return e.base64?sD(eo.BASE64,e.rest):Y9(e.rest)}function X9(n){return new oD(n).contentType}function J9(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t){let r=0,i="";$x(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if($x(this.data_)){const r=this.data_,i=G9(r,e,t);return i===null?null:new za(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new za(r,!0)}}static getBlob(...e){if(Cb()){const t=e.map(r=>r instanceof za?r.data_:r);return new za($9.apply(null,t))}else{const t=e.map(a=>Rb(a)?W9(eo.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let u=0;u<a.length;u++)i[s++]=a[u]}),new za(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(n){let e;try{e=JSON.parse(n)}catch{return null}return L9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function e5(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function lD(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(n,e){return e}let zr=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||t5}},Km=null;function n5(n){return!Rb(n)||n.length<2?n:lD(n)}function uD(){if(Km)return Km;const n=[];n.push(new zr("bucket")),n.push(new zr("generation")),n.push(new zr("metageneration")),n.push(new zr("name","fullPath",!0));function e(s,a){return n5(a)}const t=new zr("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new zr("size");return i.xform=r,n.push(i),n.push(new zr("timeCreated")),n.push(new zr("updated")),n.push(new zr("md5Hash",null,!0)),n.push(new zr("cacheControl",null,!0)),n.push(new zr("contentDisposition",null,!0)),n.push(new zr("contentEncoding",null,!0)),n.push(new zr("contentLanguage",null,!0)),n.push(new zr("contentType",null,!0)),n.push(new zr("metadata","customMetadata",!0)),Km=n,Km}function r5(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Ni(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function i5(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return r5(r,n),r}function cD(n,e,t){const r=aD(e);return r===null?null:i5(n,r,t)}function s5(n,e,t,r){const i=aD(e);if(i===null||!Rb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const p=n.bucket,g=n.fullPath,_="/b/"+a(p)+"/o/"+a(g),A=xb(_,t,r),T=rD({alt:"media",token:f});return A+T})[0]}function o5(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class hD{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(n){if(!n)throw wb()}function a5(n,e){function t(r,i){const s=cD(n,i,e);return fD(s!==null),s}return t}function l5(n,e){function t(r,i){const s=cD(n,i,e);return fD(s!==null),s5(s,i,n.host,n._protocol)}return t}function dD(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=T9():i=A9():t.getStatus()===402?i=v9(n.bucket):t.getStatus()===403?i=E9(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function u5(n){const e=dD(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=_9(n.path)),s.serverResponse=i.serverResponse,s}return t}function c5(n,e,t){const r=e.fullServerUrl(),i=xb(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,u=new hD(i,s,l5(n,t),a);return u.errorHandler=u5(e),u}function h5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function f5(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=h5(null,e)),r}function d5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let B="";for(let q=0;q<2;q++)B=B+Math.random().toString().slice(2);return B}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const f=f5(e,r,i),p=o5(f,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+c+"--",A=za.getBlob(g,r,_);if(A===null)throw x9();const T={name:f.fullPath},E=xb(s,n.host,n._protocol),S="POST",k=n.maxUploadRetryTime,L=new hD(E,S,a5(n,t),k);return L.urlParams=T,L.headers=a,L.body=A.uploadData(),L.errorHandler=dD(e),L}class p5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw $f("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $f("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $f("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $f("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $f("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m5 extends p5{initXhr(){this.xhr_.responseType="text"}}function pD(){return new m5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this._service=e,t instanceof Ni?this._location=t:this._location=Ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lu(e,t)}get root(){const e=new Ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lD(this._location.path)}get storage(){return this._service}get parent(){const e=Z9(this._location.path);if(e===null)return null;const t=new Ni(this._location.bucket,e);return new Lu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw N9(e)}}function g5(n,e,t){n._throwIfRoot("uploadBytes");const r=d5(n.storage,n._location,uD(),new za(e,!0),t);return n.storage.makeRequestWithTokens(r,pD).then(i=>({metadata:i,ref:n}))}function y5(n){n._throwIfRoot("getDownloadURL");const e=c5(n.storage,n._location,uD());return n.storage.makeRequestWithTokens(e,pD).then(t=>{if(t===null)throw k9();return t})}function _5(n,e){const t=e5(n._location.path,e),r=new Ni(n._location.bucket,t);return new Lu(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(n){return/^[A-Za-z]+:\/\//.test(n)}function A5(n,e){return new Lu(n,e)}function mD(n,e){if(n instanceof kb){const t=n;if(t._bucket==null)throw C9();const r=new Lu(t,t._bucket);return e!=null?mD(r,e):r}else return e!==void 0?_5(n,e):n}function T5(n,e){if(e&&v5(e)){if(n instanceof kb)return A5(n,e);throw IT("To use ref(service, url), the first argument must be a Storage instance.")}else return mD(n,e)}function Kx(n,e){const t=e==null?void 0:e[tD];return t==null?null:Ni.makeFromBucketSpec(t,n)}function E5(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:sO(i,n.app.options.projectId))}class kb{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=eD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=g9,this._maxUploadRetryTime=y9,this._requests=new Set,i!=null?this._bucket=Ni.makeFromBucketSpec(i,this._host):this._bucket=Kx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ni.makeFromBucketSpec(this._url,e):this._bucket=Kx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lu(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new O9(nD());{const a=H9(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Wx="@firebase/storage",Yx="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="storage";function b5(n,e,t){return n=fn(n),g5(n,e,t)}function S5(n){return n=fn(n),y5(n)}function w5(n,e){return n=fn(n),T5(n,e)}function R5(n=HE(),e){n=fn(n);const r=Oh(n,gD).getImmediate({identifier:e}),i=nO("storage");return i&&C5(r,...i),r}function C5(n,e,t,r={}){E5(n,e,t,r)}function x5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new kb(t,r,i,e,Wu)}function k5(){Rs(new hs(gD,x5,"PUBLIC").setMultipleInstances(!0)),ri(Wx,Yx,""),ri(Wx,Yx,"esm2017")}k5();function Ib(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function yD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I5=yD,_D=new Ku("auth","Firebase",yD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new s_("@firebase/auth");function N5(n,...e){Xg.logLevel<=gt.WARN&&Xg.warn(`Auth (${Wu}): ${n}`,...e)}function _g(n,...e){Xg.logLevel<=gt.ERROR&&Xg.error(`Auth (${Wu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n,...e){throw Ob(n,...e)}function ws(n,...e){return Ob(n,...e)}function Nb(n,e,t){const r=Object.assign(Object.assign({},I5()),{[e]:t});return new Ku("auth","Firebase",r).create(e,{appName:n.name})}function nl(n){return Nb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function O5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&fs(n,"argument-error"),Nb(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ob(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _D.create(n,...e)}function We(n,e,...t){if(!n)throw Ob(e,...t)}function Go(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _g(e),new Error(e)}function na(n,e){n||Go(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function M5(){return Qx()==="http:"||Qx()==="https:"}function Qx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M5()||oO()||"connection"in navigator)?navigator.onLine:!0}function P5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){this.shortDelay=e,this.longDelay=t,na(t>e,"Short delay should be less than long delay!"),this.isMobile=CB()||IB()}get(){return D5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n,e){na(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U5=new gp(3e4,6e4);function Rl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function aa(n,e,t,r,i={}){return AD(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=cp(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:c},s);return kB()||(f.referrerPolicy="no-referrer"),vD.fetch()(await TD(n,n.config.apiHost,t,u),f)})}async function AD(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},L5),e);try{const i=new B5(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Wm(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wm(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Wm(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Wm(n,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Nb(n,p,f);fs(n,p)}}catch(i){if(i instanceof ms)throw i;fs(n,"network-request-failed",{message:String(i)})}}async function S_(n,e,t,r,i={}){const s=await aa(n,e,t,r,i);return"mfaPendingCredential"in s&&fs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function TD(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?Mb(n.config,i):`${n.config.apiScheme}://${i}`;return V5.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function z5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ws(this.auth,"network-request-failed")),U5.get())})}}function Wm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ws(n,e,r);return i.customData._tokenResponse=t,i}function Xx(n){return n!==void 0&&n.enterprise!==void 0}class j5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return z5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F5(n,e){return aa(n,"GET","/v2/recaptchaConfig",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H5(n,e){return aa(n,"POST","/v1/accounts:delete",e)}async function Jg(n,e){return aa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q5(n,e=!1){const t=fn(n),r=await t.getIdToken(e),i=Db(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:vd(fA(i.auth_time)),issuedAtTime:vd(fA(i.iat)),expirationTime:vd(fA(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function fA(n){return Number(n)*1e3}function Db(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _g("JWT malformed, contained fewer than 3 sections"),null;try{const i=eO(t);return i?JSON.parse(i):(_g("Failed to decode base64 JWT payload"),null)}catch(i){return _g("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Jx(n){const e=Db(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ms&&$5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vd(this.lastLoginAt),this.creationTime=vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zg(n){var e;const t=n.auth,r=await n.getIdToken(),i=await jd(n,Jg(t,{idToken:r}));We(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ED(s.providerUserInfo):[],u=W5(n.providerData,a),c=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new OT(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function K5(n){const e=fn(n);await Zg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function W5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ED(n){return n.map(e=>{var{providerId:t}=e,r=Ib(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(n,e){const t=await AD(n,{},async()=>{const r=cp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await TD(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",vD.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Q5(n,e){return aa(n,"POST","/v2/accounts:revokeToken",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=Jx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Y5(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new eh;return r&&(We(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(We(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eh,this.toJSON())}_performRefresh(){return Go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Ib(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new OT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await jd(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return q5(this,e)}reload(){return K5(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Zg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(nl(this.auth));const e=await this.getIdToken();return await jd(this,H5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,u,c,f,p;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,A=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(a=t.photoURL)!==null&&a!==void 0?a:void 0,E=(u=t.tenantId)!==null&&u!==void 0?u:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(f=t.createdAt)!==null&&f!==void 0?f:void 0,L=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:B,emailVerified:q,isAnonymous:V,providerData:M,stsTokenManager:O}=t;We(B&&O,e,"internal-error");const I=eh.fromJSON(this.name,O);We(typeof B=="string",e,"internal-error"),Na(g,e.name),Na(_,e.name),We(typeof q=="boolean",e,"internal-error"),We(typeof V=="boolean",e,"internal-error"),Na(A,e.name),Na(T,e.name),Na(E,e.name),Na(S,e.name),Na(k,e.name),Na(L,e.name);const x=new Ss({uid:B,auth:e,email:_,emailVerified:q,displayName:g,isAnonymous:V,photoURL:T,phoneNumber:A,tenantId:E,stsTokenManager:I,createdAt:k,lastLoginAt:L});return M&&Array.isArray(M)&&(x.providerData=M.map(z=>Object.assign({},z))),S&&(x._redirectEventId=S),x}static async _fromIdTokenResponse(e,t,r=!1){const i=new eh;i.updateFromServerResponse(t);const s=new Ss({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zg(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];We(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ED(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new eh;u.updateFromIdToken(r);const c=new Ss({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new OT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Map;function Ko(n){na(n instanceof Function,"Expected a class definition");let e=Zx.get(n);return e?(na(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Zx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bD.type="NONE";const ek=bD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n,e,t){return`firebase:${n}:${e}:${t}`}class th{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=vg(this.userKey,i.apiKey,s),this.fullPersistenceKey=vg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jg(this.auth,{idToken:e}).catch(()=>{});return t?Ss._fromGetAccountInfoResponse(this.auth,t,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new th(Ko(ek),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||Ko(ek);const a=vg(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(a);if(p){let g;if(typeof p=="string"){const _=await Jg(e,{idToken:p}).catch(()=>{});if(!_)break;g=await Ss._fromGetAccountInfoResponse(e,_,p)}else g=Ss._fromJSON(e,p);f!==s&&(u=g),s=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new th(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new th(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kD(e))return"Blackberry";if(ID(e))return"Webos";if(wD(e))return"Safari";if((e.includes("chrome/")||RD(e))&&!e.includes("edge/"))return"Chrome";if(xD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SD(n=Ir()){return/firefox\//i.test(n)}function wD(n=Ir()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RD(n=Ir()){return/crios\//i.test(n)}function CD(n=Ir()){return/iemobile/i.test(n)}function xD(n=Ir()){return/android/i.test(n)}function kD(n=Ir()){return/blackberry/i.test(n)}function ID(n=Ir()){return/webos/i.test(n)}function Pb(n=Ir()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function X5(n=Ir()){var e;return Pb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J5(){return NB()&&document.documentMode===10}function ND(n=Ir()){return Pb(n)||xD(n)||ID(n)||kD(n)||/windows phone/i.test(n)||CD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n,e=[]){let t;switch(n){case"Browser":t=tk(Ir());break;case"Worker":t=`${tk(Ir())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eH(n,e={}){return aa(n,"GET","/v2/passwordPolicy",Rl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH=6;class nH{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:tH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nk(this),this.idTokenSubscription=new nk(this),this.beforeStateQueue=new Z5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_D,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ko(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await th.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jg(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zg(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(nl(this));const t=e?fn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(nl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(nl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ko(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eH(this),t=new nH(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Q5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ko(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await th.create(this,[Ko(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&N5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Cl(n){return fn(n)}class nk{constructor(e){this.auth=e,this.observer=null,this.addObserver=UB(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iH(n){w_=n}function MD(n){return w_.loadJS(n)}function sH(){return w_.recaptchaEnterpriseScript}function oH(){return w_.gapiScript}function aH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class lH{constructor(){this.enterprise=new uH}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uH{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const cH="recaptcha-enterprise",DD="NO_RECAPTCHA";class hH{constructor(e){this.type=cH,this.auth=Cl(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{F5(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new j5(c);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(c=>{u(c)})})}function i(s,a,u){const c=window.grecaptcha;Xx(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(DD)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lH().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&Xx(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=sH();c.length!==0&&(c+=u),MD(c).then(()=>{i(u,s,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function rk(n,e,t,r=!1,i=!1){const s=new hH(n);let a;if(i)a=DD;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function MT(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await rk(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await rk(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(n,e){const t=Oh(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Jo(s,e??{}))return i;fs(i,"already-initialized")}return t.initialize({options:e})}function dH(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ko);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pH(n,e,t){const r=Cl(n);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=PD(e),{host:a,port:u}=mH(e),c=u===null?"":`:${u}`,f={url:`${s}//${a}${c}/`},p=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(Jo(f,r.config.emulator)&&Jo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,gH()}function PD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mH(n){const e=PD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ik(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:ik(a)}}}function ik(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gH(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Go("not implemented")}_getIdTokenResponse(e){return Go("not implemented")}_linkToIdToken(e,t){return Go("not implemented")}_getReauthenticationResolver(e){return Go("not implemented")}}async function yH(n,e){return aa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H(n,e){return S_(n,"POST","/v1/accounts:signInWithPassword",Rl(n,e))}async function vH(n,e){return aa(n,"POST","/v1/accounts:sendOobCode",Rl(n,e))}async function AH(n,e){return vH(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TH(n,e){return S_(n,"POST","/v1/accounts:signInWithEmailLink",Rl(n,e))}async function EH(n,e){return S_(n,"POST","/v1/accounts:signInWithEmailLink",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Lb{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Fd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Fd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return MT(e,t,"signInWithPassword",_H);case"emailLink":return TH(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return MT(e,r,"signUpPassword",yH);case"emailLink":return EH(e,{idToken:t,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(n,e){return S_(n,"POST","/v1/accounts:signInWithIdp",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH="http://localhost";class Vu extends Lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Ib(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Vu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return nh(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nh(e,t)}buildRequest(){const e={requestUri:bH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cp(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wH(n){const e=nd(rd(n)).link,t=e?nd(rd(e)).deep_link_id:null,r=nd(rd(n)).deep_link_id;return(r?nd(rd(r)).link:null)||r||t||e||n}class Vb{constructor(e){var t,r,i,s,a,u;const c=nd(rd(e)),f=(t=c.apiKey)!==null&&t!==void 0?t:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,g=SH((i=c.mode)!==null&&i!==void 0?i:null);We(f&&p&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=wH(e);try{return new Vb(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this.providerId=zh.PROVIDER_ID}static credential(e,t){return Fd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vb.parseLink(t);return We(r,"argument-error"),Fd._fromEmailAndCode(e,r.code,r.tenantId)}}zh.PROVIDER_ID="password";zh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends yp{constructor(){super("facebook.com")}static credential(e){return Vu._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ba.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends yp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vu._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $o.credential(t,r)}catch{return null}}}$o.GOOGLE_SIGN_IN_METHOD="google.com";$o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends yp{constructor(){super("github.com")}static credential(e){return Vu._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ja.credential(e.oauthAccessToken)}catch{return null}}}ja.GITHUB_SIGN_IN_METHOD="github.com";ja.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends yp{constructor(){super("twitter.com")}static credential(e,t){return Vu._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fa.credential(t,r)}catch{return null}}}Fa.TWITTER_SIGN_IN_METHOD="twitter.com";Fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ss._fromIdTokenResponse(e,r,i),a=sk(r);return new _h({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=sk(r);return new _h({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function sk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends ms{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ey.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ey(e,t,r,i)}}function LD(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ey._fromErrorAndOperation(n,s,e,r):s})}async function RH(n,e,t=!1){const r=await jd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _h._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CH(n,e,t=!1){const{auth:r}=n;if(Ci(r.app))return Promise.reject(nl(r));const i="reauthenticate";try{const s=await jd(n,LD(r,i,e,n),t);We(s.idToken,r,"internal-error");const a=Db(s.idToken);We(a,r,"internal-error");const{sub:u}=a;return We(n.uid===u,r,"user-mismatch"),_h._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(n,e,t=!1){if(Ci(n.app))return Promise.reject(nl(n));const r="signIn",i=await LD(n,r,e),s=await _h._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function xH(n,e){return VD(Cl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kH(n){const e=Cl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IH(n,e,t){const r=Cl(n);await MT(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AH)}function NH(n,e,t){return Ci(n.app)?Promise.reject(nl(n)):xH(fn(n),zh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kH(n),r})}function OH(n,e,t,r){return fn(n).onIdTokenChanged(e,t,r)}function MH(n,e,t){return fn(n).beforeAuthStateChanged(e,t)}function UD(n,e,t,r){return fn(n).onAuthStateChanged(e,t,r)}function DH(n){return fn(n).signOut()}const ty="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ty,"1"),this.storage.removeItem(ty),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH=1e3,LH=10;class BD extends zD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ND(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);J5()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,LH):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},PH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BD.type="LOCAL";const VH=BD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD extends zD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jD.type="SESSION";const FD=jD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new R_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async f=>f(t.origin,s)),c=await UH(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}R_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const f=zb("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(){return window}function BH(n){ao().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(){return typeof ao().WorkerGlobalScope<"u"&&typeof ao().importScripts=="function"}async function jH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FH(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function HH(){return HD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="firebaseLocalStorageDb",qH=1,ny="firebaseLocalStorage",$D="fbase_key";class _p{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function C_(n,e){return n.transaction([ny],e?"readwrite":"readonly").objectStore(ny)}function $H(){const n=indexedDB.deleteDatabase(qD);return new _p(n).toPromise()}function DT(){const n=indexedDB.open(qD,qH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ny,{keyPath:$D})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ny)?e(r):(r.close(),await $H(),e(await DT()))})})}async function ok(n,e,t){const r=C_(n,!0).put({[$D]:e,value:t});return new _p(r).toPromise()}async function GH(n,e){const t=C_(n,!1).get(e),r=await new _p(t).toPromise();return r===void 0?null:r.value}function ak(n,e){const t=C_(n,!0).delete(e);return new _p(t).toPromise()}const KH=800,WH=3;class GD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await DT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>WH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=R_._getInstance(HH()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jH(),!this.activeServiceWorker)return;this.sender=new zH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await DT();return await ok(e,ty,"1"),await ak(e,ty),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ok(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>GH(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ak(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=C_(i,!1).getAll();return new _p(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GD.type="LOCAL";const YH=GD;new gp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(n,e){return e?Ko(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function QH(n){return VD(n.auth,new Bb(n),n.bypassAuthState)}function XH(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),CH(t,new Bb(n),n.bypassAuthState)}async function JH(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),RH(t,new Bb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QH;case"linkViaPopup":case"linkViaRedirect":return JH;case"reauthViaPopup":case"reauthViaRedirect":return XH;default:fs(this.auth,"internal-error")}}resolve(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=new gp(2e3,1e4);async function eq(n,e,t){if(Ci(n.app))return Promise.reject(ws(n,"operation-not-supported-in-this-environment"));const r=Cl(n);O5(n,e,Ub);const i=KD(r,t);return new gu(r,"signInViaPopup",e,i).executeNotNull()}class gu extends WD{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,gu.currentPopupAction&&gu.currentPopupAction.cancel(),gu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){na(this.filter.length===1,"Popup operations only handle one event");const e=zb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZH.get())};e()}}gu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq="pendingRedirect",Ag=new Map;class nq extends WD{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ag.get(this.auth._key());if(!e){try{const r=await rq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ag.set(this.auth._key(),e)}return this.bypassAuthState||Ag.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rq(n,e){const t=oq(e),r=sq(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function iq(n,e){Ag.set(n._key(),e)}function sq(n){return Ko(n._redirectPersistence)}function oq(n){return vg(tq,n.config.apiKey,n.name)}async function aq(n,e,t=!1){if(Ci(n.app))return Promise.reject(nl(n));const r=Cl(n),i=KD(r,e),a=await new nq(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=10*60*1e3;class uq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lq&&this.cachedEventUids.clear(),this.cachedEventUids.has(lk(e))}saveEventToCache(e){this.cachedEventUids.add(lk(e)),this.lastProcessedEventTime=Date.now()}}function lk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YD({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YD(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hq(n,e={}){return aa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dq=/^https?/;async function pq(n){if(n.config.emulator)return;const{authorizedDomains:e}=await hq(n);for(const t of e)try{if(mq(t))return}catch{}fs(n,"unauthorized-domain")}function mq(n){const e=NT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!dq.test(t))return!1;if(fq.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=new gp(3e4,6e4);function uk(){const n=ao().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yq(n){return new Promise((e,t)=>{var r,i,s;function a(){uk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uk(),t(ws(n,"network-request-failed"))},timeout:gq.get()})}if(!((i=(r=ao().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ao().gapi)===null||s===void 0)&&s.load)a();else{const u=aH("iframefcb");return ao()[u]=()=>{gapi.load?a():t(ws(n,"network-request-failed"))},MD(`${oH()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw Tg=null,e})}let Tg=null;function _q(n){return Tg=Tg||yq(n),Tg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq=new gp(5e3,15e3),Aq="__/auth/iframe",Tq="emulator/auth/iframe",Eq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sq(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Mb(e,Tq):`https://${n.config.authDomain}/${Aq}`,r={apiKey:e.apiKey,appName:n.name,v:Wu},i=bq.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${cp(r).slice(1)}`}async function wq(n){const e=await _q(n),t=ao().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:Sq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ws(n,"network-request-failed"),u=ao().setTimeout(()=>{s(a)},vq.get());function c(){ao().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cq=500,xq=600,kq="_blank",Iq="http://localhost";class ck{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nq(n,e,t,r=Cq,i=xq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},Rq),{width:r.toString(),height:i.toString(),top:s,left:a}),f=Ir().toLowerCase();t&&(u=RD(f)?kq:t),SD(f)&&(e=e||Iq,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[A,T])=>`${_}${A}=${T},`,"");if(X5(f)&&u!=="_self")return Oq(e||"",u),new ck(null);const g=window.open(e||"",u,p);We(g,n,"popup-blocked");try{g.focus()}catch{}return new ck(g)}function Oq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq="__/auth/handler",Dq="emulator/auth/handler",Pq=encodeURIComponent("fac");async function hk(n,e,t,r,i,s){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wu,eventId:i};if(e instanceof Ub){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",VB(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))a[p]=g}if(e instanceof yp){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await n._getAppCheckToken(),f=c?`#${Pq}=${encodeURIComponent(c)}`:"";return`${Lq(n)}?${cp(u).slice(1)}${f}`}function Lq({config:n}){return n.emulator?Mb(n,Dq):`https://${n.authDomain}/${Mq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="webStorageSupport";class Vq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FD,this._completeRedirectFn=aq,this._overrideRedirectResult=iq}async _openPopup(e,t,r,i){var s;na((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await hk(e,t,r,NT(),i);return Nq(e,a,zb())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await hk(e,t,r,NT(),i);return BH(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(na(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wq(e),r=new uq(e);return t.register("authEvent",i=>(We(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dA,{type:dA},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[dA];a!==void 0&&t(!!a),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ND()||wD()||Pb()}}const Uq=Vq;var fk="@firebase/auth",dk="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jq(n){Rs(new hs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;We(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OD(n)},f=new rH(r,i,s,c);return dH(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new hs("auth-internal",e=>{const t=Cl(e.getProvider("auth").getImmediate());return(r=>new zq(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(fk,dk,Bq(n)),ri(fk,dk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=5*60,Hq=iO("authIdTokenMaxAge")||Fq;let pk=null;const qq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Hq)return;const i=t==null?void 0:t.token;pk!==i&&(pk=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ry(n=HE()){const e=Oh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fH(n,{popupRedirectResolver:Uq,persistence:[YH,VH,FD]}),r=iO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=qq(s.toString());MH(t,a,()=>a(t.currentUser)),OH(t,u=>a(u))}}const i=tO("auth");return i&&pH(t,`http://${i}`),t}function $q(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iH({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ws("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",$q().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jq("Browser");const QD="@firebase/installations",jb="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=1e4,JD=`w:${jb}`,ZD="FIS_v2",Gq="https://firebaseinstallations.googleapis.com/v1",Kq=60*60*1e3,Wq="installations",Yq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Uu=new Ku(Wq,Yq,Qq);function eP(n){return n instanceof ms&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP({projectId:n}){return`${Gq}/projects/${n}/installations`}function nP(n){return{token:n.token,requestStatus:2,expiresIn:Jq(n.expiresIn),creationTime:Date.now()}}async function rP(n,e){const r=(await e.json()).error;return Uu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function iP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Xq(n,{refreshToken:e}){const t=iP(n);return t.append("Authorization",Zq(e)),t}async function sP(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Jq(n){return Number(n.replace("s","000"))}function Zq(n){return`${ZD} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=tP(n),i=iP(n),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const a={fid:t,authVersion:ZD,appId:n.appId,sdkVersion:JD},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await sP(()=>fetch(r,u));if(c.ok){const f=await c.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:nP(f.authToken)}}else throw await rP("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=/^[cdef][\w-]{21}$/,PT="";function r8(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=i8(n);return n8.test(t)?t:PT}catch{return PT}}function i8(n){return t8(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new Map;function lP(n,e){const t=x_(n);uP(t,e),s8(t,e)}function uP(n,e){const t=aP.get(n);if(t)for(const r of t)r(e)}function s8(n,e){const t=o8();t&&t.postMessage({key:n,fid:e}),a8()}let yu=null;function o8(){return!yu&&"BroadcastChannel"in self&&(yu=new BroadcastChannel("[Firebase] FID Change"),yu.onmessage=n=>{uP(n.data.key,n.data.fid)}),yu}function a8(){aP.size===0&&yu&&(yu.close(),yu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8="firebase-installations-database",u8=1,zu="firebase-installations-store";let pA=null;function Fb(){return pA||(pA=hO(l8,u8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(zu)}}})),pA}async function iy(n,e){const t=x_(n),i=(await Fb()).transaction(zu,"readwrite"),s=i.objectStore(zu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&lP(n,e.fid),e}async function cP(n){const e=x_(n),r=(await Fb()).transaction(zu,"readwrite");await r.objectStore(zu).delete(e),await r.done}async function k_(n,e){const t=x_(n),i=(await Fb()).transaction(zu,"readwrite"),s=i.objectStore(zu),a=await s.get(t),u=e(a);return u===void 0?await s.delete(t):await s.put(u,t),await i.done,u&&(!a||a.fid!==u.fid)&&lP(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(n){let e;const t=await k_(n.appConfig,r=>{const i=c8(r),s=h8(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===PT?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function c8(n){const e=n||{fid:r8(),registrationStatus:0};return hP(e)}function h8(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Uu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=f8(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:d8(n)}:{installationEntry:e}}async function f8(n,e){try{const t=await e8(n,e);return iy(n.appConfig,t)}catch(t){throw eP(t)&&t.customData.serverCode===409?await cP(n.appConfig):await iy(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function d8(n){let e=await mk(n.appConfig);for(;e.registrationStatus===1;)await oP(100),e=await mk(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Hb(n);return r||t}return e}function mk(n){return k_(n,e=>{if(!e)throw Uu.create("installation-not-found");return hP(e)})}function hP(n){return p8(n)?{fid:n.fid,registrationStatus:0}:n}function p8(n){return n.registrationStatus===1&&n.registrationTime+XD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m8({appConfig:n,heartbeatServiceProvider:e},t){const r=g8(n,t),i=Xq(n,t),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const a={installation:{sdkVersion:JD,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await sP(()=>fetch(r,u));if(c.ok){const f=await c.json();return nP(f)}else throw await rP("Generate Auth Token",c)}function g8(n,{fid:e}){return`${tP(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(n,e=!1){let t;const r=await k_(n.appConfig,s=>{if(!fP(s))throw Uu.create("not-registered");const a=s.authToken;if(!e&&v8(a))return s;if(a.requestStatus===1)return t=y8(n,e),s;{if(!navigator.onLine)throw Uu.create("app-offline");const u=T8(s);return t=_8(n,u),u}});return t?await t:r.authToken}async function y8(n,e){let t=await gk(n.appConfig);for(;t.authToken.requestStatus===1;)await oP(100),t=await gk(n.appConfig);const r=t.authToken;return r.requestStatus===0?qb(n,e):r}function gk(n){return k_(n,e=>{if(!fP(e))throw Uu.create("not-registered");const t=e.authToken;return E8(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function _8(n,e){try{const t=await m8(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await iy(n.appConfig,r),t}catch(t){if(eP(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await cP(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await iy(n.appConfig,r)}throw t}}function fP(n){return n!==void 0&&n.registrationStatus===2}function v8(n){return n.requestStatus===2&&!A8(n)}function A8(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Kq}function T8(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function E8(n){return n.requestStatus===1&&n.requestTime+XD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b8(n){const e=n,{installationEntry:t,registrationPromise:r}=await Hb(e);return r?r.catch(console.error):qb(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(n,e=!1){const t=n;return await w8(t),(await qb(t,e)).token}async function w8(n){const{registrationPromise:e}=await Hb(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(n){if(!n||!n.options)throw mA("App Configuration");if(!n.name)throw mA("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw mA(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function mA(n){return Uu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="installations",C8="installations-internal",x8=n=>{const e=n.getProvider("app").getImmediate(),t=R8(e),r=Oh(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},k8=n=>{const e=n.getProvider("app").getImmediate(),t=Oh(e,dP).getImmediate();return{getId:()=>b8(t),getToken:i=>S8(t,i)}};function I8(){Rs(new hs(dP,x8,"PUBLIC")),Rs(new hs(C8,k8,"PRIVATE"))}I8();ri(QD,jb);ri(QD,jb,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="analytics",N8="firebase_id",O8="origin",M8=60*1e3,D8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$b="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new s_("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ls=new Ku("analytics","Analytics",P8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(n){if(!n.startsWith($b)){const e=ls.create("invalid-gtag-resource",{gtagURL:n});return ii.warn(e.message),""}return n}function pP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function V8(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function U8(n,e){const t=V8("firebase-js-sdk-policy",{createScriptURL:L8}),r=document.createElement("script"),i=`${$b}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function z8(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function B8(n,e,t,r,i,s){const a=r[i];try{if(a)await e[a];else{const c=(await pP(t)).find(f=>f.measurementId===i);c&&await e[c.appId]}}catch(u){ii.error(u)}n("config",i,s)}async function j8(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const u=await pP(t);for(const c of a){const f=u.find(g=>g.measurementId===c),p=f&&e[f.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){ii.error(s)}}function F8(n,e,t,r){async function i(s,...a){try{if(s==="event"){const[u,c]=a;await j8(n,e,t,u,c)}else if(s==="config"){const[u,c]=a;await B8(n,e,t,r,u,c)}else if(s==="consent"){const[u,c]=a;n("consent",u,c)}else if(s==="get"){const[u,c,f]=a;n("get",u,c,f)}else if(s==="set"){const[u]=a;n("set",u)}else n(s,...a)}catch(u){ii.error(u)}}return i}function H8(n,e,t,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=F8(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function q8(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($b)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=30,G8=1e3;class K8{constructor(e={},t=G8){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const mP=new K8;function W8(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Y8(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:W8(r)},s=D8.replace("{app-id}",t),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let u="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw ls.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u})}return a.json()}async function Q8(n,e=mP,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ls.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ls.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Z8;return setTimeout(async()=>{u.abort()},M8),gP({appId:r,apiKey:i,measurementId:s},a,u,e)}async function gP(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=mP){var s;const{appId:a,measurementId:u}=n;try{await X8(r,e)}catch(c){if(u)return ii.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:u};throw c}try{const c=await Y8(n);return i.deleteThrottleMetadata(a),c}catch(c){const f=c;if(!J8(f)){if(i.deleteThrottleMetadata(a),u)return ii.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:u};throw c}const p=Number((s=f==null?void 0:f.customData)===null||s===void 0?void 0:s.httpStatus)===503?zC(t,i.intervalMillis,$8):zC(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(a,g),ii.debug(`Calling attemptFetch again in ${p} millis`),gP(n,g,r,i)}}function X8(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function J8(n){if(!(n instanceof ms)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Z8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function e7(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,a=Object.assign(Object.assign({},r),{send_to:s});n("event",t,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t7(){if(aO())try{await lO()}catch(n){return ii.warn(ls.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ii.warn(ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function n7(n,e,t,r,i,s,a){var u;const c=Q8(n);c.then(A=>{t[A.measurementId]=A.appId,n.options.measurementId&&A.measurementId!==n.options.measurementId&&ii.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>ii.error(A)),e.push(c);const f=t7().then(A=>{if(A)return r.getId()}),[p,g]=await Promise.all([c,f]);q8(s)||U8(s,p.measurementId),i("js",new Date);const _=(u=a==null?void 0:a.config)!==null&&u!==void 0?u:{};return _[O8]="firebase",_.update=!0,g!=null&&(_[N8]=g),i("config",p.measurementId,_),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.app=e}_delete(){return delete Ad[this.app.options.appId],Promise.resolve()}}let Ad={},_k=[];const vk={};let gA="dataLayer",i7="gtag",Ak,yP,Tk=!1;function s7(){const n=[];if(oO()&&n.push("This is a browser extension environment."),MB()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ls.create("invalid-analytics-context",{errorInfo:e});ii.warn(t.message)}}function o7(n,e,t){s7();const r=n.options.appId;if(!r)throw ls.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ii.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ls.create("no-api-key");if(Ad[r]!=null)throw ls.create("already-exists",{id:r});if(!Tk){z8(gA);const{wrappedGtag:s,gtagCore:a}=H8(Ad,_k,vk,gA,i7);yP=s,Ak=a,Tk=!0}return Ad[r]=n7(n,_k,vk,e,Ak,gA,t),new r7(n)}function a7(n,e,t,r){n=fn(n),e7(yP,Ad[n.app.options.appId],e,t,r).catch(i=>ii.error(i))}const Ek="@firebase/analytics",bk="0.10.12";function l7(){Rs(new hs(yk,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return o7(r,i,t)},"PUBLIC")),Rs(new hs("analytics-internal",n,"PRIVATE")),ri(Ek,bk),ri(Ek,bk,"esm2017");function n(e){try{const t=e.getProvider(yk).getImmediate();return{logEvent:(r,i,s)=>a7(t,r,i,s)}}catch(t){throw ls.create("interop-component-reg-failed",{reason:t})}}}l7();const u7={apiKey:"AIzaSyCCa-PxslkzcIawmDzjvD7NfpfKDDHW_cY",authDomain:"mydailyreed.firebaseapp.com",projectId:"mydailyreed",storageBucket:"mydailyreed.firebasestorage.app",messagingSenderId:"784473877562",appId:"1:784473877562:web:86db61e82986c1bdd39903",measurementId:"G-MT4S33PKD0"},Gb=fO(u7),c7=R5(Gb),hu=ry(Gb),ra=K6(Gb),sy="/assets/MDRLogoB-Y-uXmpVe.png",LT="/assets/facebookBlack-DTxLsc-z.png",VT="/assets/instagramBlack-f2rhpmha.png",UT="/assets/linkedinBlack-D22kkR36.png",Sk="/assets/arrow-b9VpQuFC.png";function Fo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _P(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Pi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},vh={duration:.5,overwrite:!1,delay:0},Kb,dr,Qt,lo=1e8,Cr=1/lo,zT=Math.PI*2,h7=zT/4,f7=0,vP=Math.sqrt,d7=Math.cos,p7=Math.sin,Yn=function(e){return typeof e=="string"},hn=function(e){return typeof e=="function"},ia=function(e){return typeof e=="number"},Wb=function(e){return typeof e>"u"},fo=function(e){return typeof e=="object"},si=function(e){return e!==!1},Yb=function(){return typeof window<"u"},Ym=function(e){return hn(e)||Yn(e)},AP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},kr=Array.isArray,BT=/(?:-?\.?\d|\.)+/gi,TP=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,yA=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,EP=/[+-]=-?[.\d]+/,bP=/[^,'"\[\]\s]+/gi,m7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,nn,Js,jT,Qb,Vi={},oy={},SP,wP=function(e){return(oy=Ah(e,Vi))&&ci},Xb=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Hd=function(e,t){return!t&&console.warn(e)},RP=function(e,t){return e&&(Vi[e]=t)&&oy&&(oy[e]=t)||Vi},qd=function(){return 0},g7={suppressEvents:!0,isStart:!0,kill:!1},Eg={suppressEvents:!0,kill:!1},y7={suppressEvents:!0},Jb={},rl=[],FT={},CP,Ri={},_A={},wk=30,bg=[],Zb="",eS=function(e){var t=e[0],r,i;if(fo(t)||hn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=bg.length;i--&&!bg[i].targetTest(t););r=bg[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new XP(e[i],r)))||e.splice(i,1);return e},Su=function(e){return e._gsap||eS(as(e))[0]._gsap},xP=function(e,t,r){return(r=e[t])&&hn(r)?e[t]():Wb(r)&&e.getAttribute&&e.getAttribute(t)||r},oi=function(e,t){return(e=e.split(",")).forEach(t)||e},vn=function(e){return Math.round(e*1e5)/1e5||0},xn=function(e){return Math.round(e*1e7)/1e7||0},rh=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},_7=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},ay=function(){var e=rl.length,t=rl.slice(0),r,i;for(FT={},rl.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},kP=function(e,t,r,i){rl.length&&!dr&&ay(),e.render(t,r,dr&&t<0&&(e._initted||e._startAt)),rl.length&&!dr&&ay()},IP=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(bP).length<2?t:Yn(e)?e.trim():e},NP=function(e){return e},Ui=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},v7=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Ah=function(e,t){for(var r in t)e[r]=t[r];return e},Rk=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=fo(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},ly=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Td=function(e){var t=e.parent||nn,r=e.keyframes?v7(kr(e.keyframes)):Ui;if(si(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},A7=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},OP=function(e,t,r,i,s){var a=e[i],u;if(s)for(u=t[s];a&&a[s]>u;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},I_=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[r]===t&&(e[r]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},vl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},wu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},T7=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},HT=function(e,t,r,i){return e._startAt&&(dr?e._startAt.revert(Eg):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},E7=function n(e){return!e||e._ts&&n(e.parent)},Ck=function(e){return e._repeat?Th(e._tTime,e=e.duration()+e._rDelay)*e:0},Th=function(e,t){var r=Math.floor(e=xn(e/t));return e&&r===e?r-1:r},uy=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},N_=function(e){return e._end=xn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Cr)||0))},O_=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=xn(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),N_(e),r._dirty||wu(r,e)),e},MP=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=uy(e.rawTime(),t),(!t._dur||vp(0,t.totalDuration(),r)-t._tTime>Cr)&&t.render(r,!0)),wu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},Zs=function(e,t,r,i){return t.parent&&vl(t),t._start=xn((ia(r)?r:r||e!==nn?ts(e,r,t):e._time)+t._delay),t._end=xn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),OP(e,t,"_first","_last",e._sort?"_start":0),qT(t)||(e._recent=t),i||MP(e,t),e._ts<0&&O_(e,e._tTime),e},DP=function(e,t){return(Vi.ScrollTrigger||Xb("scrollTrigger",t))&&Vi.ScrollTrigger.create(t,e)},PP=function(e,t,r,i,s){if(nS(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!dr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&CP!==xi.frame)return rl.push(e),e._lazy=[s,i],1},b7=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},qT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},S7=function(e,t,r,i){var s=e.ratio,a=t<0||!t&&(!e._start&&b7(e)&&!(!e._initted&&qT(e))||(e._ts<0||e._dp._ts<0)&&!qT(e))?0:1,u=e._rDelay,c=0,f,p,g;if(u&&e._repeat&&(c=vp(0,e._tDur,t),p=Th(c,u),e._yoyo&&p&1&&(a=1-a),p!==Th(e._tTime,u)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||dr||i||e._zTime===Cr||!t&&e._zTime){if(!e._initted&&PP(e,t,i,r,c))return;for(g=e._zTime,e._zTime=t||(r?Cr:0),r||(r=t&&!g),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,f=e._pt;f;)f.r(a,f.d),f=f._next;t<0&&HT(e,t,r,!0),e._onUpdate&&!r&&Oi(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&Oi(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&vl(e,1),!r&&!dr&&(Oi(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},w7=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Eh=function(e,t,r,i){var s=e._repeat,a=xn(t)||0,u=e._tTime/e._tDur;return u&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:xn(a*(s+1)+e._rDelay*s):a,u>0&&!i&&O_(e,e._tTime=e._tDur*u),e.parent&&N_(e),r||wu(e.parent,e),e},xk=function(e){return e instanceof jr?wu(e):Eh(e,e._dur)},R7={_start:0,endTime:qd,totalDuration:qd},ts=function n(e,t,r){var i=e.labels,s=e._recent||R7,a=e.duration()>=lo?s.endTime(!1):e._dur,u,c,f;return Yn(t)&&(isNaN(t)||t in i)?(c=t.charAt(0),f=t.substr(-1)==="%",u=t.indexOf("="),c==="<"||c===">"?(u>=0&&(t=t.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(f?(u<0?s:r).totalDuration()/100:1)):u<0?(t in i||(i[t]=a),i[t]):(c=parseFloat(t.charAt(u-1)+t.substr(u+1)),f&&r&&(c=c/100*(kr(r)?r[0]:r).totalDuration()),u>1?n(e,t.substr(0,u-1),r)+c:a+c)):t==null?a:+t},Ed=function(e,t,r){var i=ia(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],u,c;if(i&&(a.duration=t[1]),a.parent=r,e){for(u=a,c=r;c&&!("immediateRender"in u);)u=c.vars.defaults||{},c=si(c.vars.inherit)&&c.parent;a.immediateRender=si(u.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Cn(t[0],a,t[s+1])},xl=function(e,t){return e||e===0?t(e):t},vp=function(e,t,r){return r<e?e:r>t?t:r},Rr=function(e,t){return!Yn(e)||!(t=m7.exec(e))?"":t[1]},C7=function(e,t,r){return xl(r,function(i){return vp(e,t,i)})},$T=[].slice,LP=function(e,t){return e&&fo(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&fo(e[0]))&&!e.nodeType&&e!==Js},x7=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Yn(i)&&!t||LP(i,1)?(s=r).push.apply(s,as(i)):r.push(i)})||r},as=function(e,t,r){return Qt&&!t&&Qt.selector?Qt.selector(e):Yn(e)&&!r&&(jT||!bh())?$T.call((t||Qb).querySelectorAll(e),0):kr(e)?x7(e,r):LP(e)?$T.call(e,0):e?[e]:[]},GT=function(e){return e=as(e)[0]||Hd("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return as(t,r.querySelectorAll?r:r===e?Hd("Invalid scope")||Qb.createElement("div"):e)}},VP=function(e){return e.sort(function(){return .5-Math.random()})},UP=function(e){if(hn(e))return e;var t=fo(e)?e:{each:e},r=Ru(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},u=i>0&&i<1,c=isNaN(i)||u,f=t.axis,p=i,g=i;return Yn(i)?p=g={center:.5,edges:.5,end:1}[i]||0:!u&&c&&(p=i[0],g=i[1]),function(_,A,T){var E=(T||t).length,S=a[E],k,L,B,q,V,M,O,I,x;if(!S){if(x=t.grid==="auto"?0:(t.grid||[1,lo])[1],!x){for(O=-1e8;O<(O=T[x++].getBoundingClientRect().left)&&x<E;);x<E&&x--}for(S=a[E]=[],k=c?Math.min(x,E)*p-.5:i%x,L=x===lo?0:c?E*g/x-.5:i/x|0,O=0,I=lo,M=0;M<E;M++)B=M%x-k,q=L-(M/x|0),S[M]=V=f?Math.abs(f==="y"?q:B):vP(B*B+q*q),V>O&&(O=V),V<I&&(I=V);i==="random"&&VP(S),S.max=O-I,S.min=I,S.v=E=(parseFloat(t.amount)||parseFloat(t.each)*(x>E?E-1:f?f==="y"?E/x:x:Math.max(x,E/x))||0)*(i==="edges"?-1:1),S.b=E<0?s-E:s,S.u=Rr(t.amount||t.each)||0,r=r&&E<0?WP(r):r}return E=(S[_]-S.min)/S.max||0,xn(S.b+(r?r(E):E)*S.v)+S.u}},KT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=xn(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(ia(r)?0:Rr(r))}},zP=function(e,t){var r=kr(e),i,s;return!r&&fo(e)&&(i=r=e.radius||lo,e.values?(e=as(e.values),(s=!ia(e[0]))&&(i*=i)):e=KT(e.increment)),xl(t,r?hn(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var u=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),f=lo,p=0,g=e.length,_,A;g--;)s?(_=e[g].x-u,A=e[g].y-c,_=_*_+A*A):_=Math.abs(e[g]-u),_<f&&(f=_,p=g);return p=!i||f<=i?e[p]:a,s||p===a||ia(a)?p:p+Rr(a)}:KT(e))},BP=function(e,t,r,i){return xl(kr(e)?!t:r===!0?!!(r=0):!i,function(){return kr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},k7=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,a){return a(s)},i)}},I7=function(e,t){return function(r){return e(parseFloat(r))+(t||Rr(r))}},N7=function(e,t,r){return FP(e,t,0,1,r)},jP=function(e,t,r){return xl(r,function(i){return e[~~t(i)]})},O7=function n(e,t,r){var i=t-e;return kr(e)?jP(e,n(0,e.length),t):xl(r,function(s){return(i+(s-e)%i)%i+e})},M7=function n(e,t,r){var i=t-e,s=i*2;return kr(e)?jP(e,n(0,e.length-1),t):xl(r,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},$d=function(e){for(var t=0,r="",i,s,a,u;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),u=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(u?bP:BT),r+=e.substr(t,i-t)+BP(u?s:+s[0],u?0:+s[1],+s[2]||1e-5),t=a+1;return r+e.substr(t,e.length-t)},FP=function(e,t,r,i,s){var a=t-e,u=i-r;return xl(s,function(c){return r+((c-e)/a*u||0)})},D7=function n(e,t,r,i){var s=isNaN(e+t)?0:function(A){return(1-A)*e+A*t};if(!s){var a=Yn(e),u={},c,f,p,g,_;if(r===!0&&(i=1)&&(r=null),a)e={p:e},t={p:t};else if(kr(e)&&!kr(t)){for(p=[],g=e.length,_=g-2,f=1;f<g;f++)p.push(n(e[f-1],e[f]));g--,s=function(T){T*=g;var E=Math.min(_,~~T);return p[E](T-E)},r=t}else i||(e=Ah(kr(e)?[]:{},e));if(!p){for(c in t)tS.call(u,e,c,"get",t[c]);s=function(T){return sS(T,u)||(a?e.p:e)}}}return xl(r,s)},kk=function(e,t,r){var i=e.labels,s=lo,a,u,c;for(a in i)u=i[a]-t,u<0==!!r&&u&&s>(u=Math.abs(u))&&(c=a,s=u);return c},Oi=function(e,t,r){var i=e.vars,s=i[t],a=Qt,u=e._ctx,c,f,p;if(s)return c=i[t+"Params"],f=i.callbackScope||e,r&&rl.length&&ay(),u&&(Qt=u),p=c?s.apply(f,c):s.call(f),Qt=a,p},ld=function(e){return vl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!dr),e.progress()<1&&Oi(e,"onInterrupt"),e},Yc,HP=[],qP=function(e){if(e)if(e=!e.name&&e.default||e,Yb()||e.headless){var t=e.name,r=hn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:qd,render:sS,add:tS,kill:Q7,modifier:Y7,rawVars:0},a={targetTest:0,get:0,getSetter:iS,aliases:{},register:0};if(bh(),e!==i){if(Ri[t])return;Ui(i,Ui(ly(e,s),a)),Ah(i.prototype,Ah(s,ly(e,a))),Ri[i.prop=t]=i,e.targetTest&&(bg.push(i),Jb[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}RP(t,i),e.register&&e.register(ci,i,ai)}else HP.push(e)},Ht=255,ud={aqua:[0,Ht,Ht],lime:[0,Ht,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ht],navy:[0,0,128],white:[Ht,Ht,Ht],olive:[128,128,0],yellow:[Ht,Ht,0],orange:[Ht,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ht,0,0],pink:[Ht,192,203],cyan:[0,Ht,Ht],transparent:[Ht,Ht,Ht,0]},vA=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Ht+.5|0},$P=function(e,t,r){var i=e?ia(e)?[e>>16,e>>8&Ht,e&Ht]:0:ud.black,s,a,u,c,f,p,g,_,A,T;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ud[e])i=ud[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),u=e.charAt(3),e="#"+s+s+a+a+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ht,i&Ht,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ht,e&Ht]}else if(e.substr(0,3)==="hsl"){if(i=T=e.match(BT),!t)c=+i[0]%360/360,f=+i[1]/100,p=+i[2]/100,a=p<=.5?p*(f+1):p+f-p*f,s=p*2-a,i.length>3&&(i[3]*=1),i[0]=vA(c+1/3,s,a),i[1]=vA(c,s,a),i[2]=vA(c-1/3,s,a);else if(~e.indexOf("="))return i=e.match(TP),r&&i.length<4&&(i[3]=1),i}else i=e.match(BT)||ud.transparent;i=i.map(Number)}return t&&!T&&(s=i[0]/Ht,a=i[1]/Ht,u=i[2]/Ht,g=Math.max(s,a,u),_=Math.min(s,a,u),p=(g+_)/2,g===_?c=f=0:(A=g-_,f=p>.5?A/(2-g-_):A/(g+_),c=g===s?(a-u)/A+(a<u?6:0):g===a?(u-s)/A+2:(s-a)/A+4,c*=60),i[0]=~~(c+.5),i[1]=~~(f*100+.5),i[2]=~~(p*100+.5)),r&&i.length<4&&(i[3]=1),i},GP=function(e){var t=[],r=[],i=-1;return e.split(il).forEach(function(s){var a=s.match(Wc)||[];t.push.apply(t,a),r.push(i+=a.length+1)}),t.c=r,t},Ik=function(e,t,r){var i="",s=(e+i).match(il),a=t?"hsla(":"rgba(",u=0,c,f,p,g;if(!s)return e;if(s=s.map(function(_){return(_=$P(_,t,1))&&a+(t?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),r&&(p=GP(e),c=r.c,c.join(i)!==p.c.join(i)))for(f=e.replace(il,"1").split(Wc),g=f.length-1;u<g;u++)i+=f[u]+(~c.indexOf(u)?s.shift()||a+"0,0,0,0)":(p.length?p:s.length?s:r).shift());if(!f)for(f=e.split(il),g=f.length-1;u<g;u++)i+=f[u]+s[u];return i+f[g]},il=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ud)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),P7=/hsl[a]?\(/,KP=function(e){var t=e.join(" "),r;if(il.lastIndex=0,il.test(t))return r=P7.test(t),e[1]=Ik(e[1],r),e[0]=Ik(e[0],r,GP(e[1])),!0},Gd,xi=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,a=s,u=[],c,f,p,g,_,A,T=function E(S){var k=n()-i,L=S===!0,B,q,V,M;if((k>e||k<0)&&(r+=k-t),i+=k,V=i-r,B=V-a,(B>0||L)&&(M=++g.frame,_=V-g.time*1e3,g.time=V=V/1e3,a+=B+(B>=s?4:s-B),q=1),L||(c=f(E)),q)for(A=0;A<u.length;A++)u[A](V,_,M,S)};return g={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(S){return _/(1e3/(S||60))},wake:function(){SP&&(!jT&&Yb()&&(Js=jT=window,Qb=Js.document||{},Vi.gsap=ci,(Js.gsapVersions||(Js.gsapVersions=[])).push(ci.version),wP(oy||Js.GreenSockGlobals||!Js.gsap&&Js||{}),HP.forEach(qP)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&g.sleep(),f=p||function(S){return setTimeout(S,a-g.time*1e3+1|0)},Gd=1,T(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(c),Gd=0,f=qd},lagSmoothing:function(S,k){e=S||1/0,t=Math.min(k||33,e)},fps:function(S){s=1e3/(S||240),a=g.time*1e3+s},add:function(S,k,L){var B=k?function(q,V,M,O){S(q,V,M,O),g.remove(B)}:S;return g.remove(S),u[L?"unshift":"push"](B),bh(),B},remove:function(S,k){~(k=u.indexOf(S))&&u.splice(k,1)&&A>=k&&A--},_listeners:u},g}(),bh=function(){return!Gd&&xi.wake()},vt={},L7=/^[\d.\-M][\d.\-,\s]/,V7=/["']/g,U7=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,a=r.length,u,c,f;s<a;s++)c=r[s],u=s!==a-1?c.lastIndexOf(","):c.length,f=c.substr(0,u),t[i]=isNaN(f)?f.replace(V7,"").trim():+f,i=c.substr(u+1).trim();return t},z7=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},B7=function(e){var t=(e+"").split("("),r=vt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[U7(t[1])]:z7(e).split(",").map(IP)):vt._CE&&L7.test(e)?vt._CE("",e):r},WP=function(e){return function(t){return 1-e(1-t)}},YP=function n(e,t){for(var r=e._first,i;r;)r instanceof jr?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Ru=function(e,t){return e&&(hn(e)?e:vt[e]||B7(e))||t},Xu=function(e,t,r,i){r===void 0&&(r=function(c){return 1-t(1-c)}),i===void 0&&(i=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},a;return oi(e,function(u){vt[u]=Vi[u]=s,vt[a=u.toLowerCase()]=r;for(var c in s)vt[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=vt[u+"."+c]=s[c]}),s},QP=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},AA=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),a=s/zT*(Math.asin(1/i)||0),u=function(p){return p===1?1:i*Math.pow(2,-10*p)*p7((p-a)*s)+1},c=e==="out"?u:e==="in"?function(f){return 1-u(1-f)}:QP(u);return s=zT/s,c.config=function(f,p){return n(e,f,p)},c},TA=function n(e,t){t===void 0&&(t=1.70158);var r=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:QP(r);return i.config=function(s){return n(e,s)},i};oi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Xu(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});vt.Linear.easeNone=vt.none=vt.Linear.easeIn;Xu("Elastic",AA("in"),AA("out"),AA());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(u){return u<t?n*u*u:u<r?n*Math.pow(u-1.5/e,2)+.75:u<i?n*(u-=2.25/e)*u+.9375:n*Math.pow(u-2.625/e,2)+.984375};Xu("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Xu("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Xu("Circ",function(n){return-(vP(1-n*n)-1)});Xu("Sine",function(n){return n===1?1:-d7(n*h7)+1});Xu("Back",TA("in"),TA("out"),TA());vt.SteppedEase=vt.steps=Vi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,a=1-Cr;return function(u){return((i*vp(0,a,u)|0)+s)*r}}};vh.ease=vt["quad.out"];oi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Zb+=n+","+n+"Params,"});var XP=function(e,t){this.id=f7++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:xP,this.set=t?t.getSetter:iS},Kd=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Eh(this,+t.duration,1,1),this.data=t.data,Qt&&(this._ctx=Qt,Qt.data.push(this)),Gd||xi.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Eh(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(bh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(O_(this,r),!s._dp||s.parent||MP(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Zs(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Cr||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),kP(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Ck(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Ck(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Th(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?uy(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-1e-8?0:this._rts,this.totalTime(vp(-Math.abs(this._delay),this._tDur,s),i!==!1),N_(this),T7(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(bh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Cr&&(this._tTime-=Cr)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Zs(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(si(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?uy(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=y7);var i=dr;return dr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),dr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,xk(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,xk(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(ts(this,r),si(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,si(i)),this._dur||(this._zTime=-1e-8),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Cr)},e.eventCallback=function(r,i,s){var a=this.vars;return arguments.length>1?(i?(a[r]=i,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete a[r],this):a[r]},e.then=function(r){var i=this;return new Promise(function(s){var a=hn(r)?r:NP,u=function(){var f=i.then;i.then=null,hn(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=f),s(a),i.then=f};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?u():i._prom=u})},e.kill=function(){ld(this)},n}();Ui(Kd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var jr=function(n){_P(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=si(r.sortChildren),nn&&Zs(r.parent||nn,Fo(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&DP(Fo(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return Ed(0,arguments,this),this},t.from=function(i,s,a){return Ed(1,arguments,this),this},t.fromTo=function(i,s,a,u){return Ed(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,Td(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Cn(i,s,ts(this,a),1),this},t.call=function(i,s,a){return Zs(this,Cn.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,u,c,f,p){return a.duration=s,a.stagger=a.stagger||u,a.onComplete=f,a.onCompleteParams=p,a.parent=this,new Cn(i,a,ts(this,c)),this},t.staggerFrom=function(i,s,a,u,c,f,p){return a.runBackwards=1,Td(a).immediateRender=si(a.immediateRender),this.staggerTo(i,s,a,u,c,f,p)},t.staggerFromTo=function(i,s,a,u,c,f,p,g){return u.startAt=a,Td(u).immediateRender=si(u.immediateRender),this.staggerTo(i,s,u,c,f,p,g)},t.render=function(i,s,a){var u=this._time,c=this._dirty?this.totalDuration():this._tDur,f=this._dur,p=i<=0?0:xn(i),g=this._zTime<0!=i<0&&(this._initted||!f),_,A,T,E,S,k,L,B,q,V,M,O;if(this!==nn&&p>c&&i>=0&&(p=c),p!==this._tTime||a||g){if(u!==this._time&&f&&(p+=this._time-u,i+=this._time-u),_=p,q=this._start,B=this._ts,k=!B,g&&(f||(u=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(M=this._yoyo,S=f+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(S*100+i,s,a);if(_=xn(p%S),p===c?(E=this._repeat,_=f):(V=xn(p/S),E=~~V,E&&E===V&&(_=f,E--),_>f&&(_=f)),V=Th(this._tTime,S),!u&&this._tTime&&V!==E&&this._tTime-V*S-this._dur<=0&&(V=E),M&&E&1&&(_=f-_,O=1),E!==V&&!this._lock){var I=M&&V&1,x=I===(M&&E&1);if(E<V&&(I=!I),u=I?0:p%f?f:p,this._lock=1,this.render(u||(O?0:xn(E*S)),s,!f)._lock=0,this._tTime=p,!s&&this.parent&&Oi(this,"onRepeat"),this.vars.repeatRefresh&&!O&&(this.invalidate()._lock=1),u&&u!==this._time||k!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,c=this._tDur,x&&(this._lock=2,u=I?f:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!O&&this.invalidate()),this._lock=0,!this._ts&&!k)return this;YP(this,O)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(L=w7(this,xn(u),xn(_)),L&&(p-=_-(_=L._start))),this._tTime=p,this._time=_,this._act=!B,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,u=0),!u&&_&&!s&&!E&&(Oi(this,"onStart"),this._tTime!==p))return this;if(_>=u&&i>=0)for(A=this._first;A;){if(T=A._next,(A._act||_>=A._start)&&A._ts&&L!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(_-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(_-A._start)*A._ts,s,a),_!==this._time||!this._ts&&!k){L=0,T&&(p+=this._zTime=-1e-8);break}}A=T}else{A=this._last;for(var z=i<0?i:_;A;){if(T=A._prev,(A._act||z<=A._end)&&A._ts&&L!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(z-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(z-A._start)*A._ts,s,a||dr&&(A._initted||A._startAt)),_!==this._time||!this._ts&&!k){L=0,T&&(p+=this._zTime=z?-1e-8:Cr);break}}A=T}}if(L&&!s&&(this.pause(),L.render(_>=u?0:-1e-8)._zTime=_>=u?1:-1,this._ts))return this._start=q,N_(this),this.render(i,s,a);this._onUpdate&&!s&&Oi(this,"onUpdate",!0),(p===c&&this._tTime>=this.totalDuration()||!p&&u)&&(q===this._start||Math.abs(B)!==Math.abs(this._ts))&&(this._lock||((i||!f)&&(p===c&&this._ts>0||!p&&this._ts<0)&&vl(this,1),!s&&!(i<0&&!u)&&(p||u||!c)&&(Oi(this,p===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(ia(s)||(s=ts(this,s,i)),!(i instanceof Kd)){if(kr(i))return i.forEach(function(u){return a.add(u,s)}),this;if(Yn(i))return this.addLabel(i,s);if(hn(i))i=Cn.delayedCall(0,i);else return this}return this!==i?Zs(this,i,s):this},t.getChildren=function(i,s,a,u){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),u===void 0&&(u=-1e8);for(var c=[],f=this._first;f;)f._start>=u&&(f instanceof Cn?s&&c.push(f):(a&&c.push(f),i&&c.push.apply(c,f.getChildren(!0,s,a)))),f=f._next;return c},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return Yn(i)?this.removeLabel(i):hn(i)?this.killTweensOf(i):(i.parent===this&&I_(this,i),i===this._recent&&(this._recent=this._last),wu(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=xn(xi.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ts(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var u=Cn.delayedCall(0,s||qd,a);return u.data="isPause",this._hasPause=1,Zs(this,u,ts(this,i))},t.removePause=function(i){var s=this._first;for(i=ts(this,i);s;)s._start===i&&s.data==="isPause"&&vl(s),s=s._next},t.killTweensOf=function(i,s,a){for(var u=this.getTweensOf(i,a),c=u.length;c--;)Ga!==u[c]&&u[c].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],u=as(i),c=this._first,f=ia(s),p;c;)c instanceof Cn?_7(c._targets,u)&&(f?(!Ga||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(p=c.getTweensOf(u,s)).length&&a.push.apply(a,p),c=c._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,u=ts(a,i),c=s,f=c.startAt,p=c.onStart,g=c.onStartParams,_=c.immediateRender,A,T=Cn.to(a,Ui({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:s.duration||Math.abs((u-(f&&"time"in f?f.time:a._time))/a.timeScale())||Cr,onStart:function(){if(a.pause(),!A){var S=s.duration||Math.abs((u-(f&&"time"in f?f.time:a._time))/a.timeScale());T._dur!==S&&Eh(T,S,0,1).render(T._time,!0,!0),A=1}p&&p.apply(T,g||[])}},s));return _?T.render(0):T},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,Ui({startAt:{time:ts(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),kk(this,ts(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),kk(this,ts(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Cr)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var u=this._first,c=this.labels,f;u;)u._start>=a&&(u._start+=i,u._end+=i),u=u._next;if(s)for(f in c)c[f]>=a&&(c[f]+=i);return wu(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),wu(this)},t.totalDuration=function(i){var s=0,a=this,u=a._last,c=lo,f,p,g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(g=a.parent;u;)f=u._prev,u._dirty&&u.totalDuration(),p=u._start,p>c&&a._sort&&u._ts&&!a._lock?(a._lock=1,Zs(a,u,p-u._delay,1)._lock=0):c=p,p<0&&u._ts&&(s-=p,(!g&&!a._dp||g&&g.smoothChildTiming)&&(a._start+=p/a._ts,a._time-=p,a._tTime-=p),a.shiftChildren(-p,!1,-1/0),c=0),u._end>s&&u._ts&&(s=u._end),u=f;Eh(a,a===nn&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(nn._ts&&(kP(nn,uy(i,nn)),CP=xi.frame),xi.frame>=wk){wk+=Pi.autoSleep||120;var s=nn._first;if((!s||!s._ts)&&Pi.autoSleep&&xi._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||xi.sleep()}}},e}(Kd);Ui(jr.prototype,{_lock:0,_hasPause:0,_forcing:0});var j7=function(e,t,r,i,s,a,u){var c=new ai(this._pt,e,t,0,1,r2,null,s),f=0,p=0,g,_,A,T,E,S,k,L;for(c.b=r,c.e=i,r+="",i+="",(k=~i.indexOf("random("))&&(i=$d(i)),a&&(L=[r,i],a(L,e,t),r=L[0],i=L[1]),_=r.match(yA)||[];g=yA.exec(i);)T=g[0],E=i.substring(f,g.index),A?A=(A+1)%5:E.substr(-5)==="rgba("&&(A=1),T!==_[p++]&&(S=parseFloat(_[p-1])||0,c._pt={_next:c._pt,p:E||p===1?E:",",s:S,c:T.charAt(1)==="="?rh(S,T)-S:parseFloat(T)-S,m:A&&A<4?Math.round:0},f=yA.lastIndex);return c.c=f<i.length?i.substring(f,i.length):"",c.fp=u,(EP.test(i)||k)&&(c.e=0),this._pt=c,c},tS=function(e,t,r,i,s,a,u,c,f,p){hn(i)&&(i=i(s||0,e,a));var g=e[t],_=r!=="get"?r:hn(g)?f?e[t.indexOf("set")||!hn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](f):e[t]():g,A=hn(g)?f?G7:t2:rS,T;if(Yn(i)&&(~i.indexOf("random(")&&(i=$d(i)),i.charAt(1)==="="&&(T=rh(_,i)+(Rr(_)||0),(T||T===0)&&(i=T))),!p||_!==i||WT)return!isNaN(_*i)&&i!==""?(T=new ai(this._pt,e,t,+_||0,i-(_||0),typeof g=="boolean"?W7:n2,0,A),f&&(T.fp=f),u&&T.modifier(u,this,e),this._pt=T):(!g&&!(t in e)&&Xb(t,i),j7.call(this,e,t,_,i,A,c||Pi.stringFilter,f))},F7=function(e,t,r,i,s){if(hn(e)&&(e=bd(e,s,t,r,i)),!fo(e)||e.style&&e.nodeType||kr(e)||AP(e))return Yn(e)?bd(e,s,t,r,i):e;var a={},u;for(u in e)a[u]=bd(e[u],s,t,r,i);return a},JP=function(e,t,r,i,s,a){var u,c,f,p;if(Ri[e]&&(u=new Ri[e]).init(s,u.rawVars?t[e]:F7(t[e],i,s,a,r),r,i,a)!==!1&&(r._pt=c=new ai(r._pt,s,e,0,1,u.render,u,0,u.priority),r!==Yc))for(f=r._ptLookup[r._targets.indexOf(s)],p=u._props.length;p--;)f[u._props[p]]=c;return u},Ga,WT,nS=function n(e,t,r){var i=e.vars,s=i.ease,a=i.startAt,u=i.immediateRender,c=i.lazy,f=i.onUpdate,p=i.runBackwards,g=i.yoyoEase,_=i.keyframes,A=i.autoRevert,T=e._dur,E=e._startAt,S=e._targets,k=e.parent,L=k&&k.data==="nested"?k.vars.targets:S,B=e._overwrite==="auto"&&!Kb,q=e.timeline,V,M,O,I,x,z,U,j,P,ae,fe,Y,ne;if(q&&(!_||!s)&&(s="none"),e._ease=Ru(s,vh.ease),e._yEase=g?WP(Ru(g===!0?s:g,vh.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!q&&!!i.runBackwards,!q||_&&!i.stagger){if(j=S[0]?Su(S[0]).harness:0,Y=j&&i[j.prop],V=ly(i,Jb),E&&(E._zTime<0&&E.progress(1),t<0&&p&&u&&!A?E.render(-1,!0):E.revert(p&&T?Eg:g7),E._lazy=0),a){if(vl(e._startAt=Cn.set(S,Ui({data:"isStart",overwrite:!1,parent:k,immediateRender:!0,lazy:!E&&si(c),startAt:null,delay:0,onUpdate:f&&function(){return Oi(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dr||!u&&!A)&&e._startAt.revert(Eg),u&&T&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(p&&T&&!E){if(t&&(u=!1),O=Ui({overwrite:!1,data:"isFromStart",lazy:u&&!E&&si(c),immediateRender:u,stagger:0,parent:k},V),Y&&(O[j.prop]=Y),vl(e._startAt=Cn.set(S,O)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dr?e._startAt.revert(Eg):e._startAt.render(-1,!0)),e._zTime=t,!u)n(e._startAt,Cr,Cr);else if(!t)return}for(e._pt=e._ptCache=0,c=T&&si(c)||c&&!T,M=0;M<S.length;M++){if(x=S[M],U=x._gsap||eS(S)[M]._gsap,e._ptLookup[M]=ae={},FT[U.id]&&rl.length&&ay(),fe=L===S?M:L.indexOf(x),j&&(P=new j).init(x,Y||V,e,fe,L)!==!1&&(e._pt=I=new ai(e._pt,x,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(Te){ae[Te]=I}),P.priority&&(z=1)),!j||Y)for(O in V)Ri[O]&&(P=JP(O,V,e,fe,x,L))?P.priority&&(z=1):ae[O]=I=tS.call(e,x,O,"get",V[O],fe,L,0,i.stringFilter);e._op&&e._op[M]&&e.kill(x,e._op[M]),B&&e._pt&&(Ga=e,nn.killTweensOf(x,ae,e.globalTime(t)),ne=!e.parent,Ga=0),e._pt&&c&&(FT[U.id]=1)}z&&i2(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!ne,_&&t<=0&&q.render(lo,!0,!0)},H7=function(e,t,r,i,s,a,u,c){var f=(e._pt&&e._ptCache||(e._ptCache={}))[t],p,g,_,A;if(!f)for(f=e._ptCache[t]=[],_=e._ptLookup,A=e._targets.length;A--;){if(p=_[A][t],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==t&&p.fp!==t;)p=p._next;if(!p)return WT=1,e.vars[t]="+=0",nS(e,u),WT=0,c?Hd(t+" not eligible for reset"):1;f.push(p)}for(A=f.length;A--;)g=f[A],p=g._pt||g,p.s=(i||i===0)&&!s?i:p.s+(i||0)+a*p.c,p.c=r-p.s,g.e&&(g.e=vn(r)+Rr(g.e)),g.b&&(g.b=p.s+Rr(g.b))},q7=function(e,t){var r=e[0]?Su(e[0]).harness:0,i=r&&r.aliases,s,a,u,c;if(!i)return t;s=Ah({},t);for(a in i)if(a in s)for(c=i[a].split(","),u=c.length;u--;)s[c[u]]=s[a];return s},$7=function(e,t,r,i){var s=t.ease||i||"power1.inOut",a,u;if(kr(t))u=r[e]||(r[e]=[]),t.forEach(function(c,f){return u.push({t:f/(t.length-1)*100,v:c,e:s})});else for(a in t)u=r[a]||(r[a]=[]),a==="ease"||u.push({t:parseFloat(e),v:t[a],e:s})},bd=function(e,t,r,i,s){return hn(e)?e.call(t,r,i,s):Yn(e)&&~e.indexOf("random(")?$d(e):e},ZP=Zb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",e2={};oi(ZP+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return e2[n]=1});var Cn=function(n){_P(e,n);function e(r,i,s,a){var u;typeof i=="number"&&(s.duration=i,i=s,s=null),u=n.call(this,a?i:Td(i))||this;var c=u.vars,f=c.duration,p=c.delay,g=c.immediateRender,_=c.stagger,A=c.overwrite,T=c.keyframes,E=c.defaults,S=c.scrollTrigger,k=c.yoyoEase,L=i.parent||nn,B=(kr(r)||AP(r)?ia(r[0]):"length"in i)?[r]:as(r),q,V,M,O,I,x,z,U;if(u._targets=B.length?eS(B):Hd("GSAP target "+r+" not found. https://gsap.com",!Pi.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=A,T||_||Ym(f)||Ym(p)){if(i=u.vars,q=u.timeline=new jr({data:"nested",defaults:E||{},targets:L&&L.data==="nested"?L.vars.targets:B}),q.kill(),q.parent=q._dp=Fo(u),q._start=0,_||Ym(f)||Ym(p)){if(O=B.length,z=_&&UP(_),fo(_))for(I in _)~ZP.indexOf(I)&&(U||(U={}),U[I]=_[I]);for(V=0;V<O;V++)M=ly(i,e2),M.stagger=0,k&&(M.yoyoEase=k),U&&Ah(M,U),x=B[V],M.duration=+bd(f,Fo(u),V,x,B),M.delay=(+bd(p,Fo(u),V,x,B)||0)-u._delay,!_&&O===1&&M.delay&&(u._delay=p=M.delay,u._start+=p,M.delay=0),q.to(x,M,z?z(V,x,B):0),q._ease=vt.none;q.duration()?f=p=0:u.timeline=0}else if(T){Td(Ui(q.vars.defaults,{ease:"none"})),q._ease=Ru(T.ease||i.ease||"none");var j=0,P,ae,fe;if(kr(T))T.forEach(function(Y){return q.to(B,Y,">")}),q.duration();else{M={};for(I in T)I==="ease"||I==="easeEach"||$7(I,T[I],M,T.easeEach);for(I in M)for(P=M[I].sort(function(Y,ne){return Y.t-ne.t}),j=0,V=0;V<P.length;V++)ae=P[V],fe={ease:ae.e,duration:(ae.t-(V?P[V-1].t:0))/100*f},fe[I]=ae.v,q.to(B,fe,j),j+=fe.duration;q.duration()<f&&q.to({},{duration:f-q.duration()})}}f||u.duration(f=q.duration())}else u.timeline=0;return A===!0&&!Kb&&(Ga=Fo(u),nn.killTweensOf(B),Ga=0),Zs(L,Fo(u),s),i.reversed&&u.reverse(),i.paused&&u.paused(!0),(g||!f&&!T&&u._start===xn(L._time)&&si(g)&&E7(Fo(u))&&L.data!=="nested")&&(u._tTime=-1e-8,u.render(Math.max(0,-p)||0)),S&&DP(Fo(u),S),u}var t=e.prototype;return t.render=function(i,s,a){var u=this._time,c=this._tDur,f=this._dur,p=i<0,g=i>c-Cr&&!p?c:i<Cr?0:i,_,A,T,E,S,k,L,B,q;if(!f)S7(this,i,s,a);else if(g!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(_=g,B=this.timeline,this._repeat){if(E=f+this._rDelay,this._repeat<-1&&p)return this.totalTime(E*100+i,s,a);if(_=xn(g%E),g===c?(T=this._repeat,_=f):(S=xn(g/E),T=~~S,T&&T===S?(_=f,T--):_>f&&(_=f)),k=this._yoyo&&T&1,k&&(q=this._yEase,_=f-_),S=Th(this._tTime,E),_===u&&!a&&this._initted&&T===S)return this._tTime=g,this;T!==S&&(B&&this._yEase&&YP(B,k),this.vars.repeatRefresh&&!k&&!this._lock&&_!==E&&this._initted&&(this._lock=a=1,this.render(xn(E*T),!0).invalidate()._lock=0))}if(!this._initted){if(PP(this,p?i:_,a,s,g))return this._tTime=0,this;if(u!==this._time&&!(a&&this.vars.repeatRefresh&&T!==S))return this;if(f!==this._dur)return this.render(i,s,a)}if(this._tTime=g,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=L=(q||this._ease)(_/f),this._from&&(this.ratio=L=1-L),_&&!u&&!s&&!T&&(Oi(this,"onStart"),this._tTime!==g))return this;for(A=this._pt;A;)A.r(L,A.d),A=A._next;B&&B.render(i<0?i:B._dur*B._ease(_/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(p&&HT(this,i,s,a),Oi(this,"onUpdate")),this._repeat&&T!==S&&this.vars.onRepeat&&!s&&this.parent&&Oi(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(p&&!this._onUpdate&&HT(this,i,!0,!0),(i||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&vl(this,1),!s&&!(p&&!u)&&(g||u||k)&&(Oi(this,g===c?"onComplete":"onReverseComplete",!0),this._prom&&!(g<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,u,c){Gd||xi.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||nS(this,f),p=this._ease(f/this._dur),H7(this,i,s,a,u,p,f,c)?this.resetTo(i,s,a,u,1):(O_(this,0),this.parent||OP(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ld(this):this.scrollTrigger&&this.scrollTrigger.kill(!!dr),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Ga&&Ga.vars.overwrite!==!0)._first||ld(this),this.parent&&a!==this.timeline.totalDuration()&&Eh(this,this._dur*this.timeline._tDur/a,0,1),this}var u=this._targets,c=i?as(i):u,f=this._ptLookup,p=this._pt,g,_,A,T,E,S,k;if((!s||s==="all")&&A7(u,c))return s==="all"&&(this._pt=0),ld(this);for(g=this._op=this._op||[],s!=="all"&&(Yn(s)&&(E={},oi(s,function(L){return E[L]=1}),s=E),s=q7(u,s)),k=u.length;k--;)if(~c.indexOf(u[k])){_=f[k],s==="all"?(g[k]=s,T=_,A={}):(A=g[k]=g[k]||{},T=s);for(E in T)S=_&&_[E],S&&((!("kill"in S.d)||S.d.kill(E)===!0)&&I_(this,S,"_pt"),delete _[E]),A!=="all"&&(A[E]=1)}return this._initted&&!this._pt&&p&&ld(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Ed(1,arguments)},e.delayedCall=function(i,s,a,u){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:u})},e.fromTo=function(i,s,a){return Ed(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return nn.killTweensOf(i,s,a)},e}(Kd);Ui(Cn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});oi("staggerTo,staggerFrom,staggerFromTo",function(n){Cn[n]=function(){var e=new jr,t=$T.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var rS=function(e,t,r){return e[t]=r},t2=function(e,t,r){return e[t](r)},G7=function(e,t,r,i){return e[t](i.fp,r)},K7=function(e,t,r){return e.setAttribute(t,r)},iS=function(e,t){return hn(e[t])?t2:Wb(e[t])&&e.setAttribute?K7:rS},n2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},W7=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},r2=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},sS=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Y7=function(e,t,r,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,r),s=a},Q7=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?I_(this,t,"_pt"):t.dep||(r=1),t=i;return!r},X7=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},i2=function(e){for(var t=e._pt,r,i,s,a;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=r}e._pt=s},ai=function(){function n(t,r,i,s,a,u,c,f,p){this.t=r,this.s=s,this.c=a,this.p=i,this.r=u||n2,this.d=c||this,this.set=f||rS,this.pr=p||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=X7,this.m=r,this.mt=s,this.tween=i},n}();oi(Zb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Jb[n]=1});Vi.TweenMax=Vi.TweenLite=Cn;Vi.TimelineLite=Vi.TimelineMax=jr;nn=new jr({sortChildren:!1,defaults:vh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Pi.stringFilter=KP;var Cu=[],Sg={},J7=[],Nk=0,Z7=0,EA=function(e){return(Sg[e]||J7).map(function(t){return t()})},YT=function(){var e=Date.now(),t=[];e-Nk>2&&(EA("matchMediaInit"),Cu.forEach(function(r){var i=r.queries,s=r.conditions,a,u,c,f;for(u in i)a=Js.matchMedia(i[u]).matches,a&&(c=1),a!==s[u]&&(s[u]=a,f=1);f&&(r.revert(),c&&t.push(r))}),EA("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),Nk=e,EA("matchMedia"))},s2=function(){function n(t,r){this.selector=r&&GT(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Z7++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){hn(r)&&(s=i,i=r,r=hn);var a=this,u=function(){var f=Qt,p=a.selector,g;return f&&f!==a&&f.data.push(a),s&&(a.selector=GT(s)),Qt=a,g=i.apply(a,arguments),hn(g)&&a._r.push(g),Qt=f,a.selector=p,a.isReverted=!1,g};return a.last=u,r===hn?u(a,function(c){return a.add(null,c)}):r?a[r]=u:u},e.ignore=function(r){var i=Qt;Qt=null,r(this),Qt=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Cn&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var u=s.getTweens(),c=s.data.length,f;c--;)f=s.data[c],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(p){return u.splice(u.indexOf(p),1)}));for(u.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,g){return g.g-p.g||-1/0}).forEach(function(p){return p.t.revert(r)}),c=s.data.length;c--;)f=s.data[c],f instanceof jr?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof Cn)&&f.revert&&f.revert(r);s._r.forEach(function(p){return p(r,s)}),s.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),i)for(var a=Cu.length;a--;)Cu[a].id===this.id&&Cu.splice(a,1)},e.revert=function(r){this.kill(r||{})},n}(),e$=function(){function n(t){this.contexts=[],this.scope=t,Qt&&Qt.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){fo(r)||(r={matches:r});var a=new s2(0,s||this.scope),u=a.conditions={},c,f,p;Qt&&!a.selector&&(a.selector=Qt.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=r;for(f in r)f==="all"?p=1:(c=Js.matchMedia(r[f]),c&&(Cu.indexOf(a)<0&&Cu.push(a),(u[f]=c.matches)&&(p=1),c.addListener?c.addListener(YT):c.addEventListener("change",YT)));return p&&i(a,function(g){return a.add(null,g)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),cy={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return qP(i)})},timeline:function(e){return new jr(e)},getTweensOf:function(e,t){return nn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Yn(e)&&(e=as(e)[0]);var s=Su(e||{}).get,a=r?NP:IP;return r==="native"&&(r=""),e&&(t?a((Ri[t]&&Ri[t].get||s)(e,t,r,i)):function(u,c,f){return a((Ri[u]&&Ri[u].get||s)(e,u,c,f))})},quickSetter:function(e,t,r){if(e=as(e),e.length>1){var i=e.map(function(p){return ci.quickSetter(p,t,r)}),s=i.length;return function(p){for(var g=s;g--;)i[g](p)}}e=e[0]||{};var a=Ri[t],u=Su(e),c=u.harness&&(u.harness.aliases||{})[t]||t,f=a?function(p){var g=new a;Yc._pt=0,g.init(e,r?p+r:p,Yc,0,[e]),g.render(1,g),Yc._pt&&sS(1,Yc)}:u.set(e,c);return a?f:function(p){return f(e,c,r?p+r:p,u,1)}},quickTo:function(e,t,r){var i,s=ci.to(e,Ui((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),a=function(c,f,p){return s.resetTo(t,c,f,p)};return a.tween=s,a},isTweening:function(e){return nn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ru(e.ease,vh.ease)),Rk(vh,e||{})},config:function(e){return Rk(Pi,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(u){return u&&!Ri[u]&&!Vi[u]&&Hd(t+" effect requires "+u+" plugin.")}),_A[t]=function(u,c,f){return r(as(u),Ui(c||{},s),f)},a&&(jr.prototype[t]=function(u,c,f){return this.add(_A[t](u,fo(c)?c:(f=c)&&{},this),f)})},registerEase:function(e,t){vt[e]=Ru(t)},parseEase:function(e,t){return arguments.length?Ru(e,t):vt},getById:function(e){return nn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new jr(e),i,s;for(r.smoothChildTiming=si(e.smoothChildTiming),nn.remove(r),r._dp=0,r._time=r._tTime=nn._time,i=nn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Cn&&i.vars.onComplete===i._targets[0]))&&Zs(r,i,i._start-i._delay),i=s;return Zs(nn,r,0),r},context:function(e,t){return e?new s2(e,t):Qt},matchMedia:function(e){return new e$(e)},matchMediaRefresh:function(){return Cu.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||YT()},addEventListener:function(e,t){var r=Sg[e]||(Sg[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Sg[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:O7,wrapYoyo:M7,distribute:UP,random:BP,snap:zP,normalize:N7,getUnit:Rr,clamp:C7,splitColor:$P,toArray:as,selector:GT,mapRange:FP,pipe:k7,unitize:I7,interpolate:D7,shuffle:VP},install:wP,effects:_A,ticker:xi,updateRoot:jr.updateRoot,plugins:Ri,globalTimeline:nn,core:{PropTween:ai,globals:RP,Tween:Cn,Timeline:jr,Animation:Kd,getCache:Su,_removeLinkedListItem:I_,reverting:function(){return dr},context:function(e){return e&&Qt&&(Qt.data.push(e),e._ctx=Qt),Qt},suppressOverwrites:function(e){return Kb=e}}};oi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return cy[n]=Cn[n]});xi.add(jr.updateRoot);Yc=cy.to({},{duration:0});var t$=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},n$=function(e,t){var r=e._targets,i,s,a;for(i in t)for(s=r.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=t$(a,i)),a&&a.modifier&&a.modifier(t[i],e,r[s],i))},bA=function(e,t){return{name:e,rawVars:1,init:function(i,s,a){a._onInit=function(u){var c,f;if(Yn(s)&&(c={},oi(s,function(p){return c[p]=1}),s=c),t){c={};for(f in s)c[f]=t(s[f]);s=c}n$(u,s)}}}},ci=cy.registerPlugin({name:"attr",init:function(e,t,r,i,s){var a,u,c;this.tween=r;for(a in t)c=e.getAttribute(a)||"",u=this.add(e,"setAttribute",(c||0)+"",t[a],i,s,0,0,a),u.op=a,u.b=c,this._props.push(a)},render:function(e,t){for(var r=t._pt;r;)dr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},bA("roundProps",KT),bA("modifiers"),bA("snap",zP))||cy;Cn.version=jr.version=ci.version="3.12.7";SP=1;Yb()&&bh();vt.Power0;vt.Power1;vt.Power2;vt.Power3;vt.Power4;vt.Linear;vt.Quad;vt.Cubic;vt.Quart;vt.Quint;vt.Strong;vt.Elastic;vt.Back;vt.SteppedEase;vt.Bounce;vt.Sine;vt.Expo;vt.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ok,Ka,ih,oS,_u,Mk,aS,r$=function(){return typeof window<"u"},sa={},lu=180/Math.PI,sh=Math.PI/180,Vc=Math.atan2,Dk=1e8,lS=/([A-Z])/g,i$=/(left|right|width|margin|padding|x)/i,s$=/[\s,\(]\S/,to={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},QT=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},o$=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},a$=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},l$=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},o2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},a2=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},u$=function(e,t,r){return e.style[t]=r},c$=function(e,t,r){return e.style.setProperty(t,r)},h$=function(e,t,r){return e._gsap[t]=r},f$=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},d$=function(e,t,r,i,s){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},p$=function(e,t,r,i,s){var a=e._gsap;a[t]=r,a.renderTransform(s,a)},rn="transform",li=rn+"Origin",m$=function n(e,t){var r=this,i=this.target,s=i.style,a=i._gsap;if(e in sa&&s){if(this.tfm=this.tfm||{},e!=="transform")e=to[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return r.tfm[u]=qo(i,u)}):this.tfm[e]=a.x?a[e]:qo(i,e),e===li&&(this.tfm.zOrigin=a.zOrigin);else return to.transform.split(",").forEach(function(u){return n.call(r,u,t)});if(this.props.indexOf(rn)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(li,t,"")),e=rn}(s||t)&&this.props.push(e,t,s[e])},l2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},g$=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(lS,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=aS(),(!s||!s.isStart)&&!r[rn]&&(l2(r),i.zOrigin&&r[li]&&(r[li]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},u2=function(e,t){var r={target:e,props:[],revert:g$,save:m$};return e._gsap||ci.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},c2,XT=function(e,t){var r=Ka.createElementNS?Ka.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ka.createElement(e);return r&&r.style?r:Ka.createElement(e)},uo=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(lS,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Sh(t)||t,1)||""},Pk="O,Moz,ms,Ms,Webkit".split(","),Sh=function(e,t,r){var i=t||_u,s=i.style,a=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(Pk[a]+e in s););return a<0?null:(a===3?"ms":a>=0?Pk[a]:"")+e},JT=function(){r$()&&window.document&&(Ok=window,Ka=Ok.document,ih=Ka.documentElement,_u=XT("div")||{style:{}},XT("div"),rn=Sh(rn),li=rn+"Origin",_u.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",c2=!!Sh("perspective"),aS=ci.core.reverting,oS=1)},Lk=function(e){var t=e.ownerSVGElement,r=XT("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),ih.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),ih.removeChild(r),s},Vk=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},h2=function(e){var t,r;try{t=e.getBBox()}catch{t=Lk(e),r=1}return t&&(t.width||t.height)||r||(t=Lk(e)),t&&!t.width&&!t.x&&!t.y?{x:+Vk(e,["x","cx","x1"])||0,y:+Vk(e,["y","cy","y1"])||0,width:0,height:0}:t},f2=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&h2(e))},Bu=function(e,t){if(t){var r=e.style,i;t in sa&&t!==li&&(t=rn),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(lS,"-$1").toLowerCase())):r.removeAttribute(t)}},Wa=function(e,t,r,i,s,a){var u=new ai(e._pt,t,r,0,1,a?a2:o2);return e._pt=u,u.b=i,u.e=s,e._props.push(r),u},Uk={deg:1,rad:1,turn:1},y$={grid:1,flex:1},Al=function n(e,t,r,i){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",u=_u.style,c=i$.test(t),f=e.tagName.toLowerCase()==="svg",p=(f?"client":"offset")+(c?"Width":"Height"),g=100,_=i==="px",A=i==="%",T,E,S,k;if(i===a||!s||Uk[i]||Uk[a])return s;if(a!=="px"&&!_&&(s=n(e,t,r,"px")),k=e.getCTM&&f2(e),(A||a==="%")&&(sa[t]||~t.indexOf("adius")))return T=k?e.getBBox()[c?"width":"height"]:e[p],vn(A?s/T*g:s/100*T);if(u[c?"width":"height"]=g+(_?a:i),E=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!f?e:e.parentNode,k&&(E=(e.ownerSVGElement||{}).parentNode),(!E||E===Ka||!E.appendChild)&&(E=Ka.body),S=E._gsap,S&&A&&S.width&&c&&S.time===xi.time&&!S.uncache)return vn(s/S.width*g);if(A&&(t==="height"||t==="width")){var L=e.style[t];e.style[t]=g+i,T=e[p],L?e.style[t]=L:Bu(e,t)}else(A||a==="%")&&!y$[uo(E,"display")]&&(u.position=uo(e,"position")),E===e&&(u.position="static"),E.appendChild(_u),T=_u[p],E.removeChild(_u),u.position="absolute";return c&&A&&(S=Su(E),S.time=xi.time,S.width=E[p]),vn(_?T*s/g:T&&s?g/T*s:0)},qo=function(e,t,r,i){var s;return oS||JT(),t in to&&t!=="transform"&&(t=to[t],~t.indexOf(",")&&(t=t.split(",")[0])),sa[t]&&t!=="transform"?(s=Yd(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:fy(uo(e,li))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=hy[t]&&hy[t](e,t,r)||uo(e,t)||xP(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Al(e,t,s,r)+r:s},_$=function(e,t,r,i){if(!r||r==="none"){var s=Sh(t,e,1),a=s&&uo(e,s,1);a&&a!==r?(t=s,r=a):t==="borderColor"&&(r=uo(e,"borderTopColor"))}var u=new ai(this._pt,e.style,t,0,1,r2),c=0,f=0,p,g,_,A,T,E,S,k,L,B,q,V;if(u.b=r,u.e=i,r+="",i+="",i==="auto"&&(E=e.style[t],e.style[t]=i,i=uo(e,t)||i,E?e.style[t]=E:Bu(e,t)),p=[r,i],KP(p),r=p[0],i=p[1],_=r.match(Wc)||[],V=i.match(Wc)||[],V.length){for(;g=Wc.exec(i);)S=g[0],L=i.substring(c,g.index),T?T=(T+1)%5:(L.substr(-5)==="rgba("||L.substr(-5)==="hsla(")&&(T=1),S!==(E=_[f++]||"")&&(A=parseFloat(E)||0,q=E.substr((A+"").length),S.charAt(1)==="="&&(S=rh(A,S)+q),k=parseFloat(S),B=S.substr((k+"").length),c=Wc.lastIndex-B.length,B||(B=B||Pi.units[t]||q,c===i.length&&(i+=B,u.e+=B)),q!==B&&(A=Al(e,t,E,B)||0),u._pt={_next:u._pt,p:L||f===1?L:",",s:A,c:k-A,m:T&&T<4||t==="zIndex"?Math.round:0});u.c=c<i.length?i.substring(c,i.length):""}else u.r=t==="display"&&i==="none"?a2:o2;return EP.test(i)&&(u.e=0),this._pt=u,u},zk={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},v$=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=zk[r]||r,t[1]=zk[i]||i,t.join(" ")},A$=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,a=r._gsap,u,c,f;if(s==="all"||s===!0)i.cssText="",c=1;else for(s=s.split(","),f=s.length;--f>-1;)u=s[f],sa[u]&&(c=1,u=u==="transformOrigin"?li:rn),Bu(r,u);c&&(Bu(r,rn),a&&(a.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Yd(r,1),a.uncache=1,l2(i)))}},hy={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var a=e._pt=new ai(e._pt,t,r,0,0,A$);return a.u=i,a.pr=-10,a.tween=s,e._props.push(r),1}}},Wd=[1,0,0,1,0,0],d2={},p2=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Bk=function(e){var t=uo(e,rn);return p2(t)?Wd:t.substr(7).match(TP).map(vn)},uS=function(e,t){var r=e._gsap||Su(e),i=e.style,s=Bk(e),a,u,c,f;return r.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?Wd:s):(s===Wd&&!e.offsetParent&&e!==ih&&!r.svg&&(c=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,u=e.nextElementSibling,ih.appendChild(e)),s=Bk(e),c?i.display=c:Bu(e,"display"),f&&(u?a.insertBefore(e,u):a?a.appendChild(e):ih.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},ZT=function(e,t,r,i,s,a){var u=e._gsap,c=s||uS(e,!0),f=u.xOrigin||0,p=u.yOrigin||0,g=u.xOffset||0,_=u.yOffset||0,A=c[0],T=c[1],E=c[2],S=c[3],k=c[4],L=c[5],B=t.split(" "),q=parseFloat(B[0])||0,V=parseFloat(B[1])||0,M,O,I,x;r?c!==Wd&&(O=A*S-T*E)&&(I=q*(S/O)+V*(-E/O)+(E*L-S*k)/O,x=q*(-T/O)+V*(A/O)-(A*L-T*k)/O,q=I,V=x):(M=h2(e),q=M.x+(~B[0].indexOf("%")?q/100*M.width:q),V=M.y+(~(B[1]||B[0]).indexOf("%")?V/100*M.height:V)),i||i!==!1&&u.smooth?(k=q-f,L=V-p,u.xOffset=g+(k*A+L*E)-k,u.yOffset=_+(k*T+L*S)-L):u.xOffset=u.yOffset=0,u.xOrigin=q,u.yOrigin=V,u.smooth=!!i,u.origin=t,u.originIsAbsolute=!!r,e.style[li]="0px 0px",a&&(Wa(a,u,"xOrigin",f,q),Wa(a,u,"yOrigin",p,V),Wa(a,u,"xOffset",g,u.xOffset),Wa(a,u,"yOffset",_,u.yOffset)),e.setAttribute("data-svg-origin",q+" "+V)},Yd=function(e,t){var r=e._gsap||new XP(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,a="px",u="deg",c=getComputedStyle(e),f=uo(e,li)||"0",p,g,_,A,T,E,S,k,L,B,q,V,M,O,I,x,z,U,j,P,ae,fe,Y,ne,Te,xe,F,se,ge,le,Re,Se;return p=g=_=E=S=k=L=B=q=0,A=T=1,r.svg=!!(e.getCTM&&f2(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[rn]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[rn]!=="none"?c[rn]:"")),i.scale=i.rotate=i.translate="none"),O=uS(e,r.svg),r.svg&&(r.uncache?(Te=e.getBBox(),f=r.xOrigin-Te.x+"px "+(r.yOrigin-Te.y)+"px",ne=""):ne=!t&&e.getAttribute("data-svg-origin"),ZT(e,ne||f,!!ne||r.originIsAbsolute,r.smooth!==!1,O)),V=r.xOrigin||0,M=r.yOrigin||0,O!==Wd&&(U=O[0],j=O[1],P=O[2],ae=O[3],p=fe=O[4],g=Y=O[5],O.length===6?(A=Math.sqrt(U*U+j*j),T=Math.sqrt(ae*ae+P*P),E=U||j?Vc(j,U)*lu:0,L=P||ae?Vc(P,ae)*lu+E:0,L&&(T*=Math.abs(Math.cos(L*sh))),r.svg&&(p-=V-(V*U+M*P),g-=M-(V*j+M*ae))):(Se=O[6],le=O[7],F=O[8],se=O[9],ge=O[10],Re=O[11],p=O[12],g=O[13],_=O[14],I=Vc(Se,ge),S=I*lu,I&&(x=Math.cos(-I),z=Math.sin(-I),ne=fe*x+F*z,Te=Y*x+se*z,xe=Se*x+ge*z,F=fe*-z+F*x,se=Y*-z+se*x,ge=Se*-z+ge*x,Re=le*-z+Re*x,fe=ne,Y=Te,Se=xe),I=Vc(-P,ge),k=I*lu,I&&(x=Math.cos(-I),z=Math.sin(-I),ne=U*x-F*z,Te=j*x-se*z,xe=P*x-ge*z,Re=ae*z+Re*x,U=ne,j=Te,P=xe),I=Vc(j,U),E=I*lu,I&&(x=Math.cos(I),z=Math.sin(I),ne=U*x+j*z,Te=fe*x+Y*z,j=j*x-U*z,Y=Y*x-fe*z,U=ne,fe=Te),S&&Math.abs(S)+Math.abs(E)>359.9&&(S=E=0,k=180-k),A=vn(Math.sqrt(U*U+j*j+P*P)),T=vn(Math.sqrt(Y*Y+Se*Se)),I=Vc(fe,Y),L=Math.abs(I)>2e-4?I*lu:0,q=Re?1/(Re<0?-Re:Re):0),r.svg&&(ne=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!p2(uo(e,rn)),ne&&e.setAttribute("transform",ne))),Math.abs(L)>90&&Math.abs(L)<270&&(s?(A*=-1,L+=E<=0?180:-180,E+=E<=0?180:-180):(T*=-1,L+=L<=0?180:-180)),t=t||r.uncache,r.x=p-((r.xPercent=p&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-p)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=g-((r.yPercent=g&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=_+a,r.scaleX=vn(A),r.scaleY=vn(T),r.rotation=vn(E)+u,r.rotationX=vn(S)+u,r.rotationY=vn(k)+u,r.skewX=L+u,r.skewY=B+u,r.transformPerspective=q+a,(r.zOrigin=parseFloat(f.split(" ")[2])||!t&&r.zOrigin||0)&&(i[li]=fy(f)),r.xOffset=r.yOffset=0,r.force3D=Pi.force3D,r.renderTransform=r.svg?E$:c2?m2:T$,r.uncache=0,r},fy=function(e){return(e=e.split(" "))[0]+" "+e[1]},SA=function(e,t,r){var i=Rr(t);return vn(parseFloat(t)+parseFloat(Al(e,"x",r+"px",i)))+i},T$=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,m2(e,t)},iu="0deg",Gf="0px",su=") ",m2=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.z,f=r.rotation,p=r.rotationY,g=r.rotationX,_=r.skewX,A=r.skewY,T=r.scaleX,E=r.scaleY,S=r.transformPerspective,k=r.force3D,L=r.target,B=r.zOrigin,q="",V=k==="auto"&&e&&e!==1||k===!0;if(B&&(g!==iu||p!==iu)){var M=parseFloat(p)*sh,O=Math.sin(M),I=Math.cos(M),x;M=parseFloat(g)*sh,x=Math.cos(M),a=SA(L,a,O*x*-B),u=SA(L,u,-Math.sin(M)*-B),c=SA(L,c,I*x*-B+B)}S!==Gf&&(q+="perspective("+S+su),(i||s)&&(q+="translate("+i+"%, "+s+"%) "),(V||a!==Gf||u!==Gf||c!==Gf)&&(q+=c!==Gf||V?"translate3d("+a+", "+u+", "+c+") ":"translate("+a+", "+u+su),f!==iu&&(q+="rotate("+f+su),p!==iu&&(q+="rotateY("+p+su),g!==iu&&(q+="rotateX("+g+su),(_!==iu||A!==iu)&&(q+="skew("+_+", "+A+su),(T!==1||E!==1)&&(q+="scale("+T+", "+E+su),L.style[rn]=q||"translate(0, 0)"},E$=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.rotation,f=r.skewX,p=r.skewY,g=r.scaleX,_=r.scaleY,A=r.target,T=r.xOrigin,E=r.yOrigin,S=r.xOffset,k=r.yOffset,L=r.forceCSS,B=parseFloat(a),q=parseFloat(u),V,M,O,I,x;c=parseFloat(c),f=parseFloat(f),p=parseFloat(p),p&&(p=parseFloat(p),f+=p,c+=p),c||f?(c*=sh,f*=sh,V=Math.cos(c)*g,M=Math.sin(c)*g,O=Math.sin(c-f)*-_,I=Math.cos(c-f)*_,f&&(p*=sh,x=Math.tan(f-p),x=Math.sqrt(1+x*x),O*=x,I*=x,p&&(x=Math.tan(p),x=Math.sqrt(1+x*x),V*=x,M*=x)),V=vn(V),M=vn(M),O=vn(O),I=vn(I)):(V=g,I=_,M=O=0),(B&&!~(a+"").indexOf("px")||q&&!~(u+"").indexOf("px"))&&(B=Al(A,"x",a,"px"),q=Al(A,"y",u,"px")),(T||E||S||k)&&(B=vn(B+T-(T*V+E*O)+S),q=vn(q+E-(T*M+E*I)+k)),(i||s)&&(x=A.getBBox(),B=vn(B+i/100*x.width),q=vn(q+s/100*x.height)),x="matrix("+V+","+M+","+O+","+I+","+B+","+q+")",A.setAttribute("transform",x),L&&(A.style[rn]=x)},b$=function(e,t,r,i,s){var a=360,u=Yn(s),c=parseFloat(s)*(u&&~s.indexOf("rad")?lu:1),f=c-i,p=i+f+"deg",g,_;return u&&(g=s.split("_")[1],g==="short"&&(f%=a,f!==f%(a/2)&&(f+=f<0?a:-360)),g==="cw"&&f<0?f=(f+a*Dk)%a-~~(f/a)*a:g==="ccw"&&f>0&&(f=(f-a*Dk)%a-~~(f/a)*a)),e._pt=_=new ai(e._pt,t,r,i,f,o$),_.e=p,_.u="deg",e._props.push(r),_},jk=function(e,t){for(var r in t)e[r]=t[r];return e},S$=function(e,t,r){var i=jk({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,u,c,f,p,g,_,A,T;i.svg?(f=r.getAttribute("transform"),r.setAttribute("transform",""),a[rn]=t,u=Yd(r,1),Bu(r,rn),r.setAttribute("transform",f)):(f=getComputedStyle(r)[rn],a[rn]=t,u=Yd(r,1),a[rn]=f);for(c in sa)f=i[c],p=u[c],f!==p&&s.indexOf(c)<0&&(A=Rr(f),T=Rr(p),g=A!==T?Al(r,c,f,T):parseFloat(f),_=parseFloat(p),e._pt=new ai(e._pt,u,c,g,_-g,QT),e._pt.u=T||0,e._props.push(c));jk(u,i)};oi("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",a=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(u){return e<2?n+u:"border"+u+n});hy[e>1?"border"+n:n]=function(u,c,f,p,g){var _,A;if(arguments.length<4)return _=a.map(function(T){return qo(u,T,f)}),A=_.join(" "),A.split(_[0]).length===5?_[0]:A;_=(p+"").split(" "),A={},a.forEach(function(T,E){return A[T]=_[E]=_[E]||_[(E-1)/2|0]}),u.init(c,A,g)}});var g2={name:"css",register:JT,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var a=this._props,u=e.style,c=r.vars.startAt,f,p,g,_,A,T,E,S,k,L,B,q,V,M,O,I;oS||JT(),this.styles=this.styles||u2(e),I=this.styles.props,this.tween=r;for(E in t)if(E!=="autoRound"&&(p=t[E],!(Ri[E]&&JP(E,t,r,i,e,s)))){if(A=typeof p,T=hy[E],A==="function"&&(p=p.call(r,i,e,s),A=typeof p),A==="string"&&~p.indexOf("random(")&&(p=$d(p)),T)T(this,e,E,p,r)&&(O=1);else if(E.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(E)+"").trim(),p+="",il.lastIndex=0,il.test(f)||(S=Rr(f),k=Rr(p)),k?S!==k&&(f=Al(e,E,f,k)+k):S&&(p+=S),this.add(u,"setProperty",f,p,i,s,0,0,E),a.push(E),I.push(E,0,u[E]);else if(A!=="undefined"){if(c&&E in c?(f=typeof c[E]=="function"?c[E].call(r,i,e,s):c[E],Yn(f)&&~f.indexOf("random(")&&(f=$d(f)),Rr(f+"")||f==="auto"||(f+=Pi.units[E]||Rr(qo(e,E))||""),(f+"").charAt(1)==="="&&(f=qo(e,E))):f=qo(e,E),_=parseFloat(f),L=A==="string"&&p.charAt(1)==="="&&p.substr(0,2),L&&(p=p.substr(2)),g=parseFloat(p),E in to&&(E==="autoAlpha"&&(_===1&&qo(e,"visibility")==="hidden"&&g&&(_=0),I.push("visibility",0,u.visibility),Wa(this,u,"visibility",_?"inherit":"hidden",g?"inherit":"hidden",!g)),E!=="scale"&&E!=="transform"&&(E=to[E],~E.indexOf(",")&&(E=E.split(",")[0]))),B=E in sa,B){if(this.styles.save(E),q||(V=e._gsap,V.renderTransform&&!t.parseTransform||Yd(e,t.parseTransform),M=t.smoothOrigin!==!1&&V.smooth,q=this._pt=new ai(this._pt,u,rn,0,1,V.renderTransform,V,0,-1),q.dep=1),E==="scale")this._pt=new ai(this._pt,V,"scaleY",V.scaleY,(L?rh(V.scaleY,L+g):g)-V.scaleY||0,QT),this._pt.u=0,a.push("scaleY",E),E+="X";else if(E==="transformOrigin"){I.push(li,0,u[li]),p=v$(p),V.svg?ZT(e,p,0,M,0,this):(k=parseFloat(p.split(" ")[2])||0,k!==V.zOrigin&&Wa(this,V,"zOrigin",V.zOrigin,k),Wa(this,u,E,fy(f),fy(p)));continue}else if(E==="svgOrigin"){ZT(e,p,1,M,0,this);continue}else if(E in d2){b$(this,V,E,_,L?rh(_,L+p):p);continue}else if(E==="smoothOrigin"){Wa(this,V,"smooth",V.smooth,p);continue}else if(E==="force3D"){V[E]=p;continue}else if(E==="transform"){S$(this,p,e);continue}}else E in u||(E=Sh(E)||E);if(B||(g||g===0)&&(_||_===0)&&!s$.test(p)&&E in u)S=(f+"").substr((_+"").length),g||(g=0),k=Rr(p)||(E in Pi.units?Pi.units[E]:S),S!==k&&(_=Al(e,E,f,k)),this._pt=new ai(this._pt,B?V:u,E,_,(L?rh(_,L+g):g)-_,!B&&(k==="px"||E==="zIndex")&&t.autoRound!==!1?l$:QT),this._pt.u=k||0,S!==k&&k!=="%"&&(this._pt.b=f,this._pt.r=a$);else if(E in u)_$.call(this,e,E,f,L?L+p:p);else if(E in e)this.add(e,E,f||e[E],L?L+p:p,i,s);else if(E!=="parseTransform"){Xb(E,p);continue}B||(E in u?I.push(E,0,u[E]):typeof e[E]=="function"?I.push(E,2,e[E]()):I.push(E,1,f||e[E])),a.push(E)}}O&&i2(this)},render:function(e,t){if(t.tween._time||!aS())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:qo,aliases:to,getSetter:function(e,t,r){var i=to[t];return i&&i.indexOf(",")<0&&(t=i),t in sa&&t!==li&&(e._gsap.x||qo(e,"x"))?r&&Mk===r?t==="scale"?f$:h$:(Mk=r||{})&&(t==="scale"?d$:p$):e.style&&!Wb(e.style[t])?u$:~t.indexOf("-")?c$:iS(e,t)},core:{_removeProperty:Bu,_getMatrix:uS}};ci.utils.checkPrefix=Sh;ci.core.getStyleSaver=u2;(function(n,e,t,r){var i=oi(n+","+e+","+t,function(s){sa[s]=1});oi(e,function(s){Pi.units[s]="deg",d2[s]=1}),to[i[13]]=n+","+e,oi(r,function(s){var a=s.split(":");to[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");oi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Pi.units[n]="px"});ci.registerPlugin(g2);var wg=ci.registerPlugin(g2)||ci;wg.core.Tween;function w$(){const[n,e]=G.useState(null),[t,r]=G.useState(window.innerWidth),[i,s]=G.useState(null),[a,u]=G.useState(null),c=bl(),[f,p]=G.useState(""),[g,_]=G.useState([]),[A,T]=G.useState([]),E=[{linkName:"Home",link:"/"},{linkName:"About",link:"/about"},{linkName:"Blogs",link:"/blogs"},{linkName:"Contact",link:"#footer"}],S=G.useCallback(V=>{e(V)},[]),k=G.useCallback(()=>{e(null)},[]);G.useEffect(()=>{const V=()=>r(window.innerWidth);return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),G.useEffect(()=>{(async()=>{try{const O=(await XM(gb(ra,"blogs"))).docs.map(I=>({id:I.id,...I.data()}));_(O)}catch(M){console.error("Error fetching blogs:",M)}})()},[]);const L=()=>{const V=f.trim().toLowerCase();if(!V){console.log("nothing"),T([]);return}const M=V[0],O=new Set;g.forEach(x=>{Array.isArray(x.categories)&&x.categories.forEach(z=>{z.toLowerCase().includes(V)&&O.add(z.toLowerCase())})});const I=g.filter(x=>{var P,ae;const z=((P=x.title)==null?void 0:P.toLowerCase())||"",U=((ae=x.subtitle)==null?void 0:ae.toLowerCase())||"",j=Array.isArray(x.categories)?x.categories.map(fe=>fe.toLowerCase()):[];return z.includes(V)||U.includes(V)||z[0]===M||j.some(fe=>fe.includes(V))||j.some(fe=>O.has(fe))});T(I)};G.useEffect(()=>{n!==null&&wg.from(".active",{scaleX:0,transformOrigin:"50% 50%",ease:"power4.out",duration:.8})},[n]);function B(){i?i&&(u(!1),wg.to(".navbar-phone-dropdown-container",{x:"-100%",duration:1.2,ease:"power4.in",onComplete:()=>{s(!1)}})):(s(!0),u(!0))}function q(V){i?V==="#footer"?(B(),setTimeout(()=>{yh(V)},1300)):(c(V),B()):V==="#footer"?yh(V):c(V)}return G.useEffect(()=>{i?(wg.from(".navbar-phone-dropdown-container",{transform:"translateX(-100%)",duration:1.2,ease:"power3.inOut"}),document.body.classList.add("no-scroll")):document.body.classList.remove("no-scroll")},[i]),C.jsx("nav",{id:"nav",className:"nav-main-container charcoal-bg",children:t<=700?C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"logo-ham-container",children:[C.jsx("div",{className:"logo",children:C.jsx("img",{src:sy,onClick:()=>{c("/"),e(0)}})}),C.jsx("div",{className:"nav-hamburger-container ",onClick:()=>B(),children:C.jsx(d9,{isOpened:a})})]}),C.jsxs("div",{className:"quick-search-container",children:[C.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search...",value:f,onChange:V=>p(V.target.value)}),C.jsx("button",{onClick:()=>{L()},className:"arrow-button green-bg",style:{zIndex:"9"},children:C.jsx("img",{src:Sk})}),C.jsx("div",{className:"search-results-container silver-bg",children:A.map(V=>{var M;return C.jsxs("div",{className:"search-result",style:{padding:"20px"},onClick:()=>{c(`/singleBlog/${V.id}`),p(""),T([])},children:[C.jsx("img",{style:{width:"250px",height:"120px",marginBottom:"10px",objectFit:"cover"},src:V.imgUrl,alt:V.title}),C.jsxs("div",{className:"display-column",style:{textAlign:"left"},children:[C.jsxs("h3",{className:"outfit-font",style:{marginBottom:"5px"},children:[V.title," ",V.part&&`Part ${V.part}`]}),C.jsxs("p",{className:"outfit-font",children:[C.jsx("span",{className:"d-silver-text",style:{textDecoration:"underline"},children:"Catgories:"})," "]}),C.jsx("p",{style:{textAlign:"center",marginTop:"5px"},children:(M=V.categories)==null?void 0:M.join(", ")})]})]},V.id)})})]}),i&&C.jsx("div",{className:"navbar-phone-dropdown-container dark-silver-bg",children:C.jsx("div",{className:"dropdown-links-container",children:E.map((V,M)=>C.jsx("div",{children:C.jsxs("h3",{className:"outfit-font dropdown-link-name ",onClick:()=>{S(M),q(V.link)},children:[V.linkName,n===M&&C.jsx("div",{className:"active"})]})},V.linkName))})})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"quick-search-container",children:[C.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search...",value:f,onChange:V=>p(V.target.value)}),C.jsx("button",{onClick:()=>{console.log("Search button clicked!"),L()},className:"arrow-button green-bg",style:{zIndex:"9"},children:C.jsx("img",{src:Sk})}),A.length>0&&C.jsx("div",{className:"search-results-container = silver-bg",children:A.map(V=>{var M;return C.jsxs("div",{className:"search-result",style:{padding:"20px 10px"},onClick:()=>{c(`/singleBlog/${V.id}`),p(""),T([])},children:[C.jsx("img",{style:{width:"180px",height:"80px",marginRight:"30px",objectFit:"cover"},src:V.imgUrl,alt:V.title}),C.jsxs("div",{style:{textAlign:"left"},children:[C.jsxs("h3",{className:"outfit-font",style:{marginBottom:"5px"},children:[V.title," ",V.part&&`Part ${V.part}`]}),C.jsxs("p",{className:"outfit-font",children:[C.jsx("span",{className:"-text",style:{textDecoration:"underline"},children:"Catgories:"})," ",(M=V.categories)==null?void 0:M.join(", ")]})]})]},V.id)})})]}),C.jsxs("div",{className:"logo-links",children:[C.jsx("img",{src:sy,onClick:()=>{c("/"),e(0)}}),C.jsx("div",{className:"links",children:E.map((V,M)=>C.jsxs("div",{onMouseEnter:()=>S(M),onMouseLeave:k,onClick:()=>q(V.link),className:"link-container",children:[C.jsx("h1",{className:"outfit-font",children:V.linkName}),n===M&&C.jsx("div",{className:"active"})]},V.linkName))})]}),C.jsxs("div",{className:"socials ",children:[C.jsx("img",{src:LT}),C.jsx("img",{src:VT}),C.jsx("img",{src:UT})]})]})})}const Fk="/assets/import-CjaYub2X.png",R$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHvUExURf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGbS3AIAAACkdFJOUwABAgMEBQcICQoLDQ4PExQXGRocHR8gISIjJScoKSssLS4vMDIzNDU2Nzo7PT4/QUJDREVGR0hJSktMTU5PUVRVW11fYWJkZWZnaGxxc3Z3eXp7fX6BhYeIiYqOj5CTlZaam52foKSlpqeoq6yusLKztLa4ur6/wMHCxMXHyMrLzM3Oz9DS1NXX2dvc3t/g4+Tm6Ort7u/w8fLz9PX4+fr7/P3+smXS9wAAAAlwSFlzAAAPrwAAD68B1qQibQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGHaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyI+PHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj48dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L3g6eG1wbWV0YT4NCjw/eHBhY2tldCBlbmQ9J3cnPz4slJgLAAAJtElEQVR4Xu3d+7cVZQHH4UHULpbSxUyzzBQts+gGpWmmlqVWVohpJd66qSiammZ4K01NyDTRvIQU/aEtLuI5L+ecvffMe515nh/fmT2zXJ/vWgdwsek6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoDEbLr1m2207n3jxxSd23rbtmks3hNcZsXUbr3/8wP+WOfD49RvXhfcxSltuf2l5/He8dPuW8F5GZ9NjYfelHtsU3s+onPdgmDz04HnhZxiNM3eEuVey48zwc4zDVfvC1ivbd1X4SUbg+O1h6NVtPz78NK07+aGw8loeOjn8PG07a3fYeG27zwqfQMsueiMsPMsbF4XPoF2XzPnLv6X2XRI+hVb16W8B49GvvwWMRd/+FjAO/ftbwBgM6W8B7RvW3wJaN7S/BbRteH8LaFmM/hbQrjj9LaBVsfpbQJvi9beAFsXsbwHtidvfAloTu78FtCV+fwtoSYr+FtCONP0toBWp+ltAG9L1t4AWpOxvAfVL298Cape6vwXULX1/C6hZjv4WUK88/S2gVrn6W0Cd8vW3gBrl7G8B9cnb3wJqk7u/BdQlf38LqEmJ/hZQjzL9LaAWpfpbQB3K9beAGpTsbwHlle1vAaWV7m8BZZXvbwEl1dDfAsqpo78FlFJLfwsoo57+FlBCTf0tIL+6+ltAbrX1t4C86utvATnV2N8C8qmzvwXkUmt/C8ij3v4WkEPN/S0gvbr7W0Bqtfe3gLTq728BKbXQ3wLSaaO/BaTSSn8LSKOd/haQQkv9LSC+tvpbQGyt9beAuNrrbwExtdjfAuJps78FxNJqfwuIo93+FhBDy/0tYLi2+1vAUK33t4Bh2u9vAUOMob8F9DeO/hbQV5b+e/eGJwlYQB95+p97rgXUKVP/rrOAKmXrbwFVytjfAiqUtb8FVCdzfwuoTPb+FlCVAv0toCJF+ltANQr1t4BKFOtvAVUo2N8CKlC0vwUUV7i/BRRWvL8FFFVBfwsoqIr+FlBMJf0toJBq+ltAERX1t4ACqupvAdlV1t8CMquuvwVkVWF/C8ioyv4WkE2l/S0gk2r7W0AWFfe3gAyq7m8ByVXe3wISq76/BSTVQH8LSKiJ/haQTCP9LSCRZvpbQBIN9beABJrqbwHRNdbfAiJrrr8FRJWn/8bwtcNYQDRN9reAaBrtbwGRNNvfAqJouL8FRNB0fwsYrPH+FjBQ8/0tYJAR9LeAAUbR3wJ6G0l/C+hpNP0toJcR9beAHkbV3wIWNrL+FrCg0fW3gIWMsL8FLGCU/S1gbiPtbwFzGm1/C5jLiPtbwBxG3d8CZhp5fwuYYfT9LWBNE+hvAWuYRH8LWFWW/q8W728Bq5hMfwtY0YT6W8AKJtXfAo4xsf4WEJhcfwtYZoL9LWCJSfa3gKMm2t8Cjphsfws4ZML9LWDq/S0gU//zwtfWY+ILmHz/iS9A/2kvQP9DJrsA/Y+Y6AL0P2qSC9B/iQkuQP9lJrcA/QMTW4D+x5jUAvRfwYQWoP+KJrMA/VcxkQXov6pJLED/NUxgAfqvafQL0H+GkS9A/5lGvQD95zDiBeg/l9EuQP85jXQB+s9tlAvQfwEjXID+CxndAvRf0MgWoP/CRrUA/XsY0QL072U0C9C/p5EsQP/eRrEA/QcYwQL0H6T5Beg/UOML0H+wphegfwQNL0D/KJpdgP6RNLoA/aNpcgF5+p8fvnacGlyA/lE1twD9I2tsAfpH19QC9E+goQXon0QzC9A/kUYWoH8yTSxA/4QaWID+SVW/AP0Tq3wB+idX9QL0z6DiBeifRbUL0D+TShegfzZVLkD/jCpcgP5ZVbeALP1f0/+oyhagf3ZVLUD/AipagP5FVLMA/QupZAH6F1PFAvQvqIIF6F9U8QXoX1jhBehfXNEFXKx/eXkWcHH42oPOfjO8LwH9Z8mygDfPDl/bdafsCe9KQP/Zsixgzynha094OLwnAf3nkWUBD58QvPXW8I4E9J9PlgXcuvydV4fXE9B/XlkWcPXSN579dng5Pv3nl2MBby/9heB94dX49F9EjgXc/+7rLgivxaf/YnIs4PNH35b+dwD6LyrDAv74zru+Fl6J7rXPLv+vY7YMC/j6kVc9GV6ITf8+0i/gz+sOveiS8Dw2/ftJv4BvHXrPb8LjyPTvK/kCfnfwLetfCY/j0r+/1AvYu77rugvD07j0HyL1Ar7Qdd1N4WFU+g+TeAE/77ru2fAwJv2HSruAZ7vutPAsJv2HS7uA07orwqOI9I8h6QKu6K4Lj+LRP46UC7iuuzk8ikb/WBIu4OburvAoFv3jSbeAu7pHwqNI9I8p2QIe6Z4Pj+LQP65UC3i+ez08ikL/2BIt4PXurfAoBv3jS7OAt7oXwqMI9E8hyQJe6B4Nj4bTP40UC3i02xEeDaZ/KgkWcHe3PTwaSv904i9ge/fT8Ggg/VOKvoCfdN8Nj4bRP63YC/hO9+nwaBD9U4u8gE913d/DswH0Ty/qAvZ0XXdLeNif/jnEXMD2ruu2hIe96Z9HxAVs7rruPbG+G0j/XKIt4M0TDz7u3vC4H/3zibWAew897crwuBf9c4q0gCsPPeyEGP8/SP+8oizghSPfFHV5eGFx+ucWYwGXH3nWcc+EVxalf37DF/DMce88a+hfENe/hMELWPKVwbvCawvRv4yBC9i15FGbwouL0L+UYQvYtPRRN4ZX56d/OUMW8LNlTzru/vD6vF773LIHkVX/Bdx39FeAh33gufCO+ehfVt8FPHtS+KQzXg3vmYf+pfVbwCunh8/pus3/Ce+aTf/y+ixg/5fCpxz0/YUX8LLv/6zAOf8Iu8zy9uH/B3CMryy4pac+Gj6BEj604B/j/PPgV0Ot6PSFvi/ozveGn6eME38dtlnL06eGn3/XSTvDu1f13x+HH6acH8z/4/vu94UfXmrdDeH9q/jXiv/yGKV8dc4f3we2Hv5+4NVdMM93x++//SPh5yhrw/Z5/tnHBzaGn1vB5lnfHn7gzjPCz1Deqb+a9XPgT18MP7OydZet+ceC938m/AB1+OSaf9P36YvC+1e3/tu/XeUrpP/2S3/2U7FzbvxrWOywl+/45qwf/oH1F94U/qZw/0M//ER4G7X52LUP/DsI99S28xesf8THL7v2hjt+/5eX9uy659at3/vGB8Pr1On9X77iR7+48w/P7d51zy1br7r4w+F1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGIf/AziVKmKNHw2DAAAAAElFTkSuQmCC";function Hk(){return C.jsx("button",{className:"to-top-button green-bg",children:C.jsx("img",{src:R$})})}function sl({text:n,fontSize:e,margin:t,onClick:r}){return C.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:e||"clamp(1.8rem, 1.9vw, 2rem)",margin:t},onClick:r,children:n})}function C$(){const[n,e]=G.useState(window.innerWidth),t=bl();return G.useEffect(()=>{const r=()=>e(window.innerWidth);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),C.jsx("section",{id:"footer",className:"footer-main-container",children:n<800?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"footer-logo-signup",children:C.jsx("img",{src:sy})}),C.jsxs("div",{className:"footer-contact",children:[C.jsx("h1",{className:"outfit-font",children:"Contacts:"}),C.jsxs("div",{className:"footer-icons",children:[C.jsx("img",{src:UT}),C.jsx("img",{src:LT}),C.jsx("img",{src:VT})]})]}),C.jsx("div",{className:"footer-blerb",children:C.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),C.jsxs("div",{className:"footer-newsletter",children:[C.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),C.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),C.jsx(sl,{text:"Submit",fontSize:"1.3rem"})]}),C.jsx("div",{className:"to-top-button",onClick:()=>yh("#nav"),children:C.jsx(Hk,{})}),C.jsx("a",{href:"#nav",children:C.jsx("img",{src:Fk,className:"login-button",onClick:()=>{t("/login")}})})]}):C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"footer-blerb",children:C.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),C.jsxs("div",{className:"footer-logo-signup",children:[C.jsx("img",{src:sy}),C.jsxs("div",{className:"footer-newsletter",children:[C.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),C.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),C.jsx(sl,{text:"Submit"})]})]}),C.jsxs("div",{className:"footer-contact",children:[C.jsx("h1",{className:"outfit-font",children:"Contacts:"}),C.jsxs("div",{className:"footer-icons",children:[C.jsx("img",{src:UT}),C.jsx("img",{src:LT}),C.jsx("img",{src:VT})]})]}),C.jsx("div",{className:"to-top-button",onClick:()=>yh("#nav"),children:C.jsx(Hk,{})}),C.jsx("a",{href:"#nav",children:C.jsx("img",{src:Fk,className:"login-button",onClick:()=>{t("/login")}})})]})})}const x$=["Monday Devotional","Thursday Lessons","Tuesday Article","Uncategorized","Wednesday Inspiration","Thoughts","Taxes","Experiences"];function k$(){const n=e=>e.length>10?"size-c":e.length>=6?"size-b":"size-a";return C.jsxs("section",{className:"common-cat-container green-bg",children:[C.jsx("h1",{className:"outfit-font",children:"Common Categories:"}),C.jsx("div",{className:"category-bento-container",children:x$.map((e,t)=>C.jsx("h3",{className:`category silver-bg outfit-font ${n(e)}`,children:e},t))})]})}function Ap(){return C.jsx("div",{className:"loader-container ",children:C.jsxs("div",{className:"typewriter",children:[C.jsx("div",{className:"slide",children:C.jsx("i",{})}),C.jsx("div",{className:"paper"}),C.jsx("div",{className:"keyboard"})]})})}function I$(){const{state:n}=HN();return C.jsxs("div",{className:"main-container",children:[C.jsx(w$,{}),n==="loading"?C.jsx(Ap,{}):C.jsx("div",{children:C.jsx(Mz,{})}),C.jsx(k$,{}),C.jsx(C$,{})]})}function N$(){const{state:n}=HN();return C.jsx("div",{className:"main-container",children:n==="loading"?"loading...":C.jsx("h1",{children:"Error"})})}const cS=ry(),O$=gb(ra,"blogs"),M$=async()=>(await XM(O$)).docs.map(e=>({id:e.id,...e.data()})),Rg=async n=>{const e=Pu(ra,"blogs",n),t=await YM(e);if(!t.exists())throw new Error("Blog not found");return{id:t.id,...t.data()}},D$=async n=>{if(!cS.currentUser)throw new Error("User not authenticated");return(await l9(gb(ra,"blogs"),{...n,likes:[],comments:[],datePosted:c9()})).id},P$=async n=>{const e=cS.currentUser;if(!e)throw new Error("Not authenticated");const t=Pu(ra,"blogs",n);return await b_(t,{likes:ZM(e.uid)}),{success:!0}},L$=async n=>{const e=cS.currentUser;if(!e)throw new Error("Not authenticated");const t=Pu(ra,"blogs",n);return await b_(t,{likes:h9(e.uid)}),{success:!0}},V$=async(n,e,t)=>{const r=Pu(ra,"blogs",n),i={name:t,comment:e,date:Nn.now()};return await b_(r,{comments:ZM(i)}),{success:!0}};function hS(){return C.jsxs("div",{className:"loader",children:[C.jsx("div",{className:"bar1"}),C.jsx("div",{className:"bar2"}),C.jsx("div",{className:"bar3"}),C.jsx("div",{className:"bar4"}),C.jsx("div",{className:"bar5"}),C.jsx("div",{className:"bar6"}),C.jsx("div",{className:"bar7"}),C.jsx("div",{className:"bar8"}),C.jsx("div",{className:"bar9"}),C.jsx("div",{className:"bar10"}),C.jsx("div",{className:"bar11"}),C.jsx("div",{className:"bar12"})]})}const y2="/assets/Artc1-CST6bCyG.png";function Qd({isVertical:n=!1,title:e,height:t,marginBottom:r,trending:i=!1,maxCount:s,nav:a}){const[u,c]=G.useState([]),[f,p]=G.useState(!0),g=G.useRef(null),_=bl(),A=s??4;return G.useEffect(()=>{(async()=>{try{p(!0);const E=await M$(),S=E.some(L=>typeof L.likes=="number");let k;i&&S?k=[...E].sort((L,B)=>(B.likes||0)-(L.likes||0)):k=[...E].sort((L,B)=>{var M,O,I,x;const q=((O=(M=L.datePosted)==null?void 0:M.toDate)==null?void 0:O.call(M))||new Date(0);return(((x=(I=B.datePosted)==null?void 0:I.toDate)==null?void 0:x.call(I))||new Date(0))-q}),c(k)}catch(E){console.error("Failed to fetch blogs:",E)}finally{p(!1)}})()},[i]),C.jsxs("section",{className:"display-column",children:[C.jsxs("div",{className:"title-container",children:[C.jsx("h1",{className:"outfit-font",children:e}),C.jsx("div",{className:"line-blog"})]}),C.jsx("div",{ref:g,className:`blog-column-container ${n?"vertical":"horizontal"}`,children:f?C.jsx(hS,{}):u.slice(0,A).map((T,E)=>{var S;return C.jsxs("div",{className:"blog-info-container",style:{marginBottom:r},onClick:()=>{_(`/${a}/${T.id}`),yh("#nav")},children:[C.jsx("img",{src:T.imgUrl||y2,alt:T.title||"Blog image",style:{height:t}}),C.jsx("p",{className:"playfair-thin-font",children:((S=T.categories)==null?void 0:S[0])||"Uncategorized"}),C.jsxs("h3",{children:[T.title||"Untitled"," ",T.part?`Part ${T.part}`:""]}),C.jsx("p",{className:"playfair-thin-font silver-text",children:T.author||"Unknown Author"})]},T.id||E)})})]})}const U$="/assets/MDRLogoCup-BgPHFgxi.png",z$="/assets/MDRHeroBgPhone-CqPQrG5g.png";function B$(){const[n,e]=G.useState(window.innerWidth);return G.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),C.jsx("section",{className:"hero-main-container",children:n<=600?C.jsxs(C.Fragment,{children:[C.jsx("img",{src:z$}),C.jsx("h1",{className:"playfair-font green-text",children:"My"}),C.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),C.jsx("h1",{className:"playfair-font green-text",children:"Reed"}),C.jsx(sl,{text:"See Blogs"})]}):C.jsxs(C.Fragment,{children:[C.jsx("img",{src:U$})," ",C.jsx("h1",{className:"playfair-font green-text",children:"My"}),C.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),C.jsx("h1",{style:{marginBottom:"10px"},className:"playfair-font green-text",children:"Reed"}),C.jsx(sl,{text:"See Blogs"})]})})}function j$(){return C.jsxs("div",{className:"display-column",children:[C.jsx(B$,{}),C.jsxs("div",{style:{padding:"0px 20px"},className:"display-column ",children:[C.jsx(Qd,{nav:"singleBlog",title:"Latest",isVertical:!1,marginBottom:"40px"}),C.jsx(Qd,{nav:"singleBlog",title:"Trending",isVertical:!1,marginBottom:"40px",trending:!0})]})]})}const F$={element:j$()};function eE({author:n}){const e=G.useRef(null),[t,r]=G.useState(0),i=oa();return G.useEffect(()=>{const s=()=>{e.current&&r(e.current.offsetHeight)};return setTimeout(()=>{s()},[500]),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[i]),console.log("height",t),C.jsxs("div",{ref:e,className:"sidebar-main-container silver-bg",children:[C.jsx(Qd,{nav:"singleBlog",title:"Latest",maxCount:3}),C.jsx(Qd,{nav:"singleBlog",title:"Trending",maxCount:2})]})}function H$(){return C.jsxs("section",{className:"about-info-main-section",children:[C.jsxs("div",{className:"about-info",children:[C.jsx("h3",{className:"outfit-thin-font",children:"My Daily Reed. When you read and respond, in any way, it’s an inexplicable connection. PLEASE share your thoughts. The space between a writer and the reader is sacred. Because there are only so many heartbeats and pen strokes we can share in this life. What we share should be thought-provoking, meaningful, and dare I say. FUN!"}),C.jsxs("ul",{className:"playfair-font",children:[C.jsx("li",{children:"Monday-Devotion"}),C.jsx("li",{children:"Tuesday-Article"}),C.jsx("li",{children:"Wednesday-Inspiration/Insight"}),C.jsx("li",{children:"Thursday-Lessons from a Grocery Store"}),C.jsx("li",{children:"Friday-Your Turn"})]})]}),C.jsx(eE,{author:"My Daily Reed"})]})}const q$="/assets/MDRAboutTree-JE1PMwgt.png";function $$(){return C.jsxs("section",{className:"about-title-main-container charcoal-bg",children:[C.jsx("h1",{className:"playfair-font ",children:"My Daily Reed"}),C.jsx("img",{src:q$}),C.jsx("h1",{className:"playfair-font",children:"About"})]})}function G$(){return C.jsxs("div",{className:"display-column",children:[C.jsx($$,{}),C.jsx(H$,{})]})}const K$={element:G$()};/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:_2,setPrototypeOf:qk,isFrozen:W$,getPrototypeOf:Y$,getOwnPropertyDescriptor:Q$}=Object;let{freeze:Fr,seal:ds,create:v2}=Object,{apply:tE,construct:nE}=typeof Reflect<"u"&&Reflect;Fr||(Fr=function(e){return e});ds||(ds=function(e){return e});tE||(tE=function(e,t,r){return e.apply(t,r)});nE||(nE=function(e,t){return new e(...t)});const Qm=Hr(Array.prototype.forEach),X$=Hr(Array.prototype.lastIndexOf),$k=Hr(Array.prototype.pop),Kf=Hr(Array.prototype.push),J$=Hr(Array.prototype.splice),Cg=Hr(String.prototype.toLowerCase),wA=Hr(String.prototype.toString),Gk=Hr(String.prototype.match),Wf=Hr(String.prototype.replace),Z$=Hr(String.prototype.indexOf),eG=Hr(String.prototype.trim),Es=Hr(Object.prototype.hasOwnProperty),Br=Hr(RegExp.prototype.test),Yf=tG(TypeError);function Hr(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return tE(n,e,r)}}function tG(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return nE(n,t)}}function mt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cg;qk&&qk(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(W$(e)||(e[r]=s),i=s)}n[i]=!0}return n}function nG(n){for(let e=0;e<n.length;e++)Es(n,e)||(n[e]=null);return n}function uu(n){const e=v2(null);for(const[t,r]of _2(n))Es(n,t)&&(Array.isArray(r)?e[t]=nG(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=uu(r):e[t]=r);return e}function Qf(n,e){for(;n!==null;){const r=Q$(n,e);if(r){if(r.get)return Hr(r.get);if(typeof r.value=="function")return Hr(r.value)}n=Y$(n)}function t(){return null}return t}const Kk=Fr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),RA=Fr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),CA=Fr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rG=Fr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xA=Fr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),iG=Fr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Wk=Fr(["#text"]),Yk=Fr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),kA=Fr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Qk=Fr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xm=Fr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),sG=ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),oG=ds(/<%[\w\W]*|[\w\W]*%>/gm),aG=ds(/\$\{[\w\W]*/gm),lG=ds(/^data-[\-\w.\u00B7-\uFFFF]+$/),uG=ds(/^aria-[\-\w]+$/),A2=ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cG=ds(/^(?:\w+script|data):/i),hG=ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),T2=ds(/^html$/i),fG=ds(/^[a-z][.\w]*(-[.\w]+)+$/i);var Xk=Object.freeze({__proto__:null,ARIA_ATTR:uG,ATTR_WHITESPACE:hG,CUSTOM_ELEMENT:fG,DATA_ATTR:lG,DOCTYPE_NAME:T2,ERB_EXPR:oG,IS_ALLOWED_URI:A2,IS_SCRIPT_OR_DATA:cG,MUSTACHE_EXPR:sG,TMPLIT_EXPR:aG});const Xf={element:1,text:3,progressingInstruction:7,comment:8,document:9},dG=function(){return typeof window>"u"?null:window},pG=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Jk=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function E2(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dG();const e=Ae=>E2(Ae);if(e.version="3.2.5",e.removed=[],!n||!n.document||n.document.nodeType!==Xf.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:u,Element:c,NodeFilter:f,NamedNodeMap:p=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:_,trustedTypes:A}=n,T=c.prototype,E=Qf(T,"cloneNode"),S=Qf(T,"remove"),k=Qf(T,"nextSibling"),L=Qf(T,"childNodes"),B=Qf(T,"parentNode");if(typeof a=="function"){const Ae=t.createElement("template");Ae.content&&Ae.content.ownerDocument&&(t=Ae.content.ownerDocument)}let q,V="";const{implementation:M,createNodeIterator:O,createDocumentFragment:I,getElementsByTagName:x}=t,{importNode:z}=r;let U=Jk();e.isSupported=typeof _2=="function"&&typeof B=="function"&&M&&M.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:j,ERB_EXPR:P,TMPLIT_EXPR:ae,DATA_ATTR:fe,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:ne,ATTR_WHITESPACE:Te,CUSTOM_ELEMENT:xe}=Xk;let{IS_ALLOWED_URI:F}=Xk,se=null;const ge=mt({},[...Kk,...RA,...CA,...xA,...Wk]);let le=null;const Re=mt({},[...Yk,...kA,...Qk,...Xm]);let Se=Object.seal(v2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Le=null,Kt=null,Rt=!0,mr=!0,Ut=!1,On=!0,Zn=!1,di=!0,Xt=!1,gs=!1,ks=!1,on=!1,Is=!1,zi=!1,ys=!0,Bi=!1;const pi="user-content-";let gr=!0,Kr=!1,Mr={},ut=null;const et=mt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Mn=null;const Jt=mt({},["audio","video","img","source","image","track"]);let Ns=null;const Dr=mt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pr="http://www.w3.org/1998/Math/MathML",Lr="http://www.w3.org/2000/svg",Tn="http://www.w3.org/1999/xhtml";let En=Tn,mi=!1,yr=null;const Os=mt({},[Pr,Lr,Tn],wA);let Wr=mt({},["mi","mo","mn","ms","mtext"]),ji=mt({},["annotation-xml"]);const Yr=mt({},["title","style","font","a","script"]);let er=null;const Ms=["application/xhtml+xml","text/html"],tr="text/html";let Nt=null,nr=null;const Ds=t.createElement("form"),$=function(K){return K instanceof RegExp||K instanceof Function},X=function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(nr&&nr===K)){if((!K||typeof K!="object")&&(K={}),K=uu(K),er=Ms.indexOf(K.PARSER_MEDIA_TYPE)===-1?tr:K.PARSER_MEDIA_TYPE,Nt=er==="application/xhtml+xml"?wA:Cg,se=Es(K,"ALLOWED_TAGS")?mt({},K.ALLOWED_TAGS,Nt):ge,le=Es(K,"ALLOWED_ATTR")?mt({},K.ALLOWED_ATTR,Nt):Re,yr=Es(K,"ALLOWED_NAMESPACES")?mt({},K.ALLOWED_NAMESPACES,wA):Os,Ns=Es(K,"ADD_URI_SAFE_ATTR")?mt(uu(Dr),K.ADD_URI_SAFE_ATTR,Nt):Dr,Mn=Es(K,"ADD_DATA_URI_TAGS")?mt(uu(Jt),K.ADD_DATA_URI_TAGS,Nt):Jt,ut=Es(K,"FORBID_CONTENTS")?mt({},K.FORBID_CONTENTS,Nt):et,Le=Es(K,"FORBID_TAGS")?mt({},K.FORBID_TAGS,Nt):{},Kt=Es(K,"FORBID_ATTR")?mt({},K.FORBID_ATTR,Nt):{},Mr=Es(K,"USE_PROFILES")?K.USE_PROFILES:!1,Rt=K.ALLOW_ARIA_ATTR!==!1,mr=K.ALLOW_DATA_ATTR!==!1,Ut=K.ALLOW_UNKNOWN_PROTOCOLS||!1,On=K.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Zn=K.SAFE_FOR_TEMPLATES||!1,di=K.SAFE_FOR_XML!==!1,Xt=K.WHOLE_DOCUMENT||!1,on=K.RETURN_DOM||!1,Is=K.RETURN_DOM_FRAGMENT||!1,zi=K.RETURN_TRUSTED_TYPE||!1,ks=K.FORCE_BODY||!1,ys=K.SANITIZE_DOM!==!1,Bi=K.SANITIZE_NAMED_PROPS||!1,gr=K.KEEP_CONTENT!==!1,Kr=K.IN_PLACE||!1,F=K.ALLOWED_URI_REGEXP||A2,En=K.NAMESPACE||Tn,Wr=K.MATHML_TEXT_INTEGRATION_POINTS||Wr,ji=K.HTML_INTEGRATION_POINTS||ji,Se=K.CUSTOM_ELEMENT_HANDLING||{},K.CUSTOM_ELEMENT_HANDLING&&$(K.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=K.CUSTOM_ELEMENT_HANDLING.tagNameCheck),K.CUSTOM_ELEMENT_HANDLING&&$(K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),K.CUSTOM_ELEMENT_HANDLING&&typeof K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Se.allowCustomizedBuiltInElements=K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zn&&(mr=!1),Is&&(on=!0),Mr&&(se=mt({},Wk),le=[],Mr.html===!0&&(mt(se,Kk),mt(le,Yk)),Mr.svg===!0&&(mt(se,RA),mt(le,kA),mt(le,Xm)),Mr.svgFilters===!0&&(mt(se,CA),mt(le,kA),mt(le,Xm)),Mr.mathMl===!0&&(mt(se,xA),mt(le,Qk),mt(le,Xm))),K.ADD_TAGS&&(se===ge&&(se=uu(se)),mt(se,K.ADD_TAGS,Nt)),K.ADD_ATTR&&(le===Re&&(le=uu(le)),mt(le,K.ADD_ATTR,Nt)),K.ADD_URI_SAFE_ATTR&&mt(Ns,K.ADD_URI_SAFE_ATTR,Nt),K.FORBID_CONTENTS&&(ut===et&&(ut=uu(ut)),mt(ut,K.FORBID_CONTENTS,Nt)),gr&&(se["#text"]=!0),Xt&&mt(se,["html","head","body"]),se.table&&(mt(se,["tbody"]),delete Le.tbody),K.TRUSTED_TYPES_POLICY){if(typeof K.TRUSTED_TYPES_POLICY.createHTML!="function")throw Yf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof K.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Yf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');q=K.TRUSTED_TYPES_POLICY,V=q.createHTML("")}else q===void 0&&(q=pG(A,i)),q!==null&&typeof V=="string"&&(V=q.createHTML(""));Fr&&Fr(K),nr=K}},Z=mt({},[...RA,...CA,...rG]),he=mt({},[...xA,...iG]),ve=function(K){let me=B(K);(!me||!me.tagName)&&(me={namespaceURI:En,tagName:"template"});const Ce=Cg(K.tagName),tt=Cg(me.tagName);return yr[K.namespaceURI]?K.namespaceURI===Lr?me.namespaceURI===Tn?Ce==="svg":me.namespaceURI===Pr?Ce==="svg"&&(tt==="annotation-xml"||Wr[tt]):!!Z[Ce]:K.namespaceURI===Pr?me.namespaceURI===Tn?Ce==="math":me.namespaceURI===Lr?Ce==="math"&&ji[tt]:!!he[Ce]:K.namespaceURI===Tn?me.namespaceURI===Lr&&!ji[tt]||me.namespaceURI===Pr&&!Wr[tt]?!1:!he[Ce]&&(Yr[Ce]||!Z[Ce]):!!(er==="application/xhtml+xml"&&yr[K.namespaceURI]):!1},we=function(K){Kf(e.removed,{element:K});try{B(K).removeChild(K)}catch{S(K)}},ze=function(K,me){try{Kf(e.removed,{attribute:me.getAttributeNode(K),from:me})}catch{Kf(e.removed,{attribute:null,from:me})}if(me.removeAttribute(K),K==="is")if(on||Is)try{we(me)}catch{}else try{me.setAttribute(K,"")}catch{}},Ne=function(K){let me=null,Ce=null;if(ks)K="<remove></remove>"+K;else{const Ct=Gk(K,/^[\r\n\t ]+/);Ce=Ct&&Ct[0]}er==="application/xhtml+xml"&&En===Tn&&(K='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+K+"</body></html>");const tt=q?q.createHTML(K):K;if(En===Tn)try{me=new _().parseFromString(tt,er)}catch{}if(!me||!me.documentElement){me=M.createDocument(En,"template",null);try{me.documentElement.innerHTML=mi?V:tt}catch{}}const zt=me.body||me.documentElement;return K&&Ce&&zt.insertBefore(t.createTextNode(Ce),zt.childNodes[0]||null),En===Tn?x.call(me,Xt?"html":"body")[0]:Xt?me.documentElement:zt},Me=function(K){return O.call(K.ownerDocument||K,K,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Ue=function(K){return K instanceof g&&(typeof K.nodeName!="string"||typeof K.textContent!="string"||typeof K.removeChild!="function"||!(K.attributes instanceof p)||typeof K.removeAttribute!="function"||typeof K.setAttribute!="function"||typeof K.namespaceURI!="string"||typeof K.insertBefore!="function"||typeof K.hasChildNodes!="function")},Fe=function(K){return typeof u=="function"&&K instanceof u};function ke(Ae,K,me){Qm(Ae,Ce=>{Ce.call(e,K,me,nr)})}const He=function(K){let me=null;if(ke(U.beforeSanitizeElements,K,null),Ue(K))return we(K),!0;const Ce=Nt(K.nodeName);if(ke(U.uponSanitizeElement,K,{tagName:Ce,allowedTags:se}),K.hasChildNodes()&&!Fe(K.firstElementChild)&&Br(/<[/\w!]/g,K.innerHTML)&&Br(/<[/\w!]/g,K.textContent)||K.nodeType===Xf.progressingInstruction||di&&K.nodeType===Xf.comment&&Br(/<[/\w]/g,K.data))return we(K),!0;if(!se[Ce]||Le[Ce]){if(!Le[Ce]&&St(Ce)&&(Se.tagNameCheck instanceof RegExp&&Br(Se.tagNameCheck,Ce)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(Ce)))return!1;if(gr&&!ut[Ce]){const tt=B(K)||K.parentNode,zt=L(K)||K.childNodes;if(zt&&tt){const Ct=zt.length;for(let Zt=Ct-1;Zt>=0;--Zt){const Bt=E(zt[Zt],!0);Bt.__removalCount=(K.__removalCount||0)+1,tt.insertBefore(Bt,k(K))}}}return we(K),!0}return K instanceof c&&!ve(K)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&Br(/<\/no(script|embed|frames)/i,K.innerHTML)?(we(K),!0):(Zn&&K.nodeType===Xf.text&&(me=K.textContent,Qm([j,P,ae],tt=>{me=Wf(me,tt," ")}),K.textContent!==me&&(Kf(e.removed,{element:K.cloneNode()}),K.textContent=me)),ke(U.afterSanitizeElements,K,null),!1)},it=function(K,me,Ce){if(ys&&(me==="id"||me==="name")&&(Ce in t||Ce in Ds))return!1;if(!(mr&&!Kt[me]&&Br(fe,me))){if(!(Rt&&Br(Y,me))){if(!le[me]||Kt[me]){if(!(St(K)&&(Se.tagNameCheck instanceof RegExp&&Br(Se.tagNameCheck,K)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(K))&&(Se.attributeNameCheck instanceof RegExp&&Br(Se.attributeNameCheck,me)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(me))||me==="is"&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&Br(Se.tagNameCheck,Ce)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(Ce))))return!1}else if(!Ns[me]){if(!Br(F,Wf(Ce,Te,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&K!=="script"&&Z$(Ce,"data:")===0&&Mn[K])){if(!(Ut&&!Br(ne,Wf(Ce,Te,"")))){if(Ce)return!1}}}}}}return!0},St=function(K){return K!=="annotation-xml"&&Gk(K,xe)},_t=function(K){ke(U.beforeSanitizeAttributes,K,null);const{attributes:me}=K;if(!me||Ue(K))return;const Ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le,forceKeepAttr:void 0};let tt=me.length;for(;tt--;){const zt=me[tt],{name:Ct,namespaceURI:Zt,value:Bt}=zt,mn=Nt(Ct);let Ve=Ct==="value"?Bt:eG(Bt);if(Ce.attrName=mn,Ce.attrValue=Ve,Ce.keepAttr=!0,Ce.forceKeepAttr=void 0,ke(U.uponSanitizeAttribute,K,Ce),Ve=Ce.attrValue,Bi&&(mn==="id"||mn==="name")&&(ze(Ct,K),Ve=pi+Ve),di&&Br(/((--!?|])>)|<\/(style|title)/i,Ve)){ze(Ct,K);continue}if(Ce.forceKeepAttr||(ze(Ct,K),!Ce.keepAttr))continue;if(!On&&Br(/\/>/i,Ve)){ze(Ct,K);continue}Zn&&Qm([j,P,ae],_r=>{Ve=Wf(Ve,_r," ")});const en=Nt(K.nodeName);if(it(en,mn,Ve)){if(q&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!Zt)switch(A.getAttributeType(en,mn)){case"TrustedHTML":{Ve=q.createHTML(Ve);break}case"TrustedScriptURL":{Ve=q.createScriptURL(Ve);break}}try{Zt?K.setAttributeNS(Zt,Ct,Ve):K.setAttribute(Ct,Ve),Ue(K)?we(K):$k(e.removed)}catch{}}}ke(U.afterSanitizeAttributes,K,null)},ft=function Ae(K){let me=null;const Ce=Me(K);for(ke(U.beforeSanitizeShadowDOM,K,null);me=Ce.nextNode();)ke(U.uponSanitizeShadowNode,me,null),He(me),_t(me),me.content instanceof s&&Ae(me.content);ke(U.afterSanitizeShadowDOM,K,null)};return e.sanitize=function(Ae){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Ce=null,tt=null,zt=null;if(mi=!Ae,mi&&(Ae="<!-->"),typeof Ae!="string"&&!Fe(Ae))if(typeof Ae.toString=="function"){if(Ae=Ae.toString(),typeof Ae!="string")throw Yf("dirty is not a string, aborting")}else throw Yf("toString is not a function");if(!e.isSupported)return Ae;if(gs||X(K),e.removed=[],typeof Ae=="string"&&(Kr=!1),Kr){if(Ae.nodeName){const Bt=Nt(Ae.nodeName);if(!se[Bt]||Le[Bt])throw Yf("root node is forbidden and cannot be sanitized in-place")}}else if(Ae instanceof u)me=Ne("<!---->"),Ce=me.ownerDocument.importNode(Ae,!0),Ce.nodeType===Xf.element&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?me=Ce:me.appendChild(Ce);else{if(!on&&!Zn&&!Xt&&Ae.indexOf("<")===-1)return q&&zi?q.createHTML(Ae):Ae;if(me=Ne(Ae),!me)return on?null:zi?V:""}me&&ks&&we(me.firstChild);const Ct=Me(Kr?Ae:me);for(;tt=Ct.nextNode();)He(tt),_t(tt),tt.content instanceof s&&ft(tt.content);if(Kr)return Ae;if(on){if(Is)for(zt=I.call(me.ownerDocument);me.firstChild;)zt.appendChild(me.firstChild);else zt=me;return(le.shadowroot||le.shadowrootmode)&&(zt=z.call(r,zt,!0)),zt}let Zt=Xt?me.outerHTML:me.innerHTML;return Xt&&se["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&Br(T2,me.ownerDocument.doctype.name)&&(Zt="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+Zt),Zn&&Qm([j,P,ae],Bt=>{Zt=Wf(Zt,Bt," ")}),q&&zi?q.createHTML(Zt):Zt},e.setConfig=function(){let Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(Ae),gs=!0},e.clearConfig=function(){nr=null,gs=!1},e.isValidAttribute=function(Ae,K,me){nr||X({});const Ce=Nt(Ae),tt=Nt(K);return it(Ce,tt,me)},e.addHook=function(Ae,K){typeof K=="function"&&Kf(U[Ae],K)},e.removeHook=function(Ae,K){if(K!==void 0){const me=X$(U[Ae],K);return me===-1?void 0:J$(U[Ae],me,1)[0]}return $k(U[Ae])},e.removeHooks=function(Ae){U[Ae]=[]},e.removeAllHooks=function(){U=Jk()},e}var b2=E2();function Zk({title:n,subTitle:e,author:t,datePosted:r,readTime:i,titleImg:s,part:a,partUrl:u,partName:c,description:f}){bl();const p=r!=null&&r.toDate?r.toDate().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):new Date(r).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return C.jsxs("div",{className:"sb-title-main-container charcoal-bg white-text",children:[C.jsx("p",{className:"sb-sub outfit-font",children:e}),C.jsx("h1",{className:"sb-title playfair-font",style:{marginBottom:"40px"},children:n}),a&&C.jsxs("h6",{className:"sb-part silver-bg outfit-font",style:{padding:"5px 20px",borderRadius:"5rem",color:"black"},children:["Part: ",a]}),C.jsx("img",{src:s||y2,alt:"Blog banner"}),C.jsx("p",{className:"sb-title-blerb outfit-thin-font",dangerouslySetInnerHTML:{__html:b2.sanitize(f)}}),c&&C.jsx(sl,{onClick:()=>window.location.href=u,text:c}),C.jsxs("div",{className:"sb-title-info-container",children:[C.jsxs("div",{className:"sb-title-info",children:[C.jsx("h6",{className:"outfit-xthin-font",children:"Author:"}),C.jsx("h5",{className:"playfair-font",children:t||"Unknown"})]}),C.jsxs("div",{className:"sb-title-info",children:[C.jsx("h6",{className:"outfit-xthin-font",children:"Read Time:"}),C.jsx("h5",{className:"playfair-font",children:i||"N/A"})]}),C.jsxs("div",{className:"sb-title-info",children:[C.jsx("h6",{className:"outfit-xthin-font",children:"Date Posted:"}),C.jsx("h5",{className:"playfair-font",children:p})]})]})]})}const mG="/assets/likeFilled-BbC8tfBI.png",gG="/assets/likeEmpty-BD2cNi-E.png";function yG(){var f,p;const{id:n}=VE(),[e,t]=G.useState(null),[r,i]=G.useState(!1),[s,a]=G.useState("");G.useEffect(()=>{(async()=>{var _;try{const A=await Rg(n);t(A);const T=ry().currentUser;T&&((_=A.likes)!=null&&_.includes(T.uid))&&i(!0)}catch(A){console.error("Failed to fetch blog:",A)}})()},[n]);const u=async()=>{if(!(!e||!ry().currentUser))try{r?await L$(n):await P$(n);const _=await Rg(n);t(_),i(!r)}catch(_){console.error("Failed to toggle like:",_)}},c=async()=>{if(!(!s.trim()||!e))try{await V$(n,s,"Anonymous");const g=await Rg(n);t(g),a("")}catch(g){console.error("Failed to submit comment:",g)}};return e?C.jsxs("section",{className:"social-main-container",children:[C.jsxs("div",{className:"like-and-comment-container",children:[C.jsxs("div",{className:"like-and-share",children:[C.jsxs("div",{className:"like-container",children:[C.jsxs("div",{className:"like",children:[C.jsx("img",{src:r?mG:gG,onClick:u,alt:"like button"}),C.jsxs("p",{children:[((f=e.likes)==null?void 0:f.length)||0," likes"]})]}),C.jsx("h1",{className:"outfit-font",children:"Leave a like"})]}),C.jsxs("div",{className:"share-container",children:[C.jsx("h1",{className:"outfit-font",children:"Share This:"}),C.jsxs("div",{children:[C.jsx(sl,{text:"X",fontSize:".8rem"}),C.jsx(sl,{text:"Facebook",fontSize:".8rem"})]})]})]}),C.jsxs("div",{className:"leave-comment",children:[C.jsx("h1",{className:"outfit-font",children:"Leave a Comment:"}),C.jsx("textarea",{className:"outfit-font silver-bg",value:s,onChange:g=>a(g.target.value),placeholder:"leave a comment..."}),C.jsx(sl,{text:"Submit",margin:"0 auto",fontSize:"1.3rem",onClick:c})]})]}),C.jsxs("div",{className:"comment-container",children:[C.jsx("h1",{className:"outfit-font",children:"Comments:"}),C.jsx("div",{className:"comments silver-bg",children:(p=e.comments)==null?void 0:p.map((g,_)=>C.jsxs(Sr.Fragment,{children:[C.jsxs("h1",{className:"commenter-name outfit-font",children:[g.name||"Reader",":"]}),C.jsx("p",{className:"comment outfit-font",children:g.comment})]},_))})]})]}):C.jsx("p",{children:"Loading..."})}function eI({content:n}){return Array.isArray(n)?C.jsx("div",{className:"sb-article-main-container",children:C.jsxs("div",{className:"sb-article-container",children:[n.filter(e=>e.type!=="Description").map((e,t)=>e.type==="Article"?C.jsx("div",{className:"outfit-thin-font sb-article-section",dangerouslySetInnerHTML:{__html:b2.sanitize(e.value)}},e._id||t):e.type==="Image"?C.jsx("img",{src:e.value,alt:`article-section-${t}`,className:"sb-article-image"},e._id||t):null),C.jsx(yG,{})]})}):C.jsx(Ap,{})}function _G(){var s,a,u,c,f,p,g,_,A,T;const[n,e]=G.useState(window.innerWidth),[t,r]=G.useState(null),{id:i}=VE();return G.useEffect(()=>{const E=()=>e(window.innerWidth);return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),G.useEffect(()=>{(async()=>{try{const S=await Rg(i);r(S)}catch(S){console.error("Failed to fetch blog:",S)}})(),yh("#nav")},[i]),C.jsx("section",{id:"single-blog",className:"display-column",children:t?C.jsxs(C.Fragment,{children:[" ",n<600?C.jsxs(C.Fragment,{children:[C.jsx(Zk,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,part:t.part,partName:(a=(s=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:s.value)==null?void 0:a.partName,partUrl:(c=(u=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:u.value)==null?void 0:c.partUrl,description:(f=t.content.find(E=>E.type==="Description"))==null?void 0:f.value,redirectLink:t.redirectLink}),C.jsx("div",{className:"padding-40",children:C.jsx(eI,{content:t.content})}),C.jsx(eE,{author:"My Daily Reed"})]}):C.jsxs(C.Fragment,{children:[C.jsx(Zk,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,partName:(g=(p=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:p.value)==null?void 0:g.partName,partUrl:(A=(_=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:_.value)==null?void 0:A.partUrl,part:t.part,description:(T=t.content.find(E=>E.type==="Description"))==null?void 0:T.value}),C.jsxs("div",{className:"flex-between padding-40 pos-relative",children:[C.jsx(eI,{content:t.content}),C.jsx(eE,{author:"My Daily Reed"})]})]})]}):C.jsx(C.Fragment,{children:C.jsx(Ap,{})})})}const vG={element:C.jsx(_G,{})};function AG(){const[n,e]=G.useState(!1),[t,r]=G.useState(""),[i,s]=G.useState(""),[a,u]=G.useState(""),c=bl();G.useEffect(()=>{const _=UD(hu,A=>{A&&(e(!0),setTimeout(()=>{c("/dashboard")},[1e3]))});return()=>_()},[]);const f=async _=>{_.preventDefault();try{await NH(hu,t,i),c("/dashboard")}catch{u("Incorrect Email/Password")}},p=async()=>{const _=new $o,A="urok.dance@gmail.com";try{(await eq(hu,_)).user.email!==A?(await hu.signOut(),u("Access denied: unauthorized Google account.")):(console.log("Google login successful"),c("/dashboard"))}catch(T){console.error(T),u("Google sign-in failed.")}},g=async()=>{if(!t){u("Please enter your email first.");return}try{await IH(hu,t),alert("Password reset email sent. Check your inbox.")}catch(_){u(_.message)}};return C.jsx(C.Fragment,{children:n?C.jsx(C.Fragment,{children:C.jsx(Ap,{})}):C.jsxs(C.Fragment,{children:[" ",C.jsx("section",{className:"display-column charcoal-bg neg-marg",children:C.jsxs("div",{className:"form-container green-bg",children:[C.jsx("p",{className:"title outfit-font",children:"Login"}),C.jsxs("form",{className:"form",onSubmit:f,children:[C.jsxs("div",{className:"input-group",children:[C.jsx("label",{htmlFor:"email",className:"outfit-thin-font",children:"Email"}),C.jsx("input",{type:"text",name:"email",placeholder:"email@email.com",id:"email",value:t,onChange:_=>r(_.target.value)})]}),C.jsxs("div",{className:"input-group",children:[C.jsx("label",{htmlFor:"password",className:"outfit-thin-font",children:"Password"}),C.jsx("input",{type:"password",name:"password",id:"password",placeholder:"password",value:i,onChange:_=>s(_.target.value)}),C.jsx("div",{className:"forgot",children:C.jsx("button",{type:"button",className:"forgot-password-btn outfit-font",onClick:g,children:"Forgot Password?"})})]}),C.jsx("button",{type:"submit",className:"sign charcoal-bg",children:"Sign in"}),a&&C.jsx("p",{className:"error-message",children:a})]}),C.jsxs("div",{className:"social-message",children:[C.jsx("div",{className:"line"}),C.jsx("p",{className:"message",children:"Login with Google"}),C.jsx("div",{className:"line"})]}),C.jsx("div",{className:"social-icons",children:C.jsx("button",{type:"button","aria-label":"Log in with Google",className:"icon",onClick:p,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:C.jsx("path",{d:"M16.318 13.714v5.484h9.078c-0.37 2.354-2.745 6.901-9.078 6.901-5.458 0-9.917-4.521-9.917-10.099s4.458-10.099 9.917-10.099c3.109 0 5.193 1.318 6.38 2.464l4.339-4.182c-2.786-2.599-6.396-4.182-10.719-4.182-8.844 0-16 7.151-16 16s7.156 16 16 16c9.234 0 15.365-6.49 15.365-15.635 0-1.052-0.115-1.854-0.255-2.651z"})})})})]})})]})})}const TG={element:C.jsx(AG,{})},S2=G.createContext();function EG({children:n}){const[e,t]=G.useState(null),[r,i]=G.useState(!0);return G.useEffect(()=>{const s=UD(hu,a=>{t(a),i(!1)});return()=>s()},[]),C.jsx(S2.Provider,{value:{currentUser:e},children:r?C.jsx(Ap,{}):n})}function bG(){return G.useContext(S2)}function Jm({children:n}){const{currentUser:e}=bG();return e?n:C.jsx(Oz,{to:"/login"})}const SG="/assets/dashboardBg-Dtd5WdDk.jpg",wG="/assets/dashboardBgPhone-Dn_QPInV.jpg";function RG(){const[n,e]=G.useState(window.innerWidth);return G.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),C.jsx("section",{className:"db-hero-main-container",children:n<=600?C.jsxs(C.Fragment,{children:[C.jsx("img",{src:wG}),C.jsx("h1",{className:"outfit-font ",children:"Welcome"}),C.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),C.jsx("h1",{className:"outfit-font green-text",children:"Dashboard"})]}):C.jsxs(C.Fragment,{children:[C.jsx("img",{src:SG})," ",C.jsx("h1",{className:"outfit-font green-text",children:"Welcome"}),C.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),C.jsx("h1",{style:{marginBottom:"10px"},className:"outfit-font green-text",children:"Dashboard"})]})})}const CG="/assets/add-xRAkvvij.png",xG="/assets/edit-MfBVzi6v.png";function kG(){const n=bl(),e=async()=>{try{await DH(hu),n("/login")}catch(t){console.error("Error signing out:",t)}};return C.jsxs("section",{style:{height:"600px",padding:"40px",gap:"50px"},className:"display-column charcoal-bg neg-marg",children:[C.jsxs("div",{className:"db-direction-container green-bg",onClick:t=>{t.preventDefault(),n("/createBlog"),window.scrollTo(0,0)},children:[C.jsx("h1",{className:"outfit-font",children:"Create a Blog Post"}),C.jsx("img",{src:CG})]}),C.jsxs("div",{className:"db-direction-container green-bg",onClick:t=>{t.preventDefault(),n("/editDirectory"),window.scrollTo(0,0)},children:[C.jsx("h1",{className:"outfit-font",children:"Edit a Blog Post"}),C.jsx("img",{src:xG})]}),C.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:"1.5rem"},onClick:()=>{e(),window.scrollTo(0,0)},children:"Logout"})]})}function IG(){return C.jsxs("section",{className:"dashboard-main",children:[C.jsx(RG,{}),C.jsx(kG,{})]})}const dy=async(n,e="blogFolder")=>{if(!n)throw new Error("No file provided");const t=w5(c7,`${e}/${Date.now()}-${n.name}`);return await b5(t,n),await S5(t)};function lr(n){this.content=n}lr.prototype={constructor:lr,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new lr(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new lr(t)},addToStart:function(n,e){return new lr([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new lr(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new lr(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=lr.from(n),n.size?new lr(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=lr.from(n),n.size?new lr(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=lr.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};lr.from=function(n){if(n instanceof lr)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new lr(e)};function w2(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=w2(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function R2(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),u=e.child(--s),c=a.nodeSize;if(a==u){t-=c,r-=c;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let f=0,p=Math.min(a.text.length,u.text.length);for(;f<p&&a.text[a.text.length-f-1]==u.text[u.text.length-f-1];)f++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let f=R2(a.content,u.content,t-1,r-1);if(f)return f}t-=c,r-=c}}class _e{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,u=0;u<t;a++){let c=this.content[a],f=u+c.nodeSize;if(f>e&&r(c,i+u,s||null,a)!==!1&&c.content.size){let p=u+1;c.nodesBetween(Math.max(0,e-p),Math.min(c.content.size,t-p),r,i+p)}u=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(u,c)=>{let f=u.isText?u.text.slice(Math.max(e,c)-c,t-c):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&f||u.isTextblock)&&r&&(a?a=!1:s+=r),s+=f},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new _e(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let u=this.content[s],c=a+u.nodeSize;c>e&&((a<e||c>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=c}return new _e(r,i)}cutByIndex(e,t){return e==t?_e.empty:e==0&&t==this.content.length?this:new _e(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new _e(i,s)}addToStart(e){return new _e([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _e(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return w2(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return R2(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Zm(0,e);if(e==this.size)return Zm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),a=i+s.nodeSize;if(a>=e)return a==e||t>0?Zm(r+1,a):Zm(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return _e.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new _e(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _e.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new _e(t||e,r)}static from(e){if(!e)return _e.empty;if(e instanceof _e)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _e([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_e.empty=new _e([],0);const IA={index:0,offset:0};function Zm(n,e){return IA.index=n,IA.offset=e,IA}function py(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!py(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!py(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let qt=class rE{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&py(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return rE.none;if(e instanceof rE)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};qt.none=[];class my extends Error{}class Ie{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=x2(this.content,e+this.openStart,t);return r&&new Ie(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Ie(C2(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Ie.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ie(_e.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Ie(e,r,i)}}Ie.empty=new Ie(_e.empty,0,0);function C2(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||s.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(C2(s.content,e-i-1,t-i-1)))}function x2(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=x2(a.content,e-s-1,t);return u&&n.replaceChild(i,a.copy(u))}function NG(n,e,t){if(t.openStart>n.depth)throw new my("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new my("Inconsistent open depths");return k2(n,e,t,0)}function k2(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=k2(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return ku(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=OG(t,n);return ku(s,N2(n,a,u,e,r))}else return ku(s,gy(n,e,r))}function I2(n,e){if(!e.type.compatibleContent(n.type))throw new my("Cannot join "+e.type.name+" onto "+n.type.name)}function iE(n,e,t){let r=n.node(t);return I2(r,e.node(t)),r}function xu(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Sd(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(xu(n.nodeAfter,r),s++));for(let u=s;u<a;u++)xu(i.child(u),r);e&&e.depth==t&&e.textOffset&&xu(e.nodeBefore,r)}function ku(n,e){return n.type.checkContent(e),n.copy(e)}function N2(n,e,t,r,i){let s=n.depth>i&&iE(n,e,i+1),a=r.depth>i&&iE(t,r,i+1),u=[];return Sd(null,n,i,u),s&&a&&e.index(i)==t.index(i)?(I2(s,a),xu(ku(s,N2(n,e,t,r,i+1)),u)):(s&&xu(ku(s,gy(n,e,i+1)),u),Sd(e,t,i,u),a&&xu(ku(a,gy(t,r,i+1)),u)),Sd(r,null,i,u),new _e(u)}function gy(n,e,t){let r=[];if(Sd(null,n,t,r),n.depth>t){let i=iE(n,e,t+1);xu(ku(i,gy(n,e,t+1)),r)}return Sd(e,null,t,r),new _e(r)}function OG(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(_e.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Xd{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return qt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new yy(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:u,offset:c}=a.content.findIndex(s),f=s-c;if(r.push(a,u,i+c),!f||(a=a.child(u),a.isText))break;s=f-1,i+=c+1}return new Xd(t,r,s)}static resolveCached(e,t){let r=tI.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else tI.set(e,r=new MG);let i=r.elts[r.i]=Xd.resolve(e,t);return r.i=(r.i+1)%DG,i}}class MG{constructor(){this.elts=[],this.i=0}}const DG=12,tI=new WeakMap;class yy{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const PG=Object.create(null);let ol=class sE{constructor(e,t,r,i=qt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||_e.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&py(this.attrs,t||e.defaultAttrs||PG)&&qt.sameSet(this.marks,r||qt.none)}copy(e=null){return e==this.content?this:new sE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new sE(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Ie.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),f=i.node(a).content.cut(i.pos-u,s.pos-u);return new Ie(f,i.depth-a,s.depth-a)}replace(e,t,r){return NG(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Xd.resolveCached(this,e)}resolveNoCache(e){return Xd.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),O2(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=_e.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=qt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!qt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=_e.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ol.prototype.text=void 0;class _y extends ol{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):O2(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new _y(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new _y(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function O2(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ju{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new LG(e,t);if(r.next==null)return ju.empty;let i=M2(r);r.next&&r.err("Unexpected trailing text");let s=HG(FG(i));return qG(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,u){let c=a.matchFragment(e,r);if(c&&(!t||c.validEnd))return _e.from(u.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:g}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let _=s(g,u.concat(p));if(_)return _}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:u,next:c}=s.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}ju.empty=new ju(!0);class LG{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function M2(n){let e=[];do e.push(VG(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function VG(n){let e=[];do e.push(UG(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function UG(n){let e=jG(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=zG(n,e);else break;return e}function nI(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function zG(n,e){let t=nI(n),r=t;return n.eat(",")&&(n.next!="}"?r=nI(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function BG(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function jG(n){if(n.eat("(")){let e=M2(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=BG(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function FG(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,c){let f={term:c,to:u};return e[a].push(f),f}function i(a,u){a.forEach(c=>c.to=u)}function s(a,u){if(a.type=="choice")return a.exprs.reduce((c,f)=>c.concat(s(f,u)),[]);if(a.type=="seq")for(let c=0;;c++){let f=s(a.exprs[c],u);if(c==a.exprs.length-1)return f;i(f,u=t())}else if(a.type=="star"){let c=t();return r(u,c),i(s(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=t();return i(s(a.expr,u),c),i(s(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(u)].concat(s(a.expr,u));if(a.type=="range"){let c=u;for(let f=0;f<a.min;f++){let p=t();i(s(a.expr,c),p),c=p}if(a.max==-1)i(s(a.expr,c),c);else for(let f=a.min;f<a.max;f++){let p=t();r(c,p),i(s(a.expr,c),p),c=p}return[r(c)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function D2(n,e){return e-n}function rI(n,e){let t=[];return r(e),t.sort(D2);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:u,to:c}=s[a];!u&&t.indexOf(c)==-1&&r(c)}}}function HG(n){let e=Object.create(null);return t(rI(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:c})=>{if(!u)return;let f;for(let p=0;p<i.length;p++)i[p][0]==u&&(f=i[p][1]);rI(n,c).forEach(p=>{f||i.push([u,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let s=e[r.join(",")]=new ju(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(D2);s.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return s}}function qG(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:c,next:f}=i.next[u];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function P2(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function L2(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function V2(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function U2(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new GG(n,r,e[r]);return t}let iI=class z2{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=U2(e,r.attrs),this.defaultAttrs=P2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ju.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:L2(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ol(this,this.computeAttrs(e),_e.from(t),qt.setFrom(r))}createChecked(e=null,t,r){return t=_e.from(t),this.checkContent(t),new ol(this,this.computeAttrs(e),t,qt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=_e.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(_e.empty,!0);return s?new ol(this,e,t.append(s),qt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){V2(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:qt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new z2(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function $G(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class GG{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?$G(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class M_{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=U2(e,i.attrs),this.excluded=null;let s=P2(this.attrs);this.instance=s?new qt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new qt(this,L2(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new M_(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){V2(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class B2{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=lr.from(e.nodes),t.marks=lr.from(e.marks||{}),this.nodes=iI.compile(this.spec.nodes,this),this.marks=M_.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=ju.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?sI(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:sI(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof iI){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new _y(r,r.defaultAttrs,e,qt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ol.fromJSON(this,e)}markFromJSON(e){return qt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function sI(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let u in n.marks){let c=n.marks[u];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function KG(n){return n.tag!=null}function WG(n){return n.style!=null}class al{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(KG(i))this.tags.push(i);else if(WG(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new aI(this,t,!1);return r.addAll(e,qt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new aI(this,t,!0);return r.addAll(e,qt.none,t.from,t.to),Ie.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(XG(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=lI(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=lI(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new al(e,al.schemaRules(e)))}}const j2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},YG={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},F2={ol:!0,ul:!0},Jd=1,oE=2,xg=4;function oI(n,e,t){return e!=null?(e?Jd:0)|(e==="full"?oE:0):n&&n.whitespace=="pre"?Jd|oE:t&-5}class eg{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=qt.none,this.match=s||(a&xg?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(_e.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Jd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=_e.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(_e.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!j2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class aI{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=oI(null,t.preserveWhitespace,0)|(r?xg:0);i?s=new eg(i.type,i.attrs,qt.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new eg(null,null,qt.none,!0,null,a):s=new eg(e.schema.topNodeType,null,qt.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&oE?"full":this.localPreserveWS||(i.options&Jd)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],u=e.previousSibling;(!a||u&&u.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;F2.hasOwnProperty(a)&&this.parser.normalizeLists&&QG(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(c?c.ignore:YG.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let f,p=this.needsBlock;if(j2.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=c&&c.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),f&&this.sync(s),this.needsBlock=p}else{let f=this.readStyles(e,t);f&&this.addElementByRule(e,c,f,c.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let u=void 0;;){let c=this.parser.matchStyle(s,a,this,u);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(f=>!c.clearMark(f)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)u=c;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(a,t.attrs||null,r,t.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(u)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];a!=u;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,u=0;a>=0;a--){let c=this.nodes[a],f=c.findWrapping(e);if(f&&(!i||i.length>f.length+u)&&(i=f,s=c,!f.length))break;if(c.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=qt.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):uI(u.type,e.type))&&(a=u.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=oI(e,s,a.options);a.options&xg&&a.content.length==0&&(u|=xg);let c=qt.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):uI(f.type,e))?(c=f.addToSet(c),!1):!0),this.nodes.push(new eg(e,t,c,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Jd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(u,c)=>{for(;u>=0;u--){let f=t[u];if(f==""){if(u==t.length-1||u==0)continue;for(;c>=s;c--)if(a(u-1,c))return!0;return!1}else{let p=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function QG(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&F2.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function XG(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function lI(n){let e={};for(let t in n)e[t]=n[t];return e}function uI(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=u=>{s.push(u);for(let c=0;c<u.edgeCount;c++){let{type:f,next:p}=u.edge(c);if(f==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class Ju{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=NA(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let u=0,c=0;for(;u<s.length&&c<a.marks.length;){let f=a.marks[c];if(!this.marks[f.type.name]){c++;continue}if(!f.eq(s[u][0])||f.type.spec.spanning===!1)break;u++,c++}for(;u<s.length;)i=s.pop()[1];for(;c<a.marks.length;){let f=a.marks[c++],p=this.serializeMark(f,a.isInline,t);p&&(s.push([f,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=kg(NA(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&kg(NA(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return kg(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ju(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=cI(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return cI(e.marks)}}function cI(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function NA(n){return n.document||window.document}const hI=new WeakMap;function JG(n){let e=hI.get(n);return e===void 0&&hI.set(n,e=ZG(n)),e}function ZG(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function kg(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=JG(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let u,c=t?n.createElementNS(t,i):n.createElement(i),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let g in f)if(f[g]!=null){let _=g.indexOf(" ");_>0?c.setAttributeNS(g.slice(0,_),g.slice(_+1),f[g]):c.setAttribute(g,f[g])}}for(let g=p;g<e.length;g++){let _=e[g];if(_===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:A,contentDOM:T}=kg(n,_,t,r);if(c.appendChild(A),T){if(u)throw new RangeError("Multiple content holes");u=T}}}return{dom:c,contentDOM:u}}const H2=65535,q2=Math.pow(2,16);function eK(n,e){return n+e*q2}function fI(n){return n&H2}function tK(n){return(n-(n&H2))/q2}const $2=1,G2=2,Ig=4,K2=8;class aE{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&K2)>0}get deletedBefore(){return(this.delInfo&($2|Ig))>0}get deletedAfter(){return(this.delInfo&(G2|Ig))>0}get deletedAcross(){return(this.delInfo&Ig)>0}}class ki{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ki.empty)return ki.empty}recover(e){let t=0,r=fI(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+tK(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?i:0);if(c>e)break;let f=this.ranges[u+s],p=this.ranges[u+a],g=c+f;if(e<=g){let _=f?e==c?-1:e==g?1:t:t,A=c+i+(_<0?0:p);if(r)return A;let T=e==(t<0?c:g)?null:eK(u/3,e-c),E=e==c?G2:e==g?$2:Ig;return(t<0?e!=c:e!=g)&&(E|=K2),new aE(A,E,T)}i+=p-f}return r?e+i:new aE(e+i,0,null)}touches(e,t){let r=0,i=fI(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let f=this.ranges[u+s],p=c+f;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-f}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?s:0),c=a+(this.inverted?0:s),f=this.ranges[i+t],p=this.ranges[i+r];e(u,u+f,c,c+p),s+=p-f}}invert(){return new ki(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ki.empty:new ki(e<0?[0,-e,0]:[0,0,e])}}ki.empty=new ki([]);class Zd{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Zd(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Zd;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],u=a.mapResult(e,t);if(u.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new aE(e,i,null)}}const OA=Object.create(null);class Or{getMap(){return ki.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=OA[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in OA)throw new RangeError("Duplicate use of step JSON ID "+e);return OA[e]=t,t.prototype.jsonID=e,t}}class In{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new In(e,null)}static fail(e){return new In(null,e)}static fromReplace(e,t,r,i){try{return In.ok(e.replace(t,r,i))}catch(s){if(s instanceof my)return In.fail(s.message);throw s}}}function fS(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(fS(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return _e.fromArray(r)}class Ya extends Or{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ie(fS(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return In.fromReplace(e,this.from,this.to,s)}invert(){return new no(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ya(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ya&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ya(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ya(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("addMark",Ya);class no extends Or{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Ie(fS(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return In.fromReplace(e,this.from,this.to,r)}invert(){return new Ya(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new no(t.pos,r.pos,this.mark)}merge(e){return e instanceof no&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new no(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new no(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("removeMark",no);class Qa extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return In.fromReplace(e,this.pos,this.pos+1,new Ie(_e.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Qa(this.pos,t.marks[i]);return new Qa(this.pos,this.mark)}}return new Fu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qa(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Qa(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("addNodeMark",Qa);class Fu extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return In.fromReplace(e,this.pos,this.pos+1,new Ie(_e.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Qa(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Fu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fu(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("removeNodeMark",Fu);class Gn extends Or{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&lE(e,this.from,this.to)?In.fail("Structure replace would overwrite content"):In.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ki([this.from,this.to-this.from,this.slice.size])}invert(e){return new Gn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Gn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Gn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Ie.empty:new Ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Gn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Ie.empty:new Ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Gn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Gn(t.from,t.to,Ie.fromJSON(e,t.slice),!!t.structure)}}Or.jsonID("replace",Gn);class Kn extends Or{constructor(e,t,r,i,s,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=u}apply(e){if(this.structure&&(lE(e,this.from,this.gapFrom)||lE(e,this.gapTo,this.to)))return In.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return In.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?In.fromReplace(e,this.from,this.to,r):In.fail("Content does not fit in gap")}getMap(){return new ki([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Kn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Kn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kn(t.from,t.to,t.gapFrom,t.gapTo,Ie.fromJSON(e,t.slice),t.insert,!!t.structure)}}Or.jsonID("replaceAround",Kn);function lE(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function nK(n,e,t,r){let i=[],s=[],a,u;n.doc.nodesBetween(e,t,(c,f,p)=>{if(!c.isInline)return;let g=c.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let _=Math.max(f,e),A=Math.min(f+c.nodeSize,t),T=r.addToSet(g);for(let E=0;E<g.length;E++)g[E].isInSet(T)||(a&&a.to==_&&a.mark.eq(g[E])?a.to=A:i.push(a=new no(_,A,g[E])));u&&u.to==_?u.to=A:s.push(u=new Ya(_,A,r))}}),i.forEach(c=>n.step(c)),s.forEach(c=>n.step(c))}function rK(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;s++;let c=null;if(r instanceof M_){let f=a.marks,p;for(;p=r.isInSet(f);)(c||(c=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let f=Math.min(u+a.nodeSize,t);for(let p=0;p<c.length;p++){let g=c[p],_;for(let A=0;A<i.length;A++){let T=i[A];T.step==s-1&&g.eq(i[A].style)&&(_=T)}_?(_.to=f,_.step=s):i.push({style:g,from:Math.max(u,e),to:f,step:s})}}}),i.forEach(a=>n.step(new no(a.from,a.to,a.style)))}function dS(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],u=e+1;for(let c=0;c<s.childCount;c++){let f=s.child(c),p=u+f.nodeSize,g=r.matchType(f.type);if(!g)a.push(new Gn(u,p,Ie.empty));else{r=g;for(let _=0;_<f.marks.length;_++)t.allowsMarkType(f.marks[_].type)||n.step(new no(u,p,f.marks[_]));if(i&&f.isText&&t.whitespace!="pre"){let _,A=/\r?\n|\r/g,T;for(;_=A.exec(f.text);)T||(T=new Ie(_e.from(t.schema.text(" ",t.allowedMarks(f.marks))),0,0)),a.push(new Gn(u+_.index,u+_.index+_[0].length,T))}}u=p}if(!r.validEnd){let c=r.fillBefore(_e.empty,!0);n.replace(u,u,new Ie(c,0,0))}for(let c=a.length-1;c>=0;c--)n.step(a[c])}function iK(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Bh(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,a,t))return r;if(r==0||i.type.spec.isolating||!iK(i,s,a))break}return null}function sK(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),u=i.after(s+1),c=a,f=u,p=_e.empty,g=0;for(let T=s,E=!1;T>t;T--)E||r.index(T)>0?(E=!0,p=_e.from(r.node(T).copy(p)),g++):c--;let _=_e.empty,A=0;for(let T=s,E=!1;T>t;T--)E||i.after(T+1)<i.end(T)?(E=!0,_=_e.from(i.node(T).copy(_)),A++):f++;n.step(new Kn(c,f,a,u,new Ie(p.append(_),g,A),p.size-g,!0))}function pS(n,e,t=null,r=n){let i=oK(n,e),s=i&&aK(r,e);return s?i.map(dI).concat({type:e,attrs:t}).concat(s.map(dI)):null}function dI(n){return{type:n,attrs:null}}function oK(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function aK(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;c&&f<i;f++)c=c.matchType(t.child(f).type);return!c||!c.validEnd?null:a}function lK(n,e,t){let r=_e.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_e.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new Kn(i,s,i,s,new Ie(r,0,0),t.length,!0))}function uK(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let c=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,c)&&cK(n.doc,n.mapping.slice(s).map(u),r)){let f=null;if(r.schema.linebreakReplacement){let A=r.whitespace=="pre",T=!!r.contentMatch.matchType(r.schema.linebreakReplacement);A&&!T?f=!1:!A&&T&&(f=!0)}f===!1&&Y2(n,a,u,s),dS(n,n.mapping.slice(s).map(u,1),r,void 0,f===null);let p=n.mapping.slice(s),g=p.map(u,1),_=p.map(u+a.nodeSize,1);return n.step(new Kn(g,_,g+1,_-1,new Ie(_e.from(r.create(c,null,a.marks)),0,0),1,!0)),f===!0&&W2(n,a,u,s),!1}})}function W2(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(i.text);){let c=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function Y2(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function cK(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function hK(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Kn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Ie(_e.from(a),0,0),1,!0))}function Qo(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,p=t-2;f>s;f--,p--){let g=i.node(f),_=i.index(f);if(g.type.spec.isolating)return!1;let A=g.content.cutByIndex(_,g.childCount),T=r&&r[p+1];T&&(A=A.replaceChild(0,T.type.create(T.attrs)));let E=r&&r[p]||g;if(!g.canReplace(_+1,g.childCount)||!E.type.validContent(A))return!1}let u=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(u,u,c?c.type:i.node(s+1).type)}function fK(n,e,t=1,r){let i=n.doc.resolve(e),s=_e.empty,a=_e.empty;for(let u=i.depth,c=i.depth-t,f=t-1;u>c;u--,f--){s=_e.from(i.node(u).copy(s));let p=r&&r[f];a=_e.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new Gn(e,e,new Ie(s.append(a),t,t),!0))}function kl(n,e){let t=n.resolve(e),r=t.index();return Q2(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function dK(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function Q2(n,e){return!!(n&&e&&!n.isLeaf&&dK(n,e))}function D_(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,a,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),a=r.node(i+1)),s&&!s.isTextblock&&Q2(s,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function pK(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);Y2(n,p.node(),p.before(),u)}a.inlineContent&&dS(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let c=n.mapping.slice(u),f=c.map(e-t);if(n.step(new Gn(f,c.map(e+t,-1),Ie.empty,!0)),r===!0){let p=n.doc.resolve(f);W2(n,p.node(),p.before(),n.steps.length)}return n}function mK(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function X2(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),f=r.node(a),p=!1;if(s==1)p=f.canReplace(c,c,i);else{let g=f.contentMatchAt(c).findWrapping(i.firstChild.type);p=g&&f.canReplaceWith(c,c,g[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function P_(n,e,t=e,r=Ie.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return J2(i,s,r)?new Gn(e,t,r):new gK(i,s,r).fit()}function J2(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class gK{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=_e.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=_e.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,u=i.depth;for(;a&&u&&s.childCount==1;)s=s.firstChild.content,a--,u--;let c=new Ie(s,a,u);return e>-1?new Kn(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new Gn(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=MA(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:c,match:f}=this.frontier[u],p,g=null;if(t==1&&(a?f.matchType(a.type)||(g=f.fillBefore(_e.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:g};if(t==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=MA(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ie(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=MA(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new Ie(cd(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new Ie(cd(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let E=0;E<s.length;E++)this.openFrontierNode(s[E]);let a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,f=0,p=[],{match:g,type:_}=this.frontier[t];if(i){for(let E=0;E<i.childCount;E++)p.push(i.child(E));g=g.matchFragment(i)}let A=u.size+e-(a.content.size-a.openEnd);for(;f<u.childCount;){let E=u.child(f),S=g.matchType(E.type);if(!S)break;f++,(f>1||c==0||E.content.size)&&(g=S,p.push(Z2(E.mark(_.allowedMarks(E.marks)),f==1?c:0,f==u.childCount?A:-1)))}let T=f==u.childCount;T||(A=-1),this.placed=hd(this.placed,t,_e.from(p)),this.frontier[t].match=g,T&&A<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,S=u;E<A;E++){let k=S.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),S=k.content}this.unplaced=T?e==0?Ie.empty:new Ie(cd(a.content,e-1,1),e-1,A<0?a.openEnd:e-1):new Ie(cd(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!DA(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=DA(e,t,i,r,s);if(a){for(let u=t-1;u>=0;u--){let{match:c,type:f}=this.frontier[u],p=DA(e,u,f,c,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=hd(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=hd(this.placed,this.depth,_e.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(_e.empty,!0);t.childCount&&(this.placed=hd(this.placed,this.frontier.length,t))}}function cd(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(cd(n.firstChild.content,e-1,t)))}function hd(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(hd(n.lastChild.content,e-1,t)))}function MA(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Z2(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Z2(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(_e.empty,!0)))),n.copy(r)}function DA(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,a);return u&&!yK(t,s.content,a)?u:null}function yK(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function _K(n){return n.spec.defining||n.spec.definingForContent}function vK(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(J2(i,s,r))return n.step(new Gn(e,t,r));let a=tL(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let _=i.depth,A=i.pos-1;_>0;_--,A--){let T=i.node(_).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;a.indexOf(_)>-1?u=_:i.before(_)==A&&a.splice(1,0,-_)}let c=a.indexOf(u),f=[],p=r.openStart;for(let _=r.content,A=0;;A++){let T=_.firstChild;if(f.push(T),A==r.openStart)break;_=T.content}for(let _=p-1;_>=0;_--){let A=f[_],T=_K(A.type);if(T&&!A.sameMarkup(i.node(Math.abs(u)-1)))p=_;else if(T||!A.type.isTextblock)break}for(let _=r.openStart;_>=0;_--){let A=(_+p+1)%(r.openStart+1),T=f[A];if(T)for(let E=0;E<a.length;E++){let S=a[(E+c)%a.length],k=!0;S<0&&(k=!1,S=-S);let L=i.node(S-1),B=i.index(S-1);if(L.canReplaceWith(B,B,T.type,T.marks))return n.replace(i.before(S),k?s.after(S):t,new Ie(eL(r.content,0,r.openStart,A),A,r.openEnd))}}let g=n.steps.length;for(let _=a.length-1;_>=0&&(n.replace(e,t,r),!(n.steps.length>g));_--){let A=a[_];A<0||(e=i.before(A),t=s.after(A))}}function eL(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(eL(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(_e.empty,!0))}return n}function AK(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=mK(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Ie(_e.from(r),0,0))}function TK(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=tL(r,i);for(let a=0;a<s.length;a++){let u=s[a],c=a==s.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function tL(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class oh extends Or{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return In.fromReplace(e,this.pos,this.pos+1,new Ie(_e.from(i),0,t.isLeaf?0:1))}getMap(){return ki.empty}invert(e){return new oh(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new oh(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new oh(t.pos,t.attr,t.value)}}Or.jsonID("attr",oh);class ep extends Or{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return In.ok(r)}getMap(){return ki.empty}invert(e){return new ep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ep(t.attr,t.value)}}Or.jsonID("docAttr",ep);let wh=class extends Error{};wh=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};wh.prototype=Object.create(Error.prototype);wh.prototype.constructor=wh;wh.prototype.name="TransformError";class nL{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Zd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new wh(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Ie.empty){let i=P_(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Ie(_e.from(r),0,0))}delete(e,t){return this.replace(e,t,Ie.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return vK(this,e,t,r),this}replaceRangeWith(e,t,r){return AK(this,e,t,r),this}deleteRange(e,t){return TK(this,e,t),this}lift(e,t){return sK(this,e,t),this}join(e,t=1){return pK(this,e,t),this}wrap(e,t){return lK(this,e,t),this}setBlockType(e,t=e,r,i=null){return uK(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return hK(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new oh(e,t,r)),this}setDocAttribute(e,t){return this.step(new ep(e,t)),this}addNodeMark(e,t){return this.step(new Qa(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof qt)t.isInSet(r.marks)&&this.step(new Fu(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new Fu(e,s)),i=s.removeFromSet(i);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return fK(this,e,t,r),this}addMark(e,t,r){return nK(this,e,t,r),this}removeMark(e,t,r){return rK(this,e,t,r),this}clearIncompatible(e,t,r){return dS(this,e,t,r),this}}const PA=Object.create(null);class rt{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new EK(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Ie.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:c,$to:f}=a[u],p=e.mapping.slice(s);e.replaceRange(p.map(c.pos),p.map(f.pos),u?Ie.empty:t),u==0&&gI(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s],c=e.mapping.slice(r),f=c.map(a.pos),p=c.map(u.pos);s?e.deleteRange(f,p):(e.replaceRangeWith(f,p,t),gI(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Je(e):$c(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?$c(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):$c(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Li(e.node(0))}static atStart(e){return $c(e,e,0,0,1)||new Li(e)}static atEnd(e){return $c(e,e,e.content.size,e.childCount,-1)||new Li(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=PA[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in PA)throw new RangeError("Duplicate use of selection JSON ID "+e);return PA[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Je.between(this.$anchor,this.$head).getBookmark()}}rt.prototype.visible=!0;class EK{constructor(e,t){this.$from=e,this.$to=t}}let pI=!1;function mI(n){!pI&&!n.parent.inlineContent&&(pI=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Je extends rt{constructor(e,t=e){mI(e),mI(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return rt.near(r);let i=e.resolve(t.map(this.anchor));return new Je(i.parent.inlineContent?i:r,r)}replace(e,t=Ie.empty){if(super.replace(e,t),t==Ie.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new L_(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Je(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=rt.findFrom(t,r,!0)||rt.findFrom(t,-r,!0);if(s)t=s.$head;else return rt.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(rt.findFrom(e,-r,!0)||rt.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Je(e,t)}}rt.jsonID("text",Je);class L_{constructor(e,t){this.anchor=e,this.head=t}map(e){return new L_(e.map(this.anchor),e.map(this.head))}resolve(e){return Je.between(e.resolve(this.anchor),e.resolve(this.head))}}class qe extends rt{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?rt.near(s):new qe(s)}content(){return new Ie(_e.from(this.node),0,0)}eq(e){return e instanceof qe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new mS(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new qe(e.resolve(t.anchor))}static create(e,t){return new qe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}qe.prototype.visible=!1;rt.jsonID("node",qe);class mS{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new L_(r,r):new mS(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&qe.isSelectable(r)?new qe(t):rt.near(t)}}class Li extends rt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Ie.empty){if(t==Ie.empty){e.delete(0,e.doc.content.size);let r=rt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Li(e)}map(e){return new Li(e)}eq(e){return e instanceof Li}getBookmark(){return bK}}rt.jsonID("all",Li);const bK={map(){return this},resolve(n){return new Li(n)}};function $c(n,e,t,r,i,s=!1){if(e.inlineContent)return Je.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!s&&qe.isSelectable(u))return qe.create(n,t-(i<0?u.nodeSize:0))}else{let c=$c(n,u,t+i,i<0?u.childCount:0,i,s);if(c)return c}t+=u.nodeSize*i}return null}function gI(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Gn||i instanceof Kn))return;let s=n.mapping.maps[r],a;s.forEach((u,c,f,p)=>{a==null&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const yI=1,_I=2,vI=4;class SK extends nL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|yI)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&yI)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=_I,this}ensureMarks(e){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&_I)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||qt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(rt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=vI,this}get scrolledIntoView(){return(this.updated&vI)>0}}function AI(n,e){return!e||!n?n:n.bind(e)}class fd{constructor(e,t,r){this.name=e,this.init=AI(t.init,r),this.apply=AI(t.apply,r)}}const wK=[new fd("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new fd("selection",{init(n,e){return n.selection||rt.atStart(e.doc)},apply(n){return n.selection}}),new fd("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new fd("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class LA{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=wK.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new fd(r.key,r.spec.state,r))})}}class Qc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let c=i?i[a].n:0,f=i?i[a].state:this,p=c<t.length&&u.spec.appendTransaction.call(u,c?t.slice(c):t,f,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new SK(this)}static create(e){let t=new LA(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Qc(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new LA(this.schema,e.plugins),r=t.fields,i=new Qc(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new LA(e.schema,e.plugins),s=new Qc(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=ol.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=rt.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],f=c.spec.state;if(c.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){s[a.name]=f.fromJSON.call(c,e,t[u],s);return}}s[a.name]=a.init(e,s)}}),s}}function rL(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=rL(i,e,{})),t[r]=i}return t}class Jn{constructor(e){this.spec=e,this.props={},e.props&&rL(e.props,this,this.props),this.key=e.key?e.key.key:iL("plugin")}getState(e){return e[this.key]}}const VA=Object.create(null);function iL(n){return n in VA?n+"$"+ ++VA[n]:(VA[n]=0,n+"$")}class fi{constructor(e="key"){this.key=iL(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const cr=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Rh=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let uE=null;const Ho=function(n,e,t){let r=uE||(uE=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},RK=function(){uE=null},Hu=function(n,e,t,r){return t&&(TI(n,e,t,r,-1)||TI(n,e,t,r,1))},CK=/^(img|br|input|textarea|hr)$/i;function TI(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ss(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Tp(n)||CK.test(n.nodeName)||n.contentEditable=="false")return!1;e=cr(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?ss(n):0}else return!1}}function ss(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function xK(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=ss(n)}else if(n.parentNode&&!Tp(n))e=cr(n),n=n.parentNode;else return null}}function kK(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Tp(n))e=cr(n)+1,n=n.parentNode;else return null}}function IK(n,e,t){for(let r=e==0,i=e==ss(n);r||i;){if(n==t)return!0;let s=cr(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==ss(n)}}function Tp(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const V_=function(n){return n.focusNode&&Hu(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function fu(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function NK(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function OK(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(ss(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(ss(r.startContainer),r.startOffset)}}}const po=typeof navigator<"u"?navigator:null,EI=typeof document<"u"?document:null,Il=po&&po.userAgent||"",cE=/Edge\/(\d+)/.exec(Il),sL=/MSIE \d/.exec(Il),hE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Il),ui=!!(sL||hE||cE),ll=sL?document.documentMode:hE?+hE[1]:cE?+cE[1]:0,Cs=!ui&&/gecko\/(\d+)/i.test(Il);Cs&&+(/Firefox\/(\d+)/.exec(Il)||[0,0])[1];const fE=!ui&&/Chrome\/(\d+)/.exec(Il),xr=!!fE,oL=fE?+fE[1]:0,qr=!ui&&!!po&&/Apple Computer/.test(po.vendor),Ch=qr&&(/Mobile\/\w+/.test(Il)||!!po&&po.maxTouchPoints>2),is=Ch||(po?/Mac/.test(po.platform):!1),MK=po?/Win/.test(po.platform):!1,Wo=/Android \d/.test(Il),Ep=!!EI&&"webkitFontSmoothing"in EI.documentElement.style,DK=Ep?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function PK(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Uo(n,e){return typeof n=="number"?n:n[e]}function LK(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function bI(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=Rh(a);continue}let u=a,c=u==s.body,f=c?PK(s):LK(u),p=0,g=0;if(e.top<f.top+Uo(r,"top")?g=-(f.top-e.top+Uo(i,"top")):e.bottom>f.bottom-Uo(r,"bottom")&&(g=e.bottom-e.top>f.bottom-f.top?e.top+Uo(i,"top")-f.top:e.bottom-f.bottom+Uo(i,"bottom")),e.left<f.left+Uo(r,"left")?p=-(f.left-e.left+Uo(i,"left")):e.right>f.right-Uo(r,"right")&&(p=e.right-f.right+Uo(i,"right")),p||g)if(c)s.defaultView.scrollBy(p,g);else{let A=u.scrollLeft,T=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let E=u.scrollLeft-A,S=u.scrollTop-T;e={left:e.left-E,top:e.top-S,right:e.right-E,bottom:e.bottom-S}}let _=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(_))break;a=_=="absolute"?a.offsetParent:Rh(a)}}function VK(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(s,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=t-20){r=u,i=c.top;break}}return{refDOM:r,refTop:i,stack:aL(n.dom)}}function aL(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Rh(r));return e}function UK({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;lL(t,r==0?0:r-e)}function lL(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Uc=null;function zK(n){if(n.setActive)return n.setActive();if(Uc)return n.focus(Uc);let e=aL(n);n.focus(Uc==null?{get preventScroll(){return Uc={preventScroll:!0},!0}}:void 0),Uc||(Uc=!1,lL(e,0))}function uL(n,e){let t,r=2e8,i,s=0,a=e.top,u=e.top,c,f;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let _;if(p.nodeType==1)_=p.getClientRects();else if(p.nodeType==3)_=Ho(p).getClientRects();else continue;for(let A=0;A<_.length;A++){let T=_[A];if(T.top<=a&&T.bottom>=u){a=Math.max(T.bottom,a),u=Math.min(T.top,u);let E=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(E<r){t=p,r=E,i=E&&t.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,p.nodeType==1&&E&&(s=g+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!c&&T.left<=e.left&&T.right>=e.left&&(c=p,f={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!t&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(s=g+1)}}return!t&&c&&(t=c,i=f,r=0),t&&t.nodeType==3?BK(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:uL(t,i)}function BK(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Da(r,1);if(s.top!=s.bottom&&gS(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function gS(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function jK(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function FK(n,e,t){let{node:r,offset:i}=uL(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function HK(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let u=n.docView.nearestDesc(s,!0),c;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((c=u.dom.getBoundingClientRect()).width||c.height)&&(u.node.isBlock&&u.parent&&(!a&&c.left>r.left||c.top>r.top?i=u.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(i=u.posAfter),a=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function cL(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let u=a.getClientRects();for(let c=0;c<u.length;c++){let f=u[c];if(gS(e,f))return cL(a,e,f)}}if((s=(s+1)%r)==i)break}return n}function qK(n,e){let t=n.dom.ownerDocument,r,i=0,s=OK(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=n.dom.getBoundingClientRect();if(!gS(e,f)||(a=cL(n.dom,e,f),!a))return null}if(qr)for(let f=a;r&&f;f=Rh(f))f.draggable&&(r=void 0);if(a=jK(a,e),r){if(Cs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let f;Ep&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=HK(n,r,i,e))}u==null&&(u=FK(n,a,e));let c=n.docView.nearestDesc(a,!0);return{pos:u,inside:c?c.posAtStart-c.border:-1}}function SI(n){return n.top<n.bottom||n.left<n.right}function Da(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(SI(r))return r}return Array.prototype.find.call(t,SI)||n.getBoundingClientRect()}const $K=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function hL(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Ep||Cs;if(r.nodeType==3)if(a&&($K.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let c=Da(Ho(r,i,i),t);if(Cs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Da(Ho(r,i-1,i-1),-1);if(f.top==c.top){let p=Da(Ho(r,i,i+1),-1);if(p.top!=c.top)return Jf(p,p.left<f.left)}}return c}else{let c=i,f=i,p=t<0?1:-1;return t<0&&!i?(f++,p=-1):t>=0&&i==r.nodeValue.length?(c--,p=1):t<0?c--:f++,Jf(Da(Ho(r,c,f),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return UA(c.getBoundingClientRect(),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];if(c.nodeType==1)return UA(c.getBoundingClientRect(),!0)}return UA(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1],f=c.nodeType==3?Ho(c,ss(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(f)return Jf(Da(f,1),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let f=c?c.nodeType==3?Ho(c,0,a?0:1):c.nodeType==1?c:null:null;if(f)return Jf(Da(f,-1),!0)}return Jf(Da(r.nodeType==3?Ho(r):r,-t),t>=0)}function Jf(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function UA(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function fL(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function GK(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return fL(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let a=hL(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=Ho(u,0,u.nodeValue.length).getClientRects();else continue;for(let f=0;f<c.length;f++){let p=c[f];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const KK=/[\u0590-\u08ac]/;function WK(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,u=n.domSelection();return u?!KK.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?s:a:fL(n,e,()=>{let{focusNode:c,focusOffset:f,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),_=u.caretBidiLevel;u.modify("move",t,"character");let A=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:T,focusOffset:E}=n.domSelectionRange(),S=T&&!A.contains(T.nodeType==1?T:T.parentNode)||c==T&&f==E;try{u.collapse(p,g),c&&(c!=p||f!=g)&&u.extend&&u.extend(c,f)}catch{}return _!=null&&(u.caretBidiLevel=_),S}):r.pos==r.start()||r.pos==r.end()}let wI=null,RI=null,CI=!1;function YK(n,e,t){return wI==e&&RI==t?CI:(wI=e,RI=t,CI=t=="up"||t=="down"?GK(n,e,t):WK(n,e,t))}const us=0,xI=1,vu=2,mo=3;class bp{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=us,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>cr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let u=i.children[a];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],u=s+a.size;if(u>e||a instanceof pL){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof dL&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?cr(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?cr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,u=0;;u++){let c=this.children[u],f=a+c.size;if(i==-1&&e<=f){let p=a+c.border;if(e>=p&&t<=f-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,p);e=a;for(let g=u;g>0;g--){let _=this.children[g-1];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(1)){i=cr(_.dom)+1;break}e-=_.size}i==-1&&(i=0)}if(i>-1&&(f>t||u==this.children.length-1)){t=f;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=cr(g.dom);break}t+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let A=0,T=0;A<this.children.length;A++){let E=this.children[A],S=T+E.size;if(s>T&&a<S)return E.setSelection(e-T-E.border,t-T-E.border,r,i);T=S}let u=this.domFromPos(e,e?-1:1),c=t==e?u:this.domFromPos(t,t?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((Cs||qr)&&e==t){let{node:A,offset:T}=u;if(A.nodeType==3){if(g=!!(T&&A.nodeValue[T-1]==`
`),g&&T==A.nodeValue.length)for(let E=A,S;E;E=E.parentNode){if(S=E.nextSibling){S.nodeName=="BR"&&(u=c={node:S.parentNode,offset:cr(S)+1});break}let k=E.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let E=A.childNodes[T-1];g=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Cs&&p.focusNode&&p.focusNode!=c.node&&p.focusNode.nodeType==1){let A=p.focusNode.childNodes[p.focusOffset];A&&A.contentEditable=="false"&&(i=!0)}if(!(i||g&&qr)&&Hu(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Hu(c.node,c.offset,p.focusNode,p.focusOffset))return;let _=!1;if((f.extend||e==t)&&!g){f.collapse(u.node,u.offset);try{e!=t&&f.extend(c.node,c.offset),_=!0}catch{}}if(!_){if(e>t){let T=u;u=c,c=T}let A=document.createRange();A.setEnd(c.node,c.offset),A.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(A)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+s.border,c=a-s.border;if(e>=u&&t<=c){this.dirty=e==r||t==a?vu:xI,e==u&&t==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=mo:s.markDirty(e-u,t-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?vu:mo}r=a}this.dirty=vu}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?vu:xI;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class dL extends bp{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==us&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class QK extends bp{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class qu extends bp{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=Ju.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new qu(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&mo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=mo&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=us){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=us}}slice(e,t,r){let i=qu.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=pE(s,t,a,r)),e>0&&(s=pE(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ul extends bp{constructor(e,t,r,i,s,a,u,c,f){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,s,a){let u=s.nodeViews[t.type.name],c,f=u&&u(t,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),p=f&&f.dom,g=f&&f.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=Ju.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let _=p;return p=yL(p,r,t),f?c=new XK(e,t,r,i,p,g||null,_,f,s,a+1):t.isText?new U_(e,t,r,i,p,_,s):new ul(e,t,r,i,p,g||null,_,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_e.empty)}return e}matchesNode(e,t,r){return this.dirty==us&&e.eq(this.node)&&vy(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,u=s&&s.pos<0,c=new ZK(this,a&&a.node,e);nW(this.node,this.innerDeco,(f,p,g)=>{f.spec.marks?c.syncToMarks(f.spec.marks,r,e):f.type.side>=0&&!g&&c.syncToMarks(p==this.node.childCount?qt.none:this.node.child(p).marks,r,e),c.placeWidget(f,e,i)},(f,p,g,_)=>{c.syncToMarks(f.marks,r,e);let A;c.findNodeMatch(f,p,g,_)||u&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(A=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(f,p,g,A,e)||c.updateNextNode(f,p,g,e,_,i)||c.addNode(f,p,g,e,i),i+=f.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==vu)&&(a&&this.protectLocalComposition(e,a),mL(this.contentDOM,this.children,e),Ch&&rW(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Je)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,u=iW(this.node.content,a,r-t,i-t);return u<0?null:{node:s,pos:u,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new QK(this,s,t,i);e.input.compositionNodes.push(a),this.children=pE(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==mo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=us}updateOuterDeco(e){if(vy(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=gL(this.dom,this.nodeDOM,dE(this.outerDeco,this.node,t),dE(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function kI(n,e,t,r,i){yL(r,e,n);let s=new ul(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class U_ extends ul{constructor(e,t,r,i,s,a,u){super(e,t,r,i,s,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==mo||this.dirty!=us&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=us||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=us,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new U_(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=mo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class pL extends bp{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==us&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class XK extends ul{constructor(e,t,r,i,s,a,u,c,f,p){super(e,t,r,i,s,a,u,f,p),this.spec=c}update(e,t,r,i){if(this.dirty==mo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function mL(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=II(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof qu){let c=r?r.previousSibling:n.lastChild;mL(a.contentDOM,a.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=II(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const wd=function(n){n&&(this.nodeName=n)};wd.prototype=Object.create(null);const Au=[new wd];function dE(n,e,t){if(n.length==0)return Au;let r=t?Au[0]:new wd,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new wd(a.nodeName));for(let u in a){let c=a[u];c!=null&&(t&&i.length==1&&i.push(r=new wd(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return i}function gL(n,e,t,r){if(t==Au&&r==Au)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],u=t[s];if(s){let c;u&&u.nodeName==a.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),u=Au[0]),i=c}JK(i,u||Au[0],a)}return i}function JK(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function yL(n,e,t){return gL(n,n,Au,dE(e,t,n.nodeType!=1))}function vy(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function II(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ZK{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=eW(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=us,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let f=this.top.children[c];if(f.matchesMark(e[s])&&!this.isLocked(f.dom)){u=c;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let c=qu.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let f=this.top.children[u];if(f.matchesNode(e,t,r)&&!this.preMatch.matched.has(f)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==mo&&a.dom==a.contentDOM&&(a.dirty=vu),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let u=this.index;u<this.top.children.length;u++){let c=this.top.children[u];if(c instanceof ul){let f=this.preMatch.matched.get(c);if(f!=null&&f!=s)return!1;let p=c.dom,g,_=this.isLocked(p)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=mo&&vy(t,c.outerDeco));if(!_&&c.update(e,t,r,i))return this.destroyBetween(this.index,u),c.dom!=p&&(this.changed=!0),this.index++,!0;if(!_&&(g=this.recreateWrapper(c,e,t,r,i,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=vu,g.updateChildren(i,a+1),g.dirty=us),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!vy(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=ul.create(this.top,t,r,i,s,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let c of u.children)c.parent=u}return e.destroy(),u}addNode(e,t,r,i,s){let a=ul.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new dL(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof qu;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof U_)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qr||xr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new pL(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function eW(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let f=t.children[r-1];if(f instanceof qu)t=f,r=f.children.length;else{u=f,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=u.node;if(c){if(c!=n.child(i-1))break;--i,s.set(u,i),a.push(u)}}return{index:i,matched:s,matches:a.reverse()}}function tW(n,e){return n.type.side-e.type.side}function nW(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let f=0;f<n.childCount;f++){let p=n.child(f);r(p,i,e.forChild(s,p),f),s+=p.nodeSize}return}let a=0,u=[],c=null;for(let f=0;;){let p,g;for(;a<i.length&&i[a].to==s;){let S=i[a++];S.widget&&(p?(g||(g=[p])).push(S):p=S)}if(p)if(g){g.sort(tW);for(let S=0;S<g.length;S++)t(g[S],f,!!c)}else t(p,f,!!c);let _,A;if(c)A=-1,_=c,c=null;else if(f<n.childCount)A=f,_=n.child(f++);else break;for(let S=0;S<u.length;S++)u[S].to<=s&&u.splice(S--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)u.push(i[a++]);let T=s+_.nodeSize;if(_.isText){let S=T;a<i.length&&i[a].from<S&&(S=i[a].from);for(let k=0;k<u.length;k++)u[k].to<S&&(S=u[k].to);S<T&&(c=_.cut(S-s),_=_.cut(0,S-s),T=S,A=-1)}else for(;a<i.length&&i[a].to<T;)a++;let E=_.isInline&&!_.isLeaf?u.filter(S=>!S.inline):u.slice();r(_,E,e.forChild(s,_),A),s=T}}function rW(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function iW(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),u=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<n.childCount;){let f=n.child(i++);if(s+=f.nodeSize,!f.isText)break;c+=f.text}if(s>=t){if(s>=r&&c.slice(r-e.length-u,r-u)==e)return r-e.length;let f=u<r?c.lastIndexOf(e,r-u-1):-1;if(f>=0&&f+e.length+u>=t)return u+f;if(t==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function pE(n,e,t,r,i){let s=[];for(let a=0,u=0;a<n.length;a++){let c=n[a],f=u,p=u+=c.size;f>=t||p<=e?s.push(c):(f<e&&s.push(c.slice(0,e-f,r)),i&&(s.push(i),i=void 0),p>t&&s.push(c.slice(t-f,c.size,r)))}return s}function yS(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),c,f;if(V_(t)){for(c=a;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&qe.isSelectable(g)&&i.parent&&!(g.isInline&&IK(t.focusNode,t.focusOffset,i.dom))){let _=i.posBefore;f=new qe(a==_?u:r.resolve(_))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=a,_=a;for(let A=0;A<t.rangeCount;A++){let T=t.getRangeAt(A);g=Math.min(g,n.docView.posFromDOM(T.startContainer,T.startOffset,1)),_=Math.max(_,n.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(g<0)return null;[c,a]=_==n.state.selection.anchor?[_,g]:[g,_],u=r.resolve(a)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let p=r.resolve(c);if(!f){let g=e=="pointer"||n.state.selection.head<u.pos&&!s?1:-1;f=_S(n,p,u,g)}return f}function _L(n){return n.editable?n.hasFocus():AL(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Xo(n,e=!1){let t=n.state.selection;if(vL(n,t),!!_L(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&xr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Hu(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)oW(n);else{let{anchor:r,head:i}=t,s,a;NI&&!(t instanceof Je)&&(t.$from.parent.inlineContent||(s=OI(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=OI(n,t.to))),n.docView.setSelection(r,i,n,e),NI&&(s&&MI(s),a&&MI(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&sW(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const NI=qr||xr&&oL<63;function OI(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(qr&&i&&i.contentEditable=="false")return zA(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return zA(i);if(s)return zA(s)}}function zA(n){return n.contentEditable="true",qr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function MI(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function sW(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!_L(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function oW(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,cr(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&ui&&ll<=11&&(r.disabled=!0,r.disabled=!1)}function vL(n,e){if(e instanceof qe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(DI(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else DI(n)}function DI(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function _S(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Je.between(e,t,r)}function PI(n){return n.editable&&!n.hasFocus()?!1:AL(n)}function AL(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function aW(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Hu(e.node,e.offset,t.anchorNode,t.anchorOffset)}function mE(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&rt.findFrom(s,e)}function Pa(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function LI(n,e,t){let r=n.state.selection;if(r instanceof Je)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Pa(n,new Je(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=mE(n.state,e);return i&&i instanceof qe?Pa(n,i):!1}else if(!(is&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?qe.isSelectable(s)?Pa(n,new qe(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Ep?Pa(n,new Je(n.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof qe&&r.node.isInline)return Pa(n,new Je(e>0?r.$to:r.$from));{let i=mE(n.state,e);return i?Pa(n,i):!1}}}function Ay(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Rd(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function zc(n,e){return e<0?lW(n):uW(n)}function lW(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(Cs&&t.nodeType==1&&r<Ay(t)&&Rd(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Rd(u,-1))i=t,s=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(TL(t))break;{let u=t.previousSibling;for(;u&&Rd(u,-1);)i=t.parentNode,s=cr(u),u=u.previousSibling;if(u)t=u,r=Ay(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?gE(n,t,r):i&&gE(n,i,s)}function uW(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Ay(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Rd(u,1))s=t,a=++r;else break}else{if(TL(t))break;{let u=t.nextSibling;for(;u&&Rd(u,1);)s=u.parentNode,a=cr(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=Ay(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&gE(n,s,a)}function TL(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function cW(n,e){for(;n&&e==n.childNodes.length&&!Tp(n);)e=cr(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function hW(n,e){for(;n&&!e&&!Tp(n);)e=cr(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function gE(n,e,t){if(e.nodeType!=3){let s,a;(a=cW(e,t))?(e=a,t=0):(s=hW(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(V_(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Xo(n)},50)}function VI(n,e){let t=n.state.doc.resolve(e);if(!(xr||MK)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function UI(n,e,t){let r=n.state.selection;if(r instanceof Je&&!r.empty||t.indexOf("s")>-1||is&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=mE(n.state,e);if(a&&a instanceof qe)return Pa(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,u=r instanceof Li?rt.near(a,e):rt.findFrom(a,e);return u?Pa(n,u):!1}return!1}function zI(n,e){if(!(n.state.selection instanceof Je))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function BI(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function fW(n){if(!qr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;BI(n,r,"true"),setTimeout(()=>BI(n,r,"false"),20)}return!1}function dW(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function pW(n,e){let t=e.keyCode,r=dW(e);if(t==8||is&&t==72&&r=="c")return zI(n,-1)||zc(n,-1);if(t==46&&!e.shiftKey||is&&t==68&&r=="c")return zI(n,1)||zc(n,1);if(t==13||t==27)return!0;if(t==37||is&&t==66&&r=="c"){let i=t==37?VI(n,n.state.selection.from)=="ltr"?-1:1:-1;return LI(n,i,r)||zc(n,i)}else if(t==39||is&&t==70&&r=="c"){let i=t==39?VI(n,n.state.selection.from)=="ltr"?1:-1:1;return LI(n,i,r)||zc(n,i)}else{if(t==38||is&&t==80&&r=="c")return UI(n,-1,r)||zc(n,-1);if(t==40||is&&t==78&&r=="c")return fW(n)||UI(n,1,r)||zc(n,1);if(r==(is?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function vS(n,e){n.someProp("transformCopied",A=>{e=A(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let A=r.firstChild;t.push(A.type.name,A.attrs!=A.type.defaultAttrs?A.attrs:null),r=A.content}let a=n.someProp("clipboardSerializer")||Ju.fromSchema(n.state.schema),u=CL(),c=u.createElement("div");c.appendChild(a.serializeFragment(r,{document:u}));let f=c.firstChild,p,g=0;for(;f&&f.nodeType==1&&(p=RL[f.nodeName.toLowerCase()]);){for(let A=p.length-1;A>=0;A--){let T=u.createElement(p[A]);for(;c.firstChild;)T.appendChild(c.firstChild);c.appendChild(T),g++}f=c.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${g?` -${g}`:""} ${JSON.stringify(t)}`);let _=n.someProp("clipboardTextSerializer",A=>A(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:_,slice:e}}function EL(n,e,t,r,i){let s=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let c=e&&(r||s||!t);if(c){if(n.someProp("transformPastedText",_=>{e=_(e,s||r,n)}),s)return e?new Ie(_e.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ie.empty;let g=n.someProp("clipboardTextParser",_=>_(e,i,r,n));if(g)u=g;else{let _=i.marks(),{schema:A}=n.state,T=Ju.fromSchema(A);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let S=a.appendChild(document.createElement("p"));E&&S.appendChild(T.serializeNode(A.text(E,_)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),a=_W(t),Ep&&vW(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let _=a.firstChild;for(;_&&_.nodeType!=1;)_=_.nextSibling;if(!_)break;a=_}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||al.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||p),context:i,ruleFromNode(_){return _.nodeName=="BR"&&!_.nextSibling&&_.parentNode&&!mW.test(_.parentNode.nodeName)?{ignore:!0}:null}})),p)u=AW(jI(u,+p[1],+p[2]),p[4]);else if(u=Ie.maxOpen(gW(u.content,i),!0),u.openStart||u.openEnd){let g=0,_=0;for(let A=u.content.firstChild;g<u.openStart&&!A.type.spec.isolating;g++,A=A.firstChild);for(let A=u.content.lastChild;_<u.openEnd&&!A.type.spec.isolating;_++,A=A.lastChild);u=jI(u,g,_)}return n.someProp("transformPasted",g=>{u=g(u,n)}),u}const mW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function gW(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(u=>{if(!a)return;let c=i.findWrapping(u.type),f;if(!c)return a=null;if(f=a.length&&s.length&&SL(c,s,u,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=wL(a[a.length-1],s.length));let p=bL(u,c);a.push(p),i=i.matchType(p.type),s=c}}),a)return _e.from(a)}return n}function bL(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,_e.from(n));return n}function SL(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=SL(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(_e.from(bL(t,n,i+1))))}}function wL(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,wL(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(_e.empty,!0);return n.copy(t.append(r))}function yE(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(s=0),i<r-1&&(u=yE(u,e,t,r,i+1,s)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(_e.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function jI(n,e,t){return e<n.openStart&&(n=new Ie(yE(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Ie(yE(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const RL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let FI=null;function CL(){return FI||(FI=document.implementation.createHTMLDocument("title"))}let BA=null;function yW(n){let e=window.trustedTypes;return e?(BA||(BA=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),BA.createHTML(n)):n}function _W(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=CL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&RL[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=yW(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function vW(n){let e=n.querySelectorAll(xr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function AW(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let c=t.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;i=_e.from(c.create(r[u+1],i)),s++,a++}return new Ie(i,s,a)}const $r={},Gr={},TW={touchstart:!0,touchmove:!0};class EW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function bW(n){for(let e in $r){let t=$r[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{wW(n,r)&&!AS(n,r)&&(n.editable||!(r.type in Gr))&&t(n,r)},TW[e]?{passive:!0}:void 0)}qr&&n.dom.addEventListener("input",()=>null),_E(n)}function Xa(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function SW(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function _E(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>AS(n,r))})}function AS(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function wW(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function RW(n,e){!AS(n,e)&&$r[e.type]&&(n.editable||!(e.type in Gr))&&$r[e.type](n,e)}Gr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!kL(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Wo&&xr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Ch&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,fu(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||pW(n,t)?t.preventDefault():Xa(n,"key")};Gr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Gr.keypress=(n,e)=>{let t=e;if(kL(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||is&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Je)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function z_(n){return{left:n.clientX,top:n.clientY}}function CW(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function TS(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,u=>a>s.depth?u(n,t,s.nodeAfter,s.before(a),i,!0):u(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function ah(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function xW(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&qe.isSelectable(r)?(ah(n,new qe(t)),!0):!1}function kW(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof qe&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let u=a>s.depth?s.nodeAfter:s.node(a);if(qe.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(ah(n,qe.create(n.state.doc,i)),!0):!1}function IW(n,e,t,r,i){return TS(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?kW(n,t):xW(n,t))}function NW(n,e,t,r){return TS(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function OW(n,e,t,r){return TS(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||MW(n,t,r)}function MW(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ah(n,Je.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(a.inlineContent)ah(n,Je.create(r,u+1,u+1+a.content.size));else if(qe.isSelectable(a))ah(n,qe.create(r,u));else continue;return!0}}function ES(n){return Ty(n)}const xL=is?"metaKey":"ctrlKey";$r.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=ES(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&CW(t,n.input.lastClick)&&!t[xL]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let a=n.posAtCoords(z_(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new DW(n,a,t,!!r)):(s=="doubleClick"?NW:OW)(n,a.pos,a.inside,t)?t.preventDefault():Xa(n,"pointer"))};class DW{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[xL],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:f}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof qe&&f.from<=a&&f.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(z_(e))),this.updateAllowDefault(e),this.allowDefault||!t?Xa(this.view,"pointer"):IW(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qr&&this.mightDrag&&!this.mightDrag.node.isAtom||xr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ah(this.view,rt.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Xa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Xa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}$r.touchstart=n=>{n.input.lastTouch=Date.now(),ES(n),Xa(n,"pointer")};$r.touchmove=n=>{n.input.lastTouch=Date.now(),Xa(n,"pointer")};$r.contextmenu=n=>ES(n);function kL(n,e){return n.composing?!0:qr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const PW=Wo?5e3:-1;Gr.compositionstart=Gr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Je&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Ty(n,!0),n.markCursor=null;else if(Ty(n,!e.selection.empty),Cs&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}IL(n,PW)};Gr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,IL(n,20))};function IL(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ty(n),e))}function NL(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=VW());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function LW(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=xK(e.focusNode,e.focusOffset),r=kK(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function VW(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ty(n,e=!1){if(!(Wo&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),NL(n),e||n.docView&&n.docView.dirty){let t=yS(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function UW(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const tp=ui&&ll<15||Ch&&DK<604;$r.copy=Gr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=tp?null:t.clipboardData,a=r.content(),{dom:u,text:c}=vS(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",c)):UW(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function zW(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function BW(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?np(n,r.value,null,i,e):np(n,r.textContent,r.innerHTML,i,e)},50)}function np(n,e,t,r,i){let s=EL(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,i,s||Ie.empty)))return!0;if(!s)return!1;let a=zW(s),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function OL(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Gr.paste=(n,e)=>{let t=e;if(n.composing&&!Wo)return;let r=tp?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&np(n,OL(r),r.getData("text/html"),i,t)?t.preventDefault():BW(n,t)};class ML{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const jW=is?"altKey":"ctrlKey";function DL(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[jW]}$r.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(z_(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof qe?i.to-1:i.to))){if(r&&r.mightDrag)a=qe.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(a=qe.create(n.state.doc,g.posBefore))}}let u=(a||n.state.selection).content(),{dom:c,text:f,slice:p}=vS(n,u);(!t.dataTransfer.files.length||!xr||oL>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(tp?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",tp||t.dataTransfer.setData("text/plain",f),n.dragging=new ML(p,DL(n,t),a)};$r.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Gr.dragover=Gr.dragenter=(n,e)=>e.preventDefault();Gr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(z_(t));if(!i)return;let s=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",T=>{a=T(a,n)}):a=EL(n,OL(t.dataTransfer),tp?null:t.dataTransfer.getData("text/html"),!1,s);let u=!!(r&&DL(n,t));if(n.someProp("handleDrop",T=>T(n,t,a||Ie.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let c=a?X2(n.state.doc,s.pos,a):s.pos;c==null&&(c=s.pos);let f=n.state.tr;if(u){let{node:T}=r;T?T.replace(f):f.deleteSelection()}let p=f.mapping.map(c),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,_=f.doc;if(g?f.replaceRangeWith(p,p,a.content.firstChild):f.replaceRange(p,p,a),f.doc.eq(_))return;let A=f.doc.resolve(p);if(g&&qe.isSelectable(a.content.firstChild)&&A.nodeAfter&&A.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new qe(A));else{let T=f.mapping.map(c);f.mapping.maps[f.mapping.maps.length-1].forEach((E,S,k,L)=>T=L),f.setSelection(_S(n,A,f.doc.resolve(T)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))};$r.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Xo(n)},20))};$r.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};$r.beforeinput=(n,e)=>{if(xr&&Wo&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,fu(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Gr)$r[n]=Gr[n];function rp(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ey{constructor(e,t){this.toDOM=e,this.spec=t||Iu,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Mi(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ey&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class cl{constructor(e,t){this.attrs=e,this.spec=t||Iu}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Mi(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof cl&&rp(this.attrs,e.attrs)&&rp(this.spec,e.spec)}static is(e){return e.type instanceof cl}destroy(){}}class bS{constructor(e,t){this.attrs=e,this.spec=t||Iu}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Mi(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof bS&&rp(this.attrs,e.attrs)&&rp(this.spec,e.spec)}destroy(){}}class Mi{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Mi(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Mi(e,e,new Ey(t,r))}static inline(e,t,r,i){return new Mi(e,t,new cl(r,i))}static node(e,t,r,i){return new Mi(e,t,new bS(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof cl}get widget(){return this.type instanceof Ey}}const Gc=[],Iu={};class kn{constructor(e,t){this.local=e.length?e:Gc,this.children=t.length?t:Gc}static create(e,t){return t.length?by(t,e,0,Iu):Er}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,s)}}map(e,t,r){return this==Er||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Iu)}mapInner(e,t,r,i,s){let a;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,i);c&&c.type.valid(t,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?FW(this.children,a||[],e,t,r,i,s):a?new kn(a.sort(Nu),Gc):Er}add(e,t){return t.length?this==Er?kn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((u,c)=>{let f=c+r,p;if(p=LL(t,u,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(u,p,f+1):i.splice(s,0,c,c+u.nodeSize,by(p,u,f+1,Iu)),s+=3}});let a=PL(s?VL(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new kn(a.length?this.local.concat(a).sort(Nu):this.local,i||this.children)}remove(e){return e.length==0||this==Er?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,u=r[s]+t,c=r[s+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<c&&(e[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(a,u+1);f!=Er?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new kn(i,r):Er}forChild(e,t){if(this==Er)return this;if(t.isLeaf)return kn.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,a=s+t.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<a&&c.to>s&&c.type instanceof cl){let f=Math.max(s,c.from)-s,p=Math.min(a,c.to)-s;f<p&&(i||(i=[])).push(c.copy(f,p))}}if(i){let u=new kn(i.sort(Nu),Gc);return r?new Ha([u,r]):u}return r||Er}eq(e){if(this==e)return!0;if(!(e instanceof kn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return SS(this.localsInner(e))}localsInner(e){if(this==Er)return Gc;if(e.inlineContent||!this.local.some(cl.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof cl||t.push(this.local[r]);return t}forEachSet(e){e(this)}}kn.empty=new kn([],[]);kn.removeOverlap=SS;const Er=kn.empty;class Ha{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Iu));return Ha.from(r)}forChild(e,t){if(t.isLeaf)return kn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Er&&(s instanceof Ha?r=r.concat(s.members):r.push(s))}return Ha.from(r)}eq(e){if(!(e instanceof Ha)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?SS(r?t:t.sort(Nu)):Gc}static from(e){switch(e.length){case 0:return Er;case 1:return e[0];default:return new Ha(e.every(t=>t instanceof kn)?e:e.reduce((t,r)=>t.concat(r instanceof kn?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function FW(n,e,t,r,i,s,a){let u=n.slice();for(let f=0,p=s;f<t.maps.length;f++){let g=0;t.maps[f].forEach((_,A,T,E)=>{let S=E-T-(A-_);for(let k=0;k<u.length;k+=3){let L=u[k+1];if(L<0||_>L+p-g)continue;let B=u[k]+p-g;A>=B?u[k+1]=_<=B?-2:-1:_>=p&&S&&(u[k]+=S,u[k+1]+=S)}g+=S}),p=t.maps[f].map(p,-1)}let c=!1;for(let f=0;f<u.length;f+=3)if(u[f+1]<0){if(u[f+1]==-2){c=!0,u[f+1]=-1;continue}let p=t.map(n[f]+s),g=p-i;if(g<0||g>=r.content.size){c=!0;continue}let _=t.map(n[f+1]+s,-1),A=_-i,{index:T,offset:E}=r.content.findIndex(g),S=r.maybeChild(T);if(S&&E==g&&E+S.nodeSize==A){let k=u[f+2].mapInner(t,S,p+1,n[f]+s+1,a);k!=Er?(u[f]=g,u[f+1]=A,u[f+2]=k):(u[f+1]=-2,c=!0)}else c=!0}if(c){let f=HW(u,n,e,t,i,s,a),p=by(f,r,0,a);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,_=0;g<p.children.length;g+=3){let A=p.children[g];for(;_<u.length&&u[_]<A;)_+=3;u.splice(_,0,p.children[g],p.children[g+1],p.children[g+2])}}return new kn(e.sort(Nu),u)}function PL(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Mi(i.from+e,i.to+e,i.type))}return t}function HW(n,e,t,r,i,s,a){function u(c,f){for(let p=0;p<c.local.length;p++){let g=c.local[p].map(r,i,f);g?t.push(g):a.onRemove&&a.onRemove(c.local[p].spec)}for(let p=0;p<c.children.length;p+=3)u(c.children[p+2],c.children[p]+f+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&u(n[c+2],e[c]+s+1);return t}function LL(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function VL(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function by(n,e,t,r){let i=[],s=!1;e.forEach((u,c)=>{let f=LL(n,u,c+t);if(f){s=!0;let p=by(f,u,t+c+1,r);p!=Er&&i.push(c,c+u.nodeSize,p)}});let a=PL(s?VL(n):n,-t).sort(Nu);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new kn(a,i):Er}function Nu(n,e){return n.from-e.from||n.to-e.to}function SS(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),HI(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),HI(e,i,r.copy(s.from,r.to)));break}}}return e}function HI(n,e,t){for(;e<n.length&&Nu(t,n[e])>0;)e++;n.splice(e,0,t)}function jA(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Er&&e.push(r)}),n.cursorWrapper&&e.push(kn.create(n.state.doc,[n.cursorWrapper.deco])),Ha.from(e)}const qW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},$W=ui&&ll<=11;class GW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class KW{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new GW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ui&&ll<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),$W&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(PI(this.view)){if(this.suppressingSelectionUpdates)return Xo(this.view);if(ui&&ll<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Hu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Rh(s))t.add(s);for(let s=e.anchorNode;s;s=Rh(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&PI(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,u=!1,c=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],c);g&&(s=s<0?g.from:Math.min(g.from,s),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(u=!0))}if(Cs&&c.length){let p=c.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,_]=p;g.parentNode&&g.parentNode.parentNode==_.parentNode?_.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let _ of p){let A=_.parentNode;A&&A.nodeName=="LI"&&(!g||QW(e,g)!=A)&&_.remove()}}}let f=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&V_(r)&&(f=yS(e))&&f.eq(rt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xo(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),WW(e)),this.handleDOMChange(s,a,u,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xo(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ui&&ll<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:_}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(s=_)}let a=i&&i.parentNode==e.target?cr(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?cr(s):e.target.childNodes.length,f=r.localPosFromDOM(e.target,c,1);return{from:u,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let qI=new WeakMap,$I=!1;function WW(n){if(!qI.has(n)&&(qI.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Cs,$I)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$I=!0}}function GI(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Hu(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function YW(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return GI(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?GI(n,t):null}function QW(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function XW(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:u}=n.docView.parseRange(e,t),c=n.domSelectionRange(),f,p=c.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:c.anchorOffset}],V_(c)||f.push({node:c.focusNode,offset:c.focusOffset})),xr&&n.input.lastKeyCode===8)for(let S=s;S>i;S--){let k=r.childNodes[S-1],L=k.pmViewDesc;if(k.nodeName=="BR"&&!L){s=S;break}if(!L||L.size)break}let g=n.state.doc,_=n.someProp("domParser")||al.fromSchema(n.state.schema),A=g.resolve(a),T=null,E=_.parse(r,{topNode:A.parent,topMatch:A.parent.contentMatchAt(A.index()),topOpen:!0,from:i,to:s,preserveWhitespace:A.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:JW,context:A});if(f&&f[0].pos!=null){let S=f[0].pos,k=f[1]&&f[1].pos;k==null&&(k=S),T={anchor:S+a,head:k+a}}return{doc:E,sel:T,from:a,to:u}}function JW(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(qr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||qr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ZW=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function eY(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let x=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,z=yS(n,x);if(z&&!n.state.selection.eq(z)){if(xr&&Wo&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",j=>j(n,fu(13,"Enter"))))return;let U=n.state.tr.setSelection(z);x=="pointer"?U.setMeta("pointer",!0):x=="key"&&U.scrollIntoView(),s&&U.setMeta("composition",s),n.dispatch(U)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let c=n.state.selection,f=XW(n,e,t),p=n.state.doc,g=p.slice(f.from,f.to),_,A;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(_=n.state.selection.to,A="end"):(_=n.state.selection.from,A="start"),n.input.lastKeyCode=null;let T=rY(g.content,f.doc.content,f.from,_,A);if(T&&n.input.domChangeCount++,(Ch&&n.input.lastIOSEnter>Date.now()-225||Wo)&&i.some(x=>x.nodeType==1&&!ZW.test(x.nodeName))&&(!T||T.endA>=T.endB)&&n.someProp("handleKeyDown",x=>x(n,fu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!T)if(r&&c instanceof Je&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))T={start:c.from,endA:c.to,endB:c.to};else{if(f.sel){let x=KI(n,n.state.doc,f.sel);if(x&&!x.eq(n.state.selection)){let z=n.state.tr.setSelection(x);s&&z.setMeta("composition",s),n.dispatch(z)}}return}n.state.selection.from<n.state.selection.to&&T.start==T.endB&&n.state.selection instanceof Je&&(T.start>n.state.selection.from&&T.start<=n.state.selection.from+2&&n.state.selection.from>=f.from?T.start=n.state.selection.from:T.endA<n.state.selection.to&&T.endA>=n.state.selection.to-2&&n.state.selection.to<=f.to&&(T.endB+=n.state.selection.to-T.endA,T.endA=n.state.selection.to)),ui&&ll<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>f.from&&f.doc.textBetween(T.start-f.from-1,T.start-f.from+1)=="  "&&(T.start--,T.endA--,T.endB--);let E=f.doc.resolveNoCache(T.start-f.from),S=f.doc.resolveNoCache(T.endB-f.from),k=p.resolve(T.start),L=E.sameParent(S)&&E.parent.inlineContent&&k.end()>=T.endA,B;if((Ch&&n.input.lastIOSEnter>Date.now()-225&&(!L||i.some(x=>x.nodeName=="DIV"||x.nodeName=="P"))||!L&&E.pos<f.doc.content.size&&(!E.sameParent(S)||!E.parent.inlineContent)&&!/\S/.test(f.doc.textBetween(E.pos,S.pos,"",""))&&(B=rt.findFrom(f.doc.resolve(E.pos+1),1,!0))&&B.head>E.pos)&&n.someProp("handleKeyDown",x=>x(n,fu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>T.start&&nY(p,T.start,T.endA,E,S)&&n.someProp("handleKeyDown",x=>x(n,fu(8,"Backspace")))){Wo&&xr&&n.domObserver.suppressSelectionUpdates();return}xr&&T.endB==T.start&&(n.input.lastChromeDelete=Date.now()),Wo&&!L&&E.start()!=S.start()&&S.parentOffset==0&&E.depth==S.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==T.endA&&(T.endB-=2,S=f.doc.resolveNoCache(T.endB-f.from),setTimeout(()=>{n.someProp("handleKeyDown",function(x){return x(n,fu(13,"Enter"))})},20));let q=T.start,V=T.endA,M,O,I;if(L){if(E.pos==S.pos)ui&&ll<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xo(n),20)),M=n.state.tr.delete(q,V),O=p.resolve(T.start).marksAcross(p.resolve(T.endA));else if(T.endA==T.endB&&(I=tY(E.parent.content.cut(E.parentOffset,S.parentOffset),k.parent.content.cut(k.parentOffset,T.endA-k.start()))))M=n.state.tr,I.type=="add"?M.addMark(q,V,I.mark):M.removeMark(q,V,I.mark);else if(E.parent.child(E.index()).isText&&E.index()==S.index()-(S.textOffset?0:1)){let x=E.parent.textBetween(E.parentOffset,S.parentOffset);if(n.someProp("handleTextInput",z=>z(n,q,V,x)))return;M=n.state.tr.insertText(x,q,V)}}if(M||(M=n.state.tr.replace(q,V,f.doc.slice(T.start-f.from,T.endB-f.from))),f.sel){let x=KI(n,M.doc,f.sel);x&&!(xr&&n.composing&&x.empty&&(T.start!=T.endB||n.input.lastChromeDelete<Date.now()-100)&&(x.head==q||x.head==M.mapping.map(V)-1)||ui&&x.empty&&x.head==q)&&M.setSelection(x)}O&&M.ensureMarks(O),s&&M.setMeta("composition",s),n.dispatch(M.scrollIntoView())}function KI(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:_S(n,e.resolve(t.anchor),e.resolve(t.head))}function tY(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,u,c;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],a="add",c=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&s.length==1)u=s[0],a="remove",c=p=>p.mark(u.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(c(e.child(p)));if(_e.from(f).eq(n))return{mark:u,type:a}}function nY(n,e,t,r,i){if(t-e<=i.pos-r.pos||FA(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&t==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(FA(s,!0,!0));return!a.parent.isTextblock||a.pos>t||FA(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function FA(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function rY(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(a,u));r-=a+c-s}if(a<s&&n.size<e.size){let c=r<=s&&r>=a?s-r:0;s-=c,s&&s<e.size&&WI(e.textBetween(s-1,s+1))&&(s+=c?1:-1),u=s+(u-a),a=s}else if(u<s){let c=r<=s&&r>=u?s-r:0;s-=c,s&&s<n.size&&WI(n.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-u),u=s}return{start:s,endA:a,endB:u}}function WI(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class iY{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new EW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(ZI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=XI(this),QI(this),this.nodeViews=JI(this),this.docView=kI(this.state.doc,YI(this),jA(this),this.dom,this),this.domObserver=new KW(this,(r,i,s,a)=>eY(this,r,i,s,a)),this.domObserver.start(),bW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&_E(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ZI),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(NL(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let A=JI(this);oY(A,this.nodeViews)&&(this.nodeViews=A,s=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&_E(this),this.editable=XI(this),QI(this);let c=jA(this),f=YI(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,f,c);(g||!e.selection.eq(i.selection))&&(a=!0);let _=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&VK(this);if(a){this.domObserver.stop();let A=g&&(ui||xr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&sY(i.selection,e.selection);if(g){let T=xr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=LW(this)),(s||!this.docView.update(e.doc,f,c,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=kI(e.doc,f,c,this.dom,this)),T&&!this.trackWrites&&(A=!0)}A||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&aW(this))?Xo(this,A):(vL(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():_&&UK(_)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof qe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&bI(this,t.getBoundingClientRect(),e)}else bI(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new ML(e.slice,e.move,i<0?void 0:qe.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let u=s[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(ui){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&zK(this.dom),Xo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return qK(this,e)}coordsAtPos(e,t=1){return hL(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return YK(this,t||this.state,e)}pasteHTML(e,t){return np(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return np(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return vS(this,e)}destroy(){this.docView&&(SW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],jA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,RK())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return RW(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?qr&&this.root.nodeType===11&&NK(this.dom.ownerDocument)==this.dom&&YW(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function YI(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Mi.node(0,n.state.doc.content.size,e)]}function QI(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Mi.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function XI(n){return!n.someProp("editable",e=>e(n.state)===!1)}function sY(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function JI(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function oY(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function ZI(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Tl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Sy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aY=typeof navigator<"u"&&/Mac/.test(navigator.platform),lY=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var hr=0;hr<10;hr++)Tl[48+hr]=Tl[96+hr]=String(hr);for(var hr=1;hr<=24;hr++)Tl[hr+111]="F"+hr;for(var hr=65;hr<=90;hr++)Tl[hr]=String.fromCharCode(hr+32),Sy[hr]=String.fromCharCode(hr);for(var HA in Tl)Sy.hasOwnProperty(HA)||(Sy[HA]=Tl[HA]);function uY(n){var e=aY&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||lY&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Sy:Tl)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const cY=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),hY=typeof navigator<"u"&&/Win/.test(navigator.platform);function fY(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))cY?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function dY(n){let e=Object.create(null);for(let t in n)e[fY(t)]=n[t];return e}function qA(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function pY(n){return new Jn({props:{handleKeyDown:UL(n)}})}function UL(n){let e=dY(n);return function(t,r){let i=uY(r),s,a=e[qA(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[qA(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(hY&&r.ctrlKey&&r.altKey)&&(s=Tl[r.keyCode])&&s!=i){let u=e[qA(s,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const wS=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function zL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const BL=(n,e,t)=>{let r=zL(n,t);if(!r)return!1;let i=RS(r);if(!i){let a=r.blockRange(),u=a&&Bh(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(YL(n,i,e,-1))return!0;if(r.parent.content.size==0&&(xh(s,"end")||qe.isSelectable(s)))for(let a=r.depth;;a--){let u=P_(n.doc,r.before(a),r.after(a),Ie.empty);if(u&&u.slice.size<u.to-u.from){if(e){let c=n.tr.step(u);c.setSelection(xh(s,"end")?rt.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):qe.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},mY=(n,e,t)=>{let r=zL(n,t);if(!r)return!1;let i=RS(r);return i?jL(n,i,e):!1},gY=(n,e,t)=>{let r=HL(n,t);if(!r)return!1;let i=CS(r);return i?jL(n,i,e):!1};function jL(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=e.nodeAfter,u=a,c=e.pos+1;for(;!u.isTextblock;c++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let f=P_(n.doc,s,c,Ie.empty);if(!f||f.from!=s||f instanceof Gn&&f.slice.size>=c-s)return!1;if(t){let p=n.tr.step(f);p.setSelection(Je.create(p.doc,s)),t(p.scrollIntoView())}return!0}function xh(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const FL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=RS(r)}let a=s&&s.nodeBefore;return!a||!qe.isSelectable(a)?!1:(e&&e(n.tr.setSelection(qe.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function RS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function HL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const qL=(n,e,t)=>{let r=HL(n,t);if(!r)return!1;let i=CS(r);if(!i)return!1;let s=i.nodeAfter;if(YL(n,i,e,1))return!0;if(r.parent.content.size==0&&(xh(s,"start")||qe.isSelectable(s))){let a=P_(n.doc,r.before(),r.after(),Ie.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(xh(s,"start")?rt.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):qe.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},$L=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=CS(r)}let a=s&&s.nodeAfter;return!a||!qe.isSelectable(a)?!1:(e&&e(n.tr.setSelection(qe.create(n.doc,s.pos)).scrollIntoView()),!0)};function CS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const yY=(n,e)=>{let t=n.selection,r=t instanceof qe,i;if(r){if(t.node.isTextblock||!kl(n.doc,t.from))return!1;i=t.from}else if(i=D_(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(qe.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},_Y=(n,e)=>{let t=n.selection,r;if(t instanceof qe){if(t.node.isTextblock||!kl(n.doc,t.to))return!1;r=t.to}else if(r=D_(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},vY=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Bh(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},GL=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function xS(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const AY=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=xS(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let u=t.after(),c=n.tr.replaceWith(u,u,a.createAndFill());c.setSelection(rt.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},KL=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Li||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=xS(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,s.createAndFill());u.setSelection(Je.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},WL=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Qo(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Bh(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function TY(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof qe&&e.selection.node.isBlock)return!r.parentOffset||!Qo(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,u,c=!1,f=!1;for(let A=r.depth;;A--)if(r.node(A).isBlock){c=r.end(A)==r.pos+(r.depth-A),f=r.start(A)==r.pos-(r.depth-A),u=xS(r.node(A-1).contentMatchAt(r.indexAfter(A-1))),s.unshift(c&&u?{type:u}:null),a=A;break}else{if(A==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof Je||e.selection instanceof Li)&&p.deleteSelection();let g=p.mapping.map(r.pos),_=Qo(p.doc,g,s.length,s);if(_||(s[0]=u?{type:u}:null,_=Qo(p.doc,g,s.length,s)),!_)return!1;if(p.split(g,s.length,s),!c&&f&&r.node(a).type!=u){let A=p.mapping.map(r.before(a)),T=p.doc.resolve(A);u&&r.node(a-1).canReplaceWith(T.index(),T.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const EY=TY(),bY=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(qe.create(n.doc,i))),!0)};function SY(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||kl(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function YL(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,u,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&SY(n,e,t))return!0;let f=!c&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(a[0]||s.type).validEnd){if(t){let A=e.pos+s.nodeSize,T=_e.empty;for(let k=a.length-1;k>=0;k--)T=_e.from(a[k].create(null,T));T=_e.from(i.copy(T));let E=n.tr.step(new Kn(e.pos-1,A,e.pos,A,new Ie(T,1,0),a.length,!0)),S=E.doc.resolve(A+2*a.length);S.nodeAfter&&S.nodeAfter.type==i.type&&kl(E.doc,S.pos)&&E.join(S.pos),t(E.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&c?null:rt.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),_=g&&Bh(g);if(_!=null&&_>=e.depth)return t&&t(n.tr.lift(g,_).scrollIntoView()),!0;if(f&&xh(s,"start",!0)&&xh(i,"end")){let A=i,T=[];for(;T.push(A),!A.isTextblock;)A=A.lastChild;let E=s,S=1;for(;!E.isTextblock;E=E.firstChild)S++;if(A.canReplace(A.childCount,A.childCount,E.content)){if(t){let k=_e.empty;for(let B=T.length-1;B>=0;B--)k=_e.from(T[B].copy(k));let L=n.tr.step(new Kn(e.pos-T.length,e.pos+s.nodeSize,e.pos+S,e.pos+s.nodeSize-S,new Ie(k,T.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function QL(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Je.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const wY=QL(-1),RY=QL(1);function CY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),u=a&&pS(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function eN(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(a,u,(c,f)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)i=!0;else{let p=t.doc.resolve(f),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:c}}=t.selection.ranges[a];s.setBlockType(u,c,n,e)}r(s.scrollIntoView())}return!0}}function kS(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}kS(wS,BL,FL);kS(wS,qL,$L);kS(GL,KL,WL,EY);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function xY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s);if(!a)return!1;let u=r?t.tr:null;return kY(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function kY(n,e,t,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);s=new yy(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new yy(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=pS(s,t,r,e);return u?(n&&IY(n,e,u,i,t),!0):!1}function IY(n,e,t,r,i){let s=_e.empty;for(let p=t.length-1;p>=0;p--)s=_e.from(t[p].type.create(t[p].attrs,s));n.step(new Kn(e.start-(r?2:0),e.end,e.start,e.end,new Ie(s,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,c=e.start+t.length-(r?2:0),f=e.parent;for(let p=e.startIndex,g=e.endIndex,_=!0;p<g;p++,_=!1)!_&&Qo(n.doc,c,u)&&(n.split(c,u),c+=2*u),c+=f.child(p).nodeSize;return n}function NY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?OY(e,t,n,s):MY(e,t,s):!0:!1}}function OY(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Kn(s-1,a,s,a,new Ie(_e.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new yy(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=Bh(r);if(u==null)return!1;i.lift(r,u);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return kl(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function MY(n,e,t){let r=n.tr,i=t.parent;for(let A=t.end,T=t.endIndex-1,E=t.startIndex;T>E;T--)A-=i.child(T).nodeSize,r.delete(A-1,A+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,c=t.endIndex==i.childCount,f=s.node(-1),p=s.index(-1);if(!f.canReplace(p+(u?0:1),p+1,a.content.append(c?_e.empty:_e.from(i))))return!1;let g=s.pos,_=g+a.nodeSize;return r.step(new Kn(g-(u?1:0),_+(c?1:0),g+1,_-1,new Ie((u?_e.empty:_e.from(i.copy(_e.empty))).append(c?_e.empty:_e.from(i.copy(_e.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function DY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let u=s.parent,c=u.child(a-1);if(c.type!=n)return!1;if(t){let f=c.lastChild&&c.lastChild.type==u.type,p=_e.from(f?n.create():null),g=new Ie(_e.from(n.create(null,_e.from(u.type.create(null,p)))),f?3:1,0),_=s.start,A=s.end;t(e.tr.step(new Kn(_-(f?3:1),A,_,A,g,1,!0)).scrollIntoView())}return!0}}function B_(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class j_{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([u,c])=>[u,(...p)=>{const g=c(...p)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u=[],c=!!e,f=e||s.tr,p=()=>(!c&&t&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(f),u.every(_=>_===!0)),g={...Object.fromEntries(Object.entries(r).map(([_,A])=>[_,(...E)=>{const S=this.buildProps(f,t),k=A(...E)(S);return u.push(k),g}])),run:p};return g}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,a=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([c,f])=>[c,(...p)=>f(...p)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u={tr:e,editor:i,view:a,state:B_({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,f])=>[c,(...p)=>f(...p)(u)]))}};return u}}class PY{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Pe(n,e,t){return n.config[e]===void 0&&n.parent?Pe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Pe(n.parent,e,t):null}):n.config[e]}function F_(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function XL(n){const e=[],{nodeExtensions:t,markExtensions:r}=F_(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage,extensions:i},c=Pe(a,"addGlobalAttributes",u);if(!c)return;c().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([_,A])=>{e.push({type:g,name:_,attribute:{...s,...A}})})})})}),i.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},c=Pe(a,"addAttributes",u);if(!c)return;const f=c();Object.entries(f).forEach(([p,g])=>{const _={...s,...g};typeof(_==null?void 0:_.default)=="function"&&(_.default=_.default()),_!=null&&_.isRequired&&(_==null?void 0:_.default)===void 0&&delete _.default,e.push({type:a.name,name:p,attribute:_})})}),e}function Qn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Xn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],f=u.filter(p=>!c.includes(p));r[i]=[...c,...f].join(" ")}else if(i==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;c.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());f.set(g,_)}),u.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());f.set(g,_)}),r[i]=Array.from(f.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[i]=s}),r},{})}function vE(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Xn(t,r),{})}function JL(n){return typeof n=="function"}function at(n,e=void 0,...t){return JL(n)?e?n.bind(e)(...t):n(...t):n}function LY(n={}){return Object.keys(n).length===0&&n.constructor===Object}function VY(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function tN(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):VY(t.getAttribute(a.name));return u==null?s:{...s,[a.name]:u}},{});return{...r,...i}}}}function nN(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&LY(t)?!1:t!=null))}function UY(n,e){var t;const r=XL(n),{nodeExtensions:i,markExtensions:s}=F_(n),a=(t=i.find(f=>Pe(f,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(i.map(f=>{const p=r.filter(k=>k.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},_=n.reduce((k,L)=>{const B=Pe(L,"extendNodeSchema",g);return{...k,...B?B(f):{}}},{}),A=nN({..._,content:at(Pe(f,"content",g)),marks:at(Pe(f,"marks",g)),group:at(Pe(f,"group",g)),inline:at(Pe(f,"inline",g)),atom:at(Pe(f,"atom",g)),selectable:at(Pe(f,"selectable",g)),draggable:at(Pe(f,"draggable",g)),code:at(Pe(f,"code",g)),whitespace:at(Pe(f,"whitespace",g)),linebreakReplacement:at(Pe(f,"linebreakReplacement",g)),defining:at(Pe(f,"defining",g)),isolating:at(Pe(f,"isolating",g)),attrs:Object.fromEntries(p.map(k=>{var L;return[k.name,{default:(L=k==null?void 0:k.attribute)===null||L===void 0?void 0:L.default}]}))}),T=at(Pe(f,"parseHTML",g));T&&(A.parseDOM=T.map(k=>tN(k,p)));const E=Pe(f,"renderHTML",g);E&&(A.toDOM=k=>E({node:k,HTMLAttributes:vE(k,p)}));const S=Pe(f,"renderText",g);return S&&(A.toText=S),[f.name,A]})),c=Object.fromEntries(s.map(f=>{const p=r.filter(S=>S.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},_=n.reduce((S,k)=>{const L=Pe(k,"extendMarkSchema",g);return{...S,...L?L(f):{}}},{}),A=nN({..._,inclusive:at(Pe(f,"inclusive",g)),excludes:at(Pe(f,"excludes",g)),group:at(Pe(f,"group",g)),spanning:at(Pe(f,"spanning",g)),code:at(Pe(f,"code",g)),attrs:Object.fromEntries(p.map(S=>{var k;return[S.name,{default:(k=S==null?void 0:S.attribute)===null||k===void 0?void 0:k.default}]}))}),T=at(Pe(f,"parseHTML",g));T&&(A.parseDOM=T.map(S=>tN(S,p)));const E=Pe(f,"renderHTML",g);return E&&(A.toDOM=S=>E({mark:S,HTMLAttributes:vE(S,p)})),[f.name,A]}));return new B2({topNode:a,nodes:u,marks:c})}function $A(n,e){return e.nodes[n]||e.marks[n]||null}function rN(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function IS(n,e){const t=Ju.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const zY=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,u)=>{var c,f;const p=((f=(c=i.type.spec).toText)===null||f===void 0?void 0:f.call(c,{node:i,pos:s,parent:a,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-s))}),t};function NS(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class H_{constructor(e){this.find=e.find,this.handler=e.handler}}const BY=(n,e)=>{if(NS(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function tg(n){var e;const{editor:t,from:r,to:i,text:s,rules:a,plugin:u}=n,{view:c}=t;if(c.composing)return!1;const f=c.state.doc.resolve(r);if(f.parent.type.spec.code||!((e=f.nodeBefore||f.nodeAfter)===null||e===void 0)&&e.marks.find(_=>_.type.spec.code))return!1;let p=!1;const g=zY(f)+s;return a.forEach(_=>{if(p)return;const A=BY(g,_.find);if(!A)return;const T=c.state.tr,E=B_({state:c.state,transaction:T}),S={from:r-(A[0].length-s.length),to:i},{commands:k,chain:L,can:B}=new j_({editor:t,state:E});_.handler({state:E,range:S,match:A,commands:k,chain:L,can:B})===null||!T.steps.length||(T.setMeta(u,{transform:T,from:r,to:i,text:s}),c.dispatch(T),p=!0)}),p}function jY(n){const{editor:e,rules:t}=n,r=new Jn({state:{init(){return null},apply(i,s,a){const u=i.getMeta(r);if(u)return u;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:p}=c;typeof p=="string"?p=p:p=IS(_e.from(p),a.schema);const{from:g}=c,_=g+p.length;tg({editor:e,from:g,to:_,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,u){return tg({editor:e,from:s,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&tg({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?tg({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function FY(n){return Object.prototype.toString.call(n).slice(8,-1)}function ng(n){return FY(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function q_(n,e){const t={...n};return ng(n)&&ng(e)&&Object.keys(e).forEach(r=>{ng(e[r])&&ng(n[r])?t[r]=q_(n[r],e[r]):t[r]=e[r]}),t}class go{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(Pe(this,"addOptions",{name:this.name}))),this.storage=at(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new go(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>q_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new go(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(Pe(t,"addOptions",{name:t.name})),t.storage=at(Pe(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(f=>(f==null?void 0:f.type.name)===t.name))return!1;const c=a.find(f=>(f==null?void 0:f.type.name)===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function HY(n){return typeof n=="number"}class qY{constructor(e){this.find=e.find,this.handler=e.handler}}const $Y=(n,e,t)=>{if(NS(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function GY(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:a,dropEvent:u}=n,{commands:c,chain:f,can:p}=new j_({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,i,(A,T)=>{if(!A.isTextblock||A.type.spec.code)return;const E=Math.max(r,T),S=Math.min(i,T+A.content.size),k=A.textBetween(E-T,S-T,void 0,"￼");$Y(k,s.find,a).forEach(B=>{if(B.index===void 0)return;const q=E+B.index+1,V=q+B[0].length,M={from:t.tr.mapping.map(q),to:t.tr.mapping.map(V)},O=s.handler({state:t,range:M,match:B,commands:c,chain:f,can:p,pasteEvent:a,dropEvent:u});g.push(O)})}),g.every(A=>A!==null)}let rg=null;const KY=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function WY(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const c=({state:p,from:g,to:_,rule:A,pasteEvt:T})=>{const E=p.tr,S=B_({state:p,transaction:E});if(!(!GY({editor:e,state:S,from:Math.max(g-1,0),to:_.b-1,rule:A,pasteEvent:T,dropEvent:u})||!E.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(p=>new Jn({view(g){const _=T=>{var E;r=!((E=g.dom.parentElement)===null||E===void 0)&&E.contains(T.target)?g.dom.parentElement:null,r&&(rg=e)},A=()=>{rg&&(rg=null)};return window.addEventListener("dragstart",_),window.addEventListener("dragend",A),{destroy(){window.removeEventListener("dragstart",_),window.removeEventListener("dragend",A)}}},props:{handleDOMEvents:{drop:(g,_)=>{if(s=r===g.dom.parentElement,u=_,!s){const A=rg;A&&setTimeout(()=>{const T=A.state.selection;T&&A.commands.deleteRange({from:T.from,to:T.to})},10)}return!1},paste:(g,_)=>{var A;const T=(A=_.clipboardData)===null||A===void 0?void 0:A.getData("text/html");return a=_,i=!!(T!=null&&T.includes("data-pm-slice")),!1}}},appendTransaction:(g,_,A)=>{const T=g[0],E=T.getMeta("uiEvent")==="paste"&&!i,S=T.getMeta("uiEvent")==="drop"&&!s,k=T.getMeta("applyPasteRules"),L=!!k;if(!E&&!S&&!L)return;if(L){let{text:V}=k;typeof V=="string"?V=V:V=IS(_e.from(V),A.schema);const{from:M}=k,O=M+V.length,I=KY(V);return c({rule:p,state:A,from:M,to:{b:O},pasteEvt:I})}const B=_.doc.content.findDiffStart(A.doc.content),q=_.doc.content.findDiffEnd(A.doc.content);if(!(!HY(B)||!q||B===q.b))return c({rule:p,state:A,from:B,to:q,pasteEvt:a})}}))}function YY(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Xc{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Xc.resolve(e),this.schema=UY(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Xc.sort(Xc.flatten(e)),r=YY(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=Pe(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=Pe(r,"priority")||100,a=Pe(i,"priority")||100;return s>a?-1:s<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:$A(t.name,this.schema)},i=Pe(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Xc.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(a=>{const u={name:a.name,options:a.options,storage:a.storage,editor:e,type:$A(a.name,this.schema)},c=[],f=Pe(a,"addKeyboardShortcuts",u);let p={};if(a.type==="mark"&&Pe(a,"exitable",u)&&(p.ArrowRight=()=>go.handleExit({editor:e,mark:a})),f){const E=Object.fromEntries(Object.entries(f()).map(([S,k])=>[S,()=>k({editor:e})]));p={...p,...E}}const g=pY(p);c.push(g);const _=Pe(a,"addInputRules",u);rN(a,e.options.enableInputRules)&&_&&r.push(..._());const A=Pe(a,"addPasteRules",u);rN(a,e.options.enablePasteRules)&&A&&i.push(...A());const T=Pe(a,"addProseMirrorPlugins",u);if(T){const E=T();c.push(...E)}return c}).flat();return[jY({editor:e,rules:r}),...WY({editor:e,rules:i}),...s]}get attributes(){return XL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=F_(this.extensions);return Object.fromEntries(t.filter(r=>!!Pe(r,"addNodeView")).map(r=>{const i=this.attributes.filter(c=>c.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Qn(r.name,this.schema)},a=Pe(r,"addNodeView",s);if(!a)return[];const u=(c,f,p,g,_)=>{const A=vE(c,i);return a()({node:c,view:f,getPos:p,decorations:g,innerDecorations:_,editor:e,extension:r,HTMLAttributes:A})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:$A(e.name,this.schema)};e.type==="mark"&&(!((t=at(Pe(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=Pe(e,"onBeforeCreate",r),s=Pe(e,"onCreate",r),a=Pe(e,"onUpdate",r),u=Pe(e,"onSelectionUpdate",r),c=Pe(e,"onTransaction",r),f=Pe(e,"onFocus",r),p=Pe(e,"onBlur",r),g=Pe(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),c&&this.editor.on("transaction",c),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}}class Nr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(Pe(this,"addOptions",{name:this.name}))),this.storage=at(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Nr(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>q_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Nr({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(Pe(t,"addOptions",{name:t.name})),t.storage=at(Pe(t,"addStorage",{name:t.name,options:t.options})),t}}function ZL(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,i,(c,f,p,g)=>{var _;c.isBlock&&f>r&&(u+=s);const A=a==null?void 0:a[c.type.name];if(A)return p&&(u+=A({node:c,pos:f,parent:p,index:g,range:e})),!1;c.isText&&(u+=(_=c==null?void 0:c.text)===null||_===void 0?void 0:_.slice(Math.max(r,f)-f,i-f))}),u}function eV(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const QY=Nr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Jn({key:new fi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),c=eV(t);return ZL(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),XY=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),JY=(n=!1)=>({commands:e})=>e.setContent("",n),ZY=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(u,c)=>{if(u.type.isText)return;const{doc:f,mapping:p}=e,g=f.resolve(p.map(c)),_=f.resolve(p.map(c+u.nodeSize)),A=g.blockRange(_);if(!A)return;const T=Bh(A);if(u.type.isTextblock){const{defaultType:E}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(A.start,E)}(T||T===0)&&e.lift(A,T)})}),!0},eQ=n=>e=>n(e),tQ=()=>({state:n,dispatch:e})=>KL(n,e),nQ=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new Je(r.doc.resolve(a-1))),!0},rQ=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),c=i.after(s);n.delete(u,c).scrollIntoView()}return!0}return!1},iQ=n=>({tr:e,state:t,dispatch:r})=>{const i=Qn(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const c=s.before(a),f=s.after(a);e.delete(c,f).scrollIntoView()}return!0}return!1},sQ=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},oQ=()=>({state:n,dispatch:e})=>wS(n,e),aQ=()=>({commands:n})=>n.keyboardShortcut("Enter"),lQ=()=>({state:n,dispatch:e})=>AY(n,e);function wy(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:NS(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function tV(n,e,t={}){return n.find(r=>r.type===e&&wy(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function iN(n,e,t={}){return!!tV(n,e,t)}function OS(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!tV([...i.node.marks],e,t)))return;let a=i.index,u=n.start()+i.offset,c=a+1,f=u+i.node.nodeSize;for(;a>0&&iN([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;c<n.parent.childCount&&iN([...n.parent.child(c).marks],e,t);)f+=n.parent.child(c).nodeSize,c+=1;return{from:u,to:f}}function Nl(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const uQ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Nl(n,r.schema),{doc:a,selection:u}=t,{$from:c,from:f,to:p}=u;if(i){const g=OS(c,s,e);if(g&&g.from<=f&&g.to>=p){const _=Je.create(a,g.from,g.to);t.setSelection(_)}}return!0},cQ=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function nV(n){return n instanceof Je}function Tu(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function rV(n,e=null){if(!e)return null;const t=rt.atStart(n),r=rt.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?Je.create(n,Tu(0,i,s),Tu(n.content.size,i,s)):Je.create(n,Tu(e,i,s),Tu(e,i,s))}function hQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function MS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const fQ=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(MS()||hQ())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!nV(t.state.selection))return a(),!0;const u=rV(i.doc,n)||t.state.selection,c=t.state.selection.eq(u);return s&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},dQ=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),pQ=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),iV=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&iV(r)}return n};function ig(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return iV(t)}function Ry(n,e,t){if(n instanceof ol||n instanceof _e)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return _e.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),Ry("",e,t)}if(i){if(t.errorOnInvalidContent){let a=!1,u="";const c=new B2({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,u=typeof f=="string"?f:f.outerHTML,null)}]}})});if(t.slice?al.fromSchema(c).parseSlice(ig(n),t.parseOptions):al.fromSchema(c).parse(ig(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=al.fromSchema(e);return t.slice?s.parseSlice(ig(n),t.parseOptions).content:s.parse(ig(n),t.parseOptions)}return Ry("",e,t)}function mQ(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Gn||i instanceof Kn))return;const s=n.mapping.maps[r];let a=0;s.forEach((u,c,f,p)=>{a===0&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const gQ=n=>!("type"in n),yQ=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;try{u=Ry(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck})}catch(T){return s.emit("contentError",{editor:s,error:T,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:c,to:f}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},p=!0,g=!0;if((gQ(u)?u:[u]).forEach(T=>{T.check(),p=p?T.isText&&T.marks.length===0:!1,g=g?T.isBlock:!1}),c===f&&g){const{parent:T}=r.doc.resolve(c);T.isTextblock&&!T.type.spec.code&&!T.childCount&&(c-=1,f+=1)}let A;if(p){if(Array.isArray(e))A=e.map(T=>T.text||"").join("");else if(e instanceof _e){let T="";e.forEach(E=>{E.text&&(T+=E.text)}),A=T}else typeof e=="object"&&e&&e.text?A=e.text:A=e;r.insertText(A,c,f)}else A=u,r.replaceWith(c,f,A);t.updateSelection&&mQ(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:A}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:A})}return!0},_Q=()=>({state:n,dispatch:e})=>yY(n,e),vQ=()=>({state:n,dispatch:e})=>_Y(n,e),AQ=()=>({state:n,dispatch:e})=>BL(n,e),TQ=()=>({state:n,dispatch:e})=>qL(n,e),EQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=D_(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},bQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=D_(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},SQ=()=>({state:n,dispatch:e})=>mY(n,e),wQ=()=>({state:n,dispatch:e})=>gY(n,e);function sV(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function RQ(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u+=1){const c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))MS()||sV()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const CQ=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=RQ(n).split(/-(?!$)/),a=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",f=>f(t,u))});return c==null||c.steps.forEach(f=>{const p=f.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function ip(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,a=e?Qn(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(g,_)=>{if(g.isText)return;const A=Math.max(r,_),T=Math.min(i,_+g.nodeSize);u.push({node:g,from:A,to:T})});const c=i-r,f=u.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>wy(g.node.attrs,t,{strict:!1}));return s?!!f.length:f.reduce((g,_)=>g+_.to-_.from,0)>=c}const xQ=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return ip(t,i,e)?vY(t,r):!1},kQ=()=>({state:n,dispatch:e})=>WL(n,e),IQ=n=>({state:e,dispatch:t})=>{const r=Qn(n,e.schema);return NY(r)(e,t)},NQ=()=>({state:n,dispatch:e})=>GL(n,e);function $_(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function sN(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const OQ=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=$_(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Qn(n,r.schema)),u==="mark"&&(a=Nl(n,r.schema)),i&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(f,p)=>{s&&s===f.type&&t.setNodeMarkup(p,void 0,sN(f.attrs,e)),a&&f.marks.length&&f.marks.forEach(g=>{a===g.type&&t.addMark(p,p+f.nodeSize,a.create(sN(g.attrs,e)))})})}),!0):!1},MQ=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),DQ=()=>({tr:n,dispatch:e})=>{if(e){const t=new Li(n.doc);n.setSelection(t)}return!0},PQ=()=>({state:n,dispatch:e})=>FL(n,e),LQ=()=>({state:n,dispatch:e})=>$L(n,e),VQ=()=>({state:n,dispatch:e})=>bY(n,e),UQ=()=>({state:n,dispatch:e})=>RY(n,e),zQ=()=>({state:n,dispatch:e})=>wY(n,e);function AE(n,e,t={},r={}){return Ry(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const BQ=(n,e=!1,t={},r={})=>({editor:i,tr:s,dispatch:a,commands:u})=>{var c,f;const{doc:p}=s;if(t.preserveWhitespace!=="full"){const g=AE(n,i.schema,t,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck});return a&&s.replaceWith(0,p.content.size,g).setMeta("preventUpdate",!e),!0}return a&&s.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(f=r.errorOnInvalidContent)!==null&&f!==void 0?f:i.options.enableContentCheck})};function oV(n,e){const t=Nl(e,n.schema),{from:r,to:i,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const u=a.find(c=>c.type.name===t.name);return u?{...u.attrs}:{}}function jQ(n,e){const t=new nL(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function FQ(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function HQ(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function qQ(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function DS(n){return e=>qQ(e.$from,n)}function $Q(n,e){const t={from:0,to:n.content.size};return ZL(n,t,e)}function GQ(n,e){const t=Qn(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,u=>{s.push(u)});const a=s.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function aV(n,e){const t=$_(typeof e=="string"?e:e.name,n.schema);return t==="node"?GQ(n,e):t==="mark"?oV(n,e):{}}function KQ(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function WQ(n){const e=KQ(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function YQ(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((u,c)=>{a.push({from:u,to:c})});else{const{from:u,to:c}=t[s];if(u===void 0||c===void 0)return;a.push({from:u,to:c})}a.forEach(({from:u,to:c})=>{const f=e.slice(s).map(u,-1),p=e.slice(s).map(c),g=e.invert().map(f,-1),_=e.invert().map(p);r.push({oldRange:{from:g,to:_},newRange:{from:f,to:p}})})}),WQ(r)}function PS(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),a=OS(s,i.type);a&&r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}function Ng(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function TE(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Nl(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>wy(g.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:g,$to:_})=>{const A=g.pos,T=_.pos;n.doc.nodesBetween(A,T,(E,S)=>{if(!E.isText&&!E.marks.length)return;const k=Math.max(A,S),L=Math.min(T,S+E.nodeSize),B=L-k;a+=B,u.push(...E.marks.map(q=>({mark:q,from:k,to:L})))})}),a===0)return!1;const c=u.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>wy(g.mark.attrs,t,{strict:!1})).reduce((g,_)=>g+_.to-_.from,0),f=u.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,_)=>g+_.to-_.from,0);return(c>0?c+f:c)>=a}function QQ(n,e,t={}){if(!e)return ip(n,null,t)||TE(n,null,t);const r=$_(e,n.schema);return r==="node"?ip(n,e,t):r==="mark"?TE(n,e,t):!1}function oN(n,e){const{nodeExtensions:t}=F_(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=at(Pe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function G_(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(G_(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function XQ(n){return n instanceof qe}function JQ(n,e,t){var r;const{selection:i}=e;let s=null;if(nV(i)&&(s=i.$cursor),s){const u=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(u)||!u.some(c=>c.type.excludes(t))}const{ranges:a}=i;return a.some(({$from:u,$to:c})=>{let f=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,c.pos,(p,g,_)=>{if(f)return!1;if(p.isInline){const A=!_||_.type.allowsMarkType(t),T=!!t.isInSet(p.marks)||!p.marks.some(E=>E.type.excludes(t));f=A&&T}return!f}),f})}const ZQ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:a,ranges:u}=s,c=Nl(n,r.schema);if(i)if(a){const f=oV(r,c);t.addStoredMark(c.create({...f,...e}))}else u.forEach(f=>{const p=f.$from.pos,g=f.$to.pos;r.doc.nodesBetween(p,g,(_,A)=>{const T=Math.max(A,p),E=Math.min(A+_.nodeSize,g);_.marks.find(k=>k.type===c)?_.marks.forEach(k=>{c===k.type&&t.addMark(T,E,c.create({...k.attrs,...e}))}):t.addMark(T,E,c.create(e))})});return JQ(r,t,c)},eX=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),tX=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Qn(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>eN(s,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>eN(s,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},nX=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Tu(n,0,r.content.size),s=qe.create(r,i);e.setSelection(s)}return!0},rX=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,a=Je.atStart(r).from,u=Je.atEnd(r).to,c=Tu(i,a,u),f=Tu(s,a,u),p=Je.create(r,c,f);e.setSelection(p)}return!0},iX=n=>({state:e,dispatch:t})=>{const r=Qn(n,e.schema);return DY(r)(e,t)};function aN(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const sX=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:u,$to:c}=s,f=i.extensionManager.attributes,p=Ng(f,u.node().type.name,u.node().attrs);if(s instanceof qe&&s.node.isBlock)return!u.parentOffset||!Qo(a,u.pos)?!1:(r&&(n&&aN(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=c.parentOffset===c.parent.content.size,_=u.depth===0?void 0:FQ(u.node(-1).contentMatchAt(u.indexAfter(-1)));let A=g&&_?[{type:_,attrs:p}]:void 0,T=Qo(e.doc,e.mapping.map(u.pos),1,A);if(!A&&!T&&Qo(e.doc,e.mapping.map(u.pos),1,_?[{type:_}]:void 0)&&(T=!0,A=_?[{type:_,attrs:p}]:void 0),r){if(T&&(s instanceof Je&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,A),_&&!g&&!u.parentOffset&&u.parent.type!==_)){const E=e.mapping.map(u.before()),S=e.doc.resolve(E);u.node(-1).canReplaceWith(S.index(),S.index()+1,_)&&e.setNodeMarkup(e.mapping.map(u.before()),_)}n&&aN(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return T},oX=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var a;const u=Qn(n,r.schema),{$from:c,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||c.depth<2||!c.sameParent(f))return!1;const g=c.node(-1);if(g.type!==u)return!1;const _=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let k=_e.empty;const L=c.index(-1)?1:c.index(-2)?2:3;for(let I=c.depth-L;I>=c.depth-3;I-=1)k=_e.from(c.node(I).copy(k));const B=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,q={...Ng(_,c.node().type.name,c.node().attrs),...e},V=((a=u.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(q))||void 0;k=k.append(_e.from(u.createAndFill(null,V)||void 0));const M=c.before(c.depth-(L-1));t.replace(M,c.after(-B),new Ie(k,4-L,0));let O=-1;t.doc.nodesBetween(M,t.doc.content.size,(I,x)=>{if(O>-1)return!1;I.isTextblock&&I.content.size===0&&(O=x+1)}),O>-1&&t.setSelection(Je.near(t.doc.resolve(O))),t.scrollIntoView()}return!0}const A=f.pos===c.end()?g.contentMatchAt(0).defaultType:null,T={...Ng(_,g.type.name,g.attrs),...e},E={...Ng(_,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,f.pos);const S=A?[{type:u,attrs:T},{type:A,attrs:E}]:[{type:u,attrs:T}];if(!Qo(t.doc,c.pos,2))return!1;if(i){const{selection:k,storedMarks:L}=r,{splittableMarks:B}=s.extensionManager,q=L||k.$to.parentOffset&&k.$from.marks();if(t.split(c.pos,2,S).scrollIntoView(),!q||!i)return!0;const V=q.filter(M=>B.includes(M.type.name));t.ensureMarks(V)}return!0},GA=(n,e)=>{const t=DS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&kl(n.doc,t.pos)&&n.join(t.pos),!0},KA=(n,e)=>{const t=DS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&kl(n.doc,r)&&n.join(r),!0},aX=(n,e,t,r={})=>({editor:i,tr:s,state:a,dispatch:u,chain:c,commands:f,can:p})=>{const{extensions:g,splittableMarks:_}=i.extensionManager,A=Qn(n,a.schema),T=Qn(e,a.schema),{selection:E,storedMarks:S}=a,{$from:k,$to:L}=E,B=k.blockRange(L),q=S||E.$to.parentOffset&&E.$from.marks();if(!B)return!1;const V=DS(M=>oN(M.type.name,g))(E);if(B.depth>=1&&V&&B.depth-V.depth<=1){if(V.node.type===A)return f.liftListItem(T);if(oN(V.node.type.name,g)&&A.validContent(V.node.content)&&u)return c().command(()=>(s.setNodeMarkup(V.pos,A),!0)).command(()=>GA(s,A)).command(()=>KA(s,A)).run()}return!t||!q||!u?c().command(()=>p().wrapInList(A,r)?!0:f.clearNodes()).wrapInList(A,r).command(()=>GA(s,A)).command(()=>KA(s,A)).run():c().command(()=>{const M=p().wrapInList(A,r),O=q.filter(I=>_.includes(I.type.name));return s.ensureMarks(O),M?!0:f.clearNodes()}).wrapInList(A,r).command(()=>GA(s,A)).command(()=>KA(s,A)).run()},lX=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,a=Nl(n,r.schema);return TE(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},uX=(n,e,t={})=>({state:r,commands:i})=>{const s=Qn(n,r.schema),a=Qn(e,r.schema),u=ip(r,s,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),u?i.setNode(a,c):i.setNode(s,{...c,...t})},cX=(n,e={})=>({state:t,commands:r})=>{const i=Qn(n,t.schema);return ip(t,i,e)?r.lift(i):r.wrapIn(i,e)},hX=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const a=n.tr,u=s.transform;for(let c=u.steps.length-1;c>=0;c-=1)a.step(u.steps[c].invert(u.docs[c]));if(s.text){const c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,c))}else a.delete(s.from,s.to)}return!0}}return!1},fX=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},dX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,c=Nl(n,r.schema),{$from:f,empty:p,ranges:g}=u;if(!i)return!0;if(p&&a){let{from:_,to:A}=u;const T=(s=f.marks().find(S=>S.type===c))===null||s===void 0?void 0:s.attrs,E=OS(f,c,T);E&&(_=E.from,A=E.to),t.removeMark(_,A,c)}else g.forEach(_=>{t.removeMark(_.$from.pos,_.$to.pos,c)});return t.removeStoredMark(c),!0},pX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=$_(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Qn(n,r.schema)),u==="mark"&&(a=Nl(n,r.schema)),i&&t.selection.ranges.forEach(c=>{const f=c.$from.pos,p=c.$to.pos;let g,_,A,T;t.selection.empty?r.doc.nodesBetween(f,p,(E,S)=>{s&&s===E.type&&(A=Math.max(S,f),T=Math.min(S+E.nodeSize,p),g=S,_=E)}):r.doc.nodesBetween(f,p,(E,S)=>{S<f&&s&&s===E.type&&(A=Math.max(S,f),T=Math.min(S+E.nodeSize,p),g=S,_=E),S>=f&&S<=p&&(s&&s===E.type&&t.setNodeMarkup(S,void 0,{...E.attrs,...e}),a&&E.marks.length&&E.marks.forEach(k=>{if(a===k.type){const L=Math.max(S,f),B=Math.min(S+E.nodeSize,p);t.addMark(L,B,a.create({...k.attrs,...e}))}}))}),_&&(g!==void 0&&t.setNodeMarkup(g,void 0,{..._.attrs,...e}),a&&_.marks.length&&_.marks.forEach(E=>{a===E.type&&t.addMark(A,T,a.create({...E.attrs,...e}))}))}),!0):!1},mX=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return CY(i,e)(t,r)},gX=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return xY(i,e)(t,r)};var yX=Object.freeze({__proto__:null,blur:XY,clearContent:JY,clearNodes:ZY,command:eQ,createParagraphNear:tQ,cut:nQ,deleteCurrentNode:rQ,deleteNode:iQ,deleteRange:sQ,deleteSelection:oQ,enter:aQ,exitCode:lQ,extendMarkRange:uQ,first:cQ,focus:fQ,forEach:dQ,insertContent:pQ,insertContentAt:yQ,joinBackward:AQ,joinDown:vQ,joinForward:TQ,joinItemBackward:EQ,joinItemForward:bQ,joinTextblockBackward:SQ,joinTextblockForward:wQ,joinUp:_Q,keyboardShortcut:CQ,lift:xQ,liftEmptyBlock:kQ,liftListItem:IQ,newlineInCode:NQ,resetAttributes:OQ,scrollIntoView:MQ,selectAll:DQ,selectNodeBackward:PQ,selectNodeForward:LQ,selectParentNode:VQ,selectTextblockEnd:UQ,selectTextblockStart:zQ,setContent:BQ,setMark:ZQ,setMeta:eX,setNode:tX,setNodeSelection:nX,setTextSelection:rX,sinkListItem:iX,splitBlock:sX,splitListItem:oX,toggleList:aX,toggleMark:lX,toggleNode:uX,toggleWrap:cX,undoInputRule:hX,unsetAllMarks:fX,unsetMark:dX,updateAttributes:pX,wrapIn:mX,wrapInList:gX});const _X=Nr.create({name:"commands",addCommands(){return{...yX}}}),vX=Nr.create({name:"drop",addProseMirrorPlugins(){return[new Jn({key:new fi("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),AX=Nr.create({name:"editable",addProseMirrorPlugins(){return[new Jn({key:new fi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),TX=new fi("focusEvents"),EX=Nr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Jn({key:TX,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),bX=Nr.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:c,doc:f}=u,{empty:p,$anchor:g}=c,{pos:_,parent:A}=g,T=g.parent.isTextblock&&_>0?u.doc.resolve(_-1):g,E=T.parent.type.spec.isolating,S=g.pos-g.parentOffset,k=E&&T.parent.childCount===1?S===g.pos:rt.atStart(f).from===_;return!p||!A.type.isTextblock||A.textContent.length||!k||k&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return MS()||sV()?s:i},addProseMirrorPlugins(){return[new Jn({key:new fi("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const r=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),i=n.some(E=>E.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:u}=e.selection,c=rt.atStart(e.doc).from,f=rt.atEnd(e.doc).to;if(s||!(a===c&&u===f)||!G_(t.doc))return;const _=t.tr,A=B_({state:t,transaction:_}),{commands:T}=new j_({editor:this.editor,state:A});if(T.clearNodes(),!!_.steps.length)return _}})]}}),SX=Nr.create({name:"paste",addProseMirrorPlugins(){return[new Jn({key:new fi("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),wX=Nr.create({name:"tabindex",addProseMirrorPlugins(){return[new Jn({key:new fi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class du{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new du(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new du(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new du(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=this.pos+r+(s?0:1),u=this.resolvedPos.doc.resolve(a);if(!i&&u.depth<=this.depth)return;const c=new du(u,this.editor,i,i?t:null);i&&(c.actualDepth=this.depth+1),e.push(new du(u,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const c=a[u];if(s[c]!==t[c])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(c=>t[c]===a.node.attrs[c])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const RX=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function CX(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class xX extends PY{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=CX(RX,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=JL(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=r.filter(u=>!u.key.startsWith(a))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[AX,QY.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),_X,EX,bX,wX,vX,SX].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Xc(i,this)}createCommandManager(){this.commandManager=new j_({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=AE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=AE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=rV(t,this.options.autofocus);this.view=new iY(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Qc.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return aV(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return QQ(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return IS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return $Q(this.state.doc,{blockSeparator:t,textSerializers:{...eV(this.schema),...r}})}get isEmpty(){return G_(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new du(t,this)}get $doc(){return this.$pos(0)}}function kh(n){return new H_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];if(a){const c=u.search(/\S/),f=t.from+u.indexOf(a),p=f+a.length;if(PS(t.from,t.to,e.doc).filter(A=>A.mark.type.excluded.find(E=>E===n.type&&E!==A.mark.type)).filter(A=>A.to>f).length)return null;p<t.to&&s.delete(p,t.to),f>t.from&&s.delete(t.from+c,f);const _=t.from+c+a.length;s.addMark(t.from+c,_,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function kX(n){return new H_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let u=t.to;const c=n.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=a+f;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,a+r[0].length-1),s.replaceWith(p,u,c)}else if(r[0]){const f=n.type.isInline?a:a-1;s.insert(f,n.type.create(i)).delete(s.mapping.map(a),s.mapping.map(u))}s.scrollIntoView()}})}function EE(n){return new H_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=at(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function sp(n){return new H_({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=at(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),c=a.doc.resolve(t.from).blockRange(),f=c&&pS(c,n.type,s);if(!f)return null;if(a.wrap(c,f),n.keepMarks&&n.editor){const{selection:g,storedMarks:_}=e,{splittableMarks:A}=n.editor.extensionManager,T=_||g.$to.parentOffset&&g.$from.marks();if(T){const E=T.filter(S=>A.includes(S.type.name));a.ensureMarks(E)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(g,s).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&kl(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)}})}class hi{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(Pe(this,"addOptions",{name:this.name}))),this.storage=at(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new hi(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>q_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new hi(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(Pe(t,"addOptions",{name:t.name})),t.storage=at(Pe(t,"addStorage",{name:t.name,options:t.options})),t}}function $u(n){return new qY({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=at(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,u=r[r.length-1],c=r[0];let f=t.to;if(u){const p=c.search(/\S/),g=t.from+c.indexOf(u),_=g+u.length;if(PS(t.from,t.to,e.doc).filter(T=>T.mark.type.excluded.find(S=>S===n.type&&S!==T.mark.type)).filter(T=>T.to>g).length)return null;_<t.to&&a.delete(_,t.to),g>t.from&&a.delete(t.from+p,g),f=t.from+p+u.length,a.addMark(t.from+p,f,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}function IX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lV={exports:{}},WA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN;function NX(){if(lN)return WA;lN=1;var n=Sr;function e(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function u(g,_){var A=_(),T=r({inst:{value:A,getSnapshot:_}}),E=T[0].inst,S=T[1];return s(function(){E.value=A,E.getSnapshot=_,c(E)&&S({inst:E})},[g,A,_]),i(function(){return c(E)&&S({inst:E}),g(function(){c(E)&&S({inst:E})})},[g]),a(A),A}function c(g){var _=g.getSnapshot;g=g.value;try{var A=_();return!t(g,A)}catch{return!0}}function f(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return WA.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,WA}lV.exports=NX();var LS=lV.exports;const OX=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},MX=({contentComponent:n})=>{const e=LS.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Sr.createElement(Sr.Fragment,null,Object.values(e))};function DX(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:gB.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class PX extends Sr.Component{constructor(e){var t;super(e),this.editorContentRef=Sr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=DX(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Sr.createElement(Sr.Fragment,null,Sr.createElement("div",{ref:OX(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Sr.createElement(MX,{contentComponent:e.contentComponent}))}}const LX=G.forwardRef((n,e)=>{const t=Sr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Sr.createElement(PX,{key:t,innerRef:e,...n})}),VX=Sr.memo(LX);var UX=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},zX=IX(UX),uV={exports:{}},YA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN;function BX(){if(uN)return YA;uN=1;var n=Sr,e=LS;function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,c=n.useDebugValue;return YA.useSyncExternalStoreWithSelector=function(f,p,g,_,A){var T=s(null);if(T.current===null){var E={hasValue:!1,value:null};T.current=E}else E=T.current;T=u(function(){function k(M){if(!L){if(L=!0,B=M,M=_(M),A!==void 0&&E.hasValue){var O=E.value;if(A(O,M))return q=O}return q=M}if(O=q,r(B,M))return O;var I=_(M);return A!==void 0&&A(O,I)?O:(B=M,q=I)}var L=!1,B,q,V=g===void 0?null:g;return[function(){return k(p())},V===null?void 0:function(){return k(V())}]},[p,g,_,A]);var S=i(f,T[0],T[1]);return a(function(){E.hasValue=!0,E.value=S},[S]),c(S),S},YA}uV.exports=BX();var jX=uV.exports;const FX=typeof window<"u"?G.useLayoutEffect:G.useEffect;class HX{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function qX(n){var e;const[t]=G.useState(()=>new HX(n.editor)),r=jX.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:zX);return FX(()=>t.watch(n.editor),[n.editor,t]),G.useDebugValue(r),r}const $X=!1,bE=typeof window>"u",GX=bE||!!(typeof window<"u"&&window.next);class VS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?bE||GX?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new xX(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=t.extensions)===null||a===void 0?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?VS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function KX(n={},e=[]){const t=G.useRef(n);t.current=n;const[r]=G.useState(()=>new VS(t)),i=LS.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return G.useDebugValue(i),G.useEffect(r.onRender(e)),qX({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&s===0?0:s+1}),i}const WX=G.createContext({editor:null});WX.Consumer;const YX=G.createContext({onDragStart:void 0}),QX=()=>G.useContext(YX);Sr.forwardRef((n,e)=>{const{onDragStart:t}=QX(),r=n.as||"div";return Sr.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const XX=/^\s*>\s$/,JX=hi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[sp({find:XX,type:this.type})]}}),ZX=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,eJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,tJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,nJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,rJ=go.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[kh({find:ZX,type:this.type}),kh({find:tJ,type:this.type})]},addPasteRules(){return[$u({find:eJ,type:this.type}),$u({find:nJ,type:this.type})]}}),iJ="listItem",cN="textStyle",hN=/^\s*([-+*])\s$/,sJ=hi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(iJ,this.editor.getAttributes(cN)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=sp({find:hN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=sp({find:hN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(cN),editor:this.editor})),[n]}}),oJ=/(^|[^`])`([^`]+)`(?!`)/,aJ=/(^|[^`])`([^`]+)`(?!`)/g,lJ=go.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[kh({find:oJ,type:this.type})]},addPasteRules(){return[$u({find:aJ,type:this.type})]}}),uJ=/^```([a-z]+)?[\s\n]$/,cJ=/^~~~([a-z]+)?[\s\n]$/,hJ=hi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Xn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:f})=>(f.setSelection(rt.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[EE({find:uJ,type:this.type,getAttributes:n=>({language:n[1]})}),EE({find:cJ,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Jn({key:new fi("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:a,schema:u}=n.state,c=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(Je.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),fJ=hi.create({name:"doc",topNode:!0,content:"block+"});function dJ(n={}){return new Jn({view(e){return new pJ(e,n)}})}class pJ{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(t){let g=e.nodeBefore,_=e.nodeAfter;if(g||_){let A=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(A){let T=A.getBoundingClientRect(),E=g?T.bottom:T.top;g&&_&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*u;r={left:T.left,right:T.right,top:E-S,bottom:E+S}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),_=this.width/2*a;r={left:g.left-_,right:g.left+_,top:g.top,bottom:g.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let f,p;if(!c||c==document.body&&getComputedStyle(c).position=="static")f=-pageXOffset,p=-pageYOffset;else{let g=c.getBoundingClientRect(),_=g.width/c.offsetWidth,A=g.height/c.offsetHeight;f=g.left-c.scrollLeft*_,p=g.top-c.scrollTop*A}this.element.style.left=(r.left-f)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=X2(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const mJ=Nr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dJ(this.options)]}});class cn extends rt{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return cn.valid(r)?new cn(r):rt.near(r)}content(){return Ie.empty}eq(e){return e instanceof cn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cn(e.resolve(t.pos))}getBookmark(){return new US(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!gJ(e)||!yJ(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&cn.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){s=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let c=e.doc.resolve(i);if(cn.valid(c))return c}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!qe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let u=e.doc.resolve(i);if(cn.valid(u))return u}return null}}}cn.prototype.visible=!1;cn.findFrom=cn.findGapCursorFrom;rt.jsonID("gapcursor",cn);class US{constructor(e){this.pos=e}map(e){return new US(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return cn.valid(t)?new cn(t):rt.near(t)}}function gJ(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function yJ(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _J(){return new Jn({props:{decorations:EJ,createSelectionBetween(n,e,t){return e.pos==t.pos&&cn.valid(t)?new cn(t):null},handleClick:AJ,handleKeyDown:vJ,handleDOMEvents:{beforeinput:TJ}}})}const vJ=UL({ArrowLeft:sg("horiz",-1),ArrowRight:sg("horiz",1),ArrowUp:sg("vert",-1),ArrowDown:sg("vert",1)});function sg(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,u=e>0?a.$to:a.$from,c=a.empty;if(a instanceof Je){if(!s.endOfTextblock(t)||u.depth==0)return!1;c=!1,u=r.doc.resolve(e>0?u.after():u.before())}let f=cn.findGapCursorFrom(u,e,c);return f?(i&&i(r.tr.setSelection(new cn(f))),!0):!1}}function AJ(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!cn.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&qe.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new cn(r))),!0)}function TJ(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof cn))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=_e.empty;for(let a=r.length-1;a>=0;a--)i=_e.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new Ie(i,0,0));return s.setSelection(Je.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function EJ(n){if(!(n.selection instanceof cn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",kn.create(n.doc,[Mi.widget(n.selection.head,e,{key:"gapcursor"})])}const bJ=Nr.create({name:"gapCursor",addProseMirrorPlugins(){return[_J()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=at(Pe(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),SJ=hi.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Xn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&c&&a){const g=c.filter(_=>u.includes(_.type.name));f.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),wJ=hi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Xn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>EE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Cy=200,Wn=function(){};Wn.prototype.append=function(e){return e.length?(e=Wn.from(e),!this.length&&e||e.length<Cy&&this.leafAppend(e)||this.length<Cy&&e.leafPrepend(this)||this.appendInner(e)):this};Wn.prototype.prepend=function(e){return e.length?Wn.from(e).append(this):this};Wn.prototype.appendInner=function(e){return new RJ(this,e)};Wn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Wn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Wn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Wn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Wn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};Wn.from=function(e){return e instanceof Wn?e:e&&e.length?new cV(e):Wn.empty};var cV=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,u){for(var c=s;c<a;c++)if(i(this.values[c],u+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,u){for(var c=s-1;c>=a;c--)if(i(this.values[c],u+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Cy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Cy)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Wn);Wn.empty=new cV([]);var RJ=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),a)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,a+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Wn);const CJ=500;class bs{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,u,c,f=[],p=[];return this.items.forEach((g,_)=>{if(!g.step){i||(i=this.remapping(r,_+1),s=i.maps.length),s--,p.push(g);return}if(i){p.push(new Ws(g.map));let A=g.step.map(i.slice(s)),T;A&&a.maybeStep(A).doc&&(T=a.mapping.maps[a.mapping.maps.length-1],f.push(new Ws(T,void 0,void 0,f.length+p.length))),s--,T&&i.appendMap(T,s)}else a.maybeStep(g.step);if(g.selection)return u=i?g.selection.map(i.slice(s)):g.selection,c=new bs(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:u}}addTransform(e,t,r,i){let s=[],a=this.eventCount,u=this.items,c=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),_=new Ws(e.mapping.maps[p],g,t),A;(A=c&&c.merge(_))&&(_=A,p?s.pop():u=u.slice(0,u.length-1)),s.push(_),t&&(a++,t=void 0),i||(c=_)}let f=a-r.depth;return f>kJ&&(u=xJ(u,f),a-=f),new bs(u.append(s),a)}remapping(e,t){let r=new Zd;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new bs(this.items.append(e.map(t=>new Ws(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(_=>{_.selection&&u--},i);let c=t;this.items.forEach(_=>{let A=s.getMirror(--c);if(A==null)return;a=Math.min(a,A);let T=s.maps[A];if(_.step){let E=e.steps[A].invert(e.docs[A]),S=_.selection&&_.selection.map(s.slice(c+1,A));S&&u++,r.push(new Ws(T,E,S))}else r.push(new Ws(T))},i);let f=[];for(let _=t;_<a;_++)f.push(new Ws(s.maps[_]));let p=this.items.slice(0,i).append(f).append(r),g=new bs(p,u);return g.emptyItemCount()>CJ&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(t.slice(r)),f=c&&c.getMap();if(r--,f&&t.appendMap(f,r),c){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let g=new Ws(f.invert(),c,p),_,A=i.length-1;(_=i.length&&i[A].merge(g))?i[A]=_:i.push(g)}}else a.map&&r--},this.items.length,0),new bs(Wn.from(i.reverse()),s)}}bs.empty=new bs(Wn.empty,0);function xJ(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Ws{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ws(t.getMap().invert(),t,this.selection)}}}class La{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const kJ=20;function IJ(n,e,t,r){let i=t.getMeta(Ou),s;if(i)return i.historyState;t.getMeta(MJ)&&(n=new La(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Ou))return a.getMeta(Ou).redo?new La(n.done.addTransform(t,void 0,r,Og(e)),n.undone,fN(t.mapping.maps),n.prevTime,n.prevComposition):new La(n.done,n.undone.addTransform(t,void 0,r,Og(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),c=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!NJ(t,n.prevRanges)),f=a?QA(n.prevRanges,t.mapping):fN(t.mapping.maps);return new La(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,Og(e)),bs.empty,f,t.time,u??n.prevComposition)}else return(s=t.getMeta("rebased"))?new La(n.done.rebased(t,s),n.undone.rebased(t,s),QA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new La(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),QA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function NJ(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function fN(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function QA(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function OJ(n,e,t){let r=Og(e),i=Ou.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),u=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new La(t?u:s.remaining,t?s.remaining:u,null,0,-1);return s.transform.setSelection(a).setMeta(Ou,{redo:t,historyState:c})}let XA=!1,dN=null;function Og(n){let e=n.plugins;if(dN!=e){XA=!1,dN=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){XA=!0;break}}return XA}const Ou=new fi("history"),MJ=new fi("closeHistory");function DJ(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Jn({key:Ou,state:{init(){return new La(bs.empty,bs.empty,null,0,-1)},apply(e,t,r){return IJ(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?fV:r=="historyRedo"?dV:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function hV(n,e){return(t,r)=>{let i=Ou.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=OJ(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const fV=hV(!1,!0),dV=hV(!0,!0),PJ=Nr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>fV(n,e),redo:()=>({state:n,dispatch:e})=>dV(n,e)}},addProseMirrorPlugins(){return[DJ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),LJ=hi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Xn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):XQ(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:a,dispatch:u})=>{var c;if(u){const{$to:f}=a.selection,p=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?a.setSelection(Je.create(a.doc,f.pos+1)):f.nodeAfter.isBlock?a.setSelection(qe.create(a.doc,f.pos)):a.setSelection(Je.create(a.doc,f.pos));else{const g=(c=f.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();g&&(a.insert(p,g),a.setSelection(Je.create(a.doc,p+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[kX({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),VJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,UJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,zJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,BJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,jJ=go.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[kh({find:VJ,type:this.type}),kh({find:zJ,type:this.type})]},addPasteRules(){return[$u({find:UJ,type:this.type}),$u({find:BJ,type:this.type})]}}),FJ=hi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Xn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),HJ="listItem",pN="textStyle",mN=/^(\d+)\.\s$/,qJ=hi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Xn(this.options.HTMLAttributes,t),0]:["ol",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(HJ,this.editor.getAttributes(pN)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=sp({find:mN,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=sp({find:mN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(pN)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),$J=hi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),GJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,KJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,WJ=go.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[kh({find:GJ,type:this.type})]},addPasteRules(){return[$u({find:KJ,type:this.type})]}}),YJ=hi.create({name:"text",group:"inline"}),QJ=Nr.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(rJ.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(JX.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(sJ.configure(this.options.bulletList)),this.options.code!==!1&&n.push(lJ.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(hJ.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(fJ.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(mJ.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(bJ.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(SJ.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(wJ.configure(this.options.heading)),this.options.history!==!1&&n.push(PJ.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(LJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(jJ.configure(this.options.italic)),this.options.listItem!==!1&&n.push(FJ.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(qJ.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push($J.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(WJ.configure(this.options.strike)),this.options.text!==!1&&n.push(YJ.configure(this.options.text)),n}}),XJ=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const s=t.getAttribute("style"),a=(i=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${a};${s}`)})},JJ=go.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&XJ(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),ZJ=Nr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Jn({key:new fi("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const s=this.editor.isEmpty;return n.descendants((a,u)=>{const c=r>=u&&r<=u+a.nodeSize,f=!a.isLeaf&&G_(a);if((c||!this.options.showOnlyCurrent)&&f){const p=[this.options.emptyNodeClass];s&&p.push(this.options.emptyEditorClass);const g=Mi.node(u,u+a.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:u,hasAnchor:c}):this.options.placeholder});i.push(g)}return this.options.includeChildren}),kn.create(n,i)}}})]}}),eZ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",tZ="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Ih=(n,e)=>{for(const t in e)n[t]=e[t];return n},SE="numeric",wE="ascii",RE="alpha",Cd="asciinumeric",dd="alphanumeric",CE="domain",pV="emoji",nZ="scheme",rZ="slashscheme",JA="whitespace";function iZ(n,e){return n in e||(e[n]=[]),e[n]}function Eu(n,e,t){e[SE]&&(e[Cd]=!0,e[dd]=!0),e[wE]&&(e[Cd]=!0,e[RE]=!0),e[Cd]&&(e[dd]=!0),e[RE]&&(e[dd]=!0),e[dd]&&(e[CE]=!0),e[pV]&&(e[CE]=!0);for(const r in e){const i=iZ(r,t);i.indexOf(n)<0&&i.push(n)}}function sZ(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function ti(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}ti.groups={};ti.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||ti.groups;let i;return e&&e.j?i=e:(i=new ti(e),t&&r&&Eu(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(n[a]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||ti.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let a,u=i.go(n);if(u?(a=new ti,Ih(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new ti,s){if(r)if(a.t&&typeof a.t=="string"){const c=Ih(sZ(a.t,r),t);Eu(s,c,r)}else t&&Eu(s,t,r);a.t=s}return i.j[n]=a,a}};const st=(n,e,t,r,i)=>n.ta(e,t,r,i),un=(n,e,t,r,i)=>n.tr(e,t,r,i),gN=(n,e,t,r,i)=>n.ts(e,t,r,i),Ee=(n,e,t,r,i)=>n.tt(e,t,r,i),jo="WORD",xE="UWORD",mV="ASCIINUMERICAL",gV="ALPHANUMERICAL",op="LOCALHOST",kE="TLD",IE="UTLD",Mg="SCHEME",Kc="SLASH_SCHEME",zS="NUM",NE="WS",BS="NL",xd="OPENBRACE",kd="CLOSEBRACE",xy="OPENBRACKET",ky="CLOSEBRACKET",Iy="OPENPAREN",Ny="CLOSEPAREN",Oy="OPENANGLEBRACKET",My="CLOSEANGLEBRACKET",Dy="FULLWIDTHLEFTPAREN",Py="FULLWIDTHRIGHTPAREN",Ly="LEFTCORNERBRACKET",Vy="RIGHTCORNERBRACKET",Uy="LEFTWHITECORNERBRACKET",zy="RIGHTWHITECORNERBRACKET",By="FULLWIDTHLESSTHAN",jy="FULLWIDTHGREATERTHAN",Fy="AMPERSAND",jS="APOSTROPHE",Hy="ASTERISK",Va="AT",qy="BACKSLASH",$y="BACKTICK",Gy="CARET",qa="COLON",FS="COMMA",Ky="DOLLAR",Ys="DOT",Wy="EQUALS",HS="EXCLAMATION",ns="HYPHEN",Id="PERCENT",Yy="PIPE",Qy="PLUS",Xy="POUND",Nd="QUERY",qS="QUOTE",yV="FULLWIDTHMIDDLEDOT",$S="SEMI",Qs="SLASH",Od="TILDE",Jy="UNDERSCORE",_V="EMOJI",Zy="SYM";var vV=Object.freeze({__proto__:null,WORD:jo,UWORD:xE,ASCIINUMERICAL:mV,ALPHANUMERICAL:gV,LOCALHOST:op,TLD:kE,UTLD:IE,SCHEME:Mg,SLASH_SCHEME:Kc,NUM:zS,WS:NE,NL:BS,OPENBRACE:xd,CLOSEBRACE:kd,OPENBRACKET:xy,CLOSEBRACKET:ky,OPENPAREN:Iy,CLOSEPAREN:Ny,OPENANGLEBRACKET:Oy,CLOSEANGLEBRACKET:My,FULLWIDTHLEFTPAREN:Dy,FULLWIDTHRIGHTPAREN:Py,LEFTCORNERBRACKET:Ly,RIGHTCORNERBRACKET:Vy,LEFTWHITECORNERBRACKET:Uy,RIGHTWHITECORNERBRACKET:zy,FULLWIDTHLESSTHAN:By,FULLWIDTHGREATERTHAN:jy,AMPERSAND:Fy,APOSTROPHE:jS,ASTERISK:Hy,AT:Va,BACKSLASH:qy,BACKTICK:$y,CARET:Gy,COLON:qa,COMMA:FS,DOLLAR:Ky,DOT:Ys,EQUALS:Wy,EXCLAMATION:HS,HYPHEN:ns,PERCENT:Id,PIPE:Yy,PLUS:Qy,POUND:Xy,QUERY:Nd,QUOTE:qS,FULLWIDTHMIDDLEDOT:yV,SEMI:$S,SLASH:Qs,TILDE:Od,UNDERSCORE:Jy,EMOJI:_V,SYM:Zy});const zo=/[a-z]/,Zf=new RegExp("\\p{L}","u"),ZA=new RegExp("\\p{Emoji}","u"),Bo=/\d/,eT=/\s/,yN="\r",tT=`
`,oZ="️",aZ="‍",nT="￼";let og=null,ag=null;function lZ(n=[]){const e={};ti.groups=e;const t=new ti;og==null&&(og=_N(eZ)),ag==null&&(ag=_N(tZ)),Ee(t,"'",jS),Ee(t,"{",xd),Ee(t,"}",kd),Ee(t,"[",xy),Ee(t,"]",ky),Ee(t,"(",Iy),Ee(t,")",Ny),Ee(t,"<",Oy),Ee(t,">",My),Ee(t,"（",Dy),Ee(t,"）",Py),Ee(t,"「",Ly),Ee(t,"」",Vy),Ee(t,"『",Uy),Ee(t,"』",zy),Ee(t,"＜",By),Ee(t,"＞",jy),Ee(t,"&",Fy),Ee(t,"*",Hy),Ee(t,"@",Va),Ee(t,"`",$y),Ee(t,"^",Gy),Ee(t,":",qa),Ee(t,",",FS),Ee(t,"$",Ky),Ee(t,".",Ys),Ee(t,"=",Wy),Ee(t,"!",HS),Ee(t,"-",ns),Ee(t,"%",Id),Ee(t,"|",Yy),Ee(t,"+",Qy),Ee(t,"#",Xy),Ee(t,"?",Nd),Ee(t,'"',qS),Ee(t,"/",Qs),Ee(t,";",$S),Ee(t,"~",Od),Ee(t,"_",Jy),Ee(t,"\\",qy),Ee(t,"・",yV);const r=un(t,Bo,zS,{[SE]:!0});un(r,Bo,r);const i=un(r,zo,mV,{[Cd]:!0}),s=un(r,Zf,gV,{[dd]:!0}),a=un(t,zo,jo,{[wE]:!0});un(a,Bo,i),un(a,zo,a),un(i,Bo,i),un(i,zo,i);const u=un(t,Zf,xE,{[RE]:!0});un(u,zo),un(u,Bo,s),un(u,Zf,u),un(s,Bo,s),un(s,zo),un(s,Zf,s);const c=Ee(t,tT,BS,{[JA]:!0}),f=Ee(t,yN,NE,{[JA]:!0}),p=un(t,eT,NE,{[JA]:!0});Ee(t,nT,p),Ee(f,tT,c),Ee(f,nT,p),un(f,eT,p),Ee(p,yN),Ee(p,tT),un(p,eT,p),Ee(p,nT,p);const g=un(t,ZA,_V,{[pV]:!0});Ee(g,"#"),un(g,ZA,g),Ee(g,oZ,g);const _=Ee(g,aZ);Ee(_,"#"),un(_,ZA,g);const A=[[zo,a],[Bo,i]],T=[[zo,null],[Zf,u],[Bo,s]];for(let E=0;E<og.length;E++)Oa(t,og[E],kE,jo,A);for(let E=0;E<ag.length;E++)Oa(t,ag[E],IE,xE,T);Eu(kE,{tld:!0,ascii:!0},e),Eu(IE,{utld:!0,alpha:!0},e),Oa(t,"file",Mg,jo,A),Oa(t,"mailto",Mg,jo,A),Oa(t,"http",Kc,jo,A),Oa(t,"https",Kc,jo,A),Oa(t,"ftp",Kc,jo,A),Oa(t,"ftps",Kc,jo,A),Eu(Mg,{scheme:!0,ascii:!0},e),Eu(Kc,{slashscheme:!0,ascii:!0},e),n=n.sort((E,S)=>E[0]>S[0]?1:-1);for(let E=0;E<n.length;E++){const S=n[E][0],L=n[E][1]?{[nZ]:!0}:{[rZ]:!0};S.indexOf("-")>=0?L[CE]=!0:zo.test(S)?Bo.test(S)?L[Cd]=!0:L[wE]=!0:L[SE]=!0,gN(t,S,S,L)}return gN(t,"localhost",op,{ascii:!0}),t.jd=new ti(Zy),{start:t,tokens:Ih({groups:e},vV)}}function AV(n,e){const t=uZ(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,i=[];let s=0,a=0;for(;a<r;){let u=n,c=null,f=0,p=null,g=-1,_=-1;for(;a<r&&(c=u.go(t[a]));)u=c,u.accepts()?(g=0,_=0,p=u):g>=0&&(g+=t[a].length,_++),f+=t[a].length,s+=t[a].length,a++;s-=g,a-=_,f-=g,i.push({t:p.t,v:e.slice(s-f,s),s:s-f,e:s})}return i}function uZ(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,a=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Oa(n,e,t,r,i){let s;const a=e.length;for(let u=0;u<a-1;u++){const c=e[u];n.j[c]?s=n.j[c]:(s=new ti(r),s.jr=i.slice(),n.j[c]=s),n=s}return s=new ti(t),s.jr=i.slice(),n.j[e[a-1]]=s,s}function _N(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const ap={defaultProtocol:"http",events:null,format:vN,formatHref:vN,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function GS(n,e=null){let t=Ih({},ap);n&&(t=Ih(t,n instanceof GS?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}GS.prototype={o:ap,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:ap[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function vN(n){return n}function TV(n,e){this.t="token",this.v=n,this.tk=e}TV.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=ap.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),a={},u=n.get("className",t,e),c=n.get("target",t,e),f=n.get("rel",t,e),p=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),c&&(a.target=c),f&&(a.rel=f),p&&Ih(a,p),{tagName:i,attributes:a,content:s,eventListeners:g}}};function K_(n,e){class t extends TV{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const AN=K_("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),TN=K_("text"),cZ=K_("nl"),lg=K_("url",{isLink:!0,toHref(n=ap.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==op&&n[1].t===qa}}),es=n=>new ti(n);function hZ({groups:n}){const e=n.domain.concat([Fy,Hy,Va,qy,$y,Gy,Ky,Wy,ns,zS,Id,Yy,Qy,Xy,Qs,Zy,Od,Jy]),t=[qa,FS,Ys,HS,Id,Nd,qS,$S,Oy,My,xd,kd,ky,xy,Iy,Ny,Dy,Py,Ly,Vy,Uy,zy,By,jy],r=[Fy,jS,Hy,qy,$y,Gy,Ky,Wy,ns,xd,kd,Id,Yy,Qy,Xy,Nd,Qs,Zy,Od,Jy],i=es(),s=Ee(i,Od);st(s,r,s),st(s,n.domain,s);const a=es(),u=es(),c=es();st(i,n.domain,a),st(i,n.scheme,u),st(i,n.slashscheme,c),st(a,r,s),st(a,n.domain,a);const f=Ee(a,Va);Ee(s,Va,f),Ee(u,Va,f),Ee(c,Va,f);const p=Ee(s,Ys);st(p,r,s),st(p,n.domain,s);const g=es();st(f,n.domain,g),st(g,n.domain,g);const _=Ee(g,Ys);st(_,n.domain,g);const A=es(AN);st(_,n.tld,A),st(_,n.utld,A),Ee(f,op,A);const T=Ee(g,ns);Ee(T,ns,T),st(T,n.domain,g),st(A,n.domain,g),Ee(A,Ys,_),Ee(A,ns,T);const E=Ee(A,qa);st(E,n.numeric,AN);const S=Ee(a,ns),k=Ee(a,Ys);Ee(S,ns,S),st(S,n.domain,a),st(k,r,s),st(k,n.domain,a);const L=es(lg);st(k,n.tld,L),st(k,n.utld,L),st(L,n.domain,a),st(L,r,s),Ee(L,Ys,k),Ee(L,ns,S),Ee(L,Va,f);const B=Ee(L,qa),q=es(lg);st(B,n.numeric,q);const V=es(lg),M=es();st(V,e,V),st(V,t,M),st(M,e,V),st(M,t,M),Ee(L,Qs,V),Ee(q,Qs,V);const O=Ee(u,qa),I=Ee(c,qa),x=Ee(I,Qs),z=Ee(x,Qs);st(u,n.domain,a),Ee(u,Ys,k),Ee(u,ns,S),st(c,n.domain,a),Ee(c,Ys,k),Ee(c,ns,S),st(O,n.domain,V),Ee(O,Qs,V),Ee(O,Nd,V),st(z,n.domain,V),st(z,e,V),Ee(z,Qs,V);const U=[[xd,kd],[xy,ky],[Iy,Ny],[Oy,My],[Dy,Py],[Ly,Vy],[Uy,zy],[By,jy]];for(let j=0;j<U.length;j++){const[P,ae]=U[j],fe=Ee(V,P);Ee(M,P,fe),Ee(fe,ae,V);const Y=es(lg);st(fe,e,Y);const ne=es();st(fe,t),st(Y,e,Y),st(Y,t,ne),st(ne,e,Y),st(ne,t,ne),Ee(Y,ae,V),Ee(ne,ae,V)}return Ee(i,op,L),Ee(i,BS,cZ),{start:i,tokens:vV}}function fZ(n,e,t){let r=t.length,i=0,s=[],a=[];for(;i<r;){let u=n,c=null,f=null,p=0,g=null,_=-1;for(;i<r&&!(c=u.go(t[i].t));)a.push(t[i++]);for(;i<r&&(f=c||u.go(t[i].t));)c=null,u=f,u.accepts()?(_=0,g=u):_>=0&&_++,i++,p++;if(_<0)i-=p,i<r&&(a.push(t[i]),i++);else{a.length>0&&(s.push(rT(TN,e,a)),a=[]),i-=_,p-=_;const A=g.t,T=t.slice(i-p,i);s.push(rT(A,e,T))}}return a.length>0&&s.push(rT(TN,e,a)),s}function rT(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const dZ=typeof console<"u"&&console&&console.warn||(()=>{}),pZ="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Gt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function mZ(){return ti.groups={},Gt.scanner=null,Gt.parser=null,Gt.tokenQueue=[],Gt.pluginQueue=[],Gt.customSchemes=[],Gt.initialized=!1,Gt}function EN(n,e=!1){if(Gt.initialized&&dZ(`linkifyjs: already initialized - will not register custom scheme "${n}" ${pZ}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Gt.customSchemes.push([n,e])}function gZ(){Gt.scanner=lZ(Gt.customSchemes);for(let n=0;n<Gt.tokenQueue.length;n++)Gt.tokenQueue[n][1]({scanner:Gt.scanner});Gt.parser=hZ(Gt.scanner.tokens);for(let n=0;n<Gt.pluginQueue.length;n++)Gt.pluginQueue[n][1]({scanner:Gt.scanner,parser:Gt.parser});return Gt.initialized=!0,Gt}function KS(n){return Gt.initialized||gZ(),fZ(Gt.parser.start,n,AV(Gt.scanner.start,n))}KS.scan=AV;function EV(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new GS(t),i=KS(n),s=[];for(let a=0;a<i.length;a++){const u=i[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}function yZ(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function _Z(n){return new Jn({key:new fi("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(f=>f.docChanged)&&!t.doc.eq(r.doc),s=e.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,u=jQ(t.doc,[...e]);if(YQ(u).forEach(({newRange:f})=>{const p=HQ(r.doc,f,A=>A.isTextblock);let g,_;if(p.length>1?(g=p[0],_=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):p.length&&r.doc.textBetween(f.from,f.to," "," ").endsWith(" ")&&(g=p[0],_=r.doc.textBetween(g.pos,f.to,void 0," ")),g&&_){const A=_.split(" ").filter(k=>k!=="");if(A.length<=0)return!1;const T=A[A.length-1],E=g.pos+_.lastIndexOf(T);if(!T)return!1;const S=KS(T).map(k=>k.toObject(n.defaultProtocol));if(!yZ(S))return!1;S.filter(k=>k.isLink).map(k=>({...k,from:E+k.start+1,to:E+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>n.validate(k.value)).filter(k=>n.shouldAutoLink(k.value)).forEach(k=>{PS(k.from,k.to,r.doc).some(L=>L.mark.type===n.type)||a.addMark(k.from,k.to,n.type.create({href:k.href}))})}}),!!a.steps.length)return a}})}function vZ(n){return new Jn({key:new fi("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=r.target;const u=[];for(;a.nodeName!=="DIV";)u.push(a),a=a.parentNode;if(!u.find(_=>_.nodeName==="A"))return!1;const c=aV(e.state,n.type.name),f=r.target,p=(i=f==null?void 0:f.href)!==null&&i!==void 0?i:c.href,g=(s=f==null?void 0:f.target)!==null&&s!==void 0?s:c.target;return f&&p?(window.open(p,g),!0):!1}}})}function AZ(n){return new Jn({key:new fi("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:a}=s;if(a)return!1;let u="";r.content.forEach(f=>{u+=f.textContent});const c=EV(u,{defaultProtocol:n.defaultProtocol}).find(f=>f.isLink&&f.value===u);return!u||!c?!1:n.editor.commands.setMark(n.type,{href:c.href})}}})}const TZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function ou(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(TZ,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const EZ=go.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){EN(n);return}EN(n.scheme,n.optionalSlashes)})},onDestroy(){mZ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!ou(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!ou(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!ou(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Xn(this.options.HTMLAttributes,n),0]:["a",Xn(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ou(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ou(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[$u({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=EV(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!ou(a,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(_Z({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ou(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(vZ({type:this.type})),this.options.linkOnPaste&&n.push(AZ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}});function bV({onChange:n,content:e}){const t=KX({extensions:[QJ,JJ,ZJ.configure({placeholder:"Start typing here..."}),EZ],content:e,onUpdate:({editor:i})=>{n(i.getHTML())}});if(!t)return null;const r=i=>{i.preventDefault()};return C.jsxs("div",{className:"editor-wrapper dark-silver-bg",children:[C.jsxs("div",{className:"toolbar",children:[C.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleBold().run()},className:t.isActive("bold")?"active":"",children:"Bold"}),C.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleItalic().run()},className:t.isActive("italic")?"active":"",children:"Italic"}),C.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleHeading({level:1}).run()},className:t.isActive("heading",{level:1})?"active":"",children:"H1"}),C.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleHeading({level:2}).run()},className:t.isActive("heading",{level:2})?"active":"",children:"H2"}),C.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleBulletList().run()},className:t.isActive("bulletList")?"active":"",children:"Bullet List"}),C.jsx("button",{type:"button",onClick:i=>{r(i);const s=t.getAttributes("link").href;let a=window.prompt("Enter URL",s||"");a!==null&&(a&&!a.startsWith("http://")&&!a.startsWith("https://")&&(a=`https://${a}`),a===""?t.chain().focus().unsetLink().run():t.chain().focus().setLink({href:a}).run())},className:t.isActive("link")?"active":"",children:"Link"}),C.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().undo().run()},children:"Undo"}),C.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().redo().run()},children:"Redo"})]}),C.jsx(VX,{editor:t,className:"editor-content"})]})}const SV="/assets/menu-DAMTkw-O.png",wV="/assets/check-BWpW0xC-.png",RV="/assets/description-C5Kf4JsE.png",CV="/assets/image-CvEaPl9Q.png",xV="/assets/content-writing-Co6lRQM-.png",kV="/assets/shuffle-BkdvClfH.png";function bZ(){const[n,e]=G.useState(null),[t,r]=G.useState({}),[i,s]=G.useState(!1),[a,u]=G.useState(!1),[c,f]=G.useState([]),[p,g]=G.useState(null),[_,A]=G.useState(null),[T,E]=G.useState(null),[S,k]=G.useState([]),[L,B]=G.useState(null),[q,V]=G.useState(null),M=[{img:RV,type:"Description",label:"Description"},{img:kV,type:"Redirect",label:"Redirect Link"},{img:xV,type:"Article",label:"Article Content"},{img:CV,type:"Image",label:"Image Upload"}],O=U=>{f(U==="Redirect"?j=>[...j,{type:U,value:{partName:"",partUrl:""}}]:j=>[...j,{type:U,value:""}]),u(!1)},I=(U,j,P=null)=>{const ae=[...c];if(P&&typeof ae[U].value=="object"?ae[U].value={...ae[U].value,[P]:j}:ae[U].value=j,f(ae),ae[U].type==="Image"&&j instanceof File){const fe=URL.createObjectURL(j);r(Y=>({...Y,[U]:fe}))}};console.log(c);const x=(U,j)=>{switch(U.type){case"Description":case"Article":return C.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[C.jsx("label",{style:{fontSize:"1.5rem"},className:"input-label outfit-font",children:U.type}),C.jsx(bV,{onChange:P=>I(j,P)})]},j);case"Redirect":return C.jsxs("div",{style:{marginBottom:"100px",padding:"30px 3%"},className:"display-column",children:[C.jsx("label",{className:"input-label outfit-font",children:"Redirect Name"}),C.jsx("input",{className:"input",type:"text",value:U.value.name,placeholder:"Part 3, or Part 1",style:{marginBottom:"30px",padding:"10px 20px"},onChange:P=>I(j,P.target.value,"partName")}),C.jsx("label",{className:"input-label outfit-font",children:"Redirect Url"}),C.jsx("input",{className:"input",type:"url",style:{padding:"10px 20px"},value:U.value.url,onChange:P=>I(j,P.target.value,"partUrl")})]},j);case"Image":return C.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[C.jsx("label",{className:"input-label outfit-font",children:"Upload Image"}),C.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:P=>I(j,P.target.files[0])}),t[j]&&C.jsx("img",{src:t[j],alt:"Preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]},j);default:return null}},z=async U=>{var P,ae;U.preventDefault(),s(!0);let j=null;try{const fe=document.querySelector('input[type="file"]');fe!=null&&fe.files[0]&&(j=await dy(fe.files[0]));const Y=await Promise.all(c.map(async ge=>{if(ge.type==="Image"&&ge.value instanceof File){const le=await dy(ge.value);return{...ge,value:le}}return ge})),ne=c.find(ge=>ge.type==="Redirect"),Te=((P=ne==null?void 0:ne.value)==null?void 0:P.partName)||null,xe=((ae=ne==null?void 0:ne.value)==null?void 0:ae.partUrl)||null,F={title:p,subTitle:L,author:_,readTime:T,part:q,categories:S,imgUrl,content:c,datePosted:serverTimestamp()},se=await D$(F);alert(`Blog created successfully! ID: ${se}`)}catch(fe){console.error("Error submitting blog:",fe),alert("Failed to submit blog")}finally{s(!1)}};return C.jsxs("section",{className:"create-blog-main",children:[C.jsx("h1",{className:"outfit-font",children:"Create a Blog"}),C.jsx("div",{className:"display-column",children:C.jsxs("form",{className:"form",children:[C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Title:"}),C.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>g(U.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Category Title (optional):"}),C.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>B(U.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Part Number (optional):"}),C.jsx("input",{className:"input-part",type:"number",onChange:U=>V(U.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Author:"}),C.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>A(U.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Read Time:"}),C.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>E(U.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Categories:"}),C.jsx("input",{className:"input playfair-font",type:"text",placeholder:"e.g. Monday Devotion, Tuesday Article",onChange:U=>k(U.target.value.split(",").map(j=>j.trim()).filter(j=>j!==""))}),S.length>0&&C.jsxs("div",{className:"category-container outfit-font",children:["Categories:",S.map(U=>C.jsx("div",{className:"cat silver-bg",children:U},U))]})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Photo:"}),C.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:U=>{const j=U.target.files[0];j&&e(URL.createObjectURL(j))}}),n&&C.jsx("img",{src:n,alt:"Main preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]}),C.jsxs("div",{className:"form-array-container",children:[c.map((U,j)=>x(U,j)),C.jsxs("div",{className:"add-to-array",children:[C.jsx("img",{className:"form-icon menu-icon off-white-bg",src:SV,onClick:()=>u(!a)}),i?C.jsx("div",{className:"post-loader-container",children:C.jsx(hS,{})}):C.jsx("img",{className:"form-icon submit-icon off-white-bg",src:wV,onClick:z}),C.jsx("div",{className:`expanded-icons ${a?"show":""}`,children:M.map((U,j)=>C.jsx("img",{src:U.img,title:U.label,className:"form-icon",onClick:()=>O(U.type)},j))})]})]})]})})]})}function SZ(){const{id:n}=VE(),[e,t]=G.useState(null),[r,i]=G.useState({}),[s,a]=G.useState(!1),[u,c]=G.useState(!1),[f,p]=G.useState([]),[g,_]=G.useState(""),[A,T]=G.useState(""),[E,S]=G.useState(""),[k,L]=G.useState([]),[B,q]=G.useState(""),[V,M]=G.useState(""),[O,I]=G.useState(null),x=[{img:RV,type:"Description",label:"Description"},{img:kV,type:"Redirect",label:"Redirect Link"},{img:xV,type:"Article",label:"Article Content"},{img:CV,type:"Image",label:"Image Upload"}];G.useEffect(()=>{(async()=>{a(!0);try{const fe=Pu(ra,"blogs",n),Y=await YM(fe);if(Y.exists()){const ne=Y.data(),Te=Array.isArray(ne.content)?ne.content.map(xe=>typeof xe.value=="string"||xe.type==="Redirect"&&typeof xe.value=="object"&&xe.value!==null?xe:{...xe,value:xe.type==="Redirect"?{partName:"",partUrl:""}:""}):[];_(ne.title||""),q(ne.subTitle||""),T(ne.author||""),S(ne.readTime||""),M(ne.part||""),L(ne.categories||[]),I(ne.imgUrl||null),p(Te),t(ne.imgUrl||null)}else console.error("No such document!")}catch(fe){console.error("Error fetching blog:",fe)}a(!1)})()},[n]);const z=ae=>{p(ae==="Redirect"?fe=>[...fe,{type:ae,value:{partName:"",partUrl:""}}]:fe=>[...fe,{type:ae,value:""}]),c(!1)},U=(ae,fe,Y=null)=>{const ne=[...f];if(Y&&typeof ne[ae].value=="object"?ne[ae].value={...ne[ae].value,[Y]:fe}:ne[ae].value=fe,p(ne),ne[ae].type==="Image"&&fe instanceof File){const Te=URL.createObjectURL(fe);i(xe=>({...xe,[ae]:Te}))}},j=(ae,fe)=>{var Y,ne;switch(ae.type){case"Description":case"Article":return console.log(ae.value),C.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[C.jsx("label",{className:"input-label outfit-font",style:{fontSize:"1.5rem"},children:ae.type}),C.jsx(bV,{content:ae.value,onChange:xe=>U(fe,xe)})]},fe);case"Redirect":return C.jsxs("div",{className:"display-column",style:{marginBottom:"100px",padding:"30px 3%"},children:[C.jsx("label",{className:"input-label outfit-font",children:"Redirect Name"}),C.jsx("input",{className:"input",type:"text",value:((Y=ae.value)==null?void 0:Y.partName)||"",onChange:xe=>U(fe,xe.target.value,"partName"),placeholder:"Part 3, or Part 1",style:{marginBottom:"30px",padding:"10px 20px"}}),C.jsx("label",{className:"input-label outfit-font",children:"Redirect Url"}),C.jsx("input",{className:"input",type:"url",value:((ne=ae.value)==null?void 0:ne.partUrl)||"",onChange:xe=>U(fe,xe.target.value,"partUrl"),style:{padding:"10px 20px"}})]},fe);case"Image":const Te=r[fe]||(typeof ae.value=="string"?ae.value:null);return C.jsxs("div",{className:"display-column",style:{marginBottom:"100px"},children:[C.jsx("label",{className:"input-label outfit-font",children:"Upload Image"}),C.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:xe=>U(fe,xe.target.files[0])}),Te&&C.jsx("img",{src:Te,alt:"Preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]},fe);default:return null}},P=async ae=>{var fe,Y;ae.preventDefault(),a(!0);try{const ne=document.querySelector('input[type="file"]');let Te=O;ne!=null&&ne.files[0]&&(Te=await dy(ne.files[0]));const xe=await Promise.all(f.map(async Se=>{if(Se.type==="Image"&&Se.value instanceof File){const Le=await dy(Se.value);return{...Se,value:Le}}return Se})),F=f.find(Se=>Se.type==="Redirect"),se=((fe=F==null?void 0:F.value)==null?void 0:fe.partName)||null,ge=((Y=F==null?void 0:F.value)==null?void 0:Y.partUrl)||null,le={title:g,subTitle:B,author:A,readTime:E,part:V,imgUrl:Te,content:xe,categories:k,partName:se,partUrl:ge},Re=Pu(ra,"blogs",n);await b_(Re,le),alert("Blog updated successfully!")}catch(ne){console.error("Error updating blog:",ne),alert("Failed to update blog")}finally{a(!1)}};return C.jsxs("section",{className:"create-blog-main",children:[C.jsx("h1",{className:"outfit-font",children:"Edit Blog"}),C.jsx("div",{className:"display-column",children:C.jsxs("form",{className:"form",children:[C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Title:"}),C.jsx("input",{className:"input playfair-font",type:"text",value:g,onChange:ae=>_(ae.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Category Title (optional):"}),C.jsx("input",{className:"input playfair-font",type:"text",value:B,onChange:ae=>q(ae.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Part Number (optional):"}),C.jsx("input",{className:"input-part",type:"number",value:V,onChange:ae=>M(ae.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Author:"}),C.jsx("input",{className:"input playfair-font",type:"text",value:A,onChange:ae=>T(ae.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Read Time:"}),C.jsx("input",{className:"input playfair-font",type:"text",value:E,onChange:ae=>S(ae.target.value)})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Categories:"}),C.jsx("input",{className:"input playfair-font",type:"text",value:k.join(", "),onChange:ae=>L(ae.target.value.split(",").map(fe=>fe.trim()).filter(fe=>fe!==""))}),k.length>0&&C.jsxs("div",{className:"category-container outfit-font",children:["Categories:",k.map(ae=>C.jsx("div",{className:"cat silver-bg",children:ae},ae))]})]}),C.jsxs("div",{className:"input-container",children:[C.jsx("label",{className:"input-label outfit-font",children:"Photo:"}),C.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:ae=>{const fe=ae.target.files[0];fe&&t(URL.createObjectURL(fe))}}),e&&C.jsx("img",{src:e,alt:"Main preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]}),C.jsxs("div",{className:"form-array-container",children:[f.map((ae,fe)=>j(ae,fe)),C.jsxs("div",{className:"add-to-array",children:[C.jsx("img",{className:"form-icon menu-icon off-white-bg",src:SV,onClick:()=>c(!u)}),s?C.jsx("div",{className:"post-loader-container",children:C.jsx(hS,{})}):C.jsx("img",{className:"form-icon submit-icon off-white-bg",src:wV,onClick:P}),C.jsx("div",{className:`expanded-icons ${u?"show":""}`,children:x.map((ae,fe)=>C.jsx("img",{src:ae.img,title:ae.label,className:"form-icon",onClick:()=>z(ae.type)},fe))})]})]})]})})]})}function wZ(){return C.jsx("div",{className:"display-column",style:{padding:"40px 20px"},children:C.jsx(Qd,{nav:"editBlog",title:"Edit a Blog",maxCount:100})})}const RZ=iB([{path:"/",element:C.jsx(I$,{}),errorElement:C.jsx(N$,{}),children:[{path:"/",...F$},{path:"/about",...K$},{path:"/singleBlog/:id",...vG},{path:"/login",...TG},{path:"/dashboard",element:C.jsx(Jm,{children:C.jsx(IG,{})})},{path:"/createBlog",element:C.jsx(Jm,{children:C.jsx(bZ,{})})},{path:"/editBlog/:id",element:C.jsx(Jm,{children:C.jsx(SZ,{})})},{path:"/editDirectory",element:C.jsx(Jm,{children:C.jsx(wZ,{})})}]}]);l4.createRoot(document.getElementById("root")).render(C.jsx(G.StrictMode,{children:C.jsx(EG,{children:C.jsx(yB,{router:RZ})})}));
