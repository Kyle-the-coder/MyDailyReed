(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function gO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vv={exports:{}},Mh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR;function BU(){if(KR)return Mh;KR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Mh.Fragment=e,Mh.jsx=t,Mh.jsxs=t,Mh}var WR;function jU(){return WR||(WR=1,Vv.exports=BU()),Vv.exports}var I=jU(),Uv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YR;function FU(){if(YR)return nt;YR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function _(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,b={};function S(H,ie,_e){this.props=H,this.context=ie,this.refs=b,this.updater=_e||A}S.prototype.isReactComponent={},S.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},S.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function C(){}C.prototype=S.prototype;function L(H,ie,_e){this.props=H,this.context=ie,this.refs=b,this.updater=_e||A}var z=L.prototype=new C;z.constructor=L,T(z,S.prototype),z.isPureReactComponent=!0;var q=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function N(H,ie,_e,le,Se,we){return _e=we.ref,{$$typeof:n,type:H,key:ie,ref:_e!==void 0?_e:null,props:we}}function k(H,ie){return N(H.type,ie,void 0,void 0,void 0,H.props)}function x(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function U(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(_e){return ie[_e]})}var V=/\/+/g;function j(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):ie.toString(36)}function D(){}function Ce(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(D,D):(H.status="pending",H.then(function(ie){H.status==="pending"&&(H.status="fulfilled",H.value=ie)},function(ie){H.status==="pending"&&(H.status="rejected",H.reason=ie)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Oe(H,ie,_e,le,Se){var we=typeof H;(we==="undefined"||we==="boolean")&&(H=null);var Ve=!1;if(H===null)Ve=!0;else switch(we){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(H.$$typeof){case n:case e:Ve=!0;break;case p:return Ve=H._init,Oe(Ve(H._payload),ie,_e,le,Se)}}if(Ve)return Se=Se(H),Ve=le===""?"."+j(H,0):le,q(Se)?(_e="",Ve!=null&&(_e=Ve.replace(V,"$&/")+"/"),Oe(Se,ie,_e,"",function(mr){return mr})):Se!=null&&(x(Se)&&(Se=k(Se,_e+(Se.key==null||H&&H.key===Se.key?"":(""+Se.key).replace(V,"$&/")+"/")+Ve)),ie.push(Se)),1;Ve=0;var Kt=le===""?".":le+":";if(q(H))for(var Rt=0;Rt<H.length;Rt++)le=H[Rt],we=Kt+j(le,Rt),Ve+=Oe(le,ie,_e,we,Se);else if(Rt=_(H),typeof Rt=="function")for(H=Rt.call(H),Rt=0;!(le=H.next()).done;)le=le.value,we=Kt+j(le,Rt++),Ve+=Oe(le,ie,_e,we,Se);else if(we==="object"){if(typeof H.then=="function")return Oe(Ce(H),ie,_e,le,Se);throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function Y(H,ie,_e){if(H==null)return H;var le=[],Se=0;return Oe(H,le,"","",function(we){return ie.call(_e,we,Se++)}),le}function oe(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(_e){(H._status===0||H._status===-1)&&(H._status=1,H._result=_e)},function(_e){(H._status===0||H._status===-1)&&(H._status=2,H._result=_e)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var Ae=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function qe(){}return nt.Children={map:Y,forEach:function(H,ie,_e){Y(H,function(){ie.apply(this,arguments)},_e)},count:function(H){var ie=0;return Y(H,function(){ie++}),ie},toArray:function(H){return Y(H,function(ie){return ie})||[]},only:function(H){if(!x(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},nt.Component=S,nt.Fragment=t,nt.Profiler=i,nt.PureComponent=L,nt.StrictMode=r,nt.Suspense=c,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,nt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return B.H.useMemoCache(H)}},nt.cache=function(H){return function(){return H.apply(null,arguments)}},nt.cloneElement=function(H,ie,_e){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var le=T({},H.props),Se=H.key,we=void 0;if(ie!=null)for(Ve in ie.ref!==void 0&&(we=void 0),ie.key!==void 0&&(Se=""+ie.key),ie)!P.call(ie,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ie.ref===void 0||(le[Ve]=ie[Ve]);var Ve=arguments.length-2;if(Ve===1)le.children=_e;else if(1<Ve){for(var Kt=Array(Ve),Rt=0;Rt<Ve;Rt++)Kt[Rt]=arguments[Rt+2];le.children=Kt}return N(H.type,Se,void 0,void 0,we,le)},nt.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:s,_context:H},H},nt.createElement=function(H,ie,_e){var le,Se={},we=null;if(ie!=null)for(le in ie.key!==void 0&&(we=""+ie.key),ie)P.call(ie,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Se[le]=ie[le]);var Ve=arguments.length-2;if(Ve===1)Se.children=_e;else if(1<Ve){for(var Kt=Array(Ve),Rt=0;Rt<Ve;Rt++)Kt[Rt]=arguments[Rt+2];Se.children=Kt}if(H&&H.defaultProps)for(le in Ve=H.defaultProps,Ve)Se[le]===void 0&&(Se[le]=Ve[le]);return N(H,we,void 0,void 0,null,Se)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(H){return{$$typeof:u,render:H}},nt.isValidElement=x,nt.lazy=function(H){return{$$typeof:p,_payload:{_status:-1,_result:H},_init:oe}},nt.memo=function(H,ie){return{$$typeof:h,type:H,compare:ie===void 0?null:ie}},nt.startTransition=function(H){var ie=B.T,_e={};B.T=_e;try{var le=H(),Se=B.S;Se!==null&&Se(_e,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(qe,Ae)}catch(we){Ae(we)}finally{B.T=ie}},nt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},nt.use=function(H){return B.H.use(H)},nt.useActionState=function(H,ie,_e){return B.H.useActionState(H,ie,_e)},nt.useCallback=function(H,ie){return B.H.useCallback(H,ie)},nt.useContext=function(H){return B.H.useContext(H)},nt.useDebugValue=function(){},nt.useDeferredValue=function(H,ie){return B.H.useDeferredValue(H,ie)},nt.useEffect=function(H,ie,_e){var le=B.H;if(typeof _e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(H,ie)},nt.useId=function(){return B.H.useId()},nt.useImperativeHandle=function(H,ie,_e){return B.H.useImperativeHandle(H,ie,_e)},nt.useInsertionEffect=function(H,ie){return B.H.useInsertionEffect(H,ie)},nt.useLayoutEffect=function(H,ie){return B.H.useLayoutEffect(H,ie)},nt.useMemo=function(H,ie){return B.H.useMemo(H,ie)},nt.useOptimistic=function(H,ie){return B.H.useOptimistic(H,ie)},nt.useReducer=function(H,ie,_e){return B.H.useReducer(H,ie,_e)},nt.useRef=function(H){return B.H.useRef(H)},nt.useState=function(H){return B.H.useState(H)},nt.useSyncExternalStore=function(H,ie,_e){return B.H.useSyncExternalStore(H,ie,_e)},nt.useTransition=function(){return B.H.useTransition()},nt.version="19.1.0",nt}var QR;function RE(){return QR||(QR=1,Uv.exports=FU()),Uv.exports}var W=RE();const Br=gO(W);var zv={exports:{}},Dh={},Bv={exports:{}},jv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XR;function HU(){return XR||(XR=1,function(n){function e(Y,oe){var Ae=Y.length;Y.push(oe);e:for(;0<Ae;){var qe=Ae-1>>>1,H=Y[qe];if(0<i(H,oe))Y[qe]=oe,Y[Ae]=H,Ae=qe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var oe=Y[0],Ae=Y.pop();if(Ae!==oe){Y[0]=Ae;e:for(var qe=0,H=Y.length,ie=H>>>1;qe<ie;){var _e=2*(qe+1)-1,le=Y[_e],Se=_e+1,we=Y[Se];if(0>i(le,Ae))Se<H&&0>i(we,le)?(Y[qe]=we,Y[Se]=Ae,qe=Se):(Y[qe]=le,Y[_e]=Ae,qe=_e);else if(Se<H&&0>i(we,Ae))Y[qe]=we,Y[Se]=Ae,qe=Se;else break e}}return oe}function i(Y,oe){var Ae=Y.sortIndex-oe.sortIndex;return Ae!==0?Ae:Y.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var c=[],h=[],p=1,g=null,_=3,A=!1,T=!1,b=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function q(Y){for(var oe=t(h);oe!==null;){if(oe.callback===null)r(h);else if(oe.startTime<=Y)r(h),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=t(h)}}function B(Y){if(b=!1,q(Y),!T)if(t(c)!==null)T=!0,P||(P=!0,j());else{var oe=t(h);oe!==null&&Oe(B,oe.startTime-Y)}}var P=!1,N=-1,k=5,x=-1;function U(){return S?!0:!(n.unstable_now()-x<k)}function V(){if(S=!1,P){var Y=n.unstable_now();x=Y;var oe=!0;try{e:{T=!1,b&&(b=!1,L(N),N=-1),A=!0;var Ae=_;try{t:{for(q(Y),g=t(c);g!==null&&!(g.expirationTime>Y&&U());){var qe=g.callback;if(typeof qe=="function"){g.callback=null,_=g.priorityLevel;var H=qe(g.expirationTime<=Y);if(Y=n.unstable_now(),typeof H=="function"){g.callback=H,q(Y),oe=!0;break t}g===t(c)&&r(c),q(Y)}else r(c);g=t(c)}if(g!==null)oe=!0;else{var ie=t(h);ie!==null&&Oe(B,ie.startTime-Y),oe=!1}}break e}finally{g=null,_=Ae,A=!1}oe=void 0}}finally{oe?j():P=!1}}}var j;if(typeof z=="function")j=function(){z(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ce=D.port2;D.port1.onmessage=V,j=function(){Ce.postMessage(null)}}else j=function(){C(V,0)};function Oe(Y,oe){N=C(function(){Y(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var Ae=_;_=oe;try{return Y()}finally{_=Ae}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Ae=_;_=Y;try{return oe()}finally{_=Ae}},n.unstable_scheduleCallback=function(Y,oe,Ae){var qe=n.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?qe+Ae:qe):Ae=qe,Y){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Ae+H,Y={id:p++,callback:oe,priorityLevel:Y,startTime:Ae,expirationTime:H,sortIndex:-1},Ae>qe?(Y.sortIndex=Ae,e(h,Y),t(c)===null&&Y===t(h)&&(b?(L(N),N=-1):b=!0,Oe(B,Ae-qe))):(Y.sortIndex=H,e(c,Y),T||A||(T=!0,P||(P=!0,j()))),Y},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Y){var oe=_;return function(){var Ae=_;_=oe;try{return Y.apply(this,arguments)}finally{_=Ae}}}}(jv)),jv}var JR;function qU(){return JR||(JR=1,Bv.exports=HU()),Bv.exports}var Fv={exports:{}},Ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZR;function $U(){if(ZR)return Ar;ZR=1;var n=RE();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:h,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ar.createPortal=function(c,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(c,h,null,p)},Ar.flushSync=function(c){var h=a.T,p=r.p;try{if(a.T=null,r.p=2,c)return c()}finally{a.T=h,r.p=p,r.d.f()}},Ar.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},Ar.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ar.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:A}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:_,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ar.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},Ar.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ar.preloadModule=function(c,h){if(typeof c=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},Ar.requestFormReset=function(c){r.d.r(c)},Ar.unstable_batchedUpdates=function(c,h){return c(h)},Ar.useFormState=function(c,h,p){return a.H.useFormState(c,h,p)},Ar.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ar.version="19.1.0",Ar}var eC;function yO(){if(eC)return Fv.exports;eC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fv.exports=$U(),Fv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function GU(){if(tC)return Dh;tC=1;var n=qU(),e=RE(),t=yO();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(r(188))}function c(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var f=o,d=l;;){var y=f.return;if(y===null)break;var v=y.alternate;if(v===null){if(d=y.return,d!==null){f=d;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===f)return u(y),o;if(v===d)return u(y),l;v=v.sibling}throw Error(r(188))}if(f.return!==d.return)f=y,d=v;else{for(var R=!1,O=y.child;O;){if(O===f){R=!0,f=y,d=v;break}if(O===d){R=!0,d=y,f=v;break}O=O.sibling}if(!R){for(O=v.child;O;){if(O===f){R=!0,f=v,d=y;break}if(O===d){R=!0,d=v,f=y;break}O=O.sibling}if(!R)throw Error(r(189))}}if(f.alternate!==d)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),z=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function j(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function Ce(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case B:return"Suspense";case P:return"SuspenseList";case x:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case z:return(o.displayName||"Context")+".Provider";case L:return(o._context.displayName||"Context")+".Consumer";case q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case N:return l=o.displayName||null,l!==null?l:Ce(o.type)||"Memo";case k:l=o._payload,o=o._init;try{return Ce(o(l))}catch{}}return null}var Oe=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},qe=[],H=-1;function ie(o){return{current:o}}function _e(o){0>H||(o.current=qe[H],qe[H]=null,H--)}function le(o,l){H++,qe[H]=o.current,o.current=l}var Se=ie(null),we=ie(null),Ve=ie(null),Kt=ie(null);function Rt(o,l){switch(le(Ve,l),le(we,o),le(Se,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?TR(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=TR(l),o=ER(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}_e(Se),le(Se,o)}function mr(){_e(Se),_e(we),_e(Ve)}function Ut(o){o.memoizedState!==null&&le(Kt,o);var l=Se.current,f=ER(l,o.type);l!==f&&(le(we,o),le(Se,f))}function On(o){we.current===o&&(_e(Se),_e(we)),Kt.current===o&&(_e(Kt),xh._currentValue=Ae)}var Zn=Object.prototype.hasOwnProperty,di=n.unstable_scheduleCallback,Xt=n.unstable_cancelCallback,gs=n.unstable_shouldYield,ks=n.unstable_requestPaint,on=n.unstable_now,Is=n.unstable_getCurrentPriorityLevel,zi=n.unstable_ImmediatePriority,ys=n.unstable_UserBlockingPriority,Bi=n.unstable_NormalPriority,pi=n.unstable_LowPriority,gr=n.unstable_IdlePriority,Kr=n.log,Nr=n.unstable_setDisableYieldValue,ut=null,et=null;function Nn(o){if(typeof Kr=="function"&&Nr(o),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(ut,o)}catch{}}var Jt=Math.clz32?Math.clz32:Dr,Os=Math.log,Mr=Math.LN2;function Dr(o){return o>>>=0,o===0?32:31-(Os(o)/Mr|0)|0}var Pr=256,Tn=4194304;function En(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function mi(o,l,f){var d=o.pendingLanes;if(d===0)return 0;var y=0,v=o.suspendedLanes,R=o.pingedLanes;o=o.warmLanes;var O=d&134217727;return O!==0?(d=O&~v,d!==0?y=En(d):(R&=O,R!==0?y=En(R):f||(f=O&~o,f!==0&&(y=En(f))))):(O=d&~v,O!==0?y=En(O):R!==0?y=En(R):f||(f=d&~o,f!==0&&(y=En(f)))),y===0?0:l!==0&&l!==y&&(l&v)===0&&(v=y&-y,f=l&-l,v>=f||v===32&&(f&4194048)!==0)?l:y}function yr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Ns(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var o=Pr;return Pr<<=1,(Pr&4194048)===0&&(Pr=256),o}function ji(){var o=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),o}function Yr(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function er(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ms(o,l,f,d,y,v){var R=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var O=o.entanglements,F=o.expirationTimes,te=o.hiddenUpdates;for(f=R&~f;0<f;){var ae=31-Jt(f),fe=1<<ae;O[ae]=0,F[ae]=-1;var ne=te[ae];if(ne!==null)for(te[ae]=null,ae=0;ae<ne.length;ae++){var re=ne[ae];re!==null&&(re.lane&=-536870913)}f&=~fe}d!==0&&tr(o,d,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(R&~l))}function tr(o,l,f){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Jt(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|f&4194090}function Ot(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var d=31-Jt(f),y=1<<d;y&l|o[d]&l&&(o[d]|=l),f&=~y}}function nr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ds(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function $(){var o=oe.p;return o!==0?o:(o=window.event,o===void 0?32:jR(o.type))}function X(o,l){var f=oe.p;try{return oe.p=o,l()}finally{oe.p=f}}var Z=Math.random().toString(36).slice(2),ce="__reactFiber$"+Z,ge="__reactProps$"+Z,Ee="__reactContainer$"+Z,Ue="__reactEvents$"+Z,ke="__reactListeners$"+Z,Ne="__reactHandles$"+Z,Le="__reactResources$"+Z,je="__reactMarker$"+Z;function Re(o){delete o[ce],delete o[ge],delete o[Ue],delete o[ke],delete o[Ne]}function Fe(o){var l=o[ce];if(l)return l;for(var f=o.parentNode;f;){if(l=f[Ee]||f[ce]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=RR(o);o!==null;){if(f=o[ce])return f;o=RR(o)}return l}o=f,f=o.parentNode}return null}function it(o){if(o=o[ce]||o[Ee]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function St(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function _t(o){var l=o[Le];return l||(l=o[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ht(o){o[je]=!0}var ye=new Set,G={};function de(o,l){be(o,l),be(o+"Capture",l)}function be(o,l){for(G[o]=l,o=0;o<l.length;o++)ye.add(l[o])}var tt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},Ct={};function Zt(o){return Zn.call(Ct,o)?!0:Zn.call(zt,o)?!1:tt.test(o)?Ct[o]=!0:(zt[o]=!0,!1)}function Bt(o,l,f){if(Zt(l))if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+f)}}function mn(o,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+f)}}function Pe(o,l,f,d){if(d===null)o.removeAttribute(f);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(l,f,""+d)}}var en,_r;function Qr(o){if(en===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);en=l&&l[1]||"",_r=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+o+_r}var Ps=!1;function jt(o,l){if(!o||Ps)return"";Ps=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var ne=re}Reflect.construct(o,[],fe)}else{try{fe.call()}catch(re){ne=re}o.call(fe.prototype)}}else{try{throw Error()}catch(re){ne=re}(fe=o())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),R=v[0],O=v[1];if(R&&O){var F=R.split(`
`),te=O.split(`
`);for(y=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;if(d===F.length||y===te.length)for(d=F.length-1,y=te.length-1;1<=d&&0<=y&&F[d]!==te[y];)y--;for(;1<=d&&0<=y;d--,y--)if(F[d]!==te[y]){if(d!==1||y!==1)do if(d--,y--,0>y||F[d]!==te[y]){var ae=`
`+F[d].replace(" at new "," at ");return o.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",o.displayName)),ae}while(1<=d&&0<=y);break}}}finally{Ps=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Qr(f):""}function Fi(o){switch(o.tag){case 26:case 27:case 5:return Qr(o.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return jt(o.type,!1);case 11:return jt(o.type.render,!1);case 1:return jt(o.type,!0);case 31:return Qr("Activity");default:return""}}function yo(o){try{var l="";do l+=Fi(o),o=o.return;while(o);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function rr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Lf(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function j_(o){var l=Lf(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),d=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,v=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(R){d=""+R,v.call(this,R)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Xu(o){o._valueTracker||(o._valueTracker=j_(o))}function Vf(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),d="";return o&&(d=Lf(o)?o.checked?"true":"false":o.value),o=d,o!==f?(l.setValue(o),!0):!1}function kl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var F_=/[\n"\\]/g;function bn(o){return o.replace(F_,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function gi(o,l,f,d,y,v,R,O){o.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.type=R:o.removeAttribute("type"),l!=null?R==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+rr(l)):o.value!==""+rr(l)&&(o.value=""+rr(l)):R!=="submit"&&R!=="reset"||o.removeAttribute("value"),l!=null?sa(o,R,rr(l)):f!=null?sa(o,R,rr(f)):d!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+rr(O):o.removeAttribute("name")}function Il(o,l,f,d,y,v,R,O){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),l!=null||f!=null){if(!(v!=="submit"&&v!=="reset"||l!=null))return;f=f!=null?""+rr(f):"",l=l!=null?""+rr(l):f,O||l===o.value||(o.value=l),o.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=O?o.checked:!!d,o.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.name=R)}function sa(o,l,f){l==="number"&&kl(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function _o(o,l,f,d){if(o=o.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<o.length;f++)y=l.hasOwnProperty("$"+o[f].value),o[f].selected!==y&&(o[f].selected=y),y&&d&&(o[f].defaultSelected=!0)}else{for(f=""+rr(f),l=null,y=0;y<o.length;y++){if(o[y].value===f){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Dt(o,l,f){if(l!=null&&(l=""+rr(l),l!==o.value&&(o.value=l),f==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=f!=null?""+rr(f):""}function Ol(o,l,f,d){if(l==null){if(d!=null){if(f!=null)throw Error(r(92));if(Oe(d)){if(1<d.length)throw Error(r(93));d=d[0]}f=d}f==null&&(f=""),l=f}f=rr(l),o.defaultValue=f,d=o.textContent,d===f&&d!==""&&d!==null&&(o.value=d)}function Hi(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var Nl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vp(o,l,f){var d=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,f):typeof f!="number"||f===0||Nl.has(l)?l==="float"?o.cssFloat=f:o[l]=(""+f).trim():o[l]=f+"px"}function Uf(o,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,f!=null){for(var d in f)!f.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&f[y]!==d&&vp(o,y,d)}else for(var v in l)l.hasOwnProperty(v)&&vp(o,v,l[v])}function zf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var H_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),q_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ju(o){return q_.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var vo=null;function qi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ao=null,To=null;function Bf(o){var l=it(o);if(l&&(o=l.stateNode)){var f=o[ge]||null;e:switch(o=l.stateNode,l.type){case"input":if(gi(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+bn(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var d=f[l];if(d!==o&&d.form===o.form){var y=d[ge]||null;if(!y)throw Error(r(90));gi(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)d=f[l],d.form===o.form&&Vf(d)}break e;case"textarea":Dt(o,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&_o(o,!!f.multiple,l,!1)}}}var Ls=!1;function Ap(o,l,f){if(Ls)return o(l,f);Ls=!0;try{var d=o(l);return d}finally{if(Ls=!1,(Ao!==null||To!==null)&&(dm(),Ao&&(l=Ao,o=To,To=Ao=null,Bf(l),o)))for(l=0;l<o.length;l++)Bf(o[l])}}function Ml(o,l){var f=o.stateNode;if(f===null)return null;var d=f[ge]||null;if(d===null)return null;f=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(_s)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{$i=!1}var Vs=null,oa=null,Eo=null;function jf(){if(Eo)return Eo;var o,l=oa,f=l.length,d,y="value"in Vs?Vs.value:Vs.textContent,v=y.length;for(o=0;o<f&&l[o]===y[o];o++);var R=f-o;for(d=1;d<=R&&l[f-d]===y[v-d];d++);return Eo=y.slice(o,1<d?1-d:void 0)}function Us(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function zs(){return!0}function Ff(){return!1}function Bn(o){function l(f,d,y,v,R){this._reactName=f,this._targetInst=y,this.type=d,this.nativeEvent=v,this.target=R,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(f=o[O],this[O]=f?f(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?zs:Ff,this.isPropagationStopped=Ff,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),l}var kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=Bn(kt),Pl=p({},kt,{view:0,detail:0}),Tp=Bn(Pl),ec,tc,Bs,Ll=p({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Bs&&(Bs&&o.type==="mousemove"?(ec=o.screenX-Bs.screenX,tc=o.screenY-Bs.screenY):tc=ec=0,Bs=o),ec)},movementY:function(o){return"movementY"in o?o.movementY:tc}}),Gi=Bn(Ll),Ep=p({},Ll,{dataTransfer:0}),$_=Bn(Ep),Vl=p({},Pl,{relatedTarget:0}),nc=Bn(Vl),Hf=p({},kt,{animationName:0,elapsedTime:0,pseudoElement:0}),rc=Bn(Hf),bp=p({},kt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ic=Bn(bp),G_=p({},kt,{data:0}),qf=Bn(G_),Ul={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $f(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=wp[o])?!!l[o]:!1}function zl(){return $f}var Rp=p({},Pl,{key:function(o){if(o.key){var l=Ul[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Us(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Sp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(o){return o.type==="keypress"?Us(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Us(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),sc=Bn(Rp),Cp=p({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gf=Bn(Cp),bo=p({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),xp=Bn(bo),kp=p({},kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ip=Bn(kp),Op=p({},Ll,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),oc=Bn(Op),Lr=p({},kt,{newState:0,oldState:0}),Np=Bn(Lr),Mp=[9,13,27,32],js=_s&&"CompositionEvent"in window,m=null;_s&&"documentMode"in document&&(m=document.documentMode);var E=_s&&"TextEvent"in window&&!m,w=_s&&(!js||m&&8<m&&11>=m),M=" ",J=!1;function se(o,l){switch(o){case"keyup":return Mp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Te(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var At=!1;function Mn(o,l){switch(o){case"compositionend":return Te(l);case"keypress":return l.which!==32?null:(J=!0,M);case"textInput":return o=l.data,o===M&&J?null:o;default:return null}}function Tt(o,l){if(At)return o==="compositionend"||!js&&se(o,l)?(o=jf(),Eo=oa=Vs=null,At=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return w&&l.locale!=="ko"?null:l.data;default:return null}}var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!jn[o.type]:l==="textarea"}function So(o,l,f,d){Ao?To?To.push(d):To=[d]:Ao=d,l=vm(l,"onChange"),0<l.length&&(f=new Zu("onChange","change",null,f,d),o.push({event:f,listeners:l}))}var ir=null,Fs=null;function Kf(o){gR(o,0)}function Dp(o){var l=St(o);if(Vf(l))return o}function VS(o,l){if(o==="change")return l}var US=!1;if(_s){var K_;if(_s){var W_="oninput"in document;if(!W_){var zS=document.createElement("div");zS.setAttribute("oninput","return;"),W_=typeof zS.oninput=="function"}K_=W_}else K_=!1;US=K_&&(!document.documentMode||9<document.documentMode)}function BS(){ir&&(ir.detachEvent("onpropertychange",jS),Fs=ir=null)}function jS(o){if(o.propertyName==="value"&&Dp(Fs)){var l=[];So(l,Fs,o,qi(o)),Ap(Kf,l)}}function gV(o,l,f){o==="focusin"?(BS(),ir=l,Fs=f,ir.attachEvent("onpropertychange",jS)):o==="focusout"&&BS()}function yV(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Dp(Fs)}function _V(o,l){if(o==="click")return Dp(l)}function vV(o,l){if(o==="input"||o==="change")return Dp(l)}function AV(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var yi=typeof Object.is=="function"?Object.is:AV;function Wf(o,l){if(yi(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),d=Object.keys(l);if(f.length!==d.length)return!1;for(d=0;d<f.length;d++){var y=f[d];if(!Zn.call(l,y)||!yi(o[y],l[y]))return!1}return!0}function FS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function HS(o,l){var f=FS(o);o=0;for(var d;f;){if(f.nodeType===3){if(d=o+f.textContent.length,o<=l&&d>=l)return{node:f,offset:l-o};o=d}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=FS(f)}}function qS(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?qS(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function $S(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=kl(o.document);l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=kl(o.document)}return l}function Y_(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var TV=_s&&"documentMode"in document&&11>=document.documentMode,ac=null,Q_=null,Yf=null,X_=!1;function GS(o,l,f){var d=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;X_||ac==null||ac!==kl(d)||(d=ac,"selectionStart"in d&&Y_(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Yf&&Wf(Yf,d)||(Yf=d,d=vm(Q_,"onSelect"),0<d.length&&(l=new Zu("onSelect","select",null,l,f),o.push({event:l,listeners:d}),l.target=ac)))}function Bl(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var lc={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},J_={},KS={};_s&&(KS=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function jl(o){if(J_[o])return J_[o];if(!lc[o])return o;var l=lc[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in KS)return J_[o]=l[f];return o}var WS=jl("animationend"),YS=jl("animationiteration"),QS=jl("animationstart"),EV=jl("transitionrun"),bV=jl("transitionstart"),SV=jl("transitioncancel"),XS=jl("transitionend"),JS=new Map,Z_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Z_.push("scrollEnd");function vs(o,l){JS.set(o,l),de(l,[o])}var ZS=new WeakMap;function Ki(o,l){if(typeof o=="object"&&o!==null){var f=ZS.get(o);return f!==void 0?f:(l={value:o,source:l,stack:yo(l)},ZS.set(o,l),l)}return{value:o,source:l,stack:yo(l)}}var Wi=[],uc=0,e0=0;function Pp(){for(var o=uc,l=e0=uc=0;l<o;){var f=Wi[l];Wi[l++]=null;var d=Wi[l];Wi[l++]=null;var y=Wi[l];Wi[l++]=null;var v=Wi[l];if(Wi[l++]=null,d!==null&&y!==null){var R=d.pending;R===null?y.next=y:(y.next=R.next,R.next=y),d.pending=y}v!==0&&ew(f,y,v)}}function Lp(o,l,f,d){Wi[uc++]=o,Wi[uc++]=l,Wi[uc++]=f,Wi[uc++]=d,e0|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function t0(o,l,f,d){return Lp(o,l,f,d),Vp(o)}function cc(o,l){return Lp(o,null,null,l),Vp(o)}function ew(o,l,f){o.lanes|=f;var d=o.alternate;d!==null&&(d.lanes|=f);for(var y=!1,v=o.return;v!==null;)v.childLanes|=f,d=v.alternate,d!==null&&(d.childLanes|=f),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&l!==null&&(y=31-Jt(f),o=v.hiddenUpdates,d=o[y],d===null?o[y]=[l]:d.push(l),l.lane=f|536870912),v):null}function Vp(o){if(50<Ah)throw Ah=0,av=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var fc={};function wV(o,l,f,d){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(o,l,f,d){return new wV(o,l,f,d)}function n0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function wo(o,l){var f=o.alternate;return f===null?(f=_i(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function tw(o,l){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,l=f.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Up(o,l,f,d,y,v){var R=0;if(d=o,typeof o=="function")n0(o)&&(R=1);else if(typeof o=="string")R=CU(o,f,Se.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case x:return o=_i(31,f,l,y),o.elementType=x,o.lanes=v,o;case T:return Fl(f.children,y,v,l);case b:R=8,y|=24;break;case S:return o=_i(12,f,l,y|2),o.elementType=S,o.lanes=v,o;case B:return o=_i(13,f,l,y),o.elementType=B,o.lanes=v,o;case P:return o=_i(19,f,l,y),o.elementType=P,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case z:R=10;break e;case L:R=9;break e;case q:R=11;break e;case N:R=14;break e;case k:R=16,d=null;break e}R=29,f=Error(r(130,o===null?"null":typeof o,"")),d=null}return l=_i(R,f,l,y),l.elementType=o,l.type=d,l.lanes=v,l}function Fl(o,l,f,d){return o=_i(7,o,d,l),o.lanes=f,o}function r0(o,l,f){return o=_i(6,o,null,l),o.lanes=f,o}function i0(o,l,f){return l=_i(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var hc=[],dc=0,zp=null,Bp=0,Yi=[],Qi=0,Hl=null,Ro=1,Co="";function ql(o,l){hc[dc++]=Bp,hc[dc++]=zp,zp=o,Bp=l}function nw(o,l,f){Yi[Qi++]=Ro,Yi[Qi++]=Co,Yi[Qi++]=Hl,Hl=o;var d=Ro;o=Co;var y=32-Jt(d)-1;d&=~(1<<y),f+=1;var v=32-Jt(l)+y;if(30<v){var R=y-y%5;v=(d&(1<<R)-1).toString(32),d>>=R,y-=R,Ro=1<<32-Jt(l)+y|f<<y|d,Co=v+o}else Ro=1<<v|f<<y|d,Co=o}function s0(o){o.return!==null&&(ql(o,1),nw(o,1,0))}function o0(o){for(;o===zp;)zp=hc[--dc],hc[dc]=null,Bp=hc[--dc],hc[dc]=null;for(;o===Hl;)Hl=Yi[--Qi],Yi[Qi]=null,Co=Yi[--Qi],Yi[Qi]=null,Ro=Yi[--Qi],Yi[Qi]=null}var Vr=null,an=null,xt=!1,$l=null,Hs=!1,a0=Error(r(519));function Gl(o){var l=Error(r(418,""));throw Jf(Ki(l,o)),a0}function rw(o){var l=o.stateNode,f=o.type,d=o.memoizedProps;switch(l[ce]=o,l[ge]=d,f){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(f=0;f<Eh.length;f++)pt(Eh[f],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Il(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Xu(l);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Ol(l,d.value,d.defaultValue,d.children),Xu(l)}f=d.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||d.suppressHydrationWarning===!0||AR(l.textContent,f)?(d.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),d.onScroll!=null&&pt("scroll",l),d.onScrollEnd!=null&&pt("scrollend",l),d.onClick!=null&&(l.onclick=Am),l=!0):l=!1,l||Gl(o)}function iw(o){for(Vr=o.return;Vr;)switch(Vr.tag){case 5:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:Vr=Vr.return}}function Qf(o){if(o!==Vr)return!1;if(!xt)return iw(o),xt=!0,!1;var l=o.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||bv(o.type,o.memoizedProps)),f=!f),f&&an&&Gl(o),iw(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(l===0){an=Ts(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;o=o.nextSibling}an=null}}else l===27?(l=an,Ea(o.type)?(o=Cv,Cv=null,an=o):an=l):an=Vr?Ts(o.stateNode.nextSibling):null;return!0}function Xf(){an=Vr=null,xt=!1}function sw(){var o=$l;return o!==null&&(Zr===null?Zr=o:Zr.push.apply(Zr,o),$l=null),o}function Jf(o){$l===null?$l=[o]:$l.push(o)}var l0=ie(null),Kl=null,xo=null;function aa(o,l,f){le(l0,l._currentValue),l._currentValue=f}function ko(o){o._currentValue=l0.current,_e(l0)}function u0(o,l,f){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===f)break;o=o.return}}function c0(o,l,f,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var R=y.child;v=v.firstContext;e:for(;v!==null;){var O=v;v=y;for(var F=0;F<l.length;F++)if(O.context===l[F]){v.lanes|=f,O=v.alternate,O!==null&&(O.lanes|=f),u0(v.return,f,o),d||(R=null);break e}v=O.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(r(341));R.lanes|=f,v=R.alternate,v!==null&&(v.lanes|=f),u0(R,f,o),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===o){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function Zf(o,l,f,d){o=null;for(var y=l,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var O=y.type;yi(y.pendingProps.value,R.value)||(o!==null?o.push(O):o=[O])}}else if(y===Kt.current){if(R=y.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(xh):o=[xh])}y=y.return}o!==null&&c0(l,o,f,d),l.flags|=262144}function jp(o){for(o=o.firstContext;o!==null;){if(!yi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Wl(o){Kl=o,xo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function vr(o){return ow(Kl,o)}function Fp(o,l){return Kl===null&&Wl(o),ow(o,l)}function ow(o,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},xo===null){if(o===null)throw Error(r(308));xo=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else xo=xo.next=l;return f}var RV=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(f,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(f){return f()})}},CV=n.unstable_scheduleCallback,xV=n.unstable_NormalPriority,Pn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function f0(){return{controller:new RV,data:new Map,refCount:0}}function eh(o){o.refCount--,o.refCount===0&&CV(xV,function(){o.controller.abort()})}var th=null,h0=0,pc=0,mc=null;function kV(o,l){if(th===null){var f=th=[];h0=0,pc=pv(),mc={status:"pending",value:void 0,then:function(d){f.push(d)}}}return h0++,l.then(aw,aw),l}function aw(){if(--h0===0&&th!==null){mc!==null&&(mc.status="fulfilled");var o=th;th=null,pc=0,mc=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function IV(o,l){var f=[],d={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),d}var lw=Y.S;Y.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&kV(o,l),lw!==null&&lw(o,l)};var Yl=ie(null);function d0(){var o=Yl.current;return o!==null?o:$t.pooledCache}function Hp(o,l){l===null?le(Yl,Yl.current):le(Yl,l.pool)}function uw(){var o=d0();return o===null?null:{parent:Pn._currentValue,pool:o}}var nh=Error(r(460)),cw=Error(r(474)),qp=Error(r(542)),p0={then:function(){}};function fw(o){return o=o.status,o==="fulfilled"||o==="rejected"}function $p(){}function hw(o,l,f){switch(f=o[f],f===void 0?o.push(l):f!==l&&(l.then($p,$p),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,pw(o),o;default:if(typeof l.status=="string")l.then($p,$p);else{if(o=$t,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,pw(o),o}throw rh=l,nh}}var rh=null;function dw(){if(rh===null)throw Error(r(459));var o=rh;return rh=null,o}function pw(o){if(o===nh||o===qp)throw Error(r(483))}var la=!1;function m0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function g0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ua(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ca(o,l,f){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(Nt&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=Vp(o),ew(o,null,f),l}return Lp(o,d,l,f),Vp(o)}function ih(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var d=l.lanes;d&=o.pendingLanes,f|=d,l.lanes=f,Ot(o,f)}}function y0(o,l){var f=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,f===d)){var y=null,v=null;if(f=f.firstBaseUpdate,f!==null){do{var R={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};v===null?y=v=R:v=v.next=R,f=f.next}while(f!==null);v===null?y=v=l:v=v.next=l}else y=v=l;f={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}var _0=!1;function sh(){if(_0){var o=mc;if(o!==null)throw o}}function oh(o,l,f,d){_0=!1;var y=o.updateQueue;la=!1;var v=y.firstBaseUpdate,R=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var F=O,te=F.next;F.next=null,R===null?v=te:R.next=te,R=F;var ae=o.alternate;ae!==null&&(ae=ae.updateQueue,O=ae.lastBaseUpdate,O!==R&&(O===null?ae.firstBaseUpdate=te:O.next=te,ae.lastBaseUpdate=F))}if(v!==null){var fe=y.baseState;R=0,ae=te=F=null,O=v;do{var ne=O.lane&-536870913,re=ne!==O.lane;if(re?(Et&ne)===ne:(d&ne)===ne){ne!==0&&ne===pc&&(_0=!0),ae!==null&&(ae=ae.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Qe=o,Ge=O;ne=l;var Vt=f;switch(Ge.tag){case 1:if(Qe=Ge.payload,typeof Qe=="function"){fe=Qe.call(Vt,fe,ne);break e}fe=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ge.payload,ne=typeof Qe=="function"?Qe.call(Vt,fe,ne):Qe,ne==null)break e;fe=p({},fe,ne);break e;case 2:la=!0}}ne=O.callback,ne!==null&&(o.flags|=64,re&&(o.flags|=8192),re=y.callbacks,re===null?y.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ae===null?(te=ae=re,F=fe):ae=ae.next=re,R|=ne;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;re=O,O=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);ae===null&&(F=fe),y.baseState=F,y.firstBaseUpdate=te,y.lastBaseUpdate=ae,v===null&&(y.shared.lanes=0),_a|=R,o.lanes=R,o.memoizedState=fe}}function mw(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function gw(o,l){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)mw(f[o],l)}var gc=ie(null),Gp=ie(0);function yw(o,l){o=Lo,le(Gp,o),le(gc,l),Lo=o|l.baseLanes}function v0(){le(Gp,Lo),le(gc,gc.current)}function A0(){Lo=Gp.current,_e(gc),_e(Gp)}var fa=0,ot=null,Pt=null,Sn=null,Kp=!1,yc=!1,Ql=!1,Wp=0,ah=0,_c=null,OV=0;function gn(){throw Error(r(321))}function T0(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!yi(o[f],l[f]))return!1;return!0}function E0(o,l,f,d,y,v){return fa=v,ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Y.H=o===null||o.memoizedState===null?e1:t1,Ql=!1,v=f(d,y),Ql=!1,yc&&(v=vw(l,f,d,y)),_w(o),v}function _w(o){Y.H=em;var l=Pt!==null&&Pt.next!==null;if(fa=0,Sn=Pt=ot=null,Kp=!1,ah=0,_c=null,l)throw Error(r(300));o===null||Fn||(o=o.dependencies,o!==null&&jp(o)&&(Fn=!0))}function vw(o,l,f,d){ot=o;var y=0;do{if(yc&&(_c=null),ah=0,yc=!1,25<=y)throw Error(r(301));if(y+=1,Sn=Pt=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=UV,v=l(f,d)}while(yc);return v}function NV(){var o=Y.H,l=o.useState()[0];return l=typeof l.then=="function"?lh(l):l,o=o.useState()[0],(Pt!==null?Pt.memoizedState:null)!==o&&(ot.flags|=1024),l}function b0(){var o=Wp!==0;return Wp=0,o}function S0(o,l,f){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~f}function w0(o){if(Kp){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Kp=!1}fa=0,Sn=Pt=ot=null,yc=!1,ah=Wp=0,_c=null}function Xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?ot.memoizedState=Sn=o:Sn=Sn.next=o,Sn}function wn(){if(Pt===null){var o=ot.alternate;o=o!==null?o.memoizedState:null}else o=Pt.next;var l=Sn===null?ot.memoizedState:Sn.next;if(l!==null)Sn=l,Pt=o;else{if(o===null)throw ot.alternate===null?Error(r(467)):Error(r(310));Pt=o,o={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Sn===null?ot.memoizedState=Sn=o:Sn=Sn.next=o}return Sn}function R0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lh(o){var l=ah;return ah+=1,_c===null&&(_c=[]),o=hw(_c,o,l),l=ot,(Sn===null?l.memoizedState:Sn.next)===null&&(l=l.alternate,Y.H=l===null||l.memoizedState===null?e1:t1),o}function Yp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return lh(o);if(o.$$typeof===z)return vr(o)}throw Error(r(438,String(o)))}function C0(o){var l=null,f=ot.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var d=ot.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=R0(),ot.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(o),d=0;d<o;d++)f[d]=U;return l.index++,f}function Io(o,l){return typeof l=="function"?l(o):l}function Qp(o){var l=wn();return x0(l,Pt,o)}function x0(o,l,f){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=f;var y=o.baseQueue,v=d.pending;if(v!==null){if(y!==null){var R=y.next;y.next=v.next,v.next=R}l.baseQueue=y=v,d.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{l=y.next;var O=R=null,F=null,te=l,ae=!1;do{var fe=te.lane&-536870913;if(fe!==te.lane?(Et&fe)===fe:(fa&fe)===fe){var ne=te.revertLane;if(ne===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),fe===pc&&(ae=!0);else if((fa&ne)===ne){te=te.next,ne===pc&&(ae=!0);continue}else fe={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(O=F=fe,R=v):F=F.next=fe,ot.lanes|=ne,_a|=ne;fe=te.action,Ql&&f(v,fe),v=te.hasEagerState?te.eagerState:f(v,fe)}else ne={lane:fe,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(O=F=ne,R=v):F=F.next=ne,ot.lanes|=fe,_a|=fe;te=te.next}while(te!==null&&te!==l);if(F===null?R=v:F.next=O,!yi(v,o.memoizedState)&&(Fn=!0,ae&&(f=mc,f!==null)))throw f;o.memoizedState=v,o.baseState=R,o.baseQueue=F,d.lastRenderedState=v}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function k0(o){var l=wn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var d=f.dispatch,y=f.pending,v=l.memoizedState;if(y!==null){f.pending=null;var R=y=y.next;do v=o(v,R.action),R=R.next;while(R!==y);yi(v,l.memoizedState)||(Fn=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),f.lastRenderedState=v}return[v,d]}function Aw(o,l,f){var d=ot,y=wn(),v=xt;if(v){if(f===void 0)throw Error(r(407));f=f()}else f=l();var R=!yi((Pt||y).memoizedState,f);R&&(y.memoizedState=f,Fn=!0),y=y.queue;var O=bw.bind(null,d,y,o);if(uh(2048,8,O,[o]),y.getSnapshot!==l||R||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,vc(9,Xp(),Ew.bind(null,d,y,f,l),null),$t===null)throw Error(r(349));v||(fa&124)!==0||Tw(d,l,f)}return f}function Tw(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=ot.updateQueue,l===null?(l=R0(),ot.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function Ew(o,l,f,d){l.value=f,l.getSnapshot=d,Sw(l)&&ww(o)}function bw(o,l,f){return f(function(){Sw(l)&&ww(o)})}function Sw(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!yi(o,f)}catch{return!0}}function ww(o){var l=cc(o,2);l!==null&&bi(l,o,2)}function I0(o){var l=Xr();if(typeof o=="function"){var f=o;if(o=f(),Ql){Nn(!0);try{f()}finally{Nn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:o},l}function Rw(o,l,f,d){return o.baseState=f,x0(o,Pt,typeof d=="function"?d:Io)}function MV(o,l,f,d,y){if(Zp(o))throw Error(r(485));if(o=l.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){v.listeners.push(R)}};Y.T!==null?f(!0):v.isTransition=!1,d(v),f=l.pending,f===null?(v.next=l.pending=v,Cw(l,v)):(v.next=f.next,l.pending=f.next=v)}}function Cw(o,l){var f=l.action,d=l.payload,y=o.state;if(l.isTransition){var v=Y.T,R={};Y.T=R;try{var O=f(y,d),F=Y.S;F!==null&&F(R,O),xw(o,l,O)}catch(te){O0(o,l,te)}finally{Y.T=v}}else try{v=f(y,d),xw(o,l,v)}catch(te){O0(o,l,te)}}function xw(o,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(d){kw(o,l,d)},function(d){return O0(o,l,d)}):kw(o,l,f)}function kw(o,l,f){l.status="fulfilled",l.value=f,Iw(l),o.state=f,l=o.pending,l!==null&&(f=l.next,f===l?o.pending=null:(f=f.next,l.next=f,Cw(o,f)))}function O0(o,l,f){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=f,Iw(l),l=l.next;while(l!==d)}o.action=null}function Iw(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function Ow(o,l){return l}function Nw(o,l){if(xt){var f=$t.formState;if(f!==null){e:{var d=ot;if(xt){if(an){t:{for(var y=an,v=Hs;y.nodeType!==8;){if(!v){y=null;break t}if(y=Ts(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){an=Ts(y.nextSibling),d=y.data==="F!";break e}}Gl(d)}d=!1}d&&(l=f[0])}}return f=Xr(),f.memoizedState=f.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ow,lastRenderedState:l},f.queue=d,f=Xw.bind(null,ot,d),d.dispatch=f,d=I0(!1),v=L0.bind(null,ot,!1,d.queue),d=Xr(),y={state:l,dispatch:null,action:o,pending:null},d.queue=y,f=MV.bind(null,ot,y,v,f),y.dispatch=f,d.memoizedState=o,[l,f,!1]}function Mw(o){var l=wn();return Dw(l,Pt,o)}function Dw(o,l,f){if(l=x0(o,l,Ow)[0],o=Qp(Io)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=lh(l)}catch(R){throw R===nh?qp:R}else d=l;l=wn();var y=l.queue,v=y.dispatch;return f!==l.memoizedState&&(ot.flags|=2048,vc(9,Xp(),DV.bind(null,y,f),null)),[d,v,o]}function DV(o,l){o.action=l}function Pw(o){var l=wn(),f=Pt;if(f!==null)return Dw(l,f,o);wn(),l=l.memoizedState,f=wn();var d=f.queue.dispatch;return f.memoizedState=o,[l,d,!1]}function vc(o,l,f,d){return o={tag:o,create:f,deps:d,inst:l,next:null},l=ot.updateQueue,l===null&&(l=R0(),ot.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=o.next=o:(d=f.next,f.next=o,o.next=d,l.lastEffect=o),o}function Xp(){return{destroy:void 0,resource:void 0}}function Lw(){return wn().memoizedState}function Jp(o,l,f,d){var y=Xr();d=d===void 0?null:d,ot.flags|=o,y.memoizedState=vc(1|l,Xp(),f,d)}function uh(o,l,f,d){var y=wn();d=d===void 0?null:d;var v=y.memoizedState.inst;Pt!==null&&d!==null&&T0(d,Pt.memoizedState.deps)?y.memoizedState=vc(l,v,f,d):(ot.flags|=o,y.memoizedState=vc(1|l,v,f,d))}function Vw(o,l){Jp(8390656,8,o,l)}function Uw(o,l){uh(2048,8,o,l)}function zw(o,l){return uh(4,2,o,l)}function Bw(o,l){return uh(4,4,o,l)}function jw(o,l){if(typeof l=="function"){o=o();var f=l(o);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Fw(o,l,f){f=f!=null?f.concat([o]):null,uh(4,4,jw.bind(null,l,o),f)}function N0(){}function Hw(o,l){var f=wn();l=l===void 0?null:l;var d=f.memoizedState;return l!==null&&T0(l,d[1])?d[0]:(f.memoizedState=[o,l],o)}function qw(o,l){var f=wn();l=l===void 0?null:l;var d=f.memoizedState;if(l!==null&&T0(l,d[1]))return d[0];if(d=o(),Ql){Nn(!0);try{o()}finally{Nn(!1)}}return f.memoizedState=[d,l],d}function M0(o,l,f){return f===void 0||(fa&1073741824)!==0?o.memoizedState=l:(o.memoizedState=f,o=K1(),ot.lanes|=o,_a|=o,f)}function $w(o,l,f,d){return yi(f,l)?f:gc.current!==null?(o=M0(o,f,d),yi(o,l)||(Fn=!0),o):(fa&42)===0?(Fn=!0,o.memoizedState=f):(o=K1(),ot.lanes|=o,_a|=o,l)}function Gw(o,l,f,d,y){var v=oe.p;oe.p=v!==0&&8>v?v:8;var R=Y.T,O={};Y.T=O,L0(o,!1,l,f);try{var F=y(),te=Y.S;if(te!==null&&te(O,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ae=IV(F,d);ch(o,l,ae,Ei(o))}else ch(o,l,d,Ei(o))}catch(fe){ch(o,l,{then:function(){},status:"rejected",reason:fe},Ei())}finally{oe.p=v,Y.T=R}}function PV(){}function D0(o,l,f,d){if(o.tag!==5)throw Error(r(476));var y=Kw(o).queue;Gw(o,y,l,Ae,f===null?PV:function(){return Ww(o),f(d)})}function Kw(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:Ae},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:f},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function Ww(o){var l=Kw(o).next.queue;ch(o,l,{},Ei())}function P0(){return vr(xh)}function Yw(){return wn().memoizedState}function Qw(){return wn().memoizedState}function LV(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var f=Ei();o=ua(f);var d=ca(l,o,f);d!==null&&(bi(d,l,f),ih(d,l,f)),l={cache:f0()},o.payload=l;return}l=l.return}}function VV(o,l,f){var d=Ei();f={lane:d,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Zp(o)?Jw(l,f):(f=t0(o,l,f,d),f!==null&&(bi(f,o,d),Zw(f,l,d)))}function Xw(o,l,f){var d=Ei();ch(o,l,f,d)}function ch(o,l,f,d){var y={lane:d,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Zp(o))Jw(l,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var R=l.lastRenderedState,O=v(R,f);if(y.hasEagerState=!0,y.eagerState=O,yi(O,R))return Lp(o,l,y,0),$t===null&&Pp(),!1}catch{}finally{}if(f=t0(o,l,y,d),f!==null)return bi(f,o,d),Zw(f,l,d),!0}return!1}function L0(o,l,f,d){if(d={lane:2,revertLane:pv(),action:d,hasEagerState:!1,eagerState:null,next:null},Zp(o)){if(l)throw Error(r(479))}else l=t0(o,f,d,2),l!==null&&bi(l,o,2)}function Zp(o){var l=o.alternate;return o===ot||l!==null&&l===ot}function Jw(o,l){yc=Kp=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function Zw(o,l,f){if((f&4194048)!==0){var d=l.lanes;d&=o.pendingLanes,f|=d,l.lanes=f,Ot(o,f)}}var em={readContext:vr,use:Yp,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn},e1={readContext:vr,use:Yp,useCallback:function(o,l){return Xr().memoizedState=[o,l===void 0?null:l],o},useContext:vr,useEffect:Vw,useImperativeHandle:function(o,l,f){f=f!=null?f.concat([o]):null,Jp(4194308,4,jw.bind(null,l,o),f)},useLayoutEffect:function(o,l){return Jp(4194308,4,o,l)},useInsertionEffect:function(o,l){Jp(4,2,o,l)},useMemo:function(o,l){var f=Xr();l=l===void 0?null:l;var d=o();if(Ql){Nn(!0);try{o()}finally{Nn(!1)}}return f.memoizedState=[d,l],d},useReducer:function(o,l,f){var d=Xr();if(f!==void 0){var y=f(l);if(Ql){Nn(!0);try{f(l)}finally{Nn(!1)}}}else y=l;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=VV.bind(null,ot,o),[d.memoizedState,o]},useRef:function(o){var l=Xr();return o={current:o},l.memoizedState=o},useState:function(o){o=I0(o);var l=o.queue,f=Xw.bind(null,ot,l);return l.dispatch=f,[o.memoizedState,f]},useDebugValue:N0,useDeferredValue:function(o,l){var f=Xr();return M0(f,o,l)},useTransition:function(){var o=I0(!1);return o=Gw.bind(null,ot,o.queue,!0,!1),Xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,f){var d=ot,y=Xr();if(xt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),$t===null)throw Error(r(349));(Et&124)!==0||Tw(d,l,f)}y.memoizedState=f;var v={value:f,getSnapshot:l};return y.queue=v,Vw(bw.bind(null,d,v,o),[o]),d.flags|=2048,vc(9,Xp(),Ew.bind(null,d,v,f,l),null),f},useId:function(){var o=Xr(),l=$t.identifierPrefix;if(xt){var f=Co,d=Ro;f=(d&~(1<<32-Jt(d)-1)).toString(32)+f,l="«"+l+"R"+f,f=Wp++,0<f&&(l+="H"+f.toString(32)),l+="»"}else f=OV++,l="«"+l+"r"+f.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:P0,useFormState:Nw,useActionState:Nw,useOptimistic:function(o){var l=Xr();l.memoizedState=l.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=L0.bind(null,ot,!0,f),f.dispatch=l,[o,l]},useMemoCache:C0,useCacheRefresh:function(){return Xr().memoizedState=LV.bind(null,ot)}},t1={readContext:vr,use:Yp,useCallback:Hw,useContext:vr,useEffect:Uw,useImperativeHandle:Fw,useInsertionEffect:zw,useLayoutEffect:Bw,useMemo:qw,useReducer:Qp,useRef:Lw,useState:function(){return Qp(Io)},useDebugValue:N0,useDeferredValue:function(o,l){var f=wn();return $w(f,Pt.memoizedState,o,l)},useTransition:function(){var o=Qp(Io)[0],l=wn().memoizedState;return[typeof o=="boolean"?o:lh(o),l]},useSyncExternalStore:Aw,useId:Yw,useHostTransitionStatus:P0,useFormState:Mw,useActionState:Mw,useOptimistic:function(o,l){var f=wn();return Rw(f,Pt,o,l)},useMemoCache:C0,useCacheRefresh:Qw},UV={readContext:vr,use:Yp,useCallback:Hw,useContext:vr,useEffect:Uw,useImperativeHandle:Fw,useInsertionEffect:zw,useLayoutEffect:Bw,useMemo:qw,useReducer:k0,useRef:Lw,useState:function(){return k0(Io)},useDebugValue:N0,useDeferredValue:function(o,l){var f=wn();return Pt===null?M0(f,o,l):$w(f,Pt.memoizedState,o,l)},useTransition:function(){var o=k0(Io)[0],l=wn().memoizedState;return[typeof o=="boolean"?o:lh(o),l]},useSyncExternalStore:Aw,useId:Yw,useHostTransitionStatus:P0,useFormState:Pw,useActionState:Pw,useOptimistic:function(o,l){var f=wn();return Pt!==null?Rw(f,Pt,o,l):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:C0,useCacheRefresh:Qw},Ac=null,fh=0;function tm(o){var l=fh;return fh+=1,Ac===null&&(Ac=[]),hw(Ac,o,l)}function hh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function nm(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function n1(o){var l=o._init;return l(o._payload)}function r1(o){function l(Q,K){if(o){var ee=Q.deletions;ee===null?(Q.deletions=[K],Q.flags|=16):ee.push(K)}}function f(Q,K){if(!o)return null;for(;K!==null;)l(Q,K),K=K.sibling;return null}function d(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function y(Q,K){return Q=wo(Q,K),Q.index=0,Q.sibling=null,Q}function v(Q,K,ee){return Q.index=ee,o?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<K?(Q.flags|=67108866,K):ee):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function R(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function O(Q,K,ee,ue){return K===null||K.tag!==6?(K=r0(ee,Q.mode,ue),K.return=Q,K):(K=y(K,ee),K.return=Q,K)}function F(Q,K,ee,ue){var Me=ee.type;return Me===T?ae(Q,K,ee.props.children,ue,ee.key):K!==null&&(K.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&n1(Me)===K.type)?(K=y(K,ee.props),hh(K,ee),K.return=Q,K):(K=Up(ee.type,ee.key,ee.props,null,Q.mode,ue),hh(K,ee),K.return=Q,K)}function te(Q,K,ee,ue){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=i0(ee,Q.mode,ue),K.return=Q,K):(K=y(K,ee.children||[]),K.return=Q,K)}function ae(Q,K,ee,ue,Me){return K===null||K.tag!==7?(K=Fl(ee,Q.mode,ue,Me),K.return=Q,K):(K=y(K,ee),K.return=Q,K)}function fe(Q,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=r0(""+K,Q.mode,ee),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _:return ee=Up(K.type,K.key,K.props,null,Q.mode,ee),hh(ee,K),ee.return=Q,ee;case A:return K=i0(K,Q.mode,ee),K.return=Q,K;case k:var ue=K._init;return K=ue(K._payload),fe(Q,K,ee)}if(Oe(K)||j(K))return K=Fl(K,Q.mode,ee,null),K.return=Q,K;if(typeof K.then=="function")return fe(Q,tm(K),ee);if(K.$$typeof===z)return fe(Q,Fp(Q,K),ee);nm(Q,K)}return null}function ne(Q,K,ee,ue){var Me=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Me!==null?null:O(Q,K,""+ee,ue);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return ee.key===Me?F(Q,K,ee,ue):null;case A:return ee.key===Me?te(Q,K,ee,ue):null;case k:return Me=ee._init,ee=Me(ee._payload),ne(Q,K,ee,ue)}if(Oe(ee)||j(ee))return Me!==null?null:ae(Q,K,ee,ue,null);if(typeof ee.then=="function")return ne(Q,K,tm(ee),ue);if(ee.$$typeof===z)return ne(Q,K,Fp(Q,ee),ue);nm(Q,ee)}return null}function re(Q,K,ee,ue,Me){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Q=Q.get(ee)||null,O(K,Q,""+ue,Me);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case _:return Q=Q.get(ue.key===null?ee:ue.key)||null,F(K,Q,ue,Me);case A:return Q=Q.get(ue.key===null?ee:ue.key)||null,te(K,Q,ue,Me);case k:var ct=ue._init;return ue=ct(ue._payload),re(Q,K,ee,ue,Me)}if(Oe(ue)||j(ue))return Q=Q.get(ee)||null,ae(K,Q,ue,Me,null);if(typeof ue.then=="function")return re(Q,K,ee,tm(ue),Me);if(ue.$$typeof===z)return re(Q,K,ee,Fp(K,ue),Me);nm(K,ue)}return null}function Qe(Q,K,ee,ue){for(var Me=null,ct=null,ze=K,Ke=K=0,qn=null;ze!==null&&Ke<ee.length;Ke++){ze.index>Ke?(qn=ze,ze=null):qn=ze.sibling;var wt=ne(Q,ze,ee[Ke],ue);if(wt===null){ze===null&&(ze=qn);break}o&&ze&&wt.alternate===null&&l(Q,ze),K=v(wt,K,Ke),ct===null?Me=wt:ct.sibling=wt,ct=wt,ze=qn}if(Ke===ee.length)return f(Q,ze),xt&&ql(Q,Ke),Me;if(ze===null){for(;Ke<ee.length;Ke++)ze=fe(Q,ee[Ke],ue),ze!==null&&(K=v(ze,K,Ke),ct===null?Me=ze:ct.sibling=ze,ct=ze);return xt&&ql(Q,Ke),Me}for(ze=d(ze);Ke<ee.length;Ke++)qn=re(ze,Q,Ke,ee[Ke],ue),qn!==null&&(o&&qn.alternate!==null&&ze.delete(qn.key===null?Ke:qn.key),K=v(qn,K,Ke),ct===null?Me=qn:ct.sibling=qn,ct=qn);return o&&ze.forEach(function(Ca){return l(Q,Ca)}),xt&&ql(Q,Ke),Me}function Ge(Q,K,ee,ue){if(ee==null)throw Error(r(151));for(var Me=null,ct=null,ze=K,Ke=K=0,qn=null,wt=ee.next();ze!==null&&!wt.done;Ke++,wt=ee.next()){ze.index>Ke?(qn=ze,ze=null):qn=ze.sibling;var Ca=ne(Q,ze,wt.value,ue);if(Ca===null){ze===null&&(ze=qn);break}o&&ze&&Ca.alternate===null&&l(Q,ze),K=v(Ca,K,Ke),ct===null?Me=Ca:ct.sibling=Ca,ct=Ca,ze=qn}if(wt.done)return f(Q,ze),xt&&ql(Q,Ke),Me;if(ze===null){for(;!wt.done;Ke++,wt=ee.next())wt=fe(Q,wt.value,ue),wt!==null&&(K=v(wt,K,Ke),ct===null?Me=wt:ct.sibling=wt,ct=wt);return xt&&ql(Q,Ke),Me}for(ze=d(ze);!wt.done;Ke++,wt=ee.next())wt=re(ze,Q,Ke,wt.value,ue),wt!==null&&(o&&wt.alternate!==null&&ze.delete(wt.key===null?Ke:wt.key),K=v(wt,K,Ke),ct===null?Me=wt:ct.sibling=wt,ct=wt);return o&&ze.forEach(function(zU){return l(Q,zU)}),xt&&ql(Q,Ke),Me}function Vt(Q,K,ee,ue){if(typeof ee=="object"&&ee!==null&&ee.type===T&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:e:{for(var Me=ee.key;K!==null;){if(K.key===Me){if(Me=ee.type,Me===T){if(K.tag===7){f(Q,K.sibling),ue=y(K,ee.props.children),ue.return=Q,Q=ue;break e}}else if(K.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&n1(Me)===K.type){f(Q,K.sibling),ue=y(K,ee.props),hh(ue,ee),ue.return=Q,Q=ue;break e}f(Q,K);break}else l(Q,K);K=K.sibling}ee.type===T?(ue=Fl(ee.props.children,Q.mode,ue,ee.key),ue.return=Q,Q=ue):(ue=Up(ee.type,ee.key,ee.props,null,Q.mode,ue),hh(ue,ee),ue.return=Q,Q=ue)}return R(Q);case A:e:{for(Me=ee.key;K!==null;){if(K.key===Me)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){f(Q,K.sibling),ue=y(K,ee.children||[]),ue.return=Q,Q=ue;break e}else{f(Q,K);break}else l(Q,K);K=K.sibling}ue=i0(ee,Q.mode,ue),ue.return=Q,Q=ue}return R(Q);case k:return Me=ee._init,ee=Me(ee._payload),Vt(Q,K,ee,ue)}if(Oe(ee))return Qe(Q,K,ee,ue);if(j(ee)){if(Me=j(ee),typeof Me!="function")throw Error(r(150));return ee=Me.call(ee),Ge(Q,K,ee,ue)}if(typeof ee.then=="function")return Vt(Q,K,tm(ee),ue);if(ee.$$typeof===z)return Vt(Q,K,Fp(Q,ee),ue);nm(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,K!==null&&K.tag===6?(f(Q,K.sibling),ue=y(K,ee),ue.return=Q,Q=ue):(f(Q,K),ue=r0(ee,Q.mode,ue),ue.return=Q,Q=ue),R(Q)):f(Q,K)}return function(Q,K,ee,ue){try{fh=0;var Me=Vt(Q,K,ee,ue);return Ac=null,Me}catch(ze){if(ze===nh||ze===qp)throw ze;var ct=_i(29,ze,null,Q.mode);return ct.lanes=ue,ct.return=Q,ct}finally{}}}var Tc=r1(!0),i1=r1(!1),Xi=ie(null),qs=null;function ha(o){var l=o.alternate;le(Ln,Ln.current&1),le(Xi,o),qs===null&&(l===null||gc.current!==null||l.memoizedState!==null)&&(qs=o)}function s1(o){if(o.tag===22){if(le(Ln,Ln.current),le(Xi,o),qs===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(qs=o)}}else da()}function da(){le(Ln,Ln.current),le(Xi,Xi.current)}function Oo(o){_e(Xi),qs===o&&(qs=null),_e(Ln)}var Ln=ie(0);function rm(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Rv(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function V0(o,l,f,d){l=o.memoizedState,f=f(d,l),f=f==null?l:p({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var U0={enqueueSetState:function(o,l,f){o=o._reactInternals;var d=Ei(),y=ua(d);y.payload=l,f!=null&&(y.callback=f),l=ca(o,y,d),l!==null&&(bi(l,o,d),ih(l,o,d))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var d=Ei(),y=ua(d);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=ca(o,y,d),l!==null&&(bi(l,o,d),ih(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=Ei(),d=ua(f);d.tag=2,l!=null&&(d.callback=l),l=ca(o,d,f),l!==null&&(bi(l,o,f),ih(l,o,f))}};function o1(o,l,f,d,y,v,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,v,R):l.prototype&&l.prototype.isPureReactComponent?!Wf(f,d)||!Wf(y,v):!0}function a1(o,l,f,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,d),l.state!==o&&U0.enqueueReplaceState(l,l.state,null)}function Xl(o,l){var f=l;if("ref"in l){f={};for(var d in l)d!=="ref"&&(f[d]=l[d])}if(o=o.defaultProps){f===l&&(f=p({},f));for(var y in o)f[y]===void 0&&(f[y]=o[y])}return f}var im=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function l1(o){im(o)}function u1(o){console.error(o)}function c1(o){im(o)}function sm(o,l){try{var f=o.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function f1(o,l,f){try{var d=o.onCaughtError;d(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function z0(o,l,f){return f=ua(f),f.tag=3,f.payload={element:null},f.callback=function(){sm(o,l)},f}function h1(o){return o=ua(o),o.tag=3,o}function d1(o,l,f,d){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var v=d.value;o.payload=function(){return y(v)},o.callback=function(){f1(l,f,d)}}var R=f.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(o.callback=function(){f1(l,f,d),typeof y!="function"&&(va===null?va=new Set([this]):va.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function zV(o,l,f,d,y){if(f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=f.alternate,l!==null&&Zf(l,f,y,!0),f=Xi.current,f!==null){switch(f.tag){case 13:return qs===null?uv():f.alternate===null&&ln===0&&(ln=3),f.flags&=-257,f.flags|=65536,f.lanes=y,d===p0?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([d]):l.add(d),fv(o,d,y)),!1;case 22:return f.flags|=65536,d===p0?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([d]):f.add(d)),fv(o,d,y)),!1}throw Error(r(435,f.tag))}return fv(o,d,y),uv(),!1}if(xt)return l=Xi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==a0&&(o=Error(r(422),{cause:d}),Jf(Ki(o,f)))):(d!==a0&&(l=Error(r(423),{cause:d}),Jf(Ki(l,f))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=Ki(d,f),y=z0(o.stateNode,d,y),y0(o,y),ln!==4&&(ln=2)),!1;var v=Error(r(520),{cause:d});if(v=Ki(v,f),vh===null?vh=[v]:vh.push(v),ln!==4&&(ln=2),l===null)return!0;d=Ki(d,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,o=y&-y,f.lanes|=o,o=z0(f.stateNode,d,o),y0(f,o),!1;case 1:if(l=f.type,v=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(va===null||!va.has(v))))return f.flags|=65536,y&=-y,f.lanes|=y,y=h1(y),d1(y,o,f,d),y0(f,y),!1}f=f.return}while(f!==null);return!1}var p1=Error(r(461)),Fn=!1;function sr(o,l,f,d){l.child=o===null?i1(l,null,f,d):Tc(l,o.child,f,d)}function m1(o,l,f,d,y){f=f.render;var v=l.ref;if("ref"in d){var R={};for(var O in d)O!=="ref"&&(R[O]=d[O])}else R=d;return Wl(l),d=E0(o,l,f,R,v,y),O=b0(),o!==null&&!Fn?(S0(o,l,y),No(o,l,y)):(xt&&O&&s0(l),l.flags|=1,sr(o,l,d,y),l.child)}function g1(o,l,f,d,y){if(o===null){var v=f.type;return typeof v=="function"&&!n0(v)&&v.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=v,y1(o,l,v,d,y)):(o=Up(f.type,null,d,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(v=o.child,!K0(o,y)){var R=v.memoizedProps;if(f=f.compare,f=f!==null?f:Wf,f(R,d)&&o.ref===l.ref)return No(o,l,y)}return l.flags|=1,o=wo(v,d),o.ref=l.ref,o.return=l,l.child=o}function y1(o,l,f,d,y){if(o!==null){var v=o.memoizedProps;if(Wf(v,d)&&o.ref===l.ref)if(Fn=!1,l.pendingProps=d=v,K0(o,y))(o.flags&131072)!==0&&(Fn=!0);else return l.lanes=o.lanes,No(o,l,y)}return B0(o,l,f,d,y)}function _1(o,l,f){var d=l.pendingProps,y=d.children,v=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=v!==null?v.baseLanes|f:f,o!==null){for(y=l.child=o.child,v=0;y!==null;)v=v|y.lanes|y.childLanes,y=y.sibling;l.childLanes=v&~d}else l.childLanes=0,l.child=null;return v1(o,l,d,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Hp(l,v!==null?v.cachePool:null),v!==null?yw(l,v):v0(),s1(l);else return l.lanes=l.childLanes=536870912,v1(o,l,v!==null?v.baseLanes|f:f,f)}else v!==null?(Hp(l,v.cachePool),yw(l,v),da(),l.memoizedState=null):(o!==null&&Hp(l,null),v0(),da());return sr(o,l,y,f),l.child}function v1(o,l,f,d){var y=d0();return y=y===null?null:{parent:Pn._currentValue,pool:y},l.memoizedState={baseLanes:f,cachePool:y},o!==null&&Hp(l,null),v0(),s1(l),o!==null&&Zf(o,l,d,!0),null}function om(o,l){var f=l.ref;if(f===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(l.flags|=4194816)}}function B0(o,l,f,d,y){return Wl(l),f=E0(o,l,f,d,void 0,y),d=b0(),o!==null&&!Fn?(S0(o,l,y),No(o,l,y)):(xt&&d&&s0(l),l.flags|=1,sr(o,l,f,y),l.child)}function A1(o,l,f,d,y,v){return Wl(l),l.updateQueue=null,f=vw(l,d,f,y),_w(o),d=b0(),o!==null&&!Fn?(S0(o,l,v),No(o,l,v)):(xt&&d&&s0(l),l.flags|=1,sr(o,l,f,v),l.child)}function T1(o,l,f,d,y){if(Wl(l),l.stateNode===null){var v=fc,R=f.contextType;typeof R=="object"&&R!==null&&(v=vr(R)),v=new f(d,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=U0,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=d,v.state=l.memoizedState,v.refs={},m0(l),R=f.contextType,v.context=typeof R=="object"&&R!==null?vr(R):fc,v.state=l.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(V0(l,f,R,d),v.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(R=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),R!==v.state&&U0.enqueueReplaceState(v,v.state,null),oh(l,d,v,y),sh(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){v=l.stateNode;var O=l.memoizedProps,F=Xl(f,O);v.props=F;var te=v.context,ae=f.contextType;R=fc,typeof ae=="object"&&ae!==null&&(R=vr(ae));var fe=f.getDerivedStateFromProps;ae=typeof fe=="function"||typeof v.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,ae||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(O||te!==R)&&a1(l,v,d,R),la=!1;var ne=l.memoizedState;v.state=ne,oh(l,d,v,y),sh(),te=l.memoizedState,O||ne!==te||la?(typeof fe=="function"&&(V0(l,f,fe,d),te=l.memoizedState),(F=la||o1(l,f,F,d,ne,te,R))?(ae||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=te),v.props=d,v.state=te,v.context=R,d=F):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{v=l.stateNode,g0(o,l),R=l.memoizedProps,ae=Xl(f,R),v.props=ae,fe=l.pendingProps,ne=v.context,te=f.contextType,F=fc,typeof te=="object"&&te!==null&&(F=vr(te)),O=f.getDerivedStateFromProps,(te=typeof O=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==fe||ne!==F)&&a1(l,v,d,F),la=!1,ne=l.memoizedState,v.state=ne,oh(l,d,v,y),sh();var re=l.memoizedState;R!==fe||ne!==re||la||o!==null&&o.dependencies!==null&&jp(o.dependencies)?(typeof O=="function"&&(V0(l,f,O,d),re=l.memoizedState),(ae=la||o1(l,f,ae,d,ne,re,F)||o!==null&&o.dependencies!==null&&jp(o.dependencies))?(te||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,re,F),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,re,F)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=re),v.props=d,v.state=re,v.context=F,d=ae):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),d=!1)}return v=d,om(o,l),d=(l.flags&128)!==0,v||d?(v=l.stateNode,f=d&&typeof f.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,o!==null&&d?(l.child=Tc(l,o.child,null,y),l.child=Tc(l,null,f,y)):sr(o,l,f,y),l.memoizedState=v.state,o=l.child):o=No(o,l,y),o}function E1(o,l,f,d){return Xf(),l.flags|=256,sr(o,l,f,d),l.child}var j0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function F0(o){return{baseLanes:o,cachePool:uw()}}function H0(o,l,f){return o=o!==null?o.childLanes&~f:0,l&&(o|=Ji),o}function b1(o,l,f){var d=l.pendingProps,y=!1,v=(l.flags&128)!==0,R;if((R=v)||(R=o!==null&&o.memoizedState===null?!1:(Ln.current&2)!==0),R&&(y=!0,l.flags&=-129),R=(l.flags&32)!==0,l.flags&=-33,o===null){if(xt){if(y?ha(l):da(),xt){var O=an,F;if(F=O){e:{for(F=O,O=Hs;F.nodeType!==8;){if(!O){O=null;break e}if(F=Ts(F.nextSibling),F===null){O=null;break e}}O=F}O!==null?(l.memoizedState={dehydrated:O,treeContext:Hl!==null?{id:Ro,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},F=_i(18,null,null,0),F.stateNode=O,F.return=l,l.child=F,Vr=l,an=null,F=!0):F=!1}F||Gl(l)}if(O=l.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Rv(O)?l.lanes=32:l.lanes=536870912,null;Oo(l)}return O=d.children,d=d.fallback,y?(da(),y=l.mode,O=am({mode:"hidden",children:O},y),d=Fl(d,y,f,null),O.return=l,d.return=l,O.sibling=d,l.child=O,y=l.child,y.memoizedState=F0(f),y.childLanes=H0(o,R,f),l.memoizedState=j0,d):(ha(l),q0(l,O))}if(F=o.memoizedState,F!==null&&(O=F.dehydrated,O!==null)){if(v)l.flags&256?(ha(l),l.flags&=-257,l=$0(o,l,f)):l.memoizedState!==null?(da(),l.child=o.child,l.flags|=128,l=null):(da(),y=d.fallback,O=l.mode,d=am({mode:"visible",children:d.children},O),y=Fl(y,O,f,null),y.flags|=2,d.return=l,y.return=l,d.sibling=y,l.child=d,Tc(l,o.child,null,f),d=l.child,d.memoizedState=F0(f),d.childLanes=H0(o,R,f),l.memoizedState=j0,l=y);else if(ha(l),Rv(O)){if(R=O.nextSibling&&O.nextSibling.dataset,R)var te=R.dgst;R=te,d=Error(r(419)),d.stack="",d.digest=R,Jf({value:d,source:null,stack:null}),l=$0(o,l,f)}else if(Fn||Zf(o,l,f,!1),R=(f&o.childLanes)!==0,Fn||R){if(R=$t,R!==null&&(d=f&-f,d=(d&42)!==0?1:nr(d),d=(d&(R.suspendedLanes|f))!==0?0:d,d!==0&&d!==F.retryLane))throw F.retryLane=d,cc(o,d),bi(R,o,d),p1;O.data==="$?"||uv(),l=$0(o,l,f)}else O.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=F.treeContext,an=Ts(O.nextSibling),Vr=l,xt=!0,$l=null,Hs=!1,o!==null&&(Yi[Qi++]=Ro,Yi[Qi++]=Co,Yi[Qi++]=Hl,Ro=o.id,Co=o.overflow,Hl=l),l=q0(l,d.children),l.flags|=4096);return l}return y?(da(),y=d.fallback,O=l.mode,F=o.child,te=F.sibling,d=wo(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,te!==null?y=wo(te,y):(y=Fl(y,O,f,null),y.flags|=2),y.return=l,d.return=l,d.sibling=y,l.child=d,d=y,y=l.child,O=o.child.memoizedState,O===null?O=F0(f):(F=O.cachePool,F!==null?(te=Pn._currentValue,F=F.parent!==te?{parent:te,pool:te}:F):F=uw(),O={baseLanes:O.baseLanes|f,cachePool:F}),y.memoizedState=O,y.childLanes=H0(o,R,f),l.memoizedState=j0,d):(ha(l),f=o.child,o=f.sibling,f=wo(f,{mode:"visible",children:d.children}),f.return=l,f.sibling=null,o!==null&&(R=l.deletions,R===null?(l.deletions=[o],l.flags|=16):R.push(o)),l.child=f,l.memoizedState=null,f)}function q0(o,l){return l=am({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function am(o,l){return o=_i(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function $0(o,l,f){return Tc(l,o.child,null,f),o=q0(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function S1(o,l,f){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),u0(o.return,l,f)}function G0(o,l,f,d,y){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:f,tailMode:y}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=f,v.tailMode=y)}function w1(o,l,f){var d=l.pendingProps,y=d.revealOrder,v=d.tail;if(sr(o,l,d.children,f),d=Ln.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&S1(o,f,l);else if(o.tag===19)S1(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(le(Ln,d),y){case"forwards":for(f=l.child,y=null;f!==null;)o=f.alternate,o!==null&&rm(o)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),G0(l,!1,y,f,v);break;case"backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&rm(o)===null){l.child=y;break}o=y.sibling,y.sibling=f,f=y,y=o}G0(l,!0,f,null,v);break;case"together":G0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function No(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),_a|=l.lanes,(f&l.childLanes)===0)if(o!==null){if(Zf(o,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,f=wo(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=wo(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function K0(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&jp(o)))}function BV(o,l,f){switch(l.tag){case 3:Rt(l,l.stateNode.containerInfo),aa(l,Pn,o.memoizedState.cache),Xf();break;case 27:case 5:Ut(l);break;case 4:Rt(l,l.stateNode.containerInfo);break;case 10:aa(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(ha(l),l.flags|=128,null):(f&l.child.childLanes)!==0?b1(o,l,f):(ha(l),o=No(o,l,f),o!==null?o.sibling:null);ha(l);break;case 19:var y=(o.flags&128)!==0;if(d=(f&l.childLanes)!==0,d||(Zf(o,l,f,!1),d=(f&l.childLanes)!==0),y){if(d)return w1(o,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Ln,Ln.current),d)break;return null;case 22:case 23:return l.lanes=0,_1(o,l,f);case 24:aa(l,Pn,o.memoizedState.cache)}return No(o,l,f)}function R1(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps)Fn=!0;else{if(!K0(o,f)&&(l.flags&128)===0)return Fn=!1,BV(o,l,f);Fn=(o.flags&131072)!==0}else Fn=!1,xt&&(l.flags&1048576)!==0&&nw(l,Bp,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var d=l.elementType,y=d._init;if(d=y(d._payload),l.type=d,typeof d=="function")n0(d)?(o=Xl(d,o),l.tag=1,l=T1(null,l,d,o,f)):(l.tag=0,l=B0(null,l,d,o,f));else{if(d!=null){if(y=d.$$typeof,y===q){l.tag=11,l=m1(null,l,d,o,f);break e}else if(y===N){l.tag=14,l=g1(null,l,d,o,f);break e}}throw l=Ce(d)||d,Error(r(306,l,""))}}return l;case 0:return B0(o,l,l.type,l.pendingProps,f);case 1:return d=l.type,y=Xl(d,l.pendingProps),T1(o,l,d,y,f);case 3:e:{if(Rt(l,l.stateNode.containerInfo),o===null)throw Error(r(387));d=l.pendingProps;var v=l.memoizedState;y=v.element,g0(o,l),oh(l,d,null,f);var R=l.memoizedState;if(d=R.cache,aa(l,Pn,d),d!==v.cache&&c0(l,[Pn],f,!0),sh(),d=R.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:R.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=E1(o,l,d,f);break e}else if(d!==y){y=Ki(Error(r(424)),l),Jf(y),l=E1(o,l,d,f);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(an=Ts(o.firstChild),Vr=l,xt=!0,$l=null,Hs=!0,f=i1(l,null,d,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Xf(),d===y){l=No(o,l,f);break e}sr(o,l,d,f)}l=l.child}return l;case 26:return om(o,l),o===null?(f=IR(l.type,null,l.pendingProps,null))?l.memoizedState=f:xt||(f=l.type,o=l.pendingProps,d=Tm(Ve.current).createElement(f),d[ce]=l,d[ge]=o,ar(d,f,o),ht(d),l.stateNode=d):l.memoizedState=IR(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ut(l),o===null&&xt&&(d=l.stateNode=CR(l.type,l.pendingProps,Ve.current),Vr=l,Hs=!0,y=an,Ea(l.type)?(Cv=y,an=Ts(d.firstChild)):an=y),sr(o,l,l.pendingProps.children,f),om(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&xt&&((y=d=an)&&(d=pU(d,l.type,l.pendingProps,Hs),d!==null?(l.stateNode=d,Vr=l,an=Ts(d.firstChild),Hs=!1,y=!0):y=!1),y||Gl(l)),Ut(l),y=l.type,v=l.pendingProps,R=o!==null?o.memoizedProps:null,d=v.children,bv(y,v)?d=null:R!==null&&bv(y,R)&&(l.flags|=32),l.memoizedState!==null&&(y=E0(o,l,NV,null,null,f),xh._currentValue=y),om(o,l),sr(o,l,d,f),l.child;case 6:return o===null&&xt&&((o=f=an)&&(f=mU(f,l.pendingProps,Hs),f!==null?(l.stateNode=f,Vr=l,an=null,o=!0):o=!1),o||Gl(l)),null;case 13:return b1(o,l,f);case 4:return Rt(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=Tc(l,null,d,f):sr(o,l,d,f),l.child;case 11:return m1(o,l,l.type,l.pendingProps,f);case 7:return sr(o,l,l.pendingProps,f),l.child;case 8:return sr(o,l,l.pendingProps.children,f),l.child;case 12:return sr(o,l,l.pendingProps.children,f),l.child;case 10:return d=l.pendingProps,aa(l,l.type,d.value),sr(o,l,d.children,f),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,Wl(l),y=vr(y),d=d(y),l.flags|=1,sr(o,l,d,f),l.child;case 14:return g1(o,l,l.type,l.pendingProps,f);case 15:return y1(o,l,l.type,l.pendingProps,f);case 19:return w1(o,l,f);case 31:return d=l.pendingProps,f=l.mode,d={mode:d.mode,children:d.children},o===null?(f=am(d,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=wo(o.child,d),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return _1(o,l,f);case 24:return Wl(l),d=vr(Pn),o===null?(y=d0(),y===null&&(y=$t,v=f0(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=f),y=v),l.memoizedState={parent:d,cache:y},m0(l),aa(l,Pn,y)):((o.lanes&f)!==0&&(g0(o,l),oh(l,null,null,f),sh()),y=o.memoizedState,v=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),aa(l,Pn,d)):(d=v.cache,aa(l,Pn,d),d!==y.cache&&c0(l,[Pn],f,!0))),sr(o,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Mo(o){o.flags|=4}function C1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!PR(l)){if(l=Xi.current,l!==null&&((Et&4194048)===Et?qs!==null:(Et&62914560)!==Et&&(Et&536870912)===0||l!==qs))throw rh=p0,cw;o.flags|=8192}}function lm(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?ji():536870912,o.lanes|=l,wc|=l)}function dh(o,l){if(!xt)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function tn(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,d=0;if(l)for(var y=o.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=f,l}function jV(o,l,f){var d=l.pendingProps;switch(o0(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(l),null;case 1:return tn(l),null;case 3:return f=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ko(Pn),mr(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Qf(l)?Mo(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,sw())),tn(l),null;case 26:return f=l.memoizedState,o===null?(Mo(l),f!==null?(tn(l),C1(l,f)):(tn(l),l.flags&=-16777217)):f?f!==o.memoizedState?(Mo(l),tn(l),C1(l,f)):(tn(l),l.flags&=-16777217):(o.memoizedProps!==d&&Mo(l),tn(l),l.flags&=-16777217),null;case 27:On(l),f=Ve.current;var y=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return tn(l),null}o=Se.current,Qf(l)?rw(l):(o=CR(y,d,f),l.stateNode=o,Mo(l))}return tn(l),null;case 5:if(On(l),f=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return tn(l),null}if(o=Se.current,Qf(l))rw(l);else{switch(y=Tm(Ve.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(f,{is:d.is}):y.createElement(f)}}o[ce]=l,o[ge]=d;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=o;e:switch(ar(o,f,d),f){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Mo(l)}}return tn(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&Mo(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(o=Ve.current,Qf(l)){if(o=l.stateNode,f=l.memoizedProps,d=null,y=Vr,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[ce]=l,o=!!(o.nodeValue===f||d!==null&&d.suppressHydrationWarning===!0||AR(o.nodeValue,f)),o||Gl(l)}else o=Tm(o).createTextNode(d),o[ce]=l,l.stateNode=o}return tn(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=Qf(l),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[ce]=l}else Xf(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),y=!1}else y=sw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Oo(l),l):(Oo(l),null)}if(Oo(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=d!==null,o=o!==null&&o.memoizedState!==null,f){d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==y&&(d.flags|=2048)}return f!==o&&f&&(l.child.flags|=8192),lm(l,l.updateQueue),tn(l),null;case 4:return mr(),o===null&&_v(l.stateNode.containerInfo),tn(l),null;case 10:return ko(l.type),tn(l),null;case 19:if(_e(Ln),y=l.memoizedState,y===null)return tn(l),null;if(d=(l.flags&128)!==0,v=y.rendering,v===null)if(d)dh(y,!1);else{if(ln!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(v=rm(o),v!==null){for(l.flags|=128,dh(y,!1),o=v.updateQueue,l.updateQueue=o,lm(l,o),l.subtreeFlags=0,o=f,f=l.child;f!==null;)tw(f,o),f=f.sibling;return le(Ln,Ln.current&1|2),l.child}o=o.sibling}y.tail!==null&&on()>fm&&(l.flags|=128,d=!0,dh(y,!1),l.lanes=4194304)}else{if(!d)if(o=rm(v),o!==null){if(l.flags|=128,d=!0,o=o.updateQueue,l.updateQueue=o,lm(l,o),dh(y,!0),y.tail===null&&y.tailMode==="hidden"&&!v.alternate&&!xt)return tn(l),null}else 2*on()-y.renderingStartTime>fm&&f!==536870912&&(l.flags|=128,d=!0,dh(y,!1),l.lanes=4194304);y.isBackwards?(v.sibling=l.child,l.child=v):(o=y.last,o!==null?o.sibling=v:l.child=v,y.last=v)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=on(),l.sibling=null,o=Ln.current,le(Ln,d?o&1|2:o&1),l):(tn(l),null);case 22:case 23:return Oo(l),A0(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(f&536870912)!==0&&(l.flags&128)===0&&(tn(l),l.subtreeFlags&6&&(l.flags|=8192)):tn(l),f=l.updateQueue,f!==null&&lm(l,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048),o!==null&&_e(Yl),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ko(Pn),tn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function FV(o,l){switch(o0(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ko(Pn),mr(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return On(l),null;case 13:if(Oo(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Xf()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return _e(Ln),null;case 4:return mr(),null;case 10:return ko(l.type),null;case 22:case 23:return Oo(l),A0(),o!==null&&_e(Yl),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return ko(Pn),null;case 25:return null;default:return null}}function x1(o,l){switch(o0(l),l.tag){case 3:ko(Pn),mr();break;case 26:case 27:case 5:On(l);break;case 4:mr();break;case 13:Oo(l);break;case 19:_e(Ln);break;case 10:ko(l.type);break;case 22:case 23:Oo(l),A0(),o!==null&&_e(Yl);break;case 24:ko(Pn)}}function ph(o,l){try{var f=l.updateQueue,d=f!==null?f.lastEffect:null;if(d!==null){var y=d.next;f=y;do{if((f.tag&o)===o){d=void 0;var v=f.create,R=f.inst;d=v(),R.destroy=d}f=f.next}while(f!==y)}}catch(O){Ft(l,l.return,O)}}function pa(o,l,f){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var v=y.next;d=v;do{if((d.tag&o)===o){var R=d.inst,O=R.destroy;if(O!==void 0){R.destroy=void 0,y=l;var F=f,te=O;try{te()}catch(ae){Ft(y,F,ae)}}}d=d.next}while(d!==v)}}catch(ae){Ft(l,l.return,ae)}}function k1(o){var l=o.updateQueue;if(l!==null){var f=o.stateNode;try{gw(l,f)}catch(d){Ft(o,o.return,d)}}}function I1(o,l,f){f.props=Xl(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(d){Ft(o,l,d)}}function mh(o,l){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof f=="function"?o.refCleanup=f(d):f.current=d}}catch(y){Ft(o,l,y)}}function $s(o,l){var f=o.ref,d=o.refCleanup;if(f!==null)if(typeof d=="function")try{d()}catch(y){Ft(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Ft(o,l,y)}else f.current=null}function O1(o){var l=o.type,f=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&d.focus();break e;case"img":f.src?d.src=f.src:f.srcSet&&(d.srcset=f.srcSet)}}catch(y){Ft(o,o.return,y)}}function W0(o,l,f){try{var d=o.stateNode;uU(d,o.type,f,l),d[ge]=l}catch(y){Ft(o,o.return,y)}}function N1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ea(o.type)||o.tag===4}function Y0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||N1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ea(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Q0(o,l,f){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(o),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Am));else if(d!==4&&(d===27&&Ea(o.type)&&(f=o.stateNode,l=null),o=o.child,o!==null))for(Q0(o,l,f),o=o.sibling;o!==null;)Q0(o,l,f),o=o.sibling}function um(o,l,f){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(d!==4&&(d===27&&Ea(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(um(o,l,f),o=o.sibling;o!==null;)um(o,l,f),o=o.sibling}function M1(o){var l=o.stateNode,f=o.memoizedProps;try{for(var d=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);ar(l,d,f),l[ce]=o,l[ge]=f}catch(v){Ft(o,o.return,v)}}var Do=!1,yn=!1,X0=!1,D1=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function HV(o,l){if(o=o.containerInfo,Tv=Cm,o=$S(o),Y_(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var d=f.getSelection&&f.getSelection();if(d&&d.rangeCount!==0){f=d.anchorNode;var y=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{f.nodeType,v.nodeType}catch{f=null;break e}var R=0,O=-1,F=-1,te=0,ae=0,fe=o,ne=null;t:for(;;){for(var re;fe!==f||y!==0&&fe.nodeType!==3||(O=R+y),fe!==v||d!==0&&fe.nodeType!==3||(F=R+d),fe.nodeType===3&&(R+=fe.nodeValue.length),(re=fe.firstChild)!==null;)ne=fe,fe=re;for(;;){if(fe===o)break t;if(ne===f&&++te===y&&(O=R),ne===v&&++ae===d&&(F=R),(re=fe.nextSibling)!==null)break;fe=ne,ne=fe.parentNode}fe=re}f=O===-1||F===-1?null:{start:O,end:F}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ev={focusedElem:o,selectionRange:f},Cm=!1,Hn=l;Hn!==null;)if(l=Hn,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Hn=o;else for(;Hn!==null;){switch(l=Hn,v=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,f=l,y=v.memoizedProps,v=v.memoizedState,d=f.stateNode;try{var Qe=Xl(f.type,y,f.elementType===f.type);o=d.getSnapshotBeforeUpdate(Qe,v),d.__reactInternalSnapshotBeforeUpdate=o}catch(Ge){Ft(f,f.return,Ge)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,f=o.nodeType,f===9)wv(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":wv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,Hn=o;break}Hn=l.return}}function P1(o,l,f){var d=f.flags;switch(f.tag){case 0:case 11:case 15:ma(o,f),d&4&&ph(5,f);break;case 1:if(ma(o,f),d&4)if(o=f.stateNode,l===null)try{o.componentDidMount()}catch(R){Ft(f,f.return,R)}else{var y=Xl(f.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(R){Ft(f,f.return,R)}}d&64&&k1(f),d&512&&mh(f,f.return);break;case 3:if(ma(o,f),d&64&&(o=f.updateQueue,o!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{gw(o,l)}catch(R){Ft(f,f.return,R)}}break;case 27:l===null&&d&4&&M1(f);case 26:case 5:ma(o,f),l===null&&d&4&&O1(f),d&512&&mh(f,f.return);break;case 12:ma(o,f);break;case 13:ma(o,f),d&4&&U1(o,f),d&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=JV.bind(null,f),gU(o,f))));break;case 22:if(d=f.memoizedState!==null||Do,!d){l=l!==null&&l.memoizedState!==null||yn,y=Do;var v=yn;Do=d,(yn=l)&&!v?ga(o,f,(f.subtreeFlags&8772)!==0):ma(o,f),Do=y,yn=v}break;case 30:break;default:ma(o,f)}}function L1(o){var l=o.alternate;l!==null&&(o.alternate=null,L1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Re(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Wt=null,Jr=!1;function Po(o,l,f){for(f=f.child;f!==null;)V1(o,l,f),f=f.sibling}function V1(o,l,f){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(ut,f)}catch{}switch(f.tag){case 26:yn||$s(f,l),Po(o,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:yn||$s(f,l);var d=Wt,y=Jr;Ea(f.type)&&(Wt=f.stateNode,Jr=!1),Po(o,l,f),Sh(f.stateNode),Wt=d,Jr=y;break;case 5:yn||$s(f,l);case 6:if(d=Wt,y=Jr,Wt=null,Po(o,l,f),Wt=d,Jr=y,Wt!==null)if(Jr)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(f.stateNode)}catch(v){Ft(f,l,v)}else try{Wt.removeChild(f.stateNode)}catch(v){Ft(f,l,v)}break;case 18:Wt!==null&&(Jr?(o=Wt,wR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Nh(o)):wR(Wt,f.stateNode));break;case 4:d=Wt,y=Jr,Wt=f.stateNode.containerInfo,Jr=!0,Po(o,l,f),Wt=d,Jr=y;break;case 0:case 11:case 14:case 15:yn||pa(2,f,l),yn||pa(4,f,l),Po(o,l,f);break;case 1:yn||($s(f,l),d=f.stateNode,typeof d.componentWillUnmount=="function"&&I1(f,l,d)),Po(o,l,f);break;case 21:Po(o,l,f);break;case 22:yn=(d=yn)||f.memoizedState!==null,Po(o,l,f),yn=d;break;default:Po(o,l,f)}}function U1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Nh(o)}catch(f){Ft(l,l.return,f)}}function qV(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new D1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new D1),l;default:throw Error(r(435,o.tag))}}function J0(o,l){var f=qV(o);l.forEach(function(d){var y=ZV.bind(null,o,d);f.has(d)||(f.add(d),d.then(y,y))})}function vi(o,l){var f=l.deletions;if(f!==null)for(var d=0;d<f.length;d++){var y=f[d],v=o,R=l,O=R;e:for(;O!==null;){switch(O.tag){case 27:if(Ea(O.type)){Wt=O.stateNode,Jr=!1;break e}break;case 5:Wt=O.stateNode,Jr=!1;break e;case 3:case 4:Wt=O.stateNode.containerInfo,Jr=!0;break e}O=O.return}if(Wt===null)throw Error(r(160));V1(v,R,y),Wt=null,Jr=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)z1(l,o),l=l.sibling}var As=null;function z1(o,l){var f=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:vi(l,o),Ai(o),d&4&&(pa(3,o,o.return),ph(3,o),pa(5,o,o.return));break;case 1:vi(l,o),Ai(o),d&512&&(yn||f===null||$s(f,f.return)),d&64&&Do&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?d:f.concat(d))));break;case 26:var y=As;if(vi(l,o),Ai(o),d&512&&(yn||f===null||$s(f,f.return)),d&4){var v=f!==null?f.memoizedState:null;if(d=o.memoizedState,f===null)if(d===null)if(o.stateNode===null){e:{d=o.type,f=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":v=y.getElementsByTagName("title")[0],(!v||v[je]||v[ce]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(d),y.head.insertBefore(v,y.querySelector("head > title"))),ar(v,d,f),v[ce]=o,ht(v),d=v;break e;case"link":var R=MR("link","href",y).get(d+(f.href||""));if(R){for(var O=0;O<R.length;O++)if(v=R[O],v.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&v.getAttribute("rel")===(f.rel==null?null:f.rel)&&v.getAttribute("title")===(f.title==null?null:f.title)&&v.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){R.splice(O,1);break t}}v=y.createElement(d),ar(v,d,f),y.head.appendChild(v);break;case"meta":if(R=MR("meta","content",y).get(d+(f.content||""))){for(O=0;O<R.length;O++)if(v=R[O],v.getAttribute("content")===(f.content==null?null:""+f.content)&&v.getAttribute("name")===(f.name==null?null:f.name)&&v.getAttribute("property")===(f.property==null?null:f.property)&&v.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&v.getAttribute("charset")===(f.charSet==null?null:f.charSet)){R.splice(O,1);break t}}v=y.createElement(d),ar(v,d,f),y.head.appendChild(v);break;default:throw Error(r(468,d))}v[ce]=o,ht(v),d=v}o.stateNode=d}else DR(y,o.type,o.stateNode);else o.stateNode=NR(y,d,o.memoizedProps);else v!==d?(v===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):v.count--,d===null?DR(y,o.type,o.stateNode):NR(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&W0(o,o.memoizedProps,f.memoizedProps)}break;case 27:vi(l,o),Ai(o),d&512&&(yn||f===null||$s(f,f.return)),f!==null&&d&4&&W0(o,o.memoizedProps,f.memoizedProps);break;case 5:if(vi(l,o),Ai(o),d&512&&(yn||f===null||$s(f,f.return)),o.flags&32){y=o.stateNode;try{Hi(y,"")}catch(re){Ft(o,o.return,re)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,W0(o,y,f!==null?f.memoizedProps:y)),d&1024&&(X0=!0);break;case 6:if(vi(l,o),Ai(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,f=o.stateNode;try{f.nodeValue=d}catch(re){Ft(o,o.return,re)}}break;case 3:if(Sm=null,y=As,As=Em(l.containerInfo),vi(l,o),As=y,Ai(o),d&4&&f!==null&&f.memoizedState.isDehydrated)try{Nh(l.containerInfo)}catch(re){Ft(o,o.return,re)}X0&&(X0=!1,B1(o));break;case 4:d=As,As=Em(o.stateNode.containerInfo),vi(l,o),Ai(o),As=d;break;case 12:vi(l,o),Ai(o);break;case 13:vi(l,o),Ai(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(iv=on()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,J0(o,d)));break;case 22:y=o.memoizedState!==null;var F=f!==null&&f.memoizedState!==null,te=Do,ae=yn;if(Do=te||y,yn=ae||F,vi(l,o),yn=ae,Do=te,Ai(o),d&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||F||Do||yn||Jl(o)),f=null,l=o;;){if(l.tag===5||l.tag===26){if(f===null){F=f=l;try{if(v=F.stateNode,y)R=v.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{O=F.stateNode;var fe=F.memoizedProps.style,ne=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;O.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){Ft(F,F.return,re)}}}else if(l.tag===6){if(f===null){F=l;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(re){Ft(F,F.return,re)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(f=d.retryQueue,f!==null&&(d.retryQueue=null,J0(o,f))));break;case 19:vi(l,o),Ai(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,J0(o,d)));break;case 30:break;case 21:break;default:vi(l,o),Ai(o)}}function Ai(o){var l=o.flags;if(l&2){try{for(var f,d=o.return;d!==null;){if(N1(d)){f=d;break}d=d.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,v=Y0(o);um(o,v,y);break;case 5:var R=f.stateNode;f.flags&32&&(Hi(R,""),f.flags&=-33);var O=Y0(o);um(o,O,R);break;case 3:case 4:var F=f.stateNode.containerInfo,te=Y0(o);Q0(o,te,F);break;default:throw Error(r(161))}}catch(ae){Ft(o,o.return,ae)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function B1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;B1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function ma(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)P1(o,l.alternate,l),l=l.sibling}function Jl(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:pa(4,l,l.return),Jl(l);break;case 1:$s(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&I1(l,l.return,f),Jl(l);break;case 27:Sh(l.stateNode);case 26:case 5:$s(l,l.return),Jl(l);break;case 22:l.memoizedState===null&&Jl(l);break;case 30:Jl(l);break;default:Jl(l)}o=o.sibling}}function ga(o,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=o,v=l,R=v.flags;switch(v.tag){case 0:case 11:case 15:ga(y,v,f),ph(4,v);break;case 1:if(ga(y,v,f),d=v,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(te){Ft(d,d.return,te)}if(d=v,y=d.updateQueue,y!==null){var O=d.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)mw(F[y],O)}catch(te){Ft(d,d.return,te)}}f&&R&64&&k1(v),mh(v,v.return);break;case 27:M1(v);case 26:case 5:ga(y,v,f),f&&d===null&&R&4&&O1(v),mh(v,v.return);break;case 12:ga(y,v,f);break;case 13:ga(y,v,f),f&&R&4&&U1(y,v);break;case 22:v.memoizedState===null&&ga(y,v,f),mh(v,v.return);break;case 30:break;default:ga(y,v,f)}l=l.sibling}}function Z0(o,l){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&eh(f))}function ev(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&eh(o))}function Gs(o,l,f,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)j1(o,l,f,d),l=l.sibling}function j1(o,l,f,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Gs(o,l,f,d),y&2048&&ph(9,l);break;case 1:Gs(o,l,f,d);break;case 3:Gs(o,l,f,d),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&eh(o)));break;case 12:if(y&2048){Gs(o,l,f,d),o=l.stateNode;try{var v=l.memoizedProps,R=v.id,O=v.onPostCommit;typeof O=="function"&&O(R,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){Ft(l,l.return,F)}}else Gs(o,l,f,d);break;case 13:Gs(o,l,f,d);break;case 23:break;case 22:v=l.stateNode,R=l.alternate,l.memoizedState!==null?v._visibility&2?Gs(o,l,f,d):gh(o,l):v._visibility&2?Gs(o,l,f,d):(v._visibility|=2,Ec(o,l,f,d,(l.subtreeFlags&10256)!==0)),y&2048&&Z0(R,l);break;case 24:Gs(o,l,f,d),y&2048&&ev(l.alternate,l);break;default:Gs(o,l,f,d)}}function Ec(o,l,f,d,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var v=o,R=l,O=f,F=d,te=R.flags;switch(R.tag){case 0:case 11:case 15:Ec(v,R,O,F,y),ph(8,R);break;case 23:break;case 22:var ae=R.stateNode;R.memoizedState!==null?ae._visibility&2?Ec(v,R,O,F,y):gh(v,R):(ae._visibility|=2,Ec(v,R,O,F,y)),y&&te&2048&&Z0(R.alternate,R);break;case 24:Ec(v,R,O,F,y),y&&te&2048&&ev(R.alternate,R);break;default:Ec(v,R,O,F,y)}l=l.sibling}}function gh(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=o,d=l,y=d.flags;switch(d.tag){case 22:gh(f,d),y&2048&&Z0(d.alternate,d);break;case 24:gh(f,d),y&2048&&ev(d.alternate,d);break;default:gh(f,d)}l=l.sibling}}var yh=8192;function bc(o){if(o.subtreeFlags&yh)for(o=o.child;o!==null;)F1(o),o=o.sibling}function F1(o){switch(o.tag){case 26:bc(o),o.flags&yh&&o.memoizedState!==null&&kU(As,o.memoizedState,o.memoizedProps);break;case 5:bc(o);break;case 3:case 4:var l=As;As=Em(o.stateNode.containerInfo),bc(o),As=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=yh,yh=16777216,bc(o),yh=l):bc(o));break;default:bc(o)}}function H1(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function _h(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Hn=d,$1(d,o)}H1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)q1(o),o=o.sibling}function q1(o){switch(o.tag){case 0:case 11:case 15:_h(o),o.flags&2048&&pa(9,o,o.return);break;case 3:_h(o);break;case 12:_h(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,cm(o)):_h(o);break;default:_h(o)}}function cm(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Hn=d,$1(d,o)}H1(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:pa(8,l,l.return),cm(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,cm(l));break;default:cm(l)}o=o.sibling}}function $1(o,l){for(;Hn!==null;){var f=Hn;switch(f.tag){case 0:case 11:case 15:pa(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var d=f.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:eh(f.memoizedState.cache)}if(d=f.child,d!==null)d.return=f,Hn=d;else e:for(f=o;Hn!==null;){d=Hn;var y=d.sibling,v=d.return;if(L1(d),d===f){Hn=null;break e}if(y!==null){y.return=v,Hn=y;break e}Hn=v}}}var $V={getCacheForType:function(o){var l=vr(Pn),f=l.data.get(o);return f===void 0&&(f=o(),l.data.set(o,f)),f}},GV=typeof WeakMap=="function"?WeakMap:Map,Nt=0,$t=null,dt=null,Et=0,Mt=0,Ti=null,ya=!1,Sc=!1,tv=!1,Lo=0,ln=0,_a=0,Zl=0,nv=0,Ji=0,wc=0,vh=null,Zr=null,rv=!1,iv=0,fm=1/0,hm=null,va=null,or=0,Aa=null,Rc=null,Cc=0,sv=0,ov=null,G1=null,Ah=0,av=null;function Ei(){if((Nt&2)!==0&&Et!==0)return Et&-Et;if(Y.T!==null){var o=pc;return o!==0?o:pv()}return $()}function K1(){Ji===0&&(Ji=(Et&536870912)===0||xt?Wr():536870912);var o=Xi.current;return o!==null&&(o.flags|=32),Ji}function bi(o,l,f){(o===$t&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)&&(xc(o,0),Ta(o,Et,Ji,!1)),er(o,f),((Nt&2)===0||o!==$t)&&(o===$t&&((Nt&2)===0&&(Zl|=f),ln===4&&Ta(o,Et,Ji,!1)),Ks(o))}function W1(o,l,f){if((Nt&6)!==0)throw Error(r(327));var d=!f&&(l&124)===0&&(l&o.expiredLanes)===0||yr(o,l),y=d?YV(o,l):cv(o,l,!0),v=d;do{if(y===0){Sc&&!d&&Ta(o,l,0,!1);break}else{if(f=o.current.alternate,v&&!KV(f)){y=cv(o,l,!1),v=!1;continue}if(y===2){if(v=l,o.errorRecoveryDisabledLanes&v)var R=0;else R=o.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){l=R;e:{var O=o;y=vh;var F=O.current.memoizedState.isDehydrated;if(F&&(xc(O,R).flags|=256),R=cv(O,R,!1),R!==2){if(tv&&!F){O.errorRecoveryDisabledLanes|=v,Zl|=v,y=4;break e}v=Zr,Zr=y,v!==null&&(Zr===null?Zr=v:Zr.push.apply(Zr,v))}y=R}if(v=!1,y!==2)continue}}if(y===1){xc(o,0),Ta(o,l,0,!0);break}e:{switch(d=o,v=y,v){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Ta(d,l,Ji,!ya);break e;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=iv+300-on(),10<y)){if(Ta(d,l,Ji,!ya),mi(d,0,!0)!==0)break e;d.timeoutHandle=bR(Y1.bind(null,d,f,Zr,hm,rv,l,Ji,Zl,wc,ya,v,2,-0,0),y);break e}Y1(d,f,Zr,hm,rv,l,Ji,Zl,wc,ya,v,0,-0,0)}}break}while(!0);Ks(o)}function Y1(o,l,f,d,y,v,R,O,F,te,ae,fe,ne,re){if(o.timeoutHandle=-1,fe=l.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(Ch={stylesheets:null,count:0,unsuspend:xU},F1(l),fe=IU(),fe!==null)){o.cancelPendingCommit=fe(nR.bind(null,o,l,v,f,d,y,R,O,F,ae,1,ne,re)),Ta(o,v,R,!te);return}nR(o,l,v,f,d,y,R,O,F)}function KV(o){for(var l=o;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var d=0;d<f.length;d++){var y=f[d],v=y.getSnapshot;y=y.value;try{if(!yi(v(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ta(o,l,f,d){l&=~nv,l&=~Zl,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var y=l;0<y;){var v=31-Jt(y),R=1<<v;d[v]=-1,y&=~R}f!==0&&tr(o,f,l)}function dm(){return(Nt&6)===0?(Th(0),!1):!0}function lv(){if(dt!==null){if(Mt===0)var o=dt.return;else o=dt,xo=Kl=null,w0(o),Ac=null,fh=0,o=dt;for(;o!==null;)x1(o.alternate,o),o=o.return;dt=null}}function xc(o,l){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,fU(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),lv(),$t=o,dt=f=wo(o.current,null),Et=l,Mt=0,Ti=null,ya=!1,Sc=yr(o,l),tv=!1,wc=Ji=nv=Zl=_a=ln=0,Zr=vh=null,rv=!1,(l&8)!==0&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var y=31-Jt(d),v=1<<y;l|=o[y],d&=~v}return Lo=l,Pp(),f}function Q1(o,l){ot=null,Y.H=em,l===nh||l===qp?(l=dw(),Mt=3):l===cw?(l=dw(),Mt=4):Mt=l===p1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ti=l,dt===null&&(ln=1,sm(o,Ki(l,o.current)))}function X1(){var o=Y.H;return Y.H=em,o===null?em:o}function J1(){var o=Y.A;return Y.A=$V,o}function uv(){ln=4,ya||(Et&4194048)!==Et&&Xi.current!==null||(Sc=!0),(_a&134217727)===0&&(Zl&134217727)===0||$t===null||Ta($t,Et,Ji,!1)}function cv(o,l,f){var d=Nt;Nt|=2;var y=X1(),v=J1();($t!==o||Et!==l)&&(hm=null,xc(o,l)),l=!1;var R=ln;e:do try{if(Mt!==0&&dt!==null){var O=dt,F=Ti;switch(Mt){case 8:lv(),R=6;break e;case 3:case 2:case 9:case 6:Xi.current===null&&(l=!0);var te=Mt;if(Mt=0,Ti=null,kc(o,O,F,te),f&&Sc){R=0;break e}break;default:te=Mt,Mt=0,Ti=null,kc(o,O,F,te)}}WV(),R=ln;break}catch(ae){Q1(o,ae)}while(!0);return l&&o.shellSuspendCounter++,xo=Kl=null,Nt=d,Y.H=y,Y.A=v,dt===null&&($t=null,Et=0,Pp()),R}function WV(){for(;dt!==null;)Z1(dt)}function YV(o,l){var f=Nt;Nt|=2;var d=X1(),y=J1();$t!==o||Et!==l?(hm=null,fm=on()+500,xc(o,l)):Sc=yr(o,l);e:do try{if(Mt!==0&&dt!==null){l=dt;var v=Ti;t:switch(Mt){case 1:Mt=0,Ti=null,kc(o,l,v,1);break;case 2:case 9:if(fw(v)){Mt=0,Ti=null,eR(l);break}l=function(){Mt!==2&&Mt!==9||$t!==o||(Mt=7),Ks(o)},v.then(l,l);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:fw(v)?(Mt=0,Ti=null,eR(l)):(Mt=0,Ti=null,kc(o,l,v,7));break;case 5:var R=null;switch(dt.tag){case 26:R=dt.memoizedState;case 5:case 27:var O=dt;if(!R||PR(R)){Mt=0,Ti=null;var F=O.sibling;if(F!==null)dt=F;else{var te=O.return;te!==null?(dt=te,pm(te)):dt=null}break t}}Mt=0,Ti=null,kc(o,l,v,5);break;case 6:Mt=0,Ti=null,kc(o,l,v,6);break;case 8:lv(),ln=6;break e;default:throw Error(r(462))}}QV();break}catch(ae){Q1(o,ae)}while(!0);return xo=Kl=null,Y.H=d,Y.A=y,Nt=f,dt!==null?0:($t=null,Et=0,Pp(),ln)}function QV(){for(;dt!==null&&!gs();)Z1(dt)}function Z1(o){var l=R1(o.alternate,o,Lo);o.memoizedProps=o.pendingProps,l===null?pm(o):dt=l}function eR(o){var l=o,f=l.alternate;switch(l.tag){case 15:case 0:l=A1(f,l,l.pendingProps,l.type,void 0,Et);break;case 11:l=A1(f,l,l.pendingProps,l.type.render,l.ref,Et);break;case 5:w0(l);default:x1(f,l),l=dt=tw(l,Lo),l=R1(f,l,Lo)}o.memoizedProps=o.pendingProps,l===null?pm(o):dt=l}function kc(o,l,f,d){xo=Kl=null,w0(l),Ac=null,fh=0;var y=l.return;try{if(zV(o,y,l,f,Et)){ln=1,sm(o,Ki(f,o.current)),dt=null;return}}catch(v){if(y!==null)throw dt=y,v;ln=1,sm(o,Ki(f,o.current)),dt=null;return}l.flags&32768?(xt||d===1?o=!0:Sc||(Et&536870912)!==0?o=!1:(ya=o=!0,(d===2||d===9||d===3||d===6)&&(d=Xi.current,d!==null&&d.tag===13&&(d.flags|=16384))),tR(l,o)):pm(l)}function pm(o){var l=o;do{if((l.flags&32768)!==0){tR(l,ya);return}o=l.return;var f=jV(l.alternate,l,Lo);if(f!==null){dt=f;return}if(l=l.sibling,l!==null){dt=l;return}dt=l=o}while(l!==null);ln===0&&(ln=5)}function tR(o,l){do{var f=FV(o.alternate,o);if(f!==null){f.flags&=32767,dt=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(o=o.sibling,o!==null)){dt=o;return}dt=o=f}while(o!==null);ln=6,dt=null}function nR(o,l,f,d,y,v,R,O,F){o.cancelPendingCommit=null;do mm();while(or!==0);if((Nt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(v=l.lanes|l.childLanes,v|=e0,Ms(o,f,v,R,O,F),o===$t&&(dt=$t=null,Et=0),Rc=l,Aa=o,Cc=f,sv=v,ov=y,G1=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,eU(Bi,function(){return aR(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,y=oe.p,oe.p=2,R=Nt,Nt|=4;try{HV(o,l,f)}finally{Nt=R,oe.p=y,Y.T=d}}or=1,rR(),iR(),sR()}}function rR(){if(or===1){or=0;var o=Aa,l=Rc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=Y.T,Y.T=null;var d=oe.p;oe.p=2;var y=Nt;Nt|=4;try{z1(l,o);var v=Ev,R=$S(o.containerInfo),O=v.focusedElem,F=v.selectionRange;if(R!==O&&O&&O.ownerDocument&&qS(O.ownerDocument.documentElement,O)){if(F!==null&&Y_(O)){var te=F.start,ae=F.end;if(ae===void 0&&(ae=te),"selectionStart"in O)O.selectionStart=te,O.selectionEnd=Math.min(ae,O.value.length);else{var fe=O.ownerDocument||document,ne=fe&&fe.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),Qe=O.textContent.length,Ge=Math.min(F.start,Qe),Vt=F.end===void 0?Ge:Math.min(F.end,Qe);!re.extend&&Ge>Vt&&(R=Vt,Vt=Ge,Ge=R);var Q=HS(O,Ge),K=HS(O,Vt);if(Q&&K&&(re.rangeCount!==1||re.anchorNode!==Q.node||re.anchorOffset!==Q.offset||re.focusNode!==K.node||re.focusOffset!==K.offset)){var ee=fe.createRange();ee.setStart(Q.node,Q.offset),re.removeAllRanges(),Ge>Vt?(re.addRange(ee),re.extend(K.node,K.offset)):(ee.setEnd(K.node,K.offset),re.addRange(ee))}}}}for(fe=[],re=O;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<fe.length;O++){var ue=fe[O];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Cm=!!Tv,Ev=Tv=null}finally{Nt=y,oe.p=d,Y.T=f}}o.current=l,or=2}}function iR(){if(or===2){or=0;var o=Aa,l=Rc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=Y.T,Y.T=null;var d=oe.p;oe.p=2;var y=Nt;Nt|=4;try{P1(o,l.alternate,l)}finally{Nt=y,oe.p=d,Y.T=f}}or=3}}function sR(){if(or===4||or===3){or=0,ks();var o=Aa,l=Rc,f=Cc,d=G1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?or=5:(or=0,Rc=Aa=null,oR(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(va=null),Ds(f),l=l.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(ut,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=Y.T,y=oe.p,oe.p=2,Y.T=null;try{for(var v=o.onRecoverableError,R=0;R<d.length;R++){var O=d[R];v(O.value,{componentStack:O.stack})}}finally{Y.T=l,oe.p=y}}(Cc&3)!==0&&mm(),Ks(o),y=o.pendingLanes,(f&4194090)!==0&&(y&42)!==0?o===av?Ah++:(Ah=0,av=o):Ah=0,Th(0)}}function oR(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,eh(l)))}function mm(o){return rR(),iR(),sR(),aR()}function aR(){if(or!==5)return!1;var o=Aa,l=sv;sv=0;var f=Ds(Cc),d=Y.T,y=oe.p;try{oe.p=32>f?32:f,Y.T=null,f=ov,ov=null;var v=Aa,R=Cc;if(or=0,Rc=Aa=null,Cc=0,(Nt&6)!==0)throw Error(r(331));var O=Nt;if(Nt|=4,q1(v.current),j1(v,v.current,R,f),Nt=O,Th(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(ut,v)}catch{}return!0}finally{oe.p=y,Y.T=d,oR(o,l)}}function lR(o,l,f){l=Ki(f,l),l=z0(o.stateNode,l,2),o=ca(o,l,2),o!==null&&(er(o,2),Ks(o))}function Ft(o,l,f){if(o.tag===3)lR(o,o,f);else for(;l!==null;){if(l.tag===3){lR(l,o,f);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(va===null||!va.has(d))){o=Ki(f,o),f=h1(2),d=ca(l,f,2),d!==null&&(d1(f,d,l,o),er(d,2),Ks(d));break}}l=l.return}}function fv(o,l,f){var d=o.pingCache;if(d===null){d=o.pingCache=new GV;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(f)||(tv=!0,y.add(f),o=XV.bind(null,o,l,f),l.then(o,o))}function XV(o,l,f){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,$t===o&&(Et&f)===f&&(ln===4||ln===3&&(Et&62914560)===Et&&300>on()-iv?(Nt&2)===0&&xc(o,0):nv|=f,wc===Et&&(wc=0)),Ks(o)}function uR(o,l){l===0&&(l=ji()),o=cc(o,l),o!==null&&(er(o,l),Ks(o))}function JV(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),uR(o,f)}function ZV(o,l){var f=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(f=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),uR(o,f)}function eU(o,l){return di(o,l)}var gm=null,Ic=null,hv=!1,ym=!1,dv=!1,eu=0;function Ks(o){o!==Ic&&o.next===null&&(Ic===null?gm=Ic=o:Ic=Ic.next=o),ym=!0,hv||(hv=!0,nU())}function Th(o,l){if(!dv&&ym){dv=!0;do for(var f=!1,d=gm;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var v=0;else{var R=d.suspendedLanes,O=d.pingedLanes;v=(1<<31-Jt(42|o)+1)-1,v&=y&~(R&~O),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(f=!0,dR(d,v))}else v=Et,v=mi(d,d===$t?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||yr(d,v)||(f=!0,dR(d,v));d=d.next}while(f);dv=!1}}function tU(){cR()}function cR(){ym=hv=!1;var o=0;eu!==0&&(cU()&&(o=eu),eu=0);for(var l=on(),f=null,d=gm;d!==null;){var y=d.next,v=fR(d,l);v===0?(d.next=null,f===null?gm=y:f.next=y,y===null&&(Ic=f)):(f=d,(o!==0||(v&3)!==0)&&(ym=!0)),d=y}Th(o)}function fR(o,l){for(var f=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var R=31-Jt(v),O=1<<R,F=y[R];F===-1?((O&f)===0||(O&d)!==0)&&(y[R]=Ns(O,l)):F<=l&&(o.expiredLanes|=O),v&=~O}if(l=$t,f=Et,f=mi(o,o===l?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,f===0||o===l&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Xt(d),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||yr(o,f)){if(l=f&-f,l===o.callbackPriority)return l;switch(d!==null&&Xt(d),Ds(f)){case 2:case 8:f=ys;break;case 32:f=Bi;break;case 268435456:f=gr;break;default:f=Bi}return d=hR.bind(null,o),f=di(f,d),o.callbackPriority=l,o.callbackNode=f,l}return d!==null&&d!==null&&Xt(d),o.callbackPriority=2,o.callbackNode=null,2}function hR(o,l){if(or!==0&&or!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(mm()&&o.callbackNode!==f)return null;var d=Et;return d=mi(o,o===$t?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(W1(o,d,l),fR(o,on()),o.callbackNode!=null&&o.callbackNode===f?hR.bind(null,o):null)}function dR(o,l){if(mm())return null;W1(o,l,!0)}function nU(){hU(function(){(Nt&6)!==0?di(zi,tU):cR()})}function pv(){return eu===0&&(eu=Wr()),eu}function pR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ju(""+o)}function mR(o,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,o.id&&f.setAttribute("form",o.id),l.parentNode.insertBefore(f,l),o=new FormData(o),f.parentNode.removeChild(f),o}function rU(o,l,f,d,y){if(l==="submit"&&f&&f.stateNode===y){var v=pR((y[ge]||null).action),R=d.submitter;R&&(l=(l=R[ge]||null)?pR(l.formAction):R.getAttribute("formAction"),l!==null&&(v=l,R=null));var O=new Zu("action","action",null,d,y);o.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(eu!==0){var F=R?mR(y,R):new FormData(y);D0(f,{pending:!0,data:F,method:y.method,action:v},null,F)}}else typeof v=="function"&&(O.preventDefault(),F=R?mR(y,R):new FormData(y),D0(f,{pending:!0,data:F,method:y.method,action:v},v,F))},currentTarget:y}]})}}for(var mv=0;mv<Z_.length;mv++){var gv=Z_[mv],iU=gv.toLowerCase(),sU=gv[0].toUpperCase()+gv.slice(1);vs(iU,"on"+sU)}vs(WS,"onAnimationEnd"),vs(YS,"onAnimationIteration"),vs(QS,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(EV,"onTransitionRun"),vs(bV,"onTransitionStart"),vs(SV,"onTransitionCancel"),vs(XS,"onTransitionEnd"),be("onMouseEnter",["mouseout","mouseover"]),be("onMouseLeave",["mouseout","mouseover"]),be("onPointerEnter",["pointerout","pointerover"]),be("onPointerLeave",["pointerout","pointerover"]),de("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),de("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),de("onBeforeInput",["compositionend","keypress","textInput","paste"]),de("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eh));function gR(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var d=o[f],y=d.event;d=d.listeners;e:{var v=void 0;if(l)for(var R=d.length-1;0<=R;R--){var O=d[R],F=O.instance,te=O.currentTarget;if(O=O.listener,F!==v&&y.isPropagationStopped())break e;v=O,y.currentTarget=te;try{v(y)}catch(ae){im(ae)}y.currentTarget=null,v=F}else for(R=0;R<d.length;R++){if(O=d[R],F=O.instance,te=O.currentTarget,O=O.listener,F!==v&&y.isPropagationStopped())break e;v=O,y.currentTarget=te;try{v(y)}catch(ae){im(ae)}y.currentTarget=null,v=F}}}}function pt(o,l){var f=l[Ue];f===void 0&&(f=l[Ue]=new Set);var d=o+"__bubble";f.has(d)||(yR(l,o,2,!1),f.add(d))}function yv(o,l,f){var d=0;l&&(d|=4),yR(f,o,d,l)}var _m="_reactListening"+Math.random().toString(36).slice(2);function _v(o){if(!o[_m]){o[_m]=!0,ye.forEach(function(f){f!=="selectionchange"&&(oU.has(f)||yv(f,!1,o),yv(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[_m]||(l[_m]=!0,yv("selectionchange",!1,l))}}function yR(o,l,f,d){switch(jR(l)){case 2:var y=MU;break;case 8:y=DU;break;default:y=Nv}f=y.bind(null,l,f,o),y=void 0,!$i||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(l,f,{capture:!0,passive:y}):o.addEventListener(l,f,!0):y!==void 0?o.addEventListener(l,f,{passive:y}):o.addEventListener(l,f,!1)}function vv(o,l,f,d,y){var v=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var O=d.stateNode.containerInfo;if(O===y)break;if(R===4)for(R=d.return;R!==null;){var F=R.tag;if((F===3||F===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;O!==null;){if(R=Fe(O),R===null)return;if(F=R.tag,F===5||F===6||F===26||F===27){d=v=R;continue e}O=O.parentNode}}d=d.return}Ap(function(){var te=v,ae=qi(f),fe=[];e:{var ne=JS.get(o);if(ne!==void 0){var re=Zu,Qe=o;switch(o){case"keypress":if(Us(f)===0)break e;case"keydown":case"keyup":re=sc;break;case"focusin":Qe="focus",re=nc;break;case"focusout":Qe="blur",re=nc;break;case"beforeblur":case"afterblur":re=nc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=$_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=xp;break;case WS:case YS:case QS:re=rc;break;case XS:re=Ip;break;case"scroll":case"scrollend":re=Tp;break;case"wheel":re=oc;break;case"copy":case"cut":case"paste":re=ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Gf;break;case"toggle":case"beforetoggle":re=Np}var Ge=(l&4)!==0,Vt=!Ge&&(o==="scroll"||o==="scrollend"),Q=Ge?ne!==null?ne+"Capture":null:ne;Ge=[];for(var K=te,ee;K!==null;){var ue=K;if(ee=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||ee===null||Q===null||(ue=Ml(K,Q),ue!=null&&Ge.push(bh(K,ue,ee))),Vt)break;K=K.return}0<Ge.length&&(ne=new re(ne,Qe,null,f,ae),fe.push({event:ne,listeners:Ge}))}}if((l&7)===0){e:{if(ne=o==="mouseover"||o==="pointerover",re=o==="mouseout"||o==="pointerout",ne&&f!==vo&&(Qe=f.relatedTarget||f.fromElement)&&(Fe(Qe)||Qe[Ee]))break e;if((re||ne)&&(ne=ae.window===ae?ae:(ne=ae.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(Qe=f.relatedTarget||f.toElement,re=te,Qe=Qe?Fe(Qe):null,Qe!==null&&(Vt=s(Qe),Ge=Qe.tag,Qe!==Vt||Ge!==5&&Ge!==27&&Ge!==6)&&(Qe=null)):(re=null,Qe=te),re!==Qe)){if(Ge=Gi,ue="onMouseLeave",Q="onMouseEnter",K="mouse",(o==="pointerout"||o==="pointerover")&&(Ge=Gf,ue="onPointerLeave",Q="onPointerEnter",K="pointer"),Vt=re==null?ne:St(re),ee=Qe==null?ne:St(Qe),ne=new Ge(ue,K+"leave",re,f,ae),ne.target=Vt,ne.relatedTarget=ee,ue=null,Fe(ae)===te&&(Ge=new Ge(Q,K+"enter",Qe,f,ae),Ge.target=ee,Ge.relatedTarget=Vt,ue=Ge),Vt=ue,re&&Qe)t:{for(Ge=re,Q=Qe,K=0,ee=Ge;ee;ee=Oc(ee))K++;for(ee=0,ue=Q;ue;ue=Oc(ue))ee++;for(;0<K-ee;)Ge=Oc(Ge),K--;for(;0<ee-K;)Q=Oc(Q),ee--;for(;K--;){if(Ge===Q||Q!==null&&Ge===Q.alternate)break t;Ge=Oc(Ge),Q=Oc(Q)}Ge=null}else Ge=null;re!==null&&_R(fe,ne,re,Ge,!1),Qe!==null&&Vt!==null&&_R(fe,Vt,Qe,Ge,!0)}}e:{if(ne=te?St(te):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Me=VS;else if(Dn(ne))if(US)Me=vV;else{Me=yV;var ct=gV}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&zf(te.elementType)&&(Me=VS):Me=_V;if(Me&&(Me=Me(o,te))){So(fe,Me,f,ae);break e}ct&&ct(o,ne,te),o==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&sa(ne,"number",ne.value)}switch(ct=te?St(te):window,o){case"focusin":(Dn(ct)||ct.contentEditable==="true")&&(ac=ct,Q_=te,Yf=null);break;case"focusout":Yf=Q_=ac=null;break;case"mousedown":X_=!0;break;case"contextmenu":case"mouseup":case"dragend":X_=!1,GS(fe,f,ae);break;case"selectionchange":if(TV)break;case"keydown":case"keyup":GS(fe,f,ae)}var ze;if(js)e:{switch(o){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else At?se(o,f)&&(Ke="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Ke="onCompositionStart");Ke&&(w&&f.locale!=="ko"&&(At||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&At&&(ze=jf()):(Vs=ae,oa="value"in Vs?Vs.value:Vs.textContent,At=!0)),ct=vm(te,Ke),0<ct.length&&(Ke=new qf(Ke,o,null,f,ae),fe.push({event:Ke,listeners:ct}),ze?Ke.data=ze:(ze=Te(f),ze!==null&&(Ke.data=ze)))),(ze=E?Mn(o,f):Tt(o,f))&&(Ke=vm(te,"onBeforeInput"),0<Ke.length&&(ct=new qf("onBeforeInput","beforeinput",null,f,ae),fe.push({event:ct,listeners:Ke}),ct.data=ze)),rU(fe,o,te,f,ae)}gR(fe,l)})}function bh(o,l,f){return{instance:o,listener:l,currentTarget:f}}function vm(o,l){for(var f=l+"Capture",d=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Ml(o,f),y!=null&&d.unshift(bh(o,y,v)),y=Ml(o,l),y!=null&&d.push(bh(o,y,v))),o.tag===3)return d;o=o.return}return[]}function Oc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function _R(o,l,f,d,y){for(var v=l._reactName,R=[];f!==null&&f!==d;){var O=f,F=O.alternate,te=O.stateNode;if(O=O.tag,F!==null&&F===d)break;O!==5&&O!==26&&O!==27||te===null||(F=te,y?(te=Ml(f,v),te!=null&&R.unshift(bh(f,te,F))):y||(te=Ml(f,v),te!=null&&R.push(bh(f,te,F)))),f=f.return}R.length!==0&&o.push({event:l,listeners:R})}var aU=/\r\n?/g,lU=/\u0000|\uFFFD/g;function vR(o){return(typeof o=="string"?o:""+o).replace(aU,`
`).replace(lU,"")}function AR(o,l){return l=vR(l),vR(o)===l}function Am(){}function Lt(o,l,f,d,y,v){switch(f){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Hi(o,""+d);break;case"className":mn(o,"class",d);break;case"tabIndex":mn(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(o,f,d);break;case"style":Uf(o,d,v);break;case"data":if(l!=="object"){mn(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||f!=="href")){o.removeAttribute(f);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(f);break}d=Ju(""+d),o.setAttribute(f,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(f==="formAction"?(l!=="input"&&Lt(o,l,"name",y.name,y,null),Lt(o,l,"formEncType",y.formEncType,y,null),Lt(o,l,"formMethod",y.formMethod,y,null),Lt(o,l,"formTarget",y.formTarget,y,null)):(Lt(o,l,"encType",y.encType,y,null),Lt(o,l,"method",y.method,y,null),Lt(o,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(f);break}d=Ju(""+d),o.setAttribute(f,d);break;case"onClick":d!=null&&(o.onclick=Am);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}f=Ju(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,""+d):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":d===!0?o.setAttribute(f,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,d):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(f,d):o.removeAttribute(f);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(f):o.setAttribute(f,d);break;case"popover":pt("beforetoggle",o),pt("toggle",o),Bt(o,"popover",d);break;case"xlinkActuate":Pe(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Pe(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Pe(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Pe(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Pe(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Pe(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Pe(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Pe(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Pe(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Bt(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=H_.get(f)||f,Bt(o,f,d))}}function Av(o,l,f,d,y,v){switch(f){case"style":Uf(o,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof d=="string"?Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&Hi(o,""+d);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Am);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!G.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),v=o[ge]||null,v=v!=null?v[f]:null,typeof v=="function"&&o.removeEventListener(l,v,y),typeof d=="function")){typeof v!="function"&&v!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(l,d,y);break e}f in o?o[f]=d:d===!0?o.setAttribute(f,""):Bt(o,f,d)}}}function ar(o,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",o),pt("load",o);var d=!1,y=!1,v;for(v in f)if(f.hasOwnProperty(v)){var R=f[v];if(R!=null)switch(v){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,v,R,f,null)}}y&&Lt(o,l,"srcSet",f.srcSet,f,null),d&&Lt(o,l,"src",f.src,f,null);return;case"input":pt("invalid",o);var O=v=R=y=null,F=null,te=null;for(d in f)if(f.hasOwnProperty(d)){var ae=f[d];if(ae!=null)switch(d){case"name":y=ae;break;case"type":R=ae;break;case"checked":F=ae;break;case"defaultChecked":te=ae;break;case"value":v=ae;break;case"defaultValue":O=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:Lt(o,l,d,ae,f,null)}}Il(o,v,O,F,te,R,y,!1),Xu(o);return;case"select":pt("invalid",o),d=R=v=null;for(y in f)if(f.hasOwnProperty(y)&&(O=f[y],O!=null))switch(y){case"value":v=O;break;case"defaultValue":R=O;break;case"multiple":d=O;default:Lt(o,l,y,O,f,null)}l=v,f=R,o.multiple=!!d,l!=null?_o(o,!!d,l,!1):f!=null&&_o(o,!!d,f,!0);return;case"textarea":pt("invalid",o),v=y=d=null;for(R in f)if(f.hasOwnProperty(R)&&(O=f[R],O!=null))switch(R){case"value":d=O;break;case"defaultValue":y=O;break;case"children":v=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:Lt(o,l,R,O,f,null)}Ol(o,d,y,v),Xu(o);return;case"option":for(F in f)if(f.hasOwnProperty(F)&&(d=f[F],d!=null))switch(F){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Lt(o,l,F,d,f,null)}return;case"dialog":pt("beforetoggle",o),pt("toggle",o),pt("cancel",o),pt("close",o);break;case"iframe":case"object":pt("load",o);break;case"video":case"audio":for(d=0;d<Eh.length;d++)pt(Eh[d],o);break;case"image":pt("error",o),pt("load",o);break;case"details":pt("toggle",o);break;case"embed":case"source":case"link":pt("error",o),pt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in f)if(f.hasOwnProperty(te)&&(d=f[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,te,d,f,null)}return;default:if(zf(l)){for(ae in f)f.hasOwnProperty(ae)&&(d=f[ae],d!==void 0&&Av(o,l,ae,d,f,void 0));return}}for(O in f)f.hasOwnProperty(O)&&(d=f[O],d!=null&&Lt(o,l,O,d,f,null))}function uU(o,l,f,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,R=null,O=null,F=null,te=null,ae=null;for(re in f){var fe=f[re];if(f.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":F=fe;default:d.hasOwnProperty(re)||Lt(o,l,re,null,d,fe)}}for(var ne in d){var re=d[ne];if(fe=f[ne],d.hasOwnProperty(ne)&&(re!=null||fe!=null))switch(ne){case"type":v=re;break;case"name":y=re;break;case"checked":te=re;break;case"defaultChecked":ae=re;break;case"value":R=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:re!==fe&&Lt(o,l,ne,re,d,fe)}}gi(o,R,O,F,te,ae,v,y);return;case"select":re=R=O=ne=null;for(v in f)if(F=f[v],f.hasOwnProperty(v)&&F!=null)switch(v){case"value":break;case"multiple":re=F;default:d.hasOwnProperty(v)||Lt(o,l,v,null,d,F)}for(y in d)if(v=d[y],F=f[y],d.hasOwnProperty(y)&&(v!=null||F!=null))switch(y){case"value":ne=v;break;case"defaultValue":O=v;break;case"multiple":R=v;default:v!==F&&Lt(o,l,y,v,d,F)}l=O,f=R,d=re,ne!=null?_o(o,!!f,ne,!1):!!d!=!!f&&(l!=null?_o(o,!!f,l,!0):_o(o,!!f,f?[]:"",!1));return;case"textarea":re=ne=null;for(O in f)if(y=f[O],f.hasOwnProperty(O)&&y!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Lt(o,l,O,null,d,y)}for(R in d)if(y=d[R],v=f[R],d.hasOwnProperty(R)&&(y!=null||v!=null))switch(R){case"value":ne=y;break;case"defaultValue":re=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==v&&Lt(o,l,R,y,d,v)}Dt(o,ne,re);return;case"option":for(var Qe in f)if(ne=f[Qe],f.hasOwnProperty(Qe)&&ne!=null&&!d.hasOwnProperty(Qe))switch(Qe){case"selected":o.selected=!1;break;default:Lt(o,l,Qe,null,d,ne)}for(F in d)if(ne=d[F],re=f[F],d.hasOwnProperty(F)&&ne!==re&&(ne!=null||re!=null))switch(F){case"selected":o.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Lt(o,l,F,ne,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in f)ne=f[Ge],f.hasOwnProperty(Ge)&&ne!=null&&!d.hasOwnProperty(Ge)&&Lt(o,l,Ge,null,d,ne);for(te in d)if(ne=d[te],re=f[te],d.hasOwnProperty(te)&&ne!==re&&(ne!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,l));break;default:Lt(o,l,te,ne,d,re)}return;default:if(zf(l)){for(var Vt in f)ne=f[Vt],f.hasOwnProperty(Vt)&&ne!==void 0&&!d.hasOwnProperty(Vt)&&Av(o,l,Vt,void 0,d,ne);for(ae in d)ne=d[ae],re=f[ae],!d.hasOwnProperty(ae)||ne===re||ne===void 0&&re===void 0||Av(o,l,ae,ne,d,re);return}}for(var Q in f)ne=f[Q],f.hasOwnProperty(Q)&&ne!=null&&!d.hasOwnProperty(Q)&&Lt(o,l,Q,null,d,ne);for(fe in d)ne=d[fe],re=f[fe],!d.hasOwnProperty(fe)||ne===re||ne==null&&re==null||Lt(o,l,fe,ne,d,re)}var Tv=null,Ev=null;function Tm(o){return o.nodeType===9?o:o.ownerDocument}function TR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ER(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function bv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Sv=null;function cU(){var o=window.event;return o&&o.type==="popstate"?o===Sv?!1:(Sv=o,!0):(Sv=null,!1)}var bR=typeof setTimeout=="function"?setTimeout:void 0,fU=typeof clearTimeout=="function"?clearTimeout:void 0,SR=typeof Promise=="function"?Promise:void 0,hU=typeof queueMicrotask=="function"?queueMicrotask:typeof SR<"u"?function(o){return SR.resolve(null).then(o).catch(dU)}:bR;function dU(o){setTimeout(function(){throw o})}function Ea(o){return o==="head"}function wR(o,l){var f=l,d=0,y=0;do{var v=f.nextSibling;if(o.removeChild(f),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(0<d&&8>d){f=d;var R=o.ownerDocument;if(f&1&&Sh(R.documentElement),f&2&&Sh(R.body),f&4)for(f=R.head,Sh(f),R=f.firstChild;R;){var O=R.nextSibling,F=R.nodeName;R[je]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&R.rel.toLowerCase()==="stylesheet"||f.removeChild(R),R=O}}if(y===0){o.removeChild(v),Nh(l);return}y--}else f==="$"||f==="$?"||f==="$!"?y++:d=f.charCodeAt(0)-48;else d=0;f=v}while(f);Nh(l)}function wv(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":wv(f),Re(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function pU(o,l,f,d){for(;o.nodeType===1;){var y=f;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[je])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Ts(o.nextSibling),o===null)break}return null}function mU(o,l,f){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Ts(o.nextSibling),o===null))return null;return o}function Rv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function gU(o,l){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")l();else{var d=function(){l(),f.removeEventListener("DOMContentLoaded",d)};f.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ts(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Cv=null;function RR(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}function CR(o,l,f){switch(l=Tm(f),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Sh(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Re(o)}var Zi=new Map,xR=new Set;function Em(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Vo=oe.d;oe.d={f:yU,r:_U,D:vU,C:AU,L:TU,m:EU,X:SU,S:bU,M:wU};function yU(){var o=Vo.f(),l=dm();return o||l}function _U(o){var l=it(o);l!==null&&l.tag===5&&l.type==="form"?Ww(l):Vo.r(o)}var Nc=typeof document>"u"?null:document;function kR(o,l,f){var d=Nc;if(d&&typeof l=="string"&&l){var y=bn(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),xR.has(y)||(xR.add(y),o={rel:o,crossOrigin:f,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),ar(l,"link",o),ht(l),d.head.appendChild(l)))}}function vU(o){Vo.D(o),kR("dns-prefetch",o,null)}function AU(o,l){Vo.C(o,l),kR("preconnect",o,l)}function TU(o,l,f){Vo.L(o,l,f);var d=Nc;if(d&&o&&l){var y='link[rel="preload"][as="'+bn(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+bn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+bn(f.imageSizes)+'"]')):y+='[href="'+bn(o)+'"]';var v=y;switch(l){case"style":v=Mc(o);break;case"script":v=Dc(o)}Zi.has(v)||(o=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:o,as:l},f),Zi.set(v,o),d.querySelector(y)!==null||l==="style"&&d.querySelector(wh(v))||l==="script"&&d.querySelector(Rh(v))||(l=d.createElement("link"),ar(l,"link",o),ht(l),d.head.appendChild(l)))}}function EU(o,l){Vo.m(o,l);var f=Nc;if(f&&o){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+bn(d)+'"][href="'+bn(o)+'"]',v=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Dc(o)}if(!Zi.has(v)&&(o=p({rel:"modulepreload",href:o},l),Zi.set(v,o),f.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Rh(v)))return}d=f.createElement("link"),ar(d,"link",o),ht(d),f.head.appendChild(d)}}}function bU(o,l,f){Vo.S(o,l,f);var d=Nc;if(d&&o){var y=_t(d).hoistableStyles,v=Mc(o);l=l||"default";var R=y.get(v);if(!R){var O={loading:0,preload:null};if(R=d.querySelector(wh(v)))O.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},f),(f=Zi.get(v))&&xv(o,f);var F=R=d.createElement("link");ht(F),ar(F,"link",o),F._p=new Promise(function(te,ae){F.onload=te,F.onerror=ae}),F.addEventListener("load",function(){O.loading|=1}),F.addEventListener("error",function(){O.loading|=2}),O.loading|=4,bm(R,l,d)}R={type:"stylesheet",instance:R,count:1,state:O},y.set(v,R)}}}function SU(o,l){Vo.X(o,l);var f=Nc;if(f&&o){var d=_t(f).hoistableScripts,y=Dc(o),v=d.get(y);v||(v=f.querySelector(Rh(y)),v||(o=p({src:o,async:!0},l),(l=Zi.get(y))&&kv(o,l),v=f.createElement("script"),ht(v),ar(v,"link",o),f.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function wU(o,l){Vo.M(o,l);var f=Nc;if(f&&o){var d=_t(f).hoistableScripts,y=Dc(o),v=d.get(y);v||(v=f.querySelector(Rh(y)),v||(o=p({src:o,async:!0,type:"module"},l),(l=Zi.get(y))&&kv(o,l),v=f.createElement("script"),ht(v),ar(v,"link",o),f.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function IR(o,l,f,d){var y=(y=Ve.current)?Em(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Mc(f.href),f=_t(y).hoistableStyles,d=f.get(l),d||(d={type:"style",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Mc(f.href);var v=_t(y).hoistableStyles,R=v.get(o);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,R),(v=y.querySelector(wh(o)))&&!v._p&&(R.instance=v,R.state.loading=5),Zi.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Zi.set(o,f),v||RU(y,o,f,R.state))),l&&d===null)throw Error(r(528,""));return R}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Dc(f),f=_t(y).hoistableScripts,d=f.get(l),d||(d={type:"script",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Mc(o){return'href="'+bn(o)+'"'}function wh(o){return'link[rel="stylesheet"]['+o+"]"}function OR(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function RU(o,l,f,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),ar(l,"link",f),ht(l),o.head.appendChild(l))}function Dc(o){return'[src="'+bn(o)+'"]'}function Rh(o){return"script[async]"+o}function NR(o,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+bn(f.href)+'"]');if(d)return l.instance=d,ht(d),d;var y=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),ht(d),ar(d,"style",y),bm(d,f.precedence,o),l.instance=d;case"stylesheet":y=Mc(f.href);var v=o.querySelector(wh(y));if(v)return l.state.loading|=4,l.instance=v,ht(v),v;d=OR(f),(y=Zi.get(y))&&xv(d,y),v=(o.ownerDocument||o).createElement("link"),ht(v);var R=v;return R._p=new Promise(function(O,F){R.onload=O,R.onerror=F}),ar(v,"link",d),l.state.loading|=4,bm(v,f.precedence,o),l.instance=v;case"script":return v=Dc(f.src),(y=o.querySelector(Rh(v)))?(l.instance=y,ht(y),y):(d=f,(y=Zi.get(v))&&(d=p({},f),kv(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),ht(y),ar(y,"link",d),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,bm(d,f.precedence,o));return l.instance}function bm(o,l,f){for(var d=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,v=y,R=0;R<d.length;R++){var O=d[R];if(O.dataset.precedence===l)v=O;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(o,l.firstChild))}function xv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function kv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Sm=null;function MR(o,l,f){if(Sm===null){var d=new Map,y=Sm=new Map;y.set(f,d)}else y=Sm,d=y.get(f),d||(d=new Map,y.set(f,d));if(d.has(o))return d;for(d.set(o,null),f=f.getElementsByTagName(o),y=0;y<f.length;y++){var v=f[y];if(!(v[je]||v[ce]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var R=v.getAttribute(l)||"";R=o+R;var O=d.get(R);O?O.push(v):d.set(R,[v])}}return d}function DR(o,l,f){o=o.ownerDocument||o,o.head.insertBefore(f,l==="title"?o.querySelector("head > title"):null)}function CU(o,l,f){if(f===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function PR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Ch=null;function xU(){}function kU(o,l,f){if(Ch===null)throw Error(r(475));var d=Ch;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Mc(f.href),v=o.querySelector(wh(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=wm.bind(d),o.then(d,d)),l.state.loading|=4,l.instance=v,ht(v);return}v=o.ownerDocument||o,f=OR(f),(y=Zi.get(y))&&xv(f,y),v=v.createElement("link"),ht(v);var R=v;R._p=new Promise(function(O,F){R.onload=O,R.onerror=F}),ar(v,"link",f),l.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=wm.bind(d),o.addEventListener("load",l),o.addEventListener("error",l))}}function IU(){if(Ch===null)throw Error(r(475));var o=Ch;return o.stylesheets&&o.count===0&&Iv(o,o.stylesheets),0<o.count?function(l){var f=setTimeout(function(){if(o.stylesheets&&Iv(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(f)}}:null}function wm(){if(this.count--,this.count===0){if(this.stylesheets)Iv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Rm=null;function Iv(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Rm=new Map,l.forEach(OU,o),Rm=null,wm.call(o))}function OU(o,l){if(!(l.state.loading&4)){var f=Rm.get(o);if(f)var d=f.get(null);else{f=new Map,Rm.set(o,f);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var R=y[v];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(f.set(R.dataset.precedence,R),d=R)}d&&f.set(null,d)}y=l.instance,R=y.getAttribute("data-precedence"),v=f.get(R)||d,v===d&&f.set(null,y),f.set(R,y),this.count++,d=wm.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var xh={$$typeof:z,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function NU(o,l,f,d,y,v,R,O){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function LR(o,l,f,d,y,v,R,O,F,te,ae,fe){return o=new NU(o,l,f,R,O,F,te,fe),l=1,v===!0&&(l|=24),v=_i(3,null,null,l),o.current=v,v.stateNode=o,l=f0(),l.refCount++,o.pooledCache=l,l.refCount++,v.memoizedState={element:d,isDehydrated:f,cache:l},m0(v),o}function VR(o){return o?(o=fc,o):fc}function UR(o,l,f,d,y,v){y=VR(y),d.context===null?d.context=y:d.pendingContext=y,d=ua(l),d.payload={element:f},v=v===void 0?null:v,v!==null&&(d.callback=v),f=ca(o,d,l),f!==null&&(bi(f,o,l),ih(f,o,l))}function zR(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function Ov(o,l){zR(o,l),(o=o.alternate)&&zR(o,l)}function BR(o){if(o.tag===13){var l=cc(o,67108864);l!==null&&bi(l,o,67108864),Ov(o,67108864)}}var Cm=!0;function MU(o,l,f,d){var y=Y.T;Y.T=null;var v=oe.p;try{oe.p=2,Nv(o,l,f,d)}finally{oe.p=v,Y.T=y}}function DU(o,l,f,d){var y=Y.T;Y.T=null;var v=oe.p;try{oe.p=8,Nv(o,l,f,d)}finally{oe.p=v,Y.T=y}}function Nv(o,l,f,d){if(Cm){var y=Mv(d);if(y===null)vv(o,l,d,xm,f),FR(o,d);else if(LU(y,o,l,f,d))d.stopPropagation();else if(FR(o,d),l&4&&-1<PU.indexOf(o)){for(;y!==null;){var v=it(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var R=En(v.pendingLanes);if(R!==0){var O=v;for(O.pendingLanes|=2,O.entangledLanes|=2;R;){var F=1<<31-Jt(R);O.entanglements[1]|=F,R&=~F}Ks(v),(Nt&6)===0&&(fm=on()+500,Th(0))}}break;case 13:O=cc(v,2),O!==null&&bi(O,v,2),dm(),Ov(v,2)}if(v=Mv(d),v===null&&vv(o,l,d,xm,f),v===y)break;y=v}y!==null&&d.stopPropagation()}else vv(o,l,d,null,f)}}function Mv(o){return o=qi(o),Dv(o)}var xm=null;function Dv(o){if(xm=null,o=Fe(o),o!==null){var l=s(o);if(l===null)o=null;else{var f=l.tag;if(f===13){if(o=a(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return xm=o,null}function jR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Is()){case zi:return 2;case ys:return 8;case Bi:case pi:return 32;case gr:return 268435456;default:return 32}default:return 32}}var Pv=!1,ba=null,Sa=null,wa=null,kh=new Map,Ih=new Map,Ra=[],PU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FR(o,l){switch(o){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":kh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(l.pointerId)}}function Oh(o,l,f,d,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:l,domEventName:f,eventSystemFlags:d,nativeEvent:v,targetContainers:[y]},l!==null&&(l=it(l),l!==null&&BR(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function LU(o,l,f,d,y){switch(l){case"focusin":return ba=Oh(ba,o,l,f,d,y),!0;case"dragenter":return Sa=Oh(Sa,o,l,f,d,y),!0;case"mouseover":return wa=Oh(wa,o,l,f,d,y),!0;case"pointerover":var v=y.pointerId;return kh.set(v,Oh(kh.get(v)||null,o,l,f,d,y)),!0;case"gotpointercapture":return v=y.pointerId,Ih.set(v,Oh(Ih.get(v)||null,o,l,f,d,y)),!0}return!1}function HR(o){var l=Fe(o.target);if(l!==null){var f=s(l);if(f!==null){if(l=f.tag,l===13){if(l=a(f),l!==null){o.blockedOn=l,X(o.priority,function(){if(f.tag===13){var d=Ei();d=nr(d);var y=cc(f,d);y!==null&&bi(y,f,d),Ov(f,d)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function km(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=Mv(o.nativeEvent);if(f===null){f=o.nativeEvent;var d=new f.constructor(f.type,f);vo=d,f.target.dispatchEvent(d),vo=null}else return l=it(f),l!==null&&BR(l),o.blockedOn=f,!1;l.shift()}return!0}function qR(o,l,f){km(o)&&f.delete(l)}function VU(){Pv=!1,ba!==null&&km(ba)&&(ba=null),Sa!==null&&km(Sa)&&(Sa=null),wa!==null&&km(wa)&&(wa=null),kh.forEach(qR),Ih.forEach(qR)}function Im(o,l){o.blockedOn===l&&(o.blockedOn=null,Pv||(Pv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VU)))}var Om=null;function $R(o){Om!==o&&(Om=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Om===o&&(Om=null);for(var l=0;l<o.length;l+=3){var f=o[l],d=o[l+1],y=o[l+2];if(typeof d!="function"){if(Dv(d||f)===null)continue;break}var v=it(f);v!==null&&(o.splice(l,3),l-=3,D0(v,{pending:!0,data:y,method:f.method,action:d},d,y))}}))}function Nh(o){function l(F){return Im(F,o)}ba!==null&&Im(ba,o),Sa!==null&&Im(Sa,o),wa!==null&&Im(wa,o),kh.forEach(l),Ih.forEach(l);for(var f=0;f<Ra.length;f++){var d=Ra[f];d.blockedOn===o&&(d.blockedOn=null)}for(;0<Ra.length&&(f=Ra[0],f.blockedOn===null);)HR(f),f.blockedOn===null&&Ra.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(d=0;d<f.length;d+=3){var y=f[d],v=f[d+1],R=y[ge]||null;if(typeof v=="function")R||$R(f);else if(R){var O=null;if(v&&v.hasAttribute("formAction")){if(y=v,R=v[ge]||null)O=R.formAction;else if(Dv(y)!==null)continue}else O=R.action;typeof O=="function"?f[d+1]=O:(f.splice(d,3),d-=3),$R(f)}}}function Lv(o){this._internalRoot=o}Nm.prototype.render=Lv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,d=Ei();UR(f,d,o,l,null,null)},Nm.prototype.unmount=Lv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;UR(o.current,2,null,o,null,null),dm(),l[Ee]=null}};function Nm(o){this._internalRoot=o}Nm.prototype.unstable_scheduleHydration=function(o){if(o){var l=$();o={blockedOn:null,target:o,priority:l};for(var f=0;f<Ra.length&&l!==0&&l<Ra[f].priority;f++);Ra.splice(f,0,o),f===0&&HR(o)}};var GR=e.version;if(GR!=="19.1.0")throw Error(r(527,GR,"19.1.0"));oe.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=c(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var UU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mm.isDisabled&&Mm.supportsFiber)try{ut=Mm.inject(UU),et=Mm}catch{}}return Dh.createRoot=function(o,l){if(!i(o))throw Error(r(299));var f=!1,d="",y=l1,v=u1,R=c1,O=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks)),l=LR(o,1,!1,null,null,f,d,y,v,R,O,null),o[Ee]=l.current,_v(o),new Lv(l)},Dh.hydrateRoot=function(o,l,f){if(!i(o))throw Error(r(299));var d=!1,y="",v=l1,R=u1,O=c1,F=null,te=null;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(v=f.onUncaughtError),f.onCaughtError!==void 0&&(R=f.onCaughtError),f.onRecoverableError!==void 0&&(O=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(F=f.unstable_transitionCallbacks),f.formState!==void 0&&(te=f.formState)),l=LR(o,1,!0,l,f??null,d,y,v,R,O,F,te),l.context=VR(null),f=l.current,d=Ei(),d=nr(d),y=ua(d),y.callback=null,ca(f,y,d),f=d,l.current.lanes=f,er(l,f),Ks(l),o[Ee]=l.current,_v(o),new Nm(l)},Dh.version="19.1.0",Dh}var nC;function KU(){if(nC)return zv.exports;nC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zv.exports=GU(),zv.exports}var WU=KU(),Ph={},rC;function YU(){if(rC)return Ph;rC=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.parse=a,Ph.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function a(_,A){const T=new s,b=_.length;if(b<2)return T;const S=(A==null?void 0:A.decode)||p;let C=0;do{const L=_.indexOf("=",C);if(L===-1)break;const z=_.indexOf(";",C),q=z===-1?b:z;if(L>q){C=_.lastIndexOf(";",L-1)+1;continue}const B=u(_,C,L),P=c(_,L,B),N=_.slice(B,P);if(T[N]===void 0){let k=u(_,L+1,q),x=c(_,q,k);const U=S(_.slice(k,x));T[N]=U}C=q+1}while(C<b);return T}function u(_,A,T){do{const b=_.charCodeAt(A);if(b!==32&&b!==9)return A}while(++A<T);return T}function c(_,A,T){for(;A>T;){const b=_.charCodeAt(--A);if(b!==32&&b!==9)return A+1}return T}function h(_,A,T){const b=(T==null?void 0:T.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const S=b(A);if(!e.test(S))throw new TypeError(`argument val is invalid: ${A}`);let C=_+"="+S;if(!T)return C;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);C+="; Max-Age="+T.maxAge}if(T.domain){if(!t.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);C+="; Domain="+T.domain}if(T.path){if(!r.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);C+="; Path="+T.path}if(T.expires){if(!g(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);C+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(C+="; HttpOnly"),T.secure&&(C+="; Secure"),T.partitioned&&(C+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return C}function p(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function g(_){return i.call(_)==="[object Date]"}return Ph}YU();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _O=n=>{throw TypeError(n)},QU=(n,e,t)=>e.has(n)||_O("Cannot "+t),Hv=(n,e,t)=>(QU(n,e,"read from private field"),t?t.call(n):e.get(n)),XU=(n,e,t)=>e.has(n)?_O("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),iC="popstate";function JU(n={}){function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Cd("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ll(i)}return e4(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function An(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZU(){return Math.random().toString(36).substring(2,10)}function sC(n,e){return{usr:n.state,key:n.key,idx:e}}function Cd(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vl(e):e,state:t,key:e&&e.key||r||ZU()}}function ll({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function e4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",c=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function g(){u="POP";let S=p(),C=S==null?null:S-h;h=S,c&&c({action:u,location:b.location,delta:C})}function _(S,C){u="PUSH";let L=Cd(b.location,S,C);h=p()+1;let z=sC(L,h),q=b.createHref(L);try{a.pushState(z,"",q)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(q)}s&&c&&c({action:u,location:b.location,delta:1})}function A(S,C){u="REPLACE";let L=Cd(b.location,S,C);h=p();let z=sC(L,h),q=b.createHref(L);a.replaceState(z,"",q),s&&c&&c({action:u,location:b.location,delta:0})}function T(S){let C=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof S=="string"?S:ll(S);return L=L.replace(/ $/,"%20"),ft(C,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,C)}let b={get action(){return u},get location(){return n(i,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(iC,g),c=S,()=>{i.removeEventListener(iC,g),c=null}},createHref(S){return e(i,S)},createURL:T,encodeLocation(S){let C=T(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:A,go(S){return a.go(S)}};return b}var Wh,oC=class{constructor(n){if(XU(this,Wh,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Hv(this,Wh).has(n))return Hv(this,Wh).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Hv(this,Wh).set(n,e)}};Wh=new WeakMap;var t4=new Set(["lazy","caseSensitive","path","id","index","children"]);function n4(n){return t4.has(n)}var r4=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function i4(n){return r4.has(n)}function s4(n){return n.index===!0}function Cg(n,e,t=[],r={}){return n.map((i,s)=>{let a=[...t,String(s)],u=typeof i.id=="string"?i.id:a.join("-");if(ft(i.index!==!0||!i.children,"Cannot specify children on an index route"),ft(!r[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),s4(i)){let c={...i,...e(i),id:u};return r[u]=c,c}else{let c={...i,...e(i),id:u,children:void 0};return r[u]=c,i.children&&(c.children=Cg(i.children,e,a,r)),c}})}function Pa(n,e,t="/"){return rg(n,e,t,!1)}function rg(n,e,t,r){let i=typeof e=="string"?vl(e):e,s=cs(i.pathname||"/",t);if(s==null)return null;let a=vO(n);a4(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let h=_4(s);u=g4(a[c],h,r)}return u}function o4(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function vO(n,e=[],t=[],r=""){let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let h=ro([r,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(ft(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),vO(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:p4(h,s.index),routesMeta:p})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of AO(s.path))i(s,a,c)}),e}function AO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=AO(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function a4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:m4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var l4=/^:[\w-]+$/,u4=3,c4=2,f4=1,h4=10,d4=-2,aC=n=>n==="*";function p4(n,e){let t=n.split("/"),r=t.length;return t.some(aC)&&(r+=d4),e&&(r+=c4),t.filter(i=>!aC(i)).reduce((i,s)=>i+(l4.test(s)?u4:s===""?f4:h4),r)}function m4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function g4(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=xg({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),_=c.route;if(!g&&h&&t&&!r[r.length-1].route.index&&(g=xg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:ro([s,g.pathname]),pathnameBase:T4(ro([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=ro([s,g.pathnameBase]))}return a}function xg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=y4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let T=u[_]||"";a=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const A=u[_];return g&&!A?h[p]=void 0:h[p]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function y4(n,e=!1,t=!0){An(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function _4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return An(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function cs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function v4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?vl(n):n;return{pathname:t?t.startsWith("/")?t:A4(t,e):e,search:E4(r),hash:b4(i)}}function A4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Gy(n){let e=TO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Ky(n,e,t,r=!1){let i;typeof n=="string"?i=vl(n):(i={...n},ft(!i.pathname||!i.pathname.includes("?"),qv("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),qv("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),qv("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?e[g]:"/"}let c=v4(i,u),h=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}var ro=n=>n.join("/").replace(/\/\/+/g,"/"),T4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),E4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,b4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,kg=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function xd(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var EO=["POST","PUT","PATCH","DELETE"],S4=new Set(EO),w4=["GET",...EO],R4=new Set(w4),C4=new Set([301,302,303,307,308]),x4=new Set([307,308]),$v={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},k4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Lh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},CE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,I4=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),bO="remix-router-transitions",SO=Symbol("ResetLoaderData");function O4(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ft(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],i=n.mapRouteProperties||I4,s={},a=Cg(n.routes,i,void 0,s),u,c=n.basename||"/",h=n.dataStrategy||L4,p={unstable_middleware:!1,...n.future},g=null,_=new Set,A=null,T=null,b=null,S=n.hydrationData!=null,C=Pa(a,n.history.location,c),L=!1,z=null;if(C==null&&!n.patchRoutesOnNavigation){let $=rs(404,{pathname:n.history.location.pathname}),{matches:X,route:Z}=vC(a);C=X,z={[Z.id]:$}}C&&!n.hydrationData&&tr(C,a,n.history.location.pathname).active&&(C=null);let q;if(C)if(C.some($=>$.route.lazy))q=!1;else if(!C.some($=>$.route.loader))q=!0;else{let $=n.hydrationData?n.hydrationData.loaderData:null,X=n.hydrationData?n.hydrationData.errors:null;if(X){let Z=C.findIndex(ce=>X[ce.route.id]!==void 0);q=C.slice(0,Z+1).every(ce=>!JA(ce.route,$,X))}else q=C.every(Z=>!JA(Z.route,$,X))}else{q=!1,C=[];let $=tr(null,a,n.history.location.pathname);$.active&&$.matches&&(L=!0,C=$.matches)}let B,P={historyAction:n.history.action,location:n.history.location,matches:C,initialized:q,navigation:$v,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||z,fetchers:new Map,blockers:new Map},N="POP",k=!1,x,U=!1,V=new Map,j=null,D=!1,Ce=!1,Oe=new Set,Y=new Map,oe=0,Ae=-1,qe=new Map,H=new Set,ie=new Map,_e=new Map,le=new Set,Se=new Map,we,Ve=null;function Kt(){if(g=n.history.listen(({action:$,location:X,delta:Z})=>{if(we){we(),we=void 0;return}An(Se.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=Ns({currentLocation:P.location,nextLocation:X,historyAction:$});if(ce&&Z!=null){let ge=new Promise(Ee=>{we=Ee});n.history.go(Z*-1),yr(ce,{state:"blocked",location:X,proceed(){yr(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),ge.then(()=>n.history.go(Z))},reset(){let Ee=new Map(P.blockers);Ee.set(ce,Lh),Ut({blockers:Ee})}});return}return Xt($,X)}),t){K4(e,V);let $=()=>W4(e,V);e.addEventListener("pagehide",$),j=()=>e.removeEventListener("pagehide",$)}return P.initialized||Xt("POP",P.location,{initialHydration:!0}),B}function Rt(){g&&g(),j&&j(),_.clear(),x&&x.abort(),P.fetchers.forEach(($,X)=>Jt(X)),P.blockers.forEach(($,X)=>mi(X))}function mr($){return _.add($),()=>_.delete($)}function Ut($,X={}){P={...P,...$};let Z=[],ce=[];P.fetchers.forEach((ge,Ee)=>{ge.state==="idle"&&(le.has(Ee)?Z.push(Ee):ce.push(Ee))}),le.forEach(ge=>{!P.fetchers.has(ge)&&!Y.has(ge)&&Z.push(ge)}),[..._].forEach(ge=>ge(P,{deletedFetchers:Z,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),Z.forEach(ge=>Jt(ge)),ce.forEach(ge=>P.fetchers.delete(ge))}function On($,X,{flushSync:Z}={}){var Le,je;let ce=P.actionData!=null&&P.navigation.formMethod!=null&&wi(P.navigation.formMethod)&&P.navigation.state==="loading"&&((Le=$.state)==null?void 0:Le._isRedirect)!==!0,ge;X.actionData?Object.keys(X.actionData).length>0?ge=X.actionData:ge=null:ce?ge=P.actionData:ge=null;let Ee=X.loaderData?yC(P.loaderData,X.loaderData,X.matches||[],X.errors):P.loaderData,Ue=P.blockers;Ue.size>0&&(Ue=new Map(Ue),Ue.forEach((Re,Fe)=>Ue.set(Fe,Lh)));let ke=k===!0||P.navigation.formMethod!=null&&wi(P.navigation.formMethod)&&((je=$.state)==null?void 0:je._isRedirect)!==!0;u&&(a=u,u=void 0),D||N==="POP"||(N==="PUSH"?n.history.push($,$.state):N==="REPLACE"&&n.history.replace($,$.state));let Ne;if(N==="POP"){let Re=V.get(P.location.pathname);Re&&Re.has($.pathname)?Ne={currentLocation:P.location,nextLocation:$}:V.has($.pathname)&&(Ne={currentLocation:$,nextLocation:P.location})}else if(U){let Re=V.get(P.location.pathname);Re?Re.add($.pathname):(Re=new Set([$.pathname]),V.set(P.location.pathname,Re)),Ne={currentLocation:P.location,nextLocation:$}}Ut({...X,actionData:ge,loaderData:Ee,historyAction:N,location:$,initialized:!0,navigation:$v,revalidation:"idle",restoreScrollPosition:Ms($,X.matches||P.matches),preventScrollReset:ke,blockers:Ue},{viewTransitionOpts:Ne,flushSync:Z===!0}),N="POP",k=!1,U=!1,D=!1,Ce=!1,Ve==null||Ve.resolve(),Ve=null}async function Zn($,X){if(typeof $=="number"){n.history.go($);return}let Z=XA(P.location,P.matches,c,$,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:ce,submission:ge,error:Ee}=lC(!1,Z,X),Ue=P.location,ke=Cd(P.location,ce,X&&X.state);ke={...ke,...n.history.encodeLocation(ke)};let Ne=X&&X.replace!=null?X.replace:void 0,Le="PUSH";Ne===!0?Le="REPLACE":Ne===!1||ge!=null&&wi(ge.formMethod)&&ge.formAction===P.location.pathname+P.location.search&&(Le="REPLACE");let je=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,Re=(X&&X.flushSync)===!0,Fe=Ns({currentLocation:Ue,nextLocation:ke,historyAction:Le});if(Fe){yr(Fe,{state:"blocked",location:ke,proceed(){yr(Fe,{state:"proceeding",proceed:void 0,reset:void 0,location:ke}),Zn($,X)},reset(){let it=new Map(P.blockers);it.set(Fe,Lh),Ut({blockers:it})}});return}await Xt(Le,ke,{submission:ge,pendingError:Ee,preventScrollReset:je,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:Re})}function di(){Ve||(Ve=Y4()),Nr(),Ut({revalidation:"loading"});let $=Ve.promise;return P.navigation.state==="submitting"?$:P.navigation.state==="idle"?(Xt(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),$):(Xt(N||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:U===!0}),$)}async function Xt($,X,Z){x&&x.abort(),x=null,N=$,D=(Z&&Z.startUninterruptedRevalidation)===!0,er(P.location,P.matches),k=(Z&&Z.preventScrollReset)===!0,U=(Z&&Z.enableViewTransition)===!0;let ce=u||a,ge=Z&&Z.overrideNavigation,Ee=Z!=null&&Z.initialHydration&&P.matches&&P.matches.length>0&&!L?P.matches:Pa(ce,X,c),Ue=(Z&&Z.flushSync)===!0;if(Ee&&P.initialized&&!Ce&&F4(P.location,X)&&!(Z&&Z.submission&&wi(Z.submission.formMethod))){On(X,{matches:Ee},{flushSync:Ue});return}let ke=tr(Ee,ce,X.pathname);if(ke.active&&ke.matches&&(Ee=ke.matches),!Ee){let{error:_t,notFoundMatches:ht,route:ye}=Wr(X.pathname);On(X,{matches:ht,loaderData:{},errors:{[ye.id]:_t}},{flushSync:Ue});return}x=new AbortController;let Ne=Uc(n.history,X,x.signal,Z&&Z.submission),Le=new oC(n.unstable_getContext?await n.unstable_getContext():void 0),je;if(Z&&Z.pendingError)je=[au(Ee).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&wi(Z.submission.formMethod)){let _t=await gs(Ne,X,Z.submission,Ee,Le,ke.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:Ue});if(_t.shortCircuited)return;if(_t.pendingActionResult){let[ht,ye]=_t.pendingActionResult;if(Si(ye)&&xd(ye.error)&&ye.error.status===404){x=null,On(X,{matches:_t.matches,loaderData:{},errors:{[ht]:ye.error}});return}}Ee=_t.matches||Ee,je=_t.pendingActionResult,ge=Gv(X,Z.submission),Ue=!1,ke.active=!1,Ne=Uc(n.history,Ne.url,Ne.signal)}let{shortCircuited:Re,matches:Fe,loaderData:it,errors:St}=await ks(Ne,X,Ee,Le,ke.active,ge,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,Ue,je);Re||(x=null,On(X,{matches:Fe||Ee,..._C(je),loaderData:it,errors:St}))}async function gs($,X,Z,ce,ge,Ee,Ue,ke={}){Nr();let Ne=$4(X,Z);if(Ut({navigation:Ne},{flushSync:ke.flushSync===!0}),Ee){let Re=await Ot(ce,X.pathname,$.signal);if(Re.type==="aborted")return{shortCircuited:!0};if(Re.type==="error"){let Fe=au(Re.partialMatches).route.id;return{matches:Re.partialMatches,pendingActionResult:[Fe,{type:"error",error:Re.error}]}}else if(Re.matches)ce=Re.matches;else{let{notFoundMatches:Fe,error:it,route:St}=Wr(X.pathname);return{matches:Fe,pendingActionResult:[St.id,{type:"error",error:it}]}}}let Le,je=Yh(ce,X);if(!je.route.action&&!je.route.lazy)Le={type:"error",error:rs(405,{method:$.method,pathname:X.pathname,routeId:je.route.id})};else{let Re=Qc(i,s,$,ce,je,Ue?[]:r,ge),Fe=await gr($,Re,ge,null);if(Le=Fe[je.route.id],!Le){for(let it of ce)if(Fe[it.route.id]){Le=Fe[it.route.id];break}}if($.signal.aborted)return{shortCircuited:!0}}if(fu(Le)){let Re;return ke&&ke.replace!=null?Re=ke.replace:Re=pC(Le.response.headers.get("Location"),new URL($.url),c)===P.location.pathname+P.location.search,await pi($,Le,!0,{submission:Z,replace:Re}),{shortCircuited:!0}}if(Si(Le)){let Re=au(ce,je.route.id);return(ke&&ke.replace)!==!0&&(N="PUSH"),{matches:ce,pendingActionResult:[Re.route.id,Le,je.route.id]}}return{matches:ce,pendingActionResult:[je.route.id,Le]}}async function ks($,X,Z,ce,ge,Ee,Ue,ke,Ne,Le,je,Re){let Fe=Ee||Gv(X,Ue),it=Ue||ke||TC(Fe),St=!D&&!Le;if(ge){if(St){let en=on(Re);Ut({navigation:Fe,...en!==void 0?{actionData:en}:{}},{flushSync:je})}let Pe=await Ot(Z,X.pathname,$.signal);if(Pe.type==="aborted")return{shortCircuited:!0};if(Pe.type==="error"){let en=au(Pe.partialMatches).route.id;return{matches:Pe.partialMatches,loaderData:{},errors:{[en]:Pe.error}}}else if(Pe.matches)Z=Pe.matches;else{let{error:en,notFoundMatches:_r,route:Qr}=Wr(X.pathname);return{matches:_r,loaderData:{},errors:{[Qr.id]:en}}}}let _t=u||a,{dsMatches:ht,revalidatingFetchers:ye}=uC($,ce,i,s,n.history,P,Z,it,X,Le?[]:r,Le===!0,Ce,Oe,le,ie,H,_t,c,Re);if(Ae=++oe,!n.dataStrategy&&!ht.some(Pe=>Pe.shouldLoad)&&ye.length===0){let Pe=Pr();return On(X,{matches:Z,loaderData:{},errors:Re&&Si(Re[1])?{[Re[0]]:Re[1].error}:null,..._C(Re),...Pe?{fetchers:new Map(P.fetchers)}:{}},{flushSync:je}),{shortCircuited:!0}}if(St){let Pe={};if(!ge){Pe.navigation=Fe;let en=on(Re);en!==void 0&&(Pe.actionData=en)}ye.length>0&&(Pe.fetchers=Is(ye)),Ut(Pe,{flushSync:je})}ye.forEach(Pe=>{Mr(Pe.key),Pe.controller&&Y.set(Pe.key,Pe.controller)});let G=()=>ye.forEach(Pe=>Mr(Pe.key));x&&x.signal.addEventListener("abort",G);let{loaderResults:de,fetcherResults:be}=await Kr(ht,ye,$,ce);if($.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",G),ye.forEach(Pe=>Y.delete(Pe.key));let tt=Dm(de);if(tt)return await pi($,tt.result,!0,{replace:Ne}),{shortCircuited:!0};if(tt=Dm(be),tt)return H.add(tt.key),await pi($,tt.result,!0,{replace:Ne}),{shortCircuited:!0};let{loaderData:zt,errors:Ct}=gC(P,Z,de,Re,ye,be);Le&&P.errors&&(Ct={...P.errors,...Ct});let Zt=Pr(),Bt=Tn(Ae),mn=Zt||Bt||ye.length>0;return{matches:Z,loaderData:zt,errors:Ct,...mn?{fetchers:new Map(P.fetchers)}:{}}}function on($){if($&&!Si($[1]))return{[$[0]]:$[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function Is($){return $.forEach(X=>{let Z=P.fetchers.get(X.key),ce=Vh(void 0,Z?Z.data:void 0);P.fetchers.set(X.key,ce)}),new Map(P.fetchers)}async function zi($,X,Z,ce){Mr($);let ge=(ce&&ce.flushSync)===!0,Ee=u||a,Ue=XA(P.location,P.matches,c,Z,X,ce==null?void 0:ce.relative),ke=Pa(Ee,Ue,c),Ne=tr(ke,Ee,Ue);if(Ne.active&&Ne.matches&&(ke=Ne.matches),!ke){et($,X,rs(404,{pathname:Ue}),{flushSync:ge});return}let{path:Le,submission:je,error:Re}=lC(!0,Ue,ce);if(Re){et($,X,Re,{flushSync:ge});return}let Fe=Yh(ke,Le),it=new oC(n.unstable_getContext?await n.unstable_getContext():void 0),St=(ce&&ce.preventScrollReset)===!0;if(je&&wi(je.formMethod)){await ys($,X,Le,Fe,ke,it,Ne.active,ge,St,je);return}ie.set($,{routeId:X,path:Le}),await Bi($,X,Le,Fe,ke,it,Ne.active,ge,St,je)}async function ys($,X,Z,ce,ge,Ee,Ue,ke,Ne,Le){Nr(),ie.delete($);function je(jt){if(!jt.route.action&&!jt.route.lazy){let Fi=rs(405,{method:Le.formMethod,pathname:Z,routeId:X});return et($,X,Fi,{flushSync:ke}),!0}return!1}if(!Ue&&je(ce))return;let Re=P.fetchers.get($);ut($,G4(Le,Re),{flushSync:ke});let Fe=new AbortController,it=Uc(n.history,Z,Fe.signal,Le);if(Ue){let jt=await Ot(ge,Z,it.signal,$);if(jt.type==="aborted")return;if(jt.type==="error"){et($,X,jt.error,{flushSync:ke});return}else if(jt.matches){if(ge=jt.matches,ce=Yh(ge,Z),je(ce))return}else{et($,X,rs(404,{pathname:Z}),{flushSync:ke});return}}Y.set($,Fe);let St=oe,_t=Qc(i,s,it,ge,ce,r,Ee),ye=(await gr(it,_t,Ee,$))[ce.route.id];if(it.signal.aborted){Y.get($)===Fe&&Y.delete($);return}if(le.has($)){if(fu(ye)||Si(ye)){ut($,Ia(void 0));return}}else{if(fu(ye))if(Y.delete($),Ae>St){ut($,Ia(void 0));return}else return H.add($),ut($,Vh(Le)),pi(it,ye,!1,{fetcherSubmission:Le,preventScrollReset:Ne});if(Si(ye)){et($,X,ye.error);return}}let G=P.navigation.location||P.location,de=Uc(n.history,G,Fe.signal),be=u||a,tt=P.navigation.state!=="idle"?Pa(be,P.navigation.location,c):P.matches;ft(tt,"Didn't find any matches after fetcher action");let zt=++oe;qe.set($,zt);let Ct=Vh(Le,ye.data);P.fetchers.set($,Ct);let{dsMatches:Zt,revalidatingFetchers:Bt}=uC(de,Ee,i,s,n.history,P,tt,Le,G,r,!1,Ce,Oe,le,ie,H,be,c,[ce.route.id,ye]);Bt.filter(jt=>jt.key!==$).forEach(jt=>{let Fi=jt.key,yo=P.fetchers.get(Fi),rr=Vh(void 0,yo?yo.data:void 0);P.fetchers.set(Fi,rr),Mr(Fi),jt.controller&&Y.set(Fi,jt.controller)}),Ut({fetchers:new Map(P.fetchers)});let mn=()=>Bt.forEach(jt=>Mr(jt.key));Fe.signal.addEventListener("abort",mn);let{loaderResults:Pe,fetcherResults:en}=await Kr(Zt,Bt,de,Ee);if(Fe.signal.aborted)return;Fe.signal.removeEventListener("abort",mn),qe.delete($),Y.delete($),Bt.forEach(jt=>Y.delete(jt.key));let _r=Dm(Pe);if(_r)return pi(de,_r.result,!1,{preventScrollReset:Ne});if(_r=Dm(en),_r)return H.add(_r.key),pi(de,_r.result,!1,{preventScrollReset:Ne});let{loaderData:Qr,errors:Ps}=gC(P,tt,Pe,void 0,Bt,en);if(P.fetchers.has($)){let jt=Ia(ye.data);P.fetchers.set($,jt)}Tn(zt),P.navigation.state==="loading"&&zt>Ae?(ft(N,"Expected pending action"),x&&x.abort(),On(P.navigation.location,{matches:tt,loaderData:Qr,errors:Ps,fetchers:new Map(P.fetchers)})):(Ut({errors:Ps,loaderData:yC(P.loaderData,Qr,tt,Ps),fetchers:new Map(P.fetchers)}),Ce=!1)}async function Bi($,X,Z,ce,ge,Ee,Ue,ke,Ne,Le){let je=P.fetchers.get($);ut($,Vh(Le,je?je.data:void 0),{flushSync:ke});let Re=new AbortController,Fe=Uc(n.history,Z,Re.signal);if(Ue){let ye=await Ot(ge,Z,Fe.signal,$);if(ye.type==="aborted")return;if(ye.type==="error"){et($,X,ye.error,{flushSync:ke});return}else if(ye.matches)ge=ye.matches,ce=Yh(ge,Z);else{et($,X,rs(404,{pathname:Z}),{flushSync:ke});return}}Y.set($,Re);let it=oe,St=Qc(i,s,Fe,ge,ce,r,Ee),ht=(await gr(Fe,St,Ee,$))[ce.route.id];if(Y.get($)===Re&&Y.delete($),!Fe.signal.aborted){if(le.has($)){ut($,Ia(void 0));return}if(fu(ht))if(Ae>it){ut($,Ia(void 0));return}else{H.add($),await pi(Fe,ht,!1,{preventScrollReset:Ne});return}if(Si(ht)){et($,X,ht.error);return}ut($,Ia(ht.data))}}async function pi($,X,Z,{submission:ce,fetcherSubmission:ge,preventScrollReset:Ee,replace:Ue}={}){X.response.headers.has("X-Remix-Revalidate")&&(Ce=!0);let ke=X.response.headers.get("Location");ft(ke,"Expected a Location header on the redirect Response"),ke=pC(ke,new URL($.url),c);let Ne=Cd(P.location,ke,{_isRedirect:!0});if(t){let St=!1;if(X.response.headers.has("X-Remix-Reload-Document"))St=!0;else if(CE.test(ke)){const _t=n.history.createURL(ke);St=_t.origin!==e.location.origin||cs(_t.pathname,c)==null}if(St){Ue?e.location.replace(ke):e.location.assign(ke);return}}x=null;let Le=Ue===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:je,formAction:Re,formEncType:Fe}=P.navigation;!ce&&!ge&&je&&Re&&Fe&&(ce=TC(P.navigation));let it=ce||ge;if(x4.has(X.response.status)&&it&&wi(it.formMethod))await Xt(Le,Ne,{submission:{...it,formAction:ke},preventScrollReset:Ee||k,enableViewTransition:Z?U:void 0});else{let St=Gv(Ne,ce);await Xt(Le,Ne,{overrideNavigation:St,fetcherSubmission:ge,preventScrollReset:Ee||k,enableViewTransition:Z?U:void 0})}}async function gr($,X,Z,ce){let ge,Ee={};try{ge=await V4(h,$,X,ce,Z,!1)}catch(Ue){return X.filter(ke=>ke.shouldLoad).forEach(ke=>{Ee[ke.route.id]={type:"error",error:Ue}}),Ee}for(let[Ue,ke]of Object.entries(ge))if(H4(ke)){let Ne=ke.result;Ee[Ue]={type:"redirect",response:B4(Ne,$,Ue,X,c)}}else Ee[Ue]=await z4(ke);return Ee}async function Kr($,X,Z,ce){let ge=gr(Z,$,ce,null),Ee=Promise.all(X.map(async Ne=>{if(Ne.matches&&Ne.match&&Ne.request&&Ne.controller){let je=(await gr(Ne.request,Ne.matches,ce,Ne.key))[Ne.match.route.id];return{[Ne.key]:je}}else return Promise.resolve({[Ne.key]:{type:"error",error:rs(404,{pathname:Ne.path})}})})),Ue=await ge,ke=(await Ee).reduce((Ne,Le)=>Object.assign(Ne,Le),{});return{loaderResults:Ue,fetcherResults:ke}}function Nr(){Ce=!0,ie.forEach(($,X)=>{Y.has(X)&&Oe.add(X),Mr(X)})}function ut($,X,Z={}){P.fetchers.set($,X),Ut({fetchers:new Map(P.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function et($,X,Z,ce={}){let ge=au(P.matches,X);Jt($),Ut({errors:{[ge.route.id]:Z},fetchers:new Map(P.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function Nn($){return _e.set($,(_e.get($)||0)+1),le.has($)&&le.delete($),P.fetchers.get($)||k4}function Jt($){let X=P.fetchers.get($);Y.has($)&&!(X&&X.state==="loading"&&qe.has($))&&Mr($),ie.delete($),qe.delete($),H.delete($),le.delete($),Oe.delete($),P.fetchers.delete($)}function Os($){let X=(_e.get($)||0)-1;X<=0?(_e.delete($),le.add($)):_e.set($,X),Ut({fetchers:new Map(P.fetchers)})}function Mr($){let X=Y.get($);X&&(X.abort(),Y.delete($))}function Dr($){for(let X of $){let Z=Nn(X),ce=Ia(Z.data);P.fetchers.set(X,ce)}}function Pr(){let $=[],X=!1;for(let Z of H){let ce=P.fetchers.get(Z);ft(ce,`Expected fetcher: ${Z}`),ce.state==="loading"&&(H.delete(Z),$.push(Z),X=!0)}return Dr($),X}function Tn($){let X=[];for(let[Z,ce]of qe)if(ce<$){let ge=P.fetchers.get(Z);ft(ge,`Expected fetcher: ${Z}`),ge.state==="loading"&&(Mr(Z),qe.delete(Z),X.push(Z))}return Dr(X),X.length>0}function En($,X){let Z=P.blockers.get($)||Lh;return Se.get($)!==X&&Se.set($,X),Z}function mi($){P.blockers.delete($),Se.delete($)}function yr($,X){let Z=P.blockers.get($)||Lh;ft(Z.state==="unblocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="proceeding"||Z.state==="blocked"&&X.state==="unblocked"||Z.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${X.state}`);let ce=new Map(P.blockers);ce.set($,X),Ut({blockers:ce})}function Ns({currentLocation:$,nextLocation:X,historyAction:Z}){if(Se.size===0)return;Se.size>1&&An(!1,"A router only supports one blocker at a time");let ce=Array.from(Se.entries()),[ge,Ee]=ce[ce.length-1],Ue=P.blockers.get(ge);if(!(Ue&&Ue.state==="proceeding")&&Ee({currentLocation:$,nextLocation:X,historyAction:Z}))return ge}function Wr($){let X=rs(404,{pathname:$}),Z=u||a,{matches:ce,route:ge}=vC(Z);return{notFoundMatches:ce,route:ge,error:X}}function ji($,X,Z){if(A=$,b=X,T=Z||null,!S&&P.navigation===$v){S=!0;let ce=Ms(P.location,P.matches);ce!=null&&Ut({restoreScrollPosition:ce})}return()=>{A=null,b=null,T=null}}function Yr($,X){return T&&T($,X.map(ce=>o4(ce,P.loaderData)))||$.key}function er($,X){if(A&&b){let Z=Yr($,X);A[Z]=b()}}function Ms($,X){if(A){let Z=Yr($,X),ce=A[Z];if(typeof ce=="number")return ce}return null}function tr($,X,Z){if(n.patchRoutesOnNavigation)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:rg(X,Z,c,!0)}}else return{active:!0,matches:rg(X,Z,c,!0)||[]};return{active:!1,matches:null}}async function Ot($,X,Z,ce){if(!n.patchRoutesOnNavigation)return{type:"success",matches:$};let ge=$;for(;;){let Ee=u==null,Ue=u||a,ke=s;try{await n.patchRoutesOnNavigation({signal:Z,path:X,matches:ge,fetcherKey:ce,patch:(je,Re)=>{Z.aborted||cC(je,Re,Ue,ke,i)}})}catch(je){return{type:"error",error:je,partialMatches:ge}}finally{Ee&&!Z.aborted&&(a=[...a])}if(Z.aborted)return{type:"aborted"};let Ne=Pa(Ue,X,c);if(Ne)return{type:"success",matches:Ne};let Le=rg(Ue,X,c,!0);if(!Le||ge.length===Le.length&&ge.every((je,Re)=>je.route.id===Le[Re].route.id))return{type:"success",matches:null};ge=Le}}function nr($){s={},u=Cg($,i,void 0,s)}function Ds($,X){let Z=u==null;cC($,X,u||a,s,i),Z&&(a=[...a],Ut({}))}return B={get basename(){return c},get future(){return p},get state(){return P},get routes(){return a},get window(){return e},initialize:Kt,subscribe:mr,enableScrollRestoration:ji,navigate:Zn,fetch:zi,revalidate:di,createHref:$=>n.history.createHref($),encodeLocation:$=>n.history.encodeLocation($),getFetcher:Nn,deleteFetcher:Os,dispose:Rt,getBlocker:En,deleteBlocker:mi,patchRoutes:Ds,_internalFetchControllers:Y,_internalSetRoutes:nr},B}function N4(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function XA(n,e,t,r,i,s){let a,u;if(i){a=[];for(let h of e)if(a.push(h),h.route.id===i){u=h;break}}else a=e,u=e[e.length-1];let c=Ky(r||".",Gy(a),cs(n.pathname,t)||n.pathname,s==="path");if(r==null&&(c.search=n.search,c.hash=n.hash),(r==null||r===""||r===".")&&u){let h=xE(c.search);if(u.route.index&&!h)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&h){let p=new URLSearchParams(c.search),g=p.getAll("index");p.delete("index"),g.filter(A=>A).forEach(A=>p.append("index",A));let _=p.toString();c.search=_?`?${_}`:""}}return t!=="/"&&(c.pathname=c.pathname==="/"?t:ro([t,c.pathname])),ll(c)}function lC(n,e,t){if(!t||!N4(t))return{path:e};if(t.formMethod&&!q4(t.formMethod))return{path:e,error:rs(405,{method:t.formMethod})};let r=()=>({path:e,error:rs(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=IO(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!wi(s))return r();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((_,[A,T])=>`${_}${A}=${T}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!wi(s))return r();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}ft(typeof FormData=="function","FormData is not available in this environment");let u,c;if(t.formData)u=eT(t.formData),c=t.formData;else if(t.body instanceof FormData)u=eT(t.body),c=t.body;else if(t.body instanceof URLSearchParams)u=t.body,c=mC(u);else if(t.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(t.body),c=mC(u)}catch{return r()}let h={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(wi(h.formMethod))return{path:e,submission:h};let p=vl(e);return n&&p.search&&xE(p.search)&&u.append("index",""),p.search=`?${u}`,{path:ll(p),submission:h}}function uC(n,e,t,r,i,s,a,u,c,h,p,g,_,A,T,b,S,C,L){var j;let z=L?Si(L[1])?L[1].error:L[1].data:void 0,q=i.createURL(s.location),B=i.createURL(c),P;if(p&&s.errors){let D=Object.keys(s.errors)[0];P=a.findIndex(Ce=>Ce.route.id===D)}else if(L&&Si(L[1])){let D=L[0];P=a.findIndex(Ce=>Ce.route.id===D)-1}let N=L?L[1].statusCode:void 0,k=N&&N>=400,x={currentUrl:q,currentParams:((j=s.matches[0])==null?void 0:j.params)||{},nextUrl:B,nextParams:a[0].params,...u,actionResult:z,actionStatus:N},U=a.map((D,Ce)=>{let{route:Oe}=D,Y=null;if(P!=null&&Ce>P?Y=!1:Oe.lazy?Y=!0:Oe.loader==null?Y=!1:p?Y=JA(Oe,s.loaderData,s.errors):M4(s.loaderData,s.matches[Ce],D)&&(Y=!0),Y!==null)return ZA(t,r,n,D,h,e,Y);let oe=k?!1:g||q.pathname+q.search===B.pathname+B.search||q.search!==B.search||D4(s.matches[Ce],D),Ae={...x,defaultShouldRevalidate:oe},qe=Ig(D,Ae);return ZA(t,r,n,D,h,e,qe,Ae)}),V=[];return T.forEach((D,Ce)=>{if(p||!a.some(ie=>ie.route.id===D.routeId)||A.has(Ce))return;let Oe=Pa(S,D.path,C);if(!Oe){V.push({key:Ce,routeId:D.routeId,path:D.path,matches:null,match:null,request:null,controller:null});return}if(b.has(Ce))return;let Y=s.fetchers.get(Ce),oe=Yh(Oe,D.path),Ae=new AbortController,qe=Uc(i,D.path,Ae.signal),H=null;if(_.has(Ce))_.delete(Ce),H=Qc(t,r,qe,Oe,oe,h,e);else if(Y&&Y.state!=="idle"&&Y.data===void 0)g&&(H=Qc(t,r,qe,Oe,oe,h,e));else{let ie={...x,defaultShouldRevalidate:k?!1:g};Ig(oe,ie)&&(H=Qc(t,r,qe,Oe,oe,h,e,ie))}H&&V.push({key:Ce,routeId:D.routeId,path:D.path,matches:H,match:oe,request:qe,controller:Ae})}),{dsMatches:U,revalidatingFetchers:V}}function JA(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function M4(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function D4(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Ig(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function cC(n,e,t,r,i){let s;if(n){let c=r[n];ft(c,`No route found to patch children into: routeId = ${n}`),c.children||(c.children=[]),s=c.children}else s=t;let a=e.filter(c=>!s.some(h=>wO(c,h))),u=Cg(a,i,[n||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...u)}function wO(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>wO(t,s))}):!1}var fC=new WeakMap,RO=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let i=t[e.id];if(ft(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[n];if(!s)return;let a=fC.get(i);a||(a={},fC.set(i,a));let u=a[n];if(u)return u;let c=(async()=>{let h=n4(n),g=i[n]!==void 0&&n!=="hasErrorBoundary";if(h)An(!h,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),a[n]=Promise.resolve();else if(g)An(!1,`Route "${i.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let _=await s();_!=null&&(Object.assign(i,{[n]:_}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[n]=void 0,Object.values(i.lazy).every(_=>_===void 0)&&(i.lazy=void 0))})();return a[n]=c,c},hC=new WeakMap;function P4(n,e,t,r,i){let s=t[n.id];if(ft(s,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let p=hC.get(s);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let g=(async()=>{ft(typeof n.lazy=="function","No lazy route function found");let _=await n.lazy(),A={};for(let T in _){let b=_[T];if(b===void 0)continue;let S=i4(T),L=s[T]!==void 0&&T!=="hasErrorBoundary";S?An(!S,"Route property "+T+" is not a supported property to be returned from a lazy route function. This property will be ignored."):L?An(!L,`Route "${s.id}" has a static property "${T}" defined but its lazy function is also returning a value for this property. The lazy route property "${T}" will be ignored.`):A[T]=b}Object.assign(s,A),Object.assign(s,{...r(s),lazy:void 0})})();return hC.set(s,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let a=Object.keys(n.lazy),u=[],c;for(let p of a){if(i&&i.includes(p))continue;let g=RO({key:p,route:n,manifest:t,mapRouteProperties:r});g&&(u.push(g),p===e&&(c=g))}let h=u.length>0?Promise.all(u).then(()=>{}):void 0;return h==null||h.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:c}}async function dC(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{t[e[s].route.id]=i}),t}async function L4(n){return n.matches.some(e=>e.route.unstable_middleware)?CO(n,!1,()=>dC(n),(e,t)=>({[t]:{type:"error",result:e}})):dC(n)}async function CO(n,e,t,r){let{matches:i,request:s,params:a,context:u}=n,c={handlerResult:void 0};try{let h=i.flatMap(g=>g.route.unstable_middleware?g.route.unstable_middleware.map(_=>[g.route.id,_]):[]),p=await xO({request:s,params:a,context:u},h,e,c,t);return e?p:c.handlerResult}catch(h){if(!c.middlewareError)throw h;let p=await r(c.middlewareError.error,c.middlewareError.routeId);return c.handlerResult?Object.assign(c.handlerResult,p):p}}async function xO(n,e,t,r,i,s=0){let{request:a}=n;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let u=e[s];if(!u)return r.handlerResult=await i(),r.handlerResult;let[c,h]=u,p=!1,g,_=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");p=!0,await xO(n,e,t,r,i,s+1)};try{let A=await h({request:n.request,params:n.params,context:n.context},_);return p?A===void 0?g:A:_()}catch(A){throw r.middlewareError?r.middlewareError.error!==A&&(r.middlewareError={routeId:c,error:A}):r.middlewareError={routeId:c,error:A},A}}function kO(n,e,t,r,i){let s=RO({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:n}),a=P4(r.route,wi(t.method)?"action":"loader",e,n,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function ZA(n,e,t,r,i,s,a,u=null){let c=!1,h=kO(n,e,t,r,i);return{...r,_lazyPromises:h,shouldLoad:a,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler(p){return c=!0,u?typeof p=="boolean"?Ig(r,{...u,defaultShouldRevalidate:p}):Ig(r,u):a},resolve(p){return c||a||p&&t.method==="GET"&&(r.route.lazy||r.route.loader)?U4({request:t,match:r,lazyHandlerPromise:h==null?void 0:h.handler,lazyRoutePromise:h==null?void 0:h.route,handlerOverride:p,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Qc(n,e,t,r,i,s,a,u=null){return r.map(c=>c.route.id!==i.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler:()=>!1,_lazyPromises:kO(n,e,t,c,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:ZA(n,e,t,c,s,a,!0,u))}async function V4(n,e,t,r,i,s){t.some(h=>{var p;return(p=h._lazyPromises)==null?void 0:p.middleware})&&await Promise.all(t.map(h=>{var p;return(p=h._lazyPromises)==null?void 0:p.middleware}));let a={request:e,params:t[0].params,context:i,matches:t},c=await n({...a,fetcherKey:r,unstable_runClientMiddleware:h=>{let p=a;return CO(p,!1,()=>h({...p,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(g,_)=>({[_]:{type:"error",result:g}}))}});try{await Promise.all(t.flatMap(h=>{var p,g;return[(p=h._lazyPromises)==null?void 0:p.handler,(g=h._lazyPromises)==null?void 0:g.route]}))}catch{}return c}async function U4({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let a,u,c=wi(n.method),h=c?"action":"loader",p=g=>{let _,A=new Promise((S,C)=>_=C);u=()=>_(),n.signal.addEventListener("abort",u);let T=S=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${e.route.id}]`)):g({request:n,params:e.params,context:s},...S!==void 0?[S]:[]),b=(async()=>{try{return{type:"data",result:await(i?i(C=>T(C)):T())}}catch(S){return{type:"error",result:S}}})();return Promise.race([b,A])};try{let g=c?e.route.action:e.route.loader;if(t||r)if(g){let _,[A]=await Promise.all([p(g).catch(T=>{_=T}),t,r]);if(_!==void 0)throw _;a=A}else{await t;let _=c?e.route.action:e.route.loader;if(_)[a]=await Promise.all([p(_),r]);else if(h==="action"){let A=new URL(n.url),T=A.pathname+A.search;throw rs(405,{method:n.method,pathname:T,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(g)a=await p(g);else{let _=new URL(n.url),A=_.pathname+_.search;throw rs(404,{pathname:A})}}catch(g){return{type:"error",result:g}}finally{u&&n.signal.removeEventListener("abort",u)}return a}async function z4(n){var r,i,s,a,u,c;let{result:e,type:t}=n;if(OO(e)){let h;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new kg(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:"data",data:h,statusCode:e.status,headers:e.headers}}return t==="error"?AC(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new kg(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:xd(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:xd(e)?e.status:void 0}:AC(e)?{type:"data",data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function B4(n,e,t,r,i){let s=n.headers.get("Location");if(ft(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!CE.test(s)){let a=r.slice(0,r.findIndex(u=>u.route.id===t)+1);s=XA(new URL(e.url),a,i,s),n.headers.set("Location",s)}return n}function pC(n,e,t){if(CE.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=cs(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return n}function Uc(n,e,t,r){let i=n.createURL(IO(e)).toString(),s={signal:t};if(r&&wi(r.formMethod)){let{formMethod:a,formEncType:u}=r;s.method=a.toUpperCase(),u==="application/json"?(s.headers=new Headers({"Content-Type":u}),s.body=JSON.stringify(r.json)):u==="text/plain"?s.body=r.text:u==="application/x-www-form-urlencoded"&&r.formData?s.body=eT(r.formData):s.body=r.formData}return new Request(i,s)}function eT(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function mC(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function j4(n,e,t,r=!1,i=!1){let s={},a=null,u,c=!1,h={},p=t&&Si(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let _=g.route.id,A=e[_];if(ft(!fu(A),"Cannot handle redirect results in processLoaderData"),Si(A)){let T=A.error;if(p!==void 0&&(T=p,p=void 0),a=a||{},i)a[_]=T;else{let b=au(n,_);a[b.route.id]==null&&(a[b.route.id]=T)}r||(s[_]=SO),c||(c=!0,u=xd(A.error)?A.error.status:500),A.headers&&(h[_]=A.headers)}else s[_]=A.data,A.statusCode&&A.statusCode!==200&&!c&&(u=A.statusCode),A.headers&&(h[_]=A.headers)}),p!==void 0&&t&&(a={[t[0]]:p},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:u||200,loaderHeaders:h}}function gC(n,e,t,r,i,s){let{loaderData:a,errors:u}=j4(e,t,r);return i.filter(c=>!c.matches||c.matches.some(h=>h.shouldLoad)).forEach(c=>{let{key:h,match:p,controller:g}=c,_=s[h];if(ft(_,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Si(_)){let A=au(n.matches,p==null?void 0:p.route.id);u&&u[A.route.id]||(u={...u,[A.route.id]:_.error}),n.fetchers.delete(h)}else if(fu(_))ft(!1,"Unhandled fetcher revalidation redirect");else{let A=Ia(_.data);n.fetchers.set(h,A)}}),{loaderData:a,errors:u}}function yC(n,e,t,r){let i=Object.entries(e).filter(([,s])=>s!==SO).reduce((s,[a,u])=>(s[a]=u,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&s.route.loader&&(i[a]=n[a]),r&&r.hasOwnProperty(a))break}return i}function _C(n){return n?Si(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function au(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function vC(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rs(n,{pathname:e,routeId:t,method:r,type:i,message:s}={}){let a="Unknown Server Error",u="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&e&&t?u=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(u="Unable to encode submission body")):n===403?(a="Forbidden",u=`Route "${t}" does not match URL "${e}"`):n===404?(a="Not Found",u=`No route matches URL "${e}"`):n===405&&(a="Method Not Allowed",r&&e&&t?u=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(u=`Invalid request method "${r.toUpperCase()}"`)),new kg(n||500,a,new Error(u),!0)}function Dm(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(fu(i))return{key:r,result:i}}}function IO(n){let e=typeof n=="string"?vl(n):n;return ll({...e,hash:""})}function F4(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function H4(n){return OO(n.result)&&C4.has(n.result.status)}function Si(n){return n.type==="error"}function fu(n){return(n&&n.type)==="redirect"}function AC(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function OO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function q4(n){return R4.has(n.toUpperCase())}function wi(n){return S4.has(n.toUpperCase())}function xE(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Yh(n,e){let t=typeof e=="string"?vl(e).search:e.search;if(n[n.length-1].route.index&&xE(t||""))return n[n.length-1];let r=TO(n);return r[r.length-1]}function TC(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:s,json:a}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:a,text:void 0}}}function Gv(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function $4(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Vh(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function G4(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Ia(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function K4(n,e){try{let t=n.sessionStorage.getItem(bO);if(t){let r=JSON.parse(t);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function W4(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(bO,JSON.stringify(t))}catch(r){An(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Y4(){let n,e,t=new Promise((r,i)=>{n=async s=>{r(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Hu=W.createContext(null);Hu.displayName="DataRouter";var rp=W.createContext(null);rp.displayName="DataRouterState";var kE=W.createContext({isTransitioning:!1});kE.displayName="ViewTransition";var NO=W.createContext(new Map);NO.displayName="Fetchers";var Q4=W.createContext(null);Q4.displayName="Await";var xs=W.createContext(null);xs.displayName="Navigation";var Wy=W.createContext(null);Wy.displayName="Location";var ps=W.createContext({outlet:null,matches:[],isDataRoute:!1});ps.displayName="Route";var IE=W.createContext(null);IE.displayName="RouteError";function X4(n,{relative:e}={}){ft(xf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=W.useContext(xs),{hash:i,pathname:s,search:a}=ip(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:ro([t,s])),r.createHref({pathname:u,search:a,hash:i})}function xf(){return W.useContext(Wy)!=null}function Al(){return ft(xf(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(Wy).location}var MO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DO(n){W.useContext(xs).static||W.useLayoutEffect(n)}function qu(){let{isDataRoute:n}=W.useContext(ps);return n?fz():J4()}function J4(){ft(xf(),"useNavigate() may be used only in the context of a <Router> component.");let n=W.useContext(Hu),{basename:e,navigator:t}=W.useContext(xs),{matches:r}=W.useContext(ps),{pathname:i}=Al(),s=JSON.stringify(Gy(r)),a=W.useRef(!1);return DO(()=>{a.current=!0}),W.useCallback((c,h={})=>{if(An(a.current,MO),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=Ky(c,JSON.parse(s),i,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ro([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,s,i,n])}var Z4=W.createContext(null);function ez(n){let e=W.useContext(ps).outlet;return e&&W.createElement(Z4.Provider,{value:n},e)}function PO(){let{matches:n}=W.useContext(ps),e=n[n.length-1];return e?e.params:{}}function ip(n,{relative:e}={}){let{matches:t}=W.useContext(ps),{pathname:r}=Al(),i=JSON.stringify(Gy(t));return W.useMemo(()=>Ky(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function tz(n,e,t,r){ft(xf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=W.useContext(xs),{matches:a}=W.useContext(ps),u=a[a.length-1],c=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let L=g&&g.path||"";UO(h,!g||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let _=Al(),A;A=_;let T=A.pathname||"/",b=T;if(p!=="/"){let L=p.replace(/^\//,"").split("/");b="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let S=!s&&t&&t.matches&&t.matches.length>0?t.matches:Pa(n,{pathname:b});return An(g||S!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),An(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),oz(S&&S.map(L=>Object.assign({},L,{params:Object.assign({},c,L.params),pathname:ro([p,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:ro([p,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,t,r)}function nz(){let n=cz(),e=xd(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=W.createElement(W.Fragment,null,W.createElement("p",null,"💿 Hey developer 👋"),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:s},"ErrorBoundary")," or"," ",W.createElement("code",{style:s},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:i},t):null,a)}var rz=W.createElement(nz,null),iz=class extends W.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?W.createElement(ps.Provider,{value:this.props.routeContext},W.createElement(IE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sz({routeContext:n,match:e,children:t}){let r=W.useContext(Hu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(ps.Provider,{value:n},t)}function oz(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let c=i.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);ft(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let h=i[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:p,errors:g}=t,_=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||_){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,h,p)=>{let g,_=!1,A=null,T=null;t&&(g=s&&h.route.id?s[h.route.id]:void 0,A=h.route.errorElement||rz,a&&(u<0&&p===0?(UO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):u===p&&(_=!0,T=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,p+1)),S=()=>{let C;return g?C=A:_?C=T:h.route.Component?C=W.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=c,W.createElement(sz,{match:h,routeContext:{outlet:c,matches:b,isDataRoute:t!=null},children:C})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?W.createElement(iz,{location:t.location,revalidation:t.revalidation,component:A,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}function OE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function az(n){let e=W.useContext(Hu);return ft(e,OE(n)),e}function LO(n){let e=W.useContext(rp);return ft(e,OE(n)),e}function lz(n){let e=W.useContext(ps);return ft(e,OE(n)),e}function NE(n){let e=lz(n),t=e.matches[e.matches.length-1];return ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function uz(){return NE("useRouteId")}function VO(){return LO("useNavigation").navigation}function cz(){var r;let n=W.useContext(IE),e=LO("useRouteError"),t=NE("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function fz(){let{router:n}=az("useNavigate"),e=NE("useNavigate"),t=W.useRef(!1);return DO(()=>{t.current=!0}),W.useCallback(async(i,s={})=>{An(t.current,MO),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var EC={};function UO(n,e,t){!e&&!EC[n]&&(EC[n]=!0,An(!1,t))}var bC={};function SC(n,e){!n&&!bC[e]&&(bC[e]=!0,console.warn(e))}function hz(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&An(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:W.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&An(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:W.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&An(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:W.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var dz=["HydrateFallback","hydrateFallbackElement"],pz=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function mz({router:n,flushSync:e}){let[t,r]=W.useState(n.state),[i,s]=W.useState(),[a,u]=W.useState({isTransitioning:!1}),[c,h]=W.useState(),[p,g]=W.useState(),[_,A]=W.useState(),T=W.useRef(new Map),b=W.useCallback((z,{deletedFetchers:q,flushSync:B,viewTransitionOpts:P})=>{z.fetchers.forEach((k,x)=>{k.data!==void 0&&T.current.set(x,k.data)}),q.forEach(k=>T.current.delete(k)),SC(B===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(SC(P==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!N){e&&B?e(()=>r(z)):W.startTransition(()=>r(z));return}if(e&&B){e(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let k=n.window.document.startViewTransition(()=>{e(()=>r(z))});k.finished.finally(()=>{e(()=>{h(void 0),g(void 0),s(void 0),u({isTransitioning:!1})})}),e(()=>g(k));return}p?(c&&c.resolve(),p.skipTransition(),A({state:z,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(s(z),u({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,e,p,c]);W.useLayoutEffect(()=>n.subscribe(b),[n,b]),W.useEffect(()=>{a.isTransitioning&&!a.flushSync&&h(new pz)},[a]),W.useEffect(()=>{if(c&&i&&n.window){let z=i,q=c.promise,B=n.window.document.startViewTransition(async()=>{W.startTransition(()=>r(z)),await q});B.finished.finally(()=>{h(void 0),g(void 0),s(void 0),u({isTransitioning:!1})}),g(B)}},[i,c,n.window]),W.useEffect(()=>{c&&i&&t.location.key===i.location.key&&c.resolve()},[c,p,t.location,i]),W.useEffect(()=>{!a.isTransitioning&&_&&(s(_.state),u({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),A(void 0))},[a.isTransitioning,_]);let S=W.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:z=>n.navigate(z),push:(z,q,B)=>n.navigate(z,{state:q,preventScrollReset:B==null?void 0:B.preventScrollReset}),replace:(z,q,B)=>n.navigate(z,{replace:!0,state:q,preventScrollReset:B==null?void 0:B.preventScrollReset})}),[n]),C=n.basename||"/",L=W.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return W.createElement(W.Fragment,null,W.createElement(Hu.Provider,{value:L},W.createElement(rp.Provider,{value:t},W.createElement(NO.Provider,{value:T.current},W.createElement(kE.Provider,{value:a},W.createElement(Az,{basename:C,location:t.location,navigationType:t.historyAction,navigator:S},W.createElement(gz,{routes:n.routes,future:n.future,state:t})))))),null)}var gz=W.memo(yz);function yz({routes:n,future:e,state:t}){return tz(n,void 0,t,e)}function _z({to:n,replace:e,state:t,relative:r}){ft(xf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=W.useContext(xs);An(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=W.useContext(ps),{pathname:a}=Al(),u=qu(),c=Ky(n,Gy(s),a,r==="path"),h=JSON.stringify(c);return W.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:r})},[u,h,r,e,t]),null}function vz(n){return ez(n.context)}function Az({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){ft(!xf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),u=W.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=vl(t));let{pathname:c="/",search:h="",hash:p="",state:g=null,key:_="default"}=t,A=W.useMemo(()=>{let T=cs(c,a);return T==null?null:{location:{pathname:T,search:h,hash:p,state:g,key:_},navigationType:r}},[a,c,h,p,g,_,r]);return An(A!=null,`<Router basename="${a}"> is not able to match the URL "${c}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:W.createElement(xs.Provider,{value:u},W.createElement(Wy.Provider,{children:e,value:A}))}var ig="get",sg="application/x-www-form-urlencoded";function Yy(n){return n!=null&&typeof n.tagName=="string"}function Tz(n){return Yy(n)&&n.tagName.toLowerCase()==="button"}function Ez(n){return Yy(n)&&n.tagName.toLowerCase()==="form"}function bz(n){return Yy(n)&&n.tagName.toLowerCase()==="input"}function Sz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wz(n,e){return n.button===0&&(!e||e==="_self")&&!Sz(n)}var Pm=null;function Rz(){if(Pm===null)try{new FormData(document.createElement("form"),0),Pm=!1}catch{Pm=!0}return Pm}var Cz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kv(n){return n!=null&&!Cz.has(n)?(An(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sg}"`),null):n}function xz(n,e){let t,r,i,s,a;if(Ez(n)){let u=n.getAttribute("action");r=u?cs(u,e):null,t=n.getAttribute("method")||ig,i=Kv(n.getAttribute("enctype"))||sg,s=new FormData(n)}else if(Tz(n)||bz(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?cs(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||ig,i=Kv(n.getAttribute("formenctype"))||Kv(u.getAttribute("enctype"))||sg,s=new FormData(u,n),!Rz()){let{name:h,type:p,value:g}=n;if(p==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,g)}}else{if(Yy(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ig,r=null,i=sg,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}function ME(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function kz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Iz(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Oz(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await kz(s,t);return a.links?a.links():[]}return[]}));return Pz(r.flat(1).filter(Iz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function wC(n,e,t,r,i,s){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,u=(c,h)=>{var p;return t[h].pathname!==c.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,h)=>a(c,h)||u(c,h)):s==="data"?e.filter((c,h)=>{var g;let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let _=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Nz(n,e,{includeHydrateFallback:t}={}){return Mz(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Mz(n){return[...new Set(n)]}function Dz(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Pz(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(Dz(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}var Lz=new Set([100,101,204,205]);function Vz(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&cs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function zO(){let n=W.useContext(Hu);return ME(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Uz(){let n=W.useContext(rp);return ME(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var DE=W.createContext(void 0);DE.displayName="FrameworkContext";function BO(){let n=W.useContext(DE);return ME(n,"You must render this element inside a <HydratedRouter> element"),n}function zz(n,e){let t=W.useContext(DE),[r,i]=W.useState(!1),[s,a]=W.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,_=W.useRef(null);W.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let b=C=>{C.forEach(L=>{a(L.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[n]),W.useEffect(()=>{if(r){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[r]);let A=()=>{i(!0)},T=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,_,{}]:[s,_,{onFocus:Uh(u,A),onBlur:Uh(c,T),onMouseEnter:Uh(h,A),onMouseLeave:Uh(p,T),onTouchStart:Uh(g,A)}]:[!1,_,{}]}function Uh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Bz({page:n,...e}){let{router:t}=zO(),r=W.useMemo(()=>Pa(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?W.createElement(Fz,{page:n,matches:r,...e}):null}function jz(n){let{manifest:e,routeModules:t}=BO(),[r,i]=W.useState([]);return W.useEffect(()=>{let s=!1;return Oz(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function Fz({page:n,matches:e,...t}){let r=Al(),{manifest:i,routeModules:s}=BO(),{basename:a}=zO(),{loaderData:u,matches:c}=Uz(),h=W.useMemo(()=>wC(n,e,c,i,r,"data"),[n,e,c,i,r]),p=W.useMemo(()=>wC(n,e,c,i,r,"assets"),[n,e,c,i,r]),g=W.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,b=!1;if(e.forEach(C=>{var z;let L=i.routes[C.route.id];!L||!L.hasLoader||(!h.some(q=>q.route.id===C.route.id)&&C.route.id in u&&((z=s[C.route.id])!=null&&z.shouldRevalidate)||L.hasClientLoader?b=!0:T.add(C.route.id))}),T.size===0)return[];let S=Vz(n,a);return b&&T.size>0&&S.searchParams.set("_routes",e.filter(C=>T.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[a,u,r,i,h,e,n,s]),_=W.useMemo(()=>Nz(p,i),[p,i]),A=jz(p);return W.createElement(W.Fragment,null,g.map(T=>W.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),_.map(T=>W.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),A.map(({key:T,link:b})=>W.createElement("link",{key:T,...b})))}function Hz(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jO&&(window.__reactRouterVersion="7.5.3")}catch{}function qz(n,e){return O4({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:JU({window:e==null?void 0:e.window}),hydrationData:$z(),routes:n,mapRouteProperties:hz,hydrationRouteProperties:dz,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function $z(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:Gz(n.errors)}),n}function Gz(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new kg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[r]=a}catch{}}if(t[r]==null){let s=new Error(i.message);s.stack="",t[r]=s}}else t[r]=i;return t}var FO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HO=W.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:u,target:c,to:h,preventScrollReset:p,viewTransition:g,..._},A){let{basename:T}=W.useContext(xs),b=typeof h=="string"&&FO.test(h),S,C=!1;if(typeof h=="string"&&b&&(S=h,jO))try{let x=new URL(window.location.href),U=h.startsWith("//")?new URL(x.protocol+h):new URL(h),V=cs(U.pathname,T);U.origin===x.origin&&V!=null?h=V+U.search+U.hash:C=!0}catch{An(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=X4(h,{relative:i}),[z,q,B]=zz(r,_),P=Qz(h,{replace:a,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:g});function N(x){e&&e(x),x.defaultPrevented||P(x)}let k=W.createElement("a",{..._,...B,href:S||L,onClick:C||s?e:N,ref:Hz(A,q),target:c,"data-discover":!b&&t==="render"?"true":void 0});return z&&!b?W.createElement(W.Fragment,null,k,W.createElement(Bz,{page:L})):k});HO.displayName="Link";var Kz=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:u,children:c,...h},p){let g=ip(a,{relative:h.relative}),_=Al(),A=W.useContext(rp),{navigator:T,basename:b}=W.useContext(xs),S=A!=null&&t3(g)&&u===!0,C=T.encodeLocation?T.encodeLocation(g).pathname:g.pathname,L=_.pathname,z=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(L=L.toLowerCase(),z=z?z.toLowerCase():null,C=C.toLowerCase()),z&&b&&(z=cs(z,b)||z);const q=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let B=L===C||!i&&L.startsWith(C)&&L.charAt(q)==="/",P=z!=null&&(z===C||!i&&z.startsWith(C)&&z.charAt(C.length)==="/"),N={isActive:B,isPending:P,isTransitioning:S},k=B?e:void 0,x;typeof r=="function"?x=r(N):x=[r,B?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof s=="function"?s(N):s;return W.createElement(HO,{...h,"aria-current":k,className:x,ref:p,style:U,to:a,viewTransition:u},typeof c=="function"?c(N):c)});Kz.displayName="NavLink";var Wz=W.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=ig,action:u,onSubmit:c,relative:h,preventScrollReset:p,viewTransition:g,..._},A)=>{let T=Zz(),b=e3(u,{relative:h}),S=a.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&FO.test(u),L=z=>{if(c&&c(z),z.defaultPrevented)return;z.preventDefault();let q=z.nativeEvent.submitter,B=(q==null?void 0:q.getAttribute("formmethod"))||a;T(q||z.currentTarget,{fetcherKey:e,method:B,navigate:t,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:g})};return W.createElement("form",{ref:A,method:S,action:b,onSubmit:r?c:L,..._,"data-discover":!C&&n==="render"?"true":void 0})});Wz.displayName="Form";function Yz(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qO(n){let e=W.useContext(Hu);return ft(e,Yz(n)),e}function Qz(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let u=qu(),c=Al(),h=ip(n,{relative:s});return W.useCallback(p=>{if(wz(p,e)){p.preventDefault();let g=t!==void 0?t:ll(c)===ll(h);u(n,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,u,h,t,r,e,n,i,s,a])}var Xz=0,Jz=()=>`__${String(++Xz)}__`;function Zz(){let{router:n}=qO("useSubmit"),{basename:e}=W.useContext(xs),t=uz();return W.useCallback(async(r,i={})=>{let{action:s,method:a,encType:u,formData:c,body:h}=xz(r,e);if(i.navigate===!1){let p=i.fetcherKey||Jz();await n.fetch(p,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||a,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||a,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function e3(n,{relative:e}={}){let{basename:t}=W.useContext(xs),r=W.useContext(ps);ft(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ip(n||".",{relative:e})},a=Al();if(n==null){s.search=a.search;let u=new URLSearchParams(s.search),c=u.getAll("index");if(c.some(p=>p==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:ro([t,s.pathname])),ll(s)}function t3(n,e={}){let t=W.useContext(kE);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qO("useViewTransitionState"),i=ip(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=cs(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=cs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return xg(i.pathname,a)!=null||xg(i.pathname,s)!=null}new TextEncoder;[...Lz];var $O=yO();const n3=gO($O);/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function r3(n){return W.createElement(mz,{flushSync:$O.flushSync,...n})}function i3({isOpened:n}){const[e,t]=W.useState(!1);return I.jsx("button",{className:"ham-button",children:I.jsxs("svg",{className:`hamburger ${e?n?"open":"close":""}`,onClick:()=>{t(!0)},fill:"#c1ff72",viewBox:"0 0 100 100",width:"50",children:[I.jsx("g",{className:"top-group",children:I.jsx("line",{className:"line top",x1:"10",x2:"90",y1:"30",y2:"30"})}),I.jsx("g",{className:"middle-group",children:I.jsx("line",{className:"line middle",x1:"10",x2:"90",y1:"50",y2:"50"})}),I.jsx("g",{className:"bottom-group",children:I.jsx("line",{className:"line bottom",x1:"10",x2:"90",y1:"70",y2:"70"})})]})})}const Og="/assets/MDRLogoB-Y-uXmpVe.png",tT="/assets/facebookBlack-DTxLsc-z.png",nT="/assets/instagramBlack-f2rhpmha.png",rT="/assets/linkedinBlack-D22kkR36.png";function Fo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function GO(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Di={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},af={duration:.5,overwrite:!1,delay:0},PE,dr,Yt,io=1e8,Rr=1/io,iT=Math.PI*2,s3=iT/4,o3=0,KO=Math.sqrt,a3=Math.cos,l3=Math.sin,Yn=function(e){return typeof e=="string"},fn=function(e){return typeof e=="function"},Jo=function(e){return typeof e=="number"},LE=function(e){return typeof e>"u"},co=function(e){return typeof e=="object"},ri=function(e){return e!==!1},VE=function(){return typeof window<"u"},Lm=function(e){return fn(e)||Yn(e)},WO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},xr=Array.isArray,sT=/(?:-?\.?\d|\.)+/gi,YO=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Gc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Wv=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,QO=/[+-]=-?[.\d]+/,XO=/[^,'"\[\]\s]+/gi,u3=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,nn,Xs,oT,UE,Vi={},Ng={},JO,ZO=function(e){return(Ng=lf(e,Vi))&&ci},zE=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},kd=function(e,t){return!t&&console.warn(e)},eN=function(e,t){return e&&(Vi[e]=t)&&Ng&&(Ng[e]=t)||Vi},Id=function(){return 0},c3={suppressEvents:!0,isStart:!0,kill:!1},og={suppressEvents:!0,kill:!1},f3={suppressEvents:!0},BE={},Ya=[],aT={},tN,Ri={},Yv={},RC=30,ag=[],jE="",FE=function(e){var t=e[0],r,i;if(co(t)||fn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=ag.length;i--&&!ag[i].targetTest(t););r=ag[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new wN(e[i],r)))||e.splice(i,1);return e},Au=function(e){return e._gsap||FE(as(e))[0]._gsap},nN=function(e,t,r){return(r=e[t])&&fn(r)?e[t]():LE(r)&&e.getAttribute&&e.getAttribute(t)||r},ii=function(e,t){return(e=e.split(",")).forEach(t)||e},_n=function(e){return Math.round(e*1e5)/1e5||0},xn=function(e){return Math.round(e*1e7)/1e7||0},Xc=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},h3=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},Mg=function(){var e=Ya.length,t=Ya.slice(0),r,i;for(aT={},Ya.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},rN=function(e,t,r,i){Ya.length&&!dr&&Mg(),e.render(t,r,dr&&t<0&&(e._initted||e._startAt)),Ya.length&&!dr&&Mg()},iN=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(XO).length<2?t:Yn(e)?e.trim():e},sN=function(e){return e},Ui=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},d3=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},lf=function(e,t){for(var r in t)e[r]=t[r];return e},CC=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=co(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},Dg=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},ld=function(e){var t=e.parent||nn,r=e.keyframes?d3(xr(e.keyframes)):Ui;if(ri(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},p3=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},oN=function(e,t,r,i,s){var a=e[i],u;if(s)for(u=t[s];a&&a[s]>u;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},Qy=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[r]===t&&(e[r]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},ul=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Tu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},m3=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},lT=function(e,t,r,i){return e._startAt&&(dr?e._startAt.revert(og):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},g3=function n(e){return!e||e._ts&&n(e.parent)},xC=function(e){return e._repeat?uf(e._tTime,e=e.duration()+e._rDelay)*e:0},uf=function(e,t){var r=Math.floor(e=xn(e/t));return e&&r===e?r-1:r},Pg=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Xy=function(e){return e._end=xn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Rr)||0))},Jy=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=xn(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Xy(e),r._dirty||Tu(r,e)),e},aN=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Pg(e.rawTime(),t),(!t._dur||sp(0,t.totalDuration(),r)-t._tTime>Rr)&&t.render(r,!0)),Tu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},Zs=function(e,t,r,i){return t.parent&&ul(t),t._start=xn((Jo(r)?r:r||e!==nn?ts(e,r,t):e._time)+t._delay),t._end=xn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),oN(e,t,"_first","_last",e._sort?"_start":0),uT(t)||(e._recent=t),i||aN(e,t),e._ts<0&&Jy(e,e._tTime),e},lN=function(e,t){return(Vi.ScrollTrigger||zE("scrollTrigger",t))&&Vi.ScrollTrigger.create(t,e)},uN=function(e,t,r,i,s){if(qE(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!dr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&tN!==Ci.frame)return Ya.push(e),e._lazy=[s,i],1},y3=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},uT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},_3=function(e,t,r,i){var s=e.ratio,a=t<0||!t&&(!e._start&&y3(e)&&!(!e._initted&&uT(e))||(e._ts<0||e._dp._ts<0)&&!uT(e))?0:1,u=e._rDelay,c=0,h,p,g;if(u&&e._repeat&&(c=sp(0,e._tDur,t),p=uf(c,u),e._yoyo&&p&1&&(a=1-a),p!==uf(e._tTime,u)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||dr||i||e._zTime===Rr||!t&&e._zTime){if(!e._initted&&uN(e,t,i,r,c))return;for(g=e._zTime,e._zTime=t||(r?Rr:0),r||(r=t&&!g),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,h=e._pt;h;)h.r(a,h.d),h=h._next;t<0&&lT(e,t,r,!0),e._onUpdate&&!r&&Ii(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&Ii(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&ul(e,1),!r&&!dr&&(Ii(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},v3=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},cf=function(e,t,r,i){var s=e._repeat,a=xn(t)||0,u=e._tTime/e._tDur;return u&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:xn(a*(s+1)+e._rDelay*s):a,u>0&&!i&&Jy(e,e._tTime=e._tDur*u),e.parent&&Xy(e),r||Tu(e.parent,e),e},kC=function(e){return e instanceof jr?Tu(e):cf(e,e._dur)},A3={_start:0,endTime:Id,totalDuration:Id},ts=function n(e,t,r){var i=e.labels,s=e._recent||A3,a=e.duration()>=io?s.endTime(!1):e._dur,u,c,h;return Yn(t)&&(isNaN(t)||t in i)?(c=t.charAt(0),h=t.substr(-1)==="%",u=t.indexOf("="),c==="<"||c===">"?(u>=0&&(t=t.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(u<0?s:r).totalDuration()/100:1)):u<0?(t in i||(i[t]=a),i[t]):(c=parseFloat(t.charAt(u-1)+t.substr(u+1)),h&&r&&(c=c/100*(xr(r)?r[0]:r).totalDuration()),u>1?n(e,t.substr(0,u-1),r)+c:a+c)):t==null?a:+t},ud=function(e,t,r){var i=Jo(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],u,c;if(i&&(a.duration=t[1]),a.parent=r,e){for(u=a,c=r;c&&!("immediateRender"in u);)u=c.vars.defaults||{},c=ri(c.vars.inherit)&&c.parent;a.immediateRender=ri(u.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Cn(t[0],a,t[s+1])},Tl=function(e,t){return e||e===0?t(e):t},sp=function(e,t,r){return r<e?e:r>t?t:r},wr=function(e,t){return!Yn(e)||!(t=u3.exec(e))?"":t[1]},T3=function(e,t,r){return Tl(r,function(i){return sp(e,t,i)})},cT=[].slice,cN=function(e,t){return e&&co(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&co(e[0]))&&!e.nodeType&&e!==Xs},E3=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Yn(i)&&!t||cN(i,1)?(s=r).push.apply(s,as(i)):r.push(i)})||r},as=function(e,t,r){return Yt&&!t&&Yt.selector?Yt.selector(e):Yn(e)&&!r&&(oT||!ff())?cT.call((t||UE).querySelectorAll(e),0):xr(e)?E3(e,r):cN(e)?cT.call(e,0):e?[e]:[]},fT=function(e){return e=as(e)[0]||kd("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return as(t,r.querySelectorAll?r:r===e?kd("Invalid scope")||UE.createElement("div"):e)}},fN=function(e){return e.sort(function(){return .5-Math.random()})},hN=function(e){if(fn(e))return e;var t=co(e)?e:{each:e},r=Eu(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},u=i>0&&i<1,c=isNaN(i)||u,h=t.axis,p=i,g=i;return Yn(i)?p=g={center:.5,edges:.5,end:1}[i]||0:!u&&c&&(p=i[0],g=i[1]),function(_,A,T){var b=(T||t).length,S=a[b],C,L,z,q,B,P,N,k,x;if(!S){if(x=t.grid==="auto"?0:(t.grid||[1,io])[1],!x){for(N=-1e8;N<(N=T[x++].getBoundingClientRect().left)&&x<b;);x<b&&x--}for(S=a[b]=[],C=c?Math.min(x,b)*p-.5:i%x,L=x===io?0:c?b*g/x-.5:i/x|0,N=0,k=io,P=0;P<b;P++)z=P%x-C,q=L-(P/x|0),S[P]=B=h?Math.abs(h==="y"?q:z):KO(z*z+q*q),B>N&&(N=B),B<k&&(k=B);i==="random"&&fN(S),S.max=N-k,S.min=k,S.v=b=(parseFloat(t.amount)||parseFloat(t.each)*(x>b?b-1:h?h==="y"?b/x:x:Math.max(x,b/x))||0)*(i==="edges"?-1:1),S.b=b<0?s-b:s,S.u=wr(t.amount||t.each)||0,r=r&&b<0?EN(r):r}return b=(S[_]-S.min)/S.max||0,xn(S.b+(r?r(b):b)*S.v)+S.u}},hT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=xn(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(Jo(r)?0:wr(r))}},dN=function(e,t){var r=xr(e),i,s;return!r&&co(e)&&(i=r=e.radius||io,e.values?(e=as(e.values),(s=!Jo(e[0]))&&(i*=i)):e=hT(e.increment)),Tl(t,r?fn(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var u=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),h=io,p=0,g=e.length,_,A;g--;)s?(_=e[g].x-u,A=e[g].y-c,_=_*_+A*A):_=Math.abs(e[g]-u),_<h&&(h=_,p=g);return p=!i||h<=i?e[p]:a,s||p===a||Jo(a)?p:p+wr(a)}:hT(e))},pN=function(e,t,r,i){return Tl(xr(e)?!t:r===!0?!!(r=0):!i,function(){return xr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},b3=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,a){return a(s)},i)}},S3=function(e,t){return function(r){return e(parseFloat(r))+(t||wr(r))}},w3=function(e,t,r){return gN(e,t,0,1,r)},mN=function(e,t,r){return Tl(r,function(i){return e[~~t(i)]})},R3=function n(e,t,r){var i=t-e;return xr(e)?mN(e,n(0,e.length),t):Tl(r,function(s){return(i+(s-e)%i)%i+e})},C3=function n(e,t,r){var i=t-e,s=i*2;return xr(e)?mN(e,n(0,e.length-1),t):Tl(r,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},Od=function(e){for(var t=0,r="",i,s,a,u;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),u=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(u?XO:sT),r+=e.substr(t,i-t)+pN(u?s:+s[0],u?0:+s[1],+s[2]||1e-5),t=a+1;return r+e.substr(t,e.length-t)},gN=function(e,t,r,i,s){var a=t-e,u=i-r;return Tl(s,function(c){return r+((c-e)/a*u||0)})},x3=function n(e,t,r,i){var s=isNaN(e+t)?0:function(A){return(1-A)*e+A*t};if(!s){var a=Yn(e),u={},c,h,p,g,_;if(r===!0&&(i=1)&&(r=null),a)e={p:e},t={p:t};else if(xr(e)&&!xr(t)){for(p=[],g=e.length,_=g-2,h=1;h<g;h++)p.push(n(e[h-1],e[h]));g--,s=function(T){T*=g;var b=Math.min(_,~~T);return p[b](T-b)},r=t}else i||(e=lf(xr(e)?[]:{},e));if(!p){for(c in t)HE.call(u,e,c,"get",t[c]);s=function(T){return KE(T,u)||(a?e.p:e)}}}return Tl(r,s)},IC=function(e,t,r){var i=e.labels,s=io,a,u,c;for(a in i)u=i[a]-t,u<0==!!r&&u&&s>(u=Math.abs(u))&&(c=a,s=u);return c},Ii=function(e,t,r){var i=e.vars,s=i[t],a=Yt,u=e._ctx,c,h,p;if(s)return c=i[t+"Params"],h=i.callbackScope||e,r&&Ya.length&&Mg(),u&&(Yt=u),p=c?s.apply(h,c):s.call(h),Yt=a,p},Qh=function(e){return ul(e),e.scrollTrigger&&e.scrollTrigger.kill(!!dr),e.progress()<1&&Ii(e,"onInterrupt"),e},Kc,yN=[],_N=function(e){if(e)if(e=!e.name&&e.default||e,VE()||e.headless){var t=e.name,r=fn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Id,render:KE,add:HE,kill:q3,modifier:H3,rawVars:0},a={targetTest:0,get:0,getSetter:GE,aliases:{},register:0};if(ff(),e!==i){if(Ri[t])return;Ui(i,Ui(Dg(e,s),a)),lf(i.prototype,lf(s,Dg(e,a))),Ri[i.prop=t]=i,e.targetTest&&(ag.push(i),BE[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}eN(t,i),e.register&&e.register(ci,i,si)}else yN.push(e)},Ht=255,Xh={aqua:[0,Ht,Ht],lime:[0,Ht,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ht],navy:[0,0,128],white:[Ht,Ht,Ht],olive:[128,128,0],yellow:[Ht,Ht,0],orange:[Ht,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ht,0,0],pink:[Ht,192,203],cyan:[0,Ht,Ht],transparent:[Ht,Ht,Ht,0]},Qv=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Ht+.5|0},vN=function(e,t,r){var i=e?Jo(e)?[e>>16,e>>8&Ht,e&Ht]:0:Xh.black,s,a,u,c,h,p,g,_,A,T;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Xh[e])i=Xh[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),u=e.charAt(3),e="#"+s+s+a+a+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ht,i&Ht,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ht,e&Ht]}else if(e.substr(0,3)==="hsl"){if(i=T=e.match(sT),!t)c=+i[0]%360/360,h=+i[1]/100,p=+i[2]/100,a=p<=.5?p*(h+1):p+h-p*h,s=p*2-a,i.length>3&&(i[3]*=1),i[0]=Qv(c+1/3,s,a),i[1]=Qv(c,s,a),i[2]=Qv(c-1/3,s,a);else if(~e.indexOf("="))return i=e.match(YO),r&&i.length<4&&(i[3]=1),i}else i=e.match(sT)||Xh.transparent;i=i.map(Number)}return t&&!T&&(s=i[0]/Ht,a=i[1]/Ht,u=i[2]/Ht,g=Math.max(s,a,u),_=Math.min(s,a,u),p=(g+_)/2,g===_?c=h=0:(A=g-_,h=p>.5?A/(2-g-_):A/(g+_),c=g===s?(a-u)/A+(a<u?6:0):g===a?(u-s)/A+2:(s-a)/A+4,c*=60),i[0]=~~(c+.5),i[1]=~~(h*100+.5),i[2]=~~(p*100+.5)),r&&i.length<4&&(i[3]=1),i},AN=function(e){var t=[],r=[],i=-1;return e.split(Qa).forEach(function(s){var a=s.match(Gc)||[];t.push.apply(t,a),r.push(i+=a.length+1)}),t.c=r,t},OC=function(e,t,r){var i="",s=(e+i).match(Qa),a=t?"hsla(":"rgba(",u=0,c,h,p,g;if(!s)return e;if(s=s.map(function(_){return(_=vN(_,t,1))&&a+(t?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),r&&(p=AN(e),c=r.c,c.join(i)!==p.c.join(i)))for(h=e.replace(Qa,"1").split(Gc),g=h.length-1;u<g;u++)i+=h[u]+(~c.indexOf(u)?s.shift()||a+"0,0,0,0)":(p.length?p:s.length?s:r).shift());if(!h)for(h=e.split(Qa),g=h.length-1;u<g;u++)i+=h[u]+s[u];return i+h[g]},Qa=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Xh)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),k3=/hsl[a]?\(/,TN=function(e){var t=e.join(" "),r;if(Qa.lastIndex=0,Qa.test(t))return r=k3.test(t),e[1]=OC(e[1],r),e[0]=OC(e[0],r,AN(e[1])),!0},Nd,Ci=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,a=s,u=[],c,h,p,g,_,A,T=function b(S){var C=n()-i,L=S===!0,z,q,B,P;if((C>e||C<0)&&(r+=C-t),i+=C,B=i-r,z=B-a,(z>0||L)&&(P=++g.frame,_=B-g.time*1e3,g.time=B=B/1e3,a+=z+(z>=s?4:s-z),q=1),L||(c=h(b)),q)for(A=0;A<u.length;A++)u[A](B,_,P,S)};return g={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(S){return _/(1e3/(S||60))},wake:function(){JO&&(!oT&&VE()&&(Xs=oT=window,UE=Xs.document||{},Vi.gsap=ci,(Xs.gsapVersions||(Xs.gsapVersions=[])).push(ci.version),ZO(Ng||Xs.GreenSockGlobals||!Xs.gsap&&Xs||{}),yN.forEach(_N)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&g.sleep(),h=p||function(S){return setTimeout(S,a-g.time*1e3+1|0)},Nd=1,T(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(c),Nd=0,h=Id},lagSmoothing:function(S,C){e=S||1/0,t=Math.min(C||33,e)},fps:function(S){s=1e3/(S||240),a=g.time*1e3+s},add:function(S,C,L){var z=C?function(q,B,P,N){S(q,B,P,N),g.remove(z)}:S;return g.remove(S),u[L?"unshift":"push"](z),ff(),z},remove:function(S,C){~(C=u.indexOf(S))&&u.splice(C,1)&&A>=C&&A--},_listeners:u},g}(),ff=function(){return!Nd&&Ci.wake()},vt={},I3=/^[\d.\-M][\d.\-,\s]/,O3=/["']/g,N3=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,a=r.length,u,c,h;s<a;s++)c=r[s],u=s!==a-1?c.lastIndexOf(","):c.length,h=c.substr(0,u),t[i]=isNaN(h)?h.replace(O3,"").trim():+h,i=c.substr(u+1).trim();return t},M3=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},D3=function(e){var t=(e+"").split("("),r=vt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[N3(t[1])]:M3(e).split(",").map(iN)):vt._CE&&I3.test(e)?vt._CE("",e):r},EN=function(e){return function(t){return 1-e(1-t)}},bN=function n(e,t){for(var r=e._first,i;r;)r instanceof jr?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Eu=function(e,t){return e&&(fn(e)?e:vt[e]||D3(e))||t},$u=function(e,t,r,i){r===void 0&&(r=function(c){return 1-t(1-c)}),i===void 0&&(i=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},a;return ii(e,function(u){vt[u]=Vi[u]=s,vt[a=u.toLowerCase()]=r;for(var c in s)vt[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=vt[u+"."+c]=s[c]}),s},SN=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Xv=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),a=s/iT*(Math.asin(1/i)||0),u=function(p){return p===1?1:i*Math.pow(2,-10*p)*l3((p-a)*s)+1},c=e==="out"?u:e==="in"?function(h){return 1-u(1-h)}:SN(u);return s=iT/s,c.config=function(h,p){return n(e,h,p)},c},Jv=function n(e,t){t===void 0&&(t=1.70158);var r=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:SN(r);return i.config=function(s){return n(e,s)},i};ii("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;$u(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});vt.Linear.easeNone=vt.none=vt.Linear.easeIn;$u("Elastic",Xv("in"),Xv("out"),Xv());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(u){return u<t?n*u*u:u<r?n*Math.pow(u-1.5/e,2)+.75:u<i?n*(u-=2.25/e)*u+.9375:n*Math.pow(u-2.625/e,2)+.984375};$u("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);$u("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});$u("Circ",function(n){return-(KO(1-n*n)-1)});$u("Sine",function(n){return n===1?1:-a3(n*s3)+1});$u("Back",Jv("in"),Jv("out"),Jv());vt.SteppedEase=vt.steps=Vi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,a=1-Rr;return function(u){return((i*sp(0,a,u)|0)+s)*r}}};af.ease=vt["quad.out"];ii("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return jE+=n+","+n+"Params,"});var wN=function(e,t){this.id=o3++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:nN,this.set=t?t.getSetter:GE},Md=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,cf(this,+t.duration,1,1),this.data=t.data,Yt&&(this._ctx=Yt,Yt.data.push(this)),Nd||Ci.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,cf(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(ff(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Jy(this,r),!s._dp||s.parent||aN(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Zs(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Rr||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),rN(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+xC(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+xC(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?uf(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?Pg(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-1e-8?0:this._rts,this.totalTime(sp(-Math.abs(this._delay),this._tDur,s),i!==!1),Xy(this),m3(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ff(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Rr&&(this._tTime-=Rr)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Zs(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(ri(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Pg(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=f3);var i=dr;return dr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),dr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,kC(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,kC(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(ts(this,r),ri(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,ri(i)),this._dur||(this._zTime=-1e-8),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Rr)},e.eventCallback=function(r,i,s){var a=this.vars;return arguments.length>1?(i?(a[r]=i,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete a[r],this):a[r]},e.then=function(r){var i=this;return new Promise(function(s){var a=fn(r)?r:sN,u=function(){var h=i.then;i.then=null,fn(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=h),s(a),i.then=h};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?u():i._prom=u})},e.kill=function(){Qh(this)},n}();Ui(Md.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var jr=function(n){GO(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=ri(r.sortChildren),nn&&Zs(r.parent||nn,Fo(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&lN(Fo(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return ud(0,arguments,this),this},t.from=function(i,s,a){return ud(1,arguments,this),this},t.fromTo=function(i,s,a,u){return ud(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,ld(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Cn(i,s,ts(this,a),1),this},t.call=function(i,s,a){return Zs(this,Cn.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,u,c,h,p){return a.duration=s,a.stagger=a.stagger||u,a.onComplete=h,a.onCompleteParams=p,a.parent=this,new Cn(i,a,ts(this,c)),this},t.staggerFrom=function(i,s,a,u,c,h,p){return a.runBackwards=1,ld(a).immediateRender=ri(a.immediateRender),this.staggerTo(i,s,a,u,c,h,p)},t.staggerFromTo=function(i,s,a,u,c,h,p,g){return u.startAt=a,ld(u).immediateRender=ri(u.immediateRender),this.staggerTo(i,s,u,c,h,p,g)},t.render=function(i,s,a){var u=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,p=i<=0?0:xn(i),g=this._zTime<0!=i<0&&(this._initted||!h),_,A,T,b,S,C,L,z,q,B,P,N;if(this!==nn&&p>c&&i>=0&&(p=c),p!==this._tTime||a||g){if(u!==this._time&&h&&(p+=this._time-u,i+=this._time-u),_=p,q=this._start,z=this._ts,C=!z,g&&(h||(u=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(P=this._yoyo,S=h+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(S*100+i,s,a);if(_=xn(p%S),p===c?(b=this._repeat,_=h):(B=xn(p/S),b=~~B,b&&b===B&&(_=h,b--),_>h&&(_=h)),B=uf(this._tTime,S),!u&&this._tTime&&B!==b&&this._tTime-B*S-this._dur<=0&&(B=b),P&&b&1&&(_=h-_,N=1),b!==B&&!this._lock){var k=P&&B&1,x=k===(P&&b&1);if(b<B&&(k=!k),u=k?0:p%h?h:p,this._lock=1,this.render(u||(N?0:xn(b*S)),s,!h)._lock=0,this._tTime=p,!s&&this.parent&&Ii(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),u&&u!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,x&&(this._lock=2,u=k?h:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;bN(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(L=v3(this,xn(u),xn(_)),L&&(p-=_-(_=L._start))),this._tTime=p,this._time=_,this._act=!z,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,u=0),!u&&_&&!s&&!b&&(Ii(this,"onStart"),this._tTime!==p))return this;if(_>=u&&i>=0)for(A=this._first;A;){if(T=A._next,(A._act||_>=A._start)&&A._ts&&L!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(_-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(_-A._start)*A._ts,s,a),_!==this._time||!this._ts&&!C){L=0,T&&(p+=this._zTime=-1e-8);break}}A=T}else{A=this._last;for(var U=i<0?i:_;A;){if(T=A._prev,(A._act||U<=A._end)&&A._ts&&L!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(U-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(U-A._start)*A._ts,s,a||dr&&(A._initted||A._startAt)),_!==this._time||!this._ts&&!C){L=0,T&&(p+=this._zTime=U?-1e-8:Rr);break}}A=T}}if(L&&!s&&(this.pause(),L.render(_>=u?0:-1e-8)._zTime=_>=u?1:-1,this._ts))return this._start=q,Xy(this),this.render(i,s,a);this._onUpdate&&!s&&Ii(this,"onUpdate",!0),(p===c&&this._tTime>=this.totalDuration()||!p&&u)&&(q===this._start||Math.abs(z)!==Math.abs(this._ts))&&(this._lock||((i||!h)&&(p===c&&this._ts>0||!p&&this._ts<0)&&ul(this,1),!s&&!(i<0&&!u)&&(p||u||!c)&&(Ii(this,p===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(Jo(s)||(s=ts(this,s,i)),!(i instanceof Md)){if(xr(i))return i.forEach(function(u){return a.add(u,s)}),this;if(Yn(i))return this.addLabel(i,s);if(fn(i))i=Cn.delayedCall(0,i);else return this}return this!==i?Zs(this,i,s):this},t.getChildren=function(i,s,a,u){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),u===void 0&&(u=-1e8);for(var c=[],h=this._first;h;)h._start>=u&&(h instanceof Cn?s&&c.push(h):(a&&c.push(h),i&&c.push.apply(c,h.getChildren(!0,s,a)))),h=h._next;return c},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return Yn(i)?this.removeLabel(i):fn(i)?this.killTweensOf(i):(i.parent===this&&Qy(this,i),i===this._recent&&(this._recent=this._last),Tu(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=xn(Ci.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ts(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var u=Cn.delayedCall(0,s||Id,a);return u.data="isPause",this._hasPause=1,Zs(this,u,ts(this,i))},t.removePause=function(i){var s=this._first;for(i=ts(this,i);s;)s._start===i&&s.data==="isPause"&&ul(s),s=s._next},t.killTweensOf=function(i,s,a){for(var u=this.getTweensOf(i,a),c=u.length;c--;)Fa!==u[c]&&u[c].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],u=as(i),c=this._first,h=Jo(s),p;c;)c instanceof Cn?h3(c._targets,u)&&(h?(!Fa||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(p=c.getTweensOf(u,s)).length&&a.push.apply(a,p),c=c._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,u=ts(a,i),c=s,h=c.startAt,p=c.onStart,g=c.onStartParams,_=c.immediateRender,A,T=Cn.to(a,Ui({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:s.duration||Math.abs((u-(h&&"time"in h?h.time:a._time))/a.timeScale())||Rr,onStart:function(){if(a.pause(),!A){var S=s.duration||Math.abs((u-(h&&"time"in h?h.time:a._time))/a.timeScale());T._dur!==S&&cf(T,S,0,1).render(T._time,!0,!0),A=1}p&&p.apply(T,g||[])}},s));return _?T.render(0):T},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,Ui({startAt:{time:ts(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),IC(this,ts(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),IC(this,ts(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Rr)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var u=this._first,c=this.labels,h;u;)u._start>=a&&(u._start+=i,u._end+=i),u=u._next;if(s)for(h in c)c[h]>=a&&(c[h]+=i);return Tu(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Tu(this)},t.totalDuration=function(i){var s=0,a=this,u=a._last,c=io,h,p,g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(g=a.parent;u;)h=u._prev,u._dirty&&u.totalDuration(),p=u._start,p>c&&a._sort&&u._ts&&!a._lock?(a._lock=1,Zs(a,u,p-u._delay,1)._lock=0):c=p,p<0&&u._ts&&(s-=p,(!g&&!a._dp||g&&g.smoothChildTiming)&&(a._start+=p/a._ts,a._time-=p,a._tTime-=p),a.shiftChildren(-p,!1,-1/0),c=0),u._end>s&&u._ts&&(s=u._end),u=h;cf(a,a===nn&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(nn._ts&&(rN(nn,Pg(i,nn)),tN=Ci.frame),Ci.frame>=RC){RC+=Di.autoSleep||120;var s=nn._first;if((!s||!s._ts)&&Di.autoSleep&&Ci._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ci.sleep()}}},e}(Md);Ui(jr.prototype,{_lock:0,_hasPause:0,_forcing:0});var P3=function(e,t,r,i,s,a,u){var c=new si(this._pt,e,t,0,1,ON,null,s),h=0,p=0,g,_,A,T,b,S,C,L;for(c.b=r,c.e=i,r+="",i+="",(C=~i.indexOf("random("))&&(i=Od(i)),a&&(L=[r,i],a(L,e,t),r=L[0],i=L[1]),_=r.match(Wv)||[];g=Wv.exec(i);)T=g[0],b=i.substring(h,g.index),A?A=(A+1)%5:b.substr(-5)==="rgba("&&(A=1),T!==_[p++]&&(S=parseFloat(_[p-1])||0,c._pt={_next:c._pt,p:b||p===1?b:",",s:S,c:T.charAt(1)==="="?Xc(S,T)-S:parseFloat(T)-S,m:A&&A<4?Math.round:0},h=Wv.lastIndex);return c.c=h<i.length?i.substring(h,i.length):"",c.fp=u,(QO.test(i)||C)&&(c.e=0),this._pt=c,c},HE=function(e,t,r,i,s,a,u,c,h,p){fn(i)&&(i=i(s||0,e,a));var g=e[t],_=r!=="get"?r:fn(g)?h?e[t.indexOf("set")||!fn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():g,A=fn(g)?h?B3:kN:$E,T;if(Yn(i)&&(~i.indexOf("random(")&&(i=Od(i)),i.charAt(1)==="="&&(T=Xc(_,i)+(wr(_)||0),(T||T===0)&&(i=T))),!p||_!==i||dT)return!isNaN(_*i)&&i!==""?(T=new si(this._pt,e,t,+_||0,i-(_||0),typeof g=="boolean"?F3:IN,0,A),h&&(T.fp=h),u&&T.modifier(u,this,e),this._pt=T):(!g&&!(t in e)&&zE(t,i),P3.call(this,e,t,_,i,A,c||Di.stringFilter,h))},L3=function(e,t,r,i,s){if(fn(e)&&(e=cd(e,s,t,r,i)),!co(e)||e.style&&e.nodeType||xr(e)||WO(e))return Yn(e)?cd(e,s,t,r,i):e;var a={},u;for(u in e)a[u]=cd(e[u],s,t,r,i);return a},RN=function(e,t,r,i,s,a){var u,c,h,p;if(Ri[e]&&(u=new Ri[e]).init(s,u.rawVars?t[e]:L3(t[e],i,s,a,r),r,i,a)!==!1&&(r._pt=c=new si(r._pt,s,e,0,1,u.render,u,0,u.priority),r!==Kc))for(h=r._ptLookup[r._targets.indexOf(s)],p=u._props.length;p--;)h[u._props[p]]=c;return u},Fa,dT,qE=function n(e,t,r){var i=e.vars,s=i.ease,a=i.startAt,u=i.immediateRender,c=i.lazy,h=i.onUpdate,p=i.runBackwards,g=i.yoyoEase,_=i.keyframes,A=i.autoRevert,T=e._dur,b=e._startAt,S=e._targets,C=e.parent,L=C&&C.data==="nested"?C.vars.targets:S,z=e._overwrite==="auto"&&!PE,q=e.timeline,B,P,N,k,x,U,V,j,D,Ce,Oe,Y,oe;if(q&&(!_||!s)&&(s="none"),e._ease=Eu(s,af.ease),e._yEase=g?EN(Eu(g===!0?s:g,af.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!q&&!!i.runBackwards,!q||_&&!i.stagger){if(j=S[0]?Au(S[0]).harness:0,Y=j&&i[j.prop],B=Dg(i,BE),b&&(b._zTime<0&&b.progress(1),t<0&&p&&u&&!A?b.render(-1,!0):b.revert(p&&T?og:c3),b._lazy=0),a){if(ul(e._startAt=Cn.set(S,Ui({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!b&&ri(c),startAt:null,delay:0,onUpdate:h&&function(){return Ii(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dr||!u&&!A)&&e._startAt.revert(og),u&&T&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(p&&T&&!b){if(t&&(u=!1),N=Ui({overwrite:!1,data:"isFromStart",lazy:u&&!b&&ri(c),immediateRender:u,stagger:0,parent:C},B),Y&&(N[j.prop]=Y),ul(e._startAt=Cn.set(S,N)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dr?e._startAt.revert(og):e._startAt.render(-1,!0)),e._zTime=t,!u)n(e._startAt,Rr,Rr);else if(!t)return}for(e._pt=e._ptCache=0,c=T&&ri(c)||c&&!T,P=0;P<S.length;P++){if(x=S[P],V=x._gsap||FE(S)[P]._gsap,e._ptLookup[P]=Ce={},aT[V.id]&&Ya.length&&Mg(),Oe=L===S?P:L.indexOf(x),j&&(D=new j).init(x,Y||B,e,Oe,L)!==!1&&(e._pt=k=new si(e._pt,x,D.name,0,1,D.render,D,0,D.priority),D._props.forEach(function(Ae){Ce[Ae]=k}),D.priority&&(U=1)),!j||Y)for(N in B)Ri[N]&&(D=RN(N,B,e,Oe,x,L))?D.priority&&(U=1):Ce[N]=k=HE.call(e,x,N,"get",B[N],Oe,L,0,i.stringFilter);e._op&&e._op[P]&&e.kill(x,e._op[P]),z&&e._pt&&(Fa=e,nn.killTweensOf(x,Ce,e.globalTime(t)),oe=!e.parent,Fa=0),e._pt&&c&&(aT[V.id]=1)}U&&NN(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!oe,_&&t<=0&&q.render(io,!0,!0)},V3=function(e,t,r,i,s,a,u,c){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],p,g,_,A;if(!h)for(h=e._ptCache[t]=[],_=e._ptLookup,A=e._targets.length;A--;){if(p=_[A][t],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==t&&p.fp!==t;)p=p._next;if(!p)return dT=1,e.vars[t]="+=0",qE(e,u),dT=0,c?kd(t+" not eligible for reset"):1;h.push(p)}for(A=h.length;A--;)g=h[A],p=g._pt||g,p.s=(i||i===0)&&!s?i:p.s+(i||0)+a*p.c,p.c=r-p.s,g.e&&(g.e=_n(r)+wr(g.e)),g.b&&(g.b=p.s+wr(g.b))},U3=function(e,t){var r=e[0]?Au(e[0]).harness:0,i=r&&r.aliases,s,a,u,c;if(!i)return t;s=lf({},t);for(a in i)if(a in s)for(c=i[a].split(","),u=c.length;u--;)s[c[u]]=s[a];return s},z3=function(e,t,r,i){var s=t.ease||i||"power1.inOut",a,u;if(xr(t))u=r[e]||(r[e]=[]),t.forEach(function(c,h){return u.push({t:h/(t.length-1)*100,v:c,e:s})});else for(a in t)u=r[a]||(r[a]=[]),a==="ease"||u.push({t:parseFloat(e),v:t[a],e:s})},cd=function(e,t,r,i,s){return fn(e)?e.call(t,r,i,s):Yn(e)&&~e.indexOf("random(")?Od(e):e},CN=jE+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",xN={};ii(CN+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return xN[n]=1});var Cn=function(n){GO(e,n);function e(r,i,s,a){var u;typeof i=="number"&&(s.duration=i,i=s,s=null),u=n.call(this,a?i:ld(i))||this;var c=u.vars,h=c.duration,p=c.delay,g=c.immediateRender,_=c.stagger,A=c.overwrite,T=c.keyframes,b=c.defaults,S=c.scrollTrigger,C=c.yoyoEase,L=i.parent||nn,z=(xr(r)||WO(r)?Jo(r[0]):"length"in i)?[r]:as(r),q,B,P,N,k,x,U,V;if(u._targets=z.length?FE(z):kd("GSAP target "+r+" not found. https://gsap.com",!Di.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=A,T||_||Lm(h)||Lm(p)){if(i=u.vars,q=u.timeline=new jr({data:"nested",defaults:b||{},targets:L&&L.data==="nested"?L.vars.targets:z}),q.kill(),q.parent=q._dp=Fo(u),q._start=0,_||Lm(h)||Lm(p)){if(N=z.length,U=_&&hN(_),co(_))for(k in _)~CN.indexOf(k)&&(V||(V={}),V[k]=_[k]);for(B=0;B<N;B++)P=Dg(i,xN),P.stagger=0,C&&(P.yoyoEase=C),V&&lf(P,V),x=z[B],P.duration=+cd(h,Fo(u),B,x,z),P.delay=(+cd(p,Fo(u),B,x,z)||0)-u._delay,!_&&N===1&&P.delay&&(u._delay=p=P.delay,u._start+=p,P.delay=0),q.to(x,P,U?U(B,x,z):0),q._ease=vt.none;q.duration()?h=p=0:u.timeline=0}else if(T){ld(Ui(q.vars.defaults,{ease:"none"})),q._ease=Eu(T.ease||i.ease||"none");var j=0,D,Ce,Oe;if(xr(T))T.forEach(function(Y){return q.to(z,Y,">")}),q.duration();else{P={};for(k in T)k==="ease"||k==="easeEach"||z3(k,T[k],P,T.easeEach);for(k in P)for(D=P[k].sort(function(Y,oe){return Y.t-oe.t}),j=0,B=0;B<D.length;B++)Ce=D[B],Oe={ease:Ce.e,duration:(Ce.t-(B?D[B-1].t:0))/100*h},Oe[k]=Ce.v,q.to(z,Oe,j),j+=Oe.duration;q.duration()<h&&q.to({},{duration:h-q.duration()})}}h||u.duration(h=q.duration())}else u.timeline=0;return A===!0&&!PE&&(Fa=Fo(u),nn.killTweensOf(z),Fa=0),Zs(L,Fo(u),s),i.reversed&&u.reverse(),i.paused&&u.paused(!0),(g||!h&&!T&&u._start===xn(L._time)&&ri(g)&&g3(Fo(u))&&L.data!=="nested")&&(u._tTime=-1e-8,u.render(Math.max(0,-p)||0)),S&&lN(Fo(u),S),u}var t=e.prototype;return t.render=function(i,s,a){var u=this._time,c=this._tDur,h=this._dur,p=i<0,g=i>c-Rr&&!p?c:i<Rr?0:i,_,A,T,b,S,C,L,z,q;if(!h)_3(this,i,s,a);else if(g!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(_=g,z=this.timeline,this._repeat){if(b=h+this._rDelay,this._repeat<-1&&p)return this.totalTime(b*100+i,s,a);if(_=xn(g%b),g===c?(T=this._repeat,_=h):(S=xn(g/b),T=~~S,T&&T===S?(_=h,T--):_>h&&(_=h)),C=this._yoyo&&T&1,C&&(q=this._yEase,_=h-_),S=uf(this._tTime,b),_===u&&!a&&this._initted&&T===S)return this._tTime=g,this;T!==S&&(z&&this._yEase&&bN(z,C),this.vars.repeatRefresh&&!C&&!this._lock&&_!==b&&this._initted&&(this._lock=a=1,this.render(xn(b*T),!0).invalidate()._lock=0))}if(!this._initted){if(uN(this,p?i:_,a,s,g))return this._tTime=0,this;if(u!==this._time&&!(a&&this.vars.repeatRefresh&&T!==S))return this;if(h!==this._dur)return this.render(i,s,a)}if(this._tTime=g,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=L=(q||this._ease)(_/h),this._from&&(this.ratio=L=1-L),_&&!u&&!s&&!T&&(Ii(this,"onStart"),this._tTime!==g))return this;for(A=this._pt;A;)A.r(L,A.d),A=A._next;z&&z.render(i<0?i:z._dur*z._ease(_/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(p&&lT(this,i,s,a),Ii(this,"onUpdate")),this._repeat&&T!==S&&this.vars.onRepeat&&!s&&this.parent&&Ii(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(p&&!this._onUpdate&&lT(this,i,!0,!0),(i||!h)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&ul(this,1),!s&&!(p&&!u)&&(g||u||C)&&(Ii(this,g===c?"onComplete":"onReverseComplete",!0),this._prom&&!(g<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,u,c){Nd||Ci.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||qE(this,h),p=this._ease(h/this._dur),V3(this,i,s,a,u,p,h,c)?this.resetTo(i,s,a,u,1):(Jy(this,0),this.parent||oN(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Qh(this):this.scrollTrigger&&this.scrollTrigger.kill(!!dr),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Fa&&Fa.vars.overwrite!==!0)._first||Qh(this),this.parent&&a!==this.timeline.totalDuration()&&cf(this,this._dur*this.timeline._tDur/a,0,1),this}var u=this._targets,c=i?as(i):u,h=this._ptLookup,p=this._pt,g,_,A,T,b,S,C;if((!s||s==="all")&&p3(u,c))return s==="all"&&(this._pt=0),Qh(this);for(g=this._op=this._op||[],s!=="all"&&(Yn(s)&&(b={},ii(s,function(L){return b[L]=1}),s=b),s=U3(u,s)),C=u.length;C--;)if(~c.indexOf(u[C])){_=h[C],s==="all"?(g[C]=s,T=_,A={}):(A=g[C]=g[C]||{},T=s);for(b in T)S=_&&_[b],S&&((!("kill"in S.d)||S.d.kill(b)===!0)&&Qy(this,S,"_pt"),delete _[b]),A!=="all"&&(A[b]=1)}return this._initted&&!this._pt&&p&&Qh(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return ud(1,arguments)},e.delayedCall=function(i,s,a,u){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:u})},e.fromTo=function(i,s,a){return ud(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return nn.killTweensOf(i,s,a)},e}(Md);Ui(Cn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ii("staggerTo,staggerFrom,staggerFromTo",function(n){Cn[n]=function(){var e=new jr,t=cT.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var $E=function(e,t,r){return e[t]=r},kN=function(e,t,r){return e[t](r)},B3=function(e,t,r,i){return e[t](i.fp,r)},j3=function(e,t,r){return e.setAttribute(t,r)},GE=function(e,t){return fn(e[t])?kN:LE(e[t])&&e.setAttribute?j3:$E},IN=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},F3=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ON=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},KE=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},H3=function(e,t,r,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,r),s=a},q3=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Qy(this,t,"_pt"):t.dep||(r=1),t=i;return!r},$3=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},NN=function(e){for(var t=e._pt,r,i,s,a;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=r}e._pt=s},si=function(){function n(t,r,i,s,a,u,c,h,p){this.t=r,this.s=s,this.c=a,this.p=i,this.r=u||IN,this.d=c||this,this.set=h||$E,this.pr=p||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=$3,this.m=r,this.mt=s,this.tween=i},n}();ii(jE+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return BE[n]=1});Vi.TweenMax=Vi.TweenLite=Cn;Vi.TimelineLite=Vi.TimelineMax=jr;nn=new jr({sortChildren:!1,defaults:af,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Di.stringFilter=TN;var bu=[],lg={},G3=[],NC=0,K3=0,Zv=function(e){return(lg[e]||G3).map(function(t){return t()})},pT=function(){var e=Date.now(),t=[];e-NC>2&&(Zv("matchMediaInit"),bu.forEach(function(r){var i=r.queries,s=r.conditions,a,u,c,h;for(u in i)a=Xs.matchMedia(i[u]).matches,a&&(c=1),a!==s[u]&&(s[u]=a,h=1);h&&(r.revert(),c&&t.push(r))}),Zv("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),NC=e,Zv("matchMedia"))},MN=function(){function n(t,r){this.selector=r&&fT(r),this.data=[],this._r=[],this.isReverted=!1,this.id=K3++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){fn(r)&&(s=i,i=r,r=fn);var a=this,u=function(){var h=Yt,p=a.selector,g;return h&&h!==a&&h.data.push(a),s&&(a.selector=fT(s)),Yt=a,g=i.apply(a,arguments),fn(g)&&a._r.push(g),Yt=h,a.selector=p,a.isReverted=!1,g};return a.last=u,r===fn?u(a,function(c){return a.add(null,c)}):r?a[r]=u:u},e.ignore=function(r){var i=Yt;Yt=null,r(this),Yt=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Cn&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var u=s.getTweens(),c=s.data.length,h;c--;)h=s.data[c],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(p){return u.splice(u.indexOf(p),1)}));for(u.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,g){return g.g-p.g||-1/0}).forEach(function(p){return p.t.revert(r)}),c=s.data.length;c--;)h=s.data[c],h instanceof jr?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Cn)&&h.revert&&h.revert(r);s._r.forEach(function(p){return p(r,s)}),s.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),i)for(var a=bu.length;a--;)bu[a].id===this.id&&bu.splice(a,1)},e.revert=function(r){this.kill(r||{})},n}(),W3=function(){function n(t){this.contexts=[],this.scope=t,Yt&&Yt.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){co(r)||(r={matches:r});var a=new MN(0,s||this.scope),u=a.conditions={},c,h,p;Yt&&!a.selector&&(a.selector=Yt.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=r;for(h in r)h==="all"?p=1:(c=Xs.matchMedia(r[h]),c&&(bu.indexOf(a)<0&&bu.push(a),(u[h]=c.matches)&&(p=1),c.addListener?c.addListener(pT):c.addEventListener("change",pT)));return p&&i(a,function(g){return a.add(null,g)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Lg={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return _N(i)})},timeline:function(e){return new jr(e)},getTweensOf:function(e,t){return nn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Yn(e)&&(e=as(e)[0]);var s=Au(e||{}).get,a=r?sN:iN;return r==="native"&&(r=""),e&&(t?a((Ri[t]&&Ri[t].get||s)(e,t,r,i)):function(u,c,h){return a((Ri[u]&&Ri[u].get||s)(e,u,c,h))})},quickSetter:function(e,t,r){if(e=as(e),e.length>1){var i=e.map(function(p){return ci.quickSetter(p,t,r)}),s=i.length;return function(p){for(var g=s;g--;)i[g](p)}}e=e[0]||{};var a=Ri[t],u=Au(e),c=u.harness&&(u.harness.aliases||{})[t]||t,h=a?function(p){var g=new a;Kc._pt=0,g.init(e,r?p+r:p,Kc,0,[e]),g.render(1,g),Kc._pt&&KE(1,Kc)}:u.set(e,c);return a?h:function(p){return h(e,c,r?p+r:p,u,1)}},quickTo:function(e,t,r){var i,s=ci.to(e,Ui((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),a=function(c,h,p){return s.resetTo(t,c,h,p)};return a.tween=s,a},isTweening:function(e){return nn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Eu(e.ease,af.ease)),CC(af,e||{})},config:function(e){return CC(Di,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(u){return u&&!Ri[u]&&!Vi[u]&&kd(t+" effect requires "+u+" plugin.")}),Yv[t]=function(u,c,h){return r(as(u),Ui(c||{},s),h)},a&&(jr.prototype[t]=function(u,c,h){return this.add(Yv[t](u,co(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,t){vt[e]=Eu(t)},parseEase:function(e,t){return arguments.length?Eu(e,t):vt},getById:function(e){return nn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new jr(e),i,s;for(r.smoothChildTiming=ri(e.smoothChildTiming),nn.remove(r),r._dp=0,r._time=r._tTime=nn._time,i=nn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Cn&&i.vars.onComplete===i._targets[0]))&&Zs(r,i,i._start-i._delay),i=s;return Zs(nn,r,0),r},context:function(e,t){return e?new MN(e,t):Yt},matchMedia:function(e){return new W3(e)},matchMediaRefresh:function(){return bu.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||pT()},addEventListener:function(e,t){var r=lg[e]||(lg[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=lg[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:R3,wrapYoyo:C3,distribute:hN,random:pN,snap:dN,normalize:w3,getUnit:wr,clamp:T3,splitColor:vN,toArray:as,selector:fT,mapRange:gN,pipe:b3,unitize:S3,interpolate:x3,shuffle:fN},install:ZO,effects:Yv,ticker:Ci,updateRoot:jr.updateRoot,plugins:Ri,globalTimeline:nn,core:{PropTween:si,globals:eN,Tween:Cn,Timeline:jr,Animation:Md,getCache:Au,_removeLinkedListItem:Qy,reverting:function(){return dr},context:function(e){return e&&Yt&&(Yt.data.push(e),e._ctx=Yt),Yt},suppressOverwrites:function(e){return PE=e}}};ii("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Lg[n]=Cn[n]});Ci.add(jr.updateRoot);Kc=Lg.to({},{duration:0});var Y3=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Q3=function(e,t){var r=e._targets,i,s,a;for(i in t)for(s=r.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=Y3(a,i)),a&&a.modifier&&a.modifier(t[i],e,r[s],i))},eA=function(e,t){return{name:e,rawVars:1,init:function(i,s,a){a._onInit=function(u){var c,h;if(Yn(s)&&(c={},ii(s,function(p){return c[p]=1}),s=c),t){c={};for(h in s)c[h]=t(s[h]);s=c}Q3(u,s)}}}},ci=Lg.registerPlugin({name:"attr",init:function(e,t,r,i,s){var a,u,c;this.tween=r;for(a in t)c=e.getAttribute(a)||"",u=this.add(e,"setAttribute",(c||0)+"",t[a],i,s,0,0,a),u.op=a,u.b=c,this._props.push(a)},render:function(e,t){for(var r=t._pt;r;)dr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},eA("roundProps",hT),eA("modifiers"),eA("snap",dN))||Lg;Cn.version=jr.version=ci.version="3.12.7";JO=1;VE()&&ff();vt.Power0;vt.Power1;vt.Power2;vt.Power3;vt.Power4;vt.Linear;vt.Quad;vt.Cubic;vt.Quart;vt.Quint;vt.Strong;vt.Elastic;vt.Back;vt.SteppedEase;vt.Bounce;vt.Sine;vt.Expo;vt.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var MC,Ha,Jc,WE,hu,DC,YE,X3=function(){return typeof window<"u"},Zo={},iu=180/Math.PI,Zc=Math.PI/180,Pc=Math.atan2,PC=1e8,QE=/([A-Z])/g,J3=/(left|right|width|margin|padding|x)/i,Z3=/[\s,\(]\S/,eo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},mT=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},eB=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},tB=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},nB=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},DN=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},PN=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},rB=function(e,t,r){return e.style[t]=r},iB=function(e,t,r){return e.style.setProperty(t,r)},sB=function(e,t,r){return e._gsap[t]=r},oB=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},aB=function(e,t,r,i,s){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},lB=function(e,t,r,i,s){var a=e._gsap;a[t]=r,a.renderTransform(s,a)},rn="transform",oi=rn+"Origin",uB=function n(e,t){var r=this,i=this.target,s=i.style,a=i._gsap;if(e in Zo&&s){if(this.tfm=this.tfm||{},e!=="transform")e=eo[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return r.tfm[u]=qo(i,u)}):this.tfm[e]=a.x?a[e]:qo(i,e),e===oi&&(this.tfm.zOrigin=a.zOrigin);else return eo.transform.split(",").forEach(function(u){return n.call(r,u,t)});if(this.props.indexOf(rn)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(oi,t,"")),e=rn}(s||t)&&this.props.push(e,t,s[e])},LN=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},cB=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(QE,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=YE(),(!s||!s.isStart)&&!r[rn]&&(LN(r),i.zOrigin&&r[oi]&&(r[oi]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},VN=function(e,t){var r={target:e,props:[],revert:cB,save:uB};return e._gsap||ci.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},UN,gT=function(e,t){var r=Ha.createElementNS?Ha.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ha.createElement(e);return r&&r.style?r:Ha.createElement(e)},so=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(QE,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,hf(t)||t,1)||""},LC="O,Moz,ms,Ms,Webkit".split(","),hf=function(e,t,r){var i=t||hu,s=i.style,a=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(LC[a]+e in s););return a<0?null:(a===3?"ms":a>=0?LC[a]:"")+e},yT=function(){X3()&&window.document&&(MC=window,Ha=MC.document,Jc=Ha.documentElement,hu=gT("div")||{style:{}},gT("div"),rn=hf(rn),oi=rn+"Origin",hu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",UN=!!hf("perspective"),YE=ci.core.reverting,WE=1)},VC=function(e){var t=e.ownerSVGElement,r=gT("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),Jc.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),Jc.removeChild(r),s},UC=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},zN=function(e){var t,r;try{t=e.getBBox()}catch{t=VC(e),r=1}return t&&(t.width||t.height)||r||(t=VC(e)),t&&!t.width&&!t.x&&!t.y?{x:+UC(e,["x","cx","x1"])||0,y:+UC(e,["y","cy","y1"])||0,width:0,height:0}:t},BN=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&zN(e))},Iu=function(e,t){if(t){var r=e.style,i;t in Zo&&t!==oi&&(t=rn),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(QE,"-$1").toLowerCase())):r.removeAttribute(t)}},qa=function(e,t,r,i,s,a){var u=new si(e._pt,t,r,0,1,a?PN:DN);return e._pt=u,u.b=i,u.e=s,e._props.push(r),u},zC={deg:1,rad:1,turn:1},fB={grid:1,flex:1},cl=function n(e,t,r,i){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",u=hu.style,c=J3.test(t),h=e.tagName.toLowerCase()==="svg",p=(h?"client":"offset")+(c?"Width":"Height"),g=100,_=i==="px",A=i==="%",T,b,S,C;if(i===a||!s||zC[i]||zC[a])return s;if(a!=="px"&&!_&&(s=n(e,t,r,"px")),C=e.getCTM&&BN(e),(A||a==="%")&&(Zo[t]||~t.indexOf("adius")))return T=C?e.getBBox()[c?"width":"height"]:e[p],_n(A?s/T*g:s/100*T);if(u[c?"width":"height"]=g+(_?a:i),b=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!h?e:e.parentNode,C&&(b=(e.ownerSVGElement||{}).parentNode),(!b||b===Ha||!b.appendChild)&&(b=Ha.body),S=b._gsap,S&&A&&S.width&&c&&S.time===Ci.time&&!S.uncache)return _n(s/S.width*g);if(A&&(t==="height"||t==="width")){var L=e.style[t];e.style[t]=g+i,T=e[p],L?e.style[t]=L:Iu(e,t)}else(A||a==="%")&&!fB[so(b,"display")]&&(u.position=so(e,"position")),b===e&&(u.position="static"),b.appendChild(hu),T=hu[p],b.removeChild(hu),u.position="absolute";return c&&A&&(S=Au(b),S.time=Ci.time,S.width=b[p]),_n(_?T*s/g:T&&s?g/T*s:0)},qo=function(e,t,r,i){var s;return WE||yT(),t in eo&&t!=="transform"&&(t=eo[t],~t.indexOf(",")&&(t=t.split(",")[0])),Zo[t]&&t!=="transform"?(s=Pd(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Ug(so(e,oi))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Vg[t]&&Vg[t](e,t,r)||so(e,t)||nN(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?cl(e,t,s,r)+r:s},hB=function(e,t,r,i){if(!r||r==="none"){var s=hf(t,e,1),a=s&&so(e,s,1);a&&a!==r?(t=s,r=a):t==="borderColor"&&(r=so(e,"borderTopColor"))}var u=new si(this._pt,e.style,t,0,1,ON),c=0,h=0,p,g,_,A,T,b,S,C,L,z,q,B;if(u.b=r,u.e=i,r+="",i+="",i==="auto"&&(b=e.style[t],e.style[t]=i,i=so(e,t)||i,b?e.style[t]=b:Iu(e,t)),p=[r,i],TN(p),r=p[0],i=p[1],_=r.match(Gc)||[],B=i.match(Gc)||[],B.length){for(;g=Gc.exec(i);)S=g[0],L=i.substring(c,g.index),T?T=(T+1)%5:(L.substr(-5)==="rgba("||L.substr(-5)==="hsla(")&&(T=1),S!==(b=_[h++]||"")&&(A=parseFloat(b)||0,q=b.substr((A+"").length),S.charAt(1)==="="&&(S=Xc(A,S)+q),C=parseFloat(S),z=S.substr((C+"").length),c=Gc.lastIndex-z.length,z||(z=z||Di.units[t]||q,c===i.length&&(i+=z,u.e+=z)),q!==z&&(A=cl(e,t,b,z)||0),u._pt={_next:u._pt,p:L||h===1?L:",",s:A,c:C-A,m:T&&T<4||t==="zIndex"?Math.round:0});u.c=c<i.length?i.substring(c,i.length):""}else u.r=t==="display"&&i==="none"?PN:DN;return QO.test(i)&&(u.e=0),this._pt=u,u},BC={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},dB=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=BC[r]||r,t[1]=BC[i]||i,t.join(" ")},pB=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,a=r._gsap,u,c,h;if(s==="all"||s===!0)i.cssText="",c=1;else for(s=s.split(","),h=s.length;--h>-1;)u=s[h],Zo[u]&&(c=1,u=u==="transformOrigin"?oi:rn),Iu(r,u);c&&(Iu(r,rn),a&&(a.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Pd(r,1),a.uncache=1,LN(i)))}},Vg={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var a=e._pt=new si(e._pt,t,r,0,0,pB);return a.u=i,a.pr=-10,a.tween=s,e._props.push(r),1}}},Dd=[1,0,0,1,0,0],jN={},FN=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},jC=function(e){var t=so(e,rn);return FN(t)?Dd:t.substr(7).match(YO).map(_n)},XE=function(e,t){var r=e._gsap||Au(e),i=e.style,s=jC(e),a,u,c,h;return r.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?Dd:s):(s===Dd&&!e.offsetParent&&e!==Jc&&!r.svg&&(c=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,u=e.nextElementSibling,Jc.appendChild(e)),s=jC(e),c?i.display=c:Iu(e,"display"),h&&(u?a.insertBefore(e,u):a?a.appendChild(e):Jc.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},_T=function(e,t,r,i,s,a){var u=e._gsap,c=s||XE(e,!0),h=u.xOrigin||0,p=u.yOrigin||0,g=u.xOffset||0,_=u.yOffset||0,A=c[0],T=c[1],b=c[2],S=c[3],C=c[4],L=c[5],z=t.split(" "),q=parseFloat(z[0])||0,B=parseFloat(z[1])||0,P,N,k,x;r?c!==Dd&&(N=A*S-T*b)&&(k=q*(S/N)+B*(-b/N)+(b*L-S*C)/N,x=q*(-T/N)+B*(A/N)-(A*L-T*C)/N,q=k,B=x):(P=zN(e),q=P.x+(~z[0].indexOf("%")?q/100*P.width:q),B=P.y+(~(z[1]||z[0]).indexOf("%")?B/100*P.height:B)),i||i!==!1&&u.smooth?(C=q-h,L=B-p,u.xOffset=g+(C*A+L*b)-C,u.yOffset=_+(C*T+L*S)-L):u.xOffset=u.yOffset=0,u.xOrigin=q,u.yOrigin=B,u.smooth=!!i,u.origin=t,u.originIsAbsolute=!!r,e.style[oi]="0px 0px",a&&(qa(a,u,"xOrigin",h,q),qa(a,u,"yOrigin",p,B),qa(a,u,"xOffset",g,u.xOffset),qa(a,u,"yOffset",_,u.yOffset)),e.setAttribute("data-svg-origin",q+" "+B)},Pd=function(e,t){var r=e._gsap||new wN(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,a="px",u="deg",c=getComputedStyle(e),h=so(e,oi)||"0",p,g,_,A,T,b,S,C,L,z,q,B,P,N,k,x,U,V,j,D,Ce,Oe,Y,oe,Ae,qe,H,ie,_e,le,Se,we;return p=g=_=b=S=C=L=z=q=0,A=T=1,r.svg=!!(e.getCTM&&BN(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[rn]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[rn]!=="none"?c[rn]:"")),i.scale=i.rotate=i.translate="none"),N=XE(e,r.svg),r.svg&&(r.uncache?(Ae=e.getBBox(),h=r.xOrigin-Ae.x+"px "+(r.yOrigin-Ae.y)+"px",oe=""):oe=!t&&e.getAttribute("data-svg-origin"),_T(e,oe||h,!!oe||r.originIsAbsolute,r.smooth!==!1,N)),B=r.xOrigin||0,P=r.yOrigin||0,N!==Dd&&(V=N[0],j=N[1],D=N[2],Ce=N[3],p=Oe=N[4],g=Y=N[5],N.length===6?(A=Math.sqrt(V*V+j*j),T=Math.sqrt(Ce*Ce+D*D),b=V||j?Pc(j,V)*iu:0,L=D||Ce?Pc(D,Ce)*iu+b:0,L&&(T*=Math.abs(Math.cos(L*Zc))),r.svg&&(p-=B-(B*V+P*D),g-=P-(B*j+P*Ce))):(we=N[6],le=N[7],H=N[8],ie=N[9],_e=N[10],Se=N[11],p=N[12],g=N[13],_=N[14],k=Pc(we,_e),S=k*iu,k&&(x=Math.cos(-k),U=Math.sin(-k),oe=Oe*x+H*U,Ae=Y*x+ie*U,qe=we*x+_e*U,H=Oe*-U+H*x,ie=Y*-U+ie*x,_e=we*-U+_e*x,Se=le*-U+Se*x,Oe=oe,Y=Ae,we=qe),k=Pc(-D,_e),C=k*iu,k&&(x=Math.cos(-k),U=Math.sin(-k),oe=V*x-H*U,Ae=j*x-ie*U,qe=D*x-_e*U,Se=Ce*U+Se*x,V=oe,j=Ae,D=qe),k=Pc(j,V),b=k*iu,k&&(x=Math.cos(k),U=Math.sin(k),oe=V*x+j*U,Ae=Oe*x+Y*U,j=j*x-V*U,Y=Y*x-Oe*U,V=oe,Oe=Ae),S&&Math.abs(S)+Math.abs(b)>359.9&&(S=b=0,C=180-C),A=_n(Math.sqrt(V*V+j*j+D*D)),T=_n(Math.sqrt(Y*Y+we*we)),k=Pc(Oe,Y),L=Math.abs(k)>2e-4?k*iu:0,q=Se?1/(Se<0?-Se:Se):0),r.svg&&(oe=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!FN(so(e,rn)),oe&&e.setAttribute("transform",oe))),Math.abs(L)>90&&Math.abs(L)<270&&(s?(A*=-1,L+=b<=0?180:-180,b+=b<=0?180:-180):(T*=-1,L+=L<=0?180:-180)),t=t||r.uncache,r.x=p-((r.xPercent=p&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-p)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=g-((r.yPercent=g&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=_+a,r.scaleX=_n(A),r.scaleY=_n(T),r.rotation=_n(b)+u,r.rotationX=_n(S)+u,r.rotationY=_n(C)+u,r.skewX=L+u,r.skewY=z+u,r.transformPerspective=q+a,(r.zOrigin=parseFloat(h.split(" ")[2])||!t&&r.zOrigin||0)&&(i[oi]=Ug(h)),r.xOffset=r.yOffset=0,r.force3D=Di.force3D,r.renderTransform=r.svg?gB:UN?HN:mB,r.uncache=0,r},Ug=function(e){return(e=e.split(" "))[0]+" "+e[1]},tA=function(e,t,r){var i=wr(t);return _n(parseFloat(t)+parseFloat(cl(e,"x",r+"px",i)))+i},mB=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,HN(e,t)},tu="0deg",zh="0px",nu=") ",HN=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.z,h=r.rotation,p=r.rotationY,g=r.rotationX,_=r.skewX,A=r.skewY,T=r.scaleX,b=r.scaleY,S=r.transformPerspective,C=r.force3D,L=r.target,z=r.zOrigin,q="",B=C==="auto"&&e&&e!==1||C===!0;if(z&&(g!==tu||p!==tu)){var P=parseFloat(p)*Zc,N=Math.sin(P),k=Math.cos(P),x;P=parseFloat(g)*Zc,x=Math.cos(P),a=tA(L,a,N*x*-z),u=tA(L,u,-Math.sin(P)*-z),c=tA(L,c,k*x*-z+z)}S!==zh&&(q+="perspective("+S+nu),(i||s)&&(q+="translate("+i+"%, "+s+"%) "),(B||a!==zh||u!==zh||c!==zh)&&(q+=c!==zh||B?"translate3d("+a+", "+u+", "+c+") ":"translate("+a+", "+u+nu),h!==tu&&(q+="rotate("+h+nu),p!==tu&&(q+="rotateY("+p+nu),g!==tu&&(q+="rotateX("+g+nu),(_!==tu||A!==tu)&&(q+="skew("+_+", "+A+nu),(T!==1||b!==1)&&(q+="scale("+T+", "+b+nu),L.style[rn]=q||"translate(0, 0)"},gB=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.rotation,h=r.skewX,p=r.skewY,g=r.scaleX,_=r.scaleY,A=r.target,T=r.xOrigin,b=r.yOrigin,S=r.xOffset,C=r.yOffset,L=r.forceCSS,z=parseFloat(a),q=parseFloat(u),B,P,N,k,x;c=parseFloat(c),h=parseFloat(h),p=parseFloat(p),p&&(p=parseFloat(p),h+=p,c+=p),c||h?(c*=Zc,h*=Zc,B=Math.cos(c)*g,P=Math.sin(c)*g,N=Math.sin(c-h)*-_,k=Math.cos(c-h)*_,h&&(p*=Zc,x=Math.tan(h-p),x=Math.sqrt(1+x*x),N*=x,k*=x,p&&(x=Math.tan(p),x=Math.sqrt(1+x*x),B*=x,P*=x)),B=_n(B),P=_n(P),N=_n(N),k=_n(k)):(B=g,k=_,P=N=0),(z&&!~(a+"").indexOf("px")||q&&!~(u+"").indexOf("px"))&&(z=cl(A,"x",a,"px"),q=cl(A,"y",u,"px")),(T||b||S||C)&&(z=_n(z+T-(T*B+b*N)+S),q=_n(q+b-(T*P+b*k)+C)),(i||s)&&(x=A.getBBox(),z=_n(z+i/100*x.width),q=_n(q+s/100*x.height)),x="matrix("+B+","+P+","+N+","+k+","+z+","+q+")",A.setAttribute("transform",x),L&&(A.style[rn]=x)},yB=function(e,t,r,i,s){var a=360,u=Yn(s),c=parseFloat(s)*(u&&~s.indexOf("rad")?iu:1),h=c-i,p=i+h+"deg",g,_;return u&&(g=s.split("_")[1],g==="short"&&(h%=a,h!==h%(a/2)&&(h+=h<0?a:-360)),g==="cw"&&h<0?h=(h+a*PC)%a-~~(h/a)*a:g==="ccw"&&h>0&&(h=(h-a*PC)%a-~~(h/a)*a)),e._pt=_=new si(e._pt,t,r,i,h,eB),_.e=p,_.u="deg",e._props.push(r),_},FC=function(e,t){for(var r in t)e[r]=t[r];return e},_B=function(e,t,r){var i=FC({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,u,c,h,p,g,_,A,T;i.svg?(h=r.getAttribute("transform"),r.setAttribute("transform",""),a[rn]=t,u=Pd(r,1),Iu(r,rn),r.setAttribute("transform",h)):(h=getComputedStyle(r)[rn],a[rn]=t,u=Pd(r,1),a[rn]=h);for(c in Zo)h=i[c],p=u[c],h!==p&&s.indexOf(c)<0&&(A=wr(h),T=wr(p),g=A!==T?cl(r,c,h,T):parseFloat(h),_=parseFloat(p),e._pt=new si(e._pt,u,c,g,_-g,mT),e._pt.u=T||0,e._props.push(c));FC(u,i)};ii("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",a=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(u){return e<2?n+u:"border"+u+n});Vg[e>1?"border"+n:n]=function(u,c,h,p,g){var _,A;if(arguments.length<4)return _=a.map(function(T){return qo(u,T,h)}),A=_.join(" "),A.split(_[0]).length===5?_[0]:A;_=(p+"").split(" "),A={},a.forEach(function(T,b){return A[T]=_[b]=_[b]||_[(b-1)/2|0]}),u.init(c,A,g)}});var qN={name:"css",register:yT,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var a=this._props,u=e.style,c=r.vars.startAt,h,p,g,_,A,T,b,S,C,L,z,q,B,P,N,k;WE||yT(),this.styles=this.styles||VN(e),k=this.styles.props,this.tween=r;for(b in t)if(b!=="autoRound"&&(p=t[b],!(Ri[b]&&RN(b,t,r,i,e,s)))){if(A=typeof p,T=Vg[b],A==="function"&&(p=p.call(r,i,e,s),A=typeof p),A==="string"&&~p.indexOf("random(")&&(p=Od(p)),T)T(this,e,b,p,r)&&(N=1);else if(b.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(b)+"").trim(),p+="",Qa.lastIndex=0,Qa.test(h)||(S=wr(h),C=wr(p)),C?S!==C&&(h=cl(e,b,h,C)+C):S&&(p+=S),this.add(u,"setProperty",h,p,i,s,0,0,b),a.push(b),k.push(b,0,u[b]);else if(A!=="undefined"){if(c&&b in c?(h=typeof c[b]=="function"?c[b].call(r,i,e,s):c[b],Yn(h)&&~h.indexOf("random(")&&(h=Od(h)),wr(h+"")||h==="auto"||(h+=Di.units[b]||wr(qo(e,b))||""),(h+"").charAt(1)==="="&&(h=qo(e,b))):h=qo(e,b),_=parseFloat(h),L=A==="string"&&p.charAt(1)==="="&&p.substr(0,2),L&&(p=p.substr(2)),g=parseFloat(p),b in eo&&(b==="autoAlpha"&&(_===1&&qo(e,"visibility")==="hidden"&&g&&(_=0),k.push("visibility",0,u.visibility),qa(this,u,"visibility",_?"inherit":"hidden",g?"inherit":"hidden",!g)),b!=="scale"&&b!=="transform"&&(b=eo[b],~b.indexOf(",")&&(b=b.split(",")[0]))),z=b in Zo,z){if(this.styles.save(b),q||(B=e._gsap,B.renderTransform&&!t.parseTransform||Pd(e,t.parseTransform),P=t.smoothOrigin!==!1&&B.smooth,q=this._pt=new si(this._pt,u,rn,0,1,B.renderTransform,B,0,-1),q.dep=1),b==="scale")this._pt=new si(this._pt,B,"scaleY",B.scaleY,(L?Xc(B.scaleY,L+g):g)-B.scaleY||0,mT),this._pt.u=0,a.push("scaleY",b),b+="X";else if(b==="transformOrigin"){k.push(oi,0,u[oi]),p=dB(p),B.svg?_T(e,p,0,P,0,this):(C=parseFloat(p.split(" ")[2])||0,C!==B.zOrigin&&qa(this,B,"zOrigin",B.zOrigin,C),qa(this,u,b,Ug(h),Ug(p)));continue}else if(b==="svgOrigin"){_T(e,p,1,P,0,this);continue}else if(b in jN){yB(this,B,b,_,L?Xc(_,L+p):p);continue}else if(b==="smoothOrigin"){qa(this,B,"smooth",B.smooth,p);continue}else if(b==="force3D"){B[b]=p;continue}else if(b==="transform"){_B(this,p,e);continue}}else b in u||(b=hf(b)||b);if(z||(g||g===0)&&(_||_===0)&&!Z3.test(p)&&b in u)S=(h+"").substr((_+"").length),g||(g=0),C=wr(p)||(b in Di.units?Di.units[b]:S),S!==C&&(_=cl(e,b,h,C)),this._pt=new si(this._pt,z?B:u,b,_,(L?Xc(_,L+g):g)-_,!z&&(C==="px"||b==="zIndex")&&t.autoRound!==!1?nB:mT),this._pt.u=C||0,S!==C&&C!=="%"&&(this._pt.b=h,this._pt.r=tB);else if(b in u)hB.call(this,e,b,h,L?L+p:p);else if(b in e)this.add(e,b,h||e[b],L?L+p:p,i,s);else if(b!=="parseTransform"){zE(b,p);continue}z||(b in u?k.push(b,0,u[b]):typeof e[b]=="function"?k.push(b,2,e[b]()):k.push(b,1,h||e[b])),a.push(b)}}N&&NN(this)},render:function(e,t){if(t.tween._time||!YE())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:qo,aliases:eo,getSetter:function(e,t,r){var i=eo[t];return i&&i.indexOf(",")<0&&(t=i),t in Zo&&t!==oi&&(e._gsap.x||qo(e,"x"))?r&&DC===r?t==="scale"?oB:sB:(DC=r||{})&&(t==="scale"?aB:lB):e.style&&!LE(e.style[t])?rB:~t.indexOf("-")?iB:GE(e,t)},core:{_removeProperty:Iu,_getMatrix:XE}};ci.utils.checkPrefix=hf;ci.core.getStyleSaver=VN;(function(n,e,t,r){var i=ii(n+","+e+","+t,function(s){Zo[s]=1});ii(e,function(s){Di.units[s]="deg",jN[s]=1}),eo[i[13]]=n+","+e,ii(r,function(s){var a=s.split(":");eo[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ii("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Di.units[n]="px"});ci.registerPlugin(qN);var ug=ci.registerPlugin(qN)||ci;ug.core.Tween;function vB(n){let t=window.scrollY||window.pageYOffset,r=n.getBoundingClientRect().top+t,i=performance.now();function s(u){const c=(u-i)/800;c<1?(window.scrollTo(0,t+(r-t)*a(c)),requestAnimationFrame(s)):window.scrollTo(0,r)}function a(u){return u<.5?4*u*u*u:(u-1)*(2*u-2)*(2*u-2)+1}requestAnimationFrame(s)}function df(n){const e=document.querySelector(n);e&&vB(e)}const AB="/assets/arrow-b9VpQuFC.png";function HC(){return I.jsx("button",{className:"arrow-button green-bg",children:I.jsx("img",{src:AB})})}function TB(){const[n,e]=W.useState(null),[t,r]=W.useState(window.innerWidth),[i,s]=W.useState(null),[a,u]=W.useState(null),c=qu(),h=[{linkName:"Home",link:"/"},{linkName:"About",link:"/about"},{linkName:"Blogs",link:"/blogs"},{linkName:"Contact",link:"#footer"}],p=W.useCallback(T=>{e(T)},[]),g=W.useCallback(()=>{e(null)},[]);W.useEffect(()=>{const T=()=>r(window.innerWidth);return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),W.useEffect(()=>{n!==null&&ug.from(".active",{scaleX:0,transformOrigin:"50% 50%",ease:"power4.out",duration:.8})},[n]);function _(){i?i&&(u(!1),ug.to(".navbar-phone-dropdown-container",{x:"-100%",duration:1.2,ease:"power4.in",onComplete:()=>{s(!1)}})):(s(!0),u(!0))}function A(T){i?T==="#footer"?(_(),setTimeout(()=>{df(T)},1300)):(c(T),_()):T==="#footer"?df(T):c(T)}return W.useEffect(()=>{i?(ug.from(".navbar-phone-dropdown-container",{transform:"translateX(-100%)",duration:1.2,ease:"power3.inOut"}),document.body.classList.add("no-scroll")):document.body.classList.remove("no-scroll")},[i]),I.jsx("nav",{id:"nav",className:"nav-main-container charcoal-bg",children:t<=700?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"logo-ham-container",children:[I.jsx("div",{className:"logo",children:I.jsx("img",{src:Og,onClick:()=>{c("/"),e(0)}})}),I.jsx("div",{className:"nav-hamburger-container ",onClick:()=>_(),children:I.jsx(i3,{isOpened:a})})]}),I.jsxs("div",{className:"quick-search-container",children:[I.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search..."}),I.jsx(HC,{})]}),i&&I.jsx("div",{className:"navbar-phone-dropdown-container dark-silver-bg",children:I.jsx("div",{className:"dropdown-links-container",children:h.map((T,b)=>I.jsx("div",{children:I.jsxs("h3",{className:"outfit-font dropdown-link-name ",onClick:()=>{p(b),A(T.link)},children:[T.linkName,n===b&&I.jsx("div",{className:"active"})]})},T.linkName))})})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"quick-search-container",children:[I.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search..."}),I.jsx(HC,{})]}),I.jsxs("div",{className:"logo-links",children:[I.jsx("img",{src:Og,onClick:()=>{c("/"),e(0)}}),I.jsx("div",{className:"links",children:h.map((T,b)=>I.jsxs("div",{onMouseEnter:()=>p(b),onMouseLeave:g,onClick:()=>A(T.link),className:"link-container",children:[I.jsx("h1",{className:"outfit-font",children:T.linkName}),n===b&&I.jsx("div",{className:"active"})]},T.linkName))})]}),I.jsxs("div",{className:"socials ",children:[I.jsx("img",{src:tT}),I.jsx("img",{src:nT}),I.jsx("img",{src:rT})]})]})})}const qC="/assets/import-CjaYub2X.png",EB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHvUExURf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGbS3AIAAACkdFJOUwABAgMEBQcICQoLDQ4PExQXGRocHR8gISIjJScoKSssLS4vMDIzNDU2Nzo7PT4/QUJDREVGR0hJSktMTU5PUVRVW11fYWJkZWZnaGxxc3Z3eXp7fX6BhYeIiYqOj5CTlZaam52foKSlpqeoq6yusLKztLa4ur6/wMHCxMXHyMrLzM3Oz9DS1NXX2dvc3t/g4+Tm6Ort7u/w8fLz9PX4+fr7/P3+smXS9wAAAAlwSFlzAAAPrwAAD68B1qQibQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGHaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyI+PHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj48dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L3g6eG1wbWV0YT4NCjw/eHBhY2tldCBlbmQ9J3cnPz4slJgLAAAJtElEQVR4Xu3d+7cVZQHH4UHULpbSxUyzzBQts+gGpWmmlqVWVohpJd66qSiammZ4K01NyDTRvIQU/aEtLuI5L+ecvffMe515nh/fmT2zXJ/vWgdwsek6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoDEbLr1m2207n3jxxSd23rbtmks3hNcZsXUbr3/8wP+WOfD49RvXhfcxSltuf2l5/He8dPuW8F5GZ9NjYfelHtsU3s+onPdgmDz04HnhZxiNM3eEuVey48zwc4zDVfvC1ivbd1X4SUbg+O1h6NVtPz78NK07+aGw8loeOjn8PG07a3fYeG27zwqfQMsueiMsPMsbF4XPoF2XzPnLv6X2XRI+hVb16W8B49GvvwWMRd/+FjAO/ftbwBgM6W8B7RvW3wJaN7S/BbRteH8LaFmM/hbQrjj9LaBVsfpbQJvi9beAFsXsbwHtidvfAloTu78FtCV+fwtoSYr+FtCONP0toBWp+ltAG9L1t4AWpOxvAfVL298Cape6vwXULX1/C6hZjv4WUK88/S2gVrn6W0Cd8vW3gBrl7G8B9cnb3wJqk7u/BdQlf38LqEmJ/hZQjzL9LaAWpfpbQB3K9beAGpTsbwHlle1vAaWV7m8BZZXvbwEl1dDfAsqpo78FlFJLfwsoo57+FlBCTf0tIL+6+ltAbrX1t4C86utvATnV2N8C8qmzvwXkUmt/C8ij3v4WkEPN/S0gvbr7W0Bqtfe3gLTq728BKbXQ3wLSaaO/BaTSSn8LSKOd/haQQkv9LSC+tvpbQGyt9beAuNrrbwExtdjfAuJps78FxNJqfwuIo93+FhBDy/0tYLi2+1vAUK33t4Bh2u9vAUOMob8F9DeO/hbQV5b+e/eGJwlYQB95+p97rgXUKVP/rrOAKmXrbwFVytjfAiqUtb8FVCdzfwuoTPb+FlCVAv0toCJF+ltANQr1t4BKFOtvAVUo2N8CKlC0vwUUV7i/BRRWvL8FFFVBfwsoqIr+FlBMJf0toJBq+ltAERX1t4ACqupvAdlV1t8CMquuvwVkVWF/C8ioyv4WkE2l/S0gk2r7W0AWFfe3gAyq7m8ByVXe3wISq76/BSTVQH8LSKiJ/haQTCP9LSCRZvpbQBIN9beABJrqbwHRNdbfAiJrrr8FRJWn/8bwtcNYQDRN9reAaBrtbwGRNNvfAqJouL8FRNB0fwsYrPH+FjBQ8/0tYJAR9LeAAUbR3wJ6G0l/C+hpNP0toJcR9beAHkbV3wIWNrL+FrCg0fW3gIWMsL8FLGCU/S1gbiPtbwFzGm1/C5jLiPtbwBxG3d8CZhp5fwuYYfT9LWBNE+hvAWuYRH8LWFWW/q8W728Bq5hMfwtY0YT6W8AKJtXfAo4xsf4WEJhcfwtYZoL9LWCJSfa3gKMm2t8Cjphsfws4ZML9LWDq/S0gU//zwtfWY+ILmHz/iS9A/2kvQP9DJrsA/Y+Y6AL0P2qSC9B/iQkuQP9lJrcA/QMTW4D+x5jUAvRfwYQWoP+KJrMA/VcxkQXov6pJLED/NUxgAfqvafQL0H+GkS9A/5lGvQD95zDiBeg/l9EuQP85jXQB+s9tlAvQfwEjXID+CxndAvRf0MgWoP/CRrUA/XsY0QL072U0C9C/p5EsQP/eRrEA/QcYwQL0H6T5Beg/UOML0H+wphegfwQNL0D/KJpdgP6RNLoA/aNpcgF5+p8fvnacGlyA/lE1twD9I2tsAfpH19QC9E+goQXon0QzC9A/kUYWoH8yTSxA/4QaWID+SVW/AP0Tq3wB+idX9QL0z6DiBeifRbUL0D+TShegfzZVLkD/jCpcgP5ZVbeALP1f0/+oyhagf3ZVLUD/AipagP5FVLMA/QupZAH6F1PFAvQvqIIF6F9U8QXoX1jhBehfXNEFXKx/eXkWcHH42oPOfjO8LwH9Z8mygDfPDl/bdafsCe9KQP/Zsixgzynha094OLwnAf3nkWUBD58QvPXW8I4E9J9PlgXcuvydV4fXE9B/XlkWcPXSN579dng5Pv3nl2MBby/9heB94dX49F9EjgXc/+7rLgivxaf/YnIs4PNH35b+dwD6LyrDAv74zru+Fl6J7rXPLv+vY7YMC/j6kVc9GV6ITf8+0i/gz+sOveiS8Dw2/ftJv4BvHXrPb8LjyPTvK/kCfnfwLetfCY/j0r+/1AvYu77rugvD07j0HyL1Ar7Qdd1N4WFU+g+TeAE/77ru2fAwJv2HSruAZ7vutPAsJv2HS7uA07orwqOI9I8h6QKu6K4Lj+LRP46UC7iuuzk8ikb/WBIu4OburvAoFv3jSbeAu7pHwqNI9I8p2QIe6Z4Pj+LQP65UC3i+ez08ikL/2BIt4PXurfAoBv3jS7OAt7oXwqMI9E8hyQJe6B4Nj4bTP40UC3i02xEeDaZ/KgkWcHe3PTwaSv904i9ge/fT8Ggg/VOKvoCfdN8Nj4bRP63YC/hO9+nwaBD9U4u8gE913d/DswH0Ty/qAvZ0XXdLeNif/jnEXMD2ruu2hIe96Z9HxAVs7rruPbG+G0j/XKIt4M0TDz7u3vC4H/3zibWAew897crwuBf9c4q0gCsPPeyEGP8/SP+8oizghSPfFHV5eGFx+ucWYwGXH3nWcc+EVxalf37DF/DMce88a+hfENe/hMELWPKVwbvCawvRv4yBC9i15FGbwouL0L+UYQvYtPRRN4ZX56d/OUMW8LNlTzru/vD6vF773LIHkVX/Bdx39FeAh33gufCO+ehfVt8FPHtS+KQzXg3vmYf+pfVbwCunh8/pus3/Ce+aTf/y+ixg/5fCpxz0/YUX8LLv/6zAOf8Iu8zy9uH/B3CMryy4pac+Gj6BEj604B/j/PPgV0Ot6PSFvi/ozveGn6eME38dtlnL06eGn3/XSTvDu1f13x+HH6acH8z/4/vu94UfXmrdDeH9q/jXiv/yGKV8dc4f3we2Hv5+4NVdMM93x++//SPh5yhrw/Z5/tnHBzaGn1vB5lnfHn7gzjPCz1Deqb+a9XPgT18MP7OydZet+ceC938m/AB1+OSaf9P36YvC+1e3/tu/XeUrpP/2S3/2U7FzbvxrWOywl+/45qwf/oH1F94U/qZw/0M//ER4G7X52LUP/DsI99S28xesf8THL7v2hjt+/5eX9uy659at3/vGB8Pr1On9X77iR7+48w/P7d51zy1br7r4w+F1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGIf/AziVKmKNHw2DAAAAAElFTkSuQmCC";function $C(){return I.jsx("button",{className:"to-top-button green-bg",children:I.jsx("img",{src:EB})})}function Xa({text:n,fontSize:e,margin:t,onClick:r}){return I.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:e||"clamp(1.8rem, 1.9vw, 2rem)",margin:t},onClick:r,children:n})}function bB(){const[n,e]=W.useState(window.innerWidth),t=qu();return W.useEffect(()=>{const r=()=>e(window.innerWidth);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),I.jsx("section",{id:"footer",className:"footer-main-container",children:n<800?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"footer-logo-signup",children:I.jsx("img",{src:Og})}),I.jsxs("div",{className:"footer-contact",children:[I.jsx("h1",{className:"outfit-font",children:"Contacts:"}),I.jsxs("div",{className:"footer-icons",children:[I.jsx("img",{src:rT}),I.jsx("img",{src:tT}),I.jsx("img",{src:nT})]})]}),I.jsx("div",{className:"footer-blerb",children:I.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),I.jsxs("div",{className:"footer-newsletter",children:[I.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),I.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),I.jsx(Xa,{text:"Submit",fontSize:"1.3rem"})]}),I.jsx("div",{className:"to-top-button",onClick:()=>df("#nav"),children:I.jsx($C,{})}),I.jsx("a",{href:"#nav",children:I.jsx("img",{src:qC,className:"login-button",onClick:()=>{t("/login")}})})]}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"footer-blerb",children:I.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),I.jsxs("div",{className:"footer-logo-signup",children:[I.jsx("img",{src:Og}),I.jsxs("div",{className:"footer-newsletter",children:[I.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),I.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),I.jsx(Xa,{text:"Submit"})]})]}),I.jsxs("div",{className:"footer-contact",children:[I.jsx("h1",{className:"outfit-font",children:"Contacts:"}),I.jsxs("div",{className:"footer-icons",children:[I.jsx("img",{src:rT}),I.jsx("img",{src:tT}),I.jsx("img",{src:nT})]})]}),I.jsx("div",{className:"to-top-button",onClick:()=>df("#nav"),children:I.jsx($C,{})}),I.jsx("a",{href:"#nav",children:I.jsx("img",{src:qC,className:"login-button",onClick:()=>{t("/login")}})})]})})}const SB=["Monday Devotional","Thursday Lessons","Tuesday Article","Uncategorized","Wednesday Inspiration","Thoughts","Taxes","Experiences"];function wB(){const n=e=>e.length>10?"size-c":e.length>=6?"size-b":"size-a";return I.jsxs("section",{className:"common-cat-container green-bg",children:[I.jsx("h1",{className:"outfit-font",children:"Common Categories:"}),I.jsx("div",{className:"category-bento-container",children:SB.map((e,t)=>I.jsx("h3",{className:`category silver-bg outfit-font ${n(e)}`,children:e},t))})]})}function op(){return I.jsx("div",{className:"loader-container ",children:I.jsxs("div",{className:"typewriter",children:[I.jsx("div",{className:"slide",children:I.jsx("i",{})}),I.jsx("div",{className:"paper"}),I.jsx("div",{className:"keyboard"})]})})}function RB(){const{state:n}=VO();return I.jsxs("div",{className:"main-container",children:[I.jsx(TB,{}),n==="loading"?I.jsx(op,{}):I.jsx("div",{children:I.jsx(vz,{})}),I.jsx(wB,{}),I.jsx(bB,{})]})}function CB(){const{state:n}=VO();return I.jsx("div",{className:"main-container",children:n==="loading"?"loading...":I.jsx("h1",{children:"Error"})})}const xB=()=>{};var GC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},kB=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},GN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let _=(u&15)<<2|h>>6,A=h&63;c||(A=64,a||(_=64)),r.push(t[p],t[g],t[_],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($N(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new IB;const _=s<<2|u>>4;if(r.push(_),h!==64){const A=u<<4&240|h>>2;if(r.push(A),g!==64){const T=h<<6&192|g;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class IB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OB=function(n){const e=$N(n);return GN.encodeByteArray(e,!0)},zg=function(n){return OB(n).replace(/\./g,"")},KN=function(n){try{return GN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=()=>NB().__FIREBASE_DEFAULTS__,DB=()=>{if(typeof process>"u"||typeof GC>"u")return;const n=GC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&KN(n[1]);return e&&JSON.parse(e)},Zy=()=>{try{return xB()||MB()||DB()||PB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},WN=n=>{var e,t;return(t=(e=Zy())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},YN=n=>{const e=WN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},QN=()=>{var n;return(n=Zy())===null||n===void 0?void 0:n.config},XN=n=>{var e;return(e=Zy())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zg(JSON.stringify(t)),zg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function UB(){var n;const e=(n=Zy())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jB(){const n=kr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FB(){return!UB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eM(){try{return typeof indexedDB=="object"}catch{return!1}}function tM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function HB(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="FirebaseError";class ms extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qB,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?$B(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new ms(i,u,r)}}function $B(n,e){return n.replace(GB,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GB=/\{\$([^}]+)}/g;function KB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ou(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(KC(s)&&KC(a)){if(!Ou(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function KC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Zh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function WB(n,e){const t=new YB(n,e);return t.subscribe.bind(t)}class YB{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");QB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nA),i.error===void 0&&(i.error=nA),i.complete===void 0&&(i.complete=nA);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QB(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nA(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=1e3,JB=2,ZB=4*60*60*1e3,ej=.5;function WC(n,e=XB,t=JB){const r=e*Math.pow(t,n),i=Math.round(ej*r*(Math.random()-.5)*2);return Math.min(ZB,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n){return n&&n._delegate?n._delegate:n}class fs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new LB;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rj(e))try{this.getOrInitializeService({instanceIdentifier:su})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=su){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=su){return this.instances.has(e)}getOptions(e=su){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=su){return this.component?this.component.multipleInstances?e:su:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nj(n){return n===su?void 0:n}function rj(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(gt||(gt={}));const sj={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},oj=gt.INFO,aj={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},lj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=aj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e_{constructor(e){this.name=e,this._logLevel=oj,this._logHandler=lj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const uj=(n,e)=>e.some(t=>n instanceof t);let YC,QC;function cj(){return YC||(YC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fj(){return QC||(QC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nM=new WeakMap,vT=new WeakMap,rM=new WeakMap,rA=new WeakMap,JE=new WeakMap;function hj(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ja(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&nM.set(t,n)}).catch(()=>{}),JE.set(e,n),e}function dj(n){if(vT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});vT.set(n,e)}let AT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ja(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pj(n){AT=n(AT)}function mj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(iA(this),e,...t);return rM.set(r,e.sort?e.sort():[e]),Ja(r)}:fj().includes(n)?function(...e){return n.apply(iA(this),e),Ja(nM.get(this))}:function(...e){return Ja(n.apply(iA(this),e))}}function gj(n){return typeof n=="function"?mj(n):(n instanceof IDBTransaction&&dj(n),uj(n,cj())?new Proxy(n,AT):n)}function Ja(n){if(n instanceof IDBRequest)return hj(n);if(rA.has(n))return rA.get(n);const e=gj(n);return e!==n&&(rA.set(n,e),JE.set(e,n)),e}const iA=n=>JE.get(n);function iM(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=Ja(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ja(a.result),c.oldVersion,c.newVersion,Ja(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const yj=["get","getKey","getAll","getAllKeys","count"],_j=["put","add","delete","clear"],sA=new Map;function XC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sA.get(e))return sA.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=_j.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yj.includes(t)))return;const s=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&c.done]))[0]};return sA.set(e,s),s}pj(n=>({...n,get:(e,t,r)=>XC(e,t)||n.get(e,t,r),has:(e,t)=>!!XC(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Aj(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Aj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const TT="@firebase/app",JC="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new e_("@firebase/app"),Tj="@firebase/app-compat",Ej="@firebase/analytics-compat",bj="@firebase/analytics",Sj="@firebase/app-check-compat",wj="@firebase/app-check",Rj="@firebase/auth",Cj="@firebase/auth-compat",xj="@firebase/database",kj="@firebase/data-connect",Ij="@firebase/database-compat",Oj="@firebase/functions",Nj="@firebase/functions-compat",Mj="@firebase/installations",Dj="@firebase/installations-compat",Pj="@firebase/messaging",Lj="@firebase/messaging-compat",Vj="@firebase/performance",Uj="@firebase/performance-compat",zj="@firebase/remote-config",Bj="@firebase/remote-config-compat",jj="@firebase/storage",Fj="@firebase/storage-compat",Hj="@firebase/firestore",qj="@firebase/vertexai",$j="@firebase/firestore-compat",Gj="firebase",Kj="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="[DEFAULT]",Wj={[TT]:"fire-core",[Tj]:"fire-core-compat",[bj]:"fire-analytics",[Ej]:"fire-analytics-compat",[wj]:"fire-app-check",[Sj]:"fire-app-check-compat",[Rj]:"fire-auth",[Cj]:"fire-auth-compat",[xj]:"fire-rtdb",[kj]:"fire-data-connect",[Ij]:"fire-rtdb-compat",[Oj]:"fire-fn",[Nj]:"fire-fn-compat",[Mj]:"fire-iid",[Dj]:"fire-iid-compat",[Pj]:"fire-fcm",[Lj]:"fire-fcm-compat",[Vj]:"fire-perf",[Uj]:"fire-perf-compat",[zj]:"fire-rc",[Bj]:"fire-rc-compat",[jj]:"fire-gcs",[Fj]:"fire-gcs-compat",[Hj]:"fire-fst",[$j]:"fire-fst-compat",[qj]:"fire-vertex","fire-js":"fire-js",[Gj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map,Yj=new Map,bT=new Map;function ZC(n,e){try{n.container.addComponent(e)}catch(t){ea.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n){const e=n.name;if(bT.has(e))return ea.debug(`There were multiple attempts to register component ${e}.`),!1;bT.set(e,n);for(const t of Bg.values())ZC(t,n);for(const t of Yj.values())ZC(t,n);return!0}function kf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Za=new Gu("app","Firebase",Qj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Za.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=Kj;function sM(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ET,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Za.create("bad-app-name",{appName:String(i)});if(t||(t=QN()),!t)throw Za.create("no-options");const s=Bg.get(i);if(s){if(Ou(t,s.options)&&Ou(r,s.config))return s;throw Za.create("duplicate-app",{appName:i})}const a=new ij(i);for(const c of bT.values())a.addComponent(c);const u=new Xj(t,r,a);return Bg.set(i,u),u}function ZE(n=ET){const e=Bg.get(n);if(!e&&n===ET&&QN())return sM();if(!e)throw Za.create("no-app",{appName:n});return e}function ai(n,e,t){var r;let i=(r=Wj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ea.warn(u.join(" "));return}Rs(new fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="firebase-heartbeat-database",Zj=1,Ld="firebase-heartbeat-store";let oA=null;function oM(){return oA||(oA=iM(Jj,Zj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ld)}catch(t){console.warn(t)}}}}).catch(n=>{throw Za.create("idb-open",{originalErrorMessage:n.message})})),oA}async function eF(n){try{const t=(await oM()).transaction(Ld),r=await t.objectStore(Ld).get(aM(n));return await t.done,r}catch(e){if(e instanceof ms)ea.warn(e.message);else{const t=Za.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ea.warn(t.message)}}}async function ex(n,e){try{const r=(await oM()).transaction(Ld,"readwrite");await r.objectStore(Ld).put(e,aM(n)),await r.done}catch(t){if(t instanceof ms)ea.warn(t.message);else{const r=Za.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ea.warn(r.message)}}}function aM(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=1024,nF=30;class rF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>nF){const a=oF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ea.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tx(),{heartbeatsToSend:r,unsentEntries:i}=iF(this._heartbeatsCache.heartbeats),s=zg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ea.warn(t),""}}}function tx(){return new Date().toISOString().substring(0,10)}function iF(n,e=tF){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),nx(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),nx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eM()?tM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eF(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return ex(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return ex(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nx(n){return zg(JSON.stringify({version:2,heartbeats:n})).length}function oF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(n){Rs(new fs("platform-logger",e=>new vj(e),"PRIVATE")),Rs(new fs("heartbeat",e=>new rF(e),"PRIVATE")),ai(TT,JC,n),ai(TT,JC,"esm2017"),ai("fire-js","")}aF("");var rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var el,lM;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,k){function x(){}x.prototype=k.prototype,N.D=k.prototype,N.prototype=new x,N.prototype.constructor=N,N.C=function(U,V,j){for(var D=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)D[Ce-2]=arguments[Ce];return k.prototype[V].apply(U,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,k,x){x||(x=0);var U=Array(16);if(typeof k=="string")for(var V=0;16>V;++V)U[V]=k.charCodeAt(x++)|k.charCodeAt(x++)<<8|k.charCodeAt(x++)<<16|k.charCodeAt(x++)<<24;else for(V=0;16>V;++V)U[V]=k[x++]|k[x++]<<8|k[x++]<<16|k[x++]<<24;k=N.g[0],x=N.g[1],V=N.g[2];var j=N.g[3],D=k+(j^x&(V^j))+U[0]+3614090360&4294967295;k=x+(D<<7&4294967295|D>>>25),D=j+(V^k&(x^V))+U[1]+3905402710&4294967295,j=k+(D<<12&4294967295|D>>>20),D=V+(x^j&(k^x))+U[2]+606105819&4294967295,V=j+(D<<17&4294967295|D>>>15),D=x+(k^V&(j^k))+U[3]+3250441966&4294967295,x=V+(D<<22&4294967295|D>>>10),D=k+(j^x&(V^j))+U[4]+4118548399&4294967295,k=x+(D<<7&4294967295|D>>>25),D=j+(V^k&(x^V))+U[5]+1200080426&4294967295,j=k+(D<<12&4294967295|D>>>20),D=V+(x^j&(k^x))+U[6]+2821735955&4294967295,V=j+(D<<17&4294967295|D>>>15),D=x+(k^V&(j^k))+U[7]+4249261313&4294967295,x=V+(D<<22&4294967295|D>>>10),D=k+(j^x&(V^j))+U[8]+1770035416&4294967295,k=x+(D<<7&4294967295|D>>>25),D=j+(V^k&(x^V))+U[9]+2336552879&4294967295,j=k+(D<<12&4294967295|D>>>20),D=V+(x^j&(k^x))+U[10]+4294925233&4294967295,V=j+(D<<17&4294967295|D>>>15),D=x+(k^V&(j^k))+U[11]+2304563134&4294967295,x=V+(D<<22&4294967295|D>>>10),D=k+(j^x&(V^j))+U[12]+1804603682&4294967295,k=x+(D<<7&4294967295|D>>>25),D=j+(V^k&(x^V))+U[13]+4254626195&4294967295,j=k+(D<<12&4294967295|D>>>20),D=V+(x^j&(k^x))+U[14]+2792965006&4294967295,V=j+(D<<17&4294967295|D>>>15),D=x+(k^V&(j^k))+U[15]+1236535329&4294967295,x=V+(D<<22&4294967295|D>>>10),D=k+(V^j&(x^V))+U[1]+4129170786&4294967295,k=x+(D<<5&4294967295|D>>>27),D=j+(x^V&(k^x))+U[6]+3225465664&4294967295,j=k+(D<<9&4294967295|D>>>23),D=V+(k^x&(j^k))+U[11]+643717713&4294967295,V=j+(D<<14&4294967295|D>>>18),D=x+(j^k&(V^j))+U[0]+3921069994&4294967295,x=V+(D<<20&4294967295|D>>>12),D=k+(V^j&(x^V))+U[5]+3593408605&4294967295,k=x+(D<<5&4294967295|D>>>27),D=j+(x^V&(k^x))+U[10]+38016083&4294967295,j=k+(D<<9&4294967295|D>>>23),D=V+(k^x&(j^k))+U[15]+3634488961&4294967295,V=j+(D<<14&4294967295|D>>>18),D=x+(j^k&(V^j))+U[4]+3889429448&4294967295,x=V+(D<<20&4294967295|D>>>12),D=k+(V^j&(x^V))+U[9]+568446438&4294967295,k=x+(D<<5&4294967295|D>>>27),D=j+(x^V&(k^x))+U[14]+3275163606&4294967295,j=k+(D<<9&4294967295|D>>>23),D=V+(k^x&(j^k))+U[3]+4107603335&4294967295,V=j+(D<<14&4294967295|D>>>18),D=x+(j^k&(V^j))+U[8]+1163531501&4294967295,x=V+(D<<20&4294967295|D>>>12),D=k+(V^j&(x^V))+U[13]+2850285829&4294967295,k=x+(D<<5&4294967295|D>>>27),D=j+(x^V&(k^x))+U[2]+4243563512&4294967295,j=k+(D<<9&4294967295|D>>>23),D=V+(k^x&(j^k))+U[7]+1735328473&4294967295,V=j+(D<<14&4294967295|D>>>18),D=x+(j^k&(V^j))+U[12]+2368359562&4294967295,x=V+(D<<20&4294967295|D>>>12),D=k+(x^V^j)+U[5]+4294588738&4294967295,k=x+(D<<4&4294967295|D>>>28),D=j+(k^x^V)+U[8]+2272392833&4294967295,j=k+(D<<11&4294967295|D>>>21),D=V+(j^k^x)+U[11]+1839030562&4294967295,V=j+(D<<16&4294967295|D>>>16),D=x+(V^j^k)+U[14]+4259657740&4294967295,x=V+(D<<23&4294967295|D>>>9),D=k+(x^V^j)+U[1]+2763975236&4294967295,k=x+(D<<4&4294967295|D>>>28),D=j+(k^x^V)+U[4]+1272893353&4294967295,j=k+(D<<11&4294967295|D>>>21),D=V+(j^k^x)+U[7]+4139469664&4294967295,V=j+(D<<16&4294967295|D>>>16),D=x+(V^j^k)+U[10]+3200236656&4294967295,x=V+(D<<23&4294967295|D>>>9),D=k+(x^V^j)+U[13]+681279174&4294967295,k=x+(D<<4&4294967295|D>>>28),D=j+(k^x^V)+U[0]+3936430074&4294967295,j=k+(D<<11&4294967295|D>>>21),D=V+(j^k^x)+U[3]+3572445317&4294967295,V=j+(D<<16&4294967295|D>>>16),D=x+(V^j^k)+U[6]+76029189&4294967295,x=V+(D<<23&4294967295|D>>>9),D=k+(x^V^j)+U[9]+3654602809&4294967295,k=x+(D<<4&4294967295|D>>>28),D=j+(k^x^V)+U[12]+3873151461&4294967295,j=k+(D<<11&4294967295|D>>>21),D=V+(j^k^x)+U[15]+530742520&4294967295,V=j+(D<<16&4294967295|D>>>16),D=x+(V^j^k)+U[2]+3299628645&4294967295,x=V+(D<<23&4294967295|D>>>9),D=k+(V^(x|~j))+U[0]+4096336452&4294967295,k=x+(D<<6&4294967295|D>>>26),D=j+(x^(k|~V))+U[7]+1126891415&4294967295,j=k+(D<<10&4294967295|D>>>22),D=V+(k^(j|~x))+U[14]+2878612391&4294967295,V=j+(D<<15&4294967295|D>>>17),D=x+(j^(V|~k))+U[5]+4237533241&4294967295,x=V+(D<<21&4294967295|D>>>11),D=k+(V^(x|~j))+U[12]+1700485571&4294967295,k=x+(D<<6&4294967295|D>>>26),D=j+(x^(k|~V))+U[3]+2399980690&4294967295,j=k+(D<<10&4294967295|D>>>22),D=V+(k^(j|~x))+U[10]+4293915773&4294967295,V=j+(D<<15&4294967295|D>>>17),D=x+(j^(V|~k))+U[1]+2240044497&4294967295,x=V+(D<<21&4294967295|D>>>11),D=k+(V^(x|~j))+U[8]+1873313359&4294967295,k=x+(D<<6&4294967295|D>>>26),D=j+(x^(k|~V))+U[15]+4264355552&4294967295,j=k+(D<<10&4294967295|D>>>22),D=V+(k^(j|~x))+U[6]+2734768916&4294967295,V=j+(D<<15&4294967295|D>>>17),D=x+(j^(V|~k))+U[13]+1309151649&4294967295,x=V+(D<<21&4294967295|D>>>11),D=k+(V^(x|~j))+U[4]+4149444226&4294967295,k=x+(D<<6&4294967295|D>>>26),D=j+(x^(k|~V))+U[11]+3174756917&4294967295,j=k+(D<<10&4294967295|D>>>22),D=V+(k^(j|~x))+U[2]+718787259&4294967295,V=j+(D<<15&4294967295|D>>>17),D=x+(j^(V|~k))+U[9]+3951481745&4294967295,N.g[0]=N.g[0]+k&4294967295,N.g[1]=N.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+j&4294967295}r.prototype.u=function(N,k){k===void 0&&(k=N.length);for(var x=k-this.blockSize,U=this.B,V=this.h,j=0;j<k;){if(V==0)for(;j<=x;)i(this,N,j),j+=this.blockSize;if(typeof N=="string"){for(;j<k;)if(U[V++]=N.charCodeAt(j++),V==this.blockSize){i(this,U),V=0;break}}else for(;j<k;)if(U[V++]=N[j++],V==this.blockSize){i(this,U),V=0;break}}this.h=V,this.o+=k},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var k=1;k<N.length-8;++k)N[k]=0;var x=8*this.o;for(k=N.length-8;k<N.length;++k)N[k]=x&255,x/=256;for(this.u(N),N=Array(16),k=x=0;4>k;++k)for(var U=0;32>U;U+=8)N[x++]=this.g[k]>>>U&255;return N};function s(N,k){var x=u;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=k(N)}function a(N,k){this.h=k;for(var x=[],U=!0,V=N.length-1;0<=V;V--){var j=N[V]|0;U&&j==k||(x[V]=j,U=!1)}this.g=x}var u={};function c(N){return-128<=N&&128>N?s(N,function(k){return new a([k|0],0>k?-1:0)}):new a([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return g;if(0>N)return S(h(-N));for(var k=[],x=1,U=0;N>=x;U++)k[U]=N/x|0,x*=4294967296;return new a(k,0)}function p(N,k){if(N.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N.charAt(0)=="-")return S(p(N.substring(1),k));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(k,8)),U=g,V=0;V<N.length;V+=8){var j=Math.min(8,N.length-V),D=parseInt(N.substring(V,V+j),k);8>j?(j=h(Math.pow(k,j)),U=U.j(j).add(h(D))):(U=U.j(x),U=U.add(h(D)))}return U}var g=c(0),_=c(1),A=c(16777216);n=a.prototype,n.m=function(){if(b(this))return-S(this).m();for(var N=0,k=1,x=0;x<this.g.length;x++){var U=this.i(x);N+=(0<=U?U:4294967296+U)*k,k*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(T(this))return"0";if(b(this))return"-"+S(this).toString(N);for(var k=h(Math.pow(N,6)),x=this,U="";;){var V=q(x,k).g;x=C(x,V.j(k));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(N);if(x=V,T(x))return j+U;for(;6>j.length;)j="0"+j;U=j+U}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function T(N){if(N.h!=0)return!1;for(var k=0;k<N.g.length;k++)if(N.g[k]!=0)return!1;return!0}function b(N){return N.h==-1}n.l=function(N){return N=C(this,N),b(N)?-1:T(N)?0:1};function S(N){for(var k=N.g.length,x=[],U=0;U<k;U++)x[U]=~N.g[U];return new a(x,~N.h).add(_)}n.abs=function(){return b(this)?S(this):this},n.add=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],U=0,V=0;V<=k;V++){var j=U+(this.i(V)&65535)+(N.i(V)&65535),D=(j>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);U=D>>>16,j&=65535,D&=65535,x[V]=D<<16|j}return new a(x,x[x.length-1]&-2147483648?-1:0)};function C(N,k){return N.add(S(k))}n.j=function(N){if(T(this)||T(N))return g;if(b(this))return b(N)?S(this).j(S(N)):S(S(this).j(N));if(b(N))return S(this.j(S(N)));if(0>this.l(A)&&0>N.l(A))return h(this.m()*N.m());for(var k=this.g.length+N.g.length,x=[],U=0;U<2*k;U++)x[U]=0;for(U=0;U<this.g.length;U++)for(var V=0;V<N.g.length;V++){var j=this.i(U)>>>16,D=this.i(U)&65535,Ce=N.i(V)>>>16,Oe=N.i(V)&65535;x[2*U+2*V]+=D*Oe,L(x,2*U+2*V),x[2*U+2*V+1]+=j*Oe,L(x,2*U+2*V+1),x[2*U+2*V+1]+=D*Ce,L(x,2*U+2*V+1),x[2*U+2*V+2]+=j*Ce,L(x,2*U+2*V+2)}for(U=0;U<k;U++)x[U]=x[2*U+1]<<16|x[2*U];for(U=k;U<2*k;U++)x[U]=0;return new a(x,0)};function L(N,k){for(;(N[k]&65535)!=N[k];)N[k+1]+=N[k]>>>16,N[k]&=65535,k++}function z(N,k){this.g=N,this.h=k}function q(N,k){if(T(k))throw Error("division by zero");if(T(N))return new z(g,g);if(b(N))return k=q(S(N),k),new z(S(k.g),S(k.h));if(b(k))return k=q(N,S(k)),new z(S(k.g),k.h);if(30<N.g.length){if(b(N)||b(k))throw Error("slowDivide_ only works with positive integers.");for(var x=_,U=k;0>=U.l(N);)x=B(x),U=B(U);var V=P(x,1),j=P(U,1);for(U=P(U,2),x=P(x,2);!T(U);){var D=j.add(U);0>=D.l(N)&&(V=V.add(x),j=D),U=P(U,1),x=P(x,1)}return k=C(N,V.j(k)),new z(V,k)}for(V=g;0<=N.l(k);){for(x=Math.max(1,Math.floor(N.m()/k.m())),U=Math.ceil(Math.log(x)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),j=h(x),D=j.j(k);b(D)||0<D.l(N);)x-=U,j=h(x),D=j.j(k);T(j)&&(j=_),V=V.add(j),N=C(N,D)}return new z(V,N)}n.A=function(N){return q(this,N).h},n.and=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],U=0;U<k;U++)x[U]=this.i(U)&N.i(U);return new a(x,this.h&N.h)},n.or=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],U=0;U<k;U++)x[U]=this.i(U)|N.i(U);return new a(x,this.h|N.h)},n.xor=function(N){for(var k=Math.max(this.g.length,N.g.length),x=[],U=0;U<k;U++)x[U]=this.i(U)^N.i(U);return new a(x,this.h^N.h)};function B(N){for(var k=N.g.length+1,x=[],U=0;U<k;U++)x[U]=N.i(U)<<1|N.i(U-1)>>>31;return new a(x,N.h)}function P(N,k){var x=k>>5;k%=32;for(var U=N.g.length-x,V=[],j=0;j<U;j++)V[j]=0<k?N.i(j+x)>>>k|N.i(j+x+1)<<32-k:N.i(j+x);return new a(V,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lM=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,el=a}).apply(typeof rx<"u"?rx:typeof self<"u"?self:typeof window<"u"?window:{});var Vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uM,ed,cM,cg,ST,fM,hM,dM;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,w){return m==Array.prototype||m==Object.prototype||(m[E]=w.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vm=="object"&&Vm];for(var E=0;E<m.length;++E){var w=m[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(m,E){if(E)e:{var w=r;m=m.split(".");for(var M=0;M<m.length-1;M++){var J=m[M];if(!(J in w))break e;w=w[J]}m=m[m.length-1],M=w[m],E=E(M),E!=M&&E!=null&&e(w,m,{configurable:!0,writable:!0,value:E})}}function s(m,E){m instanceof String&&(m+="");var w=0,M=!1,J={next:function(){if(!M&&w<m.length){var se=w++;return{value:E(se,m[se]),done:!1}}return M=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(m){return m||function(){return s(this,function(E,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function h(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function p(m,E,w){return m.call.apply(m.bind,arguments)}function g(m,E,w){if(!m)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,M),m.apply(E,J)}}return function(){return m.apply(E,arguments)}}function _(m,E,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,_.apply(null,arguments)}function A(m,E){var w=Array.prototype.slice.call(arguments,1);return function(){var M=w.slice();return M.push.apply(M,arguments),m.apply(this,M)}}function T(m,E){function w(){}w.prototype=E.prototype,m.aa=E.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(M,J,se){for(var Te=Array(arguments.length-2),At=2;At<arguments.length;At++)Te[At-2]=arguments[At];return E.prototype[J].apply(M,Te)}}function b(m){const E=m.length;if(0<E){const w=Array(E);for(let M=0;M<E;M++)w[M]=m[M];return w}return[]}function S(m,E){for(let w=1;w<arguments.length;w++){const M=arguments[w];if(c(M)){const J=m.length||0,se=M.length||0;m.length=J+se;for(let Te=0;Te<se;Te++)m[J+Te]=M[Te]}else m.push(M)}}class C{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function L(m){return/^[\s\xa0]*$/.test(m)}function z(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function q(m){return q[" "](m),m}q[" "]=function(){};var B=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function P(m,E,w){for(const M in m)E.call(w,m[M],M,m)}function N(m,E){for(const w in m)E.call(void 0,m[w],w,m)}function k(m){const E={};for(const w in m)E[w]=m[w];return E}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(m,E){let w,M;for(let J=1;J<arguments.length;J++){M=arguments[J];for(w in M)m[w]=M[w];for(let se=0;se<x.length;se++)w=x[se],Object.prototype.hasOwnProperty.call(M,w)&&(m[w]=M[w])}}function V(m){var E=1;m=m.split(":");const w=[];for(;0<E&&m.length;)w.push(m.shift()),E--;return m.length&&w.push(m.join(":")),w}function j(m){u.setTimeout(()=>{throw m},0)}function D(){var m=qe;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class Ce{constructor(){this.h=this.g=null}add(E,w){const M=Oe.get();M.set(E,w),this.h?this.h.next=M:this.g=M,this.h=M}}var Oe=new C(()=>new Y,m=>m.reset());class Y{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Ae=!1,qe=new Ce,H=()=>{const m=u.Promise.resolve(void 0);oe=()=>{m.then(ie)}};var ie=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(w){j(w)}var E=Oe;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}Ae=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,E),u.removeEventListener("test",w,E)}catch{}return m}();function we(m,E){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,M=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(B){e:{try{q(E.nodeName);var J=!0;break e}catch{}J=!1}J||(E=null)}}else w=="mouseover"?E=m.fromElement:w=="mouseout"&&(E=m.toElement);this.relatedTarget=E,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ve[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&we.aa.h.call(this)}}T(we,le);var Ve={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Kt="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function mr(m,E,w,M,J){this.listener=m,this.proxy=null,this.src=E,this.type=w,this.capture=!!M,this.ha=J,this.key=++Rt,this.da=this.fa=!1}function Ut(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function On(m){this.src=m,this.g={},this.h=0}On.prototype.add=function(m,E,w,M,J){var se=m.toString();m=this.g[se],m||(m=this.g[se]=[],this.h++);var Te=di(m,E,M,J);return-1<Te?(E=m[Te],w||(E.fa=!1)):(E=new mr(E,this.src,se,!!M,J),E.fa=w,m.push(E)),E};function Zn(m,E){var w=E.type;if(w in m.g){var M=m.g[w],J=Array.prototype.indexOf.call(M,E,void 0),se;(se=0<=J)&&Array.prototype.splice.call(M,J,1),se&&(Ut(E),m.g[w].length==0&&(delete m.g[w],m.h--))}}function di(m,E,w,M){for(var J=0;J<m.length;++J){var se=m[J];if(!se.da&&se.listener==E&&se.capture==!!w&&se.ha==M)return J}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),gs={};function ks(m,E,w,M,J){if(Array.isArray(E)){for(var se=0;se<E.length;se++)ks(m,E[se],w,M,J);return null}return w=Nr(w),m&&m[Kt]?m.K(E,w,h(M)?!!M.capture:!1,J):on(m,E,w,!1,M,J)}function on(m,E,w,M,J,se){if(!E)throw Error("Invalid event type");var Te=h(J)?!!J.capture:!!J,At=gr(m);if(At||(m[Xt]=At=new On(m)),w=At.add(E,w,M,Te,se),w.proxy)return w;if(M=Is(),w.proxy=M,M.src=m,M.listener=w,m.addEventListener)Se||(J=Te),J===void 0&&(J=!1),m.addEventListener(E.toString(),M,J);else if(m.attachEvent)m.attachEvent(Bi(E.toString()),M);else if(m.addListener&&m.removeListener)m.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Is(){function m(w){return E.call(m.src,m.listener,w)}const E=pi;return m}function zi(m,E,w,M,J){if(Array.isArray(E))for(var se=0;se<E.length;se++)zi(m,E[se],w,M,J);else M=h(M)?!!M.capture:!!M,w=Nr(w),m&&m[Kt]?(m=m.i,E=String(E).toString(),E in m.g&&(se=m.g[E],w=di(se,w,M,J),-1<w&&(Ut(se[w]),Array.prototype.splice.call(se,w,1),se.length==0&&(delete m.g[E],m.h--)))):m&&(m=gr(m))&&(E=m.g[E.toString()],m=-1,E&&(m=di(E,w,M,J)),(w=-1<m?E[m]:null)&&ys(w))}function ys(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Kt])Zn(E.i,m);else{var w=m.type,M=m.proxy;E.removeEventListener?E.removeEventListener(w,M,m.capture):E.detachEvent?E.detachEvent(Bi(w),M):E.addListener&&E.removeListener&&E.removeListener(M),(w=gr(E))?(Zn(w,m),w.h==0&&(w.src=null,E[Xt]=null)):Ut(m)}}}function Bi(m){return m in gs?gs[m]:gs[m]="on"+m}function pi(m,E){if(m.da)m=!0;else{E=new we(E,this);var w=m.listener,M=m.ha||m.src;m.fa&&ys(m),m=w.call(M,E)}return m}function gr(m){return m=m[Xt],m instanceof On?m:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(m){return typeof m=="function"?m:(m[Kr]||(m[Kr]=function(E){return m.handleEvent(E)}),m[Kr])}function ut(){_e.call(this),this.i=new On(this),this.M=this,this.F=null}T(ut,_e),ut.prototype[Kt]=!0,ut.prototype.removeEventListener=function(m,E,w,M){zi(this,m,E,w,M)};function et(m,E){var w,M=m.F;if(M)for(w=[];M;M=M.F)w.push(M);if(m=m.M,M=E.type||E,typeof E=="string")E=new le(E,m);else if(E instanceof le)E.target=E.target||m;else{var J=E;E=new le(M,m),U(E,J)}if(J=!0,w)for(var se=w.length-1;0<=se;se--){var Te=E.g=w[se];J=Nn(Te,M,!0,E)&&J}if(Te=E.g=m,J=Nn(Te,M,!0,E)&&J,J=Nn(Te,M,!1,E)&&J,w)for(se=0;se<w.length;se++)Te=E.g=w[se],J=Nn(Te,M,!1,E)&&J}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var w=m.g[E],M=0;M<w.length;M++)Ut(w[M]);delete m.g[E],m.h--}}this.F=null},ut.prototype.K=function(m,E,w,M){return this.i.add(String(m),E,!1,w,M)},ut.prototype.L=function(m,E,w,M){return this.i.add(String(m),E,!0,w,M)};function Nn(m,E,w,M){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var J=!0,se=0;se<E.length;++se){var Te=E[se];if(Te&&!Te.da&&Te.capture==w){var At=Te.listener,Mn=Te.ha||Te.src;Te.fa&&Zn(m.i,Te),J=At.call(Mn,M)!==!1&&J}}return J&&!M.defaultPrevented}function Jt(m,E,w){if(typeof m=="function")w&&(m=_(m,w));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:u.setTimeout(m,E||0)}function Os(m){m.g=Jt(()=>{m.g=null,m.i&&(m.i=!1,Os(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Mr extends _e{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(m){_e.call(this),this.h=m,this.g={}}T(Dr,_e);var Pr=[];function Tn(m){P(m.g,function(E,w){this.g.hasOwnProperty(w)&&ys(E)},m),m.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),Tn(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=u.JSON.stringify,mi=u.JSON.parse,yr=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Ns(){}Ns.prototype.h=null;function Wr(m){return m.h||(m.h=m.i())}function ji(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function er(){le.call(this,"d")}T(er,le);function Ms(){le.call(this,"c")}T(Ms,le);var tr={},Ot=null;function nr(){return Ot=Ot||new ut}tr.La="serverreachability";function Ds(m){le.call(this,tr.La,m)}T(Ds,le);function $(m){const E=nr();et(E,new Ds(E))}tr.STAT_EVENT="statevent";function X(m,E){le.call(this,tr.STAT_EVENT,m),this.stat=E}T(X,le);function Z(m){const E=nr();et(E,new X(E,m))}tr.Ma="timingevent";function ce(m,E){le.call(this,tr.Ma,m),this.size=E}T(ce,le);function ge(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Ue(m,E,w,M,J,se){m.info(function(){if(m.g)if(se)for(var Te="",At=se.split("&"),Mn=0;Mn<At.length;Mn++){var Tt=At[Mn].split("=");if(1<Tt.length){var jn=Tt[0];Tt=Tt[1];var Dn=jn.split("_");Te=2<=Dn.length&&Dn[1]=="type"?Te+(jn+"="+Tt+"&"):Te+(jn+"=redacted&")}}else Te=null;else Te=se;return"XMLHTTP REQ ("+M+") [attempt "+J+"]: "+E+`
`+w+`
`+Te})}function ke(m,E,w,M,J,se,Te){m.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+J+"]: "+E+`
`+w+`
`+se+" "+Te})}function Ne(m,E,w,M){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+je(m,w)+(M?" "+M:"")})}function Le(m,E){m.info(function(){return"TIMEOUT: "+E})}Ee.prototype.info=function(){};function je(m,E){if(!m.g)return E;if(!E)return null;try{var w=JSON.parse(E);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var M=w[m];if(!(2>M.length)){var J=M[1];if(Array.isArray(J)&&!(1>J.length)){var se=J[0];if(se!="noop"&&se!="stop"&&se!="close")for(var Te=1;Te<J.length;Te++)J[Te]=""}}}}return En(w)}catch{return E}}var Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},it;function St(){}T(St,Ns),St.prototype.g=function(){return new XMLHttpRequest},St.prototype.i=function(){return{}},it=new St;function _t(m,E,w,M){this.j=m,this.i=E,this.l=w,this.R=M||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var ye={},G={};function de(m,E,w){m.L=1,m.v=Ol(gi(E)),m.m=w,m.P=!0,be(m,null)}function be(m,E){m.F=Date.now(),Ct(m),m.A=gi(m.v);var w=m.A,M=m.R;Array.isArray(M)||(M=[String(M)]),Bf(w.i,"t",M),m.C=0,w=m.j.J,m.h=new ht,m.g=Ip(m.j,w?E:null,!m.m),0<m.O&&(m.M=new Mr(_(m.Y,m,m.g),m.O)),E=m.U,w=m.g,M=m.ca;var J="readystatechange";Array.isArray(J)||(J&&(Pr[0]=J.toString()),J=Pr);for(var se=0;se<J.length;se++){var Te=ks(w,J[se],M||E.handleEvent,!1,E.h||E);if(!Te)break;E.g[Te.key]=Te}E=m.H?k(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),$(),Ue(m.i,m.u,m.A,m.l,m.R,m.m)}_t.prototype.ca=function(m){m=m.target;const E=this.M;E&&Gi(m)==3?E.j():this.Y(m)},_t.prototype.Y=function(m){try{if(m==this.g)e:{const Dn=Gi(this.g);var E=this.g.Ba();const So=this.g.Z();if(!(3>Dn)&&(Dn!=3||this.g&&(this.h.h||this.g.oa()||Ep(this.g)))){this.J||Dn!=4||E==7||(E==8||0>=So?$(3):$(2)),Bt(this);var w=this.g.Z();this.X=w;t:if(tt(this)){var M=Ep(this.g);m="";var J=M.length,se=Gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pe(this),mn(this);var Te="";break t}this.h.i=new u.TextDecoder}for(E=0;E<J;E++)this.h.h=!0,m+=this.h.i.decode(M[E],{stream:!(se&&E==J-1)});M.length=0,this.h.g+=m,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=w==200,ke(this.i,this.u,this.A,this.l,this.R,Dn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var At,Mn=this.g;if((At=Mn.g?Mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(At)){var Tt=At;break t}}Tt=null}if(w=Tt)Ne(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,en(this,w);else{this.o=!1,this.s=3,Z(12),Pe(this),mn(this);break e}}if(this.P){w=!0;let ir;for(;!this.J&&this.C<Te.length;)if(ir=zt(this,Te),ir==G){Dn==4&&(this.s=4,Z(14),w=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==ye){this.s=4,Z(15),Ne(this.i,this.l,Te,"[Invalid Chunk]"),w=!1;break}else Ne(this.i,this.l,ir,null),en(this,ir);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dn!=4||Te.length!=0||this.h.h||(this.s=1,Z(16),w=!1),this.o=this.o&&w,!w)Ne(this.i,this.l,Te,"[Invalid Chunked Response]"),Pe(this),mn(this);else if(0<Te.length&&!this.W){this.W=!0;var jn=this.j;jn.g==this&&jn.ba&&!jn.M&&(jn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),zl(jn),jn.M=!0,Z(11))}}else Ne(this.i,this.l,Te,null),en(this,Te);Dn==4&&Pe(this),this.o&&!this.J&&(Dn==4?Cp(this.j,this):(this.o=!1,Ct(this)))}else $_(this.g),w==400&&0<Te.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Pe(this),mn(this)}}}catch{}finally{}};function tt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function zt(m,E){var w=m.C,M=E.indexOf(`
`,w);return M==-1?G:(w=Number(E.substring(w,M)),isNaN(w)?ye:(M+=1,M+w>E.length?G:(E=E.slice(M,M+w),m.C=M+w,E)))}_t.prototype.cancel=function(){this.J=!0,Pe(this)};function Ct(m){m.S=Date.now()+m.I,Zt(m,m.I)}function Zt(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=ge(_(m.ba,m),E)}function Bt(m){m.B&&(u.clearTimeout(m.B),m.B=null)}_t.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Le(this.i,this.A),this.L!=2&&($(),Z(17)),Pe(this),this.s=2,mn(this)):Zt(this,this.S-m)};function mn(m){m.j.G==0||m.J||Cp(m.j,m)}function Pe(m){Bt(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,Tn(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function en(m,E){try{var w=m.j;if(w.G!=0&&(w.g==m||Fi(w.h,m))){if(!m.K&&Fi(w.h,m)&&w.G==3){try{var M=w.Da.g.parse(E)}catch{M=null}if(Array.isArray(M)&&M.length==3){var J=M;if(J[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)sc(w),rc(w);else break e;$f(w),Z(18)}}else w.za=J[1],0<w.za-w.T&&37500>J[2]&&w.F&&w.v==0&&!w.C&&(w.C=ge(_(w.Za,w),6e3));if(1>=jt(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else bo(w,11)}else if((m.K||w.g==m)&&sc(w),!L(E))for(J=w.Da.g.parse(E),E=0;E<J.length;E++){let Tt=J[E];if(w.T=Tt[0],Tt=Tt[1],w.G==2)if(Tt[0]=="c"){w.K=Tt[1],w.ia=Tt[2];const jn=Tt[3];jn!=null&&(w.la=jn,w.j.info("VER="+w.la));const Dn=Tt[4];Dn!=null&&(w.Aa=Dn,w.j.info("SVER="+w.Aa));const So=Tt[5];So!=null&&typeof So=="number"&&0<So&&(M=1.5*So,w.L=M,w.j.info("backChannelRequestTimeoutMs_="+M)),M=w;const ir=m.g;if(ir){const Fs=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var se=M.h;se.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(yo(se,se.h),se.h=null))}if(M.D){const Kf=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Kf&&(M.ya=Kf,Dt(M.I,M.D,Kf))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),M=w;var Te=m;if(M.qa=kp(M,M.J?M.ia:null,M.W),Te.K){rr(M.h,Te);var At=Te,Mn=M.L;Mn&&(At.I=Mn),At.B&&(Bt(At),Ct(At)),M.g=Te}else wp(M);0<w.i.length&&ic(w)}else Tt[0]!="stop"&&Tt[0]!="close"||bo(w,7);else w.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?bo(w,7):Hf(w):Tt[0]!="noop"&&w.l&&w.l.ta(Tt),w.v=0)}}$(4)}catch{}}var _r=class{constructor(m,E){this.g=m,this.map=E}};function Qr(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ps(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function jt(m){return m.h?1:m.g?m.g.size:0}function Fi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function yo(m,E){m.g?m.g.add(E):m.h=E}function rr(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Qr.prototype.cancel=function(){if(this.i=Lf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Lf(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const w of m.g.values())E=E.concat(w.D);return E}return b(m.i)}function j_(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var E=[],w=m.length,M=0;M<w;M++)E.push(m[M]);return E}E=[],w=0;for(M in m)E[w++]=m[M];return E}function Xu(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var E=[];m=m.length;for(var w=0;w<m;w++)E.push(w);return E}E=[],w=0;for(const M in m)E[w++]=M;return E}}}function Vf(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var w=Xu(m),M=j_(m),J=M.length,se=0;se<J;se++)E.call(void 0,M[se],w&&w[se],m)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function F_(m,E){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var M=m[w].indexOf("="),J=null;if(0<=M){var se=m[w].substring(0,M);J=m[w].substring(M+1)}else se=m[w];E(se,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function bn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof bn){this.h=m.h,Il(this,m.j),this.o=m.o,this.g=m.g,sa(this,m.s),this.l=m.l;var E=m.i,w=new vo;w.i=E.i,E.g&&(w.g=new Map(E.g),w.h=E.h),_o(this,w),this.m=m.m}else m&&(E=String(m).match(kl))?(this.h=!1,Il(this,E[1]||"",!0),this.o=Hi(E[2]||""),this.g=Hi(E[3]||"",!0),sa(this,E[4]),this.l=Hi(E[5]||"",!0),_o(this,E[6]||"",!0),this.m=Hi(E[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}bn.prototype.toString=function(){var m=[],E=this.j;E&&m.push(Nl(E,Uf,!0),":");var w=this.g;return(w||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Nl(E,Uf,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Nl(w,w.charAt(0)=="/"?H_:zf,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Nl(w,Ju)),m.join("")};function gi(m){return new bn(m)}function Il(m,E,w){m.j=w?Hi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function sa(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function _o(m,E,w){E instanceof vo?(m.i=E,Ap(m.i,m.h)):(w||(E=Nl(E,q_)),m.i=new vo(E,m.h))}function Dt(m,E,w){m.i.set(E,w)}function Ol(m){return Dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Hi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Nl(m,E,w){return typeof m=="string"?(m=encodeURI(m).replace(E,vp),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function vp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Uf=/[#\/\?@]/g,zf=/[#\?:]/g,H_=/[#\?]/g,q_=/[#\?@]/g,Ju=/#/g;function vo(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function qi(m){m.g||(m.g=new Map,m.h=0,m.i&&F_(m.i,function(E,w){m.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=vo.prototype,n.add=function(m,E){qi(this),this.i=null,m=Ls(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(E),this.h+=1,this};function Ao(m,E){qi(m),E=Ls(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function To(m,E){return qi(m),E=Ls(m,E),m.g.has(E)}n.forEach=function(m,E){qi(this),this.g.forEach(function(w,M){w.forEach(function(J){m.call(E,J,M,this)},this)},this)},n.na=function(){qi(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),w=[];for(let M=0;M<E.length;M++){const J=m[M];for(let se=0;se<J.length;se++)w.push(E[M])}return w},n.V=function(m){qi(this);let E=[];if(typeof m=="string")To(this,m)&&(E=E.concat(this.g.get(Ls(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)E=E.concat(m[w])}return E},n.set=function(m,E){return qi(this),this.i=null,m=Ls(this,m),To(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function Bf(m,E,w){Ao(m,E),0<w.length&&(m.i=null,m.g.set(Ls(m,E),b(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var w=0;w<E.length;w++){var M=E[w];const se=encodeURIComponent(String(M)),Te=this.V(M);for(M=0;M<Te.length;M++){var J=se;Te[M]!==""&&(J+="="+encodeURIComponent(String(Te[M]))),m.push(J)}}return this.i=m.join("&")};function Ls(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Ap(m,E){E&&!m.j&&(qi(m),m.i=null,m.g.forEach(function(w,M){var J=M.toLowerCase();M!=J&&(Ao(this,M),Bf(this,J,w))},m)),m.j=E}function Ml(m,E){const w=new Ee;if(u.Image){const M=new Image;M.onload=A($i,w,"TestLoadImage: loaded",!0,E,M),M.onerror=A($i,w,"TestLoadImage: error",!1,E,M),M.onabort=A($i,w,"TestLoadImage: abort",!1,E,M),M.ontimeout=A($i,w,"TestLoadImage: timeout",!1,E,M),u.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=m}else E(!1)}function _s(m,E){const w=new Ee,M=new AbortController,J=setTimeout(()=>{M.abort(),$i(w,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:M.signal}).then(se=>{clearTimeout(J),se.ok?$i(w,"TestPingServer: ok",!0,E):$i(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),$i(w,"TestPingServer: error",!1,E)})}function $i(m,E,w,M,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),M(w)}catch{}}function Dl(){this.g=new yr}function Vs(m,E,w){const M=w||"";try{Vf(m,function(J,se){let Te=J;h(J)&&(Te=En(J)),E.push(M+se+"="+encodeURIComponent(Te))})}catch(J){throw E.push(M+"type="+encodeURIComponent("_badmap")),J}}function oa(m){this.l=m.Ub||null,this.j=m.eb||!1}T(oa,Ns),oa.prototype.g=function(){return new Eo(this.l,this.j)},oa.prototype.i=function(m){return function(){return m}}({});function Eo(m,E){ut.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Eo,ut),n=Eo.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,zs(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||u).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jf(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function jf(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Us(this):zs(this),this.readyState==3&&jf(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Us(this))},n.Qa=function(m){this.g&&(this.response=m,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(m){m.readyState=4,m.l=null,m.j=null,m.v=null,zs(m)}n.setRequestHeader=function(m,E){this.u.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=E.next();return m.join(`\r
`)};function zs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ff(m){let E="";return P(m,function(w,M){E+=M,E+=":",E+=w,E+=`\r
`}),E}function Bn(m,E,w){e:{for(M in w){var M=!1;break e}M=!0}M||(w=Ff(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):Dt(m,E,w))}function kt(m){ut.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(kt,ut);var Zu=/^https?$/i,Pl=["POST","PUT"];n=kt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,E,w,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():it.g(),this.v=this.o?Wr(this.o):Wr(it),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(se){Tp(this,se);return}if(m=w||"",w=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var J in M)w.set(J,M[J]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const se of M.keys())w.set(se,M.get(se));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(w.keys()).find(se=>se.toLowerCase()=="content-type"),J=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Pl,E,void 0))||M||J||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Te]of w)this.g.setRequestHeader(se,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ll(this),this.u=!0,this.g.send(m),this.u=!1}catch(se){Tp(this,se)}};function Tp(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,ec(m),Bs(m)}function ec(m){m.A||(m.A=!0,et(m,"complete"),et(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,et(this,"complete"),et(this,"abort"),Bs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tc(this):this.bb())},n.bb=function(){tc(this)};function tc(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Gi(m)!=4||m.Z()!=2)){if(m.u&&Gi(m)==4)Jt(m.Ea,0,m);else if(et(m,"readystatechange"),Gi(m)==4){m.h=!1;try{const Te=m.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var M;if(M=Te===0){var J=String(m.D).match(kl)[1]||null;!J&&u.self&&u.self.location&&(J=u.self.location.protocol.slice(0,-1)),M=!Zu.test(J?J.toLowerCase():"")}w=M}if(w)et(m,"complete"),et(m,"success");else{m.m=6;try{var se=2<Gi(m)?m.g.statusText:""}catch{se=""}m.l=se+" ["+m.Z()+"]",ec(m)}}finally{Bs(m)}}}}function Bs(m,E){if(m.g){Ll(m);const w=m.g,M=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||et(m,"ready");try{w.onreadystatechange=M}catch{}}}function Ll(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Gi(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Gi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),mi(E)}};function Ep(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function $_(m){const E={};m=(m.g&&2<=Gi(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<m.length;M++){if(L(m[M]))continue;var w=V(m[M]);const J=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const se=E[J]||[];E[J]=se,se.push(w)}N(E,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vl(m,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||E}function nc(m){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vl("baseRetryDelayMs",5e3,m),this.cb=Vl("retryDelaySeedMs",1e4,m),this.Wa=Vl("forwardChannelMaxRetries",2,m),this.wa=Vl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(m&&m.concurrentRequestLimit),this.Da=new Dl,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nc.prototype,n.la=8,n.G=1,n.connect=function(m,E,w,M){Z(0),this.W=m,this.H=E||{},w&&M!==void 0&&(this.H.OSID=w,this.H.OAID=M),this.F=this.X,this.I=kp(this,null,this.W),ic(this)};function Hf(m){if(bp(m),m.G==3){var E=m.U++,w=gi(m.I);if(Dt(w,"SID",m.K),Dt(w,"RID",E),Dt(w,"TYPE","terminate"),Ul(m,w),E=new _t(m,m.j,E),E.L=2,E.v=Ol(gi(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(E.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=E.v,w=!0),w||(E.g=Ip(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ct(E)}xp(m)}function rc(m){m.g&&(zl(m),m.g.cancel(),m.g=null)}function bp(m){rc(m),m.u&&(u.clearTimeout(m.u),m.u=null),sc(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function ic(m){if(!Ps(m.h)&&!m.s){m.s=!0;var E=m.Ga;oe||H(),Ae||(oe(),Ae=!0),qe.add(E,m),m.B=0}}function G_(m,E){return jt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=ge(_(m.Ga,m,E),Gf(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const J=new _t(this,this.j,m);let se=this.o;if(this.S&&(se?(se=k(se),U(se,this.S)):se=this.S),this.m!==null||this.O||(J.H=se,se=null),this.P)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var M=this.i[w];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(E+=M,4096<E){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=Sp(this,J,E),w=gi(this.I),Dt(w,"RID",m),Dt(w,"CVER",22),this.D&&Dt(w,"X-HTTP-Session-Id",this.D),Ul(this,w),se&&(this.O?E="headers="+encodeURIComponent(String(Ff(se)))+"&"+E:this.m&&Bn(w,this.m,se)),yo(this.h,J),this.Ua&&Dt(w,"TYPE","init"),this.P?(Dt(w,"$req",E),Dt(w,"SID","null"),J.T=!0,de(J,w,null)):de(J,w,E),this.G=2}}else this.G==3&&(m?qf(this,m):this.i.length==0||Ps(this.h)||qf(this))};function qf(m,E){var w;E?w=E.l:w=m.U++;const M=gi(m.I);Dt(M,"SID",m.K),Dt(M,"RID",w),Dt(M,"AID",m.T),Ul(m,M),m.m&&m.o&&Bn(M,m.m,m.o),w=new _t(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),E&&(m.i=E.D.concat(m.i)),E=Sp(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),yo(m.h,w),de(w,M,E)}function Ul(m,E){m.H&&P(m.H,function(w,M){Dt(E,M,w)}),m.l&&Vf({},function(w,M){Dt(E,M,w)})}function Sp(m,E,w){w=Math.min(m.i.length,w);var M=m.l?_(m.l.Na,m.l,m):null;e:{var J=m.i;let se=-1;for(;;){const Te=["count="+w];se==-1?0<w?(se=J[0].g,Te.push("ofs="+se)):se=0:Te.push("ofs="+se);let At=!0;for(let Mn=0;Mn<w;Mn++){let Tt=J[Mn].g;const jn=J[Mn].map;if(Tt-=se,0>Tt)se=Math.max(0,J[Mn].g-100),At=!1;else try{Vs(jn,Te,"req"+Tt+"_")}catch{M&&M(jn)}}if(At){M=Te.join("&");break e}}}return m=m.i.splice(0,w),E.D=m,M}function wp(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;oe||H(),Ae||(oe(),Ae=!0),qe.add(E,m),m.v=0}}function $f(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=ge(_(m.Fa,m),Gf(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Rp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=ge(_(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),rc(this),Rp(this))};function zl(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Rp(m){m.g=new _t(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=gi(m.qa);Dt(E,"RID","rpc"),Dt(E,"SID",m.K),Dt(E,"AID",m.T),Dt(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&Dt(E,"TO",m.ja),Dt(E,"TYPE","xmlhttp"),Ul(m,E),m.m&&m.o&&Bn(E,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Ol(gi(E)),w.m=null,w.P=!0,be(w,m)}n.Za=function(){this.C!=null&&(this.C=null,rc(this),$f(this),Z(19))};function sc(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Cp(m,E){var w=null;if(m.g==E){sc(m),zl(m),m.g=null;var M=2}else if(Fi(m.h,E))w=E.D,rr(m.h,E),M=1;else return;if(m.G!=0){if(E.o)if(M==1){w=E.m?E.m.length:0,E=Date.now()-E.F;var J=m.B;M=nr(),et(M,new ce(M,w)),ic(m)}else wp(m);else if(J=E.s,J==3||J==0&&0<E.X||!(M==1&&G_(m,E)||M==2&&$f(m)))switch(w&&0<w.length&&(E=m.h,E.i=E.i.concat(w)),J){case 1:bo(m,5);break;case 4:bo(m,10);break;case 3:bo(m,6);break;default:bo(m,2)}}}function Gf(m,E){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*E}function bo(m,E){if(m.j.info("Error code "+E),E==2){var w=_(m.fb,m),M=m.Xa;const J=!M;M=new bn(M||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Il(M,"https"),Ol(M),J?Ml(M.toString(),w):_s(M.toString(),w)}else Z(2);m.G=0,m.l&&m.l.sa(E),xp(m),bp(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function xp(m){if(m.G=0,m.ka=[],m.l){const E=Lf(m.h);(E.length!=0||m.i.length!=0)&&(S(m.ka,E),S(m.ka,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.ra()}}function kp(m,E,w){var M=w instanceof bn?gi(w):new bn(w);if(M.g!="")E&&(M.g=E+"."+M.g),sa(M,M.s);else{var J=u.location;M=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;var se=new bn(null);M&&Il(se,M),E&&(se.g=E),J&&sa(se,J),w&&(se.l=w),M=se}return w=m.D,E=m.ya,w&&E&&Dt(M,w,E),Dt(M,"VER",m.la),Ul(m,M),M}function Ip(m,E,w){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new kt(new oa({eb:w})):new kt(m.pa),E.Ha(m.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Op(){}n=Op.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oc(){}oc.prototype.g=function(m,E){return new Lr(m,E)};function Lr(m,E){ut.call(this),this.g=new nc(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!L(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!L(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new js(this)}T(Lr,ut),Lr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lr.prototype.close=function(){Hf(this.g)},Lr.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=En(m),m=w);E.i.push(new _r(E.Ya++,m)),E.G==3&&ic(E)},Lr.prototype.N=function(){this.g.l=null,delete this.j,Hf(this.g),delete this.g,Lr.aa.N.call(this)};function Np(m){er.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const w in E){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Np,er);function Mp(){Ms.call(this),this.status=1}T(Mp,Ms);function js(m){this.g=m}T(js,Op),js.prototype.ua=function(){et(this.g,"a")},js.prototype.ta=function(m){et(this.g,new Np(m))},js.prototype.sa=function(m){et(this.g,new Mp)},js.prototype.ra=function(){et(this.g,"b")},oc.prototype.createWebChannel=oc.prototype.g,Lr.prototype.send=Lr.prototype.o,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,dM=function(){return new oc},hM=function(){return nr()},fM=tr,ST={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,cg=Re,Fe.COMPLETE="complete",cM=Fe,ji.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,ed=ji,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,uM=kt}).apply(typeof Vm<"u"?Vm:typeof self<"u"?self:typeof window<"u"?window:{});const ix="@firebase/firestore",sx="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new e_("@firebase/firestore");function zc(){return Nu.logLevel}function Ie(n,...e){if(Nu.logLevel<=gt.DEBUG){const t=e.map(eb);Nu.debug(`Firestore (${If}): ${n}`,...t)}}function ta(n,...e){if(Nu.logLevel<=gt.ERROR){const t=e.map(eb);Nu.error(`Firestore (${If}): ${n}`,...t)}}function pf(n,...e){if(Nu.logLevel<=gt.WARN){const t=e.map(eb);Nu.warn(`Firestore (${If}): ${n}`,...t)}}function eb(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pM(n,r,t)}function pM(n,e,t){let r=`FIRESTORE (${If}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ta(r),new Error(r)}function It(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||pM(e,i,r)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(br.UNAUTHENTICATED))}shutdown(){}}class uF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cF{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new Yo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yo,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yo)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new mM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class fF{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hF{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new fF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ox{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const r=s=>{s.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ox(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ox(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=pF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function wT(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return lt(r,i);{const s=gM(),a=mF(s.encode(ax(n,t)),s.encode(ax(e,t)));return a!==0?a:lt(r,i)}}t+=r>65535?2:1}return lt(n.length,e.length)}function ax(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mF(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function mf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=-62135596800,ux=1e6;class Un{static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ux);return new Un(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lx)throw new Be(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ux}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Un(0,0))}static max(){return new Xe(new Un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="__name__";class Js{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Js.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Js.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return lt(e.length,t.length)}static compareSegments(e,t){const r=Js.isNumericId(e),i=Js.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Js.extractNumericId(e).compare(Js.extractNumericId(t)):wT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return el.fromString(e.substring(4,e.length-2))}}class Qt extends Js{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const gF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends Js{construct(e,t,r){return new hr(e,t,r)}static isValidIdentifier(e){return gF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cx}static keyField(){return new hr([cx])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Be(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Be(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Be(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new Be(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Qt.fromString(e))}static fromName(e){return new $e(Qt.fromString(e).popFirst(5))}static empty(){return new $e(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=-1;function yF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Xe.fromTimestamp(r===1e9?new Un(t+1,0):new Un(t,r));return new fl(i,$e.empty(),e)}function _F(n){return new fl(n.readTime,n.key,Vd)}class fl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fl(Xe.min(),$e.empty(),Vd)}static max(){return new fl(Xe.max(),$e.empty(),Vd)}}function vF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$e.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==AF)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&t()},c=>r(c))}),a=!0,s===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const h=c;t(e[h]).next(p=>{a[h]=p,++u,u===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new he((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function EF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Nf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}t_.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=-1;function n_(n){return n==null}function jg(n){return n===0&&1/n==-1/0}function bF(n){return typeof n=="number"&&Number.isInteger(n)&&!jg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="";function SF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fx(e)),e=wF(n.get(t),e);return fx(e)}function wF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case _M:t+="";break;default:t+=s}}return t}function fx(n){return n+_M+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function El(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Um(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Um(this.root,e,this.comparator,!1)}getReverseIterator(){return new Um(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Um(this.root,e,this.comparator,!0)}}class Um{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ur(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dx(this.data.getIterator())}getIteratorFrom(e){return new dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new zn(hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AM("Invalid base64 string: "+s):s}}(e);return new pr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const RF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(n){if(It(!!n,39018),typeof n=="string"){let e=0;const t=RF.exec(n);if(It(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vn(n.seconds),nanos:vn(n.nanos)}}function vn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function dl(n){return typeof n=="string"?pr.fromBase64String(n):pr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="server_timestamp",EM="__type__",bM="__previous_value__",SM="__local_write_time__";function nb(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[EM])===null||t===void 0?void 0:t.stringValue)===TM}function r_(n){const e=n.mapValue.fields[bM];return nb(e)?r_(e):e}function Ud(n){const e=hl(n.mapValue.fields[SM].timestampValue);return new Un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,t,r,i,s,a,u,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const Fg="(default)";class zd{constructor(e,t){this.projectId=e,this.database=t||Fg}static empty(){return new zd("","")}get isDefaultDatabase(){return this.database===Fg}isEqual(e){return e instanceof zd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="__type__",xF="__max__",zm={mapValue:{}},RM="__vector__",Hg="value";function pl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nb(n)?4:IF(n)?9007199254740991:kF(n)?10:11:Ye(28295,{value:n})}function fo(n,e){if(n===e)return!0;const t=pl(n);if(t!==pl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ud(n).isEqual(Ud(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=hl(i.timestampValue),u=hl(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return dl(i.bytesValue).isEqual(dl(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return vn(i.geoPointValue.latitude)===vn(s.geoPointValue.latitude)&&vn(i.geoPointValue.longitude)===vn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vn(i.integerValue)===vn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=vn(i.doubleValue),u=vn(s.doubleValue);return a===u?jg(a)===jg(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return mf(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(hx(a)!==hx(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!fo(a[c],u[c])))return!1;return!0}(n,e);default:return Ye(52216,{left:n})}}function Bd(n,e){return(n.values||[]).find(t=>fo(t,e))!==void 0}function gf(n,e){if(n===e)return 0;const t=pl(n),r=pl(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(s,a){const u=vn(s.integerValue||s.doubleValue),c=vn(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return px(n.timestampValue,e.timestampValue);case 4:return px(Ud(n),Ud(e));case 5:return wT(n.stringValue,e.stringValue);case 6:return function(s,a){const u=dl(s),c=dl(a);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=lt(u[h],c[h]);if(p!==0)return p}return lt(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const u=lt(vn(s.latitude),vn(a.latitude));return u!==0?u:lt(vn(s.longitude),vn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mx(n.arrayValue,e.arrayValue);case 10:return function(s,a){var u,c,h,p;const g=s.fields||{},_=a.fields||{},A=(u=g[Hg])===null||u===void 0?void 0:u.arrayValue,T=(c=_[Hg])===null||c===void 0?void 0:c.arrayValue,b=lt(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:mx(A,T)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===zm.mapValue&&a===zm.mapValue)return 0;if(s===zm.mapValue)return 1;if(a===zm.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),h=a.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=wT(c[g],p[g]);if(_!==0)return _;const A=gf(u[c[g]],h[p[g]]);if(A!==0)return A}return lt(c.length,p.length)}(n.mapValue,e.mapValue);default:throw Ye(23264,{Pe:t})}}function px(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=hl(n),r=hl(e),i=lt(t.seconds,r.seconds);return i!==0?i:lt(t.nanos,r.nanos)}function mx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=gf(t[i],r[i]);if(s)return s}return lt(t.length,r.length)}function yf(n){return RT(n)}function RT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=hl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return dl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=RT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${RT(t.fields[a])}`;return i+"}"}(n.mapValue):Ye(61005,{value:n})}function fg(n){switch(pl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=r_(n);return e?16+fg(e):16;case 5:return 2*n.stringValue.length;case 6:return dl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+fg(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return El(r.fields,(s,a)=>{i+=s.length+fg(a)}),i}(n.mapValue);default:throw Ye(13486,{value:n})}}function CT(n){return!!n&&"integerValue"in n}function rb(n){return!!n&&"arrayValue"in n}function gx(n){return!!n&&"nullValue"in n}function yx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hg(n){return!!n&&"mapValue"in n}function kF(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[wM])===null||t===void 0?void 0:t.stringValue)===RM}function fd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return El(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=fd(a):i.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());hg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){El(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ni(fd(this.value))}}function CM(n){const e=[];return El(n.fields,(t,r)=>{const i=new hr([t]);if(hg(r)){const s=CM(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Sr(e,0,Xe.min(),Xe.min(),Xe.min(),ni.empty(),0)}static newFoundDocument(e,t,r,i){return new Sr(e,1,t,Xe.min(),r,i,0)}static newNoDocument(e,t){return new Sr(e,2,t,Xe.min(),Xe.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new Sr(e,3,t,Xe.min(),Xe.min(),ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t){this.position=e,this.inclusive=t}}function _x(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=$e.comparator($e.fromName(a.referenceValue),t.key):r=gf(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t="asc"){this.field=e,this.dir=t}}function OF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{}class Vn extends xM{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MF(e,t,r):t==="array-contains"?new LF(e,r):t==="in"?new VF(e,r):t==="not-in"?new UF(e,r):t==="array-contains-any"?new zF(e,r):new Vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new DF(e,r):new PF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gf(t,this.value)):t!==null&&pl(this.value)===pl(t)&&this.matchesComparison(gf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ho extends xM{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ho(e,t)}matches(e){return kM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function kM(n){return n.op==="and"}function IM(n){return NF(n)&&kM(n)}function NF(n){for(const e of n.filters)if(e instanceof ho)return!1;return!0}function xT(n){if(n instanceof Vn)return n.field.canonicalString()+n.op.toString()+yf(n.value);if(IM(n))return n.filters.map(e=>xT(e)).join(",");{const e=n.filters.map(t=>xT(t)).join(",");return`${n.op}(${e})`}}function OM(n,e){return n instanceof Vn?function(r,i){return i instanceof Vn&&r.op===i.op&&r.field.isEqual(i.field)&&fo(r.value,i.value)}(n,e):n instanceof ho?function(r,i){return i instanceof ho&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&OM(a,i.filters[u]),!0):!1}(n,e):void Ye(19439)}function NM(n){return n instanceof Vn?function(t){return`${t.field.canonicalString()} ${t.op} ${yf(t.value)}`}(n):n instanceof ho?function(t){return t.op.toString()+" {"+t.getFilters().map(NM).join(" ,")+"}"}(n):"Filter"}class MF extends Vn{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class DF extends Vn{constructor(e,t){super(e,"in",t),this.keys=MM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PF extends Vn{constructor(e,t){super(e,"not-in",t),this.keys=MM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class LF extends Vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rb(t)&&Bd(t.arrayValue,this.value)}}class VF extends Vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bd(this.value.arrayValue,t)}}class UF extends Vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bd(this.value.arrayValue,t)}}class zF extends Vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Ie=null}}function Ax(n,e=null,t=[],r=[],i=null,s=null,a=null){return new BF(n,e,t,r,i,s,a)}function ib(n){const e=Ze(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),n_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yf(r)).join(",")),e.Ie=t}return e.Ie}function sb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vx(n.startAt,e.startAt)&&vx(n.endAt,e.endAt)}function kT(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function jF(n,e,t,r,i,s,a,u){return new i_(n,e,t,r,i,s,a,u)}function ob(n){return new i_(n)}function Tx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function FF(n){return n.collectionGroup!==null}function hd(n){const e=Ze(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new zn(hr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new $g(s,r))}),t.has(hr.keyField().canonicalString())||e.Ee.push(new $g(hr.keyField(),r))}return e.Ee}function oo(n){const e=Ze(n);return e.de||(e.de=HF(e,hd(n))),e.de}function HF(n,e){if(n.limitType==="F")return Ax(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $g(i.field,s)});const t=n.endAt?new qg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qg(n.startAt.position,n.startAt.inclusive):null;return Ax(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function IT(n,e,t){return new i_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function s_(n,e){return sb(oo(n),oo(e))&&n.limitType===e.limitType}function DM(n){return`${ib(oo(n))}|lt:${n.limitType}`}function Bc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>NM(i)).join(", ")}]`),n_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>yf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>yf(i)).join(",")),`Target(${r})`}(oo(n))}; limitType=${n.limitType})`}function o_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of hd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,c){const h=_x(a,u,c);return a.inclusive?h<=0:h<0}(r.startAt,hd(r),i)||r.endAt&&!function(a,u,c){const h=_x(a,u,c);return a.inclusive?h>=0:h>0}(r.endAt,hd(r),i))}(n,e)}function qF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PM(n){return(e,t)=>{let r=!1;for(const i of hd(n)){const s=$F(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $F(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(s,a,u){const c=a.data.field(s),h=u.data.field(s);return c!==null&&h!==null?gf(c,h):Ye(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){El(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=new sn($e.comparator);function na(){return GF}const LM=new sn($e.comparator);function td(...n){let e=LM;for(const t of n)e=e.insert(t.key,t);return e}function VM(n){let e=LM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function du(){return dd()}function UM(){return dd()}function dd(){return new Wu(n=>n.toString(),(n,e)=>n.isEqual(e))}const KF=new sn($e.comparator),WF=new zn($e.comparator);function yt(...n){let e=WF;for(const t of n)e=e.add(t);return e}const YF=new zn(lt);function QF(){return YF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jg(e)?"-0":e}}function zM(n){return{integerValue:""+n}}function XF(n,e){return bF(e)?zM(e):ab(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this._=void 0}}function JF(n,e,t){return n instanceof jd?function(i,s){const a={fields:{[EM]:{stringValue:TM},[SM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nb(s)&&(s=r_(s)),s&&(a.fields[bM]=s),{mapValue:a}}(t,e):n instanceof Fd?jM(n,e):n instanceof Hd?FM(n,e):function(i,s){const a=BM(i,s),u=Ex(a)+Ex(i.Re);return CT(a)&&CT(i.Re)?zM(u):ab(i.serializer,u)}(n,e)}function ZF(n,e,t){return n instanceof Fd?jM(n,e):n instanceof Hd?FM(n,e):t}function BM(n,e){return n instanceof Gg?function(r){return CT(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class jd extends a_{}class Fd extends a_{constructor(e){super(),this.elements=e}}function jM(n,e){const t=HM(e);for(const r of n.elements)t.some(i=>fo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Hd extends a_{constructor(e){super(),this.elements=e}}function FM(n,e){let t=HM(e);for(const r of n.elements)t=t.filter(i=>!fo(i,r));return{arrayValue:{values:t}}}class Gg extends a_{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Ex(n){return vn(n.integerValue||n.doubleValue)}function HM(n){return rb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t){this.field=e,this.transform=t}}function t6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Fd&&i instanceof Fd||r instanceof Hd&&i instanceof Hd?mf(r.elements,i.elements,fo):r instanceof Gg&&i instanceof Gg?fo(r.Re,i.Re):r instanceof jd&&i instanceof jd}(n.transform,e.transform)}class n6{constructor(e,t){this.version=e,this.transformResults=t}}class ao{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ao}static exists(e){return new ao(void 0,e)}static updateTime(e){return new ao(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class l_{}function qM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new GM(n.key,ao.none()):new lp(n.key,n.data,ao.none());{const t=n.data,r=ni.empty();let i=new zn(hr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new bl(n.key,r,new Oi(i.toArray()),ao.none())}}function r6(n,e,t){n instanceof lp?function(i,s,a){const u=i.value.clone(),c=Sx(i.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof bl?function(i,s,a){if(!dg(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=Sx(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll($M(i)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function pd(n,e,t,r){return n instanceof lp?function(s,a,u,c){if(!dg(s.precondition,a))return u;const h=s.value.clone(),p=wx(s.fieldTransforms,c,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof bl?function(s,a,u,c){if(!dg(s.precondition,a))return u;const h=wx(s.fieldTransforms,c,a),p=a.data;return p.setAll($M(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,a,u){return dg(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function i6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=BM(r.transform,i||null);s!=null&&(t===null&&(t=ni.empty()),t.set(r.field,s))}return t||null}function bx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mf(r,i,(s,a)=>t6(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class lp extends l_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bl extends l_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $M(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Sx(n,e,t){const r=new Map;It(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,ZF(a,u,t[i]))}return r}function wx(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,JF(s,a,e))}return r}class GM extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s6 extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&r6(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=UM();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const c=qM(a,u);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yt())}isEqual(e){return this.batchId===e.batchId&&mf(this.mutations,e.mutations,(t,r)=>bx(t,r))&&mf(this.baseMutations,e.baseMutations,(t,r)=>bx(t,r))}}class lb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return KF}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new lb(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,bt;function u6(n){switch(n){case pe.OK:return Ye(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function KM(n){if(n===void 0)return ta("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Rn.OK:return pe.OK;case Rn.CANCELLED:return pe.CANCELLED;case Rn.UNKNOWN:return pe.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return pe.INTERNAL;case Rn.UNAVAILABLE:return pe.UNAVAILABLE;case Rn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Rn.NOT_FOUND:return pe.NOT_FOUND;case Rn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Rn.ABORTED:return pe.ABORTED;case Rn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Rn.DATA_LOSS:return pe.DATA_LOSS;default:return Ye(39323,{code:n})}}(bt=Rn||(Rn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new el([4294967295,4294967295],0);function Rx(n){const e=gM().encode(n),t=new lM;return t.update(e),new Uint8Array(t.digest())}function Cx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new el([t,r],0),new el([i,s],0)]}class ub{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nd(`Invalid padding: ${t}`);if(r<0)throw new nd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nd(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=el.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(el.fromNumber(r)));return i.compare(c6)===1&&(i=new el([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Rx(e),[r,i]=Cx(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);if(!this.be(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new ub(s,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.pe===0)return;const t=Rx(e),[r,i]=Cx(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,up.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new u_(Xe.min(),i,new sn(lt),na(),yt())}}class up{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new up(r,t,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class WM{constructor(e,t){this.targetId=e,this.Ce=t}}class YM{constructor(e,t,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class xx{constructor(){this.Fe=0,this.Me=kx(),this.xe=pr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=yt(),t=yt(),r=yt();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye(38017,{changeType:s})}}),new up(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=kx()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,It(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class f6{constructor(e){this.ze=e,this.je=new Map,this.He=na(),this.Je=Bm(),this.Ye=Bm(),this.Ze=new sn(lt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(kT(s))if(r===0){const a=new $e(s.path);this.tt(t,a,Sr.newNoDocument(a,Xe.min()))}else It(r===1,20013,{expectedCount:r});else{const a=this.ut(t);if(a!==r){const u=this.ct(e),c=u?this.lt(u,e,a):1;if(c!==0){this.st(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=dl(r).toUint8Array()}catch(c){if(c instanceof AM)return pf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new ub(a,i,s)}catch(c){return pf(c instanceof nd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.pe===0?null:u}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.ze.Pt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,a)=>{const u=this._t(a);if(u){if(s.current&&kT(u.target)){const c=new $e(u.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,Sr.newNoDocument(c,e))}s.Le&&(t.set(a,s.qe()),s.Qe())}});let r=yt();this.Ye.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const h=this._t(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const i=new u_(e,t,this.Ze,this.He,r);return this.He=na(),this.Je=Bm(),this.Ye=Bm(),this.Ze=new sn(lt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new xx,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new zn(lt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new zn(lt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new xx),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Bm(){return new sn($e.comparator)}function kx(){return new sn($e.comparator)}const h6={asc:"ASCENDING",desc:"DESCENDING"},d6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p6={and:"AND",or:"OR"};class m6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function OT(n,e){return n.useProto3Json||n_(e)?e:{value:e}}function Kg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function g6(n,e){return Kg(n,e.toTimestamp())}function lo(n){return It(!!n,49232),Xe.fromTimestamp(function(t){const r=hl(t);return new Un(r.seconds,r.nanos)}(n))}function cb(n,e){return NT(n,e).canonicalString()}function NT(n,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function XM(n){const e=Qt.fromString(n);return It(nD(e),10190,{key:e.toString()}),e}function MT(n,e){return cb(n.databaseId,e.path)}function aA(n,e){const t=XM(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(ZM(t))}function JM(n,e){return cb(n.databaseId,e)}function y6(n){const e=XM(n);return e.length===4?Qt.emptyPath():ZM(e)}function DT(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZM(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ix(n,e,t){return{name:MT(n,e),fields:t.value.mapValue.fields}}function _6(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ye(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(It(p===void 0||typeof p=="string",58123),pr.fromBase64String(p||"")):(It(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),pr.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(h){const p=h.code===void 0?pe.UNKNOWN:KM(h.code);return new Be(p,h.message||"")}(a);t=new YM(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=aA(n,r.document.name),s=lo(r.document.updateTime),a=r.document.createTime?lo(r.document.createTime):Xe.min(),u=new ni({mapValue:{fields:r.document.fields}}),c=Sr.newFoundDocument(i,s,a,u),h=r.targetIds||[],p=r.removedTargetIds||[];t=new pg(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=aA(n,r.document),s=r.readTime?lo(r.readTime):Xe.min(),a=Sr.newNoDocument(i,s),u=r.removedTargetIds||[];t=new pg([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=aA(n,r.document),s=r.removedTargetIds||[];t=new pg([],s,i,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new l6(i,s),u=r.targetId;t=new WM(u,a)}}return t}function v6(n,e){let t;if(e instanceof lp)t={update:Ix(n,e.key,e.value)};else if(e instanceof GM)t={delete:MT(n,e.key)};else if(e instanceof bl)t={update:Ix(n,e.key,e.data),updateMask:x6(e.fieldMask)};else{if(!(e instanceof s6))return Ye(16599,{ft:e.type});t={verify:MT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const u=a.transform;if(u instanceof jd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Fd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Hd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Gg)return{fieldPath:a.field.canonicalString(),increment:u.Re};throw Ye(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:g6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ye(27497)}(n,e.precondition)),t}function A6(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map(t=>function(i,s){let a=i.updateTime?lo(i.updateTime):lo(s);return a.isEqual(Xe.min())&&(a=lo(s)),new n6(a,i.transformResults||[])}(t,e))):[]}function T6(n,e){return{documents:[JM(n,e.path)]}}function E6(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=JM(n,i);const s=function(h){if(h.length!==0)return tD(ho.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:jc(_.field),direction:w6(_.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=OT(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:t,parent:i}}function b6(n){let e=y6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(g){const _=eD(g);return _ instanceof ho&&IM(_)?_.getFilters():[_]}(t.where));let a=[];t.orderBy&&(a=function(g){return g.map(_=>function(T){return new $g(Fc(T.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(t.orderBy));let u=null;t.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,n_(_)?null:_}(t.limit));let c=null;t.startAt&&(c=function(g){const _=!!g.before,A=g.values||[];return new qg(A,_)}(t.startAt));let h=null;return t.endAt&&(h=function(g){const _=!g.before,A=g.values||[];return new qg(A,_)}(t.endAt)),jF(e,i,a,s,u,"F",c,h)}function S6(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fc(t.unaryFilter.field);return Vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fc(t.unaryFilter.field);return Vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fc(t.unaryFilter.field);return Vn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fc(t.unaryFilter.field);return Vn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(n):n.fieldFilter!==void 0?function(t){return Vn.create(Fc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ho.create(t.compositeFilter.filters.map(r=>eD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(t.compositeFilter.op))}(n):Ye(30097,{filter:n})}function w6(n){return h6[n]}function R6(n){return d6[n]}function C6(n){return p6[n]}function jc(n){return{fieldPath:n.canonicalString()}}function Fc(n){return hr.fromServerFormat(n.fieldPath)}function tD(n){return n instanceof Vn?function(t){if(t.op==="=="){if(yx(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NAN"}};if(gx(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yx(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NOT_NAN"}};if(gx(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jc(t.field),op:R6(t.op),value:t.value}}}(n):n instanceof ho?function(t){const r=t.getFilters().map(i=>tD(i));return r.length===1?r[0]:{compositeFilter:{op:C6(t.op),filters:r}}}(n):Ye(54877,{filter:n})}function x6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,t,r,i,s=Xe.min(),a=Xe.min(),u=pr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.wt=e}}function I6(n){const e=b6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?IT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.yn=new N6}addToCollectionParentIndex(e,t){return this.yn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(fl.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(fl.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class N6{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(Qt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rD=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(rD,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new _f(0)}static ir(){return new _f(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="LruGarbageCollector",M6=1048576;function Mx([n,e],[t,r]){const i=lt(n,t);return i===0?lt(e,r):i}class D6{constructor(e){this.cr=e,this.buffer=new zn(Mx),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Mx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Ie(Nx,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Nf(t)?Ie(Nx,"Ignoring IndexedDB error during garbage collection: ",t):await Of(t)}await this.Ir(3e5)})}}class L6{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return he.resolve(t_.le);const r=new D6(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Ox)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ox):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,a,u,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),zc()<=gt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function V6(n,e){return new L6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.changes=new Wu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&pd(r.mutation,i,Oi.empty(),Un.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yt()){const i=du();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=td();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=du();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let s=na();const a=dd(),u=function(){return dd()}();return t.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof bl)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),pd(p.mutation,h,p.mutation.getFieldMask(),Un.now())):a.set(h.key,Oi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>a.set(h,p)),t.forEach((h,p)=>{var g;return u.set(h,new z6(p,(g=a.get(h))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){const r=dd();let i=new sn((a,u)=>a-u),s=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const u of a)u.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let p=r.get(c)||Oi.empty();p=u.applyToLocalView(h,p),r.set(c,p);const g=(i.get(u.batchId)||yt()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,g=UM();p.forEach(_=>{if(!s.has(_)){const A=qM(t.get(_),r.get(_));A!==null&&g.set(_,A),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return he.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return $e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):he.resolve(du());let u=Vd,c=s;return a.next(h=>he.forEach(h,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?he.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,yt())).next(p=>({batchId:u,changes:VM(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let i=td();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=td();return this.indexManager.getCollectionParents(e,s).next(u=>he.forEach(u,c=>{const h=function(g,_){return new i_(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((c,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,Sr.newInvalidDocument(p)))});let u=td();return a.forEach((c,h)=>{const p=s.get(c);p!==void 0&&pd(p.mutation,h,Oi.empty(),Un.now()),o_(t,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return he.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:lo(i.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:I6(i.bundledQuery),readTime:lo(i.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.overlays=new sn($e.comparator),this.Or=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=du();return he.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=du(),s=t.length+1,a=new $e(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new sn((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=du(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=du(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=i)););return he.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new a6(t,r));let s=this.Or.get(t);s===void 0&&(s=yt(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.Nr=new zn($n.Br),this.Lr=new zn($n.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new $n(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new $n(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new $e(new Qt([])),r=new $n(t,e),i=new $n(t,e+1),s=[];return this.Lr.forEachInRange([r,i],a=>{this.Qr(a),s.push(a.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new $e(new Qt([])),r=new $n(t,e),i=new $n(t,e+1);let s=yt();return this.Lr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new $n(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $n{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return $e.comparator(e.key,t.key)||lt(e.Gr,t.Gr)}static kr(e,t){return lt(e.Gr,t.Gr)||$e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new zn($n.Br)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new o6(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.zr=this.zr.add(new $n(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return he.resolve(a)}lookupMutationBatch(e,t){return he.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?tb:this.Jn-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $n(t,0),i=new $n(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],a=>{const u=this.jr(a.Gr);s.push(u)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(lt);return t.forEach(i=>{const s=new $n(i,0),a=new $n(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,a],u=>{r=r.add(u.Gr)})}),he.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;$e.isDocumentKey(s)||(s=s.child(""));const a=new $n(new $e(s),0);let u=new zn(lt);return this.zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.Gr)),!0)},a),he.resolve(this.Jr(u))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){It(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return he.forEach(t.mutations,i=>{const s=new $n(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new $n(t,0),i=this.zr.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.Zr=e,this.docs=function(){return new sn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(t))}getEntries(e,t){let r=na();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Sr.newInvalidDocument(i))}),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=na();const a=t.path,u=new $e(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||vF(_F(p),r)<=0||(i.has(p.key)||o_(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ye(9500)}Xr(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new G6(this)}getSize(e){return he.resolve(this.size)}}class G6 extends U6{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.persistence=e,this.ei=new Wu(t=>ib(t),sb),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ti=0,this.ni=new fb,this.targetCount=0,this.ri=_f.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),he.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new _f(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.ar(t),he.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ei.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),he.waitFor(s).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),he.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t){this.ii={},this.overlays={},this.si=new t_(0),this.oi=!1,this.oi=!0,this._i=new H6,this.referenceDelegate=e(this),this.ai=new K6(this),this.indexManager=new O6,this.remoteDocumentCache=function(i){return new $6(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new k6(t),this.ci=new j6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new F6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new q6(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new W6(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return he.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class W6 extends TF{constructor(e){super(),this.currentSequenceNumber=e}}class hb{constructor(e){this.persistence=e,this.Ti=new fb,this.Ii=null}static Ei(e){return new hb(e)}get di(){if(this.Ii)return this.Ii;throw Ye(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.di,r=>{const i=$e.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,Xe.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return he.or([()=>he.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Wg{constructor(e,t){this.persistence=e,this.Ri=new Wu(r=>SF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=V6(this,t)}static Ei(e,t){return new Wg(e,t)}li(){}hi(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return he.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?he.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,a=>this.gr(e,a,t).next(u=>{u||(r++,s.removeEntry(a,Xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),he.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fg(e.data.value)),t}gr(e,t,r){return he.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=yt(),i=yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new db(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return FB()?8:EF(kr())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Y6;return this.fs(e,t,a).next(u=>{if(s.result=u,this.Is)return this.gs(e,t,a,u.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(zc()<=gt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Bc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),he.resolve()):(zc()<=gt.DEBUG&&Ie("QueryEngine","Query:",Bc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(zc()<=gt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Bc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oo(t))):he.resolve())}Rs(e,t){if(Tx(t))return he.resolve(null);let r=oo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=IT(t,null,"F"),r=oo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=yt(...s);return this.As.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ps(t,u);return this.ys(t,h,a,c.readTime)?this.Rs(e,IT(t,null,"F")):this.ws(e,h,t,c)}))})))}Vs(e,t,r,i){return Tx(t)||i.isEqual(Xe.min())?he.resolve(null):this.As.getDocuments(e,r).next(s=>{const a=this.ps(t,s);return this.ys(t,a,r,i)?he.resolve(null):(zc()<=gt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bc(t)),this.ws(e,a,t,yF(i,Vd)).next(u=>u))})}ps(e,t){let r=new zn(PM(e));return t.forEach((i,s)=>{o_(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return zc()<=gt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Bc(t)),this.As.getDocumentsMatchingQuery(e,t,fl.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="LocalStore",X6=3e8;class J6{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new sn(lt),this.Ds=new Wu(s=>ib(s),sb),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B6(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function Z6(n,e,t,r){return new J6(n,e,t,r)}async function sD(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let c=yt();for(const h of i){a.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(r,c).next(h=>({Ms:h,removedBatchIds:a,addedBatchIds:u}))})})}function e9(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const g=h.batch,_=g.keys();let A=he.resolve();return _.forEach(T=>{A=A.next(()=>p.getEntry(c,T)).next(b=>{const S=h.docVersions.get(T);It(S!==null,48541),b.version.compareTo(S)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),p.addEntry(b)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=yt();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oD(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function t9(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const u=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;u.push(t.ai.removeMatchingKeys(s,p.removedDocuments,g).next(()=>t.ai.addMatchingKeys(s,p.addedDocuments,g)));let A=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(pr.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),i=i.insert(g,A),function(b,S,C){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=X6?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(_,A,p)&&u.push(t.ai.updateTargetData(s,A))});let c=na(),h=yt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(n9(s,a,e.documentUpdates).next(p=>{c=p.xs,h=p.Os})),!r.isEqual(Xe.min())){const p=t.ai.getLastRemoteSnapshotVersion(s).next(g=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return he.waitFor(u).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(t.Ss=i,s))}function n9(n,e,t){let r=yt(),i=yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=na();return t.forEach((u,c)=>{const h=s.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Xe.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):Ie(pb,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{xs:a,Os:i}})}function r9(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tb),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i9(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,he.resolve(i)):t.ai.allocateTargetId(r).next(a=>(i=new $a(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function PT(n,e,t){const r=Ze(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Nf(a))throw a;Ie(pb,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function Dx(n,e,t){const r=Ze(n);let i=Xe.min(),s=yt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,p){const g=Ze(c),_=g.Ds.get(p);return _!==void 0?he.resolve(g.Ss.get(_)):g.ai.getTargetData(h,p)}(r,a,oo(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>r.bs.getDocumentsMatchingQuery(a,e,t?i:Xe.min(),t?s:yt())).next(u=>(s9(r,qF(e),u),{documents:u,Ns:s})))}function s9(n,e,t){let r=n.vs.get(e)||Xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class Px{constructor(){this.activeTargetIds=QF()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o9{constructor(){this.So=new Px,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Px,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="ConnectivityMonitor";class Vx{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ie(Lx,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ie(Lx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm=null;function LT(){return jm===null?jm=function(){return 268435456+Math.round(2147483648*Math.random())}():jm++,"0x"+jm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="RestConnection",l9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u9{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Fg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const a=LT(),u=this.$o(e,t.toUriEncodedString());Ie(lA,`Sending RPC '${e}' ${a}:`,u,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(c,i,s),this.Ko(e,u,c,r).then(h=>(Ie(lA,`Received RPC '${e}' ${a}: `,h),h),h=>{throw pf(lA,`RPC '${e}' ${a} failed with error: `,h,"url: ",u,"request:",r),h})}Wo(e,t,r,i,s,a){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+If}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=l9[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class f9 extends u9{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=LT();return new Promise((a,u)=>{const c=new uM;c.setWithCredentials(!0),c.listenOnce(cM.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cg.NO_ERROR:const p=c.getResponseJson();Ie(Tr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case cg.TIMEOUT:Ie(Tr,`RPC '${e}' ${s} timed out`),u(new Be(pe.DEADLINE_EXCEEDED,"Request time out"));break;case cg.HTTP_ERROR:const g=c.getStatus();if(Ie(Tr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const T=function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(C)>=0?C:pe.UNKNOWN}(A.status);u(new Be(T,A.message))}else u(new Be(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Be(pe.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{s_:e,streamId:s,o_:c.getLastErrorCode(),__:c.getLastError()})}}finally{Ie(Tr,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Ie(Tr,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",h,r,15)})}a_(e,t,r){const i=LT(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=dM(),u=hM(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=s.join("");Ie(Tr,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=a.createWebChannel(p,c);let _=!1,A=!1;const T=new c9({Go:S=>{A?Ie(Tr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(Ie(Tr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Ie(Tr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},zo:()=>g.close()}),b=(S,C,L)=>{S.listen(C,z=>{try{L(z)}catch(q){setTimeout(()=>{throw q},0)}})};return b(g,ed.EventType.OPEN,()=>{A||(Ie(Tr,`RPC '${e}' stream ${i} transport opened.`),T.t_())}),b(g,ed.EventType.CLOSE,()=>{A||(A=!0,Ie(Tr,`RPC '${e}' stream ${i} transport closed`),T.r_())}),b(g,ed.EventType.ERROR,S=>{A||(A=!0,pf(Tr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),T.r_(new Be(pe.UNAVAILABLE,"The operation could not be completed")))}),b(g,ed.EventType.MESSAGE,S=>{var C;if(!A){const L=S.data[0];It(!!L,16349);const z=L,q=(z==null?void 0:z.error)||((C=z[0])===null||C===void 0?void 0:C.error);if(q){Ie(Tr,`RPC '${e}' stream ${i} received error:`,q);const B=q.status;let P=function(x){const U=Rn[x];if(U!==void 0)return KM(U)}(B),N=q.message;P===void 0&&(P=pe.INTERNAL,N="Unknown error status: "+B+" with message "+q.message),A=!0,T.r_(new Be(P,N)),g.close()}else Ie(Tr,`RPC '${e}' stream ${i} received:`,L),T.i_(L)}}),b(u,fM.STAT_EVENT,S=>{S.stat===ST.PROXY?Ie(Tr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===ST.NOPROXY&&Ie(Tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.n_()},0),T}}function uA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(n){return new m6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="PersistentStream";class lD{constructor(e,t,r,i,s,a,u,c){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new aD(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(ta(t.toString()),ta("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new Be(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Ie(Ux,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Ie(Ux,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class h9 extends lD{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=_6(this.serializer,e),r=function(s){if(!("targetChange"in s))return Xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Xe.min():a.readTime?lo(a.readTime):Xe.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=DT(this.serializer),t.addTarget=function(s,a){let u;const c=a.target;if(u=kT(c)?{documents:T6(s,c)}:{query:E6(s,c).gt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=QM(s,a.resumeToken);const h=OT(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Xe.min())>0){u.readTime=Kg(s,a.snapshotVersion.toTimestamp());const h=OT(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=S6(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=DT(this.serializer),t.removeTarget=e,this.F_(t)}}class d9 extends lD{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=A6(e.writeResults,e.commitTime),r=lo(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=DT(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>v6(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{}class m9 extends p9{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Be(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Qo(e,NT(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(pe.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Wo(e,NT(t,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Be(pe.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class g9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ta(t),this.ea=!1):Ie("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu="RemoteStore";class y9{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(a=>{r.enqueueAndForget(async()=>{Yu(this)&&(Ie(Mu,"Restarting streams for network reachability change."),await async function(c){const h=Ze(c);h.aa.add(4),await cp(h),h.la.set("Unknown"),h.aa.delete(4),await f_(h)}(this))})}),this.la=new g9(r,i)}}async function f_(n){if(Yu(n))for(const e of n.ua)await e(!0)}async function cp(n){for(const e of n.ua)await e(!1)}function uD(n,e){const t=Ze(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),_b(t)?yb(t):Mf(t).b_()&&gb(t,e))}function mb(n,e){const t=Ze(n),r=Mf(t);t._a.delete(e),r.b_()&&cD(t,e),t._a.size===0&&(r.b_()?r.v_():Yu(t)&&t.la.set("Unknown"))}function gb(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mf(n).U_(e)}function cD(n,e){n.ha.Ke(e),Mf(n).K_(e)}function yb(n){n.ha=new f6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Mf(n).start(),n.la.ta()}function _b(n){return Yu(n)&&!Mf(n).w_()&&n._a.size>0}function Yu(n){return Ze(n).aa.size===0}function fD(n){n.ha=void 0}async function _9(n){n.la.set("Online")}async function v9(n){n._a.forEach((e,t)=>{gb(n,e)})}async function A9(n,e){fD(n),_b(n)?(n.la.ia(e),yb(n)):n.la.set("Unknown")}async function T9(n,e,t){if(n.la.set("Online"),e instanceof YM&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i._a.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i._a.delete(u),i.ha.removeTarget(u))}(n,e)}catch(r){Ie(Mu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yg(n,r)}else if(e instanceof pg?n.ha.Xe(e):e instanceof WM?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Xe.min()))try{const r=await oD(n.localStore);t.compareTo(r)>=0&&await function(s,a){const u=s.ha.It(a);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=s._a.get(h);p&&s._a.set(h,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,h)=>{const p=s._a.get(c);if(!p)return;s._a.set(c,p.withResumeToken(pr.EMPTY_BYTE_STRING,p.snapshotVersion)),cD(s,c);const g=new $a(p.target,c,h,p.sequenceNumber);gb(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Ie(Mu,"Failed to raise snapshot:",r),await Yg(n,r)}}async function Yg(n,e,t){if(!Nf(e))throw e;n.aa.add(1),await cp(n),n.la.set("Offline"),t||(t=()=>oD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ie(Mu,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await f_(n)})}function hD(n,e){return e().catch(t=>Yg(n,t,e))}async function h_(n){const e=Ze(n),t=ml(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:tb;for(;E9(e);)try{const i=await r9(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,b9(e,i)}catch(i){await Yg(e,i)}dD(e)&&pD(e)}function E9(n){return Yu(n)&&n.oa.length<10}function b9(n,e){n.oa.push(e);const t=ml(n);t.b_()&&t.W_&&t.G_(e.mutations)}function dD(n){return Yu(n)&&!ml(n).w_()&&n.oa.length>0}function pD(n){ml(n).start()}async function S9(n){ml(n).H_()}async function w9(n){const e=ml(n);for(const t of n.oa)e.G_(t.mutations)}async function R9(n,e,t){const r=n.oa.shift(),i=lb.from(r,e,t);await hD(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await h_(n)}async function C9(n,e){e&&ml(n).W_&&await async function(r,i){if(function(a){return u6(a)&&a!==pe.ABORTED}(i.code)){const s=r.oa.shift();ml(r).D_(),await hD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await h_(r)}}(n,e),dD(n)&&pD(n)}async function zx(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ie(Mu,"RemoteStore received new credentials");const r=Yu(t);t.aa.add(3),await cp(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await f_(t)}async function x9(n,e){const t=Ze(n);e?(t.aa.delete(2),await f_(t)):e||(t.aa.add(2),await cp(t),t.la.set("Unknown"))}function Mf(n){return n.Pa||(n.Pa=function(t,r,i){const s=Ze(t);return s.Y_(),new h9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:_9.bind(null,n),Jo:v9.bind(null,n),Zo:A9.bind(null,n),Q_:T9.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),_b(n)?yb(n):n.la.set("Unknown")):(await n.Pa.stop(),fD(n))})),n.Pa}function ml(n){return n.Ta||(n.Ta=function(t,r,i){const s=Ze(t);return s.Y_(),new d9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:S9.bind(null,n),Zo:C9.bind(null,n),z_:w9.bind(null,n),j_:R9.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await h_(n)):(await n.Ta.stop(),n.oa.length>0&&(Ie(Mu,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new vb(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ab(n,e){if(ta("AsyncQueue",`${e}: ${n}`),Nf(n))return new Be(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{static emptySet(e){return new ef(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=td(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ef)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ef;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.Ia=new sn($e.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ye(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class vf{constructor(e,t,r,i,s,a,u,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new vf(e,t,ef.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&s_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class I9{constructor(){this.queries=jx(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=Ze(t),s=i.queries;i.queries=jx(),s.forEach((a,u)=>{for(const c of u.Ra)c.onError(r)})})(this,new Be(pe.ABORTED,"Firestore shutting down"))}}function jx(){return new Wu(n=>DM(n),s_)}async function mD(n,e){const t=Ze(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new k9,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=Ab(a,`Initialization of query '${Bc(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&Tb(t)}async function gD(n,e){const t=Ze(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Ra.indexOf(e);a>=0&&(s.Ra.splice(a,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function O9(n,e){const t=Ze(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Ra)u.pa(i)&&(r=!0);a.Aa=i}}r&&Tb(t)}function N9(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function Tb(n){n.fa.forEach(e=>{e.next()})}var VT,Fx;(Fx=VT||(VT={})).ya="default",Fx.Cache="cache";class yD{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=vf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==VT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.key=e}}class vD{constructor(e){this.key=e}}class M9{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=yt(),this.mutatedKeys=yt(),this.Ua=PM(e),this.Ka=new ef(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new Bx,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),A=o_(this.query,g)?g:null,T=!!_&&this.mutatedKeys.has(_.key),b=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let S=!1;_&&A?_.data.isEqual(A.data)?T!==b&&(r.track({type:3,doc:A}),S=!0):this.ja(_,A)||(r.track({type:2,doc:A}),S=!0,(c&&this.Ua(A,c)>0||h&&this.Ua(A,h)<0)&&(u=!0)):!_&&A?(r.track({type:0,doc:A}),S=!0):_&&!A&&(r.track({type:1,doc:_}),S=!0,(c||h)&&(u=!0)),S&&(A?(a=a.add(A),s=b?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ka:a,za:r,ys:u,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((p,g)=>function(A,T){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:S})}};return b(A)-b(T)}(p.type,g.type)||this.Ua(p.doc,g.doc)),this.Ha(r),i=i!=null&&i;const u=t&&!i?this.Ja():[],c=this.$a.size===0&&this.current&&!i?1:0,h=c!==this.Qa;return this.Qa=c,a.length!==0||h?{snapshot:new vf(this.query,e.Ka,s,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:u}:{Ya:u}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Bx,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=yt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new vD(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new _D(r))}),t}Xa(e){this.qa=e.Ns,this.$a=yt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return vf.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Eb="SyncEngine";class D9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P9{constructor(e){this.key=e,this.tu=!1}}class L9{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Wu(u=>DM(u),s_),this.iu=new Map,this.su=new Set,this.ou=new sn($e.comparator),this._u=new Map,this.au=new fb,this.uu={},this.cu=new Map,this.lu=_f.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function V9(n,e,t=!0){const r=wD(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await AD(r,e,t,!0),i}async function U9(n,e){const t=wD(n);await AD(t,e,!0,!1)}async function AD(n,e,t,r){const i=await i9(n.localStore,oo(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await z9(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&uD(n.remoteStore,i),u}async function z9(n,e,t,r,i){n.Pu=(g,_,A)=>async function(b,S,C,L){let z=S.view.Ga(C);z.ys&&(z=await Dx(b.localStore,S.query,!1).then(({documents:N})=>S.view.Ga(N,z)));const q=L&&L.targetChanges.get(S.targetId),B=L&&L.targetMismatches.get(S.targetId)!=null,P=S.view.applyChanges(z,b.isPrimaryClient,q,B);return qx(b,S.targetId,P.Ya),P.snapshot}(n,g,_,A);const s=await Dx(n.localStore,e,!0),a=new M9(e,s.Ns),u=a.Ga(s.documents),c=up.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,c);qx(n,t,h.Ya);const p=new D9(e,t,a);return n.ru.set(e,p),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),h.snapshot}async function B9(n,e,t){const r=Ze(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(a=>!s_(a,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await PT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mb(r.remoteStore,i.targetId),UT(r,i.targetId)}).catch(Of)):(UT(r,i.targetId),await PT(r.localStore,i.targetId,!0))}async function j9(n,e){const t=Ze(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mb(t.remoteStore,r.targetId))}async function F9(n,e,t){const r=Y9(n);try{const i=await function(a,u){const c=Ze(a),h=Un.now(),p=u.reduce((A,T)=>A.add(T.key),yt());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let T=na(),b=yt();return c.Cs.getEntries(A,p).next(S=>{T=S,T.forEach((C,L)=>{L.isValidDocument()||(b=b.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,T)).next(S=>{g=S;const C=[];for(const L of u){const z=i6(L,g.get(L.key).overlayedDocument);z!=null&&C.push(new bl(L.key,z,CM(z.value.mapValue),ao.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,C,u)}).next(S=>{_=S;const C=S.applyToLocalDocumentSet(g,b);return c.documentOverlayCache.saveOverlays(A,S.batchId,C)})}).then(()=>({batchId:_.batchId,changes:VM(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,c){let h=a.uu[a.currentUser.toKey()];h||(h=new sn(lt)),h=h.insert(u,c),a.uu[a.currentUser.toKey()]=h}(r,i.batchId,t),await fp(r,i.changes),await h_(r.remoteStore)}catch(i){const s=Ab(i,"Failed to persist write");t.reject(s)}}async function TD(n,e){const t=Ze(n);try{const r=await t9(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t._u.get(s);a&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.tu=!0:i.modifiedDocuments.size>0?It(a.tu,14607):i.removedDocuments.size>0&&(It(a.tu,42227),a.tu=!1))}),await fp(t,r,e)}catch(r){await Of(r)}}function Hx(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,a)=>{const u=a.view.ga(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){const c=Ze(a);c.onlineState=u;let h=!1;c.queries.forEach((p,g)=>{for(const _ of g.Ra)_.ga(u)&&(h=!0)}),h&&Tb(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function H9(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let a=new sn($e.comparator);a=a.insert(s,Sr.newNoDocument(s,Xe.min()));const u=yt().add(s),c=new u_(Xe.min(),new Map,new sn(lt),a,u);await TD(r,c),r.ou=r.ou.remove(s),r._u.delete(e),bb(r)}else await PT(r.localStore,e,!1).then(()=>UT(r,e,t)).catch(Of)}async function q9(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=await e9(t.localStore,e);bD(t,r,null),ED(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await fp(t,i)}catch(i){await Of(i)}}async function $9(n,e,t){const r=Ze(n);try{const i=await function(a,u){const c=Ze(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(g=>(It(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);bD(r,e,t),ED(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await fp(r,i)}catch(i){await Of(i)}}function ED(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function bD(n,e,t){const r=Ze(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function UT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||SD(n,r)})}function SD(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(mb(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),bb(n))}function qx(n,e,t){for(const r of t)r instanceof _D?(n.au.addReference(r.key,e),G9(n,r)):r instanceof vD?(Ie(Eb,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||SD(n,r.key)):Ye(19791,{Iu:r})}function G9(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(Ie(Eb,"New document in limbo: "+t),n.su.add(r),bb(n))}function bb(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new $e(Qt.fromString(e)),r=n.lu.next();n._u.set(r,new P9(t)),n.ou=n.ou.insert(t,r),uD(n.remoteStore,new $a(oo(ob(t.path)),r,"TargetPurposeLimboResolution",t_.le))}}async function fp(n,e,t){const r=Ze(n),i=[],s=[],a=[];r.ru.isEmpty()||(r.ru.forEach((u,c)=>{a.push(r.Pu(c,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){i.push(h);const g=db.Ps(c.targetId,h);s.push(g)}}))}),await Promise.all(a),r.nu.Q_(i),await async function(c,h){const p=Ze(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>he.forEach(h,_=>he.forEach(_.ls,A=>p.persistence.referenceDelegate.addReference(g,_.targetId,A)).next(()=>he.forEach(_.hs,A=>p.persistence.referenceDelegate.removeReference(g,_.targetId,A)))))}catch(g){if(!Nf(g))throw g;Ie(pb,"Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const A=p.Ss.get(_),T=A.snapshotVersion,b=A.withLastLimboFreeSnapshotVersion(T);p.Ss=p.Ss.insert(_,b)}}}(r.localStore,s))}async function K9(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ie(Eb,"User change. New user:",e.toKey());const r=await sD(t.localStore,e);t.currentUser=e,function(s,a){s.cu.forEach(u=>{u.forEach(c=>{c.reject(new Be(pe.CANCELLED,a))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fp(t,r.Ms)}}function W9(n,e){const t=Ze(n),r=t._u.get(e);if(r&&r.tu)return yt().add(r.key);{let i=yt();const s=t.iu.get(e);if(!s)return i;for(const a of s){const u=t.ru.get(a);i=i.unionWith(u.view.Wa)}return i}}function wD(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H9.bind(null,e),e.nu.Q_=O9.bind(null,e.eventManager),e.nu.Tu=N9.bind(null,e.eventManager),e}function Y9(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$9.bind(null,e),e}class Qg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=c_(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return Z6(this.persistence,new Q6,e.initialUser,this.serializer)}Ru(e){return new iD(hb.Ei,this.serializer)}Au(e){return new o9}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qg.provider={build:()=>new Qg};class Q9 extends Qg{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){It(this.persistence.referenceDelegate instanceof Wg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new P6(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new iD(r=>Wg.Ei(r,t),this.serializer)}}class zT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=K9.bind(null,this.syncEngine),await x9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I9}()}createDatastore(e){const t=c_(e.databaseInfo.databaseId),r=function(s){return new f9(s)}(e.databaseInfo);return function(s,a,u,c){return new m9(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,u){return new y9(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Hx(this.syncEngine,t,0),function(){return Vx.C()?new Vx:new a9}())}createSyncEngine(e,t){return function(i,s,a,u,c,h,p){const g=new L9(i,s,a,u,c,h);return p&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ze(i);Ie(Mu,"RemoteStore shutting down."),s.aa.add(5),await cp(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zT.provider={build:()=>new zT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ta("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="FirestoreClient";class X9{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=yM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Ie(gl,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Ie(gl,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ab(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cA(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(gl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await sD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function $x(n,e){n.asyncQueue.verifyOperationInProgress();const t=await J9(n);Ie(gl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>zx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>zx(e.remoteStore,i)),n._onlineComponents=e}async function J9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(gl,"Using user provided OfflineComponentProvider");try{await cA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pf("Error using user provided cache. Falling back to memory cache: "+t),await cA(n,new Qg)}}else Ie(gl,"Using default OfflineComponentProvider"),await cA(n,new Q9(void 0));return n._offlineComponents}async function CD(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(gl,"Using user provided OnlineComponentProvider"),await $x(n,n._uninitializedComponentsProvider._online)):(Ie(gl,"Using default OnlineComponentProvider"),await $x(n,new zT))),n._onlineComponents}function Z9(n){return CD(n).then(e=>e.syncEngine)}async function xD(n){const e=await CD(n),t=e.eventManager;return t.onListen=V9.bind(null,e.syncEngine),t.onUnlisten=B9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=U9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j9.bind(null,e.syncEngine),t}function e5(n,e,t={}){const r=new Yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,h){const p=new RD({next:_=>{p.yu(),a.enqueueAndForget(()=>gD(s,g));const A=_.docs.has(u);!A&&_.fromCache?h.reject(new Be(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&_.fromCache&&c&&c.source==="server"?h.reject(new Be(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new yD(ob(u.path),p,{includeMetadataChanges:!0,Fa:!0});return mD(s,g)}(await xD(n),n.asyncQueue,e,t,r)),r.promise}function t5(n,e,t={}){const r=new Yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,h){const p=new RD({next:_=>{p.yu(),a.enqueueAndForget(()=>gD(s,g)),_.fromCache&&c.source==="server"?h.reject(new Be(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new yD(u,p,{includeMetadataChanges:!0,Fa:!0});return mD(s,g)}(await xD(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(n,e,t){if(!t)throw new Be(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function n5(n,e,t,r){if(e===!0&&r===!0)throw new Be(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Kx(n){if(!$e.isDocumentKey(n))throw new Be(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Wx(n){if($e.isDocumentKey(n))throw new Be(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function yl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sb(n);throw new Be(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="firestore.googleapis.com",Yx=!0;class Qx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OD,this.ssl=Yx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Yx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M6)throw new Be(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class d_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lF;switch(r.type){case"firstParty":return new hF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Gx.get(t);r&&(Ie("ComponentProvider","Removing Datastore"),Gx.delete(t),r.terminate())}(this),Promise.resolve()}}function r5(n,e,t,r={}){var i;const s=(n=yl(n,d_))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;s.host!==OD&&s.host!==u&&pf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:u,ssl:!1,emulatorOptions:r});if(!Ou(c,a)&&(n._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=br.MOCK_USER;else{h=JN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Be(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new br(g)}n._authCredentials=new uF(new mM(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new p_(this.firestore,e,this._query)}}class Pi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pi(this.firestore,e,this._key)}}class tl extends p_{constructor(e,t,r){super(e,t,ob(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pi(this.firestore,null,new $e(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function ND(n,e,...t){if(n=hn(n),ID("collection","path",e),n instanceof d_){const r=Qt.fromString(e,...t);return Wx(r),new tl(n,null,r)}{if(!(n instanceof Pi||n instanceof tl))throw new Be(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Wx(r),new tl(n.firestore,null,r)}}function wb(n,e,...t){if(n=hn(n),arguments.length===1&&(e=yM.newId()),ID("doc","path",e),n instanceof d_){const r=Qt.fromString(e,...t);return Kx(r),new Pi(n,null,new $e(r))}{if(!(n instanceof Pi||n instanceof tl))throw new Be(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Kx(r),new Pi(n.firestore,n instanceof tl?n.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="AsyncQueue";class Jx{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new aD(this,"async_queue_retry"),this.ju=()=>{const r=uA();r&&Ie(Xx,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=uA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=uA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Yo;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Nf(e))throw e;Ie(Xx,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,ta("INTERNAL UNHANDLED ERROR: ",Zx(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=vb.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&Ye(47125,{ec:Zx(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Zx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class hp extends d_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jx(e),this._firestoreClient=void 0,await e}}}function i5(n,e){const t=typeof n=="object"?n:ZE(),r=typeof n=="string"?n:Fg,i=kf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=YN("firestore");s&&r5(i,...s)}return i}function Rb(n){if(n._terminated)throw new Be(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||s5(n),n._firestoreClient}function s5(n){var e,t,r;const i=n._freezeSettings(),s=function(u,c,h,p){return new CF(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,kD(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new X9(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Af(pr.fromBase64String(e))}catch(t){throw new Be(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Af(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Be(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=/^__.*__$/;class a5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new lp(e,this.data,t,this.fieldTransforms)}}class MD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{oc:n})}}class kb{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new kb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Xg(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(DD(this.oc)&&o5.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class l5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||c_(e)}dc(e,t,r,i=!1){return new kb({oc:e,methodName:t,Ec:r,path:hr.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PD(n){const e=n._freezeSettings(),t=c_(n._databaseId);return new l5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function u5(n,e,t,r,i,s={}){const a=n.dc(s.merge||s.mergeFields?2:0,e,t,i);Ob("Data must be an object, but it was:",a,r);const u=LD(r,a);let c,h;if(s.merge)c=new Oi(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=BT(e,g,t);if(!a.contains(_))throw new Be(pe.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);UD(p,_)||p.push(_)}c=new Oi(p),h=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=a.fieldTransforms;return new a5(new ni(u),c,h)}class y_ extends g_{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof y_}}class Ib extends g_{_toFieldTransform(e){return new e6(e.path,new jd)}isEqual(e){return e instanceof Ib}}function c5(n,e,t,r){const i=n.dc(1,e,t);Ob("Data must be an object, but it was:",i,r);const s=[],a=ni.empty();El(r,(c,h)=>{const p=Nb(e,c,t);h=hn(h);const g=i.hc(p);if(h instanceof y_)s.push(p);else{const _=__(h,g);_!=null&&(s.push(p),a.set(p,_))}});const u=new Oi(s);return new MD(a,u,i.fieldTransforms)}function f5(n,e,t,r,i,s){const a=n.dc(1,e,t),u=[BT(e,r,t)],c=[i];if(s.length%2!=0)throw new Be(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(BT(e,s[_])),c.push(s[_+1]);const h=[],p=ni.empty();for(let _=u.length-1;_>=0;--_)if(!UD(h,u[_])){const A=u[_];let T=c[_];T=hn(T);const b=a.hc(A);if(T instanceof y_)h.push(A);else{const S=__(T,b);S!=null&&(h.push(A),p.set(A,S))}}const g=new Oi(h);return new MD(p,g,a.fieldTransforms)}function __(n,e){if(VD(n=hn(n)))return Ob("Unsupported field value:",e,n),LD(n,e);if(n instanceof g_)return function(r,i){if(!DD(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const u of r){let c=__(u,i.Pc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Un.fromDate(r);return{timestampValue:Kg(i.serializer,s)}}if(r instanceof Un){const s=new Un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kg(i.serializer,s)}}if(r instanceof Cb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Af)return{bytesValue:QM(i.serializer,r._byteString)};if(r instanceof Pi){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xb)return function(a,u){return{mapValue:{fields:{[wM]:{stringValue:RM},[Hg]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw u.Tc("VectorValues must only contain numeric values.");return ab(u.serializer,h)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${Sb(r)}`)}(n,e)}function LD(n,e){const t={};return vM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):El(n,(r,i)=>{const s=__(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function VD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof Cb||n instanceof Af||n instanceof Pi||n instanceof g_||n instanceof xb)}function Ob(n,e,t){if(!VD(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Sb(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function BT(n,e,t){if((e=hn(e))instanceof m_)return e._internalPath;if(typeof e=="string")return Nb(n,e);throw Xg("Field path arguments must be of type string or ",n,!1,void 0,t)}const h5=new RegExp("[~\\*/\\[\\]]");function Nb(n,e,t){if(e.search(h5)>=0)throw Xg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new m_(...e.split("."))._internalPath}catch{throw Xg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xg(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Be(pe.INVALID_ARGUMENT,u+n+c)}function UD(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(BD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class d5 extends zD{data(){return super.data()}}function BD(n,e){return typeof e=="string"?Nb(n,e):e instanceof m_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Be(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m5{convertValue(e,t="none"){switch(pl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return El(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Hg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>vn(a.doubleValue));return new xb(s)}convertGeoPoint(e){return new Cb(vn(e.latitude),vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=r_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ud(e));default:return null}}convertTimestamp(e){const t=hl(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);It(nD(r),9688,{name:e});const i=new zd(r.get(1),r.get(3)),s=new $e(r.popFirst(5));return i.isEqual(t)||ta(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jD extends zD{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(BD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class mg extends jD{data(e={}){return super.data(e)}}class y5{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new mg(this._firestore,this._userDataWriter,r.key,r,new rd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const c=new mg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new rd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new mg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new rd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:_5(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(n){n=yl(n,Pi);const e=yl(n.firestore,hp);return e5(Rb(e),n._key).then(t=>b5(e,n,t))}class FD extends m5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Af(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pi(this.firestore,null,t)}}function A5(n){n=yl(n,p_);const e=yl(n.firestore,hp),t=Rb(e),r=new FD(e);return p5(n._query),t5(t,n._query).then(i=>new y5(e,r,n,i))}function T5(n,e,t,...r){n=yl(n,Pi);const i=yl(n.firestore,hp),s=PD(i);let a;return a=typeof(e=hn(e))=="string"||e instanceof m_?f5(s,"updateDoc",n._key,e,t,r):c5(s,"updateDoc",n._key,e),HD(i,[a.toMutation(n._key,ao.exists(!0))])}function E5(n,e){const t=yl(n.firestore,hp),r=wb(n),i=g5(n.converter,e);return HD(t,[u5(PD(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ao.exists(!1))]).then(()=>r)}function HD(n,e){return function(r,i){const s=new Yo;return r.asyncQueue.enqueueAndForget(async()=>F9(await Z9(r),i,s)),s.promise}(Rb(n),e)}function b5(n,e,t){const r=t.docs.get(e._key),i=new FD(n);return new jD(n,i,e._key,r,new rd(t.hasPendingWrites,t.fromCache),e.converter)}function S5(){return new Ib("serverTimestamp")}(function(e,t=!0){(function(i){If=i})(Ku),Rs(new fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new hp(new cF(r.getProvider("auth-internal")),new dF(a,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Be(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(h.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),ai(ix,sx,e),ai(ix,sx,"esm2017")})();function Mb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function qD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w5=qD,$D=new Gu("auth","Firebase",qD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=new e_("@firebase/auth");function R5(n,...e){Jg.logLevel<=gt.WARN&&Jg.warn(`Auth (${Ku}): ${n}`,...e)}function gg(n,...e){Jg.logLevel<=gt.ERROR&&Jg.error(`Auth (${Ku}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n,...e){throw Pb(n,...e)}function ws(n,...e){return Pb(n,...e)}function Db(n,e,t){const r=Object.assign(Object.assign({},w5()),{[e]:t});return new Gu("auth","Firebase",r).create(e,{appName:n.name})}function nl(n){return Db(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function C5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&hs(n,"argument-error"),Db(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pb(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return $D.create(n,...e)}function We(n,e,...t){if(!n)throw Pb(e,...t)}function Go(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gg(e),new Error(e)}function ra(n,e){n||Go(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function x5(){return ek()==="http:"||ek()==="https:"}function ek(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x5()||ZN()||"connection"in navigator)?navigator.onLine:!0}function I5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.shortDelay=e,this.longDelay=t,ra(t>e,"Short delay should be less than long delay!"),this.isMobile=VB()||BB()}get(){return k5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n,e){ra(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M5=new dp(3e4,6e4);function Sl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ia(n,e,t,r,i={}){return KD(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=ap(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:c},s);return zB()||(h.referrerPolicy="no-referrer"),GD.fetch()(await WD(n,n.config.apiHost,t,u),h)})}async function KD(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},O5),e);try{const i=new P5(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Fm(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fm(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Fm(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Fm(n,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Db(n,p,h);hs(n,p)}}catch(i){if(i instanceof ms)throw i;hs(n,"network-request-failed",{message:String(i)})}}async function v_(n,e,t,r,i={}){const s=await ia(n,e,t,r,i);return"mfaPendingCredential"in s&&hs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function WD(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?Lb(n.config,i):`${n.config.apiScheme}://${i}`;return N5.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function D5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class P5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ws(this.auth,"network-request-failed")),M5.get())})}}function Fm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ws(n,e,r);return i.customData._tokenResponse=t,i}function tk(n){return n!==void 0&&n.enterprise!==void 0}class L5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V5(n,e){return ia(n,"GET","/v2/recaptchaConfig",Sl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(n,e){return ia(n,"POST","/v1/accounts:delete",e)}async function Zg(n,e){return ia(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z5(n,e=!1){const t=hn(n),r=await t.getIdToken(e),i=Vb(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:md(fA(i.auth_time)),issuedAtTime:md(fA(i.iat)),expirationTime:md(fA(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function fA(n){return Number(n)*1e3}function Vb(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gg("JWT malformed, contained fewer than 3 sections"),null;try{const i=KN(t);return i?JSON.parse(i):(gg("Failed to decode base64 JWT payload"),null)}catch(i){return gg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nk(n){const e=Vb(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ms&&B5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function B5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=md(this.lastLoginAt),this.creationTime=md(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(n){var e;const t=n.auth,r=await n.getIdToken(),i=await qd(n,Zg(t,{idToken:r}));We(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YD(s.providerUserInfo):[],u=H5(n.providerData,a),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new FT(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function F5(n){const e=hn(n);await ey(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YD(n){return n.map(e=>{var{providerId:t}=e,r=Mb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(n,e){const t=await KD(n,{},async()=>{const r=ap({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await WD(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",GD.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $5(n,e){return ia(n,"POST","/v2/accounts:revokeToken",Sl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=nk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await q5(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new tf;return r&&(We(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(We(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tf,this.toJSON())}_performRefresh(){return Go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Mb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new FT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await qd(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return z5(this,e)}reload(){return F5(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ey(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(nl(this.auth));const e=await this.getIdToken();return await qd(this,U5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,u,c,h,p;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,A=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(a=t.photoURL)!==null&&a!==void 0?a:void 0,b=(u=t.tenantId)!==null&&u!==void 0?u:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,C=(h=t.createdAt)!==null&&h!==void 0?h:void 0,L=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:z,emailVerified:q,isAnonymous:B,providerData:P,stsTokenManager:N}=t;We(z&&N,e,"internal-error");const k=tf.fromJSON(this.name,N);We(typeof z=="string",e,"internal-error"),xa(g,e.name),xa(_,e.name),We(typeof q=="boolean",e,"internal-error"),We(typeof B=="boolean",e,"internal-error"),xa(A,e.name),xa(T,e.name),xa(b,e.name),xa(S,e.name),xa(C,e.name),xa(L,e.name);const x=new Ss({uid:z,auth:e,email:_,emailVerified:q,displayName:g,isAnonymous:B,photoURL:T,phoneNumber:A,tenantId:b,stsTokenManager:k,createdAt:C,lastLoginAt:L});return P&&Array.isArray(P)&&(x.providerData=P.map(U=>Object.assign({},U))),S&&(x._redirectEventId=S),x}static async _fromIdTokenResponse(e,t,r=!1){const i=new tf;i.updateFromServerResponse(t);const s=new Ss({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ey(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];We(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?YD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new tf;u.updateFromIdToken(r);const c=new Ss({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new FT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new Map;function Ko(n){ra(n instanceof Function,"Expected a class definition");let e=rk.get(n);return e?(ra(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rk.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QD.type="NONE";const ik=QD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n,e,t){return`firebase:${n}:${e}:${t}`}class nf{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yg(this.userKey,i.apiKey,s),this.fullPersistenceKey=yg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zg(this.auth,{idToken:e}).catch(()=>{});return t?Ss._fromGetAccountInfoResponse(this.auth,t,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new nf(Ko(ik),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Ko(ik);const a=yg(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const p=await h._get(a);if(p){let g;if(typeof p=="string"){const _=await Zg(e,{idToken:p}).catch(()=>{});if(!_)break;g=await Ss._fromGetAccountInfoResponse(e,_,p)}else g=Ss._fromJSON(e,p);h!==s&&(u=g),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new nf(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new nf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nP(e))return"Blackberry";if(rP(e))return"Webos";if(JD(e))return"Safari";if((e.includes("chrome/")||ZD(e))&&!e.includes("edge/"))return"Chrome";if(tP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XD(n=kr()){return/firefox\//i.test(n)}function JD(n=kr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZD(n=kr()){return/crios\//i.test(n)}function eP(n=kr()){return/iemobile/i.test(n)}function tP(n=kr()){return/android/i.test(n)}function nP(n=kr()){return/blackberry/i.test(n)}function rP(n=kr()){return/webos/i.test(n)}function Ub(n=kr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function G5(n=kr()){var e;return Ub(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function K5(){return jB()&&document.documentMode===10}function iP(n=kr()){return Ub(n)||tP(n)||rP(n)||nP(n)||/windows phone/i.test(n)||eP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n,e=[]){let t;switch(n){case"Browser":t=sk(kr());break;case"Worker":t=`${sk(kr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ku}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(n,e={}){return ia(n,"GET","/v2/passwordPolicy",Sl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=6;class X5{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Q5,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ok(this),this.idTokenSubscription=new ok(this),this.beforeStateQueue=new W5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$D,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ko(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await nf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zg(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ey(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=I5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(nl(this));const t=e?hn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(nl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(nl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ko(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Y5(this),t=new X5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ko(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await nf.create(this,[Ko(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&R5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function wl(n){return hn(n)}class ok{constructor(e){this.auth=e,this.observer=null,this.addObserver=WB(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z5(n){A_=n}function oP(n){return A_.loadJS(n)}function eH(){return A_.recaptchaEnterpriseScript}function tH(){return A_.gapiScript}function nH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class rH{constructor(){this.enterprise=new iH}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class iH{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sH="recaptcha-enterprise",aP="NO_RECAPTCHA";class oH{constructor(e){this.type=sH,this.auth=wl(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{V5(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new L5(c);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(c=>{u(c)})})}function i(s,a,u){const c=window.grecaptcha;tk(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(aP)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rH().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&tk(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=eH();c.length!==0&&(c+=u),oP(c).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function ak(n,e,t,r=!1,i=!1){const s=new oH(n);let a;if(i)a=aP;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function HT(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ak(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ak(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(n,e){const t=kf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ou(s,e??{}))return i;hs(i,"already-initialized")}return t.initialize({options:e})}function lH(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ko);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uH(n,e,t){const r=wl(n);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=lP(e),{host:a,port:u}=cH(e),c=u===null?"":`:${u}`,h={url:`${s}//${a}${c}/`},p=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(Ou(h,r.config.emulator)&&Ou(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,fH()}function lP(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cH(n){const e=lP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:lk(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:lk(a)}}}function lk(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fH(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Go("not implemented")}_getIdTokenResponse(e){return Go("not implemented")}_linkToIdToken(e,t){return Go("not implemented")}_getReauthenticationResolver(e){return Go("not implemented")}}async function hH(n,e){return ia(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dH(n,e){return v_(n,"POST","/v1/accounts:signInWithPassword",Sl(n,e))}async function pH(n,e){return ia(n,"POST","/v1/accounts:sendOobCode",Sl(n,e))}async function mH(n,e){return pH(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gH(n,e){return v_(n,"POST","/v1/accounts:signInWithEmailLink",Sl(n,e))}async function yH(n,e){return v_(n,"POST","/v1/accounts:signInWithEmailLink",Sl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends zb{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new $d(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new $d(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return HT(e,t,"signInWithPassword",dH);case"emailLink":return gH(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return HT(e,r,"signUpPassword",hH);case"emailLink":return yH(e,{idToken:t,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(n,e){return v_(n,"POST","/v1/accounts:signInWithIdp",Sl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H="http://localhost";class Du extends zb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Du(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Mb(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Du(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return rf(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,rf(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rf(e,t)}buildRequest(){const e={requestUri:_H,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ap(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AH(n){const e=Jh(Zh(n)).link,t=e?Jh(Zh(e)).deep_link_id:null,r=Jh(Zh(n)).deep_link_id;return(r?Jh(Zh(r)).link:null)||r||t||e||n}class Bb{constructor(e){var t,r,i,s,a,u;const c=Jh(Zh(e)),h=(t=c.apiKey)!==null&&t!==void 0?t:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,g=vH((i=c.mode)!==null&&i!==void 0?i:null);We(h&&p&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=AH(e);try{return new Bb(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this.providerId=Df.PROVIDER_ID}static credential(e,t){return $d._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Bb.parseLink(t);return We(r,"argument-error"),$d._fromEmailAndCode(e,r.code,r.tenantId)}}Df.PROVIDER_ID="password";Df.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Df.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends jb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends pp{constructor(){super("facebook.com")}static credential(e){return Du._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return La.credential(e.oauthAccessToken)}catch{return null}}}La.FACEBOOK_SIGN_IN_METHOD="facebook.com";La.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends pp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Du._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $o.credential(t,r)}catch{return null}}}$o.GOOGLE_SIGN_IN_METHOD="google.com";$o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends pp{constructor(){super("github.com")}static credential(e){return Du._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Va.credentialFromTaggedObject(e)}static credentialFromError(e){return Va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Va.credential(e.oauthAccessToken)}catch{return null}}}Va.GITHUB_SIGN_IN_METHOD="github.com";Va.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends pp{constructor(){super("twitter.com")}static credential(e,t){return Du._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ua.credentialFromTaggedObject(e)}static credentialFromError(e){return Ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ua.credential(t,r)}catch{return null}}}Ua.TWITTER_SIGN_IN_METHOD="twitter.com";Ua.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ss._fromIdTokenResponse(e,r,i),a=uk(r);return new Tf({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=uk(r);return new Tf({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function uk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends ms{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ty.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ty(e,t,r,i)}}function uP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ty._fromErrorAndOperation(n,s,e,r):s})}async function TH(n,e,t=!1){const r=await qd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Tf._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EH(n,e,t=!1){const{auth:r}=n;if(xi(r.app))return Promise.reject(nl(r));const i="reauthenticate";try{const s=await qd(n,uP(r,i,e,n),t);We(s.idToken,r,"internal-error");const a=Vb(s.idToken);We(a,r,"internal-error");const{sub:u}=a;return We(n.uid===u,r,"user-mismatch"),Tf._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e,t=!1){if(xi(n.app))return Promise.reject(nl(n));const r="signIn",i=await uP(n,r,e),s=await Tf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function bH(n,e){return cP(wl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SH(n){const e=wl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wH(n,e,t){const r=wl(n);await HT(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",mH)}function RH(n,e,t){return xi(n.app)?Promise.reject(nl(n)):bH(hn(n),Df.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&SH(n),r})}function CH(n,e,t,r){return hn(n).onIdTokenChanged(e,t,r)}function xH(n,e,t){return hn(n).beforeAuthStateChanged(e,t)}function fP(n,e,t,r){return hn(n).onAuthStateChanged(e,t,r)}function kH(n){return hn(n).signOut()}const ny="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ny,"1"),this.storage.removeItem(ny),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH=1e3,OH=10;class dP extends hP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);K5()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OH):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},IH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dP.type="LOCAL";const NH=dP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP extends hP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pP.type="SESSION";const mP=pP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new T_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),c=await MH(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}T_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const h=Fb("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(){return window}function PH(n){uo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){return typeof uo().WorkerGlobalScope<"u"&&typeof uo().importScripts=="function"}async function LH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VH(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function UH(){return gP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="firebaseLocalStorageDb",zH=1,ry="firebaseLocalStorage",_P="fbase_key";class mp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function E_(n,e){return n.transaction([ry],e?"readwrite":"readonly").objectStore(ry)}function BH(){const n=indexedDB.deleteDatabase(yP);return new mp(n).toPromise()}function qT(){const n=indexedDB.open(yP,zH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ry,{keyPath:_P})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ry)?e(r):(r.close(),await BH(),e(await qT()))})})}async function ck(n,e,t){const r=E_(n,!0).put({[_P]:e,value:t});return new mp(r).toPromise()}async function jH(n,e){const t=E_(n,!1).get(e),r=await new mp(t).toPromise();return r===void 0?null:r.value}function fk(n,e){const t=E_(n,!0).delete(e);return new mp(t).toPromise()}const FH=800,HH=3;class vP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>HH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=T_._getInstance(UH()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await LH(),!this.activeServiceWorker)return;this.sender=new DH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qT();return await ck(e,ny,"1"),await fk(e,ny),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ck(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>jH(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fk(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=E_(i,!1).getAll();return new mp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vP.type="LOCAL";const qH=vP;new dp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n,e){return e?Ko(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends zb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $H(n){return cP(n.auth,new Hb(n),n.bypassAuthState)}function GH(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),EH(t,new Hb(n),n.bypassAuthState)}async function KH(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),TH(t,new Hb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $H;case"linkViaPopup":case"linkViaRedirect":return KH;case"reauthViaPopup":case"reauthViaRedirect":return GH;default:hs(this.auth,"internal-error")}}resolve(e){ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH=new dp(2e3,1e4);async function YH(n,e,t){if(xi(n.app))return Promise.reject(ws(n,"operation-not-supported-in-this-environment"));const r=wl(n);C5(n,e,jb);const i=AP(r,t);return new pu(r,"signInViaPopup",e,i).executeNotNull()}class pu extends TP{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,pu.currentPopupAction&&pu.currentPopupAction.cancel(),pu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){ra(this.filter.length===1,"Popup operations only handle one event");const e=Fb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WH.get())};e()}}pu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH="pendingRedirect",_g=new Map;class XH extends TP{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=_g.get(this.auth._key());if(!e){try{const r=await JH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_g.set(this.auth._key(),e)}return this.bypassAuthState||_g.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JH(n,e){const t=tq(e),r=eq(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function ZH(n,e){_g.set(n._key(),e)}function eq(n){return Ko(n._redirectPersistence)}function tq(n){return yg(QH,n.config.apiKey,n.name)}async function nq(n,e,t=!1){if(xi(n.app))return Promise.reject(nl(n));const r=wl(n),i=AP(r,e),a=await new XH(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=10*60*1e3;class iq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!EP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rq&&this.cachedEventUids.clear(),this.cachedEventUids.has(hk(e))}saveEventToCache(e){this.cachedEventUids.add(hk(e)),this.lastProcessedEventTime=Date.now()}}function hk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function EP({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EP(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oq(n,e={}){return ia(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lq=/^https?/;async function uq(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oq(n);for(const t of e)try{if(cq(t))return}catch{}hs(n,"unauthorized-domain")}function cq(n){const e=jT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!lq.test(t))return!1;if(aq.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=new dp(3e4,6e4);function dk(){const n=uo().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hq(n){return new Promise((e,t)=>{var r,i,s;function a(){dk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dk(),t(ws(n,"network-request-failed"))},timeout:fq.get()})}if(!((i=(r=uo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=uo().gapi)===null||s===void 0)&&s.load)a();else{const u=nH("iframefcb");return uo()[u]=()=>{gapi.load?a():t(ws(n,"network-request-failed"))},oP(`${tH()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw vg=null,e})}let vg=null;function dq(n){return vg=vg||hq(n),vg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq=new dp(5e3,15e3),mq="__/auth/iframe",gq="emulator/auth/iframe",yq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_q=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vq(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lb(e,gq):`https://${n.config.authDomain}/${mq}`,r={apiKey:e.apiKey,appName:n.name,v:Ku},i=_q.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ap(r).slice(1)}`}async function Aq(n){const e=await dq(n),t=uo().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:vq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ws(n,"network-request-failed"),u=uo().setTimeout(()=>{s(a)},pq.get());function c(){uo().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Eq=500,bq=600,Sq="_blank",wq="http://localhost";class pk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rq(n,e,t,r=Eq,i=bq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},Tq),{width:r.toString(),height:i.toString(),top:s,left:a}),h=kr().toLowerCase();t&&(u=ZD(h)?Sq:t),XD(h)&&(e=e||wq,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[A,T])=>`${_}${A}=${T},`,"");if(G5(h)&&u!=="_self")return Cq(e||"",u),new pk(null);const g=window.open(e||"",u,p);We(g,n,"popup-blocked");try{g.focus()}catch{}return new pk(g)}function Cq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq="__/auth/handler",kq="emulator/auth/handler",Iq=encodeURIComponent("fac");async function mk(n,e,t,r,i,s){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ku,eventId:i};if(e instanceof jb){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",KB(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))a[p]=g}if(e instanceof pp){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await n._getAppCheckToken(),h=c?`#${Iq}=${encodeURIComponent(c)}`:"";return`${Oq(n)}?${ap(u).slice(1)}${h}`}function Oq({config:n}){return n.emulator?Lb(n,kq):`https://${n.authDomain}/${xq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="webStorageSupport";class Nq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mP,this._completeRedirectFn=nq,this._overrideRedirectResult=ZH}async _openPopup(e,t,r,i){var s;ra((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await mk(e,t,r,jT(),i);return Rq(e,a,Fb())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await mk(e,t,r,jT(),i);return PH(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ra(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Aq(e),r=new iq(e);return t.register("authEvent",i=>(We(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hA,{type:hA},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[hA];a!==void 0&&t(!!a),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iP()||JD()||Ub()}}const Mq=Nq;var gk="@firebase/auth",yk="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lq(n){Rs(new fs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;We(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sP(n)},h=new J5(r,i,s,c);return lH(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new fs("auth-internal",e=>{const t=wl(e.getProvider("auth").getImmediate());return(r=>new Dq(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ai(gk,yk,Pq(n)),ai(gk,yk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=5*60,Uq=XN("authIdTokenMaxAge")||Vq;let _k=null;const zq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Uq)return;const i=t==null?void 0:t.token;_k!==i&&(_k=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function iy(n=ZE()){const e=kf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aH(n,{popupRedirectResolver:Mq,persistence:[qH,NH,mP]}),r=XN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=zq(s.toString());xH(t,a,()=>a(t.currentUser)),CH(t,u=>a(u))}}const i=WN("auth");return i&&uH(t,`http://${i}`),t}function Bq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Z5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ws("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Bq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lq("Browser");var jq="firebase",Fq="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai(jq,Fq,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="firebasestorage.googleapis.com",SP="storageBucket",Hq=2*60*1e3,qq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends ms{constructor(e,t,r=0){super(dA(e),`Firebase Storage: ${t} (${dA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function dA(n){return"storage/"+n}function qb(){const n="An unknown error occurred, please check the error payload for server response.";return new pn(dn.UNKNOWN,n)}function $q(n){return new pn(dn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Gq(n){return new pn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kq(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pn(dn.UNAUTHENTICATED,n)}function Wq(){return new pn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Yq(n){return new pn(dn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Qq(){return new pn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Xq(){return new pn(dn.CANCELED,"User canceled the upload/download.")}function Jq(n){return new pn(dn.INVALID_URL,"Invalid URL '"+n+"'.")}function Zq(n){return new pn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function e8(){return new pn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+SP+"' property when initializing the app?")}function t8(){return new pn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function n8(){return new pn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function r8(n){return new pn(dn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $T(n){return new pn(dn.INVALID_ARGUMENT,n)}function wP(){return new pn(dn.APP_DELETED,"The Firebase app was deleted.")}function i8(n){return new pn(dn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gd(n,e){return new pn(dn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Bh(n){throw new pn(dn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ni.makeFromUrl(e,t)}catch{return new Ni(e,"")}if(r.path==="")return r;throw Zq(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function h(q){q.path_=decodeURIComponent(q.path)}const p="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",A=new RegExp(`^https?://${g}/${p}/b/${i}/o${_}`,"i"),T={bucket:1,path:3},b=t===bP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",C=new RegExp(`^https?://${b}/${i}/${S}`,"i"),z=[{regex:u,indices:c,postModify:s},{regex:A,indices:T,postModify:h},{regex:C,indices:{bucket:1,path:2},postModify:h}];for(let q=0;q<z.length;q++){const B=z[q],P=B.regex.exec(e);if(P){const N=P[B.indices.bucket];let k=P[B.indices.path];k||(k=""),r=new Ni(N,k),B.postModify(r);break}}if(r==null)throw Jq(e);return r}}class s8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(n,e,t){let r=1,i=null,s=null,a=!1,u=0;function c(){return u===2}let h=!1;function p(...S){h||(h=!0,e.apply(null,S))}function g(S){i=setTimeout(()=>{i=null,n(A,c())},S)}function _(){s&&clearTimeout(s)}function A(S,...C){if(h){_();return}if(S){_(),p.call(null,S,...C);return}if(c()||a){_(),p.call(null,S,...C);return}r<64&&(r*=2);let z;u===1?(u=2,z=0):z=(r+Math.random())*1e3,g(z)}let T=!1;function b(S){T||(T=!0,_(),!h&&(i!==null?(S||(u=2),clearTimeout(i),g(0)):S||(u=1)))}return g(0),s=setTimeout(()=>{a=!0,b(!0)},t),b}function a8(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(n){return n!==void 0}function u8(n){return typeof n=="object"&&!Array.isArray(n)}function $b(n){return typeof n=="string"||n instanceof String}function vk(n){return Gb()&&n instanceof Blob}function Gb(){return typeof Blob<"u"}function Ak(n,e,t,r){if(r<e)throw $T(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw $T(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function RP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Su;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Su||(Su={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,t,r,i,s,a,u,c,h,p,g,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,T)=>{this.resolve_=A,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Hm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const c=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===Su.NO_ERROR,c=s.getStatus();if(!u||c8(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Su.ABORT;r(!1,new Hm(!1,null,p));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new Hm(h,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());l8(c)?s(c):s()}catch(c){a(c)}else if(u!==null){const c=qb();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(i.canceled){const c=this.appDelete_?wP():Xq();a(c)}else{const c=Qq();a(c)}};this.canceled_?t(!1,new Hm(!1,null,!0)):this.backoffId_=o8(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function h8(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function d8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function p8(n,e){e&&(n["X-Firebase-GMPID"]=e)}function m8(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function g8(n,e,t,r,i,s,a=!0){const u=RP(n.urlParams),c=n.url+u,h=Object.assign({},n.headers);return p8(h,e),h8(h,t),d8(h,s),m8(h,r),new f8(c,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _8(...n){const e=y8();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Gb())return new Blob(n);throw new pn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function v8(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(n){if(typeof atob>"u")throw r8("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pA{constructor(e,t){this.data=e,this.contentType=t||null}}function T8(n,e){switch(n){case to.RAW:return new pA(CP(e));case to.BASE64:case to.BASE64URL:return new pA(xP(n,e));case to.DATA_URL:return new pA(b8(e),S8(e))}throw qb()}function CP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function E8(n){let e;try{e=decodeURIComponent(n)}catch{throw gd(to.DATA_URL,"Malformed data URL.")}return CP(e)}function xP(n,e){switch(n){case to.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw gd(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case to.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw gd(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=A8(e)}catch(i){throw i.message.includes("polyfill")?i:gd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class kP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw gd(to.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=w8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function b8(n){const e=new kP(n);return e.base64?xP(to.BASE64,e.rest):E8(e.rest)}function S8(n){return new kP(n).contentType}function w8(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t){let r=0,i="";vk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(vk(this.data_)){const r=this.data_,i=v8(r,e,t);return i===null?null:new za(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new za(r,!0)}}static getBlob(...e){if(Gb()){const t=e.map(r=>r instanceof za?r.data_:r);return new za(_8.apply(null,t))}else{const t=e.map(a=>$b(a)?T8(to.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let u=0;u<a.length;u++)i[s++]=a[u]}),new za(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n){let e;try{e=JSON.parse(n)}catch{return null}return u8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function C8(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function OP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(n,e){return e}let Ur=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||x8}},qm=null;function k8(n){return!$b(n)||n.length<2?n:OP(n)}function NP(){if(qm)return qm;const n=[];n.push(new Ur("bucket")),n.push(new Ur("generation")),n.push(new Ur("metageneration")),n.push(new Ur("name","fullPath",!0));function e(s,a){return k8(a)}const t=new Ur("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new Ur("size");return i.xform=r,n.push(i),n.push(new Ur("timeCreated")),n.push(new Ur("updated")),n.push(new Ur("md5Hash",null,!0)),n.push(new Ur("cacheControl",null,!0)),n.push(new Ur("contentDisposition",null,!0)),n.push(new Ur("contentEncoding",null,!0)),n.push(new Ur("contentLanguage",null,!0)),n.push(new Ur("contentType",null,!0)),n.push(new Ur("metadata","customMetadata",!0)),qm=n,qm}function I8(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Ni(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function O8(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return I8(r,n),r}function MP(n,e,t){const r=IP(e);return r===null?null:O8(n,r,t)}function N8(n,e,t,r){const i=IP(e);if(i===null||!$b(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(h=>{const p=n.bucket,g=n.fullPath,_="/b/"+a(p)+"/o/"+a(g),A=Kb(_,t,r),T=RP({alt:"media",token:h});return A+T})[0]}function M8(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class DP{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){if(!n)throw qb()}function D8(n,e){function t(r,i){const s=MP(n,i,e);return PP(s!==null),s}return t}function P8(n,e){function t(r,i){const s=MP(n,i,e);return PP(s!==null),N8(s,i,n.host,n._protocol)}return t}function LP(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Wq():i=Kq():t.getStatus()===402?i=Gq(n.bucket):t.getStatus()===403?i=Yq(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function L8(n){const e=LP(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=$q(n.path)),s.serverResponse=i.serverResponse,s}return t}function V8(n,e,t){const r=e.fullServerUrl(),i=Kb(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,u=new DP(i,s,P8(n,t),a);return u.errorHandler=L8(e),u}function U8(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function z8(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=U8(null,e)),r}function B8(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let z="";for(let q=0;q<2;q++)z=z+Math.random().toString().slice(2);return z}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const h=z8(e,r,i),p=M8(h,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+c+"--",A=za.getBlob(g,r,_);if(A===null)throw t8();const T={name:h.fullPath},b=Kb(s,n.host,n._protocol),S="POST",C=n.maxUploadRetryTime,L=new DP(b,S,D8(n,t),C);return L.urlParams=T,L.headers=a,L.body=A.uploadData(),L.errorHandler=LP(e),L}class j8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Su.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Su.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Su.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Bh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class F8 extends j8{initXhr(){this.xhr_.responseType="text"}}function VP(){return new F8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t){this._service=e,t instanceof Ni?this._location=t:this._location=Ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pu(e,t)}get root(){const e=new Ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OP(this._location.path)}get storage(){return this._service}get parent(){const e=R8(this._location.path);if(e===null)return null;const t=new Ni(this._location.bucket,e);return new Pu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw i8(e)}}function H8(n,e,t){n._throwIfRoot("uploadBytes");const r=B8(n.storage,n._location,NP(),new za(e,!0),t);return n.storage.makeRequestWithTokens(r,VP).then(i=>({metadata:i,ref:n}))}function q8(n){n._throwIfRoot("getDownloadURL");const e=V8(n.storage,n._location,NP());return n.storage.makeRequestWithTokens(e,VP).then(t=>{if(t===null)throw n8();return t})}function $8(n,e){const t=C8(n._location.path,e),r=new Ni(n._location.bucket,t);return new Pu(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(n){return/^[A-Za-z]+:\/\//.test(n)}function K8(n,e){return new Pu(n,e)}function UP(n,e){if(n instanceof Wb){const t=n;if(t._bucket==null)throw e8();const r=new Pu(t,t._bucket);return e!=null?UP(r,e):r}else return e!==void 0?$8(n,e):n}function W8(n,e){if(e&&G8(e)){if(n instanceof Wb)return K8(n,e);throw $T("To use ref(service, url), the first argument must be a Storage instance.")}else return UP(n,e)}function Tk(n,e){const t=e==null?void 0:e[SP];return t==null?null:Ni.makeFromBucketSpec(t,n)}function Y8(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:JN(i,n.app.options.projectId))}class Wb{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=bP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Hq,this._maxUploadRetryTime=qq,this._requests=new Set,i!=null?this._bucket=Ni.makeFromBucketSpec(i,this._host):this._bucket=Tk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ni.makeFromBucketSpec(this._url,e):this._bucket=Tk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ak("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ak("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pu(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new s8(wP());{const a=g8(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Ek="@firebase/storage",bk="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="storage";function Q8(n,e,t){return n=hn(n),H8(n,e,t)}function X8(n){return n=hn(n),q8(n)}function J8(n,e){return n=hn(n),W8(n,e)}function Z8(n=ZE(),e){n=hn(n);const r=kf(n,zP).getImmediate({identifier:e}),i=YN("storage");return i&&e7(r,...i),r}function e7(n,e,t,r={}){Y8(n,e,t,r)}function t7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Wb(t,r,i,e,Ku)}function n7(){Rs(new fs(zP,t7,"PUBLIC").setMultipleInstances(!0)),ai(Ek,bk,""),ai(Ek,bk,"esm2017")}n7();const BP="@firebase/installations",Yb="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=1e4,FP=`w:${Yb}`,HP="FIS_v2",r7="https://firebaseinstallations.googleapis.com/v1",i7=60*60*1e3,s7="installations",o7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Lu=new Gu(s7,o7,a7);function qP(n){return n instanceof ms&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P({projectId:n}){return`${r7}/projects/${n}/installations`}function GP(n){return{token:n.token,requestStatus:2,expiresIn:u7(n.expiresIn),creationTime:Date.now()}}async function KP(n,e){const r=(await e.json()).error;return Lu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function WP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function l7(n,{refreshToken:e}){const t=WP(n);return t.append("Authorization",c7(e)),t}async function YP(n){const e=await n();return e.status>=500&&e.status<600?n():e}function u7(n){return Number(n.replace("s","000"))}function c7(n){return`${HP} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f7({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=$P(n),i=WP(n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:t,authVersion:HP,appId:n.appId,sdkVersion:FP},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await YP(()=>fetch(r,u));if(c.ok){const h=await c.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:GP(h.authToken)}}else throw await KP("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=/^[cdef][\w-]{21}$/,GT="";function p7(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=m7(n);return d7.test(t)?t:GT}catch{return GT}}function m7(n){return h7(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new Map;function JP(n,e){const t=b_(n);ZP(t,e),g7(t,e)}function ZP(n,e){const t=XP.get(n);if(t)for(const r of t)r(e)}function g7(n,e){const t=y7();t&&t.postMessage({key:n,fid:e}),_7()}let mu=null;function y7(){return!mu&&"BroadcastChannel"in self&&(mu=new BroadcastChannel("[Firebase] FID Change"),mu.onmessage=n=>{ZP(n.data.key,n.data.fid)}),mu}function _7(){XP.size===0&&mu&&(mu.close(),mu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="firebase-installations-database",A7=1,Vu="firebase-installations-store";let mA=null;function Qb(){return mA||(mA=iM(v7,A7,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Vu)}}})),mA}async function sy(n,e){const t=b_(n),i=(await Qb()).transaction(Vu,"readwrite"),s=i.objectStore(Vu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&JP(n,e.fid),e}async function e2(n){const e=b_(n),r=(await Qb()).transaction(Vu,"readwrite");await r.objectStore(Vu).delete(e),await r.done}async function S_(n,e){const t=b_(n),i=(await Qb()).transaction(Vu,"readwrite"),s=i.objectStore(Vu),a=await s.get(t),u=e(a);return u===void 0?await s.delete(t):await s.put(u,t),await i.done,u&&(!a||a.fid!==u.fid)&&JP(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(n){let e;const t=await S_(n.appConfig,r=>{const i=T7(r),s=E7(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===GT?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function T7(n){const e=n||{fid:p7(),registrationStatus:0};return t2(e)}function E7(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Lu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=b7(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:S7(n)}:{installationEntry:e}}async function b7(n,e){try{const t=await f7(n,e);return sy(n.appConfig,t)}catch(t){throw qP(t)&&t.customData.serverCode===409?await e2(n.appConfig):await sy(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function S7(n){let e=await Sk(n.appConfig);for(;e.registrationStatus===1;)await QP(100),e=await Sk(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Xb(n);return r||t}return e}function Sk(n){return S_(n,e=>{if(!e)throw Lu.create("installation-not-found");return t2(e)})}function t2(n){return w7(n)?{fid:n.fid,registrationStatus:0}:n}function w7(n){return n.registrationStatus===1&&n.registrationTime+jP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R7({appConfig:n,heartbeatServiceProvider:e},t){const r=C7(n,t),i=l7(n,t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:FP,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await YP(()=>fetch(r,u));if(c.ok){const h=await c.json();return GP(h)}else throw await KP("Generate Auth Token",c)}function C7(n,{fid:e}){return`${$P(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(n,e=!1){let t;const r=await S_(n.appConfig,s=>{if(!n2(s))throw Lu.create("not-registered");const a=s.authToken;if(!e&&I7(a))return s;if(a.requestStatus===1)return t=x7(n,e),s;{if(!navigator.onLine)throw Lu.create("app-offline");const u=N7(s);return t=k7(n,u),u}});return t?await t:r.authToken}async function x7(n,e){let t=await wk(n.appConfig);for(;t.authToken.requestStatus===1;)await QP(100),t=await wk(n.appConfig);const r=t.authToken;return r.requestStatus===0?Jb(n,e):r}function wk(n){return S_(n,e=>{if(!n2(e))throw Lu.create("not-registered");const t=e.authToken;return M7(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function k7(n,e){try{const t=await R7(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await sy(n.appConfig,r),t}catch(t){if(qP(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await e2(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await sy(n.appConfig,r)}throw t}}function n2(n){return n!==void 0&&n.registrationStatus===2}function I7(n){return n.requestStatus===2&&!O7(n)}function O7(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+i7}function N7(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function M7(n){return n.requestStatus===1&&n.requestTime+jP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D7(n){const e=n,{installationEntry:t,registrationPromise:r}=await Xb(e);return r?r.catch(console.error):Jb(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P7(n,e=!1){const t=n;return await L7(t),(await Jb(t,e)).token}async function L7(n){const{registrationPromise:e}=await Xb(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(n){if(!n||!n.options)throw gA("App Configuration");if(!n.name)throw gA("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw gA(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function gA(n){return Lu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="installations",U7="installations-internal",z7=n=>{const e=n.getProvider("app").getImmediate(),t=V7(e),r=kf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},B7=n=>{const e=n.getProvider("app").getImmediate(),t=kf(e,r2).getImmediate();return{getId:()=>D7(t),getToken:i=>P7(t,i)}};function j7(){Rs(new fs(r2,z7,"PUBLIC")),Rs(new fs(U7,B7,"PRIVATE"))}j7();ai(BP,Yb);ai(BP,Yb,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="analytics",F7="firebase_id",H7="origin",q7=60*1e3,$7="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new e_("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ls=new Gu("analytics","Analytics",G7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(n){if(!n.startsWith(Zb)){const e=ls.create("invalid-gtag-resource",{gtagURL:n});return li.warn(e.message),""}return n}function i2(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function W7(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Y7(n,e){const t=W7("firebase-js-sdk-policy",{createScriptURL:K7}),r=document.createElement("script"),i=`${Zb}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Q7(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function X7(n,e,t,r,i,s){const a=r[i];try{if(a)await e[a];else{const c=(await i2(t)).find(h=>h.measurementId===i);c&&await e[c.appId]}}catch(u){li.error(u)}n("config",i,s)}async function J7(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const u=await i2(t);for(const c of a){const h=u.find(g=>g.measurementId===c),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){li.error(s)}}function Z7(n,e,t,r){async function i(s,...a){try{if(s==="event"){const[u,c]=a;await J7(n,e,t,u,c)}else if(s==="config"){const[u,c]=a;await X7(n,e,t,r,u,c)}else if(s==="consent"){const[u,c]=a;n("consent",u,c)}else if(s==="get"){const[u,c,h]=a;n("get",u,c,h)}else if(s==="set"){const[u]=a;n("set",u)}else n(s,...a)}catch(u){li.error(u)}}return i}function e$(n,e,t,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Z7(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function t$(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Zb)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=30,r$=1e3;class i${constructor(e={},t=r$){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const s2=new i$;function s$(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function o$(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:s$(r)},s=$7.replace("{app-id}",t),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let u="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw ls.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u})}return a.json()}async function a$(n,e=s2,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ls.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ls.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new c$;return setTimeout(async()=>{u.abort()},q7),o2({appId:r,apiKey:i,measurementId:s},a,u,e)}async function o2(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=s2){var s;const{appId:a,measurementId:u}=n;try{await l$(r,e)}catch(c){if(u)return li.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:u};throw c}try{const c=await o$(n);return i.deleteThrottleMetadata(a),c}catch(c){const h=c;if(!u$(h)){if(i.deleteThrottleMetadata(a),u)return li.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw c}const p=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?WC(t,i.intervalMillis,n$):WC(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(a,g),li.debug(`Calling attemptFetch again in ${p} millis`),o2(n,g,r,i)}}function l$(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function u$(n){if(!(n instanceof ms)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class c${constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function f$(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,a=Object.assign(Object.assign({},r),{send_to:s});n("event",t,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h$(){if(eM())try{await tM()}catch(n){return li.warn(ls.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return li.warn(ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function d$(n,e,t,r,i,s,a){var u;const c=a$(n);c.then(A=>{t[A.measurementId]=A.appId,n.options.measurementId&&A.measurementId!==n.options.measurementId&&li.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>li.error(A)),e.push(c);const h=h$().then(A=>{if(A)return r.getId()}),[p,g]=await Promise.all([c,h]);t$(s)||Y7(s,p.measurementId),i("js",new Date);const _=(u=a==null?void 0:a.config)!==null&&u!==void 0?u:{};return _[H7]="firebase",_.update=!0,g!=null&&(_[F7]=g),i("config",p.measurementId,_),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e){this.app=e}_delete(){return delete yd[this.app.options.appId],Promise.resolve()}}let yd={},Ck=[];const xk={};let yA="dataLayer",m$="gtag",kk,a2,Ik=!1;function g$(){const n=[];if(ZN()&&n.push("This is a browser extension environment."),HB()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ls.create("invalid-analytics-context",{errorInfo:e});li.warn(t.message)}}function y$(n,e,t){g$();const r=n.options.appId;if(!r)throw ls.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)li.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ls.create("no-api-key");if(yd[r]!=null)throw ls.create("already-exists",{id:r});if(!Ik){Q7(yA);const{wrappedGtag:s,gtagCore:a}=e$(yd,Ck,xk,yA,m$);a2=s,kk=a,Ik=!0}return yd[r]=d$(n,Ck,xk,e,kk,yA,t),new p$(n)}function _$(n,e,t,r){n=hn(n),f$(a2,yd[n.app.options.appId],e,t,r).catch(i=>li.error(i))}const Ok="@firebase/analytics",Nk="0.10.12";function v$(){Rs(new fs(Rk,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return y$(r,i,t)},"PUBLIC")),Rs(new fs("analytics-internal",n,"PRIVATE")),ai(Ok,Nk),ai(Ok,Nk,"esm2017");function n(e){try{const t=e.getProvider(Rk).getImmediate();return{logEvent:(r,i,s)=>_$(t,r,i,s)}}catch(t){throw ls.create("interop-component-reg-failed",{reason:t})}}}v$();const A$={apiKey:"AIzaSyCCa-PxslkzcIawmDzjvD7NfpfKDDHW_cY",authDomain:"mydailyreed.firebaseapp.com",projectId:"mydailyreed",storageBucket:"mydailyreed.firebasestorage.app",messagingSenderId:"784473877562",appId:"1:784473877562:web:86db61e82986c1bdd39903",measurementId:"G-MT4S33PKD0"},eS=sM(A$),T$=Z8(eS),lu=iy(eS),w_=i5(eS),l2=iy(),E$=ND(w_,"blogs"),b$=async()=>(await A5(E$)).docs.map(e=>({id:e.id,...e.data()})),u2=async n=>{const e=wb(w_,"blogs",n),t=await v5(e);if(!t.exists())throw new Error("Blog not found");return{id:t.id,...t.data()}},S$=async n=>{if(!l2.currentUser)throw new Error("User not authenticated");return(await E5(ND(w_,"blogs"),{...n,likes:[],comments:[],datePosted:S5()})).id},Mk=async(n,e)=>{if(!l2.currentUser)throw new Error("Not authenticated");const r=wb(w_,"blogs",n);return await T5(r,e),{id:n,...e}};function c2(){return I.jsxs("div",{className:"loader",children:[I.jsx("div",{className:"bar1"}),I.jsx("div",{className:"bar2"}),I.jsx("div",{className:"bar3"}),I.jsx("div",{className:"bar4"}),I.jsx("div",{className:"bar5"}),I.jsx("div",{className:"bar6"}),I.jsx("div",{className:"bar7"}),I.jsx("div",{className:"bar8"}),I.jsx("div",{className:"bar9"}),I.jsx("div",{className:"bar10"}),I.jsx("div",{className:"bar11"}),I.jsx("div",{className:"bar12"})]})}const w$="/assets/Artc1-CST6bCyG.png";function KT({isVertical:n=!1,title:e,height:t,marginBottom:r,trending:i=!1}){const[s,a]=W.useState([]),[u,c]=W.useState(!0),[h,p]=W.useState(4),g=W.useRef(null),_=qu();return W.useEffect(()=>{(async()=>{try{c(!0);const T=await b$(),b=T.some(C=>typeof C.likes=="number");let S;i&&b?S=[...T].sort((C,L)=>(L.likes||0)-(C.likes||0)):S=[...T].sort((C,L)=>{var B,P,N,k;const z=((P=(B=C.datePosted)==null?void 0:B.toDate)==null?void 0:P.call(B))||new Date(0);return(((k=(N=L.datePosted)==null?void 0:N.toDate)==null?void 0:k.call(N))||new Date(0))-z}),a(S)}catch(T){console.error("Failed to fetch blogs:",T)}finally{c(!1)}})()},[i]),I.jsxs("section",{className:"display-column",children:[I.jsxs("div",{className:"title-container",children:[I.jsx("h1",{className:"outfit-font",children:e}),I.jsx("div",{className:"line-blog"})]}),I.jsx("div",{ref:g,className:`blog-column-container ${n?"vertical":"horizontal"}`,children:u?I.jsx(c2,{}):s.slice(0,h).map((A,T)=>{var b;return I.jsxs("div",{className:"blog-info-container",style:{marginBottom:r},onClick:()=>{_(`/singleBlog/${A.id}`),df("#nav")},children:[I.jsx("img",{src:A.imgUrl||w$,alt:A.title||"Blog image",style:{height:t}}),I.jsx("p",{className:"playfair-thin-font",children:((b=A.categories)==null?void 0:b[0])||"Uncategorized"}),I.jsx("h3",{children:A.title||"Untitled"}),I.jsx("p",{className:"playfair-thin-font silver-text",children:A.author||"Unknown Author"})]},A.id||T)})})]})}const R$="/assets/MDRLogoCup-BgPHFgxi.png",C$="/assets/MDRHeroBgPhone-CqPQrG5g.png";function x$(){const[n,e]=W.useState(window.innerWidth);return W.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),I.jsx("section",{className:"hero-main-container",children:n<=600?I.jsxs(I.Fragment,{children:[I.jsx("img",{src:C$}),I.jsx("h1",{className:"playfair-font green-text",children:"My"}),I.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),I.jsx("h1",{className:"playfair-font green-text",children:"Reed"}),I.jsx(Xa,{text:"See Blogs"})]}):I.jsxs(I.Fragment,{children:[I.jsx("img",{src:R$})," ",I.jsx("h1",{className:"playfair-font green-text",children:"My"}),I.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),I.jsx("h1",{style:{marginBottom:"10px"},className:"playfair-font green-text",children:"Reed"}),I.jsx(Xa,{text:"See Blogs"})]})})}function k$(){return I.jsxs("div",{className:"display-column",children:[I.jsx(x$,{}),I.jsxs("div",{style:{padding:"0px 20px"},className:"display-column ",children:[I.jsx(KT,{title:"Latest",isVertical:!1,marginBottom:"40px"}),I.jsx(KT,{title:"Trending",isVertical:!1,marginBottom:"40px",trending:!0})]})]})}const I$={element:k$()};function WT({author:n}){return I.jsx("div",{className:"sidebar-main-container silver-bg",children:I.jsx(KT,{title:"Latest",marginBottom:"20px"})})}function O$(){return I.jsxs("section",{className:"about-info-main-section",children:[I.jsxs("div",{className:"about-info",children:[I.jsx("h3",{className:"outfit-thin-font",children:"My Daily Reed. When you read and respond, in any way, it’s an inexplicable connection. PLEASE share your thoughts. The space between a writer and the reader is sacred. Because there are only so many heartbeats and pen strokes we can share in this life. What we share should be thought-provoking, meaningful, and dare I say. FUN!"}),I.jsxs("ul",{className:"playfair-font",children:[I.jsx("li",{children:"Monday-Devotion"}),I.jsx("li",{children:"Tuesday-Article"}),I.jsx("li",{children:"Wednesday-Inspiration/Insight"}),I.jsx("li",{children:"Thursday-Lessons from a Grocery Store"}),I.jsx("li",{children:"Friday-Your Turn"})]})]}),I.jsx(WT,{author:"My Daily Reed"})]})}const N$="/assets/MDRAboutTree-JE1PMwgt.png";function M$(){return I.jsxs("section",{className:"about-title-main-container charcoal-bg",children:[I.jsx("h1",{className:"playfair-font ",children:"My Daily Reed"}),I.jsx("img",{src:N$}),I.jsx("h1",{className:"playfair-font",children:"About"})]})}function D$(){return I.jsxs("div",{className:"display-column",children:[I.jsx(M$,{}),I.jsx(O$,{})]})}const P$={element:D$()};/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:f2,setPrototypeOf:Dk,isFrozen:L$,getPrototypeOf:V$,getOwnPropertyDescriptor:U$}=Object;let{freeze:Fr,seal:ds,create:h2}=Object,{apply:YT,construct:QT}=typeof Reflect<"u"&&Reflect;Fr||(Fr=function(e){return e});ds||(ds=function(e){return e});YT||(YT=function(e,t,r){return e.apply(t,r)});QT||(QT=function(e,t){return new e(...t)});const $m=Hr(Array.prototype.forEach),z$=Hr(Array.prototype.lastIndexOf),Pk=Hr(Array.prototype.pop),jh=Hr(Array.prototype.push),B$=Hr(Array.prototype.splice),Ag=Hr(String.prototype.toLowerCase),_A=Hr(String.prototype.toString),Lk=Hr(String.prototype.match),Fh=Hr(String.prototype.replace),j$=Hr(String.prototype.indexOf),F$=Hr(String.prototype.trim),Es=Hr(Object.prototype.hasOwnProperty),zr=Hr(RegExp.prototype.test),Hh=H$(TypeError);function Hr(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return YT(n,e,r)}}function H$(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return QT(n,t)}}function mt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ag;Dk&&Dk(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(L$(e)||(e[r]=s),i=s)}n[i]=!0}return n}function q$(n){for(let e=0;e<n.length;e++)Es(n,e)||(n[e]=null);return n}function ou(n){const e=h2(null);for(const[t,r]of f2(n))Es(n,t)&&(Array.isArray(r)?e[t]=q$(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=ou(r):e[t]=r);return e}function qh(n,e){for(;n!==null;){const r=U$(n,e);if(r){if(r.get)return Hr(r.get);if(typeof r.value=="function")return Hr(r.value)}n=V$(n)}function t(){return null}return t}const Vk=Fr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vA=Fr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),AA=Fr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$$=Fr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),TA=Fr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),G$=Fr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Uk=Fr(["#text"]),zk=Fr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),EA=Fr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bk=Fr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gm=Fr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K$=ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W$=ds(/<%[\w\W]*|[\w\W]*%>/gm),Y$=ds(/\$\{[\w\W]*/gm),Q$=ds(/^data-[\-\w.\u00B7-\uFFFF]+$/),X$=ds(/^aria-[\-\w]+$/),d2=ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),J$=ds(/^(?:\w+script|data):/i),Z$=ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),p2=ds(/^html$/i),eG=ds(/^[a-z][.\w]*(-[.\w]+)+$/i);var jk=Object.freeze({__proto__:null,ARIA_ATTR:X$,ATTR_WHITESPACE:Z$,CUSTOM_ELEMENT:eG,DATA_ATTR:Q$,DOCTYPE_NAME:p2,ERB_EXPR:W$,IS_ALLOWED_URI:d2,IS_SCRIPT_OR_DATA:J$,MUSTACHE_EXPR:K$,TMPLIT_EXPR:Y$});const $h={element:1,text:3,progressingInstruction:7,comment:8,document:9},tG=function(){return typeof window>"u"?null:window},nG=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Fk=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function m2(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tG();const e=ye=>m2(ye);if(e.version="3.2.5",e.removed=[],!n||!n.document||n.document.nodeType!==$h.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:u,Element:c,NodeFilter:h,NamedNodeMap:p=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:_,trustedTypes:A}=n,T=c.prototype,b=qh(T,"cloneNode"),S=qh(T,"remove"),C=qh(T,"nextSibling"),L=qh(T,"childNodes"),z=qh(T,"parentNode");if(typeof a=="function"){const ye=t.createElement("template");ye.content&&ye.content.ownerDocument&&(t=ye.content.ownerDocument)}let q,B="";const{implementation:P,createNodeIterator:N,createDocumentFragment:k,getElementsByTagName:x}=t,{importNode:U}=r;let V=Fk();e.isSupported=typeof f2=="function"&&typeof z=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:j,ERB_EXPR:D,TMPLIT_EXPR:Ce,DATA_ATTR:Oe,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:Ae,CUSTOM_ELEMENT:qe}=jk;let{IS_ALLOWED_URI:H}=jk,ie=null;const _e=mt({},[...Vk,...vA,...AA,...TA,...Uk]);let le=null;const Se=mt({},[...zk,...EA,...Bk,...Gm]);let we=Object.seal(h2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ve=null,Kt=null,Rt=!0,mr=!0,Ut=!1,On=!0,Zn=!1,di=!0,Xt=!1,gs=!1,ks=!1,on=!1,Is=!1,zi=!1,ys=!0,Bi=!1;const pi="user-content-";let gr=!0,Kr=!1,Nr={},ut=null;const et=mt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Nn=null;const Jt=mt({},["audio","video","img","source","image","track"]);let Os=null;const Mr=mt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dr="http://www.w3.org/1998/Math/MathML",Pr="http://www.w3.org/2000/svg",Tn="http://www.w3.org/1999/xhtml";let En=Tn,mi=!1,yr=null;const Ns=mt({},[Dr,Pr,Tn],_A);let Wr=mt({},["mi","mo","mn","ms","mtext"]),ji=mt({},["annotation-xml"]);const Yr=mt({},["title","style","font","a","script"]);let er=null;const Ms=["application/xhtml+xml","text/html"],tr="text/html";let Ot=null,nr=null;const Ds=t.createElement("form"),$=function(G){return G instanceof RegExp||G instanceof Function},X=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(nr&&nr===G)){if((!G||typeof G!="object")&&(G={}),G=ou(G),er=Ms.indexOf(G.PARSER_MEDIA_TYPE)===-1?tr:G.PARSER_MEDIA_TYPE,Ot=er==="application/xhtml+xml"?_A:Ag,ie=Es(G,"ALLOWED_TAGS")?mt({},G.ALLOWED_TAGS,Ot):_e,le=Es(G,"ALLOWED_ATTR")?mt({},G.ALLOWED_ATTR,Ot):Se,yr=Es(G,"ALLOWED_NAMESPACES")?mt({},G.ALLOWED_NAMESPACES,_A):Ns,Os=Es(G,"ADD_URI_SAFE_ATTR")?mt(ou(Mr),G.ADD_URI_SAFE_ATTR,Ot):Mr,Nn=Es(G,"ADD_DATA_URI_TAGS")?mt(ou(Jt),G.ADD_DATA_URI_TAGS,Ot):Jt,ut=Es(G,"FORBID_CONTENTS")?mt({},G.FORBID_CONTENTS,Ot):et,Ve=Es(G,"FORBID_TAGS")?mt({},G.FORBID_TAGS,Ot):{},Kt=Es(G,"FORBID_ATTR")?mt({},G.FORBID_ATTR,Ot):{},Nr=Es(G,"USE_PROFILES")?G.USE_PROFILES:!1,Rt=G.ALLOW_ARIA_ATTR!==!1,mr=G.ALLOW_DATA_ATTR!==!1,Ut=G.ALLOW_UNKNOWN_PROTOCOLS||!1,On=G.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Zn=G.SAFE_FOR_TEMPLATES||!1,di=G.SAFE_FOR_XML!==!1,Xt=G.WHOLE_DOCUMENT||!1,on=G.RETURN_DOM||!1,Is=G.RETURN_DOM_FRAGMENT||!1,zi=G.RETURN_TRUSTED_TYPE||!1,ks=G.FORCE_BODY||!1,ys=G.SANITIZE_DOM!==!1,Bi=G.SANITIZE_NAMED_PROPS||!1,gr=G.KEEP_CONTENT!==!1,Kr=G.IN_PLACE||!1,H=G.ALLOWED_URI_REGEXP||d2,En=G.NAMESPACE||Tn,Wr=G.MATHML_TEXT_INTEGRATION_POINTS||Wr,ji=G.HTML_INTEGRATION_POINTS||ji,we=G.CUSTOM_ELEMENT_HANDLING||{},G.CUSTOM_ELEMENT_HANDLING&&$(G.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(we.tagNameCheck=G.CUSTOM_ELEMENT_HANDLING.tagNameCheck),G.CUSTOM_ELEMENT_HANDLING&&$(G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(we.attributeNameCheck=G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),G.CUSTOM_ELEMENT_HANDLING&&typeof G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(we.allowCustomizedBuiltInElements=G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zn&&(mr=!1),Is&&(on=!0),Nr&&(ie=mt({},Uk),le=[],Nr.html===!0&&(mt(ie,Vk),mt(le,zk)),Nr.svg===!0&&(mt(ie,vA),mt(le,EA),mt(le,Gm)),Nr.svgFilters===!0&&(mt(ie,AA),mt(le,EA),mt(le,Gm)),Nr.mathMl===!0&&(mt(ie,TA),mt(le,Bk),mt(le,Gm))),G.ADD_TAGS&&(ie===_e&&(ie=ou(ie)),mt(ie,G.ADD_TAGS,Ot)),G.ADD_ATTR&&(le===Se&&(le=ou(le)),mt(le,G.ADD_ATTR,Ot)),G.ADD_URI_SAFE_ATTR&&mt(Os,G.ADD_URI_SAFE_ATTR,Ot),G.FORBID_CONTENTS&&(ut===et&&(ut=ou(ut)),mt(ut,G.FORBID_CONTENTS,Ot)),gr&&(ie["#text"]=!0),Xt&&mt(ie,["html","head","body"]),ie.table&&(mt(ie,["tbody"]),delete Ve.tbody),G.TRUSTED_TYPES_POLICY){if(typeof G.TRUSTED_TYPES_POLICY.createHTML!="function")throw Hh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof G.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Hh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');q=G.TRUSTED_TYPES_POLICY,B=q.createHTML("")}else q===void 0&&(q=nG(A,i)),q!==null&&typeof B=="string"&&(B=q.createHTML(""));Fr&&Fr(G),nr=G}},Z=mt({},[...vA,...AA,...$$]),ce=mt({},[...TA,...G$]),ge=function(G){let de=z(G);(!de||!de.tagName)&&(de={namespaceURI:En,tagName:"template"});const be=Ag(G.tagName),tt=Ag(de.tagName);return yr[G.namespaceURI]?G.namespaceURI===Pr?de.namespaceURI===Tn?be==="svg":de.namespaceURI===Dr?be==="svg"&&(tt==="annotation-xml"||Wr[tt]):!!Z[be]:G.namespaceURI===Dr?de.namespaceURI===Tn?be==="math":de.namespaceURI===Pr?be==="math"&&ji[tt]:!!ce[be]:G.namespaceURI===Tn?de.namespaceURI===Pr&&!ji[tt]||de.namespaceURI===Dr&&!Wr[tt]?!1:!ce[be]&&(Yr[be]||!Z[be]):!!(er==="application/xhtml+xml"&&yr[G.namespaceURI]):!1},Ee=function(G){jh(e.removed,{element:G});try{z(G).removeChild(G)}catch{S(G)}},Ue=function(G,de){try{jh(e.removed,{attribute:de.getAttributeNode(G),from:de})}catch{jh(e.removed,{attribute:null,from:de})}if(de.removeAttribute(G),G==="is")if(on||Is)try{Ee(de)}catch{}else try{de.setAttribute(G,"")}catch{}},ke=function(G){let de=null,be=null;if(ks)G="<remove></remove>"+G;else{const Ct=Lk(G,/^[\r\n\t ]+/);be=Ct&&Ct[0]}er==="application/xhtml+xml"&&En===Tn&&(G='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+G+"</body></html>");const tt=q?q.createHTML(G):G;if(En===Tn)try{de=new _().parseFromString(tt,er)}catch{}if(!de||!de.documentElement){de=P.createDocument(En,"template",null);try{de.documentElement.innerHTML=mi?B:tt}catch{}}const zt=de.body||de.documentElement;return G&&be&&zt.insertBefore(t.createTextNode(be),zt.childNodes[0]||null),En===Tn?x.call(de,Xt?"html":"body")[0]:Xt?de.documentElement:zt},Ne=function(G){return N.call(G.ownerDocument||G,G,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Le=function(G){return G instanceof g&&(typeof G.nodeName!="string"||typeof G.textContent!="string"||typeof G.removeChild!="function"||!(G.attributes instanceof p)||typeof G.removeAttribute!="function"||typeof G.setAttribute!="function"||typeof G.namespaceURI!="string"||typeof G.insertBefore!="function"||typeof G.hasChildNodes!="function")},je=function(G){return typeof u=="function"&&G instanceof u};function Re(ye,G,de){$m(ye,be=>{be.call(e,G,de,nr)})}const Fe=function(G){let de=null;if(Re(V.beforeSanitizeElements,G,null),Le(G))return Ee(G),!0;const be=Ot(G.nodeName);if(Re(V.uponSanitizeElement,G,{tagName:be,allowedTags:ie}),G.hasChildNodes()&&!je(G.firstElementChild)&&zr(/<[/\w!]/g,G.innerHTML)&&zr(/<[/\w!]/g,G.textContent)||G.nodeType===$h.progressingInstruction||di&&G.nodeType===$h.comment&&zr(/<[/\w]/g,G.data))return Ee(G),!0;if(!ie[be]||Ve[be]){if(!Ve[be]&&St(be)&&(we.tagNameCheck instanceof RegExp&&zr(we.tagNameCheck,be)||we.tagNameCheck instanceof Function&&we.tagNameCheck(be)))return!1;if(gr&&!ut[be]){const tt=z(G)||G.parentNode,zt=L(G)||G.childNodes;if(zt&&tt){const Ct=zt.length;for(let Zt=Ct-1;Zt>=0;--Zt){const Bt=b(zt[Zt],!0);Bt.__removalCount=(G.__removalCount||0)+1,tt.insertBefore(Bt,C(G))}}}return Ee(G),!0}return G instanceof c&&!ge(G)||(be==="noscript"||be==="noembed"||be==="noframes")&&zr(/<\/no(script|embed|frames)/i,G.innerHTML)?(Ee(G),!0):(Zn&&G.nodeType===$h.text&&(de=G.textContent,$m([j,D,Ce],tt=>{de=Fh(de,tt," ")}),G.textContent!==de&&(jh(e.removed,{element:G.cloneNode()}),G.textContent=de)),Re(V.afterSanitizeElements,G,null),!1)},it=function(G,de,be){if(ys&&(de==="id"||de==="name")&&(be in t||be in Ds))return!1;if(!(mr&&!Kt[de]&&zr(Oe,de))){if(!(Rt&&zr(Y,de))){if(!le[de]||Kt[de]){if(!(St(G)&&(we.tagNameCheck instanceof RegExp&&zr(we.tagNameCheck,G)||we.tagNameCheck instanceof Function&&we.tagNameCheck(G))&&(we.attributeNameCheck instanceof RegExp&&zr(we.attributeNameCheck,de)||we.attributeNameCheck instanceof Function&&we.attributeNameCheck(de))||de==="is"&&we.allowCustomizedBuiltInElements&&(we.tagNameCheck instanceof RegExp&&zr(we.tagNameCheck,be)||we.tagNameCheck instanceof Function&&we.tagNameCheck(be))))return!1}else if(!Os[de]){if(!zr(H,Fh(be,Ae,""))){if(!((de==="src"||de==="xlink:href"||de==="href")&&G!=="script"&&j$(be,"data:")===0&&Nn[G])){if(!(Ut&&!zr(oe,Fh(be,Ae,"")))){if(be)return!1}}}}}}return!0},St=function(G){return G!=="annotation-xml"&&Lk(G,qe)},_t=function(G){Re(V.beforeSanitizeAttributes,G,null);const{attributes:de}=G;if(!de||Le(G))return;const be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le,forceKeepAttr:void 0};let tt=de.length;for(;tt--;){const zt=de[tt],{name:Ct,namespaceURI:Zt,value:Bt}=zt,mn=Ot(Ct);let Pe=Ct==="value"?Bt:F$(Bt);if(be.attrName=mn,be.attrValue=Pe,be.keepAttr=!0,be.forceKeepAttr=void 0,Re(V.uponSanitizeAttribute,G,be),Pe=be.attrValue,Bi&&(mn==="id"||mn==="name")&&(Ue(Ct,G),Pe=pi+Pe),di&&zr(/((--!?|])>)|<\/(style|title)/i,Pe)){Ue(Ct,G);continue}if(be.forceKeepAttr||(Ue(Ct,G),!be.keepAttr))continue;if(!On&&zr(/\/>/i,Pe)){Ue(Ct,G);continue}Zn&&$m([j,D,Ce],_r=>{Pe=Fh(Pe,_r," ")});const en=Ot(G.nodeName);if(it(en,mn,Pe)){if(q&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!Zt)switch(A.getAttributeType(en,mn)){case"TrustedHTML":{Pe=q.createHTML(Pe);break}case"TrustedScriptURL":{Pe=q.createScriptURL(Pe);break}}try{Zt?G.setAttributeNS(Zt,Ct,Pe):G.setAttribute(Ct,Pe),Le(G)?Ee(G):Pk(e.removed)}catch{}}}Re(V.afterSanitizeAttributes,G,null)},ht=function ye(G){let de=null;const be=Ne(G);for(Re(V.beforeSanitizeShadowDOM,G,null);de=be.nextNode();)Re(V.uponSanitizeShadowNode,de,null),Fe(de),_t(de),de.content instanceof s&&ye(de.content);Re(V.afterSanitizeShadowDOM,G,null)};return e.sanitize=function(ye){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=null,be=null,tt=null,zt=null;if(mi=!ye,mi&&(ye="<!-->"),typeof ye!="string"&&!je(ye))if(typeof ye.toString=="function"){if(ye=ye.toString(),typeof ye!="string")throw Hh("dirty is not a string, aborting")}else throw Hh("toString is not a function");if(!e.isSupported)return ye;if(gs||X(G),e.removed=[],typeof ye=="string"&&(Kr=!1),Kr){if(ye.nodeName){const Bt=Ot(ye.nodeName);if(!ie[Bt]||Ve[Bt])throw Hh("root node is forbidden and cannot be sanitized in-place")}}else if(ye instanceof u)de=ke("<!---->"),be=de.ownerDocument.importNode(ye,!0),be.nodeType===$h.element&&be.nodeName==="BODY"||be.nodeName==="HTML"?de=be:de.appendChild(be);else{if(!on&&!Zn&&!Xt&&ye.indexOf("<")===-1)return q&&zi?q.createHTML(ye):ye;if(de=ke(ye),!de)return on?null:zi?B:""}de&&ks&&Ee(de.firstChild);const Ct=Ne(Kr?ye:de);for(;tt=Ct.nextNode();)Fe(tt),_t(tt),tt.content instanceof s&&ht(tt.content);if(Kr)return ye;if(on){if(Is)for(zt=k.call(de.ownerDocument);de.firstChild;)zt.appendChild(de.firstChild);else zt=de;return(le.shadowroot||le.shadowrootmode)&&(zt=U.call(r,zt,!0)),zt}let Zt=Xt?de.outerHTML:de.innerHTML;return Xt&&ie["!doctype"]&&de.ownerDocument&&de.ownerDocument.doctype&&de.ownerDocument.doctype.name&&zr(p2,de.ownerDocument.doctype.name)&&(Zt="<!DOCTYPE "+de.ownerDocument.doctype.name+`>
`+Zt),Zn&&$m([j,D,Ce],Bt=>{Zt=Fh(Zt,Bt," ")}),q&&zi?q.createHTML(Zt):Zt},e.setConfig=function(){let ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(ye),gs=!0},e.clearConfig=function(){nr=null,gs=!1},e.isValidAttribute=function(ye,G,de){nr||X({});const be=Ot(ye),tt=Ot(G);return it(be,tt,de)},e.addHook=function(ye,G){typeof G=="function"&&jh(V[ye],G)},e.removeHook=function(ye,G){if(G!==void 0){const de=z$(V[ye],G);return de===-1?void 0:B$(V[ye],de,1)[0]}return Pk(V[ye])},e.removeHooks=function(ye){V[ye]=[]},e.removeAllHooks=function(){V=Fk()},e}var g2=m2();function Hk({title:n,subTitle:e,author:t,datePosted:r,readTime:i,titleImg:s,part:a,description:u,redirectLink:c}){return I.jsxs("div",{className:"sb-title-main-container charcoal-bg white-text",children:[I.jsx("h1",{className:"sb-title  playfair-font",children:n}),I.jsx("h3",{className:"sb-title playfair-font",style:{marginBottom:"40px"},children:e}),a&&I.jsx("h6",{className:"sb-part playfair-font",children:"Part 2"}),I.jsx("img",{src:s}),I.jsx("p",{className:"sb-title-blerb outfit-thin-font",dangerouslySetInnerHTML:{__html:g2.sanitize(u)}}),c&&I.jsx(Xa,{text:"Part 1"}),I.jsxs("div",{className:"sb-title-info-container",children:[I.jsxs("div",{className:"sb-title-info",children:[I.jsx("h6",{className:"outfit-xthin-font",children:"Author:"}),I.jsx("h5",{className:"playfair-font",children:t})]}),I.jsxs("div",{className:"sb-title-info",children:[I.jsx("h6",{className:"outfit-xthin-font",children:"Read Time:"}),I.jsx("h5",{className:"playfair-font",children:i})]}),I.jsxs("div",{className:"sb-title-info",children:[I.jsx("h6",{className:"outfit-xthin-font",children:"Date Posted:"}),I.jsxs("h5",{className:"playfair-font",children:[" ",new Date(r).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]})]})]})]})}function qk({content:n}){return Array.isArray(n)?I.jsx("div",{className:"sb-article-main-container",children:I.jsx("div",{className:"sb-article-container",children:n.filter(e=>e.type!=="Description").map((e,t)=>e.type==="Article"?I.jsx("div",{className:"outfit-thin-font sb-article-section",dangerouslySetInnerHTML:{__html:g2.sanitize(e.value)}},e._id||t):e.type==="Image"?I.jsx("img",{src:e.value,alt:`article-section-${t}`,className:"sb-article-image"},e._id||t):null)})}):I.jsx(op,{})}const rG="/assets/likeFilled-BbC8tfBI.png",iG="/assets/likeEmpty-BD2cNi-E.png";function $k(){var h;const{id:n}=PO(),[e,t]=W.useState(null),[r,i]=W.useState(!1),[s,a]=W.useState("");W.useEffect(()=>{(async()=>{try{const g=await u2(n);t(g);const _=iy().currentUser;if(_){console.log(g);const A=g.likes.includes(_.uid);i(A)}}catch(g){console.error("Failed to fetch blog:",g)}})()},[n]);const u=async()=>{if(!e)return;const p=iy().currentUser;if(!p)return;const g=p.uid,_=e.likes.includes(g),A=_?e.likes.filter(b=>b!==g):[...e.likes,g],T={...e,likes:A};try{await Mk(n,T),t(T),i(!_)}catch(b){console.error("Failed to update likes:",b)}},c=async()=>{if(!s.trim()||!e)return;const p=[...e.comments,{name:"Anonymous",text:s}],g={...e,comments:p};try{await Mk(n,g),t(g),a("")}catch(_){console.error("Failed to submit comment:",_)}};return e?I.jsxs("section",{className:"social-main-container",children:[I.jsxs("div",{className:"like-and-comment-container",children:[I.jsxs("div",{className:"like-and-share",children:[I.jsxs("div",{className:"like-container",children:[I.jsxs("div",{className:"like",children:[I.jsx("img",{src:r?rG:iG,onClick:u,alt:"like button"}),I.jsxs("p",{children:[e.likes.length||0," likes"]})]}),I.jsx("h1",{className:"outfit-font",children:"Leave a like"})]}),I.jsxs("div",{className:"share-container",children:[I.jsx("h1",{className:"outfit-font",children:"Share This:"}),I.jsxs("div",{children:[I.jsx(Xa,{text:"X",fontSize:".8rem"}),I.jsx(Xa,{text:"Facebook",fontSize:".8rem"})]})]})]}),I.jsxs("div",{className:"leave-comment",children:[I.jsx("h1",{className:"outfit-font",children:"Leave a Comment:"}),I.jsx("textarea",{className:"outfit-font silver-bg",value:s,onChange:p=>a(p.target.value),placeholder:"leave a comment..."}),I.jsx(Xa,{text:"Submit",margin:"0 auto",fontSize:"1.3rem",onClick:c})]})]}),I.jsxs("div",{className:"comment-container",children:[I.jsx("h1",{className:"outfit-font",children:"Comments:"}),(h=e.comments)==null?void 0:h.map((p,g)=>I.jsxs("div",{className:"comments silver-bg",children:[I.jsxs("h1",{className:"commenter-name outfit-font",children:[p.name||"Reader",":"]}),I.jsx("p",{className:"comment outfit-font",children:p.text})]},g))]})]}):I.jsx("p",{children:"Loading..."})}function sG(){var s,a;const[n,e]=W.useState(window.innerWidth),[t,r]=W.useState(null),{id:i}=PO();return W.useEffect(()=>{const u=()=>e(window.innerWidth);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),W.useEffect(()=>{(async()=>{try{const c=await u2(i);r(c)}catch(c){console.error("Failed to fetch blog:",c)}})(),df("#nav")},[i]),I.jsx("section",{id:"single-blog",className:"display-column",children:t?I.jsxs(I.Fragment,{children:[" ",n<600?I.jsxs(I.Fragment,{children:[I.jsx(Hk,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,part:t.part,description:(s=t.content.find(u=>u.type==="Description"))==null?void 0:s.value,redirectLink:t.redirectLink}),I.jsx("div",{className:"padding-40",children:I.jsx(qk,{content:t.content})}),I.jsx($k,{}),I.jsx(WT,{author:"My Daily Reed"})]}):I.jsxs(I.Fragment,{children:[I.jsx(Hk,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,part:t.part,description:(a=t.content.find(u=>u.type==="Description"))==null?void 0:a.value,redirectLink:t.redirectLink}),I.jsxs("div",{className:"flex-between padding-40 pos-relative",children:[I.jsx(qk,{content:t.content}),I.jsx(WT,{author:"My Daily Reed"})]}),I.jsx($k,{})]})]}):I.jsx(I.Fragment,{children:I.jsx(op,{})})})}const oG={element:I.jsx(sG,{})};function aG(){const[n,e]=W.useState(!1),[t,r]=W.useState(""),[i,s]=W.useState(""),[a,u]=W.useState(""),c=qu();W.useEffect(()=>{const _=fP(lu,A=>{A&&(e(!0),setTimeout(()=>{c("/dashboard")},[1e3]))});return()=>_()},[]);const h=async _=>{_.preventDefault();try{await RH(lu,t,i),c("/dashboard")}catch{u("Incorrect Email/Password")}},p=async()=>{const _=new $o,A="urok.dance@gmail.com";try{(await YH(lu,_)).user.email!==A?(await lu.signOut(),u("Access denied: unauthorized Google account.")):(console.log("Google login successful"),c("/dashboard"))}catch(T){console.error(T),u("Google sign-in failed.")}},g=async()=>{if(!t){u("Please enter your email first.");return}try{await wH(lu,t),alert("Password reset email sent. Check your inbox.")}catch(_){u(_.message)}};return I.jsx(I.Fragment,{children:n?I.jsx(I.Fragment,{children:I.jsx(op,{})}):I.jsxs(I.Fragment,{children:[" ",I.jsx("section",{className:"display-column charcoal-bg neg-marg",children:I.jsxs("div",{className:"form-container green-bg",children:[I.jsx("p",{className:"title outfit-font",children:"Login"}),I.jsxs("form",{className:"form",onSubmit:h,children:[I.jsxs("div",{className:"input-group",children:[I.jsx("label",{htmlFor:"email",className:"outfit-thin-font",children:"Email"}),I.jsx("input",{type:"text",name:"email",placeholder:"email@email.com",id:"email",value:t,onChange:_=>r(_.target.value)})]}),I.jsxs("div",{className:"input-group",children:[I.jsx("label",{htmlFor:"password",className:"outfit-thin-font",children:"Password"}),I.jsx("input",{type:"password",name:"password",id:"password",placeholder:"password",value:i,onChange:_=>s(_.target.value)}),I.jsx("div",{className:"forgot",children:I.jsx("button",{type:"button",className:"forgot-password-btn outfit-font",onClick:g,children:"Forgot Password?"})})]}),I.jsx("button",{type:"submit",className:"sign charcoal-bg",children:"Sign in"}),a&&I.jsx("p",{className:"error-message",children:a})]}),I.jsxs("div",{className:"social-message",children:[I.jsx("div",{className:"line"}),I.jsx("p",{className:"message",children:"Login with Google"}),I.jsx("div",{className:"line"})]}),I.jsx("div",{className:"social-icons",children:I.jsx("button",{type:"button","aria-label":"Log in with Google",className:"icon",onClick:p,children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:I.jsx("path",{d:"M16.318 13.714v5.484h9.078c-0.37 2.354-2.745 6.901-9.078 6.901-5.458 0-9.917-4.521-9.917-10.099s4.458-10.099 9.917-10.099c3.109 0 5.193 1.318 6.38 2.464l4.339-4.182c-2.786-2.599-6.396-4.182-10.719-4.182-8.844 0-16 7.151-16 16s7.156 16 16 16c9.234 0 15.365-6.49 15.365-15.635 0-1.052-0.115-1.854-0.255-2.651z"})})})})]})})]})})}const lG={element:I.jsx(aG,{})},y2=W.createContext();function uG({children:n}){const[e,t]=W.useState(null),[r,i]=W.useState(!0);return W.useEffect(()=>{const s=fP(lu,a=>{t(a),i(!1)});return()=>s()},[]),I.jsx(y2.Provider,{value:{currentUser:e},children:r?I.jsx(op,{}):n})}function cG(){return W.useContext(y2)}function Gk({children:n}){const{currentUser:e}=cG();return e?n:I.jsx(_z,{to:"/login"})}const fG="/assets/dashboardBg-Dtd5WdDk.jpg",hG="/assets/dashboardBgPhone-Dn_QPInV.jpg";function dG(){const[n,e]=W.useState(window.innerWidth);return W.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),I.jsx("section",{className:"db-hero-main-container",children:n<=600?I.jsxs(I.Fragment,{children:[I.jsx("img",{src:hG}),I.jsx("h1",{className:"outfit-font ",children:"Welcome"}),I.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),I.jsx("h1",{className:"outfit-font green-text",children:"Dashboard"})]}):I.jsxs(I.Fragment,{children:[I.jsx("img",{src:fG})," ",I.jsx("h1",{className:"outfit-font green-text",children:"Welcome"}),I.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),I.jsx("h1",{style:{marginBottom:"10px"},className:"outfit-font green-text",children:"Dashboard"})]})})}const pG="/assets/add-xRAkvvij.png",mG="/assets/edit-MfBVzi6v.png";function gG(){const n=qu(),e=async()=>{try{await kH(lu),n("/login")}catch(t){console.error("Error signing out:",t)}};return I.jsxs("section",{style:{height:"600px",padding:"40px",gap:"50px"},className:"display-column charcoal-bg neg-marg",children:[I.jsxs("div",{className:"db-direction-container green-bg",onClick:t=>{t.preventDefault(),n("/createBlog"),window.scrollTo(0,0)},children:[I.jsx("h1",{className:"outfit-font",children:"Create a Blog Post"}),I.jsx("img",{src:pG})]}),I.jsxs("div",{className:"db-direction-container green-bg",children:[I.jsx("h1",{className:"outfit-font",children:"Edit a Blog Post"}),I.jsx("img",{src:mG})]}),I.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:"1.5rem"},onClick:()=>{e(),window.scrollTo(0,0)},children:"Logout"})]})}function yG(){return I.jsxs("section",{className:"dashboard-main",children:[I.jsx(dG,{}),I.jsx(gG,{})]})}const Kk=async(n,e="blogFolder")=>{if(!n)throw new Error("No file provided");const t=J8(T$,`${e}/${Date.now()}-${n.name}`);return await Q8(t,n),await X8(t)};function lr(n){this.content=n}lr.prototype={constructor:lr,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new lr(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new lr(t)},addToStart:function(n,e){return new lr([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new lr(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new lr(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=lr.from(n),n.size?new lr(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=lr.from(n),n.size?new lr(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=lr.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};lr.from=function(n){if(n instanceof lr)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new lr(e)};function _2(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=_2(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function v2(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),u=e.child(--s),c=a.nodeSize;if(a==u){t-=c,r-=c;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let h=0,p=Math.min(a.text.length,u.text.length);for(;h<p&&a.text[a.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let h=v2(a.content,u.content,t-1,r-1);if(h)return h}t-=c,r-=c}}class me{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,u=0;u<t;a++){let c=this.content[a],h=u+c.nodeSize;if(h>e&&r(c,i+u,s||null,a)!==!1&&c.content.size){let p=u+1;c.nodesBetween(Math.max(0,e-p),Math.min(c.content.size,t-p),r,i+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(u,c)=>{let h=u.isText?u.text.slice(Math.max(e,c)-c,t-c):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(a?a=!1:s+=r),s+=h},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new me(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let u=this.content[s],c=a+u.nodeSize;c>e&&((a<e||c>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=c}return new me(r,i)}cutByIndex(e,t){return e==t?me.empty:e==0&&t==this.content.length?this:new me(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new me(i,s)}addToStart(e){return new me([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new me(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return _2(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return v2(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Km(0,e);if(e==this.size)return Km(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),a=i+s.nodeSize;if(a>=e)return a==e||t>0?Km(r+1,a):Km(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return me.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new me(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return me.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new me(t||e,r)}static from(e){if(!e)return me.empty;if(e instanceof me)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new me([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}me.empty=new me([],0);const bA={index:0,offset:0};function Km(n,e){return bA.index=n,bA.offset=e,bA}function oy(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!oy(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!oy(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let qt=class XT{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&oy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return XT.none;if(e instanceof XT)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};qt.none=[];class ay extends Error{}class xe{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=T2(this.content,e+this.openStart,t);return r&&new xe(r,this.openStart,this.openEnd)}removeBetween(e,t){return new xe(A2(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return xe.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xe(me.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new xe(e,r,i)}}xe.empty=new xe(me.empty,0,0);function A2(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||s.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(A2(s.content,e-i-1,t-i-1)))}function T2(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=T2(a.content,e-s-1,t);return u&&n.replaceChild(i,a.copy(u))}function _G(n,e,t){if(t.openStart>n.depth)throw new ay("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new ay("Inconsistent open depths");return E2(n,e,t,0)}function E2(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=E2(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return Ru(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=vG(t,n);return Ru(s,S2(n,a,u,e,r))}else return Ru(s,ly(n,e,r))}function b2(n,e){if(!e.type.compatibleContent(n.type))throw new ay("Cannot join "+e.type.name+" onto "+n.type.name)}function JT(n,e,t){let r=n.node(t);return b2(r,e.node(t)),r}function wu(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function _d(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(wu(n.nodeAfter,r),s++));for(let u=s;u<a;u++)wu(i.child(u),r);e&&e.depth==t&&e.textOffset&&wu(e.nodeBefore,r)}function Ru(n,e){return n.type.checkContent(e),n.copy(e)}function S2(n,e,t,r,i){let s=n.depth>i&&JT(n,e,i+1),a=r.depth>i&&JT(t,r,i+1),u=[];return _d(null,n,i,u),s&&a&&e.index(i)==t.index(i)?(b2(s,a),wu(Ru(s,S2(n,e,t,r,i+1)),u)):(s&&wu(Ru(s,ly(n,e,i+1)),u),_d(e,t,i,u),a&&wu(Ru(a,ly(t,r,i+1)),u)),_d(r,null,i,u),new me(u)}function ly(n,e,t){let r=[];if(_d(null,n,t,r),n.depth>t){let i=JT(n,e,t+1);wu(Ru(i,ly(n,e,t+1)),r)}return _d(e,null,t,r),new me(r)}function vG(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(me.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Gd{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return qt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new uy(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:u,offset:c}=a.content.findIndex(s),h=s-c;if(r.push(a,u,i+c),!h||(a=a.child(u),a.isText))break;s=h-1,i+=c+1}return new Gd(t,r,s)}static resolveCached(e,t){let r=Wk.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else Wk.set(e,r=new AG);let i=r.elts[r.i]=Gd.resolve(e,t);return r.i=(r.i+1)%TG,i}}class AG{constructor(){this.elts=[],this.i=0}}const TG=12,Wk=new WeakMap;class uy{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const EG=Object.create(null);let rl=class ZT{constructor(e,t,r,i=qt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||me.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&oy(this.attrs,t||e.defaultAttrs||EG)&&qt.sameSet(this.marks,r||qt.none)}copy(e=null){return e==this.content?this:new ZT(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ZT(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return xe.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),h=i.node(a).content.cut(i.pos-u,s.pos-u);return new xe(h,i.depth-a,s.depth-a)}replace(e,t,r){return _G(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Gd.resolveCached(this,e)}resolveNoCache(e){return Gd.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),w2(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=me.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=qt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!qt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=me.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};rl.prototype.text=void 0;class cy extends rl{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):w2(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new cy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new cy(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function w2(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Uu{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new bG(e,t);if(r.next==null)return Uu.empty;let i=R2(r);r.next&&r.err("Unexpected trailing text");let s=IG(kG(i));return OG(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,u){let c=a.matchFragment(e,r);if(c&&(!t||c.validEnd))return me.from(u.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:p,next:g}=a.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let _=s(g,u.concat(p));if(_)return _}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:u,next:c}=s.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}Uu.empty=new Uu(!0);class bG{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function R2(n){let e=[];do e.push(SG(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function SG(n){let e=[];do e.push(wG(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function wG(n){let e=xG(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=RG(n,e);else break;return e}function Yk(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function RG(n,e){let t=Yk(n),r=t;return n.eat(",")&&(n.next!="}"?r=Yk(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function CG(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function xG(n){if(n.eat("(")){let e=R2(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=CG(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function kG(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,c){let h={term:c,to:u};return e[a].push(h),h}function i(a,u){a.forEach(c=>c.to=u)}function s(a,u){if(a.type=="choice")return a.exprs.reduce((c,h)=>c.concat(s(h,u)),[]);if(a.type=="seq")for(let c=0;;c++){let h=s(a.exprs[c],u);if(c==a.exprs.length-1)return h;i(h,u=t())}else if(a.type=="star"){let c=t();return r(u,c),i(s(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=t();return i(s(a.expr,u),c),i(s(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(u)].concat(s(a.expr,u));if(a.type=="range"){let c=u;for(let h=0;h<a.min;h++){let p=t();i(s(a.expr,c),p),c=p}if(a.max==-1)i(s(a.expr,c),c);else for(let h=a.min;h<a.max;h++){let p=t();r(c,p),i(s(a.expr,c),p),c=p}return[r(c)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function C2(n,e){return e-n}function Qk(n,e){let t=[];return r(e),t.sort(C2);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:u,to:c}=s[a];!u&&t.indexOf(c)==-1&&r(c)}}}function IG(n){let e=Object.create(null);return t(Qk(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:c})=>{if(!u)return;let h;for(let p=0;p<i.length;p++)i[p][0]==u&&(h=i[p][1]);Qk(n,c).forEach(p=>{h||i.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let s=e[r.join(",")]=new Uu(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(C2);s.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return s}}function OG(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:c,next:h}=i.next[u];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(h)==-1&&r.push(h)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function x2(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function k2(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function I2(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function O2(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new MG(n,r,e[r]);return t}let Xk=class N2{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=O2(e,r.attrs),this.defaultAttrs=x2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Uu.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:k2(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new rl(this,this.computeAttrs(e),me.from(t),qt.setFrom(r))}createChecked(e=null,t,r){return t=me.from(t),this.checkContent(t),new rl(this,this.computeAttrs(e),t,qt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=me.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(me.empty,!0);return s?new rl(this,e,t.append(s),qt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){I2(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:qt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new N2(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function NG(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class MG{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?NG(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class R_{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=O2(e,i.attrs),this.excluded=null;let s=x2(this.attrs);this.instance=s?new qt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new qt(this,k2(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new R_(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){I2(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class M2{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=lr.from(e.nodes),t.marks=lr.from(e.marks||{}),this.nodes=Xk.compile(this.spec.nodes,this),this.marks=R_.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Uu.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?Jk(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:Jk(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Xk){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new cy(r,r.defaultAttrs,e,qt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return rl.fromJSON(this,e)}markFromJSON(e){return qt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Jk(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let u in n.marks){let c=n.marks[u];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function DG(n){return n.tag!=null}function PG(n){return n.style!=null}class il{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(DG(i))this.tags.push(i);else if(PG(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new eI(this,t,!1);return r.addAll(e,qt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new eI(this,t,!0);return r.addAll(e,qt.none,t.from,t.to),xe.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(UG(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=tI(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=tI(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new il(e,il.schemaRules(e)))}}const D2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},LG={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},P2={ol:!0,ul:!0},Kd=1,eE=2,Tg=4;function Zk(n,e,t){return e!=null?(e?Kd:0)|(e==="full"?eE:0):n&&n.whitespace=="pre"?Kd|eE:t&-5}class Wm{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=qt.none,this.match=s||(a&Tg?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(me.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Kd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=me.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(me.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!D2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class eI{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=Zk(null,t.preserveWhitespace,0)|(r?Tg:0);i?s=new Wm(i.type,i.attrs,qt.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new Wm(null,null,qt.none,!0,null,a):s=new Wm(e.schema.topNodeType,null,qt.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&eE?"full":this.localPreserveWS||(i.options&Kd)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],u=e.previousSibling;(!a||u&&u.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;P2.hasOwnProperty(a)&&this.parser.normalizeLists&&VG(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(c?c.ignore:LG.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let h,p=this.needsBlock;if(D2.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),h=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=c&&c.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),h&&this.sync(s),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,c,h,c.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let u=void 0;;){let c=this.parser.matchStyle(s,a,this,u);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(h=>!c.clearMark(h)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)u=c;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(a,t.attrs||null,r,t.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(u)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];a!=u;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,u=0;a>=0;a--){let c=this.nodes[a],h=c.findWrapping(e);if(h&&(!i||i.length>h.length+u)&&(i=h,s=c,!h.length))break;if(c.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=qt.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):nI(u.type,e.type))&&(a=u.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=Zk(e,s,a.options);a.options&Tg&&a.content.length==0&&(u|=Tg);let c=qt.none;return r=r.filter(h=>(a.type?a.type.allowsMarkType(h.type):nI(h.type,e))?(c=h.addToSet(c),!1):!0),this.nodes.push(new Wm(e,t,c,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Kd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(u,c)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;c>=s;c--)if(a(u-1,c))return!0;return!1}else{let p=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function VG(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&P2.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function UG(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function tI(n){let e={};for(let t in n)e[t]=n[t];return e}function nI(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=u=>{s.push(u);for(let c=0;c<u.edgeCount;c++){let{type:h,next:p}=u.edge(c);if(h==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class Qu{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=SA(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let u=0,c=0;for(;u<s.length&&c<a.marks.length;){let h=a.marks[c];if(!this.marks[h.type.name]){c++;continue}if(!h.eq(s[u][0])||h.type.spec.spanning===!1)break;u++,c++}for(;u<s.length;)i=s.pop()[1];for(;c<a.marks.length;){let h=a.marks[c++],p=this.serializeMark(h,a.isInline,t);p&&(s.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Eg(SA(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Eg(SA(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Eg(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Qu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=rI(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return rI(e.marks)}}function rI(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function SA(n){return n.document||window.document}const iI=new WeakMap;function zG(n){let e=iI.get(n);return e===void 0&&iI.set(n,e=BG(n)),e}function BG(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Eg(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=zG(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let u,c=t?n.createElementNS(t,i):n.createElement(i),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let _=g.indexOf(" ");_>0?c.setAttributeNS(g.slice(0,_),g.slice(_+1),h[g]):c.setAttribute(g,h[g])}}for(let g=p;g<e.length;g++){let _=e[g];if(_===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:A,contentDOM:T}=Eg(n,_,t,r);if(c.appendChild(A),T){if(u)throw new RangeError("Multiple content holes");u=T}}}return{dom:c,contentDOM:u}}const L2=65535,V2=Math.pow(2,16);function jG(n,e){return n+e*V2}function sI(n){return n&L2}function FG(n){return(n-(n&L2))/V2}const U2=1,z2=2,bg=4,B2=8;class tE{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&B2)>0}get deletedBefore(){return(this.delInfo&(U2|bg))>0}get deletedAfter(){return(this.delInfo&(z2|bg))>0}get deletedAcross(){return(this.delInfo&bg)>0}}class ki{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ki.empty)return ki.empty}recover(e){let t=0,r=sI(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+FG(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?i:0);if(c>e)break;let h=this.ranges[u+s],p=this.ranges[u+a],g=c+h;if(e<=g){let _=h?e==c?-1:e==g?1:t:t,A=c+i+(_<0?0:p);if(r)return A;let T=e==(t<0?c:g)?null:jG(u/3,e-c),b=e==c?z2:e==g?U2:bg;return(t<0?e!=c:e!=g)&&(b|=B2),new tE(A,b,T)}i+=p-h}return r?e+i:new tE(e+i,0,null)}touches(e,t){let r=0,i=sI(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let h=this.ranges[u+s],p=c+h;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?s:0),c=a+(this.inverted?0:s),h=this.ranges[i+t],p=this.ranges[i+r];e(u,u+h,c,c+p),s+=p-h}}invert(){return new ki(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ki.empty:new ki(e<0?[0,-e,0]:[0,0,e])}}ki.empty=new ki([]);class Wd{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Wd(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Wd;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],u=a.mapResult(e,t);if(u.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new tE(e,i,null)}}const wA=Object.create(null);class Or{getMap(){return ki.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wA[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in wA)throw new RangeError("Duplicate use of step JSON ID "+e);return wA[e]=t,t.prototype.jsonID=e,t}}class In{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new In(e,null)}static fail(e){return new In(null,e)}static fromReplace(e,t,r,i){try{return In.ok(e.replace(t,r,i))}catch(s){if(s instanceof ay)return In.fail(s.message);throw s}}}function tS(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(tS(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return me.fromArray(r)}class Ga extends Or{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new xe(tS(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return In.fromReplace(e,this.from,this.to,s)}invert(){return new no(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ga(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ga&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ga(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ga(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("addMark",Ga);class no extends Or{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new xe(tS(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return In.fromReplace(e,this.from,this.to,r)}invert(){return new Ga(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new no(t.pos,r.pos,this.mark)}merge(e){return e instanceof no&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new no(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new no(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("removeMark",no);class Ka extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return In.fromReplace(e,this.pos,this.pos+1,new xe(me.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ka(this.pos,t.marks[i]);return new Ka(this.pos,this.mark)}}return new zu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ka(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ka(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("addNodeMark",Ka);class zu extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return In.fromReplace(e,this.pos,this.pos+1,new xe(me.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ka(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new zu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new zu(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("removeNodeMark",zu);class Gn extends Or{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&nE(e,this.from,this.to)?In.fail("Structure replace would overwrite content"):In.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ki([this.from,this.to-this.from,this.slice.size])}invert(e){return new Gn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Gn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Gn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?xe.empty:new xe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Gn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?xe.empty:new xe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Gn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Gn(t.from,t.to,xe.fromJSON(e,t.slice),!!t.structure)}}Or.jsonID("replace",Gn);class Kn extends Or{constructor(e,t,r,i,s,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=u}apply(e){if(this.structure&&(nE(e,this.from,this.gapFrom)||nE(e,this.gapTo,this.to)))return In.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return In.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?In.fromReplace(e,this.from,this.to,r):In.fail("Content does not fit in gap")}getMap(){return new ki([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Kn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Kn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kn(t.from,t.to,t.gapFrom,t.gapTo,xe.fromJSON(e,t.slice),t.insert,!!t.structure)}}Or.jsonID("replaceAround",Kn);function nE(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function HG(n,e,t,r){let i=[],s=[],a,u;n.doc.nodesBetween(e,t,(c,h,p)=>{if(!c.isInline)return;let g=c.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let _=Math.max(h,e),A=Math.min(h+c.nodeSize,t),T=r.addToSet(g);for(let b=0;b<g.length;b++)g[b].isInSet(T)||(a&&a.to==_&&a.mark.eq(g[b])?a.to=A:i.push(a=new no(_,A,g[b])));u&&u.to==_?u.to=A:s.push(u=new Ga(_,A,r))}}),i.forEach(c=>n.step(c)),s.forEach(c=>n.step(c))}function qG(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;s++;let c=null;if(r instanceof R_){let h=a.marks,p;for(;p=r.isInSet(h);)(c||(c=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let h=Math.min(u+a.nodeSize,t);for(let p=0;p<c.length;p++){let g=c[p],_;for(let A=0;A<i.length;A++){let T=i[A];T.step==s-1&&g.eq(i[A].style)&&(_=T)}_?(_.to=h,_.step=s):i.push({style:g,from:Math.max(u,e),to:h,step:s})}}}),i.forEach(a=>n.step(new no(a.from,a.to,a.style)))}function nS(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],u=e+1;for(let c=0;c<s.childCount;c++){let h=s.child(c),p=u+h.nodeSize,g=r.matchType(h.type);if(!g)a.push(new Gn(u,p,xe.empty));else{r=g;for(let _=0;_<h.marks.length;_++)t.allowsMarkType(h.marks[_].type)||n.step(new no(u,p,h.marks[_]));if(i&&h.isText&&t.whitespace!="pre"){let _,A=/\r?\n|\r/g,T;for(;_=A.exec(h.text);)T||(T=new xe(me.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),a.push(new Gn(u+_.index,u+_.index+_[0].length,T))}}u=p}if(!r.validEnd){let c=r.fillBefore(me.empty,!0);n.replace(u,u,new xe(c,0,0))}for(let c=a.length-1;c>=0;c--)n.step(a[c])}function $G(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Pf(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,a,t))return r;if(r==0||i.type.spec.isolating||!$G(i,s,a))break}return null}function GG(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),u=i.after(s+1),c=a,h=u,p=me.empty,g=0;for(let T=s,b=!1;T>t;T--)b||r.index(T)>0?(b=!0,p=me.from(r.node(T).copy(p)),g++):c--;let _=me.empty,A=0;for(let T=s,b=!1;T>t;T--)b||i.after(T+1)<i.end(T)?(b=!0,_=me.from(i.node(T).copy(_)),A++):h++;n.step(new Kn(c,h,a,u,new xe(p.append(_),g,A),p.size-g,!0))}function rS(n,e,t=null,r=n){let i=KG(n,e),s=i&&WG(r,e);return s?i.map(oI).concat({type:e,attrs:t}).concat(s.map(oI)):null}function oI(n){return{type:n,attrs:null}}function KG(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function WG(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let h=r;c&&h<i;h++)c=c.matchType(t.child(h).type);return!c||!c.validEnd?null:a}function YG(n,e,t){let r=me.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=me.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new Kn(i,s,i,s,new xe(r,0,0),t.length,!0))}function QG(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let c=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,c)&&XG(n.doc,n.mapping.slice(s).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let A=r.whitespace=="pre",T=!!r.contentMatch.matchType(r.schema.linebreakReplacement);A&&!T?h=!1:!A&&T&&(h=!0)}h===!1&&F2(n,a,u,s),nS(n,n.mapping.slice(s).map(u,1),r,void 0,h===null);let p=n.mapping.slice(s),g=p.map(u,1),_=p.map(u+a.nodeSize,1);return n.step(new Kn(g,_,g+1,_-1,new xe(me.from(r.create(c,null,a.marks)),0,0),1,!0)),h===!0&&j2(n,a,u,s),!1}})}function j2(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(i.text);){let c=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function F2(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function XG(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function JG(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Kn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new xe(me.from(a),0,0),1,!0))}function Qo(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=t-2;h>s;h--,p--){let g=i.node(h),_=i.index(h);if(g.type.spec.isolating)return!1;let A=g.content.cutByIndex(_,g.childCount),T=r&&r[p+1];T&&(A=A.replaceChild(0,T.type.create(T.attrs)));let b=r&&r[p]||g;if(!g.canReplace(_+1,g.childCount)||!b.type.validContent(A))return!1}let u=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(u,u,c?c.type:i.node(s+1).type)}function ZG(n,e,t=1,r){let i=n.doc.resolve(e),s=me.empty,a=me.empty;for(let u=i.depth,c=i.depth-t,h=t-1;u>c;u--,h--){s=me.from(i.node(u).copy(s));let p=r&&r[h];a=me.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new Gn(e,e,new xe(s.append(a),t,t),!0))}function Rl(n,e){let t=n.resolve(e),r=t.index();return H2(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function eK(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function H2(n,e){return!!(n&&e&&!n.isLeaf&&eK(n,e))}function C_(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,a,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),a=r.node(i+1)),s&&!s.isTextblock&&H2(s,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function tK(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);F2(n,p.node(),p.before(),u)}a.inlineContent&&nS(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let c=n.mapping.slice(u),h=c.map(e-t);if(n.step(new Gn(h,c.map(e+t,-1),xe.empty,!0)),r===!0){let p=n.doc.resolve(h);j2(n,p.node(),p.before(),n.steps.length)}return n}function nK(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function q2(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),h=r.node(a),p=!1;if(s==1)p=h.canReplace(c,c,i);else{let g=h.contentMatchAt(c).findWrapping(i.firstChild.type);p=g&&h.canReplaceWith(c,c,g[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function x_(n,e,t=e,r=xe.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return $2(i,s,r)?new Gn(e,t,r):new rK(i,s,r).fit()}function $2(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class rK{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=me.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=me.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,u=i.depth;for(;a&&u&&s.childCount==1;)s=s.firstChild.content,a--,u--;let c=new xe(s,a,u);return e>-1?new Kn(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new Gn(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=RA(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:c,match:h}=this.frontier[u],p,g=null;if(t==1&&(a?h.matchType(a.type)||(g=h.fillBefore(me.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:g};if(t==2&&a&&(p=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&h.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=RA(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new xe(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=RA(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new xe(id(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new xe(id(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,h=0,p=[],{match:g,type:_}=this.frontier[t];if(i){for(let b=0;b<i.childCount;b++)p.push(i.child(b));g=g.matchFragment(i)}let A=u.size+e-(a.content.size-a.openEnd);for(;h<u.childCount;){let b=u.child(h),S=g.matchType(b.type);if(!S)break;h++,(h>1||c==0||b.content.size)&&(g=S,p.push(G2(b.mark(_.allowedMarks(b.marks)),h==1?c:0,h==u.childCount?A:-1)))}let T=h==u.childCount;T||(A=-1),this.placed=sd(this.placed,t,me.from(p)),this.frontier[t].match=g,T&&A<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,S=u;b<A;b++){let C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=T?e==0?xe.empty:new xe(id(a.content,e-1,1),e-1,A<0?a.openEnd:e-1):new xe(id(a.content,e,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!CA(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=CA(e,t,i,r,s);if(a){for(let u=t-1;u>=0;u--){let{match:c,type:h}=this.frontier[u],p=CA(e,u,h,c,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=sd(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=sd(this.placed,this.depth,me.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(me.empty,!0);t.childCount&&(this.placed=sd(this.placed,this.frontier.length,t))}}function id(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(id(n.firstChild.content,e-1,t)))}function sd(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(sd(n.lastChild.content,e-1,t)))}function RA(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function G2(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,G2(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(me.empty,!0)))),n.copy(r)}function CA(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,a);return u&&!iK(t,s.content,a)?u:null}function iK(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function sK(n){return n.spec.defining||n.spec.definingForContent}function oK(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if($2(i,s,r))return n.step(new Gn(e,t,r));let a=W2(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let _=i.depth,A=i.pos-1;_>0;_--,A--){let T=i.node(_).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;a.indexOf(_)>-1?u=_:i.before(_)==A&&a.splice(1,0,-_)}let c=a.indexOf(u),h=[],p=r.openStart;for(let _=r.content,A=0;;A++){let T=_.firstChild;if(h.push(T),A==r.openStart)break;_=T.content}for(let _=p-1;_>=0;_--){let A=h[_],T=sK(A.type);if(T&&!A.sameMarkup(i.node(Math.abs(u)-1)))p=_;else if(T||!A.type.isTextblock)break}for(let _=r.openStart;_>=0;_--){let A=(_+p+1)%(r.openStart+1),T=h[A];if(T)for(let b=0;b<a.length;b++){let S=a[(b+c)%a.length],C=!0;S<0&&(C=!1,S=-S);let L=i.node(S-1),z=i.index(S-1);if(L.canReplaceWith(z,z,T.type,T.marks))return n.replace(i.before(S),C?s.after(S):t,new xe(K2(r.content,0,r.openStart,A),A,r.openEnd))}}let g=n.steps.length;for(let _=a.length-1;_>=0&&(n.replace(e,t,r),!(n.steps.length>g));_--){let A=a[_];A<0||(e=i.before(A),t=s.after(A))}}function K2(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(K2(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(me.empty,!0))}return n}function aK(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=nK(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new xe(me.from(r),0,0))}function lK(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=W2(r,i);for(let a=0;a<s.length;a++){let u=s[a],c=a==s.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function W2(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class sf extends Or{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return In.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return In.fromReplace(e,this.pos,this.pos+1,new xe(me.from(i),0,t.isLeaf?0:1))}getMap(){return ki.empty}invert(e){return new sf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new sf(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new sf(t.pos,t.attr,t.value)}}Or.jsonID("attr",sf);class Yd extends Or{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return In.ok(r)}getMap(){return ki.empty}invert(e){return new Yd(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Yd(t.attr,t.value)}}Or.jsonID("docAttr",Yd);let Ef=class extends Error{};Ef=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ef.prototype=Object.create(Error.prototype);Ef.prototype.constructor=Ef;Ef.prototype.name="TransformError";class Y2{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Wd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ef(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=xe.empty){let i=x_(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new xe(me.from(r),0,0))}delete(e,t){return this.replace(e,t,xe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return oK(this,e,t,r),this}replaceRangeWith(e,t,r){return aK(this,e,t,r),this}deleteRange(e,t){return lK(this,e,t),this}lift(e,t){return GG(this,e,t),this}join(e,t=1){return tK(this,e,t),this}wrap(e,t){return YG(this,e,t),this}setBlockType(e,t=e,r,i=null){return QG(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return JG(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new sf(e,t,r)),this}setDocAttribute(e,t){return this.step(new Yd(e,t)),this}addNodeMark(e,t){return this.step(new Ka(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof qt)t.isInSet(r.marks)&&this.step(new zu(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new zu(e,s)),i=s.removeFromSet(i);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return ZG(this,e,t,r),this}addMark(e,t,r){return HG(this,e,t,r),this}removeMark(e,t,r){return qG(this,e,t,r),this}clearIncompatible(e,t,r){return nS(this,e,t,r),this}}const xA=Object.create(null);class rt{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new uK(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=xe.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:c,$to:h}=a[u],p=e.mapping.slice(s);e.replaceRange(p.map(c.pos),p.map(h.pos),u?xe.empty:t),u==0&&uI(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s],c=e.mapping.slice(r),h=c.map(a.pos),p=c.map(u.pos);s?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),uI(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Je(e):Hc(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?Hc(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Hc(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Li(e.node(0))}static atStart(e){return Hc(e,e,0,0,1)||new Li(e)}static atEnd(e){return Hc(e,e,e.content.size,e.childCount,-1)||new Li(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=xA[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in xA)throw new RangeError("Duplicate use of selection JSON ID "+e);return xA[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Je.between(this.$anchor,this.$head).getBookmark()}}rt.prototype.visible=!0;class uK{constructor(e,t){this.$from=e,this.$to=t}}let aI=!1;function lI(n){!aI&&!n.parent.inlineContent&&(aI=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Je extends rt{constructor(e,t=e){lI(e),lI(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return rt.near(r);let i=e.resolve(t.map(this.anchor));return new Je(i.parent.inlineContent?i:r,r)}replace(e,t=xe.empty){if(super.replace(e,t),t==xe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new k_(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Je(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=rt.findFrom(t,r,!0)||rt.findFrom(t,-r,!0);if(s)t=s.$head;else return rt.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(rt.findFrom(e,-r,!0)||rt.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Je(e,t)}}rt.jsonID("text",Je);class k_{constructor(e,t){this.anchor=e,this.head=t}map(e){return new k_(e.map(this.anchor),e.map(this.head))}resolve(e){return Je.between(e.resolve(this.anchor),e.resolve(this.head))}}class He extends rt{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?rt.near(s):new He(s)}content(){return new xe(me.from(this.node),0,0)}eq(e){return e instanceof He&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new iS(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new He(e.resolve(t.anchor))}static create(e,t){return new He(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}He.prototype.visible=!1;rt.jsonID("node",He);class iS{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new k_(r,r):new iS(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&He.isSelectable(r)?new He(t):rt.near(t)}}class Li extends rt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=xe.empty){if(t==xe.empty){e.delete(0,e.doc.content.size);let r=rt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Li(e)}map(e){return new Li(e)}eq(e){return e instanceof Li}getBookmark(){return cK}}rt.jsonID("all",Li);const cK={map(){return this},resolve(n){return new Li(n)}};function Hc(n,e,t,r,i,s=!1){if(e.inlineContent)return Je.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!s&&He.isSelectable(u))return He.create(n,t-(i<0?u.nodeSize:0))}else{let c=Hc(n,u,t+i,i<0?u.childCount:0,i,s);if(c)return c}t+=u.nodeSize*i}return null}function uI(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Gn||i instanceof Kn))return;let s=n.mapping.maps[r],a;s.forEach((u,c,h,p)=>{a==null&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const cI=1,fI=2,hI=4;class fK extends Y2{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|cI)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&cI)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=fI,this}ensureMarks(e){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&fI)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||qt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(rt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=hI,this}get scrolledIntoView(){return(this.updated&hI)>0}}function dI(n,e){return!e||!n?n:n.bind(e)}class od{constructor(e,t,r){this.name=e,this.init=dI(t.init,r),this.apply=dI(t.apply,r)}}const hK=[new od("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new od("selection",{init(n,e){return n.selection||rt.atStart(e.doc)},apply(n){return n.selection}}),new od("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new od("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class kA{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=hK.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new od(r.key,r.spec.state,r))})}}class Wc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let c=i?i[a].n:0,h=i?i[a].state:this,p=c<t.length&&u.spec.appendTransaction.call(u,c?t.slice(c):t,h,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Wc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new fK(this)}static create(e){let t=new kA(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Wc(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new kA(this.schema,e.plugins),r=t.fields,i=new Wc(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new kA(e.schema,e.plugins),s=new Wc(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=rl.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=rt.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],h=c.spec.state;if(c.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){s[a.name]=h.fromJSON.call(c,e,t[u],s);return}}s[a.name]=a.init(e,s)}}),s}}function Q2(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Q2(i,e,{})),t[r]=i}return t}class Jn{constructor(e){this.spec=e,this.props={},e.props&&Q2(e.props,this,this.props),this.key=e.key?e.key.key:X2("plugin")}getState(e){return e[this.key]}}const IA=Object.create(null);function X2(n){return n in IA?n+"$"+ ++IA[n]:(IA[n]=0,n+"$")}class hi{constructor(e="key"){this.key=X2(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const cr=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},bf=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let rE=null;const Ho=function(n,e,t){let r=rE||(rE=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},dK=function(){rE=null},Bu=function(n,e,t,r){return t&&(pI(n,e,t,r,-1)||pI(n,e,t,r,1))},pK=/^(img|br|input|textarea|hr)$/i;function pI(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ss(n))){let s=n.parentNode;if(!s||s.nodeType!=1||gp(n)||pK.test(n.nodeName)||n.contentEditable=="false")return!1;e=cr(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?ss(n):0}else return!1}}function ss(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function mK(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=ss(n)}else if(n.parentNode&&!gp(n))e=cr(n),n=n.parentNode;else return null}}function gK(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!gp(n))e=cr(n)+1,n=n.parentNode;else return null}}function yK(n,e,t){for(let r=e==0,i=e==ss(n);r||i;){if(n==t)return!0;let s=cr(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==ss(n)}}function gp(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const I_=function(n){return n.focusNode&&Bu(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function uu(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function _K(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function vK(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(ss(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(ss(r.startContainer),r.startOffset)}}}const po=typeof navigator<"u"?navigator:null,mI=typeof document<"u"?document:null,Cl=po&&po.userAgent||"",iE=/Edge\/(\d+)/.exec(Cl),J2=/MSIE \d/.exec(Cl),sE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Cl),ui=!!(J2||sE||iE),sl=J2?document.documentMode:sE?+sE[1]:iE?+iE[1]:0,Cs=!ui&&/gecko\/(\d+)/i.test(Cl);Cs&&+(/Firefox\/(\d+)/.exec(Cl)||[0,0])[1];const oE=!ui&&/Chrome\/(\d+)/.exec(Cl),Cr=!!oE,Z2=oE?+oE[1]:0,qr=!ui&&!!po&&/Apple Computer/.test(po.vendor),Sf=qr&&(/Mobile\/\w+/.test(Cl)||!!po&&po.maxTouchPoints>2),is=Sf||(po?/Mac/.test(po.platform):!1),AK=po?/Win/.test(po.platform):!1,Wo=/Android \d/.test(Cl),yp=!!mI&&"webkitFontSmoothing"in mI.documentElement.style,TK=yp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function EK(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Uo(n,e){return typeof n=="number"?n:n[e]}function bK(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function gI(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=bf(a);continue}let u=a,c=u==s.body,h=c?EK(s):bK(u),p=0,g=0;if(e.top<h.top+Uo(r,"top")?g=-(h.top-e.top+Uo(i,"top")):e.bottom>h.bottom-Uo(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+Uo(i,"top")-h.top:e.bottom-h.bottom+Uo(i,"bottom")),e.left<h.left+Uo(r,"left")?p=-(h.left-e.left+Uo(i,"left")):e.right>h.right-Uo(r,"right")&&(p=e.right-h.right+Uo(i,"right")),p||g)if(c)s.defaultView.scrollBy(p,g);else{let A=u.scrollLeft,T=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let b=u.scrollLeft-A,S=u.scrollTop-T;e={left:e.left-b,top:e.top-S,right:e.right-b,bottom:e.bottom-S}}let _=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(_))break;a=_=="absolute"?a.offsetParent:bf(a)}}function SK(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(s,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=t-20){r=u,i=c.top;break}}return{refDOM:r,refTop:i,stack:eL(n.dom)}}function eL(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=bf(r));return e}function wK({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;tL(t,r==0?0:r-e)}function tL(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Lc=null;function RK(n){if(n.setActive)return n.setActive();if(Lc)return n.focus(Lc);let e=eL(n);n.focus(Lc==null?{get preventScroll(){return Lc={preventScroll:!0},!0}}:void 0),Lc||(Lc=!1,tL(e,0))}function nL(n,e){let t,r=2e8,i,s=0,a=e.top,u=e.top,c,h;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let _;if(p.nodeType==1)_=p.getClientRects();else if(p.nodeType==3)_=Ho(p).getClientRects();else continue;for(let A=0;A<_.length;A++){let T=_[A];if(T.top<=a&&T.bottom>=u){a=Math.max(T.bottom,a),u=Math.min(T.top,u);let b=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(b<r){t=p,r=b,i=b&&t.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,p.nodeType==1&&b&&(s=g+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!c&&T.left<=e.left&&T.right>=e.left&&(c=p,h={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!t&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(s=g+1)}}return!t&&c&&(t=c,i=h,r=0),t&&t.nodeType==3?CK(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:nL(t,i)}function CK(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Oa(r,1);if(s.top!=s.bottom&&sS(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function sS(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function xK(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function kK(n,e,t){let{node:r,offset:i}=nL(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function IK(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let u=n.docView.nearestDesc(s,!0),c;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((c=u.dom.getBoundingClientRect()).width||c.height)&&(u.node.isBlock&&u.parent&&(!a&&c.left>r.left||c.top>r.top?i=u.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(i=u.posAfter),a=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function rL(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let u=a.getClientRects();for(let c=0;c<u.length;c++){let h=u[c];if(sS(e,h))return rL(a,e,h)}}if((s=(s+1)%r)==i)break}return n}function OK(n,e){let t=n.dom.ownerDocument,r,i=0,s=vK(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let h=n.dom.getBoundingClientRect();if(!sS(e,h)||(a=rL(n.dom,e,h),!a))return null}if(qr)for(let h=a;r&&h;h=bf(h))h.draggable&&(r=void 0);if(a=xK(a,e),r){if(Cs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let h;yp&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=IK(n,r,i,e))}u==null&&(u=kK(n,a,e));let c=n.docView.nearestDesc(a,!0);return{pos:u,inside:c?c.posAtStart-c.border:-1}}function yI(n){return n.top<n.bottom||n.left<n.right}function Oa(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(yI(r))return r}return Array.prototype.find.call(t,yI)||n.getBoundingClientRect()}const NK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function iL(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=yp||Cs;if(r.nodeType==3)if(a&&(NK.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let c=Oa(Ho(r,i,i),t);if(Cs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=Oa(Ho(r,i-1,i-1),-1);if(h.top==c.top){let p=Oa(Ho(r,i,i+1),-1);if(p.top!=c.top)return Gh(p,p.left<h.left)}}return c}else{let c=i,h=i,p=t<0?1:-1;return t<0&&!i?(h++,p=-1):t>=0&&i==r.nodeValue.length?(c--,p=1):t<0?c--:h++,Gh(Oa(Ho(r,c,h),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return OA(c.getBoundingClientRect(),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];if(c.nodeType==1)return OA(c.getBoundingClientRect(),!0)}return OA(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1],h=c.nodeType==3?Ho(c,ss(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(h)return Gh(Oa(h,1),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let h=c?c.nodeType==3?Ho(c,0,a?0:1):c.nodeType==1?c:null:null;if(h)return Gh(Oa(h,-1),!0)}return Gh(Oa(r.nodeType==3?Ho(r):r,-t),t>=0)}function Gh(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function OA(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function sL(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function MK(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return sL(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let a=iL(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=Ho(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<c.length;h++){let p=c[h];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const DK=/[\u0590-\u08ac]/;function PK(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,u=n.domSelection();return u?!DK.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?s:a:sL(n,e,()=>{let{focusNode:c,focusOffset:h,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),_=u.caretBidiLevel;u.modify("move",t,"character");let A=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:T,focusOffset:b}=n.domSelectionRange(),S=T&&!A.contains(T.nodeType==1?T:T.parentNode)||c==T&&h==b;try{u.collapse(p,g),c&&(c!=p||h!=g)&&u.extend&&u.extend(c,h)}catch{}return _!=null&&(u.caretBidiLevel=_),S}):r.pos==r.start()||r.pos==r.end()}let _I=null,vI=null,AI=!1;function LK(n,e,t){return _I==e&&vI==t?AI:(_I=e,vI=t,AI=t=="up"||t=="down"?MK(n,e,t):PK(n,e,t))}const us=0,TI=1,gu=2,mo=3;class _p{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=us,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>cr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let u=i.children[a];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],u=s+a.size;if(u>e||a instanceof aL){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof oL&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?cr(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?cr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,u=0;;u++){let c=this.children[u],h=a+c.size;if(i==-1&&e<=h){let p=a+c.border;if(e>=p&&t<=h-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,p);e=a;for(let g=u;g>0;g--){let _=this.children[g-1];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(1)){i=cr(_.dom)+1;break}e-=_.size}i==-1&&(i=0)}if(i>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=cr(g.dom);break}t+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let A=0,T=0;A<this.children.length;A++){let b=this.children[A],S=T+b.size;if(s>T&&a<S)return b.setSelection(e-T-b.border,t-T-b.border,r,i);T=S}let u=this.domFromPos(e,e?-1:1),c=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((Cs||qr)&&e==t){let{node:A,offset:T}=u;if(A.nodeType==3){if(g=!!(T&&A.nodeValue[T-1]==`
`),g&&T==A.nodeValue.length)for(let b=A,S;b;b=b.parentNode){if(S=b.nextSibling){S.nodeName=="BR"&&(u=c={node:S.parentNode,offset:cr(S)+1});break}let C=b.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let b=A.childNodes[T-1];g=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(Cs&&p.focusNode&&p.focusNode!=c.node&&p.focusNode.nodeType==1){let A=p.focusNode.childNodes[p.focusOffset];A&&A.contentEditable=="false"&&(i=!0)}if(!(i||g&&qr)&&Bu(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Bu(c.node,c.offset,p.focusNode,p.focusOffset))return;let _=!1;if((h.extend||e==t)&&!g){h.collapse(u.node,u.offset);try{e!=t&&h.extend(c.node,c.offset),_=!0}catch{}}if(!_){if(e>t){let T=u;u=c,c=T}let A=document.createRange();A.setEnd(c.node,c.offset),A.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(A)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+s.border,c=a-s.border;if(e>=u&&t<=c){this.dirty=e==r||t==a?gu:TI,e==u&&t==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=mo:s.markDirty(e-u,t-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?gu:mo}r=a}this.dirty=gu}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?gu:TI;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class oL extends _p{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==us&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class VK extends _p{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ju extends _p{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=Qu.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new ju(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&mo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=mo&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=us){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=us}}slice(e,t,r){let i=ju.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=lE(s,t,a,r)),e>0&&(s=lE(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ol extends _p{constructor(e,t,r,i,s,a,u,c,h){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,s,a){let u=s.nodeViews[t.type.name],c,h=u&&u(t,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),p=h&&h.dom,g=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=Qu.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let _=p;return p=cL(p,r,t),h?c=new UK(e,t,r,i,p,g||null,_,h,s,a+1):t.isText?new O_(e,t,r,i,p,_,s):new ol(e,t,r,i,p,g||null,_,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>me.empty)}return e}matchesNode(e,t,r){return this.dirty==us&&e.eq(this.node)&&fy(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,u=s&&s.pos<0,c=new BK(this,a&&a.node,e);HK(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?c.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!g&&c.syncToMarks(p==this.node.childCount?qt.none:this.node.child(p).marks,r,e),c.placeWidget(h,e,i)},(h,p,g,_)=>{c.syncToMarks(h.marks,r,e);let A;c.findNodeMatch(h,p,g,_)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(A=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(h,p,g,A,e)||c.updateNextNode(h,p,g,e,_,i)||c.addNode(h,p,g,e,i),i+=h.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==gu)&&(a&&this.protectLocalComposition(e,a),lL(this.contentDOM,this.children,e),Sf&&qK(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Je)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,u=$K(this.node.content,a,r-t,i-t);return u<0?null:{node:s,pos:u,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new VK(this,s,t,i);e.input.compositionNodes.push(a),this.children=lE(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==mo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=us}updateOuterDeco(e){if(fy(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=uL(this.dom,this.nodeDOM,aE(this.outerDeco,this.node,t),aE(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function EI(n,e,t,r,i){cL(r,e,n);let s=new ol(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class O_ extends ol{constructor(e,t,r,i,s,a,u){super(e,t,r,i,s,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==mo||this.dirty!=us&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=us||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=us,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new O_(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=mo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class aL extends _p{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==us&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class UK extends ol{constructor(e,t,r,i,s,a,u,c,h,p){super(e,t,r,i,s,a,u,h,p),this.spec=c}update(e,t,r,i){if(this.dirty==mo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function lL(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=bI(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof ju){let c=r?r.previousSibling:n.lastChild;lL(a.contentDOM,a.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=bI(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const vd=function(n){n&&(this.nodeName=n)};vd.prototype=Object.create(null);const yu=[new vd];function aE(n,e,t){if(n.length==0)return yu;let r=t?yu[0]:new vd,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new vd(a.nodeName));for(let u in a){let c=a[u];c!=null&&(t&&i.length==1&&i.push(r=new vd(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return i}function uL(n,e,t,r){if(t==yu&&r==yu)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],u=t[s];if(s){let c;u&&u.nodeName==a.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),u=yu[0]),i=c}zK(i,u||yu[0],a)}return i}function zK(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function cL(n,e,t){return uL(n,n,yu,aE(e,t,n.nodeType!=1))}function fy(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function bI(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class BK{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=jK(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=us,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let h=this.top.children[c];if(h.matchesMark(e[s])&&!this.isLocked(h.dom)){u=c;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let c=ju.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==mo&&a.dom==a.contentDOM&&(a.dirty=gu),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let u=this.index;u<this.top.children.length;u++){let c=this.top.children[u];if(c instanceof ol){let h=this.preMatch.matched.get(c);if(h!=null&&h!=s)return!1;let p=c.dom,g,_=this.isLocked(p)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=mo&&fy(t,c.outerDeco));if(!_&&c.update(e,t,r,i))return this.destroyBetween(this.index,u),c.dom!=p&&(this.changed=!0),this.index++,!0;if(!_&&(g=this.recreateWrapper(c,e,t,r,i,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=gu,g.updateChildren(i,a+1),g.dirty=us),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!fy(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=ol.create(this.top,t,r,i,s,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let c of u.children)c.parent=u}return e.destroy(),u}addNode(e,t,r,i,s){let a=ol.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new oL(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ju;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof O_)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qr||Cr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new aL(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function jK(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof ju)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=u.node;if(c){if(c!=n.child(i-1))break;--i,s.set(u,i),a.push(u)}}return{index:i,matched:s,matches:a.reverse()}}function FK(n,e){return n.type.side-e.type.side}function HK(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,i,e.forChild(s,p),h),s+=p.nodeSize}return}let a=0,u=[],c=null;for(let h=0;;){let p,g;for(;a<i.length&&i[a].to==s;){let S=i[a++];S.widget&&(p?(g||(g=[p])).push(S):p=S)}if(p)if(g){g.sort(FK);for(let S=0;S<g.length;S++)t(g[S],h,!!c)}else t(p,h,!!c);let _,A;if(c)A=-1,_=c,c=null;else if(h<n.childCount)A=h,_=n.child(h++);else break;for(let S=0;S<u.length;S++)u[S].to<=s&&u.splice(S--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)u.push(i[a++]);let T=s+_.nodeSize;if(_.isText){let S=T;a<i.length&&i[a].from<S&&(S=i[a].from);for(let C=0;C<u.length;C++)u[C].to<S&&(S=u[C].to);S<T&&(c=_.cut(S-s),_=_.cut(0,S-s),T=S,A=-1)}else for(;a<i.length&&i[a].to<T;)a++;let b=_.isInline&&!_.isLeaf?u.filter(S=>!S.inline):u.slice();r(_,b,e.forChild(s,_),A),s=T}}function qK(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function $K(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),u=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<n.childCount;){let h=n.child(i++);if(s+=h.nodeSize,!h.isText)break;c+=h.text}if(s>=t){if(s>=r&&c.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?c.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function lE(n,e,t,r,i){let s=[];for(let a=0,u=0;a<n.length;a++){let c=n[a],h=u,p=u+=c.size;h>=t||p<=e?s.push(c):(h<e&&s.push(c.slice(0,e-h,r)),i&&(s.push(i),i=void 0),p>t&&s.push(c.slice(t-h,c.size,r)))}return s}function oS(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),c,h;if(I_(t)){for(c=a;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&He.isSelectable(g)&&i.parent&&!(g.isInline&&yK(t.focusNode,t.focusOffset,i.dom))){let _=i.posBefore;h=new He(a==_?u:r.resolve(_))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=a,_=a;for(let A=0;A<t.rangeCount;A++){let T=t.getRangeAt(A);g=Math.min(g,n.docView.posFromDOM(T.startContainer,T.startOffset,1)),_=Math.max(_,n.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(g<0)return null;[c,a]=_==n.state.selection.anchor?[_,g]:[g,_],u=r.resolve(a)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let p=r.resolve(c);if(!h){let g=e=="pointer"||n.state.selection.head<u.pos&&!s?1:-1;h=aS(n,p,u,g)}return h}function fL(n){return n.editable?n.hasFocus():dL(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Xo(n,e=!1){let t=n.state.selection;if(hL(n,t),!!fL(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Cr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Bu(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)KK(n);else{let{anchor:r,head:i}=t,s,a;SI&&!(t instanceof Je)&&(t.$from.parent.inlineContent||(s=wI(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=wI(n,t.to))),n.docView.setSelection(r,i,n,e),SI&&(s&&RI(s),a&&RI(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&GK(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const SI=qr||Cr&&Z2<63;function wI(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(qr&&i&&i.contentEditable=="false")return NA(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return NA(i);if(s)return NA(s)}}function NA(n){return n.contentEditable="true",qr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function RI(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function GK(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!fL(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function KK(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,cr(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&ui&&sl<=11&&(r.disabled=!0,r.disabled=!1)}function hL(n,e){if(e instanceof He){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(CI(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else CI(n)}function CI(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function aS(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Je.between(e,t,r)}function xI(n){return n.editable&&!n.hasFocus()?!1:dL(n)}function dL(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function WK(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Bu(e.node,e.offset,t.anchorNode,t.anchorOffset)}function uE(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&rt.findFrom(s,e)}function Na(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function kI(n,e,t){let r=n.state.selection;if(r instanceof Je)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Na(n,new Je(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=uE(n.state,e);return i&&i instanceof He?Na(n,i):!1}else if(!(is&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?He.isSelectable(s)?Na(n,new He(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):yp?Na(n,new Je(n.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof He&&r.node.isInline)return Na(n,new Je(e>0?r.$to:r.$from));{let i=uE(n.state,e);return i?Na(n,i):!1}}}function hy(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ad(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Vc(n,e){return e<0?YK(n):QK(n)}function YK(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(Cs&&t.nodeType==1&&r<hy(t)&&Ad(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Ad(u,-1))i=t,s=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(pL(t))break;{let u=t.previousSibling;for(;u&&Ad(u,-1);)i=t.parentNode,s=cr(u),u=u.previousSibling;if(u)t=u,r=hy(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?cE(n,t,r):i&&cE(n,i,s)}function QK(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=hy(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Ad(u,1))s=t,a=++r;else break}else{if(pL(t))break;{let u=t.nextSibling;for(;u&&Ad(u,1);)s=u.parentNode,a=cr(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=hy(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&cE(n,s,a)}function pL(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function XK(n,e){for(;n&&e==n.childNodes.length&&!gp(n);)e=cr(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function JK(n,e){for(;n&&!e&&!gp(n);)e=cr(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function cE(n,e,t){if(e.nodeType!=3){let s,a;(a=XK(e,t))?(e=a,t=0):(s=JK(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(I_(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Xo(n)},50)}function II(n,e){let t=n.state.doc.resolve(e);if(!(Cr||AK)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function OI(n,e,t){let r=n.state.selection;if(r instanceof Je&&!r.empty||t.indexOf("s")>-1||is&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=uE(n.state,e);if(a&&a instanceof He)return Na(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,u=r instanceof Li?rt.near(a,e):rt.findFrom(a,e);return u?Na(n,u):!1}return!1}function NI(n,e){if(!(n.state.selection instanceof Je))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function MI(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function ZK(n){if(!qr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;MI(n,r,"true"),setTimeout(()=>MI(n,r,"false"),20)}return!1}function eW(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function tW(n,e){let t=e.keyCode,r=eW(e);if(t==8||is&&t==72&&r=="c")return NI(n,-1)||Vc(n,-1);if(t==46&&!e.shiftKey||is&&t==68&&r=="c")return NI(n,1)||Vc(n,1);if(t==13||t==27)return!0;if(t==37||is&&t==66&&r=="c"){let i=t==37?II(n,n.state.selection.from)=="ltr"?-1:1:-1;return kI(n,i,r)||Vc(n,i)}else if(t==39||is&&t==70&&r=="c"){let i=t==39?II(n,n.state.selection.from)=="ltr"?1:-1:1;return kI(n,i,r)||Vc(n,i)}else{if(t==38||is&&t==80&&r=="c")return OI(n,-1,r)||Vc(n,-1);if(t==40||is&&t==78&&r=="c")return ZK(n)||OI(n,1,r)||Vc(n,1);if(r==(is?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function lS(n,e){n.someProp("transformCopied",A=>{e=A(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let A=r.firstChild;t.push(A.type.name,A.attrs!=A.type.defaultAttrs?A.attrs:null),r=A.content}let a=n.someProp("clipboardSerializer")||Qu.fromSchema(n.state.schema),u=AL(),c=u.createElement("div");c.appendChild(a.serializeFragment(r,{document:u}));let h=c.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=vL[h.nodeName.toLowerCase()]);){for(let A=p.length-1;A>=0;A--){let T=u.createElement(p[A]);for(;c.firstChild;)T.appendChild(c.firstChild);c.appendChild(T),g++}h=c.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${s}${g?` -${g}`:""} ${JSON.stringify(t)}`);let _=n.someProp("clipboardTextSerializer",A=>A(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:_,slice:e}}function mL(n,e,t,r,i){let s=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let c=e&&(r||s||!t);if(c){if(n.someProp("transformPastedText",_=>{e=_(e,s||r,n)}),s)return e?new xe(me.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):xe.empty;let g=n.someProp("clipboardTextParser",_=>_(e,i,r,n));if(g)u=g;else{let _=i.marks(),{schema:A}=n.state,T=Qu.fromSchema(A);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let S=a.appendChild(document.createElement("p"));b&&S.appendChild(T.serializeNode(A.text(b,_)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),a=sW(t),yp&&oW(a);let h=a&&a.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let _=a.firstChild;for(;_&&_.nodeType!=1;)_=_.nextSibling;if(!_)break;a=_}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||il.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||p),context:i,ruleFromNode(_){return _.nodeName=="BR"&&!_.nextSibling&&_.parentNode&&!nW.test(_.parentNode.nodeName)?{ignore:!0}:null}})),p)u=aW(DI(u,+p[1],+p[2]),p[4]);else if(u=xe.maxOpen(rW(u.content,i),!0),u.openStart||u.openEnd){let g=0,_=0;for(let A=u.content.firstChild;g<u.openStart&&!A.type.spec.isolating;g++,A=A.firstChild);for(let A=u.content.lastChild;_<u.openEnd&&!A.type.spec.isolating;_++,A=A.lastChild);u=DI(u,g,_)}return n.someProp("transformPasted",g=>{u=g(u,n)}),u}const nW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function rW(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(u=>{if(!a)return;let c=i.findWrapping(u.type),h;if(!c)return a=null;if(h=a.length&&s.length&&yL(c,s,u,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=_L(a[a.length-1],s.length));let p=gL(u,c);a.push(p),i=i.matchType(p.type),s=c}}),a)return me.from(a)}return n}function gL(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,me.from(n));return n}function yL(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=yL(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(me.from(gL(t,n,i+1))))}}function _L(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,_L(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(me.empty,!0);return n.copy(t.append(r))}function fE(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(s=0),i<r-1&&(u=fE(u,e,t,r,i+1,s)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(me.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function DI(n,e,t){return e<n.openStart&&(n=new xe(fE(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new xe(fE(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const vL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let PI=null;function AL(){return PI||(PI=document.implementation.createHTMLDocument("title"))}let MA=null;function iW(n){let e=window.trustedTypes;return e?(MA||(MA=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),MA.createHTML(n)):n}function sW(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=AL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&vL[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=iW(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function oW(n){let e=n.querySelectorAll(Cr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function aW(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let c=t.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;i=me.from(c.create(r[u+1],i)),s++,a++}return new xe(i,s,a)}const $r={},Gr={},lW={touchstart:!0,touchmove:!0};class uW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function cW(n){for(let e in $r){let t=$r[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{hW(n,r)&&!uS(n,r)&&(n.editable||!(r.type in Gr))&&t(n,r)},lW[e]?{passive:!0}:void 0)}qr&&n.dom.addEventListener("input",()=>null),hE(n)}function Wa(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function fW(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function hE(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>uS(n,r))})}function uS(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function hW(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function dW(n,e){!uS(n,e)&&$r[e.type]&&(n.editable||!(e.type in Gr))&&$r[e.type](n,e)}Gr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!EL(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Wo&&Cr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Sf&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,uu(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||tW(n,t)?t.preventDefault():Wa(n,"key")};Gr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Gr.keypress=(n,e)=>{let t=e;if(EL(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||is&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Je)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function N_(n){return{left:n.clientX,top:n.clientY}}function pW(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function cS(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,u=>a>s.depth?u(n,t,s.nodeAfter,s.before(a),i,!0):u(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function of(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function mW(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&He.isSelectable(r)?(of(n,new He(t)),!0):!1}function gW(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof He&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let u=a>s.depth?s.nodeAfter:s.node(a);if(He.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(of(n,He.create(n.state.doc,i)),!0):!1}function yW(n,e,t,r,i){return cS(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?gW(n,t):mW(n,t))}function _W(n,e,t,r){return cS(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function vW(n,e,t,r){return cS(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||AW(n,t,r)}function AW(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(of(n,Je.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(a.inlineContent)of(n,Je.create(r,u+1,u+1+a.content.size));else if(He.isSelectable(a))of(n,He.create(r,u));else continue;return!0}}function fS(n){return dy(n)}const TL=is?"metaKey":"ctrlKey";$r.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=fS(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&pW(t,n.input.lastClick)&&!t[TL]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let a=n.posAtCoords(N_(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new TW(n,a,t,!!r)):(s=="doubleClick"?_W:vW)(n,a.pos,a.inside,t)?t.preventDefault():Wa(n,"pointer"))};class TW{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[TL],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:h}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||h instanceof He&&h.from<=a&&h.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(N_(e))),this.updateAllowDefault(e),this.allowDefault||!t?Wa(this.view,"pointer"):yW(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qr&&this.mightDrag&&!this.mightDrag.node.isAtom||Cr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(of(this.view,rt.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Wa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}$r.touchstart=n=>{n.input.lastTouch=Date.now(),fS(n),Wa(n,"pointer")};$r.touchmove=n=>{n.input.lastTouch=Date.now(),Wa(n,"pointer")};$r.contextmenu=n=>fS(n);function EL(n,e){return n.composing?!0:qr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const EW=Wo?5e3:-1;Gr.compositionstart=Gr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Je&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),dy(n,!0),n.markCursor=null;else if(dy(n,!e.selection.empty),Cs&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}bL(n,EW)};Gr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,bL(n,20))};function bL(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>dy(n),e))}function SL(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=SW());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function bW(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=mK(e.focusNode,e.focusOffset),r=gK(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function SW(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function dy(n,e=!1){if(!(Wo&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),SL(n),e||n.docView&&n.docView.dirty){let t=oS(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function wW(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Qd=ui&&sl<15||Sf&&TK<604;$r.copy=Gr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Qd?null:t.clipboardData,a=r.content(),{dom:u,text:c}=lS(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",c)):wW(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function RW(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function CW(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Xd(n,r.value,null,i,e):Xd(n,r.textContent,r.innerHTML,i,e)},50)}function Xd(n,e,t,r,i){let s=mL(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,i,s||xe.empty)))return!0;if(!s)return!1;let a=RW(s),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wL(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Gr.paste=(n,e)=>{let t=e;if(n.composing&&!Wo)return;let r=Qd?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Xd(n,wL(r),r.getData("text/html"),i,t)?t.preventDefault():CW(n,t)};class RL{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const xW=is?"altKey":"ctrlKey";function CL(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[xW]}$r.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(N_(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof He?i.to-1:i.to))){if(r&&r.mightDrag)a=He.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(a=He.create(n.state.doc,g.posBefore))}}let u=(a||n.state.selection).content(),{dom:c,text:h,slice:p}=lS(n,u);(!t.dataTransfer.files.length||!Cr||Z2>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Qd?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",Qd||t.dataTransfer.setData("text/plain",h),n.dragging=new RL(p,CL(n,t),a)};$r.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Gr.dragover=Gr.dragenter=(n,e)=>e.preventDefault();Gr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(N_(t));if(!i)return;let s=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",T=>{a=T(a,n)}):a=mL(n,wL(t.dataTransfer),Qd?null:t.dataTransfer.getData("text/html"),!1,s);let u=!!(r&&CL(n,t));if(n.someProp("handleDrop",T=>T(n,t,a||xe.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let c=a?q2(n.state.doc,s.pos,a):s.pos;c==null&&(c=s.pos);let h=n.state.tr;if(u){let{node:T}=r;T?T.replace(h):h.deleteSelection()}let p=h.mapping.map(c),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,_=h.doc;if(g?h.replaceRangeWith(p,p,a.content.firstChild):h.replaceRange(p,p,a),h.doc.eq(_))return;let A=h.doc.resolve(p);if(g&&He.isSelectable(a.content.firstChild)&&A.nodeAfter&&A.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new He(A));else{let T=h.mapping.map(c);h.mapping.maps[h.mapping.maps.length-1].forEach((b,S,C,L)=>T=L),h.setSelection(aS(n,A,h.doc.resolve(T)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};$r.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Xo(n)},20))};$r.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};$r.beforeinput=(n,e)=>{if(Cr&&Wo&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,uu(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Gr)$r[n]=Gr[n];function Jd(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class py{constructor(e,t){this.toDOM=e,this.spec=t||Cu,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Mi(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof py&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Jd(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class al{constructor(e,t){this.attrs=e,this.spec=t||Cu}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Mi(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof al&&Jd(this.attrs,e.attrs)&&Jd(this.spec,e.spec)}static is(e){return e.type instanceof al}destroy(){}}class hS{constructor(e,t){this.attrs=e,this.spec=t||Cu}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Mi(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof hS&&Jd(this.attrs,e.attrs)&&Jd(this.spec,e.spec)}destroy(){}}class Mi{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Mi(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Mi(e,e,new py(t,r))}static inline(e,t,r,i){return new Mi(e,t,new al(r,i))}static node(e,t,r,i){return new Mi(e,t,new hS(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof al}get widget(){return this.type instanceof py}}const qc=[],Cu={};class kn{constructor(e,t){this.local=e.length?e:qc,this.children=t.length?t:qc}static create(e,t){return t.length?my(t,e,0,Cu):Er}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,s)}}map(e,t,r){return this==Er||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Cu)}mapInner(e,t,r,i,s){let a;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,i);c&&c.type.valid(t,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?kW(this.children,a||[],e,t,r,i,s):a?new kn(a.sort(xu),qc):Er}add(e,t){return t.length?this==Er?kn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((u,c)=>{let h=c+r,p;if(p=kL(t,u,h)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(u,p,h+1):i.splice(s,0,c,c+u.nodeSize,my(p,u,h+1,Cu)),s+=3}});let a=xL(s?IL(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new kn(a.length?this.local.concat(a).sort(xu):this.local,i||this.children)}remove(e){return e.length==0||this==Er?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,u=r[s]+t,c=r[s+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<c&&(e[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[s+2].removeInner(a,u+1);h!=Er?r[s+2]=h:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new kn(i,r):Er}forChild(e,t){if(this==Er)return this;if(t.isLeaf)return kn.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,a=s+t.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<a&&c.to>s&&c.type instanceof al){let h=Math.max(s,c.from)-s,p=Math.min(a,c.to)-s;h<p&&(i||(i=[])).push(c.copy(h,p))}}if(i){let u=new kn(i.sort(xu),qc);return r?new Ba([u,r]):u}return r||Er}eq(e){if(this==e)return!0;if(!(e instanceof kn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return dS(this.localsInner(e))}localsInner(e){if(this==Er)return qc;if(e.inlineContent||!this.local.some(al.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof al||t.push(this.local[r]);return t}forEachSet(e){e(this)}}kn.empty=new kn([],[]);kn.removeOverlap=dS;const Er=kn.empty;class Ba{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Cu));return Ba.from(r)}forChild(e,t){if(t.isLeaf)return kn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Er&&(s instanceof Ba?r=r.concat(s.members):r.push(s))}return Ba.from(r)}eq(e){if(!(e instanceof Ba)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?dS(r?t:t.sort(xu)):qc}static from(e){switch(e.length){case 0:return Er;case 1:return e[0];default:return new Ba(e.every(t=>t instanceof kn)?e:e.reduce((t,r)=>t.concat(r instanceof kn?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function kW(n,e,t,r,i,s,a){let u=n.slice();for(let h=0,p=s;h<t.maps.length;h++){let g=0;t.maps[h].forEach((_,A,T,b)=>{let S=b-T-(A-_);for(let C=0;C<u.length;C+=3){let L=u[C+1];if(L<0||_>L+p-g)continue;let z=u[C]+p-g;A>=z?u[C+1]=_<=z?-2:-1:_>=p&&S&&(u[C]+=S,u[C+1]+=S)}g+=S}),p=t.maps[h].map(p,-1)}let c=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){c=!0,u[h+1]=-1;continue}let p=t.map(n[h]+s),g=p-i;if(g<0||g>=r.content.size){c=!0;continue}let _=t.map(n[h+1]+s,-1),A=_-i,{index:T,offset:b}=r.content.findIndex(g),S=r.maybeChild(T);if(S&&b==g&&b+S.nodeSize==A){let C=u[h+2].mapInner(t,S,p+1,n[h]+s+1,a);C!=Er?(u[h]=g,u[h+1]=A,u[h+2]=C):(u[h+1]=-2,c=!0)}else c=!0}if(c){let h=IW(u,n,e,t,i,s,a),p=my(h,r,0,a);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,_=0;g<p.children.length;g+=3){let A=p.children[g];for(;_<u.length&&u[_]<A;)_+=3;u.splice(_,0,p.children[g],p.children[g+1],p.children[g+2])}}return new kn(e.sort(xu),u)}function xL(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Mi(i.from+e,i.to+e,i.type))}return t}function IW(n,e,t,r,i,s,a){function u(c,h){for(let p=0;p<c.local.length;p++){let g=c.local[p].map(r,i,h);g?t.push(g):a.onRemove&&a.onRemove(c.local[p].spec)}for(let p=0;p<c.children.length;p+=3)u(c.children[p+2],c.children[p]+h+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&u(n[c+2],e[c]+s+1);return t}function kL(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function IL(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function my(n,e,t,r){let i=[],s=!1;e.forEach((u,c)=>{let h=kL(n,u,c+t);if(h){s=!0;let p=my(h,u,t+c+1,r);p!=Er&&i.push(c,c+u.nodeSize,p)}});let a=xL(s?IL(n):n,-t).sort(xu);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new kn(a,i):Er}function xu(n,e){return n.from-e.from||n.to-e.to}function dS(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),LI(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),LI(e,i,r.copy(s.from,r.to)));break}}}return e}function LI(n,e,t){for(;e<n.length&&xu(t,n[e])>0;)e++;n.splice(e,0,t)}function DA(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Er&&e.push(r)}),n.cursorWrapper&&e.push(kn.create(n.state.doc,[n.cursorWrapper.deco])),Ba.from(e)}const OW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},NW=ui&&sl<=11;class MW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class DW{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new MW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ui&&sl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),NW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,OW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(xI(this.view)){if(this.suppressingSelectionUpdates)return Xo(this.view);if(ui&&sl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Bu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=bf(s))t.add(s);for(let s=e.anchorNode;s;s=bf(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&xI(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,u=!1,c=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],c);g&&(s=s<0?g.from:Math.min(g.from,s),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(u=!0))}if(Cs&&c.length){let p=c.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,_]=p;g.parentNode&&g.parentNode.parentNode==_.parentNode?_.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let _ of p){let A=_.parentNode;A&&A.nodeName=="LI"&&(!g||VW(e,g)!=A)&&_.remove()}}}let h=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&I_(r)&&(h=oS(e))&&h.eq(rt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xo(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),PW(e)),this.handleDOMChange(s,a,u,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xo(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ui&&sl<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:_}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(s=_)}let a=i&&i.parentNode==e.target?cr(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?cr(s):e.target.childNodes.length,h=r.localPosFromDOM(e.target,c,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let VI=new WeakMap,UI=!1;function PW(n){if(!VI.has(n)&&(VI.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Cs,UI)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),UI=!0}}function zI(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Bu(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function LW(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return zI(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?zI(n,t):null}function VW(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function UW(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:u}=n.docView.parseRange(e,t),c=n.domSelectionRange(),h,p=c.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:c.anchorOffset}],I_(c)||h.push({node:c.focusNode,offset:c.focusOffset})),Cr&&n.input.lastKeyCode===8)for(let S=s;S>i;S--){let C=r.childNodes[S-1],L=C.pmViewDesc;if(C.nodeName=="BR"&&!L){s=S;break}if(!L||L.size)break}let g=n.state.doc,_=n.someProp("domParser")||il.fromSchema(n.state.schema),A=g.resolve(a),T=null,b=_.parse(r,{topNode:A.parent,topMatch:A.parent.contentMatchAt(A.index()),topOpen:!0,from:i,to:s,preserveWhitespace:A.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:zW,context:A});if(h&&h[0].pos!=null){let S=h[0].pos,C=h[1]&&h[1].pos;C==null&&(C=S),T={anchor:S+a,head:C+a}}return{doc:b,sel:T,from:a,to:u}}function zW(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(qr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||qr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const BW=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function jW(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let x=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,U=oS(n,x);if(U&&!n.state.selection.eq(U)){if(Cr&&Wo&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",j=>j(n,uu(13,"Enter"))))return;let V=n.state.tr.setSelection(U);x=="pointer"?V.setMeta("pointer",!0):x=="key"&&V.scrollIntoView(),s&&V.setMeta("composition",s),n.dispatch(V)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let c=n.state.selection,h=UW(n,e,t),p=n.state.doc,g=p.slice(h.from,h.to),_,A;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(_=n.state.selection.to,A="end"):(_=n.state.selection.from,A="start"),n.input.lastKeyCode=null;let T=qW(g.content,h.doc.content,h.from,_,A);if(T&&n.input.domChangeCount++,(Sf&&n.input.lastIOSEnter>Date.now()-225||Wo)&&i.some(x=>x.nodeType==1&&!BW.test(x.nodeName))&&(!T||T.endA>=T.endB)&&n.someProp("handleKeyDown",x=>x(n,uu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!T)if(r&&c instanceof Je&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))T={start:c.from,endA:c.to,endB:c.to};else{if(h.sel){let x=BI(n,n.state.doc,h.sel);if(x&&!x.eq(n.state.selection)){let U=n.state.tr.setSelection(x);s&&U.setMeta("composition",s),n.dispatch(U)}}return}n.state.selection.from<n.state.selection.to&&T.start==T.endB&&n.state.selection instanceof Je&&(T.start>n.state.selection.from&&T.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?T.start=n.state.selection.from:T.endA<n.state.selection.to&&T.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(T.endB+=n.state.selection.to-T.endA,T.endA=n.state.selection.to)),ui&&sl<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>h.from&&h.doc.textBetween(T.start-h.from-1,T.start-h.from+1)=="  "&&(T.start--,T.endA--,T.endB--);let b=h.doc.resolveNoCache(T.start-h.from),S=h.doc.resolveNoCache(T.endB-h.from),C=p.resolve(T.start),L=b.sameParent(S)&&b.parent.inlineContent&&C.end()>=T.endA,z;if((Sf&&n.input.lastIOSEnter>Date.now()-225&&(!L||i.some(x=>x.nodeName=="DIV"||x.nodeName=="P"))||!L&&b.pos<h.doc.content.size&&(!b.sameParent(S)||!b.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(b.pos,S.pos,"",""))&&(z=rt.findFrom(h.doc.resolve(b.pos+1),1,!0))&&z.head>b.pos)&&n.someProp("handleKeyDown",x=>x(n,uu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>T.start&&HW(p,T.start,T.endA,b,S)&&n.someProp("handleKeyDown",x=>x(n,uu(8,"Backspace")))){Wo&&Cr&&n.domObserver.suppressSelectionUpdates();return}Cr&&T.endB==T.start&&(n.input.lastChromeDelete=Date.now()),Wo&&!L&&b.start()!=S.start()&&S.parentOffset==0&&b.depth==S.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==T.endA&&(T.endB-=2,S=h.doc.resolveNoCache(T.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(x){return x(n,uu(13,"Enter"))})},20));let q=T.start,B=T.endA,P,N,k;if(L){if(b.pos==S.pos)ui&&sl<=11&&b.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xo(n),20)),P=n.state.tr.delete(q,B),N=p.resolve(T.start).marksAcross(p.resolve(T.endA));else if(T.endA==T.endB&&(k=FW(b.parent.content.cut(b.parentOffset,S.parentOffset),C.parent.content.cut(C.parentOffset,T.endA-C.start()))))P=n.state.tr,k.type=="add"?P.addMark(q,B,k.mark):P.removeMark(q,B,k.mark);else if(b.parent.child(b.index()).isText&&b.index()==S.index()-(S.textOffset?0:1)){let x=b.parent.textBetween(b.parentOffset,S.parentOffset);if(n.someProp("handleTextInput",U=>U(n,q,B,x)))return;P=n.state.tr.insertText(x,q,B)}}if(P||(P=n.state.tr.replace(q,B,h.doc.slice(T.start-h.from,T.endB-h.from))),h.sel){let x=BI(n,P.doc,h.sel);x&&!(Cr&&n.composing&&x.empty&&(T.start!=T.endB||n.input.lastChromeDelete<Date.now()-100)&&(x.head==q||x.head==P.mapping.map(B)-1)||ui&&x.empty&&x.head==q)&&P.setSelection(x)}N&&P.ensureMarks(N),s&&P.setMeta("composition",s),n.dispatch(P.scrollIntoView())}function BI(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:aS(n,e.resolve(t.anchor),e.resolve(t.head))}function FW(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,u,c;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],a="add",c=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&s.length==1)u=s[0],a="remove",c=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(c(e.child(p)));if(me.from(h).eq(n))return{mark:u,type:a}}function HW(n,e,t,r,i){if(t-e<=i.pos-r.pos||PA(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&t==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(PA(s,!0,!0));return!a.parent.isTextblock||a.pos>t||PA(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function PA(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function qW(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(a,u));r-=a+c-s}if(a<s&&n.size<e.size){let c=r<=s&&r>=a?s-r:0;s-=c,s&&s<e.size&&jI(e.textBetween(s-1,s+1))&&(s+=c?1:-1),u=s+(u-a),a=s}else if(u<s){let c=r<=s&&r>=u?s-r:0;s-=c,s&&s<n.size&&jI(n.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-u),u=s}return{start:s,endA:a,endB:u}}function jI(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class $W{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new uW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(GI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=qI(this),HI(this),this.nodeViews=$I(this),this.docView=EI(this.state.doc,FI(this),DA(this),this.dom,this),this.domObserver=new DW(this,(r,i,s,a)=>jW(this,r,i,s,a)),this.domObserver.start(),cW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&hE(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(GI),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(SL(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let A=$I(this);KW(A,this.nodeViews)&&(this.nodeViews=A,s=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&hE(this),this.editable=qI(this),HI(this);let c=DA(this),h=FI(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,h,c);(g||!e.selection.eq(i.selection))&&(a=!0);let _=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&SK(this);if(a){this.domObserver.stop();let A=g&&(ui||Cr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&GW(i.selection,e.selection);if(g){let T=Cr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=bW(this)),(s||!this.docView.update(e.doc,h,c,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=EI(e.doc,h,c,this.dom,this)),T&&!this.trackWrites&&(A=!0)}A||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&WK(this))?Xo(this,A):(hL(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():_&&wK(_)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof He){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&gI(this,t.getBoundingClientRect(),e)}else gI(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new RL(e.slice,e.move,i<0?void 0:He.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let u=s[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(ui){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&RK(this.dom),Xo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return OK(this,e)}coordsAtPos(e,t=1){return iL(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return LK(this,t||this.state,e)}pasteHTML(e,t){return Xd(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Xd(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return lS(this,e)}destroy(){this.docView&&(fW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],DA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,dK())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dW(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?qr&&this.root.nodeType===11&&_K(this.dom.ownerDocument)==this.dom&&LW(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function FI(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Mi.node(0,n.state.doc.content.size,e)]}function HI(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Mi.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function qI(n){return!n.someProp("editable",e=>e(n.state)===!1)}function GW(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function $I(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function KW(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function GI(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var _l={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},WW=typeof navigator<"u"&&/Mac/.test(navigator.platform),YW=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var fr=0;fr<10;fr++)_l[48+fr]=_l[96+fr]=String(fr);for(var fr=1;fr<=24;fr++)_l[fr+111]="F"+fr;for(var fr=65;fr<=90;fr++)_l[fr]=String.fromCharCode(fr+32),gy[fr]=String.fromCharCode(fr);for(var LA in _l)gy.hasOwnProperty(LA)||(gy[LA]=_l[LA]);function QW(n){var e=WW&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||YW&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?gy:_l)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const XW=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),JW=typeof navigator<"u"&&/Win/.test(navigator.platform);function ZW(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))XW?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function eY(n){let e=Object.create(null);for(let t in n)e[ZW(t)]=n[t];return e}function VA(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function tY(n){return new Jn({props:{handleKeyDown:OL(n)}})}function OL(n){let e=eY(n);return function(t,r){let i=QW(r),s,a=e[VA(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[VA(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(JW&&r.ctrlKey&&r.altKey)&&(s=_l[r.keyCode])&&s!=i){let u=e[VA(s,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const pS=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function NL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const ML=(n,e,t)=>{let r=NL(n,t);if(!r)return!1;let i=mS(r);if(!i){let a=r.blockRange(),u=a&&Pf(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(FL(n,i,e,-1))return!0;if(r.parent.content.size==0&&(wf(s,"end")||He.isSelectable(s)))for(let a=r.depth;;a--){let u=x_(n.doc,r.before(a),r.after(a),xe.empty);if(u&&u.slice.size<u.to-u.from){if(e){let c=n.tr.step(u);c.setSelection(wf(s,"end")?rt.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):He.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},nY=(n,e,t)=>{let r=NL(n,t);if(!r)return!1;let i=mS(r);return i?DL(n,i,e):!1},rY=(n,e,t)=>{let r=LL(n,t);if(!r)return!1;let i=gS(r);return i?DL(n,i,e):!1};function DL(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=e.nodeAfter,u=a,c=e.pos+1;for(;!u.isTextblock;c++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=x_(n.doc,s,c,xe.empty);if(!h||h.from!=s||h instanceof Gn&&h.slice.size>=c-s)return!1;if(t){let p=n.tr.step(h);p.setSelection(Je.create(p.doc,s)),t(p.scrollIntoView())}return!0}function wf(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const PL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=mS(r)}let a=s&&s.nodeBefore;return!a||!He.isSelectable(a)?!1:(e&&e(n.tr.setSelection(He.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function mS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function LL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const VL=(n,e,t)=>{let r=LL(n,t);if(!r)return!1;let i=gS(r);if(!i)return!1;let s=i.nodeAfter;if(FL(n,i,e,1))return!0;if(r.parent.content.size==0&&(wf(s,"start")||He.isSelectable(s))){let a=x_(n.doc,r.before(),r.after(),xe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(wf(s,"start")?rt.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):He.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},UL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=gS(r)}let a=s&&s.nodeAfter;return!a||!He.isSelectable(a)?!1:(e&&e(n.tr.setSelection(He.create(n.doc,s.pos)).scrollIntoView()),!0)};function gS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const iY=(n,e)=>{let t=n.selection,r=t instanceof He,i;if(r){if(t.node.isTextblock||!Rl(n.doc,t.from))return!1;i=t.from}else if(i=C_(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(He.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},sY=(n,e)=>{let t=n.selection,r;if(t instanceof He){if(t.node.isTextblock||!Rl(n.doc,t.to))return!1;r=t.to}else if(r=C_(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},oY=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Pf(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},zL=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function yS(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const aY=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=yS(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let u=t.after(),c=n.tr.replaceWith(u,u,a.createAndFill());c.setSelection(rt.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},BL=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Li||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=yS(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,s.createAndFill());u.setSelection(Je.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},jL=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Qo(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Pf(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function lY(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof He&&e.selection.node.isBlock)return!r.parentOffset||!Qo(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,u,c=!1,h=!1;for(let A=r.depth;;A--)if(r.node(A).isBlock){c=r.end(A)==r.pos+(r.depth-A),h=r.start(A)==r.pos-(r.depth-A),u=yS(r.node(A-1).contentMatchAt(r.indexAfter(A-1))),s.unshift(c&&u?{type:u}:null),a=A;break}else{if(A==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof Je||e.selection instanceof Li)&&p.deleteSelection();let g=p.mapping.map(r.pos),_=Qo(p.doc,g,s.length,s);if(_||(s[0]=u?{type:u}:null,_=Qo(p.doc,g,s.length,s)),!_)return!1;if(p.split(g,s.length,s),!c&&h&&r.node(a).type!=u){let A=p.mapping.map(r.before(a)),T=p.doc.resolve(A);u&&r.node(a-1).canReplaceWith(T.index(),T.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const uY=lY(),cY=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(He.create(n.doc,i))),!0)};function fY(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Rl(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function FL(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,u,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&fY(n,e,t))return!0;let h=!c&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(a=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(a[0]||s.type).validEnd){if(t){let A=e.pos+s.nodeSize,T=me.empty;for(let C=a.length-1;C>=0;C--)T=me.from(a[C].create(null,T));T=me.from(i.copy(T));let b=n.tr.step(new Kn(e.pos-1,A,e.pos,A,new xe(T,1,0),a.length,!0)),S=b.doc.resolve(A+2*a.length);S.nodeAfter&&S.nodeAfter.type==i.type&&Rl(b.doc,S.pos)&&b.join(S.pos),t(b.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&c?null:rt.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),_=g&&Pf(g);if(_!=null&&_>=e.depth)return t&&t(n.tr.lift(g,_).scrollIntoView()),!0;if(h&&wf(s,"start",!0)&&wf(i,"end")){let A=i,T=[];for(;T.push(A),!A.isTextblock;)A=A.lastChild;let b=s,S=1;for(;!b.isTextblock;b=b.firstChild)S++;if(A.canReplace(A.childCount,A.childCount,b.content)){if(t){let C=me.empty;for(let z=T.length-1;z>=0;z--)C=me.from(T[z].copy(C));let L=n.tr.step(new Kn(e.pos-T.length,e.pos+s.nodeSize,e.pos+S,e.pos+s.nodeSize-S,new xe(C,T.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function HL(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Je.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const hY=HL(-1),dY=HL(1);function pY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),u=a&&rS(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function KI(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(a,u,(c,h)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)i=!0;else{let p=t.doc.resolve(h),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:c}}=t.selection.ranges[a];s.setBlockType(u,c,n,e)}r(s.scrollIntoView())}return!0}}function _S(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}_S(pS,ML,PL);_S(pS,VL,UL);_S(zL,BL,jL,uY);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function mY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s);if(!a)return!1;let u=r?t.tr:null;return gY(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function gY(n,e,t,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);s=new uy(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new uy(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=rS(s,t,r,e);return u?(n&&yY(n,e,u,i,t),!0):!1}function yY(n,e,t,r,i){let s=me.empty;for(let p=t.length-1;p>=0;p--)s=me.from(t[p].type.create(t[p].attrs,s));n.step(new Kn(e.start-(r?2:0),e.end,e.start,e.end,new xe(s,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,c=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,_=!0;p<g;p++,_=!1)!_&&Qo(n.doc,c,u)&&(n.split(c,u),c+=2*u),c+=h.child(p).nodeSize;return n}function _Y(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?vY(e,t,n,s):AY(e,t,s):!0:!1}}function vY(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Kn(s-1,a,s,a,new xe(me.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new uy(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=Pf(r);if(u==null)return!1;i.lift(r,u);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return Rl(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function AY(n,e,t){let r=n.tr,i=t.parent;for(let A=t.end,T=t.endIndex-1,b=t.startIndex;T>b;T--)A-=i.child(T).nodeSize,r.delete(A-1,A+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,c=t.endIndex==i.childCount,h=s.node(-1),p=s.index(-1);if(!h.canReplace(p+(u?0:1),p+1,a.content.append(c?me.empty:me.from(i))))return!1;let g=s.pos,_=g+a.nodeSize;return r.step(new Kn(g-(u?1:0),_+(c?1:0),g+1,_-1,new xe((u?me.empty:me.from(i.copy(me.empty))).append(c?me.empty:me.from(i.copy(me.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function TY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let u=s.parent,c=u.child(a-1);if(c.type!=n)return!1;if(t){let h=c.lastChild&&c.lastChild.type==u.type,p=me.from(h?n.create():null),g=new xe(me.from(n.create(null,me.from(u.type.create(null,p)))),h?3:1,0),_=s.start,A=s.end;t(e.tr.step(new Kn(_-(h?3:1),A,_,A,g,1,!0)).scrollIntoView())}return!0}}function M_(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class D_{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([u,c])=>[u,(...p)=>{const g=c(...p)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u=[],c=!!e,h=e||s.tr,p=()=>(!c&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(h),u.every(_=>_===!0)),g={...Object.fromEntries(Object.entries(r).map(([_,A])=>[_,(...b)=>{const S=this.buildProps(h,t),C=A(...b)(S);return u.push(C),g}])),run:p};return g}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,a=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([c,h])=>[c,(...p)=>h(...p)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u={tr:e,editor:i,view:a,state:M_({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,h])=>[c,(...p)=>h(...p)(u)]))}};return u}}class EY{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function De(n,e,t){return n.config[e]===void 0&&n.parent?De(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?De(n.parent,e,t):null}):n.config[e]}function P_(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function qL(n){const e=[],{nodeExtensions:t,markExtensions:r}=P_(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage,extensions:i},c=De(a,"addGlobalAttributes",u);if(!c)return;c().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([_,A])=>{e.push({type:g,name:_,attribute:{...s,...A}})})})})}),i.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},c=De(a,"addAttributes",u);if(!c)return;const h=c();Object.entries(h).forEach(([p,g])=>{const _={...s,...g};typeof(_==null?void 0:_.default)=="function"&&(_.default=_.default()),_!=null&&_.isRequired&&(_==null?void 0:_.default)===void 0&&delete _.default,e.push({type:a.name,name:p,attribute:_})})}),e}function Qn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Xn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],h=u.filter(p=>!c.includes(p));r[i]=[...c,...h].join(" ")}else if(i==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;c.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());h.set(g,_)}),u.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());h.set(g,_)}),r[i]=Array.from(h.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[i]=s}),r},{})}function dE(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Xn(t,r),{})}function $L(n){return typeof n=="function"}function at(n,e=void 0,...t){return $L(n)?e?n.bind(e)(...t):n(...t):n}function bY(n={}){return Object.keys(n).length===0&&n.constructor===Object}function SY(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function WI(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):SY(t.getAttribute(a.name));return u==null?s:{...s,[a.name]:u}},{});return{...r,...i}}}}function YI(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&bY(t)?!1:t!=null))}function wY(n,e){var t;const r=qL(n),{nodeExtensions:i,markExtensions:s}=P_(n),a=(t=i.find(h=>De(h,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(i.map(h=>{const p=r.filter(C=>C.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},_=n.reduce((C,L)=>{const z=De(L,"extendNodeSchema",g);return{...C,...z?z(h):{}}},{}),A=YI({..._,content:at(De(h,"content",g)),marks:at(De(h,"marks",g)),group:at(De(h,"group",g)),inline:at(De(h,"inline",g)),atom:at(De(h,"atom",g)),selectable:at(De(h,"selectable",g)),draggable:at(De(h,"draggable",g)),code:at(De(h,"code",g)),whitespace:at(De(h,"whitespace",g)),linebreakReplacement:at(De(h,"linebreakReplacement",g)),defining:at(De(h,"defining",g)),isolating:at(De(h,"isolating",g)),attrs:Object.fromEntries(p.map(C=>{var L;return[C.name,{default:(L=C==null?void 0:C.attribute)===null||L===void 0?void 0:L.default}]}))}),T=at(De(h,"parseHTML",g));T&&(A.parseDOM=T.map(C=>WI(C,p)));const b=De(h,"renderHTML",g);b&&(A.toDOM=C=>b({node:C,HTMLAttributes:dE(C,p)}));const S=De(h,"renderText",g);return S&&(A.toText=S),[h.name,A]})),c=Object.fromEntries(s.map(h=>{const p=r.filter(S=>S.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},_=n.reduce((S,C)=>{const L=De(C,"extendMarkSchema",g);return{...S,...L?L(h):{}}},{}),A=YI({..._,inclusive:at(De(h,"inclusive",g)),excludes:at(De(h,"excludes",g)),group:at(De(h,"group",g)),spanning:at(De(h,"spanning",g)),code:at(De(h,"code",g)),attrs:Object.fromEntries(p.map(S=>{var C;return[S.name,{default:(C=S==null?void 0:S.attribute)===null||C===void 0?void 0:C.default}]}))}),T=at(De(h,"parseHTML",g));T&&(A.parseDOM=T.map(S=>WI(S,p)));const b=De(h,"renderHTML",g);return b&&(A.toDOM=S=>b({mark:S,HTMLAttributes:dE(S,p)})),[h.name,A]}));return new M2({topNode:a,nodes:u,marks:c})}function UA(n,e){return e.nodes[n]||e.marks[n]||null}function QI(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function vS(n,e){const t=Qu.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const RY=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,u)=>{var c,h;const p=((h=(c=i.type.spec).toText)===null||h===void 0?void 0:h.call(c,{node:i,pos:s,parent:a,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-s))}),t};function AS(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class L_{constructor(e){this.find=e.find,this.handler=e.handler}}const CY=(n,e)=>{if(AS(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Ym(n){var e;const{editor:t,from:r,to:i,text:s,rules:a,plugin:u}=n,{view:c}=t;if(c.composing)return!1;const h=c.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(_=>_.type.spec.code))return!1;let p=!1;const g=RY(h)+s;return a.forEach(_=>{if(p)return;const A=CY(g,_.find);if(!A)return;const T=c.state.tr,b=M_({state:c.state,transaction:T}),S={from:r-(A[0].length-s.length),to:i},{commands:C,chain:L,can:z}=new D_({editor:t,state:b});_.handler({state:b,range:S,match:A,commands:C,chain:L,can:z})===null||!T.steps.length||(T.setMeta(u,{transform:T,from:r,to:i,text:s}),c.dispatch(T),p=!0)}),p}function xY(n){const{editor:e,rules:t}=n,r=new Jn({state:{init(){return null},apply(i,s,a){const u=i.getMeta(r);if(u)return u;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:p}=c;typeof p=="string"?p=p:p=vS(me.from(p),a.schema);const{from:g}=c,_=g+p.length;Ym({editor:e,from:g,to:_,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,u){return Ym({editor:e,from:s,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Ym({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Ym({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function kY(n){return Object.prototype.toString.call(n).slice(8,-1)}function Qm(n){return kY(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function V_(n,e){const t={...n};return Qm(n)&&Qm(e)&&Object.keys(e).forEach(r=>{Qm(e[r])&&Qm(n[r])?t[r]=V_(n[r],e[r]):t[r]=e[r]}),t}class go{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(De(this,"addOptions",{name:this.name}))),this.storage=at(De(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new go(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>V_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new go(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(De(t,"addOptions",{name:t.name})),t.storage=at(De(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const c=a.find(h=>(h==null?void 0:h.type.name)===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function IY(n){return typeof n=="number"}class OY{constructor(e){this.find=e.find,this.handler=e.handler}}const NY=(n,e,t)=>{if(AS(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function MY(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:a,dropEvent:u}=n,{commands:c,chain:h,can:p}=new D_({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,i,(A,T)=>{if(!A.isTextblock||A.type.spec.code)return;const b=Math.max(r,T),S=Math.min(i,T+A.content.size),C=A.textBetween(b-T,S-T,void 0,"￼");NY(C,s.find,a).forEach(z=>{if(z.index===void 0)return;const q=b+z.index+1,B=q+z[0].length,P={from:t.tr.mapping.map(q),to:t.tr.mapping.map(B)},N=s.handler({state:t,range:P,match:z,commands:c,chain:h,can:p,pasteEvent:a,dropEvent:u});g.push(N)})}),g.every(A=>A!==null)}let Xm=null;const DY=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function PY(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const c=({state:p,from:g,to:_,rule:A,pasteEvt:T})=>{const b=p.tr,S=M_({state:p,transaction:b});if(!(!MY({editor:e,state:S,from:Math.max(g-1,0),to:_.b-1,rule:A,pasteEvent:T,dropEvent:u})||!b.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return t.map(p=>new Jn({view(g){const _=T=>{var b;r=!((b=g.dom.parentElement)===null||b===void 0)&&b.contains(T.target)?g.dom.parentElement:null,r&&(Xm=e)},A=()=>{Xm&&(Xm=null)};return window.addEventListener("dragstart",_),window.addEventListener("dragend",A),{destroy(){window.removeEventListener("dragstart",_),window.removeEventListener("dragend",A)}}},props:{handleDOMEvents:{drop:(g,_)=>{if(s=r===g.dom.parentElement,u=_,!s){const A=Xm;A&&setTimeout(()=>{const T=A.state.selection;T&&A.commands.deleteRange({from:T.from,to:T.to})},10)}return!1},paste:(g,_)=>{var A;const T=(A=_.clipboardData)===null||A===void 0?void 0:A.getData("text/html");return a=_,i=!!(T!=null&&T.includes("data-pm-slice")),!1}}},appendTransaction:(g,_,A)=>{const T=g[0],b=T.getMeta("uiEvent")==="paste"&&!i,S=T.getMeta("uiEvent")==="drop"&&!s,C=T.getMeta("applyPasteRules"),L=!!C;if(!b&&!S&&!L)return;if(L){let{text:B}=C;typeof B=="string"?B=B:B=vS(me.from(B),A.schema);const{from:P}=C,N=P+B.length,k=DY(B);return c({rule:p,state:A,from:P,to:{b:N},pasteEvt:k})}const z=_.doc.content.findDiffStart(A.doc.content),q=_.doc.content.findDiffEnd(A.doc.content);if(!(!IY(z)||!q||z===q.b))return c({rule:p,state:A,from:z,to:q,pasteEvt:a})}}))}function LY(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Yc{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Yc.resolve(e),this.schema=wY(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Yc.sort(Yc.flatten(e)),r=LY(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=De(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=De(r,"priority")||100,a=De(i,"priority")||100;return s>a?-1:s<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:UA(t.name,this.schema)},i=De(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Yc.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(a=>{const u={name:a.name,options:a.options,storage:a.storage,editor:e,type:UA(a.name,this.schema)},c=[],h=De(a,"addKeyboardShortcuts",u);let p={};if(a.type==="mark"&&De(a,"exitable",u)&&(p.ArrowRight=()=>go.handleExit({editor:e,mark:a})),h){const b=Object.fromEntries(Object.entries(h()).map(([S,C])=>[S,()=>C({editor:e})]));p={...p,...b}}const g=tY(p);c.push(g);const _=De(a,"addInputRules",u);QI(a,e.options.enableInputRules)&&_&&r.push(..._());const A=De(a,"addPasteRules",u);QI(a,e.options.enablePasteRules)&&A&&i.push(...A());const T=De(a,"addProseMirrorPlugins",u);if(T){const b=T();c.push(...b)}return c}).flat();return[xY({editor:e,rules:r}),...PY({editor:e,rules:i}),...s]}get attributes(){return qL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=P_(this.extensions);return Object.fromEntries(t.filter(r=>!!De(r,"addNodeView")).map(r=>{const i=this.attributes.filter(c=>c.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Qn(r.name,this.schema)},a=De(r,"addNodeView",s);if(!a)return[];const u=(c,h,p,g,_)=>{const A=dE(c,i);return a()({node:c,view:h,getPos:p,decorations:g,innerDecorations:_,editor:e,extension:r,HTMLAttributes:A})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:UA(e.name,this.schema)};e.type==="mark"&&(!((t=at(De(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=De(e,"onBeforeCreate",r),s=De(e,"onCreate",r),a=De(e,"onUpdate",r),u=De(e,"onSelectionUpdate",r),c=De(e,"onTransaction",r),h=De(e,"onFocus",r),p=De(e,"onBlur",r),g=De(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),c&&this.editor.on("transaction",c),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}}class Ir{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(De(this,"addOptions",{name:this.name}))),this.storage=at(De(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ir(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>V_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ir({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(De(t,"addOptions",{name:t.name})),t.storage=at(De(t,"addStorage",{name:t.name,options:t.options})),t}}function GL(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,i,(c,h,p,g)=>{var _;c.isBlock&&h>r&&(u+=s);const A=a==null?void 0:a[c.type.name];if(A)return p&&(u+=A({node:c,pos:h,parent:p,index:g,range:e})),!1;c.isText&&(u+=(_=c==null?void 0:c.text)===null||_===void 0?void 0:_.slice(Math.max(r,h)-h,i-h))}),u}function KL(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const VY=Ir.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Jn({key:new hi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),c=KL(t);return GL(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),UY=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),zY=(n=!1)=>({commands:e})=>e.setContent("",n),BY=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(u,c)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,g=h.resolve(p.map(c)),_=h.resolve(p.map(c+u.nodeSize)),A=g.blockRange(_);if(!A)return;const T=Pf(A);if(u.type.isTextblock){const{defaultType:b}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(A.start,b)}(T||T===0)&&e.lift(A,T)})}),!0},jY=n=>e=>n(e),FY=()=>({state:n,dispatch:e})=>BL(n,e),HY=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new Je(r.doc.resolve(a-1))),!0},qY=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),c=i.after(s);n.delete(u,c).scrollIntoView()}return!0}return!1},$Y=n=>({tr:e,state:t,dispatch:r})=>{const i=Qn(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const c=s.before(a),h=s.after(a);e.delete(c,h).scrollIntoView()}return!0}return!1},GY=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},KY=()=>({state:n,dispatch:e})=>pS(n,e),WY=()=>({commands:n})=>n.keyboardShortcut("Enter"),YY=()=>({state:n,dispatch:e})=>aY(n,e);function yy(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:AS(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function WL(n,e,t={}){return n.find(r=>r.type===e&&yy(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function XI(n,e,t={}){return!!WL(n,e,t)}function TS(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!WL([...i.node.marks],e,t)))return;let a=i.index,u=n.start()+i.offset,c=a+1,h=u+i.node.nodeSize;for(;a>0&&XI([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;c<n.parent.childCount&&XI([...n.parent.child(c).marks],e,t);)h+=n.parent.child(c).nodeSize,c+=1;return{from:u,to:h}}function xl(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const QY=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=xl(n,r.schema),{doc:a,selection:u}=t,{$from:c,from:h,to:p}=u;if(i){const g=TS(c,s,e);if(g&&g.from<=h&&g.to>=p){const _=Je.create(a,g.from,g.to);t.setSelection(_)}}return!0},XY=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function YL(n){return n instanceof Je}function _u(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function QL(n,e=null){if(!e)return null;const t=rt.atStart(n),r=rt.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?Je.create(n,_u(0,i,s),_u(n.content.size,i,s)):Je.create(n,_u(e,i,s),_u(e,i,s))}function JY(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ES(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ZY=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(ES()||JY())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!YL(t.state.selection))return a(),!0;const u=QL(i.doc,n)||t.state.selection,c=t.state.selection.eq(u);return s&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},eQ=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),tQ=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),XL=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&XL(r)}return n};function Jm(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return XL(t)}function _y(n,e,t){if(n instanceof rl||n instanceof me)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return me.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),_y("",e,t)}if(i){if(t.errorOnInvalidContent){let a=!1,u="";const c=new M2({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(a=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?il.fromSchema(c).parseSlice(Jm(n),t.parseOptions):il.fromSchema(c).parse(Jm(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=il.fromSchema(e);return t.slice?s.parseSlice(Jm(n),t.parseOptions).content:s.parse(Jm(n),t.parseOptions)}return _y("",e,t)}function nQ(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Gn||i instanceof Kn))return;const s=n.mapping.maps[r];let a=0;s.forEach((u,c,h,p)=>{a===0&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const rQ=n=>!("type"in n),iQ=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;try{u=_y(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck})}catch(T){return s.emit("contentError",{editor:s,error:T,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:c,to:h}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},p=!0,g=!0;if((rQ(u)?u:[u]).forEach(T=>{T.check(),p=p?T.isText&&T.marks.length===0:!1,g=g?T.isBlock:!1}),c===h&&g){const{parent:T}=r.doc.resolve(c);T.isTextblock&&!T.type.spec.code&&!T.childCount&&(c-=1,h+=1)}let A;if(p){if(Array.isArray(e))A=e.map(T=>T.text||"").join("");else if(e instanceof me){let T="";e.forEach(b=>{b.text&&(T+=b.text)}),A=T}else typeof e=="object"&&e&&e.text?A=e.text:A=e;r.insertText(A,c,h)}else A=u,r.replaceWith(c,h,A);t.updateSelection&&nQ(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:A}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:A})}return!0},sQ=()=>({state:n,dispatch:e})=>iY(n,e),oQ=()=>({state:n,dispatch:e})=>sY(n,e),aQ=()=>({state:n,dispatch:e})=>ML(n,e),lQ=()=>({state:n,dispatch:e})=>VL(n,e),uQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=C_(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},cQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=C_(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},fQ=()=>({state:n,dispatch:e})=>nY(n,e),hQ=()=>({state:n,dispatch:e})=>rY(n,e);function JL(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dQ(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u+=1){const c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))ES()||JL()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const pQ=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=dQ(n).split(/-(?!$)/),a=s.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return c==null||c.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function Zd(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,a=e?Qn(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(g,_)=>{if(g.isText)return;const A=Math.max(r,_),T=Math.min(i,_+g.nodeSize);u.push({node:g,from:A,to:T})});const c=i-r,h=u.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>yy(g.node.attrs,t,{strict:!1}));return s?!!h.length:h.reduce((g,_)=>g+_.to-_.from,0)>=c}const mQ=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return Zd(t,i,e)?oY(t,r):!1},gQ=()=>({state:n,dispatch:e})=>jL(n,e),yQ=n=>({state:e,dispatch:t})=>{const r=Qn(n,e.schema);return _Y(r)(e,t)},_Q=()=>({state:n,dispatch:e})=>zL(n,e);function U_(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function JI(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const vQ=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=U_(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Qn(n,r.schema)),u==="mark"&&(a=xl(n,r.schema)),i&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(h,p)=>{s&&s===h.type&&t.setNodeMarkup(p,void 0,JI(h.attrs,e)),a&&h.marks.length&&h.marks.forEach(g=>{a===g.type&&t.addMark(p,p+h.nodeSize,a.create(JI(g.attrs,e)))})})}),!0):!1},AQ=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),TQ=()=>({tr:n,dispatch:e})=>{if(e){const t=new Li(n.doc);n.setSelection(t)}return!0},EQ=()=>({state:n,dispatch:e})=>PL(n,e),bQ=()=>({state:n,dispatch:e})=>UL(n,e),SQ=()=>({state:n,dispatch:e})=>cY(n,e),wQ=()=>({state:n,dispatch:e})=>dY(n,e),RQ=()=>({state:n,dispatch:e})=>hY(n,e);function pE(n,e,t={},r={}){return _y(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const CQ=(n,e=!1,t={},r={})=>({editor:i,tr:s,dispatch:a,commands:u})=>{var c,h;const{doc:p}=s;if(t.preserveWhitespace!=="full"){const g=pE(n,i.schema,t,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck});return a&&s.replaceWith(0,p.content.size,g).setMeta("preventUpdate",!e),!0}return a&&s.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck})};function ZL(n,e){const t=xl(e,n.schema),{from:r,to:i,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const u=a.find(c=>c.type.name===t.name);return u?{...u.attrs}:{}}function xQ(n,e){const t=new Y2(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function kQ(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function IQ(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function OQ(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function bS(n){return e=>OQ(e.$from,n)}function NQ(n,e){const t={from:0,to:n.content.size};return GL(n,t,e)}function MQ(n,e){const t=Qn(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,u=>{s.push(u)});const a=s.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function eV(n,e){const t=U_(typeof e=="string"?e:e.name,n.schema);return t==="node"?MQ(n,e):t==="mark"?ZL(n,e):{}}function DQ(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function PQ(n){const e=DQ(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function LQ(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((u,c)=>{a.push({from:u,to:c})});else{const{from:u,to:c}=t[s];if(u===void 0||c===void 0)return;a.push({from:u,to:c})}a.forEach(({from:u,to:c})=>{const h=e.slice(s).map(u,-1),p=e.slice(s).map(c),g=e.invert().map(h,-1),_=e.invert().map(p);r.push({oldRange:{from:g,to:_},newRange:{from:h,to:p}})})}),PQ(r)}function SS(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),a=TS(s,i.type);a&&r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}function Sg(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function mE(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?xl(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>yy(g.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:g,$to:_})=>{const A=g.pos,T=_.pos;n.doc.nodesBetween(A,T,(b,S)=>{if(!b.isText&&!b.marks.length)return;const C=Math.max(A,S),L=Math.min(T,S+b.nodeSize),z=L-C;a+=z,u.push(...b.marks.map(q=>({mark:q,from:C,to:L})))})}),a===0)return!1;const c=u.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>yy(g.mark.attrs,t,{strict:!1})).reduce((g,_)=>g+_.to-_.from,0),h=u.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,_)=>g+_.to-_.from,0);return(c>0?c+h:c)>=a}function VQ(n,e,t={}){if(!e)return Zd(n,null,t)||mE(n,null,t);const r=U_(e,n.schema);return r==="node"?Zd(n,e,t):r==="mark"?mE(n,e,t):!1}function ZI(n,e){const{nodeExtensions:t}=P_(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=at(De(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function z_(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(z_(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function UQ(n){return n instanceof He}function zQ(n,e,t){var r;const{selection:i}=e;let s=null;if(YL(i)&&(s=i.$cursor),s){const u=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(u)||!u.some(c=>c.type.excludes(t))}const{ranges:a}=i;return a.some(({$from:u,$to:c})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,c.pos,(p,g,_)=>{if(h)return!1;if(p.isInline){const A=!_||_.type.allowsMarkType(t),T=!!t.isInSet(p.marks)||!p.marks.some(b=>b.type.excludes(t));h=A&&T}return!h}),h})}const BQ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:a,ranges:u}=s,c=xl(n,r.schema);if(i)if(a){const h=ZL(r,c);t.addStoredMark(c.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(_,A)=>{const T=Math.max(A,p),b=Math.min(A+_.nodeSize,g);_.marks.find(C=>C.type===c)?_.marks.forEach(C=>{c===C.type&&t.addMark(T,b,c.create({...C.attrs,...e}))}):t.addMark(T,b,c.create(e))})});return zQ(r,t,c)},jQ=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),FQ=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Qn(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>KI(s,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>KI(s,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},HQ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=_u(n,0,r.content.size),s=He.create(r,i);e.setSelection(s)}return!0},qQ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,a=Je.atStart(r).from,u=Je.atEnd(r).to,c=_u(i,a,u),h=_u(s,a,u),p=Je.create(r,c,h);e.setSelection(p)}return!0},$Q=n=>({state:e,dispatch:t})=>{const r=Qn(n,e.schema);return TY(r)(e,t)};function eO(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const GQ=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:u,$to:c}=s,h=i.extensionManager.attributes,p=Sg(h,u.node().type.name,u.node().attrs);if(s instanceof He&&s.node.isBlock)return!u.parentOffset||!Qo(a,u.pos)?!1:(r&&(n&&eO(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=c.parentOffset===c.parent.content.size,_=u.depth===0?void 0:kQ(u.node(-1).contentMatchAt(u.indexAfter(-1)));let A=g&&_?[{type:_,attrs:p}]:void 0,T=Qo(e.doc,e.mapping.map(u.pos),1,A);if(!A&&!T&&Qo(e.doc,e.mapping.map(u.pos),1,_?[{type:_}]:void 0)&&(T=!0,A=_?[{type:_,attrs:p}]:void 0),r){if(T&&(s instanceof Je&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,A),_&&!g&&!u.parentOffset&&u.parent.type!==_)){const b=e.mapping.map(u.before()),S=e.doc.resolve(b);u.node(-1).canReplaceWith(S.index(),S.index()+1,_)&&e.setNodeMarkup(e.mapping.map(u.before()),_)}n&&eO(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return T},KQ=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var a;const u=Qn(n,r.schema),{$from:c,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||c.depth<2||!c.sameParent(h))return!1;const g=c.node(-1);if(g.type!==u)return!1;const _=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let C=me.empty;const L=c.index(-1)?1:c.index(-2)?2:3;for(let k=c.depth-L;k>=c.depth-3;k-=1)C=me.from(c.node(k).copy(C));const z=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,q={...Sg(_,c.node().type.name,c.node().attrs),...e},B=((a=u.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(q))||void 0;C=C.append(me.from(u.createAndFill(null,B)||void 0));const P=c.before(c.depth-(L-1));t.replace(P,c.after(-z),new xe(C,4-L,0));let N=-1;t.doc.nodesBetween(P,t.doc.content.size,(k,x)=>{if(N>-1)return!1;k.isTextblock&&k.content.size===0&&(N=x+1)}),N>-1&&t.setSelection(Je.near(t.doc.resolve(N))),t.scrollIntoView()}return!0}const A=h.pos===c.end()?g.contentMatchAt(0).defaultType:null,T={...Sg(_,g.type.name,g.attrs),...e},b={...Sg(_,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,h.pos);const S=A?[{type:u,attrs:T},{type:A,attrs:b}]:[{type:u,attrs:T}];if(!Qo(t.doc,c.pos,2))return!1;if(i){const{selection:C,storedMarks:L}=r,{splittableMarks:z}=s.extensionManager,q=L||C.$to.parentOffset&&C.$from.marks();if(t.split(c.pos,2,S).scrollIntoView(),!q||!i)return!0;const B=q.filter(P=>z.includes(P.type.name));t.ensureMarks(B)}return!0},zA=(n,e)=>{const t=bS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Rl(n.doc,t.pos)&&n.join(t.pos),!0},BA=(n,e)=>{const t=bS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Rl(n.doc,r)&&n.join(r),!0},WQ=(n,e,t,r={})=>({editor:i,tr:s,state:a,dispatch:u,chain:c,commands:h,can:p})=>{const{extensions:g,splittableMarks:_}=i.extensionManager,A=Qn(n,a.schema),T=Qn(e,a.schema),{selection:b,storedMarks:S}=a,{$from:C,$to:L}=b,z=C.blockRange(L),q=S||b.$to.parentOffset&&b.$from.marks();if(!z)return!1;const B=bS(P=>ZI(P.type.name,g))(b);if(z.depth>=1&&B&&z.depth-B.depth<=1){if(B.node.type===A)return h.liftListItem(T);if(ZI(B.node.type.name,g)&&A.validContent(B.node.content)&&u)return c().command(()=>(s.setNodeMarkup(B.pos,A),!0)).command(()=>zA(s,A)).command(()=>BA(s,A)).run()}return!t||!q||!u?c().command(()=>p().wrapInList(A,r)?!0:h.clearNodes()).wrapInList(A,r).command(()=>zA(s,A)).command(()=>BA(s,A)).run():c().command(()=>{const P=p().wrapInList(A,r),N=q.filter(k=>_.includes(k.type.name));return s.ensureMarks(N),P?!0:h.clearNodes()}).wrapInList(A,r).command(()=>zA(s,A)).command(()=>BA(s,A)).run()},YQ=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,a=xl(n,r.schema);return mE(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},QQ=(n,e,t={})=>({state:r,commands:i})=>{const s=Qn(n,r.schema),a=Qn(e,r.schema),u=Zd(r,s,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),u?i.setNode(a,c):i.setNode(s,{...c,...t})},XQ=(n,e={})=>({state:t,commands:r})=>{const i=Qn(n,t.schema);return Zd(t,i,e)?r.lift(i):r.wrapIn(i,e)},JQ=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const a=n.tr,u=s.transform;for(let c=u.steps.length-1;c>=0;c-=1)a.step(u.steps[c].invert(u.docs[c]));if(s.text){const c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,c))}else a.delete(s.from,s.to)}return!0}}return!1},ZQ=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},eX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,c=xl(n,r.schema),{$from:h,empty:p,ranges:g}=u;if(!i)return!0;if(p&&a){let{from:_,to:A}=u;const T=(s=h.marks().find(S=>S.type===c))===null||s===void 0?void 0:s.attrs,b=TS(h,c,T);b&&(_=b.from,A=b.to),t.removeMark(_,A,c)}else g.forEach(_=>{t.removeMark(_.$from.pos,_.$to.pos,c)});return t.removeStoredMark(c),!0},tX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=U_(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Qn(n,r.schema)),u==="mark"&&(a=xl(n,r.schema)),i&&t.selection.ranges.forEach(c=>{const h=c.$from.pos,p=c.$to.pos;let g,_,A,T;t.selection.empty?r.doc.nodesBetween(h,p,(b,S)=>{s&&s===b.type&&(A=Math.max(S,h),T=Math.min(S+b.nodeSize,p),g=S,_=b)}):r.doc.nodesBetween(h,p,(b,S)=>{S<h&&s&&s===b.type&&(A=Math.max(S,h),T=Math.min(S+b.nodeSize,p),g=S,_=b),S>=h&&S<=p&&(s&&s===b.type&&t.setNodeMarkup(S,void 0,{...b.attrs,...e}),a&&b.marks.length&&b.marks.forEach(C=>{if(a===C.type){const L=Math.max(S,h),z=Math.min(S+b.nodeSize,p);t.addMark(L,z,a.create({...C.attrs,...e}))}}))}),_&&(g!==void 0&&t.setNodeMarkup(g,void 0,{..._.attrs,...e}),a&&_.marks.length&&_.marks.forEach(b=>{a===b.type&&t.addMark(A,T,a.create({...b.attrs,...e}))}))}),!0):!1},nX=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return pY(i,e)(t,r)},rX=(n,e={})=>({state:t,dispatch:r})=>{const i=Qn(n,t.schema);return mY(i,e)(t,r)};var iX=Object.freeze({__proto__:null,blur:UY,clearContent:zY,clearNodes:BY,command:jY,createParagraphNear:FY,cut:HY,deleteCurrentNode:qY,deleteNode:$Y,deleteRange:GY,deleteSelection:KY,enter:WY,exitCode:YY,extendMarkRange:QY,first:XY,focus:ZY,forEach:eQ,insertContent:tQ,insertContentAt:iQ,joinBackward:aQ,joinDown:oQ,joinForward:lQ,joinItemBackward:uQ,joinItemForward:cQ,joinTextblockBackward:fQ,joinTextblockForward:hQ,joinUp:sQ,keyboardShortcut:pQ,lift:mQ,liftEmptyBlock:gQ,liftListItem:yQ,newlineInCode:_Q,resetAttributes:vQ,scrollIntoView:AQ,selectAll:TQ,selectNodeBackward:EQ,selectNodeForward:bQ,selectParentNode:SQ,selectTextblockEnd:wQ,selectTextblockStart:RQ,setContent:CQ,setMark:BQ,setMeta:jQ,setNode:FQ,setNodeSelection:HQ,setTextSelection:qQ,sinkListItem:$Q,splitBlock:GQ,splitListItem:KQ,toggleList:WQ,toggleMark:YQ,toggleNode:QQ,toggleWrap:XQ,undoInputRule:JQ,unsetAllMarks:ZQ,unsetMark:eX,updateAttributes:tX,wrapIn:nX,wrapInList:rX});const sX=Ir.create({name:"commands",addCommands(){return{...iX}}}),oX=Ir.create({name:"drop",addProseMirrorPlugins(){return[new Jn({key:new hi("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),aX=Ir.create({name:"editable",addProseMirrorPlugins(){return[new Jn({key:new hi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lX=new hi("focusEvents"),uX=Ir.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Jn({key:lX,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),cX=Ir.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:c,doc:h}=u,{empty:p,$anchor:g}=c,{pos:_,parent:A}=g,T=g.parent.isTextblock&&_>0?u.doc.resolve(_-1):g,b=T.parent.type.spec.isolating,S=g.pos-g.parentOffset,C=b&&T.parent.childCount===1?S===g.pos:rt.atStart(h).from===_;return!p||!A.type.isTextblock||A.textContent.length||!C||C&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ES()||JL()?s:i},addProseMirrorPlugins(){return[new Jn({key:new hi("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(b=>b.getMeta("composition")))return;const r=n.some(b=>b.docChanged)&&!e.doc.eq(t.doc),i=n.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:u}=e.selection,c=rt.atStart(e.doc).from,h=rt.atEnd(e.doc).to;if(s||!(a===c&&u===h)||!z_(t.doc))return;const _=t.tr,A=M_({state:t,transaction:_}),{commands:T}=new D_({editor:this.editor,state:A});if(T.clearNodes(),!!_.steps.length)return _}})]}}),fX=Ir.create({name:"paste",addProseMirrorPlugins(){return[new Jn({key:new hi("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),hX=Ir.create({name:"tabindex",addProseMirrorPlugins(){return[new Jn({key:new hi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class cu{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new cu(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new cu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new cu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=this.pos+r+(s?0:1),u=this.resolvedPos.doc.resolve(a);if(!i&&u.depth<=this.depth)return;const c=new cu(u,this.editor,i,i?t:null);i&&(c.actualDepth=this.depth+1),e.push(new cu(u,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const c=a[u];if(s[c]!==t[c])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(c=>t[c]===a.node.attrs[c])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const dX=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function pX(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class mX extends EY{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=pX(dX,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=$L(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=r.filter(u=>!u.key.startsWith(a))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[aX,VY.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),sX,uX,cX,hX,oX,fX].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Yc(i,this)}createCommandManager(){this.commandManager=new D_({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=pE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=pE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=QL(t,this.options.autofocus);this.view=new $W(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Wc.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return eV(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return VQ(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return vS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return NQ(this.state.doc,{blockSeparator:t,textSerializers:{...KL(this.schema),...r}})}get isEmpty(){return z_(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new cu(t,this)}get $doc(){return this.$pos(0)}}function Rf(n){return new L_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];if(a){const c=u.search(/\S/),h=t.from+u.indexOf(a),p=h+a.length;if(SS(t.from,t.to,e.doc).filter(A=>A.mark.type.excluded.find(b=>b===n.type&&b!==A.mark.type)).filter(A=>A.to>h).length)return null;p<t.to&&s.delete(p,t.to),h>t.from&&s.delete(t.from+c,h);const _=t.from+c+a.length;s.addMark(t.from+c,_,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function gX(n){return new L_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let u=t.to;const c=n.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=a+h;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,a+r[0].length-1),s.replaceWith(p,u,c)}else if(r[0]){const h=n.type.isInline?a:a-1;s.insert(h,n.type.create(i)).delete(s.mapping.map(a),s.mapping.map(u))}s.scrollIntoView()}})}function gE(n){return new L_({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=at(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function ep(n){return new L_({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=at(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),c=a.doc.resolve(t.from).blockRange(),h=c&&rS(c,n.type,s);if(!h)return null;if(a.wrap(c,h),n.keepMarks&&n.editor){const{selection:g,storedMarks:_}=e,{splittableMarks:A}=n.editor.extensionManager,T=_||g.$to.parentOffset&&g.$from.marks();if(T){const b=T.filter(S=>A.includes(S.type.name));a.ensureMarks(b)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(g,s).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&Rl(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)}})}class fi{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(De(this,"addOptions",{name:this.name}))),this.storage=at(De(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new fi(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>V_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new fi(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(De(t,"addOptions",{name:t.name})),t.storage=at(De(t,"addStorage",{name:t.name,options:t.options})),t}}function Fu(n){return new OY({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=at(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,u=r[r.length-1],c=r[0];let h=t.to;if(u){const p=c.search(/\S/),g=t.from+c.indexOf(u),_=g+u.length;if(SS(t.from,t.to,e.doc).filter(T=>T.mark.type.excluded.find(S=>S===n.type&&S!==T.mark.type)).filter(T=>T.to>g).length)return null;_<t.to&&a.delete(_,t.to),g>t.from&&a.delete(t.from+p,g),h=t.from+p+u.length,a.addMark(t.from+p,h,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}function yX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tV={exports:{}},jA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO;function _X(){if(tO)return jA;tO=1;var n=Br;function e(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function u(g,_){var A=_(),T=r({inst:{value:A,getSnapshot:_}}),b=T[0].inst,S=T[1];return s(function(){b.value=A,b.getSnapshot=_,c(b)&&S({inst:b})},[g,A,_]),i(function(){return c(b)&&S({inst:b}),g(function(){c(b)&&S({inst:b})})},[g]),a(A),A}function c(g){var _=g.getSnapshot;g=g.value;try{var A=_();return!t(g,A)}catch{return!0}}function h(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return jA.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,jA}tV.exports=_X();var wS=tV.exports;const vX=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},AX=({contentComponent:n})=>{const e=wS.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Br.createElement(Br.Fragment,null,Object.values(e))};function TX(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:n3.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class EX extends Br.Component{constructor(e){var t;super(e),this.editorContentRef=Br.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=TX(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Br.createElement(Br.Fragment,null,Br.createElement("div",{ref:vX(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Br.createElement(AX,{contentComponent:e.contentComponent}))}}const bX=W.forwardRef((n,e)=>{const t=Br.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Br.createElement(EX,{key:t,innerRef:e,...n})}),SX=Br.memo(bX);var wX=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},RX=yX(wX),nV={exports:{}},FA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nO;function CX(){if(nO)return FA;nO=1;var n=Br,e=wS;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,c=n.useDebugValue;return FA.useSyncExternalStoreWithSelector=function(h,p,g,_,A){var T=s(null);if(T.current===null){var b={hasValue:!1,value:null};T.current=b}else b=T.current;T=u(function(){function C(P){if(!L){if(L=!0,z=P,P=_(P),A!==void 0&&b.hasValue){var N=b.value;if(A(N,P))return q=N}return q=P}if(N=q,r(z,P))return N;var k=_(P);return A!==void 0&&A(N,k)?N:(z=P,q=k)}var L=!1,z,q,B=g===void 0?null:g;return[function(){return C(p())},B===null?void 0:function(){return C(B())}]},[p,g,_,A]);var S=i(h,T[0],T[1]);return a(function(){b.hasValue=!0,b.value=S},[S]),c(S),S},FA}nV.exports=CX();var xX=nV.exports;const kX=typeof window<"u"?W.useLayoutEffect:W.useEffect;class IX{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function OX(n){var e;const[t]=W.useState(()=>new IX(n.editor)),r=xX.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:RX);return kX(()=>t.watch(n.editor),[n.editor,t]),W.useDebugValue(r),r}const NX=!1,yE=typeof window>"u",MX=yE||!!(typeof window<"u"&&window.next);class RS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?yE||MX?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new mX(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=t.extensions)===null||a===void 0?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?RS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function DX(n={},e=[]){const t=W.useRef(n);t.current=n;const[r]=W.useState(()=>new RS(t)),i=wS.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return W.useDebugValue(i),W.useEffect(r.onRender(e)),OX({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&s===0?0:s+1}),i}const PX=W.createContext({editor:null});PX.Consumer;const LX=W.createContext({onDragStart:void 0}),VX=()=>W.useContext(LX);Br.forwardRef((n,e)=>{const{onDragStart:t}=VX(),r=n.as||"div";return Br.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const UX=/^\s*>\s$/,zX=fi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ep({find:UX,type:this.type})]}}),BX=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,jX=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,FX=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,HX=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,qX=go.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Rf({find:BX,type:this.type}),Rf({find:FX,type:this.type})]},addPasteRules(){return[Fu({find:jX,type:this.type}),Fu({find:HX,type:this.type})]}}),$X="listItem",rO="textStyle",iO=/^\s*([-+*])\s$/,GX=fi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($X,this.editor.getAttributes(rO)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ep({find:iO,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ep({find:iO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(rO),editor:this.editor})),[n]}}),KX=/(^|[^`])`([^`]+)`(?!`)/,WX=/(^|[^`])`([^`]+)`(?!`)/g,YX=go.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Rf({find:KX,type:this.type})]},addPasteRules(){return[Fu({find:WX,type:this.type})]}}),QX=/^```([a-z]+)?[\s\n]$/,XX=/^~~~([a-z]+)?[\s\n]$/,JX=fi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Xn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(rt.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[gE({find:QX,type:this.type,getAttributes:n=>({language:n[1]})}),gE({find:XX,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Jn({key:new hi("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:a,schema:u}=n.state,c=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(Je.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),ZX=fi.create({name:"doc",topNode:!0,content:"block+"});function eJ(n={}){return new Jn({view(e){return new tJ(e,n)}})}class tJ{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(t){let g=e.nodeBefore,_=e.nodeAfter;if(g||_){let A=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(A){let T=A.getBoundingClientRect(),b=g?T.bottom:T.top;g&&_&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*u;r={left:T.left,right:T.right,top:b-S,bottom:b+S}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),_=this.width/2*a;r={left:g.left-_,right:g.left+_,top:g.top,bottom:g.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!c||c==document.body&&getComputedStyle(c).position=="static")h=-pageXOffset,p=-pageYOffset;else{let g=c.getBoundingClientRect(),_=g.width/c.offsetWidth,A=g.height/c.offsetHeight;h=g.left-c.scrollLeft*_,p=g.top-c.scrollTop*A}this.element.style.left=(r.left-h)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=q2(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const nJ=Ir.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[eJ(this.options)]}});class cn extends rt{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return cn.valid(r)?new cn(r):rt.near(r)}content(){return xe.empty}eq(e){return e instanceof cn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cn(e.resolve(t.pos))}getBookmark(){return new CS(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!rJ(e)||!iJ(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&cn.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){s=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let c=e.doc.resolve(i);if(cn.valid(c))return c}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!He.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let u=e.doc.resolve(i);if(cn.valid(u))return u}return null}}}cn.prototype.visible=!1;cn.findFrom=cn.findGapCursorFrom;rt.jsonID("gapcursor",cn);class CS{constructor(e){this.pos=e}map(e){return new CS(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return cn.valid(t)?new cn(t):rt.near(t)}}function rJ(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function iJ(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function sJ(){return new Jn({props:{decorations:uJ,createSelectionBetween(n,e,t){return e.pos==t.pos&&cn.valid(t)?new cn(t):null},handleClick:aJ,handleKeyDown:oJ,handleDOMEvents:{beforeinput:lJ}}})}const oJ=OL({ArrowLeft:Zm("horiz",-1),ArrowRight:Zm("horiz",1),ArrowUp:Zm("vert",-1),ArrowDown:Zm("vert",1)});function Zm(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,u=e>0?a.$to:a.$from,c=a.empty;if(a instanceof Je){if(!s.endOfTextblock(t)||u.depth==0)return!1;c=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=cn.findGapCursorFrom(u,e,c);return h?(i&&i(r.tr.setSelection(new cn(h))),!0):!1}}function aJ(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!cn.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&He.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new cn(r))),!0)}function lJ(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof cn))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=me.empty;for(let a=r.length-1;a>=0;a--)i=me.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new xe(i,0,0));return s.setSelection(Je.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function uJ(n){if(!(n.selection instanceof cn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",kn.create(n.doc,[Mi.widget(n.selection.head,e,{key:"gapcursor"})])}const cJ=Ir.create({name:"gapCursor",addProseMirrorPlugins(){return[sJ()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=at(De(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),fJ=fi.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Xn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&c&&a){const g=c.filter(_=>u.includes(_.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),hJ=fi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Xn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>gE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var vy=200,Wn=function(){};Wn.prototype.append=function(e){return e.length?(e=Wn.from(e),!this.length&&e||e.length<vy&&this.leafAppend(e)||this.length<vy&&e.leafPrepend(this)||this.appendInner(e)):this};Wn.prototype.prepend=function(e){return e.length?Wn.from(e).append(this):this};Wn.prototype.appendInner=function(e){return new dJ(this,e)};Wn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Wn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Wn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Wn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Wn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};Wn.from=function(e){return e instanceof Wn?e:e&&e.length?new rV(e):Wn.empty};var rV=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,u){for(var c=s;c<a;c++)if(i(this.values[c],u+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,u){for(var c=s-1;c>=a;c--)if(i(this.values[c],u+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=vy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=vy)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Wn);Wn.empty=new rV([]);var dJ=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),a)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,a+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Wn);const pJ=500;class bs{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,u,c,h=[],p=[];return this.items.forEach((g,_)=>{if(!g.step){i||(i=this.remapping(r,_+1),s=i.maps.length),s--,p.push(g);return}if(i){p.push(new Ws(g.map));let A=g.step.map(i.slice(s)),T;A&&a.maybeStep(A).doc&&(T=a.mapping.maps[a.mapping.maps.length-1],h.push(new Ws(T,void 0,void 0,h.length+p.length))),s--,T&&i.appendMap(T,s)}else a.maybeStep(g.step);if(g.selection)return u=i?g.selection.map(i.slice(s)):g.selection,c=new bs(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:u}}addTransform(e,t,r,i){let s=[],a=this.eventCount,u=this.items,c=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),_=new Ws(e.mapping.maps[p],g,t),A;(A=c&&c.merge(_))&&(_=A,p?s.pop():u=u.slice(0,u.length-1)),s.push(_),t&&(a++,t=void 0),i||(c=_)}let h=a-r.depth;return h>gJ&&(u=mJ(u,h),a-=h),new bs(u.append(s),a)}remapping(e,t){let r=new Wd;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new bs(this.items.append(e.map(t=>new Ws(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(_=>{_.selection&&u--},i);let c=t;this.items.forEach(_=>{let A=s.getMirror(--c);if(A==null)return;a=Math.min(a,A);let T=s.maps[A];if(_.step){let b=e.steps[A].invert(e.docs[A]),S=_.selection&&_.selection.map(s.slice(c+1,A));S&&u++,r.push(new Ws(T,b,S))}else r.push(new Ws(T))},i);let h=[];for(let _=t;_<a;_++)h.push(new Ws(s.maps[_]));let p=this.items.slice(0,i).append(h).append(r),g=new bs(p,u);return g.emptyItemCount()>pJ&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(t.slice(r)),h=c&&c.getMap();if(r--,h&&t.appendMap(h,r),c){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let g=new Ws(h.invert(),c,p),_,A=i.length-1;(_=i.length&&i[A].merge(g))?i[A]=_:i.push(g)}}else a.map&&r--},this.items.length,0),new bs(Wn.from(i.reverse()),s)}}bs.empty=new bs(Wn.empty,0);function mJ(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Ws{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ws(t.getMap().invert(),t,this.selection)}}}class Ma{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const gJ=20;function yJ(n,e,t,r){let i=t.getMeta(ku),s;if(i)return i.historyState;t.getMeta(AJ)&&(n=new Ma(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(ku))return a.getMeta(ku).redo?new Ma(n.done.addTransform(t,void 0,r,wg(e)),n.undone,sO(t.mapping.maps),n.prevTime,n.prevComposition):new Ma(n.done,n.undone.addTransform(t,void 0,r,wg(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),c=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!_J(t,n.prevRanges)),h=a?HA(n.prevRanges,t.mapping):sO(t.mapping.maps);return new Ma(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,wg(e)),bs.empty,h,t.time,u??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Ma(n.done.rebased(t,s),n.undone.rebased(t,s),HA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Ma(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),HA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function _J(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function sO(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function HA(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function vJ(n,e,t){let r=wg(e),i=ku.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),u=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new Ma(t?u:s.remaining,t?s.remaining:u,null,0,-1);return s.transform.setSelection(a).setMeta(ku,{redo:t,historyState:c})}let qA=!1,oO=null;function wg(n){let e=n.plugins;if(oO!=e){qA=!1,oO=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){qA=!0;break}}return qA}const ku=new hi("history"),AJ=new hi("closeHistory");function TJ(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Jn({key:ku,state:{init(){return new Ma(bs.empty,bs.empty,null,0,-1)},apply(e,t,r){return yJ(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?sV:r=="historyRedo"?oV:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function iV(n,e){return(t,r)=>{let i=ku.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=vJ(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const sV=iV(!1,!0),oV=iV(!0,!0),EJ=Ir.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>sV(n,e),redo:()=>({state:n,dispatch:e})=>oV(n,e)}},addProseMirrorPlugins(){return[TJ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),bJ=fi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Xn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):UQ(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:a,dispatch:u})=>{var c;if(u){const{$to:h}=a.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?a.setSelection(Je.create(a.doc,h.pos+1)):h.nodeAfter.isBlock?a.setSelection(He.create(a.doc,h.pos)):a.setSelection(Je.create(a.doc,h.pos));else{const g=(c=h.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();g&&(a.insert(p,g),a.setSelection(Je.create(a.doc,p+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[gX({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),SJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,wJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,RJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,CJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,xJ=go.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Rf({find:SJ,type:this.type}),Rf({find:RJ,type:this.type})]},addPasteRules(){return[Fu({find:wJ,type:this.type}),Fu({find:CJ,type:this.type})]}}),kJ=fi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Xn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),IJ="listItem",aO="textStyle",lO=/^(\d+)\.\s$/,OJ=fi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Xn(this.options.HTMLAttributes,t),0]:["ol",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(IJ,this.editor.getAttributes(aO)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ep({find:lO,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ep({find:lO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(aO)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),NJ=fi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),MJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,DJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,PJ=go.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Rf({find:MJ,type:this.type})]},addPasteRules(){return[Fu({find:DJ,type:this.type})]}}),LJ=fi.create({name:"text",group:"inline"}),VJ=Ir.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(qX.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(zX.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(GX.configure(this.options.bulletList)),this.options.code!==!1&&n.push(YX.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(JX.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(ZX.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(nJ.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(cJ.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(fJ.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(hJ.configure(this.options.heading)),this.options.history!==!1&&n.push(EJ.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(bJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(xJ.configure(this.options.italic)),this.options.listItem!==!1&&n.push(kJ.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(OJ.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(NJ.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(PJ.configure(this.options.strike)),this.options.text!==!1&&n.push(LJ.configure(this.options.text)),n}}),UJ=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const s=t.getAttribute("style"),a=(i=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${a};${s}`)})},zJ=go.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&UJ(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Xn(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),BJ=Ir.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Jn({key:new hi("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const s=this.editor.isEmpty;return n.descendants((a,u)=>{const c=r>=u&&r<=u+a.nodeSize,h=!a.isLeaf&&z_(a);if((c||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];s&&p.push(this.options.emptyEditorClass);const g=Mi.node(u,u+a.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:u,hasAnchor:c}):this.options.placeholder});i.push(g)}return this.options.includeChildren}),kn.create(n,i)}}})]}}),jJ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",FJ="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Cf=(n,e)=>{for(const t in e)n[t]=e[t];return n},_E="numeric",vE="ascii",AE="alpha",Td="asciinumeric",ad="alphanumeric",TE="domain",aV="emoji",HJ="scheme",qJ="slashscheme",$A="whitespace";function $J(n,e){return n in e||(e[n]=[]),e[n]}function vu(n,e,t){e[_E]&&(e[Td]=!0,e[ad]=!0),e[vE]&&(e[Td]=!0,e[AE]=!0),e[Td]&&(e[ad]=!0),e[AE]&&(e[ad]=!0),e[ad]&&(e[TE]=!0),e[aV]&&(e[TE]=!0);for(const r in e){const i=$J(r,t);i.indexOf(n)<0&&i.push(n)}}function GJ(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function ti(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}ti.groups={};ti.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||ti.groups;let i;return e&&e.j?i=e:(i=new ti(e),t&&r&&vu(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(n[a]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||ti.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let a,u=i.go(n);if(u?(a=new ti,Cf(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new ti,s){if(r)if(a.t&&typeof a.t=="string"){const c=Cf(GJ(a.t,r),t);vu(s,c,r)}else t&&vu(s,t,r);a.t=s}return i.j[n]=a,a}};const st=(n,e,t,r,i)=>n.ta(e,t,r,i),un=(n,e,t,r,i)=>n.tr(e,t,r,i),uO=(n,e,t,r,i)=>n.ts(e,t,r,i),ve=(n,e,t,r,i)=>n.tt(e,t,r,i),jo="WORD",EE="UWORD",lV="ASCIINUMERICAL",uV="ALPHANUMERICAL",tp="LOCALHOST",bE="TLD",SE="UTLD",Rg="SCHEME",$c="SLASH_SCHEME",xS="NUM",wE="WS",kS="NL",Ed="OPENBRACE",bd="CLOSEBRACE",Ay="OPENBRACKET",Ty="CLOSEBRACKET",Ey="OPENPAREN",by="CLOSEPAREN",Sy="OPENANGLEBRACKET",wy="CLOSEANGLEBRACKET",Ry="FULLWIDTHLEFTPAREN",Cy="FULLWIDTHRIGHTPAREN",xy="LEFTCORNERBRACKET",ky="RIGHTCORNERBRACKET",Iy="LEFTWHITECORNERBRACKET",Oy="RIGHTWHITECORNERBRACKET",Ny="FULLWIDTHLESSTHAN",My="FULLWIDTHGREATERTHAN",Dy="AMPERSAND",IS="APOSTROPHE",Py="ASTERISK",Da="AT",Ly="BACKSLASH",Vy="BACKTICK",Uy="CARET",ja="COLON",OS="COMMA",zy="DOLLAR",Ys="DOT",By="EQUALS",NS="EXCLAMATION",ns="HYPHEN",Sd="PERCENT",jy="PIPE",Fy="PLUS",Hy="POUND",wd="QUERY",MS="QUOTE",cV="FULLWIDTHMIDDLEDOT",DS="SEMI",Qs="SLASH",Rd="TILDE",qy="UNDERSCORE",fV="EMOJI",$y="SYM";var hV=Object.freeze({__proto__:null,WORD:jo,UWORD:EE,ASCIINUMERICAL:lV,ALPHANUMERICAL:uV,LOCALHOST:tp,TLD:bE,UTLD:SE,SCHEME:Rg,SLASH_SCHEME:$c,NUM:xS,WS:wE,NL:kS,OPENBRACE:Ed,CLOSEBRACE:bd,OPENBRACKET:Ay,CLOSEBRACKET:Ty,OPENPAREN:Ey,CLOSEPAREN:by,OPENANGLEBRACKET:Sy,CLOSEANGLEBRACKET:wy,FULLWIDTHLEFTPAREN:Ry,FULLWIDTHRIGHTPAREN:Cy,LEFTCORNERBRACKET:xy,RIGHTCORNERBRACKET:ky,LEFTWHITECORNERBRACKET:Iy,RIGHTWHITECORNERBRACKET:Oy,FULLWIDTHLESSTHAN:Ny,FULLWIDTHGREATERTHAN:My,AMPERSAND:Dy,APOSTROPHE:IS,ASTERISK:Py,AT:Da,BACKSLASH:Ly,BACKTICK:Vy,CARET:Uy,COLON:ja,COMMA:OS,DOLLAR:zy,DOT:Ys,EQUALS:By,EXCLAMATION:NS,HYPHEN:ns,PERCENT:Sd,PIPE:jy,PLUS:Fy,POUND:Hy,QUERY:wd,QUOTE:MS,FULLWIDTHMIDDLEDOT:cV,SEMI:DS,SLASH:Qs,TILDE:Rd,UNDERSCORE:qy,EMOJI:fV,SYM:$y});const zo=/[a-z]/,Kh=new RegExp("\\p{L}","u"),GA=new RegExp("\\p{Emoji}","u"),Bo=/\d/,KA=/\s/,cO="\r",WA=`
`,KJ="️",WJ="‍",YA="￼";let eg=null,tg=null;function YJ(n=[]){const e={};ti.groups=e;const t=new ti;eg==null&&(eg=fO(jJ)),tg==null&&(tg=fO(FJ)),ve(t,"'",IS),ve(t,"{",Ed),ve(t,"}",bd),ve(t,"[",Ay),ve(t,"]",Ty),ve(t,"(",Ey),ve(t,")",by),ve(t,"<",Sy),ve(t,">",wy),ve(t,"（",Ry),ve(t,"）",Cy),ve(t,"「",xy),ve(t,"」",ky),ve(t,"『",Iy),ve(t,"』",Oy),ve(t,"＜",Ny),ve(t,"＞",My),ve(t,"&",Dy),ve(t,"*",Py),ve(t,"@",Da),ve(t,"`",Vy),ve(t,"^",Uy),ve(t,":",ja),ve(t,",",OS),ve(t,"$",zy),ve(t,".",Ys),ve(t,"=",By),ve(t,"!",NS),ve(t,"-",ns),ve(t,"%",Sd),ve(t,"|",jy),ve(t,"+",Fy),ve(t,"#",Hy),ve(t,"?",wd),ve(t,'"',MS),ve(t,"/",Qs),ve(t,";",DS),ve(t,"~",Rd),ve(t,"_",qy),ve(t,"\\",Ly),ve(t,"・",cV);const r=un(t,Bo,xS,{[_E]:!0});un(r,Bo,r);const i=un(r,zo,lV,{[Td]:!0}),s=un(r,Kh,uV,{[ad]:!0}),a=un(t,zo,jo,{[vE]:!0});un(a,Bo,i),un(a,zo,a),un(i,Bo,i),un(i,zo,i);const u=un(t,Kh,EE,{[AE]:!0});un(u,zo),un(u,Bo,s),un(u,Kh,u),un(s,Bo,s),un(s,zo),un(s,Kh,s);const c=ve(t,WA,kS,{[$A]:!0}),h=ve(t,cO,wE,{[$A]:!0}),p=un(t,KA,wE,{[$A]:!0});ve(t,YA,p),ve(h,WA,c),ve(h,YA,p),un(h,KA,p),ve(p,cO),ve(p,WA),un(p,KA,p),ve(p,YA,p);const g=un(t,GA,fV,{[aV]:!0});ve(g,"#"),un(g,GA,g),ve(g,KJ,g);const _=ve(g,WJ);ve(_,"#"),un(_,GA,g);const A=[[zo,a],[Bo,i]],T=[[zo,null],[Kh,u],[Bo,s]];for(let b=0;b<eg.length;b++)ka(t,eg[b],bE,jo,A);for(let b=0;b<tg.length;b++)ka(t,tg[b],SE,EE,T);vu(bE,{tld:!0,ascii:!0},e),vu(SE,{utld:!0,alpha:!0},e),ka(t,"file",Rg,jo,A),ka(t,"mailto",Rg,jo,A),ka(t,"http",$c,jo,A),ka(t,"https",$c,jo,A),ka(t,"ftp",$c,jo,A),ka(t,"ftps",$c,jo,A),vu(Rg,{scheme:!0,ascii:!0},e),vu($c,{slashscheme:!0,ascii:!0},e),n=n.sort((b,S)=>b[0]>S[0]?1:-1);for(let b=0;b<n.length;b++){const S=n[b][0],L=n[b][1]?{[HJ]:!0}:{[qJ]:!0};S.indexOf("-")>=0?L[TE]=!0:zo.test(S)?Bo.test(S)?L[Td]=!0:L[vE]=!0:L[_E]=!0,uO(t,S,S,L)}return uO(t,"localhost",tp,{ascii:!0}),t.jd=new ti($y),{start:t,tokens:Cf({groups:e},hV)}}function dV(n,e){const t=QJ(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,i=[];let s=0,a=0;for(;a<r;){let u=n,c=null,h=0,p=null,g=-1,_=-1;for(;a<r&&(c=u.go(t[a]));)u=c,u.accepts()?(g=0,_=0,p=u):g>=0&&(g+=t[a].length,_++),h+=t[a].length,s+=t[a].length,a++;s-=g,a-=_,h-=g,i.push({t:p.t,v:e.slice(s-h,s),s:s-h,e:s})}return i}function QJ(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,a=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function ka(n,e,t,r,i){let s;const a=e.length;for(let u=0;u<a-1;u++){const c=e[u];n.j[c]?s=n.j[c]:(s=new ti(r),s.jr=i.slice(),n.j[c]=s),n=s}return s=new ti(t),s.jr=i.slice(),n.j[e[a-1]]=s,s}function fO(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const np={defaultProtocol:"http",events:null,format:hO,formatHref:hO,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function PS(n,e=null){let t=Cf({},np);n&&(t=Cf(t,n instanceof PS?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}PS.prototype={o:np,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:np[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function hO(n){return n}function pV(n,e){this.t="token",this.v=n,this.tk=e}pV.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=np.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),a={},u=n.get("className",t,e),c=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),c&&(a.target=c),h&&(a.rel=h),p&&Cf(a,p),{tagName:i,attributes:a,content:s,eventListeners:g}}};function B_(n,e){class t extends pV{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const dO=B_("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),pO=B_("text"),XJ=B_("nl"),ng=B_("url",{isLink:!0,toHref(n=np.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==tp&&n[1].t===ja}}),es=n=>new ti(n);function JJ({groups:n}){const e=n.domain.concat([Dy,Py,Da,Ly,Vy,Uy,zy,By,ns,xS,Sd,jy,Fy,Hy,Qs,$y,Rd,qy]),t=[ja,OS,Ys,NS,Sd,wd,MS,DS,Sy,wy,Ed,bd,Ty,Ay,Ey,by,Ry,Cy,xy,ky,Iy,Oy,Ny,My],r=[Dy,IS,Py,Ly,Vy,Uy,zy,By,ns,Ed,bd,Sd,jy,Fy,Hy,wd,Qs,$y,Rd,qy],i=es(),s=ve(i,Rd);st(s,r,s),st(s,n.domain,s);const a=es(),u=es(),c=es();st(i,n.domain,a),st(i,n.scheme,u),st(i,n.slashscheme,c),st(a,r,s),st(a,n.domain,a);const h=ve(a,Da);ve(s,Da,h),ve(u,Da,h),ve(c,Da,h);const p=ve(s,Ys);st(p,r,s),st(p,n.domain,s);const g=es();st(h,n.domain,g),st(g,n.domain,g);const _=ve(g,Ys);st(_,n.domain,g);const A=es(dO);st(_,n.tld,A),st(_,n.utld,A),ve(h,tp,A);const T=ve(g,ns);ve(T,ns,T),st(T,n.domain,g),st(A,n.domain,g),ve(A,Ys,_),ve(A,ns,T);const b=ve(A,ja);st(b,n.numeric,dO);const S=ve(a,ns),C=ve(a,Ys);ve(S,ns,S),st(S,n.domain,a),st(C,r,s),st(C,n.domain,a);const L=es(ng);st(C,n.tld,L),st(C,n.utld,L),st(L,n.domain,a),st(L,r,s),ve(L,Ys,C),ve(L,ns,S),ve(L,Da,h);const z=ve(L,ja),q=es(ng);st(z,n.numeric,q);const B=es(ng),P=es();st(B,e,B),st(B,t,P),st(P,e,B),st(P,t,P),ve(L,Qs,B),ve(q,Qs,B);const N=ve(u,ja),k=ve(c,ja),x=ve(k,Qs),U=ve(x,Qs);st(u,n.domain,a),ve(u,Ys,C),ve(u,ns,S),st(c,n.domain,a),ve(c,Ys,C),ve(c,ns,S),st(N,n.domain,B),ve(N,Qs,B),ve(N,wd,B),st(U,n.domain,B),st(U,e,B),ve(U,Qs,B);const V=[[Ed,bd],[Ay,Ty],[Ey,by],[Sy,wy],[Ry,Cy],[xy,ky],[Iy,Oy],[Ny,My]];for(let j=0;j<V.length;j++){const[D,Ce]=V[j],Oe=ve(B,D);ve(P,D,Oe),ve(Oe,Ce,B);const Y=es(ng);st(Oe,e,Y);const oe=es();st(Oe,t),st(Y,e,Y),st(Y,t,oe),st(oe,e,Y),st(oe,t,oe),ve(Y,Ce,B),ve(oe,Ce,B)}return ve(i,tp,L),ve(i,kS,XJ),{start:i,tokens:hV}}function ZJ(n,e,t){let r=t.length,i=0,s=[],a=[];for(;i<r;){let u=n,c=null,h=null,p=0,g=null,_=-1;for(;i<r&&!(c=u.go(t[i].t));)a.push(t[i++]);for(;i<r&&(h=c||u.go(t[i].t));)c=null,u=h,u.accepts()?(_=0,g=u):_>=0&&_++,i++,p++;if(_<0)i-=p,i<r&&(a.push(t[i]),i++);else{a.length>0&&(s.push(QA(pO,e,a)),a=[]),i-=_,p-=_;const A=g.t,T=t.slice(i-p,i);s.push(QA(A,e,T))}}return a.length>0&&s.push(QA(pO,e,a)),s}function QA(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const eZ=typeof console<"u"&&console&&console.warn||(()=>{}),tZ="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Gt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nZ(){return ti.groups={},Gt.scanner=null,Gt.parser=null,Gt.tokenQueue=[],Gt.pluginQueue=[],Gt.customSchemes=[],Gt.initialized=!1,Gt}function mO(n,e=!1){if(Gt.initialized&&eZ(`linkifyjs: already initialized - will not register custom scheme "${n}" ${tZ}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Gt.customSchemes.push([n,e])}function rZ(){Gt.scanner=YJ(Gt.customSchemes);for(let n=0;n<Gt.tokenQueue.length;n++)Gt.tokenQueue[n][1]({scanner:Gt.scanner});Gt.parser=JJ(Gt.scanner.tokens);for(let n=0;n<Gt.pluginQueue.length;n++)Gt.pluginQueue[n][1]({scanner:Gt.scanner,parser:Gt.parser});return Gt.initialized=!0,Gt}function LS(n){return Gt.initialized||rZ(),ZJ(Gt.parser.start,n,dV(Gt.scanner.start,n))}LS.scan=dV;function mV(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new PS(t),i=LS(n),s=[];for(let a=0;a<i.length;a++){const u=i[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}function iZ(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function sZ(n){return new Jn({key:new hi("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),s=e.some(h=>h.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,u=xQ(t.doc,[...e]);if(LQ(u).forEach(({newRange:h})=>{const p=IQ(r.doc,h,A=>A.isTextblock);let g,_;if(p.length>1?(g=p[0],_=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):p.length&&r.doc.textBetween(h.from,h.to," "," ").endsWith(" ")&&(g=p[0],_=r.doc.textBetween(g.pos,h.to,void 0," ")),g&&_){const A=_.split(" ").filter(C=>C!=="");if(A.length<=0)return!1;const T=A[A.length-1],b=g.pos+_.lastIndexOf(T);if(!T)return!1;const S=LS(T).map(C=>C.toObject(n.defaultProtocol));if(!iZ(S))return!1;S.filter(C=>C.isLink).map(C=>({...C,from:b+C.start+1,to:b+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{SS(C.from,C.to,r.doc).some(L=>L.mark.type===n.type)||a.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!a.steps.length)return a}})}function oZ(n){return new Jn({key:new hi("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=r.target;const u=[];for(;a.nodeName!=="DIV";)u.push(a),a=a.parentNode;if(!u.find(_=>_.nodeName==="A"))return!1;const c=eV(e.state,n.type.name),h=r.target,p=(i=h==null?void 0:h.href)!==null&&i!==void 0?i:c.href,g=(s=h==null?void 0:h.target)!==null&&s!==void 0?s:c.target;return h&&p?(window.open(p,g),!0):!1}}})}function aZ(n){return new Jn({key:new hi("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:a}=s;if(a)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const c=mV(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!c?!1:n.editor.commands.setMark(n.type,{href:c.href})}}})}const lZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function ru(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(lZ,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const uZ=go.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){mO(n);return}mO(n.scheme,n.optionalSlashes)})},onDestroy(){nZ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!ru(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!ru(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!ru(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Xn(this.options.HTMLAttributes,n),0]:["a",Xn(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ru(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ru(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Fu({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=mV(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!ru(a,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(sZ({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ru(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(oZ({type:this.type})),this.options.linkOnPaste&&n.push(aZ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}});function cZ({onChange:n}){const e=DX({extensions:[VJ,zJ,BJ.configure({placeholder:"Start typing here..."}),uZ],content:"",onUpdate:({editor:r})=>{n(r.getHTML())}});if(!e)return null;const t=r=>{r.preventDefault()};return I.jsxs("div",{className:"editor-wrapper dark-silver-bg",children:[I.jsxs("div",{className:"toolbar",children:[I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleBold().run()},className:e.isActive("bold")?"active":"",children:"Bold"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleItalic().run()},className:e.isActive("italic")?"active":"",children:"Italic"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleHeading({level:1}).run()},className:e.isActive("heading",{level:1})?"active":"",children:"H1"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleHeading({level:2}).run()},className:e.isActive("heading",{level:2})?"active":"",children:"H2"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().toggleBulletList().run()},className:e.isActive("bulletList")?"active":"",children:"Bullet List"}),I.jsx("button",{type:"button",onClick:r=>{t(r);const i=e.getAttributes("link").href;let s=window.prompt("Enter URL",i||"");s!==null&&(s&&!s.startsWith("http://")&&!s.startsWith("https://")&&(s=`https://${s}`),s===""?e.chain().focus().unsetLink().run():e.chain().focus().setLink({href:s}).run())},className:e.isActive("link")?"active":"",children:"Link"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().undo().run()},children:"Undo"}),I.jsx("button",{type:"button",onClick:r=>{t(r),e.chain().focus().redo().run()},children:"Redo"})]}),I.jsx(SX,{editor:e,className:"editor-content"})]})}const fZ="/assets/menu-DAMTkw-O.png",hZ="/assets/check-BWpW0xC-.png",dZ="/assets/description-C5Kf4JsE.png",pZ="/assets/image-CvEaPl9Q.png",mZ="/assets/content-writing-Co6lRQM-.png",gZ="/assets/shuffle-BkdvClfH.png";function yZ(){const[n,e]=W.useState(null),[t,r]=W.useState({}),[i,s]=W.useState(!1),[a,u]=W.useState(!1),[c,h]=W.useState([]),[p,g]=W.useState(null),[_,A]=W.useState(null),[T,b]=W.useState(null),[S,C]=W.useState([]),[L,z]=W.useState(null),[q,B]=W.useState(null),P=[{img:dZ,type:"Description",label:"Description"},{img:gZ,type:"Redirect",label:"Redirect Link"},{img:mZ,type:"Article",label:"Article Content"},{img:pZ,type:"Image",label:"Image Upload"}],N=V=>{h(j=>[...j,{type:V,value:""}]),u(!1)},k=(V,j)=>{const D=[...c];if(D[V].value=j,h(D),D[V].type==="Image"&&j instanceof File){const Ce=URL.createObjectURL(j);r(Oe=>({...Oe,[V]:Ce}))}},x=(V,j)=>{switch(V.type){case"Description":case"Article":return I.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[I.jsx("label",{style:{fontSize:"1.5rem"},className:"input-label outfit-font",children:V.type}),I.jsx(cZ,{onChange:D=>k(j,D)})]},j);case"Redirect":return I.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[I.jsx("label",{className:"input-label outfit-font",children:"Redirect URL"}),I.jsx("input",{className:"input",type:"url",value:V.value,onChange:D=>k(j,D.target.value)})]},j);case"Image":return I.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[I.jsx("label",{className:"input-label outfit-font",children:"Upload Image"}),I.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:D=>k(j,D.target.files[0])}),t[j]&&I.jsx("img",{src:t[j],alt:"Preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]},j);default:return null}},U=async V=>{V.preventDefault(),s(!0);let j=null;try{const D=document.querySelector('input[type="file"]');D!=null&&D.files[0]&&(j=await Kk(D.files[0]));const Ce=await Promise.all(c.map(async oe=>{if(oe.type==="Image"&&oe.value instanceof File){const Ae=await Kk(oe.value);return{...oe,value:Ae}}return oe})),Oe={title:p,subTitle:L,partName:q,partUrl:q?`part-${q}`:null,author:_,readTime:T,imgUrl:j,content:Ce,categories:S},Y=await S$(Oe);alert(`Blog created successfully! ID: ${Y}`)}catch(D){console.error("Error submitting blog:",D),alert("Failed to submit blog")}finally{s(!1)}};return I.jsxs("section",{className:"create-blog-main",children:[I.jsx("h1",{className:"outfit-font",children:"Create a Blog"}),I.jsx("div",{className:"display-column",children:I.jsxs("form",{className:"form",children:[I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Title:"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:V=>g(V.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Sub-Title (optional):"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:V=>z(V.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Part Number (optional):"}),I.jsx("input",{className:"input-part",type:"number",onChange:V=>B(V.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Author:"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:V=>A(V.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Read Time:"}),I.jsx("input",{className:"input playfair-font",type:"text",onChange:V=>b(V.target.value)})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Categories:"}),I.jsx("input",{className:"input playfair-font",type:"text",placeholder:"e.g. Monday Devotion, Tuesday Article",onChange:V=>C(V.target.value.split(",").map(j=>j.trim()).filter(j=>j!==""))}),S.length>0&&I.jsxs("div",{className:"category-container outfit-font",children:["Categories:",S.map(V=>I.jsx("div",{className:"cat silver-bg",children:V},V))]})]}),I.jsxs("div",{className:"input-container",children:[I.jsx("label",{className:"input-label outfit-font",children:"Photo:"}),I.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:V=>{const j=V.target.files[0];j&&e(URL.createObjectURL(j))}}),n&&I.jsx("img",{src:n,alt:"Main preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]}),I.jsxs("div",{className:"form-array-container",children:[c.map((V,j)=>x(V,j)),I.jsxs("div",{className:"add-to-array",children:[I.jsx("img",{className:"form-icon menu-icon off-white-bg",src:fZ,onClick:()=>u(!a)}),i?I.jsx("div",{className:"post-loader-container",children:I.jsx(c2,{})}):I.jsx("img",{className:"form-icon submit-icon off-white-bg",src:hZ,onClick:U}),I.jsx("div",{className:`expanded-icons ${a?"show":""}`,children:P.map((V,j)=>I.jsx("img",{src:V.img,title:V.label,className:"form-icon",onClick:()=>N(V.type)},j))})]})]})]})})]})}const _Z=qz([{path:"/",element:I.jsx(RB,{}),errorElement:I.jsx(CB,{}),children:[{path:"/",...I$},{path:"/about",...P$},{path:"/singleBlog/:id",...oG},{path:"/login",...lG},{path:"/dashboard",element:I.jsx(Gk,{children:I.jsx(yG,{})})},{path:"/createBlog",element:I.jsx(Gk,{children:I.jsx(yZ,{})})}]}]);WU.createRoot(document.getElementById("root")).render(I.jsx(W.StrictMode,{children:I.jsx(uG,{children:I.jsx(r3,{router:_Z})})}));
