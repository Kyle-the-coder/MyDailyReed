import{r as o,u as R,j as e}from"./index-BBna1LHx.js";import{b as U,d as z}from"./blogApi-Nwm7MXmH.js";import{P as F}from"./PostLoader-Bp5dPPwZ.js";import{d as G}from"./x-button-DkK3Y9wF.js";const Y="/assets/Artc1-CST6bCyG.png";function M({isVertical:v=!1,title:B,subTitle:b,height:y,marginBottom:C,trending:j=!1,maxCount:k,nav:w,blogArray:r,del:P,line:S=!0,series:p}){const[D,f]=o.useState([]),[E,h]=o.useState(!0),[g,m]=o.useState(!1),[a,x]=o.useState(null),T=o.useRef(null),$=R(),I=k??4;o.useEffect(()=>{const t=async()=>{try{h(!0);const s=await U();let n=s;typeof p=="string"&&p.trim()!==""?n=s.filter(l=>l.series===p).sort((l,c)=>(l.part??0)-(c.part??0)):j?n=[...s].sort((l,c)=>{var i,d;return(((i=c.likes)==null?void 0:i.length)||0)-(((d=l.likes)==null?void 0:d.length)||0)}):n=[...s].sort((l,c)=>{var i,d,u,N;return(((d=(i=c.datePosted)==null?void 0:i.toDate)==null?void 0:d.call(i))??0)-(((N=(u=l.datePosted)==null?void 0:u.toDate)==null?void 0:N.call(u))??0)}),f(n)}catch(s){console.error("Failed to fetch blogs:",s)}finally{h(!1)}};(r==null?void 0:r.length)>0?(f(r),h(!1)):t()},[j,r,p]);const L=async()=>{try{await z(a.id),f(t=>t.filter(s=>s.id!==a.id)),m(!1),x(null)}catch(t){console.error("Error deleting blog:",t)}};return e.jsxs("section",{className:"display-column",children:[e.jsxs("div",{className:"title-container",children:[e.jsx("div",{className:"info-container",children:e.jsx("h1",{className:"outfit-font",children:B})}),S&&e.jsx("div",{className:"line-blog"})]}),e.jsx("div",{ref:T,className:`blog-column-container ${v?"vertical":"horizontal"}`,children:E?e.jsx(F,{}):D.slice(0,I).map((t,s)=>e.jsxs("div",{className:"blog-info-container",style:{marginBottom:C},onClick:()=>{g||($(`/${w}/${t.id}`),window.scrollTo({top:0}))},children:[e.jsx("img",{src:t.imgUrl||Y,alt:t.title||"Blog image",style:{height:y}}),P&&e.jsx("img",{src:G,alt:"Delete",style:{width:"30px",height:"30px",cursor:"pointer",zIndex:2},className:"dele-button",onClick:n=>{n.stopPropagation(),m(!0),x(t)}}),e.jsx("p",{className:"playfair-thin-font",children:t.subTitle}),e.jsxs("h3",{children:[t.title||"Untitled"," ",t.part?`Part ${t.part}`:""]}),e.jsx("p",{className:"playfair-thin-font silver-text",children:t.author||"Unknown Author"})]},t.id||s))}),g&&a&&e.jsx("div",{className:"delete-popup",children:e.jsxs("div",{className:"popup-content",children:[e.jsxs("p",{className:"outfit-font",children:["Are you sure you want to delete"," ",e.jsx("strong",{children:a.title||"this article"}),a.part&&e.jsxs("strong",{children:[" part ",a.part]}),"?"]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{onClick:L,children:"Yes"}),e.jsx("button",{onClick:()=>{m(!1),x(null)},children:"No"})]})]})})]})}export{M as B,Y as p};
