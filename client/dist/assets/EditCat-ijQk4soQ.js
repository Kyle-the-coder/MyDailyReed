import{r as n,n as x,f as j,j as e}from"./index-DOIgAUQK.js";import{P as C}from"./PostLoader-QEQ7xrlC.js";import{t as N,B as y,x as b}from"./firebase-DohhskBT.js";import{s as v}from"./check-DPRlVH8d.js";import{d as u}from"./x-button-DkK3Y9wF.js";import"./react-DJG_os-6.js";import"./gsap-Brfk6Bdo.js";function D(){const[i,c]=n.useState([]),[r,l]=n.useState([]),[p,d]=n.useState(null),{triggerRefresh:h}=x(),m=N(j,"commonCat","YTLA8LnhCtzvU07csqsx");n.useEffect(()=>{(async()=>{const s=await y(m);if(s.exists()){const a=s.data();c(a.categories||[])}})()},[]);const f=(t,s)=>{console.log(s),s==="preload"?c(a=>a.filter(o=>o!==t)):l(a=>a.filter(o=>o!==t))},g=async t=>{t.preventDefault(),d(!0);try{const s=r.filter(o=>!i.includes(o)),a=[...i,...s];await b(m,{categories:a}),h(),alert("Categories updated!")}catch(s){console.error("Failed to update categories:",s),alert("An error occurred while updating.")}finally{d(!1)}};return console.log(r),e.jsxs("section",{className:"edit-cat-main",children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"30px",marginTop:"50px"},className:"outfit-font",children:"Edit Common Categories"}),e.jsx("div",{className:"display-column",children:e.jsxs("form",{className:"form",onSubmit:g,children:[e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Add Categories (use comma to add category):"}),e.jsx("input",{className:"input playfair-font",type:"text",placeholder:"e.g. Monday Devotion, Tuesday Article",onChange:t=>l(t.target.value.split(",").map(s=>s.trim()).filter(s=>s!==""))}),e.jsxs("div",{className:"category-container outfit-font",children:[e.jsx("h1",{className:"outfit-font",children:"Categories:"}),i.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"outfit-font",children:"Existing:"}),i.map(t=>e.jsxs("div",{className:"cat1 silver-bg",children:[t,e.jsx("img",{src:u,className:"del-button",onClick:()=>f(t,"preload")})]},`pre-${t}`))]}),r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"outfit-font",children:"New:"}),r.map(t=>e.jsxs("div",{className:"cat1 silver-bg",children:[t,e.jsx("img",{src:u,className:"del-button",onClick:()=>f(t,"new")})]},`new-${t}`))]})]})]}),p?e.jsx("div",{className:"post-loader-container",children:e.jsx(C,{})}):e.jsx("img",{src:v,onClick:t=>g(t),className:"form-icon  off-white-bg",alt:"submit"})]})})]})}export{D as default};
