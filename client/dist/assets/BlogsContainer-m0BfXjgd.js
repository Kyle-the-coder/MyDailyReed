import{r as i,B as R,u as U,j as t,o as z}from"./index-BH31ck8G.js";import{P as b}from"./PostLoader-DE8_Iuvt.js";import{d as F}from"./x-button-DkK3Y9wF.js";function G(){const d=i.useContext(R);if(!d)throw new Error("useBlogs must be used within a BlogsContext.Provider");return d}const Y="/assets/Artc1-CST6bCyG.png";function M({isVertical:d=!1,title:B,subTitle:q,height:C,marginBottom:w,trending:j=!1,maxCount:k,nav:P,blogArray:a,del:y,line:S=!0,series:u}){const g=G(),[D,f]=i.useState([]),[E,h]=i.useState(!0),[N,x]=i.useState(!1),[o,m]=i.useState(null),I=i.useRef(null),T=U(),$=k??4;i.useEffect(()=>{h(!0);let e=(a==null?void 0:a.length)>0?a:g;if(!e||e.length===0){f([]),h(!1);return}let l=e;typeof u=="string"&&u.trim()!==""?l=e.filter(s=>s.series===u).sort((s,r)=>(s.part??0)-(r.part??0)):j?l=[...e].sort((s,r)=>{var n,c;return(((n=r.likes)==null?void 0:n.length)||0)-(((c=s.likes)==null?void 0:c.length)||0)}):l=[...e].sort((s,r)=>{var n,c,p,v;return(((c=(n=r.datePosted)==null?void 0:n.toDate)==null?void 0:c.call(n))??0)-(((v=(p=s.datePosted)==null?void 0:p.toDate)==null?void 0:v.call(p))??0)}),f(l),h(!1)},[g,a,u,j]);const L=async()=>{try{await z(o.id),f(e=>e.filter(l=>l.id!==o.id)),x(!1),m(null)}catch(e){console.error("Error deleting blog:",e)}};return t.jsxs("section",{className:"display-column",children:[t.jsxs("div",{className:"title-container",children:[t.jsx("div",{className:"info-container",children:t.jsx("h1",{className:"outfit-font",children:B})}),S&&t.jsx("div",{className:"line-blog"})]}),t.jsx("div",{ref:I,className:`blog-column-container ${d?"vertical":"horizontal"}`,children:E?t.jsx(b,{}):D.slice(0,$).map((e,l)=>t.jsxs("div",{className:"blog-info-container",style:{marginBottom:w},onClick:()=>{N||(T(`/${P}/${e.id}`),window.scrollTo({top:0}))},children:[t.jsx("img",{src:e.imgUrl||Y,alt:e.title||"Blog image",style:{height:C}}),y&&t.jsx("img",{src:F,alt:"Delete",style:{width:"30px",height:"30px",cursor:"pointer",zIndex:2},className:"dele-button",onClick:s=>{s.stopPropagation(),x(!0),m(e)}}),t.jsx("p",{className:"playfair-thin-font",children:e.subTitle}),t.jsxs("h3",{children:[e.title||"Untitled"," ",e.part?`Part ${e.part}`:""]}),t.jsx("p",{className:"playfair-thin-font silver-text",children:e.author||"Unknown Author"})]},e.id||l))}),N&&o&&t.jsx("div",{className:"delete-popup",children:t.jsxs("div",{className:"popup-content",children:[t.jsxs("p",{className:"outfit-font",children:["Are you sure you want to delete"," ",t.jsx("strong",{children:o.title||"this article"}),o.part&&t.jsxs("strong",{children:[" part ",o.part]}),"?"]}),t.jsxs("div",{className:"popup-buttons",children:[t.jsx("button",{onClick:L,children:"Yes"}),t.jsx("button",{onClick:()=>{x(!1),m(null)},children:"No"})]})]})})]})}export{M as B,Y as a,G as u};
