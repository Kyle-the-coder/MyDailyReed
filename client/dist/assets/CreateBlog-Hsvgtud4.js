import{r as l,u as $,j as e,p as q}from"./index-DOIgAUQK.js";import{m as z,d as G,r as H,a as J,i as K,u as j}from"./shuffle-tBtvzRsv.js";import{A as Q}from"./firebase-DohhskBT.js";import{P as V}from"./PostLoader-QEQ7xrlC.js";import{T as X}from"./TiptapEditor-_JYhyMYV.js";import{s as Y}from"./check-DPRlVH8d.js";import"./react-DJG_os-6.js";import"./gsap-Brfk6Bdo.js";function ne(){const[d,v]=l.useState(null),[g,y]=l.useState({}),[b,f]=l.useState(!1),[x,h]=l.useState(!1),[o,c]=l.useState([]),[N,C]=l.useState(null),[S,T]=l.useState(null),[w,R]=l.useState(null),[u,I]=l.useState([]),[P,U]=l.useState(null),[A,F]=l.useState(null),[L,B]=l.useState(null),D=$(),E=[{img:G,type:"Description",label:"Description"},{img:H,type:"Redirect",label:"Redirect Link"},{img:J,type:"Article",label:"Article Content"},{img:K,type:"Image",label:"Image Upload"}],k=t=>{c(t==="Redirect"?a=>[...a,{type:t,value:{partName:"",partUrl:""}}]:a=>[...a,{type:t,value:""}]),h(!1)},r=(t,a,s=null)=>{const i=[...o];if(s&&typeof i[t].value=="object"?i[t].value={...i[t].value,[s]:a}:i[t].value=a,c(i),i[t].type==="Image"&&a instanceof File){const m=URL.createObjectURL(a);y(p=>({...p,[t]:m}))}},M=(t,a)=>{switch(t.type){case"Description":case"Article":return e.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[e.jsx("label",{style:{fontSize:"1.5rem"},className:"input-label outfit-font",children:t.type}),e.jsx(X,{onChange:s=>r(a,s)})]},a);case"Redirect":return e.jsxs("div",{style:{marginBottom:"100px",padding:"30px 3%"},className:"display-column",children:[e.jsx("label",{className:"input-label outfit-font",children:"Redirect Name"}),e.jsx("input",{className:"input",type:"text",value:t.value.name,placeholder:"Part 3, or Part 1",style:{marginBottom:"30px",padding:"10px 20px"},onChange:s=>r(a,s.target.value,"partName")}),e.jsx("label",{className:"input-label outfit-font",children:"Redirect Url"}),e.jsx("input",{className:"input",type:"url",style:{padding:"10px 20px"},value:t.value.url,onChange:s=>r(a,s.target.value,"partUrl")})]},a);case"Image":return e.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[e.jsx("label",{className:"input-label outfit-font",children:"Upload Image"}),e.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:s=>r(a,s.target.files[0])}),g[a]&&e.jsx("img",{src:g[a],alt:"Preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]},a);default:return null}},O=async t=>{t.preventDefault(),f(!0);let a=null;try{const s=document.querySelector('input[type="file"]');s!=null&&s.files[0]&&(a=await j(s.files[0]));const i=await Promise.all(o.map(async n=>{if(n.type==="Image"&&n.value instanceof File){const W=await j(n.value);return{...n,value:W}}return n})),m={title:N,subTitle:P,series:A,author:S,readTime:w,part:L,categories:u,imgUrl:a,content:i,datePosted:Q()},p=await q(m);alert(`Blog created successfully! ID: ${p}`),D("/"),window.scrollTo(0,0)}catch(s){console.error("Error submitting blog:",s),alert("Failed to submit blog")}finally{f(!1)}};return e.jsxs("section",{className:"create-blog-main",children:[e.jsx("h1",{className:"outfit-font",children:"Create a Blog"}),e.jsx("div",{className:"display-column",children:e.jsxs("form",{className:"form",children:[e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Title:"}),e.jsx("input",{className:"input playfair-font",type:"text",onChange:t=>C(t.target.value)})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Category Title (optional):"}),e.jsx("input",{className:"input playfair-font",type:"text",onChange:t=>U(t.target.value)})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Series Title:"}),e.jsx("input",{className:"input playfair-font",type:"text",onChange:t=>F(t.target.value)})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Part Number (optional):"}),e.jsx("input",{className:"input-part",type:"number",onChange:t=>B(t.target.value)})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Author:"}),e.jsx("input",{className:"input playfair-font",type:"text",onChange:t=>T(t.target.value)})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Read Time:"}),e.jsx("input",{className:"input playfair-font",type:"text",onChange:t=>R(t.target.value)})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Categories:"}),e.jsx("input",{className:"input playfair-font",type:"text",placeholder:"e.g. Monday Devotion, Tuesday Article",onChange:t=>I(t.target.value.split(",").map(a=>a.trim()).filter(a=>a!==""))}),u.length>0&&e.jsxs("div",{className:"category-container outfit-font",children:["Categories:",u.map(t=>e.jsx("div",{className:"cat silver-bg",children:t},t))]})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"input-label outfit-font",children:"Photo:"}),e.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:t=>{const a=t.target.files[0];a&&v(URL.createObjectURL(a))}}),d&&e.jsx("img",{src:d,alt:"Main preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]}),e.jsxs("div",{className:"form-array-container",children:[o.map((t,a)=>M(t,a)),e.jsxs("div",{className:"add-to-array",children:[e.jsx("img",{className:"form-icon menu-icon off-white-bg",src:z,onClick:()=>h(!x)}),b?e.jsx("div",{className:"post-loader-container",children:e.jsx(V,{})}):e.jsx("img",{className:"form-icon submit-icon off-white-bg",src:Y,onClick:O}),e.jsx("div",{className:`expanded-icons ${x?"show":""}`,children:E.map((t,a)=>e.jsx("img",{src:t.img,title:t.label,className:"form-icon",onClick:()=>k(t.type)},a))})]})]})]})})]})}export{ne as default};
