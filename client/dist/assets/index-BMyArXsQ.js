(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function CN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wv={exports:{}},zh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR;function iB(){if(aR)return zh;aR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return zh.Fragment=e,zh.jsx=t,zh.jsxs=t,zh}var lR;function sB(){return lR||(lR=1,Wv.exports=iB()),Wv.exports}var w=sB(),Yv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR;function oB(){if(uR)return nt;uR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function _(j){return j===null||typeof j!="object"?null:(j=g&&j[g]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function S(j,re,ce){this.props=j,this.context=re,this.refs=E,this.updater=ce||A}S.prototype.isReactComponent={},S.prototype.setState=function(j,re){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,re,"setState")},S.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function x(){}x.prototype=S.prototype;function P(j,re,ce){this.props=j,this.context=re,this.refs=E,this.updater=ce||A}var z=P.prototype=new x;z.constructor=P,T(z,S.prototype),z.isPureReactComponent=!0;var H=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function O(j,re,ce,ae,we,Re){return ce=Re.ref,{$$typeof:n,type:j,key:re,ref:ce!==void 0?ce:null,props:Re}}function I(j,re){return O(j.type,re,void 0,void 0,void 0,j.props)}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function B(j){var re={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ce){return re[ce]})}var U=/\/+/g;function F(j,re){return typeof j=="object"&&j!==null&&j.key!=null?B(""+j.key):re.toString(36)}function L(){}function Te(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(L,L):(j.status="pending",j.then(function(re){j.status==="pending"&&(j.status="fulfilled",j.value=re)},function(re){j.status==="pending"&&(j.status="rejected",j.reason=re)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function be(j,re,ce,ae,we){var Re=typeof j;(Re==="undefined"||Re==="boolean")&&(j=null);var Le=!1;if(j===null)Le=!0;else switch(Re){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(j.$$typeof){case n:case e:Le=!0;break;case p:return Le=j._init,be(Le(j._payload),re,ce,ae,we)}}if(Le)return we=we(j),Le=ae===""?"."+F(j,0):ae,H(we)?(ce="",Le!=null&&(ce=Le.replace(U,"$&/")+"/"),be(we,re,ce,"",function(Wt){return Wt})):we!=null&&(k(we)&&(we=I(we,ce+(we.key==null||j&&j.key===we.key?"":(""+we.key).replace(U,"$&/")+"/")+Le)),re.push(we)),1;Le=0;var $t=ae===""?".":ae+":";if(H(j))for(var St=0;St<j.length;St++)ae=j[St],Re=$t+F(ae,St),Le+=be(ae,re,ce,Re,we);else if(St=_(j),typeof St=="function")for(j=St.call(j),St=0;!(ae=j.next()).done;)ae=ae.value,Re=$t+F(ae,St++),Le+=be(ae,re,ce,Re,we);else if(Re==="object"){if(typeof j.then=="function")return be(Te(j),re,ce,ae,we);throw re=String(j),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Le}function Y(j,re,ce){if(j==null)return j;var ae=[],we=0;return be(j,ae,"","",function(Re){return re.call(ce,Re,we++)}),ae}function X(j){if(j._status===-1){var re=j._result;re=re(),re.then(function(ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=ce)},function(ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=ce)}),j._status===-1&&(j._status=0,j._result=re)}if(j._status===1)return j._result.default;throw j._result}var le=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Ne(){}return nt.Children={map:Y,forEach:function(j,re,ce){Y(j,function(){re.apply(this,arguments)},ce)},count:function(j){var re=0;return Y(j,function(){re++}),re},toArray:function(j){return Y(j,function(re){return re})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},nt.Component=S,nt.Fragment=t,nt.Profiler=i,nt.PureComponent=P,nt.StrictMode=r,nt.Suspense=c,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,nt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return V.H.useMemoCache(j)}},nt.cache=function(j){return function(){return j.apply(null,arguments)}},nt.cloneElement=function(j,re,ce){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ae=T({},j.props),we=j.key,Re=void 0;if(re!=null)for(Le in re.ref!==void 0&&(Re=void 0),re.key!==void 0&&(we=""+re.key),re)!D.call(re,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&re.ref===void 0||(ae[Le]=re[Le]);var Le=arguments.length-2;if(Le===1)ae.children=ce;else if(1<Le){for(var $t=Array(Le),St=0;St<Le;St++)$t[St]=arguments[St+2];ae.children=$t}return O(j.type,we,void 0,void 0,Re,ae)},nt.createContext=function(j){return j={$$typeof:a,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:s,_context:j},j},nt.createElement=function(j,re,ce){var ae,we={},Re=null;if(re!=null)for(ae in re.key!==void 0&&(Re=""+re.key),re)D.call(re,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(we[ae]=re[ae]);var Le=arguments.length-2;if(Le===1)we.children=ce;else if(1<Le){for(var $t=Array(Le),St=0;St<Le;St++)$t[St]=arguments[St+2];we.children=$t}if(j&&j.defaultProps)for(ae in Le=j.defaultProps,Le)we[ae]===void 0&&(we[ae]=Le[ae]);return O(j,Re,void 0,void 0,null,we)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(j){return{$$typeof:u,render:j}},nt.isValidElement=k,nt.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:X}},nt.memo=function(j,re){return{$$typeof:h,type:j,compare:re===void 0?null:re}},nt.startTransition=function(j){var re=V.T,ce={};V.T=ce;try{var ae=j(),we=V.S;we!==null&&we(ce,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Ne,le)}catch(Re){le(Re)}finally{V.T=re}},nt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},nt.use=function(j){return V.H.use(j)},nt.useActionState=function(j,re,ce){return V.H.useActionState(j,re,ce)},nt.useCallback=function(j,re){return V.H.useCallback(j,re)},nt.useContext=function(j){return V.H.useContext(j)},nt.useDebugValue=function(){},nt.useDeferredValue=function(j,re){return V.H.useDeferredValue(j,re)},nt.useEffect=function(j,re,ce){var ae=V.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(j,re)},nt.useId=function(){return V.H.useId()},nt.useImperativeHandle=function(j,re,ce){return V.H.useImperativeHandle(j,re,ce)},nt.useInsertionEffect=function(j,re){return V.H.useInsertionEffect(j,re)},nt.useLayoutEffect=function(j,re){return V.H.useLayoutEffect(j,re)},nt.useMemo=function(j,re){return V.H.useMemo(j,re)},nt.useOptimistic=function(j,re){return V.H.useOptimistic(j,re)},nt.useReducer=function(j,re,ce){return V.H.useReducer(j,re,ce)},nt.useRef=function(j){return V.H.useRef(j)},nt.useState=function(j){return V.H.useState(j)},nt.useSyncExternalStore=function(j,re,ce){return V.H.useSyncExternalStore(j,re,ce)},nt.useTransition=function(){return V.H.useTransition()},nt.version="19.1.0",nt}var cR;function LE(){return cR||(cR=1,Yv.exports=oB()),Yv.exports}var $=LE();const Sr=CN($);var Qv={exports:{}},jh={},Xv={exports:{}},Jv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR;function aB(){return fR||(fR=1,function(n){function e(Y,X){var le=Y.length;Y.push(X);e:for(;0<le;){var Ne=le-1>>>1,j=Y[Ne];if(0<i(j,X))Y[Ne]=X,Y[le]=j,le=Ne;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var X=Y[0],le=Y.pop();if(le!==X){Y[0]=le;e:for(var Ne=0,j=Y.length,re=j>>>1;Ne<re;){var ce=2*(Ne+1)-1,ae=Y[ce],we=ce+1,Re=Y[we];if(0>i(ae,le))we<j&&0>i(Re,ae)?(Y[Ne]=Re,Y[we]=le,Ne=we):(Y[Ne]=ae,Y[ce]=le,Ne=ce);else if(we<j&&0>i(Re,le))Y[Ne]=Re,Y[we]=le,Ne=we;else break e}}return X}function i(Y,X){var le=Y.sortIndex-X.sortIndex;return le!==0?le:Y.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var c=[],h=[],p=1,g=null,_=3,A=!1,T=!1,E=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function H(Y){for(var X=t(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=Y)r(h),X.sortIndex=X.expirationTime,e(c,X);else break;X=t(h)}}function V(Y){if(E=!1,H(Y),!T)if(t(c)!==null)T=!0,D||(D=!0,F());else{var X=t(h);X!==null&&be(V,X.startTime-Y)}}var D=!1,O=-1,I=5,k=-1;function B(){return S?!0:!(n.unstable_now()-k<I)}function U(){if(S=!1,D){var Y=n.unstable_now();k=Y;var X=!0;try{e:{T=!1,E&&(E=!1,P(O),O=-1),A=!0;var le=_;try{t:{for(H(Y),g=t(c);g!==null&&!(g.expirationTime>Y&&B());){var Ne=g.callback;if(typeof Ne=="function"){g.callback=null,_=g.priorityLevel;var j=Ne(g.expirationTime<=Y);if(Y=n.unstable_now(),typeof j=="function"){g.callback=j,H(Y),X=!0;break t}g===t(c)&&r(c),H(Y)}else r(c);g=t(c)}if(g!==null)X=!0;else{var re=t(h);re!==null&&be(V,re.startTime-Y),X=!1}}break e}finally{g=null,_=le,A=!1}X=void 0}}finally{X?F():D=!1}}}var F;if(typeof z=="function")F=function(){z(U)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,Te=L.port2;L.port1.onmessage=U,F=function(){Te.postMessage(null)}}else F=function(){x(U,0)};function be(Y,X){O=x(function(){Y(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var X=3;break;default:X=_}var le=_;_=X;try{return Y()}finally{_=le}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(Y,X){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var le=_;_=Y;try{return X()}finally{_=le}},n.unstable_scheduleCallback=function(Y,X,le){var Ne=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ne+le:Ne):le=Ne,Y){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=le+j,Y={id:p++,callback:X,priorityLevel:Y,startTime:le,expirationTime:j,sortIndex:-1},le>Ne?(Y.sortIndex=le,e(h,Y),t(c)===null&&Y===t(h)&&(E?(P(O),O=-1):E=!0,be(V,le-Ne))):(Y.sortIndex=j,e(c,Y),T||A||(T=!0,D||(D=!0,F()))),Y},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(Y){var X=_;return function(){var le=_;_=X;try{return Y.apply(this,arguments)}finally{_=le}}}}(Jv)),Jv}var hR;function lB(){return hR||(hR=1,Xv.exports=aB()),Xv.exports}var Zv={exports:{}},Ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR;function uB(){if(dR)return Ar;dR=1;var n=LE();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:h,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ar.createPortal=function(c,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(c,h,null,p)},Ar.flushSync=function(c){var h=a.T,p=r.p;try{if(a.T=null,r.p=2,c)return c()}finally{a.T=h,r.p=p,r.d.f()}},Ar.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},Ar.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ar.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:A}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:_,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ar.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},Ar.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ar.preloadModule=function(c,h){if(typeof c=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},Ar.requestFormReset=function(c){r.d.r(c)},Ar.unstable_batchedUpdates=function(c,h){return c(h)},Ar.useFormState=function(c,h,p){return a.H.useFormState(c,h,p)},Ar.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ar.version="19.1.0",Ar}var pR;function RN(){if(pR)return Zv.exports;pR=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zv.exports=uB(),Zv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mR;function cB(){if(mR)return jh;mR=1;var n=lB(),e=LE(),t=RN();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(r(188))}function c(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var f=o,d=l;;){var y=f.return;if(y===null)break;var v=y.alternate;if(v===null){if(d=y.return,d!==null){f=d;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===f)return u(y),o;if(v===d)return u(y),l;v=v.sibling}throw Error(r(188))}if(f.return!==d.return)f=y,d=v;else{for(var R=!1,N=y.child;N;){if(N===f){R=!0,f=y,d=v;break}if(N===d){R=!0,d=y,f=v;break}N=N.sibling}if(!R){for(N=v.child;N;){if(N===f){R=!0,f=v,d=y;break}if(N===d){R=!0,d=v,f=y;break}N=N.sibling}if(!R)throw Error(r(189))}}if(f.alternate!==d)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var L=Symbol.for("react.client.reference");function Te(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===L?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case V:return"Suspense";case D:return"SuspenseList";case k:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case z:return(o.displayName||"Context")+".Provider";case P:return(o._context.displayName||"Context")+".Consumer";case H:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return l=o.displayName||null,l!==null?l:Te(o.type)||"Memo";case I:l=o._payload,o=o._init;try{return Te(o(l))}catch{}}return null}var be=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ne=[],j=-1;function re(o){return{current:o}}function ce(o){0>j||(o.current=Ne[j],Ne[j]=null,j--)}function ae(o,l){j++,Ne[j]=o.current,o.current=l}var we=re(null),Re=re(null),Le=re(null),$t=re(null);function St(o,l){switch(ae(Le,l),ae(Re,o),ae(we,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?PC(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=PC(l),o=LC(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ce(we),ae(we,o)}function Wt(){ce(we),ce(Re),ce(Le)}function Nt(o){o.memoizedState!==null&&ae($t,o);var l=we.current,f=LC(l,o.type);l!==f&&(ae(Re,o),ae(we,f))}function Mn(o){Re.current===o&&(ce(we),ce(Re)),$t.current===o&&(ce($t),Ph._currentValue=le)}var er=Object.prototype.hasOwnProperty,di=n.unstable_scheduleCallback,Jt=n.unstable_cancelCallback,gs=n.unstable_shouldYield,Is=n.unstable_requestPaint,an=n.unstable_now,Ns=n.unstable_getCurrentPriorityLevel,Bi=n.unstable_ImmediatePriority,ys=n.unstable_UserBlockingPriority,zi=n.unstable_NormalPriority,pi=n.unstable_LowPriority,gr=n.unstable_IdlePriority,Kr=n.log,Mr=n.unstable_setDisableYieldValue,ut=null,et=null;function Dn(o){if(typeof Kr=="function"&&Mr(o),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(ut,o)}catch{}}var Zt=Math.clz32?Math.clz32:Pr,Os=Math.log,Dr=Math.LN2;function Pr(o){return o>>>=0,o===0?32:31-(Os(o)/Dr|0)|0}var Lr=256,En=4194304;function bn(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function mi(o,l,f){var d=o.pendingLanes;if(d===0)return 0;var y=0,v=o.suspendedLanes,R=o.pingedLanes;o=o.warmLanes;var N=d&134217727;return N!==0?(d=N&~v,d!==0?y=bn(d):(R&=N,R!==0?y=bn(R):f||(f=N&~o,f!==0&&(y=bn(f))))):(N=d&~v,N!==0?y=bn(N):R!==0?y=bn(R):f||(f=d&~o,f!==0&&(y=bn(f)))),y===0?0:l!==0&&l!==y&&(l&v)===0&&(v=y&-y,f=l&-l,v>=f||v===32&&(f&4194048)!==0)?l:y}function yr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Ms(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var o=Lr;return Lr<<=1,(Lr&4194048)===0&&(Lr=256),o}function ji(){var o=En;return En<<=1,(En&62914560)===0&&(En=4194304),o}function Yr(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function tr(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ds(o,l,f,d,y,v){var R=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var N=o.entanglements,q=o.expirationTimes,ne=o.hiddenUpdates;for(f=R&~f;0<f;){var ue=31-Zt(f),de=1<<ue;N[ue]=0,q[ue]=-1;var ie=ne[ue];if(ie!==null)for(ne[ue]=null,ue=0;ue<ie.length;ue++){var se=ie[ue];se!==null&&(se.lane&=-536870913)}f&=~de}d!==0&&nr(o,d,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(R&~l))}function nr(o,l,f){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Zt(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|f&4194090}function Ot(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var d=31-Zt(f),y=1<<d;y&l|o[d]&l&&(o[d]|=l),f&=~y}}function rr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ps(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function G(){var o=X.p;return o!==0?o:(o=window.event,o===void 0?32:tR(o.type))}function J(o,l){var f=X.p;try{return X.p=o,l()}finally{X.p=f}}var ee=Math.random().toString(36).slice(2),he="__reactFiber$"+ee,_e="__reactProps$"+ee,Se="__reactContainer$"+ee,Be="__reactEvents$"+ee,Ie="__reactListeners$"+ee,Me="__reactHandles$"+ee,Ue="__reactResources$"+ee,Fe="__reactMarker$"+ee;function xe(o){delete o[he],delete o[_e],delete o[Be],delete o[Ie],delete o[Me]}function He(o){var l=o[he];if(l)return l;for(var f=o.parentNode;f;){if(l=f[Se]||f[he]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=zC(o);o!==null;){if(f=o[he])return f;o=zC(o)}return l}o=f,f=o.parentNode}return null}function it(o){if(o=o[he]||o[Se]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function wt(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function _t(o){var l=o[Ue];return l||(l=o[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ht(o){o[Fe]=!0}var ve=new Set,K={};function me(o,l){Ce(o,l),Ce(o+"Capture",l)}function Ce(o,l){for(K[o]=l,o=0;o<l.length;o++)ve.add(l[o])}var tt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bt={},Rt={};function en(o){return er.call(Rt,o)?!0:er.call(Bt,o)?!1:tt.test(o)?Rt[o]=!0:(Bt[o]=!0,!1)}function zt(o,l,f){if(en(l))if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+f)}}function gn(o,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+f)}}function Ve(o,l,f,d){if(d===null)o.removeAttribute(f);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(l,f,""+d)}}var tn,_r;function Qr(o){if(tn===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);tn=l&&l[1]||"",_r=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+o+_r}var Ls=!1;function jt(o,l){if(!o||Ls)return"";Ls=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var ie=se}Reflect.construct(o,[],de)}else{try{de.call()}catch(se){ie=se}o.call(de.prototype)}}else{try{throw Error()}catch(se){ie=se}(de=o())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&ie&&typeof se.stack=="string")return[se.stack,ie.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),R=v[0],N=v[1];if(R&&N){var q=R.split(`
`),ne=N.split(`
`);for(y=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;y<ne.length&&!ne[y].includes("DetermineComponentFrameRoot");)y++;if(d===q.length||y===ne.length)for(d=q.length-1,y=ne.length-1;1<=d&&0<=y&&q[d]!==ne[y];)y--;for(;1<=d&&0<=y;d--,y--)if(q[d]!==ne[y]){if(d!==1||y!==1)do if(d--,y--,0>y||q[d]!==ne[y]){var ue=`
`+q[d].replace(" at new "," at ");return o.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",o.displayName)),ue}while(1<=d&&0<=y);break}}}finally{Ls=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Qr(f):""}function Fi(o){switch(o.tag){case 26:case 27:case 5:return Qr(o.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return jt(o.type,!1);case 11:return jt(o.type.render,!1);case 1:return jt(o.type,!0);case 31:return Qr("Activity");default:return""}}function _o(o){try{var l="";do l+=Fi(o),o=o.return;while(o);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function ir(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Hf(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function J0(o){var l=Hf(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),d=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,v=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(R){d=""+R,v.call(this,R)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Zu(o){o._valueTracker||(o._valueTracker=J0(o))}function qf(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),d="";return o&&(d=Hf(o)?o.checked?"true":"false":o.value),o=d,o!==f?(l.setValue(o),!0):!1}function Ml(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Z0=/[\n"\\]/g;function Sn(o){return o.replace(Z0,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function gi(o,l,f,d,y,v,R,N){o.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.type=R:o.removeAttribute("type"),l!=null?R==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+ir(l)):o.value!==""+ir(l)&&(o.value=""+ir(l)):R!=="submit"&&R!=="reset"||o.removeAttribute("value"),l!=null?ca(o,R,ir(l)):f!=null?ca(o,R,ir(f)):d!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.name=""+ir(N):o.removeAttribute("name")}function Dl(o,l,f,d,y,v,R,N){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),l!=null||f!=null){if(!(v!=="submit"&&v!=="reset"||l!=null))return;f=f!=null?""+ir(f):"",l=l!=null?""+ir(l):f,N||l===o.value||(o.value=l),o.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=N?o.checked:!!d,o.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.name=R)}function ca(o,l,f){l==="number"&&Ml(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function vo(o,l,f,d){if(o=o.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<o.length;f++)y=l.hasOwnProperty("$"+o[f].value),o[f].selected!==y&&(o[f].selected=y),y&&d&&(o[f].defaultSelected=!0)}else{for(f=""+ir(f),l=null,y=0;y<o.length;y++){if(o[y].value===f){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Pt(o,l,f){if(l!=null&&(l=""+ir(l),l!==o.value&&(o.value=l),f==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=f!=null?""+ir(f):""}function Pl(o,l,f,d){if(l==null){if(d!=null){if(f!=null)throw Error(r(92));if(be(d)){if(1<d.length)throw Error(r(93));d=d[0]}f=d}f==null&&(f=""),l=f}f=ir(l),o.defaultValue=f,d=o.textContent,d===f&&d!==""&&d!==null&&(o.value=d)}function Hi(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var Ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rp(o,l,f){var d=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,f):typeof f!="number"||f===0||Ll.has(l)?l==="float"?o.cssFloat=f:o[l]=(""+f).trim():o[l]=f+"px"}function $f(o,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,f!=null){for(var d in f)!f.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&f[y]!==d&&Rp(o,y,d)}else for(var v in l)l.hasOwnProperty(v)&&Rp(o,v,l[v])}function Gf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),t_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ec(o){return t_.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Ao=null;function qi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var To=null,Eo=null;function Kf(o){var l=it(o);if(l&&(o=l.stateNode)){var f=o[_e]||null;e:switch(o=l.stateNode,l.type){case"input":if(gi(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Sn(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var d=f[l];if(d!==o&&d.form===o.form){var y=d[_e]||null;if(!y)throw Error(r(90));gi(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)d=f[l],d.form===o.form&&qf(d)}break e;case"textarea":Pt(o,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&vo(o,!!f.multiple,l,!1)}}}var Vs=!1;function xp(o,l,f){if(Vs)return o(l,f);Vs=!0;try{var d=o(l);return d}finally{if(Vs=!1,(To!==null||Eo!==null)&&(Tm(),To&&(l=To,o=Eo,Eo=To=null,Kf(l),o)))for(l=0;l<o.length;l++)Kf(o[l])}}function Vl(o,l){var f=o.stateNode;if(f===null)return null;var d=f[_e]||null;if(d===null)return null;f=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(_s)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{$i=!1}var Us=null,fa=null,bo=null;function Wf(){if(bo)return bo;var o,l=fa,f=l.length,d,y="value"in Us?Us.value:Us.textContent,v=y.length;for(o=0;o<f&&l[o]===y[o];o++);var R=f-o;for(d=1;d<=R&&l[f-d]===y[v-d];d++);return bo=y.slice(o,1<d?1-d:void 0)}function Bs(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function zs(){return!0}function Yf(){return!1}function jn(o){function l(f,d,y,v,R){this._reactName=f,this._targetInst=y,this.type=d,this.nativeEvent=v,this.target=R,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(f=o[N],this[N]=f?f(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?zs:Yf,this.isPropagationStopped=Yf,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),l}var kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=jn(kt),Bl=p({},kt,{view:0,detail:0}),kp=jn(Bl),nc,rc,js,zl=p({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==js&&(js&&o.type==="mousemove"?(nc=o.screenX-js.screenX,rc=o.screenY-js.screenY):rc=nc=0,js=o),nc)},movementY:function(o){return"movementY"in o?o.movementY:rc}}),Gi=jn(zl),Ip=p({},zl,{dataTransfer:0}),n_=jn(Ip),jl=p({},Bl,{relatedTarget:0}),ic=jn(jl),Qf=p({},kt,{animationName:0,elapsedTime:0,pseudoElement:0}),sc=jn(Qf),Np=p({},kt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),oc=jn(Np),r_=p({},kt,{data:0}),Xf=jn(r_),Fl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jf(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Mp[o])?!!l[o]:!1}function Hl(){return Jf}var Dp=p({},Bl,{key:function(o){if(o.key){var l=Fl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Bs(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Op[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(o){return o.type==="keypress"?Bs(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Bs(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ac=jn(Dp),Pp=p({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zf=jn(Pp),So=p({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),Lp=jn(So),Vp=p({},kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Up=jn(Vp),Bp=p({},zl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),lc=jn(Bp),Vr=p({},kt,{newState:0,oldState:0}),zp=jn(Vr),jp=[9,13,27,32],Fs=_s&&"CompositionEvent"in window,m=null;_s&&"documentMode"in document&&(m=document.documentMode);var b=_s&&"TextEvent"in window&&!m,C=_s&&(!Fs||m&&8<m&&11>=m),M=" ",Z=!1;function oe(o,l){switch(o){case"keyup":return jp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ee(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var At=!1;function Pn(o,l){switch(o){case"compositionend":return Ee(l);case"keypress":return l.which!==32?null:(Z=!0,M);case"textInput":return o=l.data,o===M&&Z?null:o;default:return null}}function Tt(o,l){if(At)return o==="compositionend"||!Fs&&oe(o,l)?(o=Wf(),bo=fa=Us=null,At=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return C&&l.locale!=="ko"?null:l.data;default:return null}}var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Fn[o.type]:l==="textarea"}function wo(o,l,f,d){To?Eo?Eo.push(d):Eo=[d]:To=d,l=Rm(l,"onChange"),0<l.length&&(f=new tc("onChange","change",null,f,d),o.push({event:f,listeners:l}))}var sr=null,Hs=null;function eh(o){IC(o,0)}function Fp(o){var l=wt(o);if(qf(l))return o}function XS(o,l){if(o==="change")return l}var JS=!1;if(_s){var i_;if(_s){var s_="oninput"in document;if(!s_){var ZS=document.createElement("div");ZS.setAttribute("oninput","return;"),s_=typeof ZS.oninput=="function"}i_=s_}else i_=!1;JS=i_&&(!document.documentMode||9<document.documentMode)}function ew(){sr&&(sr.detachEvent("onpropertychange",tw),Hs=sr=null)}function tw(o){if(o.propertyName==="value"&&Fp(Hs)){var l=[];wo(l,Hs,o,qi(o)),xp(eh,l)}}function DV(o,l,f){o==="focusin"?(ew(),sr=l,Hs=f,sr.attachEvent("onpropertychange",tw)):o==="focusout"&&ew()}function PV(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Fp(Hs)}function LV(o,l){if(o==="click")return Fp(l)}function VV(o,l){if(o==="input"||o==="change")return Fp(l)}function UV(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var yi=typeof Object.is=="function"?Object.is:UV;function th(o,l){if(yi(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),d=Object.keys(l);if(f.length!==d.length)return!1;for(d=0;d<f.length;d++){var y=f[d];if(!er.call(l,y)||!yi(o[y],l[y]))return!1}return!0}function nw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function rw(o,l){var f=nw(o);o=0;for(var d;f;){if(f.nodeType===3){if(d=o+f.textContent.length,o<=l&&d>=l)return{node:f,offset:l-o};o=d}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=nw(f)}}function iw(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?iw(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function sw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ml(o.document);l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=Ml(o.document)}return l}function o_(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var BV=_s&&"documentMode"in document&&11>=document.documentMode,uc=null,a_=null,nh=null,l_=!1;function ow(o,l,f){var d=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;l_||uc==null||uc!==Ml(d)||(d=uc,"selectionStart"in d&&o_(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),nh&&th(nh,d)||(nh=d,d=Rm(a_,"onSelect"),0<d.length&&(l=new tc("onSelect","select",null,l,f),o.push({event:l,listeners:d}),l.target=uc)))}function ql(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var cc={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionrun:ql("Transition","TransitionRun"),transitionstart:ql("Transition","TransitionStart"),transitioncancel:ql("Transition","TransitionCancel"),transitionend:ql("Transition","TransitionEnd")},u_={},aw={};_s&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function $l(o){if(u_[o])return u_[o];if(!cc[o])return o;var l=cc[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in aw)return u_[o]=l[f];return o}var lw=$l("animationend"),uw=$l("animationiteration"),cw=$l("animationstart"),zV=$l("transitionrun"),jV=$l("transitionstart"),FV=$l("transitioncancel"),fw=$l("transitionend"),hw=new Map,c_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");c_.push("scrollEnd");function vs(o,l){hw.set(o,l),me(l,[o])}var dw=new WeakMap;function Ki(o,l){if(typeof o=="object"&&o!==null){var f=dw.get(o);return f!==void 0?f:(l={value:o,source:l,stack:_o(l)},dw.set(o,l),l)}return{value:o,source:l,stack:_o(l)}}var Wi=[],fc=0,f_=0;function Hp(){for(var o=fc,l=f_=fc=0;l<o;){var f=Wi[l];Wi[l++]=null;var d=Wi[l];Wi[l++]=null;var y=Wi[l];Wi[l++]=null;var v=Wi[l];if(Wi[l++]=null,d!==null&&y!==null){var R=d.pending;R===null?y.next=y:(y.next=R.next,R.next=y),d.pending=y}v!==0&&pw(f,y,v)}}function qp(o,l,f,d){Wi[fc++]=o,Wi[fc++]=l,Wi[fc++]=f,Wi[fc++]=d,f_|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function h_(o,l,f,d){return qp(o,l,f,d),$p(o)}function hc(o,l){return qp(o,null,null,l),$p(o)}function pw(o,l,f){o.lanes|=f;var d=o.alternate;d!==null&&(d.lanes|=f);for(var y=!1,v=o.return;v!==null;)v.childLanes|=f,d=v.alternate,d!==null&&(d.childLanes|=f),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&l!==null&&(y=31-Zt(f),o=v.hiddenUpdates,d=o[y],d===null?o[y]=[l]:d.push(l),l.lane=f|536870912),v):null}function $p(o){if(50<Rh)throw Rh=0,_v=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var dc={};function HV(o,l,f,d){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(o,l,f,d){return new HV(o,l,f,d)}function d_(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Co(o,l){var f=o.alternate;return f===null?(f=_i(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function mw(o,l){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,l=f.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Gp(o,l,f,d,y,v){var R=0;if(d=o,typeof o=="function")d_(o)&&(R=1);else if(typeof o=="string")R=$U(o,f,we.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case k:return o=_i(31,f,l,y),o.elementType=k,o.lanes=v,o;case T:return Gl(f.children,y,v,l);case E:R=8,y|=24;break;case S:return o=_i(12,f,l,y|2),o.elementType=S,o.lanes=v,o;case V:return o=_i(13,f,l,y),o.elementType=V,o.lanes=v,o;case D:return o=_i(19,f,l,y),o.elementType=D,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case x:case z:R=10;break e;case P:R=9;break e;case H:R=11;break e;case O:R=14;break e;case I:R=16,d=null;break e}R=29,f=Error(r(130,o===null?"null":typeof o,"")),d=null}return l=_i(R,f,l,y),l.elementType=o,l.type=d,l.lanes=v,l}function Gl(o,l,f,d){return o=_i(7,o,d,l),o.lanes=f,o}function p_(o,l,f){return o=_i(6,o,null,l),o.lanes=f,o}function m_(o,l,f){return l=_i(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var pc=[],mc=0,Kp=null,Wp=0,Yi=[],Qi=0,Kl=null,Ro=1,xo="";function Wl(o,l){pc[mc++]=Wp,pc[mc++]=Kp,Kp=o,Wp=l}function gw(o,l,f){Yi[Qi++]=Ro,Yi[Qi++]=xo,Yi[Qi++]=Kl,Kl=o;var d=Ro;o=xo;var y=32-Zt(d)-1;d&=~(1<<y),f+=1;var v=32-Zt(l)+y;if(30<v){var R=y-y%5;v=(d&(1<<R)-1).toString(32),d>>=R,y-=R,Ro=1<<32-Zt(l)+y|f<<y|d,xo=v+o}else Ro=1<<v|f<<y|d,xo=o}function g_(o){o.return!==null&&(Wl(o,1),gw(o,1,0))}function y_(o){for(;o===Kp;)Kp=pc[--mc],pc[mc]=null,Wp=pc[--mc],pc[mc]=null;for(;o===Kl;)Kl=Yi[--Qi],Yi[Qi]=null,xo=Yi[--Qi],Yi[Qi]=null,Ro=Yi[--Qi],Yi[Qi]=null}var Ur=null,ln=null,xt=!1,Yl=null,qs=!1,__=Error(r(519));function Ql(o){var l=Error(r(418,""));throw sh(Ki(l,o)),__}function yw(o){var l=o.stateNode,f=o.type,d=o.memoizedProps;switch(l[he]=o,l[_e]=d,f){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(f=0;f<kh.length;f++)pt(kh[f],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Dl(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Zu(l);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Pl(l,d.value,d.defaultValue,d.children),Zu(l)}f=d.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||d.suppressHydrationWarning===!0||DC(l.textContent,f)?(d.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),d.onScroll!=null&&pt("scroll",l),d.onScrollEnd!=null&&pt("scrollend",l),d.onClick!=null&&(l.onclick=xm),l=!0):l=!1,l||Ql(o)}function _w(o){for(Ur=o.return;Ur;)switch(Ur.tag){case 5:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:Ur=Ur.return}}function rh(o){if(o!==Ur)return!1;if(!xt)return _w(o),xt=!0,!1;var l=o.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Dv(o.type,o.memoizedProps)),f=!f),f&&ln&&Ql(o),_w(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(l===0){ln=Ts(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;o=o.nextSibling}ln=null}}else l===27?(l=ln,Ra(o.type)?(o=Uv,Uv=null,ln=o):ln=l):ln=Ur?Ts(o.stateNode.nextSibling):null;return!0}function ih(){ln=Ur=null,xt=!1}function vw(){var o=Yl;return o!==null&&(Zr===null?Zr=o:Zr.push.apply(Zr,o),Yl=null),o}function sh(o){Yl===null?Yl=[o]:Yl.push(o)}var v_=re(null),Xl=null,ko=null;function ha(o,l,f){ae(v_,l._currentValue),l._currentValue=f}function Io(o){o._currentValue=v_.current,ce(v_)}function A_(o,l,f){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===f)break;o=o.return}}function T_(o,l,f,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var R=y.child;v=v.firstContext;e:for(;v!==null;){var N=v;v=y;for(var q=0;q<l.length;q++)if(N.context===l[q]){v.lanes|=f,N=v.alternate,N!==null&&(N.lanes|=f),A_(v.return,f,o),d||(R=null);break e}v=N.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(r(341));R.lanes|=f,v=R.alternate,v!==null&&(v.lanes|=f),A_(R,f,o),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===o){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function oh(o,l,f,d){o=null;for(var y=l,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var N=y.type;yi(y.pendingProps.value,R.value)||(o!==null?o.push(N):o=[N])}}else if(y===$t.current){if(R=y.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Ph):o=[Ph])}y=y.return}o!==null&&T_(l,o,f,d),l.flags|=262144}function Yp(o){for(o=o.firstContext;o!==null;){if(!yi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Jl(o){Xl=o,ko=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function vr(o){return Aw(Xl,o)}function Qp(o,l){return Xl===null&&Jl(o),Aw(o,l)}function Aw(o,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ko===null){if(o===null)throw Error(r(308));ko=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else ko=ko.next=l;return f}var qV=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(f,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(f){return f()})}},$V=n.unstable_scheduleCallback,GV=n.unstable_NormalPriority,Vn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E_(){return{controller:new qV,data:new Map,refCount:0}}function ah(o){o.refCount--,o.refCount===0&&$V(GV,function(){o.controller.abort()})}var lh=null,b_=0,gc=0,yc=null;function KV(o,l){if(lh===null){var f=lh=[];b_=0,gc=wv(),yc={status:"pending",value:void 0,then:function(d){f.push(d)}}}return b_++,l.then(Tw,Tw),l}function Tw(){if(--b_===0&&lh!==null){yc!==null&&(yc.status="fulfilled");var o=lh;lh=null,gc=0,yc=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function WV(o,l){var f=[],d={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),d}var Ew=Y.S;Y.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&KV(o,l),Ew!==null&&Ew(o,l)};var Zl=re(null);function S_(){var o=Zl.current;return o!==null?o:Gt.pooledCache}function Xp(o,l){l===null?ae(Zl,Zl.current):ae(Zl,l.pool)}function bw(){var o=S_();return o===null?null:{parent:Vn._currentValue,pool:o}}var uh=Error(r(460)),Sw=Error(r(474)),Jp=Error(r(542)),w_={then:function(){}};function ww(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Zp(){}function Cw(o,l,f){switch(f=o[f],f===void 0?o.push(l):f!==l&&(l.then(Zp,Zp),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,xw(o),o;default:if(typeof l.status=="string")l.then(Zp,Zp);else{if(o=Gt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,xw(o),o}throw ch=l,uh}}var ch=null;function Rw(){if(ch===null)throw Error(r(459));var o=ch;return ch=null,o}function xw(o){if(o===uh||o===Jp)throw Error(r(483))}var da=!1;function C_(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R_(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function pa(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ma(o,l,f){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(Mt&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=$p(o),pw(o,null,f),l}return qp(o,d,l,f),$p(o)}function fh(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var d=l.lanes;d&=o.pendingLanes,f|=d,l.lanes=f,Ot(o,f)}}function x_(o,l){var f=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,f===d)){var y=null,v=null;if(f=f.firstBaseUpdate,f!==null){do{var R={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};v===null?y=v=R:v=v.next=R,f=f.next}while(f!==null);v===null?y=v=l:v=v.next=l}else y=v=l;f={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}var k_=!1;function hh(){if(k_){var o=yc;if(o!==null)throw o}}function dh(o,l,f,d){k_=!1;var y=o.updateQueue;da=!1;var v=y.firstBaseUpdate,R=y.lastBaseUpdate,N=y.shared.pending;if(N!==null){y.shared.pending=null;var q=N,ne=q.next;q.next=null,R===null?v=ne:R.next=ne,R=q;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,N=ue.lastBaseUpdate,N!==R&&(N===null?ue.firstBaseUpdate=ne:N.next=ne,ue.lastBaseUpdate=q))}if(v!==null){var de=y.baseState;R=0,ue=ne=q=null,N=v;do{var ie=N.lane&-536870913,se=ie!==N.lane;if(se?(Et&ie)===ie:(d&ie)===ie){ie!==0&&ie===gc&&(k_=!0),ue!==null&&(ue=ue.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Qe=o,Ge=N;ie=l;var Ut=f;switch(Ge.tag){case 1:if(Qe=Ge.payload,typeof Qe=="function"){de=Qe.call(Ut,de,ie);break e}de=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ge.payload,ie=typeof Qe=="function"?Qe.call(Ut,de,ie):Qe,ie==null)break e;de=p({},de,ie);break e;case 2:da=!0}}ie=N.callback,ie!==null&&(o.flags|=64,se&&(o.flags|=8192),se=y.callbacks,se===null?y.callbacks=[ie]:se.push(ie))}else se={lane:ie,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ue===null?(ne=ue=se,q=de):ue=ue.next=se,R|=ie;if(N=N.next,N===null){if(N=y.shared.pending,N===null)break;se=N,N=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);ue===null&&(q=de),y.baseState=q,y.firstBaseUpdate=ne,y.lastBaseUpdate=ue,v===null&&(y.shared.lanes=0),ba|=R,o.lanes=R,o.memoizedState=de}}function kw(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Iw(o,l){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)kw(f[o],l)}var _c=re(null),em=re(0);function Nw(o,l){o=Vo,ae(em,o),ae(_c,l),Vo=o|l.baseLanes}function I_(){ae(em,Vo),ae(_c,_c.current)}function N_(){Vo=em.current,ce(_c),ce(em)}var ga=0,ot=null,Lt=null,wn=null,tm=!1,vc=!1,eu=!1,nm=0,ph=0,Ac=null,YV=0;function yn(){throw Error(r(321))}function O_(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!yi(o[f],l[f]))return!1;return!0}function M_(o,l,f,d,y,v){return ga=v,ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Y.H=o===null||o.memoizedState===null?p1:m1,eu=!1,v=f(d,y),eu=!1,vc&&(v=Mw(l,f,d,y)),Ow(o),v}function Ow(o){Y.H=lm;var l=Lt!==null&&Lt.next!==null;if(ga=0,wn=Lt=ot=null,tm=!1,ph=0,Ac=null,l)throw Error(r(300));o===null||Hn||(o=o.dependencies,o!==null&&Yp(o)&&(Hn=!0))}function Mw(o,l,f,d){ot=o;var y=0;do{if(vc&&(Ac=null),ph=0,vc=!1,25<=y)throw Error(r(301));if(y+=1,wn=Lt=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=nU,v=l(f,d)}while(vc);return v}function QV(){var o=Y.H,l=o.useState()[0];return l=typeof l.then=="function"?mh(l):l,o=o.useState()[0],(Lt!==null?Lt.memoizedState:null)!==o&&(ot.flags|=1024),l}function D_(){var o=nm!==0;return nm=0,o}function P_(o,l,f){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~f}function L_(o){if(tm){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}tm=!1}ga=0,wn=Lt=ot=null,vc=!1,ph=nm=0,Ac=null}function Xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?ot.memoizedState=wn=o:wn=wn.next=o,wn}function Cn(){if(Lt===null){var o=ot.alternate;o=o!==null?o.memoizedState:null}else o=Lt.next;var l=wn===null?ot.memoizedState:wn.next;if(l!==null)wn=l,Lt=o;else{if(o===null)throw ot.alternate===null?Error(r(467)):Error(r(310));Lt=o,o={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},wn===null?ot.memoizedState=wn=o:wn=wn.next=o}return wn}function V_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mh(o){var l=ph;return ph+=1,Ac===null&&(Ac=[]),o=Cw(Ac,o,l),l=ot,(wn===null?l.memoizedState:wn.next)===null&&(l=l.alternate,Y.H=l===null||l.memoizedState===null?p1:m1),o}function rm(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return mh(o);if(o.$$typeof===z)return vr(o)}throw Error(r(438,String(o)))}function U_(o){var l=null,f=ot.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var d=ot.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=V_(),ot.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(o),d=0;d<o;d++)f[d]=B;return l.index++,f}function No(o,l){return typeof l=="function"?l(o):l}function im(o){var l=Cn();return B_(l,Lt,o)}function B_(o,l,f){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=f;var y=o.baseQueue,v=d.pending;if(v!==null){if(y!==null){var R=y.next;y.next=v.next,v.next=R}l.baseQueue=y=v,d.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{l=y.next;var N=R=null,q=null,ne=l,ue=!1;do{var de=ne.lane&-536870913;if(de!==ne.lane?(Et&de)===de:(ga&de)===de){var ie=ne.revertLane;if(ie===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),de===gc&&(ue=!0);else if((ga&ie)===ie){ne=ne.next,ie===gc&&(ue=!0);continue}else de={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(N=q=de,R=v):q=q.next=de,ot.lanes|=ie,ba|=ie;de=ne.action,eu&&f(v,de),v=ne.hasEagerState?ne.eagerState:f(v,de)}else ie={lane:de,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(N=q=ie,R=v):q=q.next=ie,ot.lanes|=de,ba|=de;ne=ne.next}while(ne!==null&&ne!==l);if(q===null?R=v:q.next=N,!yi(v,o.memoizedState)&&(Hn=!0,ue&&(f=yc,f!==null)))throw f;o.memoizedState=v,o.baseState=R,o.baseQueue=q,d.lastRenderedState=v}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function z_(o){var l=Cn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var d=f.dispatch,y=f.pending,v=l.memoizedState;if(y!==null){f.pending=null;var R=y=y.next;do v=o(v,R.action),R=R.next;while(R!==y);yi(v,l.memoizedState)||(Hn=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),f.lastRenderedState=v}return[v,d]}function Dw(o,l,f){var d=ot,y=Cn(),v=xt;if(v){if(f===void 0)throw Error(r(407));f=f()}else f=l();var R=!yi((Lt||y).memoizedState,f);R&&(y.memoizedState=f,Hn=!0),y=y.queue;var N=Vw.bind(null,d,y,o);if(gh(2048,8,N,[o]),y.getSnapshot!==l||R||wn!==null&&wn.memoizedState.tag&1){if(d.flags|=2048,Tc(9,sm(),Lw.bind(null,d,y,f,l),null),Gt===null)throw Error(r(349));v||(ga&124)!==0||Pw(d,l,f)}return f}function Pw(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=ot.updateQueue,l===null?(l=V_(),ot.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function Lw(o,l,f,d){l.value=f,l.getSnapshot=d,Uw(l)&&Bw(o)}function Vw(o,l,f){return f(function(){Uw(l)&&Bw(o)})}function Uw(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!yi(o,f)}catch{return!0}}function Bw(o){var l=hc(o,2);l!==null&&bi(l,o,2)}function j_(o){var l=Xr();if(typeof o=="function"){var f=o;if(o=f(),eu){Dn(!0);try{f()}finally{Dn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:o},l}function zw(o,l,f,d){return o.baseState=f,B_(o,Lt,typeof d=="function"?d:No)}function XV(o,l,f,d,y){if(am(o))throw Error(r(485));if(o=l.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){v.listeners.push(R)}};Y.T!==null?f(!0):v.isTransition=!1,d(v),f=l.pending,f===null?(v.next=l.pending=v,jw(l,v)):(v.next=f.next,l.pending=f.next=v)}}function jw(o,l){var f=l.action,d=l.payload,y=o.state;if(l.isTransition){var v=Y.T,R={};Y.T=R;try{var N=f(y,d),q=Y.S;q!==null&&q(R,N),Fw(o,l,N)}catch(ne){F_(o,l,ne)}finally{Y.T=v}}else try{v=f(y,d),Fw(o,l,v)}catch(ne){F_(o,l,ne)}}function Fw(o,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(d){Hw(o,l,d)},function(d){return F_(o,l,d)}):Hw(o,l,f)}function Hw(o,l,f){l.status="fulfilled",l.value=f,qw(l),o.state=f,l=o.pending,l!==null&&(f=l.next,f===l?o.pending=null:(f=f.next,l.next=f,jw(o,f)))}function F_(o,l,f){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=f,qw(l),l=l.next;while(l!==d)}o.action=null}function qw(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function $w(o,l){return l}function Gw(o,l){if(xt){var f=Gt.formState;if(f!==null){e:{var d=ot;if(xt){if(ln){t:{for(var y=ln,v=qs;y.nodeType!==8;){if(!v){y=null;break t}if(y=Ts(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ln=Ts(y.nextSibling),d=y.data==="F!";break e}}Ql(d)}d=!1}d&&(l=f[0])}}return f=Xr(),f.memoizedState=f.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$w,lastRenderedState:l},f.queue=d,f=f1.bind(null,ot,d),d.dispatch=f,d=j_(!1),v=K_.bind(null,ot,!1,d.queue),d=Xr(),y={state:l,dispatch:null,action:o,pending:null},d.queue=y,f=XV.bind(null,ot,y,v,f),y.dispatch=f,d.memoizedState=o,[l,f,!1]}function Kw(o){var l=Cn();return Ww(l,Lt,o)}function Ww(o,l,f){if(l=B_(o,l,$w)[0],o=im(No)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=mh(l)}catch(R){throw R===uh?Jp:R}else d=l;l=Cn();var y=l.queue,v=y.dispatch;return f!==l.memoizedState&&(ot.flags|=2048,Tc(9,sm(),JV.bind(null,y,f),null)),[d,v,o]}function JV(o,l){o.action=l}function Yw(o){var l=Cn(),f=Lt;if(f!==null)return Ww(l,f,o);Cn(),l=l.memoizedState,f=Cn();var d=f.queue.dispatch;return f.memoizedState=o,[l,d,!1]}function Tc(o,l,f,d){return o={tag:o,create:f,deps:d,inst:l,next:null},l=ot.updateQueue,l===null&&(l=V_(),ot.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=o.next=o:(d=f.next,f.next=o,o.next=d,l.lastEffect=o),o}function sm(){return{destroy:void 0,resource:void 0}}function Qw(){return Cn().memoizedState}function om(o,l,f,d){var y=Xr();d=d===void 0?null:d,ot.flags|=o,y.memoizedState=Tc(1|l,sm(),f,d)}function gh(o,l,f,d){var y=Cn();d=d===void 0?null:d;var v=y.memoizedState.inst;Lt!==null&&d!==null&&O_(d,Lt.memoizedState.deps)?y.memoizedState=Tc(l,v,f,d):(ot.flags|=o,y.memoizedState=Tc(1|l,v,f,d))}function Xw(o,l){om(8390656,8,o,l)}function Jw(o,l){gh(2048,8,o,l)}function Zw(o,l){return gh(4,2,o,l)}function e1(o,l){return gh(4,4,o,l)}function t1(o,l){if(typeof l=="function"){o=o();var f=l(o);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function n1(o,l,f){f=f!=null?f.concat([o]):null,gh(4,4,t1.bind(null,l,o),f)}function H_(){}function r1(o,l){var f=Cn();l=l===void 0?null:l;var d=f.memoizedState;return l!==null&&O_(l,d[1])?d[0]:(f.memoizedState=[o,l],o)}function i1(o,l){var f=Cn();l=l===void 0?null:l;var d=f.memoizedState;if(l!==null&&O_(l,d[1]))return d[0];if(d=o(),eu){Dn(!0);try{o()}finally{Dn(!1)}}return f.memoizedState=[d,l],d}function q_(o,l,f){return f===void 0||(ga&1073741824)!==0?o.memoizedState=l:(o.memoizedState=f,o=aC(),ot.lanes|=o,ba|=o,f)}function s1(o,l,f,d){return yi(f,l)?f:_c.current!==null?(o=q_(o,f,d),yi(o,l)||(Hn=!0),o):(ga&42)===0?(Hn=!0,o.memoizedState=f):(o=aC(),ot.lanes|=o,ba|=o,l)}function o1(o,l,f,d,y){var v=X.p;X.p=v!==0&&8>v?v:8;var R=Y.T,N={};Y.T=N,K_(o,!1,l,f);try{var q=y(),ne=Y.S;if(ne!==null&&ne(N,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ue=WV(q,d);yh(o,l,ue,Ei(o))}else yh(o,l,d,Ei(o))}catch(de){yh(o,l,{then:function(){},status:"rejected",reason:de},Ei())}finally{X.p=v,Y.T=R}}function ZV(){}function $_(o,l,f,d){if(o.tag!==5)throw Error(r(476));var y=a1(o).queue;o1(o,y,l,le,f===null?ZV:function(){return l1(o),f(d)})}function a1(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:le},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:f},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function l1(o){var l=a1(o).next.queue;yh(o,l,{},Ei())}function G_(){return vr(Ph)}function u1(){return Cn().memoizedState}function c1(){return Cn().memoizedState}function eU(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var f=Ei();o=pa(f);var d=ma(l,o,f);d!==null&&(bi(d,l,f),fh(d,l,f)),l={cache:E_()},o.payload=l;return}l=l.return}}function tU(o,l,f){var d=Ei();f={lane:d,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},am(o)?h1(l,f):(f=h_(o,l,f,d),f!==null&&(bi(f,o,d),d1(f,l,d)))}function f1(o,l,f){var d=Ei();yh(o,l,f,d)}function yh(o,l,f,d){var y={lane:d,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(am(o))h1(l,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var R=l.lastRenderedState,N=v(R,f);if(y.hasEagerState=!0,y.eagerState=N,yi(N,R))return qp(o,l,y,0),Gt===null&&Hp(),!1}catch{}finally{}if(f=h_(o,l,y,d),f!==null)return bi(f,o,d),d1(f,l,d),!0}return!1}function K_(o,l,f,d){if(d={lane:2,revertLane:wv(),action:d,hasEagerState:!1,eagerState:null,next:null},am(o)){if(l)throw Error(r(479))}else l=h_(o,f,d,2),l!==null&&bi(l,o,2)}function am(o){var l=o.alternate;return o===ot||l!==null&&l===ot}function h1(o,l){vc=tm=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function d1(o,l,f){if((f&4194048)!==0){var d=l.lanes;d&=o.pendingLanes,f|=d,l.lanes=f,Ot(o,f)}}var lm={readContext:vr,use:rm,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn},p1={readContext:vr,use:rm,useCallback:function(o,l){return Xr().memoizedState=[o,l===void 0?null:l],o},useContext:vr,useEffect:Xw,useImperativeHandle:function(o,l,f){f=f!=null?f.concat([o]):null,om(4194308,4,t1.bind(null,l,o),f)},useLayoutEffect:function(o,l){return om(4194308,4,o,l)},useInsertionEffect:function(o,l){om(4,2,o,l)},useMemo:function(o,l){var f=Xr();l=l===void 0?null:l;var d=o();if(eu){Dn(!0);try{o()}finally{Dn(!1)}}return f.memoizedState=[d,l],d},useReducer:function(o,l,f){var d=Xr();if(f!==void 0){var y=f(l);if(eu){Dn(!0);try{f(l)}finally{Dn(!1)}}}else y=l;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=tU.bind(null,ot,o),[d.memoizedState,o]},useRef:function(o){var l=Xr();return o={current:o},l.memoizedState=o},useState:function(o){o=j_(o);var l=o.queue,f=f1.bind(null,ot,l);return l.dispatch=f,[o.memoizedState,f]},useDebugValue:H_,useDeferredValue:function(o,l){var f=Xr();return q_(f,o,l)},useTransition:function(){var o=j_(!1);return o=o1.bind(null,ot,o.queue,!0,!1),Xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,f){var d=ot,y=Xr();if(xt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Gt===null)throw Error(r(349));(Et&124)!==0||Pw(d,l,f)}y.memoizedState=f;var v={value:f,getSnapshot:l};return y.queue=v,Xw(Vw.bind(null,d,v,o),[o]),d.flags|=2048,Tc(9,sm(),Lw.bind(null,d,v,f,l),null),f},useId:function(){var o=Xr(),l=Gt.identifierPrefix;if(xt){var f=xo,d=Ro;f=(d&~(1<<32-Zt(d)-1)).toString(32)+f,l=""+l+"R"+f,f=nm++,0<f&&(l+="H"+f.toString(32)),l+=""}else f=YV++,l=""+l+"r"+f.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:G_,useFormState:Gw,useActionState:Gw,useOptimistic:function(o){var l=Xr();l.memoizedState=l.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=K_.bind(null,ot,!0,f),f.dispatch=l,[o,l]},useMemoCache:U_,useCacheRefresh:function(){return Xr().memoizedState=eU.bind(null,ot)}},m1={readContext:vr,use:rm,useCallback:r1,useContext:vr,useEffect:Jw,useImperativeHandle:n1,useInsertionEffect:Zw,useLayoutEffect:e1,useMemo:i1,useReducer:im,useRef:Qw,useState:function(){return im(No)},useDebugValue:H_,useDeferredValue:function(o,l){var f=Cn();return s1(f,Lt.memoizedState,o,l)},useTransition:function(){var o=im(No)[0],l=Cn().memoizedState;return[typeof o=="boolean"?o:mh(o),l]},useSyncExternalStore:Dw,useId:u1,useHostTransitionStatus:G_,useFormState:Kw,useActionState:Kw,useOptimistic:function(o,l){var f=Cn();return zw(f,Lt,o,l)},useMemoCache:U_,useCacheRefresh:c1},nU={readContext:vr,use:rm,useCallback:r1,useContext:vr,useEffect:Jw,useImperativeHandle:n1,useInsertionEffect:Zw,useLayoutEffect:e1,useMemo:i1,useReducer:z_,useRef:Qw,useState:function(){return z_(No)},useDebugValue:H_,useDeferredValue:function(o,l){var f=Cn();return Lt===null?q_(f,o,l):s1(f,Lt.memoizedState,o,l)},useTransition:function(){var o=z_(No)[0],l=Cn().memoizedState;return[typeof o=="boolean"?o:mh(o),l]},useSyncExternalStore:Dw,useId:u1,useHostTransitionStatus:G_,useFormState:Yw,useActionState:Yw,useOptimistic:function(o,l){var f=Cn();return Lt!==null?zw(f,Lt,o,l):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:U_,useCacheRefresh:c1},Ec=null,_h=0;function um(o){var l=_h;return _h+=1,Ec===null&&(Ec=[]),Cw(Ec,o,l)}function vh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function cm(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function g1(o){var l=o._init;return l(o._payload)}function y1(o){function l(Q,W){if(o){var te=Q.deletions;te===null?(Q.deletions=[W],Q.flags|=16):te.push(W)}}function f(Q,W){if(!o)return null;for(;W!==null;)l(Q,W),W=W.sibling;return null}function d(Q){for(var W=new Map;Q!==null;)Q.key!==null?W.set(Q.key,Q):W.set(Q.index,Q),Q=Q.sibling;return W}function y(Q,W){return Q=Co(Q,W),Q.index=0,Q.sibling=null,Q}function v(Q,W,te){return Q.index=te,o?(te=Q.alternate,te!==null?(te=te.index,te<W?(Q.flags|=67108866,W):te):(Q.flags|=67108866,W)):(Q.flags|=1048576,W)}function R(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function N(Q,W,te,fe){return W===null||W.tag!==6?(W=p_(te,Q.mode,fe),W.return=Q,W):(W=y(W,te),W.return=Q,W)}function q(Q,W,te,fe){var De=te.type;return De===T?ue(Q,W,te.props.children,fe,te.key):W!==null&&(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&g1(De)===W.type)?(W=y(W,te.props),vh(W,te),W.return=Q,W):(W=Gp(te.type,te.key,te.props,null,Q.mode,fe),vh(W,te),W.return=Q,W)}function ne(Q,W,te,fe){return W===null||W.tag!==4||W.stateNode.containerInfo!==te.containerInfo||W.stateNode.implementation!==te.implementation?(W=m_(te,Q.mode,fe),W.return=Q,W):(W=y(W,te.children||[]),W.return=Q,W)}function ue(Q,W,te,fe,De){return W===null||W.tag!==7?(W=Gl(te,Q.mode,fe,De),W.return=Q,W):(W=y(W,te),W.return=Q,W)}function de(Q,W,te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=p_(""+W,Q.mode,te),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return te=Gp(W.type,W.key,W.props,null,Q.mode,te),vh(te,W),te.return=Q,te;case A:return W=m_(W,Q.mode,te),W.return=Q,W;case I:var fe=W._init;return W=fe(W._payload),de(Q,W,te)}if(be(W)||F(W))return W=Gl(W,Q.mode,te,null),W.return=Q,W;if(typeof W.then=="function")return de(Q,um(W),te);if(W.$$typeof===z)return de(Q,Qp(Q,W),te);cm(Q,W)}return null}function ie(Q,W,te,fe){var De=W!==null?W.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return De!==null?null:N(Q,W,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return te.key===De?q(Q,W,te,fe):null;case A:return te.key===De?ne(Q,W,te,fe):null;case I:return De=te._init,te=De(te._payload),ie(Q,W,te,fe)}if(be(te)||F(te))return De!==null?null:ue(Q,W,te,fe,null);if(typeof te.then=="function")return ie(Q,W,um(te),fe);if(te.$$typeof===z)return ie(Q,W,Qp(Q,te),fe);cm(Q,te)}return null}function se(Q,W,te,fe,De){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(te)||null,N(W,Q,""+fe,De);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case _:return Q=Q.get(fe.key===null?te:fe.key)||null,q(W,Q,fe,De);case A:return Q=Q.get(fe.key===null?te:fe.key)||null,ne(W,Q,fe,De);case I:var ct=fe._init;return fe=ct(fe._payload),se(Q,W,te,fe,De)}if(be(fe)||F(fe))return Q=Q.get(te)||null,ue(W,Q,fe,De,null);if(typeof fe.then=="function")return se(Q,W,te,um(fe),De);if(fe.$$typeof===z)return se(Q,W,te,Qp(W,fe),De);cm(W,fe)}return null}function Qe(Q,W,te,fe){for(var De=null,ct=null,ze=W,Ke=W=0,$n=null;ze!==null&&Ke<te.length;Ke++){ze.index>Ke?($n=ze,ze=null):$n=ze.sibling;var Ct=ie(Q,ze,te[Ke],fe);if(Ct===null){ze===null&&(ze=$n);break}o&&ze&&Ct.alternate===null&&l(Q,ze),W=v(Ct,W,Ke),ct===null?De=Ct:ct.sibling=Ct,ct=Ct,ze=$n}if(Ke===te.length)return f(Q,ze),xt&&Wl(Q,Ke),De;if(ze===null){for(;Ke<te.length;Ke++)ze=de(Q,te[Ke],fe),ze!==null&&(W=v(ze,W,Ke),ct===null?De=ze:ct.sibling=ze,ct=ze);return xt&&Wl(Q,Ke),De}for(ze=d(ze);Ke<te.length;Ke++)$n=se(ze,Q,Ke,te[Ke],fe),$n!==null&&(o&&$n.alternate!==null&&ze.delete($n.key===null?Ke:$n.key),W=v($n,W,Ke),ct===null?De=$n:ct.sibling=$n,ct=$n);return o&&ze.forEach(function(Oa){return l(Q,Oa)}),xt&&Wl(Q,Ke),De}function Ge(Q,W,te,fe){if(te==null)throw Error(r(151));for(var De=null,ct=null,ze=W,Ke=W=0,$n=null,Ct=te.next();ze!==null&&!Ct.done;Ke++,Ct=te.next()){ze.index>Ke?($n=ze,ze=null):$n=ze.sibling;var Oa=ie(Q,ze,Ct.value,fe);if(Oa===null){ze===null&&(ze=$n);break}o&&ze&&Oa.alternate===null&&l(Q,ze),W=v(Oa,W,Ke),ct===null?De=Oa:ct.sibling=Oa,ct=Oa,ze=$n}if(Ct.done)return f(Q,ze),xt&&Wl(Q,Ke),De;if(ze===null){for(;!Ct.done;Ke++,Ct=te.next())Ct=de(Q,Ct.value,fe),Ct!==null&&(W=v(Ct,W,Ke),ct===null?De=Ct:ct.sibling=Ct,ct=Ct);return xt&&Wl(Q,Ke),De}for(ze=d(ze);!Ct.done;Ke++,Ct=te.next())Ct=se(ze,Q,Ke,Ct.value,fe),Ct!==null&&(o&&Ct.alternate!==null&&ze.delete(Ct.key===null?Ke:Ct.key),W=v(Ct,W,Ke),ct===null?De=Ct:ct.sibling=Ct,ct=Ct);return o&&ze.forEach(function(rB){return l(Q,rB)}),xt&&Wl(Q,Ke),De}function Ut(Q,W,te,fe){if(typeof te=="object"&&te!==null&&te.type===T&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case _:e:{for(var De=te.key;W!==null;){if(W.key===De){if(De=te.type,De===T){if(W.tag===7){f(Q,W.sibling),fe=y(W,te.props.children),fe.return=Q,Q=fe;break e}}else if(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&g1(De)===W.type){f(Q,W.sibling),fe=y(W,te.props),vh(fe,te),fe.return=Q,Q=fe;break e}f(Q,W);break}else l(Q,W);W=W.sibling}te.type===T?(fe=Gl(te.props.children,Q.mode,fe,te.key),fe.return=Q,Q=fe):(fe=Gp(te.type,te.key,te.props,null,Q.mode,fe),vh(fe,te),fe.return=Q,Q=fe)}return R(Q);case A:e:{for(De=te.key;W!==null;){if(W.key===De)if(W.tag===4&&W.stateNode.containerInfo===te.containerInfo&&W.stateNode.implementation===te.implementation){f(Q,W.sibling),fe=y(W,te.children||[]),fe.return=Q,Q=fe;break e}else{f(Q,W);break}else l(Q,W);W=W.sibling}fe=m_(te,Q.mode,fe),fe.return=Q,Q=fe}return R(Q);case I:return De=te._init,te=De(te._payload),Ut(Q,W,te,fe)}if(be(te))return Qe(Q,W,te,fe);if(F(te)){if(De=F(te),typeof De!="function")throw Error(r(150));return te=De.call(te),Ge(Q,W,te,fe)}if(typeof te.then=="function")return Ut(Q,W,um(te),fe);if(te.$$typeof===z)return Ut(Q,W,Qp(Q,te),fe);cm(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,W!==null&&W.tag===6?(f(Q,W.sibling),fe=y(W,te),fe.return=Q,Q=fe):(f(Q,W),fe=p_(te,Q.mode,fe),fe.return=Q,Q=fe),R(Q)):f(Q,W)}return function(Q,W,te,fe){try{_h=0;var De=Ut(Q,W,te,fe);return Ec=null,De}catch(ze){if(ze===uh||ze===Jp)throw ze;var ct=_i(29,ze,null,Q.mode);return ct.lanes=fe,ct.return=Q,ct}finally{}}}var bc=y1(!0),_1=y1(!1),Xi=re(null),$s=null;function ya(o){var l=o.alternate;ae(Un,Un.current&1),ae(Xi,o),$s===null&&(l===null||_c.current!==null||l.memoizedState!==null)&&($s=o)}function v1(o){if(o.tag===22){if(ae(Un,Un.current),ae(Xi,o),$s===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&($s=o)}}else _a()}function _a(){ae(Un,Un.current),ae(Xi,Xi.current)}function Oo(o){ce(Xi),$s===o&&($s=null),ce(Un)}var Un=re(0);function fm(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Vv(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function W_(o,l,f,d){l=o.memoizedState,f=f(d,l),f=f==null?l:p({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Y_={enqueueSetState:function(o,l,f){o=o._reactInternals;var d=Ei(),y=pa(d);y.payload=l,f!=null&&(y.callback=f),l=ma(o,y,d),l!==null&&(bi(l,o,d),fh(l,o,d))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var d=Ei(),y=pa(d);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=ma(o,y,d),l!==null&&(bi(l,o,d),fh(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=Ei(),d=pa(f);d.tag=2,l!=null&&(d.callback=l),l=ma(o,d,f),l!==null&&(bi(l,o,f),fh(l,o,f))}};function A1(o,l,f,d,y,v,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,v,R):l.prototype&&l.prototype.isPureReactComponent?!th(f,d)||!th(y,v):!0}function T1(o,l,f,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,d),l.state!==o&&Y_.enqueueReplaceState(l,l.state,null)}function tu(o,l){var f=l;if("ref"in l){f={};for(var d in l)d!=="ref"&&(f[d]=l[d])}if(o=o.defaultProps){f===l&&(f=p({},f));for(var y in o)f[y]===void 0&&(f[y]=o[y])}return f}var hm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function E1(o){hm(o)}function b1(o){console.error(o)}function S1(o){hm(o)}function dm(o,l){try{var f=o.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function w1(o,l,f){try{var d=o.onCaughtError;d(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Q_(o,l,f){return f=pa(f),f.tag=3,f.payload={element:null},f.callback=function(){dm(o,l)},f}function C1(o){return o=pa(o),o.tag=3,o}function R1(o,l,f,d){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var v=d.value;o.payload=function(){return y(v)},o.callback=function(){w1(l,f,d)}}var R=f.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(o.callback=function(){w1(l,f,d),typeof y!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function rU(o,l,f,d,y){if(f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=f.alternate,l!==null&&oh(l,f,y,!0),f=Xi.current,f!==null){switch(f.tag){case 13:return $s===null?Av():f.alternate===null&&un===0&&(un=3),f.flags&=-257,f.flags|=65536,f.lanes=y,d===w_?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([d]):l.add(d),Ev(o,d,y)),!1;case 22:return f.flags|=65536,d===w_?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([d]):f.add(d)),Ev(o,d,y)),!1}throw Error(r(435,f.tag))}return Ev(o,d,y),Av(),!1}if(xt)return l=Xi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==__&&(o=Error(r(422),{cause:d}),sh(Ki(o,f)))):(d!==__&&(l=Error(r(423),{cause:d}),sh(Ki(l,f))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=Ki(d,f),y=Q_(o.stateNode,d,y),x_(o,y),un!==4&&(un=2)),!1;var v=Error(r(520),{cause:d});if(v=Ki(v,f),Ch===null?Ch=[v]:Ch.push(v),un!==4&&(un=2),l===null)return!0;d=Ki(d,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,o=y&-y,f.lanes|=o,o=Q_(f.stateNode,d,o),x_(f,o),!1;case 1:if(l=f.type,v=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Sa===null||!Sa.has(v))))return f.flags|=65536,y&=-y,f.lanes|=y,y=C1(y),R1(y,o,f,d),x_(f,y),!1}f=f.return}while(f!==null);return!1}var x1=Error(r(461)),Hn=!1;function or(o,l,f,d){l.child=o===null?_1(l,null,f,d):bc(l,o.child,f,d)}function k1(o,l,f,d,y){f=f.render;var v=l.ref;if("ref"in d){var R={};for(var N in d)N!=="ref"&&(R[N]=d[N])}else R=d;return Jl(l),d=M_(o,l,f,R,v,y),N=D_(),o!==null&&!Hn?(P_(o,l,y),Mo(o,l,y)):(xt&&N&&g_(l),l.flags|=1,or(o,l,d,y),l.child)}function I1(o,l,f,d,y){if(o===null){var v=f.type;return typeof v=="function"&&!d_(v)&&v.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=v,N1(o,l,v,d,y)):(o=Gp(f.type,null,d,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(v=o.child,!iv(o,y)){var R=v.memoizedProps;if(f=f.compare,f=f!==null?f:th,f(R,d)&&o.ref===l.ref)return Mo(o,l,y)}return l.flags|=1,o=Co(v,d),o.ref=l.ref,o.return=l,l.child=o}function N1(o,l,f,d,y){if(o!==null){var v=o.memoizedProps;if(th(v,d)&&o.ref===l.ref)if(Hn=!1,l.pendingProps=d=v,iv(o,y))(o.flags&131072)!==0&&(Hn=!0);else return l.lanes=o.lanes,Mo(o,l,y)}return X_(o,l,f,d,y)}function O1(o,l,f){var d=l.pendingProps,y=d.children,v=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=v!==null?v.baseLanes|f:f,o!==null){for(y=l.child=o.child,v=0;y!==null;)v=v|y.lanes|y.childLanes,y=y.sibling;l.childLanes=v&~d}else l.childLanes=0,l.child=null;return M1(o,l,d,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Xp(l,v!==null?v.cachePool:null),v!==null?Nw(l,v):I_(),v1(l);else return l.lanes=l.childLanes=536870912,M1(o,l,v!==null?v.baseLanes|f:f,f)}else v!==null?(Xp(l,v.cachePool),Nw(l,v),_a(),l.memoizedState=null):(o!==null&&Xp(l,null),I_(),_a());return or(o,l,y,f),l.child}function M1(o,l,f,d){var y=S_();return y=y===null?null:{parent:Vn._currentValue,pool:y},l.memoizedState={baseLanes:f,cachePool:y},o!==null&&Xp(l,null),I_(),v1(l),o!==null&&oh(o,l,d,!0),null}function pm(o,l){var f=l.ref;if(f===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(l.flags|=4194816)}}function X_(o,l,f,d,y){return Jl(l),f=M_(o,l,f,d,void 0,y),d=D_(),o!==null&&!Hn?(P_(o,l,y),Mo(o,l,y)):(xt&&d&&g_(l),l.flags|=1,or(o,l,f,y),l.child)}function D1(o,l,f,d,y,v){return Jl(l),l.updateQueue=null,f=Mw(l,d,f,y),Ow(o),d=D_(),o!==null&&!Hn?(P_(o,l,v),Mo(o,l,v)):(xt&&d&&g_(l),l.flags|=1,or(o,l,f,v),l.child)}function P1(o,l,f,d,y){if(Jl(l),l.stateNode===null){var v=dc,R=f.contextType;typeof R=="object"&&R!==null&&(v=vr(R)),v=new f(d,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Y_,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=d,v.state=l.memoizedState,v.refs={},C_(l),R=f.contextType,v.context=typeof R=="object"&&R!==null?vr(R):dc,v.state=l.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(W_(l,f,R,d),v.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(R=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),R!==v.state&&Y_.enqueueReplaceState(v,v.state,null),dh(l,d,v,y),hh(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){v=l.stateNode;var N=l.memoizedProps,q=tu(f,N);v.props=q;var ne=v.context,ue=f.contextType;R=dc,typeof ue=="object"&&ue!==null&&(R=vr(ue));var de=f.getDerivedStateFromProps;ue=typeof de=="function"||typeof v.getSnapshotBeforeUpdate=="function",N=l.pendingProps!==N,ue||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(N||ne!==R)&&T1(l,v,d,R),da=!1;var ie=l.memoizedState;v.state=ie,dh(l,d,v,y),hh(),ne=l.memoizedState,N||ie!==ne||da?(typeof de=="function"&&(W_(l,f,de,d),ne=l.memoizedState),(q=da||A1(l,f,q,d,ie,ne,R))?(ue||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=ne),v.props=d,v.state=ne,v.context=R,d=q):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{v=l.stateNode,R_(o,l),R=l.memoizedProps,ue=tu(f,R),v.props=ue,de=l.pendingProps,ie=v.context,ne=f.contextType,q=dc,typeof ne=="object"&&ne!==null&&(q=vr(ne)),N=f.getDerivedStateFromProps,(ne=typeof N=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==de||ie!==q)&&T1(l,v,d,q),da=!1,ie=l.memoizedState,v.state=ie,dh(l,d,v,y),hh();var se=l.memoizedState;R!==de||ie!==se||da||o!==null&&o.dependencies!==null&&Yp(o.dependencies)?(typeof N=="function"&&(W_(l,f,N,d),se=l.memoizedState),(ue=da||A1(l,f,ue,d,ie,se,q)||o!==null&&o.dependencies!==null&&Yp(o.dependencies))?(ne||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,se,q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,se,q)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&ie===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ie===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=se),v.props=d,v.state=se,v.context=q,d=ue):(typeof v.componentDidUpdate!="function"||R===o.memoizedProps&&ie===o.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ie===o.memoizedState||(l.flags|=1024),d=!1)}return v=d,pm(o,l),d=(l.flags&128)!==0,v||d?(v=l.stateNode,f=d&&typeof f.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,o!==null&&d?(l.child=bc(l,o.child,null,y),l.child=bc(l,null,f,y)):or(o,l,f,y),l.memoizedState=v.state,o=l.child):o=Mo(o,l,y),o}function L1(o,l,f,d){return ih(),l.flags|=256,or(o,l,f,d),l.child}var J_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Z_(o){return{baseLanes:o,cachePool:bw()}}function ev(o,l,f){return o=o!==null?o.childLanes&~f:0,l&&(o|=Ji),o}function V1(o,l,f){var d=l.pendingProps,y=!1,v=(l.flags&128)!==0,R;if((R=v)||(R=o!==null&&o.memoizedState===null?!1:(Un.current&2)!==0),R&&(y=!0,l.flags&=-129),R=(l.flags&32)!==0,l.flags&=-33,o===null){if(xt){if(y?ya(l):_a(),xt){var N=ln,q;if(q=N){e:{for(q=N,N=qs;q.nodeType!==8;){if(!N){N=null;break e}if(q=Ts(q.nextSibling),q===null){N=null;break e}}N=q}N!==null?(l.memoizedState={dehydrated:N,treeContext:Kl!==null?{id:Ro,overflow:xo}:null,retryLane:536870912,hydrationErrors:null},q=_i(18,null,null,0),q.stateNode=N,q.return=l,l.child=q,Ur=l,ln=null,q=!0):q=!1}q||Ql(l)}if(N=l.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Vv(N)?l.lanes=32:l.lanes=536870912,null;Oo(l)}return N=d.children,d=d.fallback,y?(_a(),y=l.mode,N=mm({mode:"hidden",children:N},y),d=Gl(d,y,f,null),N.return=l,d.return=l,N.sibling=d,l.child=N,y=l.child,y.memoizedState=Z_(f),y.childLanes=ev(o,R,f),l.memoizedState=J_,d):(ya(l),tv(l,N))}if(q=o.memoizedState,q!==null&&(N=q.dehydrated,N!==null)){if(v)l.flags&256?(ya(l),l.flags&=-257,l=nv(o,l,f)):l.memoizedState!==null?(_a(),l.child=o.child,l.flags|=128,l=null):(_a(),y=d.fallback,N=l.mode,d=mm({mode:"visible",children:d.children},N),y=Gl(y,N,f,null),y.flags|=2,d.return=l,y.return=l,d.sibling=y,l.child=d,bc(l,o.child,null,f),d=l.child,d.memoizedState=Z_(f),d.childLanes=ev(o,R,f),l.memoizedState=J_,l=y);else if(ya(l),Vv(N)){if(R=N.nextSibling&&N.nextSibling.dataset,R)var ne=R.dgst;R=ne,d=Error(r(419)),d.stack="",d.digest=R,sh({value:d,source:null,stack:null}),l=nv(o,l,f)}else if(Hn||oh(o,l,f,!1),R=(f&o.childLanes)!==0,Hn||R){if(R=Gt,R!==null&&(d=f&-f,d=(d&42)!==0?1:rr(d),d=(d&(R.suspendedLanes|f))!==0?0:d,d!==0&&d!==q.retryLane))throw q.retryLane=d,hc(o,d),bi(R,o,d),x1;N.data==="$?"||Av(),l=nv(o,l,f)}else N.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=q.treeContext,ln=Ts(N.nextSibling),Ur=l,xt=!0,Yl=null,qs=!1,o!==null&&(Yi[Qi++]=Ro,Yi[Qi++]=xo,Yi[Qi++]=Kl,Ro=o.id,xo=o.overflow,Kl=l),l=tv(l,d.children),l.flags|=4096);return l}return y?(_a(),y=d.fallback,N=l.mode,q=o.child,ne=q.sibling,d=Co(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&65011712,ne!==null?y=Co(ne,y):(y=Gl(y,N,f,null),y.flags|=2),y.return=l,d.return=l,d.sibling=y,l.child=d,d=y,y=l.child,N=o.child.memoizedState,N===null?N=Z_(f):(q=N.cachePool,q!==null?(ne=Vn._currentValue,q=q.parent!==ne?{parent:ne,pool:ne}:q):q=bw(),N={baseLanes:N.baseLanes|f,cachePool:q}),y.memoizedState=N,y.childLanes=ev(o,R,f),l.memoizedState=J_,d):(ya(l),f=o.child,o=f.sibling,f=Co(f,{mode:"visible",children:d.children}),f.return=l,f.sibling=null,o!==null&&(R=l.deletions,R===null?(l.deletions=[o],l.flags|=16):R.push(o)),l.child=f,l.memoizedState=null,f)}function tv(o,l){return l=mm({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function mm(o,l){return o=_i(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function nv(o,l,f){return bc(l,o.child,null,f),o=tv(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function U1(o,l,f){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),A_(o.return,l,f)}function rv(o,l,f,d,y){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:f,tailMode:y}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=f,v.tailMode=y)}function B1(o,l,f){var d=l.pendingProps,y=d.revealOrder,v=d.tail;if(or(o,l,d.children,f),d=Un.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&U1(o,f,l);else if(o.tag===19)U1(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(ae(Un,d),y){case"forwards":for(f=l.child,y=null;f!==null;)o=f.alternate,o!==null&&fm(o)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),rv(l,!1,y,f,v);break;case"backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&fm(o)===null){l.child=y;break}o=y.sibling,y.sibling=f,f=y,y=o}rv(l,!0,f,null,v);break;case"together":rv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Mo(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),ba|=l.lanes,(f&l.childLanes)===0)if(o!==null){if(oh(o,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,f=Co(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=Co(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function iv(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Yp(o)))}function iU(o,l,f){switch(l.tag){case 3:St(l,l.stateNode.containerInfo),ha(l,Vn,o.memoizedState.cache),ih();break;case 27:case 5:Nt(l);break;case 4:St(l,l.stateNode.containerInfo);break;case 10:ha(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(ya(l),l.flags|=128,null):(f&l.child.childLanes)!==0?V1(o,l,f):(ya(l),o=Mo(o,l,f),o!==null?o.sibling:null);ya(l);break;case 19:var y=(o.flags&128)!==0;if(d=(f&l.childLanes)!==0,d||(oh(o,l,f,!1),d=(f&l.childLanes)!==0),y){if(d)return B1(o,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Un,Un.current),d)break;return null;case 22:case 23:return l.lanes=0,O1(o,l,f);case 24:ha(l,Vn,o.memoizedState.cache)}return Mo(o,l,f)}function z1(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps)Hn=!0;else{if(!iv(o,f)&&(l.flags&128)===0)return Hn=!1,iU(o,l,f);Hn=(o.flags&131072)!==0}else Hn=!1,xt&&(l.flags&1048576)!==0&&gw(l,Wp,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var d=l.elementType,y=d._init;if(d=y(d._payload),l.type=d,typeof d=="function")d_(d)?(o=tu(d,o),l.tag=1,l=P1(null,l,d,o,f)):(l.tag=0,l=X_(null,l,d,o,f));else{if(d!=null){if(y=d.$$typeof,y===H){l.tag=11,l=k1(null,l,d,o,f);break e}else if(y===O){l.tag=14,l=I1(null,l,d,o,f);break e}}throw l=Te(d)||d,Error(r(306,l,""))}}return l;case 0:return X_(o,l,l.type,l.pendingProps,f);case 1:return d=l.type,y=tu(d,l.pendingProps),P1(o,l,d,y,f);case 3:e:{if(St(l,l.stateNode.containerInfo),o===null)throw Error(r(387));d=l.pendingProps;var v=l.memoizedState;y=v.element,R_(o,l),dh(l,d,null,f);var R=l.memoizedState;if(d=R.cache,ha(l,Vn,d),d!==v.cache&&T_(l,[Vn],f,!0),hh(),d=R.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:R.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=L1(o,l,d,f);break e}else if(d!==y){y=Ki(Error(r(424)),l),sh(y),l=L1(o,l,d,f);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ln=Ts(o.firstChild),Ur=l,xt=!0,Yl=null,qs=!0,f=_1(l,null,d,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ih(),d===y){l=Mo(o,l,f);break e}or(o,l,d,f)}l=l.child}return l;case 26:return pm(o,l),o===null?(f=qC(l.type,null,l.pendingProps,null))?l.memoizedState=f:xt||(f=l.type,o=l.pendingProps,d=km(Le.current).createElement(f),d[he]=l,d[_e]=o,lr(d,f,o),ht(d),l.stateNode=d):l.memoizedState=qC(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Nt(l),o===null&&xt&&(d=l.stateNode=jC(l.type,l.pendingProps,Le.current),Ur=l,qs=!0,y=ln,Ra(l.type)?(Uv=y,ln=Ts(d.firstChild)):ln=y),or(o,l,l.pendingProps.children,f),pm(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&xt&&((y=d=ln)&&(d=OU(d,l.type,l.pendingProps,qs),d!==null?(l.stateNode=d,Ur=l,ln=Ts(d.firstChild),qs=!1,y=!0):y=!1),y||Ql(l)),Nt(l),y=l.type,v=l.pendingProps,R=o!==null?o.memoizedProps:null,d=v.children,Dv(y,v)?d=null:R!==null&&Dv(y,R)&&(l.flags|=32),l.memoizedState!==null&&(y=M_(o,l,QV,null,null,f),Ph._currentValue=y),pm(o,l),or(o,l,d,f),l.child;case 6:return o===null&&xt&&((o=f=ln)&&(f=MU(f,l.pendingProps,qs),f!==null?(l.stateNode=f,Ur=l,ln=null,o=!0):o=!1),o||Ql(l)),null;case 13:return V1(o,l,f);case 4:return St(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=bc(l,null,d,f):or(o,l,d,f),l.child;case 11:return k1(o,l,l.type,l.pendingProps,f);case 7:return or(o,l,l.pendingProps,f),l.child;case 8:return or(o,l,l.pendingProps.children,f),l.child;case 12:return or(o,l,l.pendingProps.children,f),l.child;case 10:return d=l.pendingProps,ha(l,l.type,d.value),or(o,l,d.children,f),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,Jl(l),y=vr(y),d=d(y),l.flags|=1,or(o,l,d,f),l.child;case 14:return I1(o,l,l.type,l.pendingProps,f);case 15:return N1(o,l,l.type,l.pendingProps,f);case 19:return B1(o,l,f);case 31:return d=l.pendingProps,f=l.mode,d={mode:d.mode,children:d.children},o===null?(f=mm(d,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=Co(o.child,d),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return O1(o,l,f);case 24:return Jl(l),d=vr(Vn),o===null?(y=S_(),y===null&&(y=Gt,v=E_(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=f),y=v),l.memoizedState={parent:d,cache:y},C_(l),ha(l,Vn,y)):((o.lanes&f)!==0&&(R_(o,l),dh(l,null,null,f),hh()),y=o.memoizedState,v=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ha(l,Vn,d)):(d=v.cache,ha(l,Vn,d),d!==y.cache&&T_(l,[Vn],f,!0))),or(o,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Do(o){o.flags|=4}function j1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!YC(l)){if(l=Xi.current,l!==null&&((Et&4194048)===Et?$s!==null:(Et&62914560)!==Et&&(Et&536870912)===0||l!==$s))throw ch=w_,Sw;o.flags|=8192}}function gm(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?ji():536870912,o.lanes|=l,Rc|=l)}function Ah(o,l){if(!xt)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function nn(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,d=0;if(l)for(var y=o.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=f,l}function sU(o,l,f){var d=l.pendingProps;switch(y_(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(l),null;case 1:return nn(l),null;case 3:return f=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Io(Vn),Wt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(rh(l)?Do(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,vw())),nn(l),null;case 26:return f=l.memoizedState,o===null?(Do(l),f!==null?(nn(l),j1(l,f)):(nn(l),l.flags&=-16777217)):f?f!==o.memoizedState?(Do(l),nn(l),j1(l,f)):(nn(l),l.flags&=-16777217):(o.memoizedProps!==d&&Do(l),nn(l),l.flags&=-16777217),null;case 27:Mn(l),f=Le.current;var y=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Do(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return nn(l),null}o=we.current,rh(l)?yw(l):(o=jC(y,d,f),l.stateNode=o,Do(l))}return nn(l),null;case 5:if(Mn(l),f=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&Do(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return nn(l),null}if(o=we.current,rh(l))yw(l);else{switch(y=km(Le.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?y.createElement(f,{is:d.is}):y.createElement(f)}}o[he]=l,o[_e]=d;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=o;e:switch(lr(o,f,d),f){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Do(l)}}return nn(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&Do(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(o=Le.current,rh(l)){if(o=l.stateNode,f=l.memoizedProps,d=null,y=Ur,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[he]=l,o=!!(o.nodeValue===f||d!==null&&d.suppressHydrationWarning===!0||DC(o.nodeValue,f)),o||Ql(l)}else o=km(o).createTextNode(d),o[he]=l,l.stateNode=o}return nn(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=rh(l),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[he]=l}else ih(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;nn(l),y=!1}else y=vw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Oo(l),l):(Oo(l),null)}if(Oo(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=d!==null,o=o!==null&&o.memoizedState!==null,f){d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==y&&(d.flags|=2048)}return f!==o&&f&&(l.child.flags|=8192),gm(l,l.updateQueue),nn(l),null;case 4:return Wt(),o===null&&kv(l.stateNode.containerInfo),nn(l),null;case 10:return Io(l.type),nn(l),null;case 19:if(ce(Un),y=l.memoizedState,y===null)return nn(l),null;if(d=(l.flags&128)!==0,v=y.rendering,v===null)if(d)Ah(y,!1);else{if(un!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(v=fm(o),v!==null){for(l.flags|=128,Ah(y,!1),o=v.updateQueue,l.updateQueue=o,gm(l,o),l.subtreeFlags=0,o=f,f=l.child;f!==null;)mw(f,o),f=f.sibling;return ae(Un,Un.current&1|2),l.child}o=o.sibling}y.tail!==null&&an()>vm&&(l.flags|=128,d=!0,Ah(y,!1),l.lanes=4194304)}else{if(!d)if(o=fm(v),o!==null){if(l.flags|=128,d=!0,o=o.updateQueue,l.updateQueue=o,gm(l,o),Ah(y,!0),y.tail===null&&y.tailMode==="hidden"&&!v.alternate&&!xt)return nn(l),null}else 2*an()-y.renderingStartTime>vm&&f!==536870912&&(l.flags|=128,d=!0,Ah(y,!1),l.lanes=4194304);y.isBackwards?(v.sibling=l.child,l.child=v):(o=y.last,o!==null?o.sibling=v:l.child=v,y.last=v)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=an(),l.sibling=null,o=Un.current,ae(Un,d?o&1|2:o&1),l):(nn(l),null);case 22:case 23:return Oo(l),N_(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(f&536870912)!==0&&(l.flags&128)===0&&(nn(l),l.subtreeFlags&6&&(l.flags|=8192)):nn(l),f=l.updateQueue,f!==null&&gm(l,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048),o!==null&&ce(Zl),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Io(Vn),nn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function oU(o,l){switch(y_(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Io(Vn),Wt(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Mn(l),null;case 13:if(Oo(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));ih()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ce(Un),null;case 4:return Wt(),null;case 10:return Io(l.type),null;case 22:case 23:return Oo(l),N_(),o!==null&&ce(Zl),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Io(Vn),null;case 25:return null;default:return null}}function F1(o,l){switch(y_(l),l.tag){case 3:Io(Vn),Wt();break;case 26:case 27:case 5:Mn(l);break;case 4:Wt();break;case 13:Oo(l);break;case 19:ce(Un);break;case 10:Io(l.type);break;case 22:case 23:Oo(l),N_(),o!==null&&ce(Zl);break;case 24:Io(Vn)}}function Th(o,l){try{var f=l.updateQueue,d=f!==null?f.lastEffect:null;if(d!==null){var y=d.next;f=y;do{if((f.tag&o)===o){d=void 0;var v=f.create,R=f.inst;d=v(),R.destroy=d}f=f.next}while(f!==y)}}catch(N){Ft(l,l.return,N)}}function va(o,l,f){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var v=y.next;d=v;do{if((d.tag&o)===o){var R=d.inst,N=R.destroy;if(N!==void 0){R.destroy=void 0,y=l;var q=f,ne=N;try{ne()}catch(ue){Ft(y,q,ue)}}}d=d.next}while(d!==v)}}catch(ue){Ft(l,l.return,ue)}}function H1(o){var l=o.updateQueue;if(l!==null){var f=o.stateNode;try{Iw(l,f)}catch(d){Ft(o,o.return,d)}}}function q1(o,l,f){f.props=tu(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(d){Ft(o,l,d)}}function Eh(o,l){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof f=="function"?o.refCleanup=f(d):f.current=d}}catch(y){Ft(o,l,y)}}function Gs(o,l){var f=o.ref,d=o.refCleanup;if(f!==null)if(typeof d=="function")try{d()}catch(y){Ft(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Ft(o,l,y)}else f.current=null}function $1(o){var l=o.type,f=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&d.focus();break e;case"img":f.src?d.src=f.src:f.srcSet&&(d.srcset=f.srcSet)}}catch(y){Ft(o,o.return,y)}}function sv(o,l,f){try{var d=o.stateNode;RU(d,o.type,f,l),d[_e]=l}catch(y){Ft(o,o.return,y)}}function G1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ra(o.type)||o.tag===4}function ov(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||G1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ra(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function av(o,l,f){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(o),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=xm));else if(d!==4&&(d===27&&Ra(o.type)&&(f=o.stateNode,l=null),o=o.child,o!==null))for(av(o,l,f),o=o.sibling;o!==null;)av(o,l,f),o=o.sibling}function ym(o,l,f){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(d!==4&&(d===27&&Ra(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(ym(o,l,f),o=o.sibling;o!==null;)ym(o,l,f),o=o.sibling}function K1(o){var l=o.stateNode,f=o.memoizedProps;try{for(var d=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);lr(l,d,f),l[he]=o,l[_e]=f}catch(v){Ft(o,o.return,v)}}var Po=!1,_n=!1,lv=!1,W1=typeof WeakSet=="function"?WeakSet:Set,qn=null;function aU(o,l){if(o=o.containerInfo,Ov=Pm,o=sw(o),o_(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var d=f.getSelection&&f.getSelection();if(d&&d.rangeCount!==0){f=d.anchorNode;var y=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{f.nodeType,v.nodeType}catch{f=null;break e}var R=0,N=-1,q=-1,ne=0,ue=0,de=o,ie=null;t:for(;;){for(var se;de!==f||y!==0&&de.nodeType!==3||(N=R+y),de!==v||d!==0&&de.nodeType!==3||(q=R+d),de.nodeType===3&&(R+=de.nodeValue.length),(se=de.firstChild)!==null;)ie=de,de=se;for(;;){if(de===o)break t;if(ie===f&&++ne===y&&(N=R),ie===v&&++ue===d&&(q=R),(se=de.nextSibling)!==null)break;de=ie,ie=de.parentNode}de=se}f=N===-1||q===-1?null:{start:N,end:q}}else f=null}f=f||{start:0,end:0}}else f=null;for(Mv={focusedElem:o,selectionRange:f},Pm=!1,qn=l;qn!==null;)if(l=qn,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,qn=o;else for(;qn!==null;){switch(l=qn,v=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,f=l,y=v.memoizedProps,v=v.memoizedState,d=f.stateNode;try{var Qe=tu(f.type,y,f.elementType===f.type);o=d.getSnapshotBeforeUpdate(Qe,v),d.__reactInternalSnapshotBeforeUpdate=o}catch(Ge){Ft(f,f.return,Ge)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,f=o.nodeType,f===9)Lv(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Lv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,qn=o;break}qn=l.return}}function Y1(o,l,f){var d=f.flags;switch(f.tag){case 0:case 11:case 15:Aa(o,f),d&4&&Th(5,f);break;case 1:if(Aa(o,f),d&4)if(o=f.stateNode,l===null)try{o.componentDidMount()}catch(R){Ft(f,f.return,R)}else{var y=tu(f.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(R){Ft(f,f.return,R)}}d&64&&H1(f),d&512&&Eh(f,f.return);break;case 3:if(Aa(o,f),d&64&&(o=f.updateQueue,o!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{Iw(o,l)}catch(R){Ft(f,f.return,R)}}break;case 27:l===null&&d&4&&K1(f);case 26:case 5:Aa(o,f),l===null&&d&4&&$1(f),d&512&&Eh(f,f.return);break;case 12:Aa(o,f);break;case 13:Aa(o,f),d&4&&J1(o,f),d&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=gU.bind(null,f),DU(o,f))));break;case 22:if(d=f.memoizedState!==null||Po,!d){l=l!==null&&l.memoizedState!==null||_n,y=Po;var v=_n;Po=d,(_n=l)&&!v?Ta(o,f,(f.subtreeFlags&8772)!==0):Aa(o,f),Po=y,_n=v}break;case 30:break;default:Aa(o,f)}}function Q1(o){var l=o.alternate;l!==null&&(o.alternate=null,Q1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&xe(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Yt=null,Jr=!1;function Lo(o,l,f){for(f=f.child;f!==null;)X1(o,l,f),f=f.sibling}function X1(o,l,f){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(ut,f)}catch{}switch(f.tag){case 26:_n||Gs(f,l),Lo(o,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:_n||Gs(f,l);var d=Yt,y=Jr;Ra(f.type)&&(Yt=f.stateNode,Jr=!1),Lo(o,l,f),Nh(f.stateNode),Yt=d,Jr=y;break;case 5:_n||Gs(f,l);case 6:if(d=Yt,y=Jr,Yt=null,Lo(o,l,f),Yt=d,Jr=y,Yt!==null)if(Jr)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(f.stateNode)}catch(v){Ft(f,l,v)}else try{Yt.removeChild(f.stateNode)}catch(v){Ft(f,l,v)}break;case 18:Yt!==null&&(Jr?(o=Yt,BC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Bh(o)):BC(Yt,f.stateNode));break;case 4:d=Yt,y=Jr,Yt=f.stateNode.containerInfo,Jr=!0,Lo(o,l,f),Yt=d,Jr=y;break;case 0:case 11:case 14:case 15:_n||va(2,f,l),_n||va(4,f,l),Lo(o,l,f);break;case 1:_n||(Gs(f,l),d=f.stateNode,typeof d.componentWillUnmount=="function"&&q1(f,l,d)),Lo(o,l,f);break;case 21:Lo(o,l,f);break;case 22:_n=(d=_n)||f.memoizedState!==null,Lo(o,l,f),_n=d;break;default:Lo(o,l,f)}}function J1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Bh(o)}catch(f){Ft(l,l.return,f)}}function lU(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new W1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new W1),l;default:throw Error(r(435,o.tag))}}function uv(o,l){var f=lU(o);l.forEach(function(d){var y=yU.bind(null,o,d);f.has(d)||(f.add(d),d.then(y,y))})}function vi(o,l){var f=l.deletions;if(f!==null)for(var d=0;d<f.length;d++){var y=f[d],v=o,R=l,N=R;e:for(;N!==null;){switch(N.tag){case 27:if(Ra(N.type)){Yt=N.stateNode,Jr=!1;break e}break;case 5:Yt=N.stateNode,Jr=!1;break e;case 3:case 4:Yt=N.stateNode.containerInfo,Jr=!0;break e}N=N.return}if(Yt===null)throw Error(r(160));X1(v,R,y),Yt=null,Jr=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Z1(l,o),l=l.sibling}var As=null;function Z1(o,l){var f=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:vi(l,o),Ai(o),d&4&&(va(3,o,o.return),Th(3,o),va(5,o,o.return));break;case 1:vi(l,o),Ai(o),d&512&&(_n||f===null||Gs(f,f.return)),d&64&&Po&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?d:f.concat(d))));break;case 26:var y=As;if(vi(l,o),Ai(o),d&512&&(_n||f===null||Gs(f,f.return)),d&4){var v=f!==null?f.memoizedState:null;if(d=o.memoizedState,f===null)if(d===null)if(o.stateNode===null){e:{d=o.type,f=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Fe]||v[he]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(d),y.head.insertBefore(v,y.querySelector("head > title"))),lr(v,d,f),v[he]=o,ht(v),d=v;break e;case"link":var R=KC("link","href",y).get(d+(f.href||""));if(R){for(var N=0;N<R.length;N++)if(v=R[N],v.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&v.getAttribute("rel")===(f.rel==null?null:f.rel)&&v.getAttribute("title")===(f.title==null?null:f.title)&&v.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){R.splice(N,1);break t}}v=y.createElement(d),lr(v,d,f),y.head.appendChild(v);break;case"meta":if(R=KC("meta","content",y).get(d+(f.content||""))){for(N=0;N<R.length;N++)if(v=R[N],v.getAttribute("content")===(f.content==null?null:""+f.content)&&v.getAttribute("name")===(f.name==null?null:f.name)&&v.getAttribute("property")===(f.property==null?null:f.property)&&v.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&v.getAttribute("charset")===(f.charSet==null?null:f.charSet)){R.splice(N,1);break t}}v=y.createElement(d),lr(v,d,f),y.head.appendChild(v);break;default:throw Error(r(468,d))}v[he]=o,ht(v),d=v}o.stateNode=d}else WC(y,o.type,o.stateNode);else o.stateNode=GC(y,d,o.memoizedProps);else v!==d?(v===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):v.count--,d===null?WC(y,o.type,o.stateNode):GC(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&sv(o,o.memoizedProps,f.memoizedProps)}break;case 27:vi(l,o),Ai(o),d&512&&(_n||f===null||Gs(f,f.return)),f!==null&&d&4&&sv(o,o.memoizedProps,f.memoizedProps);break;case 5:if(vi(l,o),Ai(o),d&512&&(_n||f===null||Gs(f,f.return)),o.flags&32){y=o.stateNode;try{Hi(y,"")}catch(se){Ft(o,o.return,se)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,sv(o,y,f!==null?f.memoizedProps:y)),d&1024&&(lv=!0);break;case 6:if(vi(l,o),Ai(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,f=o.stateNode;try{f.nodeValue=d}catch(se){Ft(o,o.return,se)}}break;case 3:if(Om=null,y=As,As=Im(l.containerInfo),vi(l,o),As=y,Ai(o),d&4&&f!==null&&f.memoizedState.isDehydrated)try{Bh(l.containerInfo)}catch(se){Ft(o,o.return,se)}lv&&(lv=!1,eC(o));break;case 4:d=As,As=Im(o.stateNode.containerInfo),vi(l,o),Ai(o),As=d;break;case 12:vi(l,o),Ai(o);break;case 13:vi(l,o),Ai(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(mv=an()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,uv(o,d)));break;case 22:y=o.memoizedState!==null;var q=f!==null&&f.memoizedState!==null,ne=Po,ue=_n;if(Po=ne||y,_n=ue||q,vi(l,o),_n=ue,Po=ne,Ai(o),d&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||q||Po||_n||nu(o)),f=null,l=o;;){if(l.tag===5||l.tag===26){if(f===null){q=f=l;try{if(v=q.stateNode,y)R=v.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{N=q.stateNode;var de=q.memoizedProps.style,ie=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(se){Ft(q,q.return,se)}}}else if(l.tag===6){if(f===null){q=l;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(se){Ft(q,q.return,se)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(f=d.retryQueue,f!==null&&(d.retryQueue=null,uv(o,f))));break;case 19:vi(l,o),Ai(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,uv(o,d)));break;case 30:break;case 21:break;default:vi(l,o),Ai(o)}}function Ai(o){var l=o.flags;if(l&2){try{for(var f,d=o.return;d!==null;){if(G1(d)){f=d;break}d=d.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,v=ov(o);ym(o,v,y);break;case 5:var R=f.stateNode;f.flags&32&&(Hi(R,""),f.flags&=-33);var N=ov(o);ym(o,N,R);break;case 3:case 4:var q=f.stateNode.containerInfo,ne=ov(o);av(o,ne,q);break;default:throw Error(r(161))}}catch(ue){Ft(o,o.return,ue)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function eC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;eC(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Aa(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Y1(o,l.alternate,l),l=l.sibling}function nu(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:va(4,l,l.return),nu(l);break;case 1:Gs(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&q1(l,l.return,f),nu(l);break;case 27:Nh(l.stateNode);case 26:case 5:Gs(l,l.return),nu(l);break;case 22:l.memoizedState===null&&nu(l);break;case 30:nu(l);break;default:nu(l)}o=o.sibling}}function Ta(o,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=o,v=l,R=v.flags;switch(v.tag){case 0:case 11:case 15:Ta(y,v,f),Th(4,v);break;case 1:if(Ta(y,v,f),d=v,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ne){Ft(d,d.return,ne)}if(d=v,y=d.updateQueue,y!==null){var N=d.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)kw(q[y],N)}catch(ne){Ft(d,d.return,ne)}}f&&R&64&&H1(v),Eh(v,v.return);break;case 27:K1(v);case 26:case 5:Ta(y,v,f),f&&d===null&&R&4&&$1(v),Eh(v,v.return);break;case 12:Ta(y,v,f);break;case 13:Ta(y,v,f),f&&R&4&&J1(y,v);break;case 22:v.memoizedState===null&&Ta(y,v,f),Eh(v,v.return);break;case 30:break;default:Ta(y,v,f)}l=l.sibling}}function cv(o,l){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&ah(f))}function fv(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&ah(o))}function Ks(o,l,f,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)tC(o,l,f,d),l=l.sibling}function tC(o,l,f,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Ks(o,l,f,d),y&2048&&Th(9,l);break;case 1:Ks(o,l,f,d);break;case 3:Ks(o,l,f,d),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&ah(o)));break;case 12:if(y&2048){Ks(o,l,f,d),o=l.stateNode;try{var v=l.memoizedProps,R=v.id,N=v.onPostCommit;typeof N=="function"&&N(R,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(q){Ft(l,l.return,q)}}else Ks(o,l,f,d);break;case 13:Ks(o,l,f,d);break;case 23:break;case 22:v=l.stateNode,R=l.alternate,l.memoizedState!==null?v._visibility&2?Ks(o,l,f,d):bh(o,l):v._visibility&2?Ks(o,l,f,d):(v._visibility|=2,Sc(o,l,f,d,(l.subtreeFlags&10256)!==0)),y&2048&&cv(R,l);break;case 24:Ks(o,l,f,d),y&2048&&fv(l.alternate,l);break;default:Ks(o,l,f,d)}}function Sc(o,l,f,d,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var v=o,R=l,N=f,q=d,ne=R.flags;switch(R.tag){case 0:case 11:case 15:Sc(v,R,N,q,y),Th(8,R);break;case 23:break;case 22:var ue=R.stateNode;R.memoizedState!==null?ue._visibility&2?Sc(v,R,N,q,y):bh(v,R):(ue._visibility|=2,Sc(v,R,N,q,y)),y&&ne&2048&&cv(R.alternate,R);break;case 24:Sc(v,R,N,q,y),y&&ne&2048&&fv(R.alternate,R);break;default:Sc(v,R,N,q,y)}l=l.sibling}}function bh(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=o,d=l,y=d.flags;switch(d.tag){case 22:bh(f,d),y&2048&&cv(d.alternate,d);break;case 24:bh(f,d),y&2048&&fv(d.alternate,d);break;default:bh(f,d)}l=l.sibling}}var Sh=8192;function wc(o){if(o.subtreeFlags&Sh)for(o=o.child;o!==null;)nC(o),o=o.sibling}function nC(o){switch(o.tag){case 26:wc(o),o.flags&Sh&&o.memoizedState!==null&&KU(As,o.memoizedState,o.memoizedProps);break;case 5:wc(o);break;case 3:case 4:var l=As;As=Im(o.stateNode.containerInfo),wc(o),As=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=Sh,Sh=16777216,wc(o),Sh=l):wc(o));break;default:wc(o)}}function rC(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function wh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];qn=d,sC(d,o)}rC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)iC(o),o=o.sibling}function iC(o){switch(o.tag){case 0:case 11:case 15:wh(o),o.flags&2048&&va(9,o,o.return);break;case 3:wh(o);break;case 12:wh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,_m(o)):wh(o);break;default:wh(o)}}function _m(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];qn=d,sC(d,o)}rC(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:va(8,l,l.return),_m(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,_m(l));break;default:_m(l)}o=o.sibling}}function sC(o,l){for(;qn!==null;){var f=qn;switch(f.tag){case 0:case 11:case 15:va(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var d=f.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ah(f.memoizedState.cache)}if(d=f.child,d!==null)d.return=f,qn=d;else e:for(f=o;qn!==null;){d=qn;var y=d.sibling,v=d.return;if(Q1(d),d===f){qn=null;break e}if(y!==null){y.return=v,qn=y;break e}qn=v}}}var uU={getCacheForType:function(o){var l=vr(Vn),f=l.data.get(o);return f===void 0&&(f=o(),l.data.set(o,f)),f}},cU=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Gt=null,dt=null,Et=0,Dt=0,Ti=null,Ea=!1,Cc=!1,hv=!1,Vo=0,un=0,ba=0,ru=0,dv=0,Ji=0,Rc=0,Ch=null,Zr=null,pv=!1,mv=0,vm=1/0,Am=null,Sa=null,ar=0,wa=null,xc=null,kc=0,gv=0,yv=null,oC=null,Rh=0,_v=null;function Ei(){if((Mt&2)!==0&&Et!==0)return Et&-Et;if(Y.T!==null){var o=gc;return o!==0?o:wv()}return G()}function aC(){Ji===0&&(Ji=(Et&536870912)===0||xt?Wr():536870912);var o=Xi.current;return o!==null&&(o.flags|=32),Ji}function bi(o,l,f){(o===Gt&&(Dt===2||Dt===9)||o.cancelPendingCommit!==null)&&(Ic(o,0),Ca(o,Et,Ji,!1)),tr(o,f),((Mt&2)===0||o!==Gt)&&(o===Gt&&((Mt&2)===0&&(ru|=f),un===4&&Ca(o,Et,Ji,!1)),Ws(o))}function lC(o,l,f){if((Mt&6)!==0)throw Error(r(327));var d=!f&&(l&124)===0&&(l&o.expiredLanes)===0||yr(o,l),y=d?dU(o,l):Tv(o,l,!0),v=d;do{if(y===0){Cc&&!d&&Ca(o,l,0,!1);break}else{if(f=o.current.alternate,v&&!fU(f)){y=Tv(o,l,!1),v=!1;continue}if(y===2){if(v=l,o.errorRecoveryDisabledLanes&v)var R=0;else R=o.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){l=R;e:{var N=o;y=Ch;var q=N.current.memoizedState.isDehydrated;if(q&&(Ic(N,R).flags|=256),R=Tv(N,R,!1),R!==2){if(hv&&!q){N.errorRecoveryDisabledLanes|=v,ru|=v,y=4;break e}v=Zr,Zr=y,v!==null&&(Zr===null?Zr=v:Zr.push.apply(Zr,v))}y=R}if(v=!1,y!==2)continue}}if(y===1){Ic(o,0),Ca(o,l,0,!0);break}e:{switch(d=o,v=y,v){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Ca(d,l,Ji,!Ea);break e;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=mv+300-an(),10<y)){if(Ca(d,l,Ji,!Ea),mi(d,0,!0)!==0)break e;d.timeoutHandle=VC(uC.bind(null,d,f,Zr,Am,pv,l,Ji,ru,Rc,Ea,v,2,-0,0),y);break e}uC(d,f,Zr,Am,pv,l,Ji,ru,Rc,Ea,v,0,-0,0)}}break}while(!0);Ws(o)}function uC(o,l,f,d,y,v,R,N,q,ne,ue,de,ie,se){if(o.timeoutHandle=-1,de=l.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(Dh={stylesheets:null,count:0,unsuspend:GU},nC(l),de=WU(),de!==null)){o.cancelPendingCommit=de(gC.bind(null,o,l,v,f,d,y,R,N,q,ue,1,ie,se)),Ca(o,v,R,!ne);return}gC(o,l,v,f,d,y,R,N,q)}function fU(o){for(var l=o;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var d=0;d<f.length;d++){var y=f[d],v=y.getSnapshot;y=y.value;try{if(!yi(v(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ca(o,l,f,d){l&=~dv,l&=~ru,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var y=l;0<y;){var v=31-Zt(y),R=1<<v;d[v]=-1,y&=~R}f!==0&&nr(o,f,l)}function Tm(){return(Mt&6)===0?(xh(0),!1):!0}function vv(){if(dt!==null){if(Dt===0)var o=dt.return;else o=dt,ko=Xl=null,L_(o),Ec=null,_h=0,o=dt;for(;o!==null;)F1(o.alternate,o),o=o.return;dt=null}}function Ic(o,l){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,kU(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),vv(),Gt=o,dt=f=Co(o.current,null),Et=l,Dt=0,Ti=null,Ea=!1,Cc=yr(o,l),hv=!1,Rc=Ji=dv=ru=ba=un=0,Zr=Ch=null,pv=!1,(l&8)!==0&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var y=31-Zt(d),v=1<<y;l|=o[y],d&=~v}return Vo=l,Hp(),f}function cC(o,l){ot=null,Y.H=lm,l===uh||l===Jp?(l=Rw(),Dt=3):l===Sw?(l=Rw(),Dt=4):Dt=l===x1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ti=l,dt===null&&(un=1,dm(o,Ki(l,o.current)))}function fC(){var o=Y.H;return Y.H=lm,o===null?lm:o}function hC(){var o=Y.A;return Y.A=uU,o}function Av(){un=4,Ea||(Et&4194048)!==Et&&Xi.current!==null||(Cc=!0),(ba&134217727)===0&&(ru&134217727)===0||Gt===null||Ca(Gt,Et,Ji,!1)}function Tv(o,l,f){var d=Mt;Mt|=2;var y=fC(),v=hC();(Gt!==o||Et!==l)&&(Am=null,Ic(o,l)),l=!1;var R=un;e:do try{if(Dt!==0&&dt!==null){var N=dt,q=Ti;switch(Dt){case 8:vv(),R=6;break e;case 3:case 2:case 9:case 6:Xi.current===null&&(l=!0);var ne=Dt;if(Dt=0,Ti=null,Nc(o,N,q,ne),f&&Cc){R=0;break e}break;default:ne=Dt,Dt=0,Ti=null,Nc(o,N,q,ne)}}hU(),R=un;break}catch(ue){cC(o,ue)}while(!0);return l&&o.shellSuspendCounter++,ko=Xl=null,Mt=d,Y.H=y,Y.A=v,dt===null&&(Gt=null,Et=0,Hp()),R}function hU(){for(;dt!==null;)dC(dt)}function dU(o,l){var f=Mt;Mt|=2;var d=fC(),y=hC();Gt!==o||Et!==l?(Am=null,vm=an()+500,Ic(o,l)):Cc=yr(o,l);e:do try{if(Dt!==0&&dt!==null){l=dt;var v=Ti;t:switch(Dt){case 1:Dt=0,Ti=null,Nc(o,l,v,1);break;case 2:case 9:if(ww(v)){Dt=0,Ti=null,pC(l);break}l=function(){Dt!==2&&Dt!==9||Gt!==o||(Dt=7),Ws(o)},v.then(l,l);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:ww(v)?(Dt=0,Ti=null,pC(l)):(Dt=0,Ti=null,Nc(o,l,v,7));break;case 5:var R=null;switch(dt.tag){case 26:R=dt.memoizedState;case 5:case 27:var N=dt;if(!R||YC(R)){Dt=0,Ti=null;var q=N.sibling;if(q!==null)dt=q;else{var ne=N.return;ne!==null?(dt=ne,Em(ne)):dt=null}break t}}Dt=0,Ti=null,Nc(o,l,v,5);break;case 6:Dt=0,Ti=null,Nc(o,l,v,6);break;case 8:vv(),un=6;break e;default:throw Error(r(462))}}pU();break}catch(ue){cC(o,ue)}while(!0);return ko=Xl=null,Y.H=d,Y.A=y,Mt=f,dt!==null?0:(Gt=null,Et=0,Hp(),un)}function pU(){for(;dt!==null&&!gs();)dC(dt)}function dC(o){var l=z1(o.alternate,o,Vo);o.memoizedProps=o.pendingProps,l===null?Em(o):dt=l}function pC(o){var l=o,f=l.alternate;switch(l.tag){case 15:case 0:l=D1(f,l,l.pendingProps,l.type,void 0,Et);break;case 11:l=D1(f,l,l.pendingProps,l.type.render,l.ref,Et);break;case 5:L_(l);default:F1(f,l),l=dt=mw(l,Vo),l=z1(f,l,Vo)}o.memoizedProps=o.pendingProps,l===null?Em(o):dt=l}function Nc(o,l,f,d){ko=Xl=null,L_(l),Ec=null,_h=0;var y=l.return;try{if(rU(o,y,l,f,Et)){un=1,dm(o,Ki(f,o.current)),dt=null;return}}catch(v){if(y!==null)throw dt=y,v;un=1,dm(o,Ki(f,o.current)),dt=null;return}l.flags&32768?(xt||d===1?o=!0:Cc||(Et&536870912)!==0?o=!1:(Ea=o=!0,(d===2||d===9||d===3||d===6)&&(d=Xi.current,d!==null&&d.tag===13&&(d.flags|=16384))),mC(l,o)):Em(l)}function Em(o){var l=o;do{if((l.flags&32768)!==0){mC(l,Ea);return}o=l.return;var f=sU(l.alternate,l,Vo);if(f!==null){dt=f;return}if(l=l.sibling,l!==null){dt=l;return}dt=l=o}while(l!==null);un===0&&(un=5)}function mC(o,l){do{var f=oU(o.alternate,o);if(f!==null){f.flags&=32767,dt=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(o=o.sibling,o!==null)){dt=o;return}dt=o=f}while(o!==null);un=6,dt=null}function gC(o,l,f,d,y,v,R,N,q){o.cancelPendingCommit=null;do bm();while(ar!==0);if((Mt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(v=l.lanes|l.childLanes,v|=f_,Ds(o,f,v,R,N,q),o===Gt&&(dt=Gt=null,Et=0),xc=l,wa=o,kc=f,gv=v,yv=y,oC=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,_U(zi,function(){return TC(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,y=X.p,X.p=2,R=Mt,Mt|=4;try{aU(o,l,f)}finally{Mt=R,X.p=y,Y.T=d}}ar=1,yC(),_C(),vC()}}function yC(){if(ar===1){ar=0;var o=wa,l=xc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=Y.T,Y.T=null;var d=X.p;X.p=2;var y=Mt;Mt|=4;try{Z1(l,o);var v=Mv,R=sw(o.containerInfo),N=v.focusedElem,q=v.selectionRange;if(R!==N&&N&&N.ownerDocument&&iw(N.ownerDocument.documentElement,N)){if(q!==null&&o_(N)){var ne=q.start,ue=q.end;if(ue===void 0&&(ue=ne),"selectionStart"in N)N.selectionStart=ne,N.selectionEnd=Math.min(ue,N.value.length);else{var de=N.ownerDocument||document,ie=de&&de.defaultView||window;if(ie.getSelection){var se=ie.getSelection(),Qe=N.textContent.length,Ge=Math.min(q.start,Qe),Ut=q.end===void 0?Ge:Math.min(q.end,Qe);!se.extend&&Ge>Ut&&(R=Ut,Ut=Ge,Ge=R);var Q=rw(N,Ge),W=rw(N,Ut);if(Q&&W&&(se.rangeCount!==1||se.anchorNode!==Q.node||se.anchorOffset!==Q.offset||se.focusNode!==W.node||se.focusOffset!==W.offset)){var te=de.createRange();te.setStart(Q.node,Q.offset),se.removeAllRanges(),Ge>Ut?(se.addRange(te),se.extend(W.node,W.offset)):(te.setEnd(W.node,W.offset),se.addRange(te))}}}}for(de=[],se=N;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var fe=de[N];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Pm=!!Ov,Mv=Ov=null}finally{Mt=y,X.p=d,Y.T=f}}o.current=l,ar=2}}function _C(){if(ar===2){ar=0;var o=wa,l=xc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=Y.T,Y.T=null;var d=X.p;X.p=2;var y=Mt;Mt|=4;try{Y1(o,l.alternate,l)}finally{Mt=y,X.p=d,Y.T=f}}ar=3}}function vC(){if(ar===4||ar===3){ar=0,Is();var o=wa,l=xc,f=kc,d=oC;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ar=5:(ar=0,xc=wa=null,AC(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Sa=null),Ps(f),l=l.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(ut,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=Y.T,y=X.p,X.p=2,Y.T=null;try{for(var v=o.onRecoverableError,R=0;R<d.length;R++){var N=d[R];v(N.value,{componentStack:N.stack})}}finally{Y.T=l,X.p=y}}(kc&3)!==0&&bm(),Ws(o),y=o.pendingLanes,(f&4194090)!==0&&(y&42)!==0?o===_v?Rh++:(Rh=0,_v=o):Rh=0,xh(0)}}function AC(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,ah(l)))}function bm(o){return yC(),_C(),vC(),TC()}function TC(){if(ar!==5)return!1;var o=wa,l=gv;gv=0;var f=Ps(kc),d=Y.T,y=X.p;try{X.p=32>f?32:f,Y.T=null,f=yv,yv=null;var v=wa,R=kc;if(ar=0,xc=wa=null,kc=0,(Mt&6)!==0)throw Error(r(331));var N=Mt;if(Mt|=4,iC(v.current),tC(v,v.current,R,f),Mt=N,xh(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(ut,v)}catch{}return!0}finally{X.p=y,Y.T=d,AC(o,l)}}function EC(o,l,f){l=Ki(f,l),l=Q_(o.stateNode,l,2),o=ma(o,l,2),o!==null&&(tr(o,2),Ws(o))}function Ft(o,l,f){if(o.tag===3)EC(o,o,f);else for(;l!==null;){if(l.tag===3){EC(l,o,f);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Sa===null||!Sa.has(d))){o=Ki(f,o),f=C1(2),d=ma(l,f,2),d!==null&&(R1(f,d,l,o),tr(d,2),Ws(d));break}}l=l.return}}function Ev(o,l,f){var d=o.pingCache;if(d===null){d=o.pingCache=new cU;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(f)||(hv=!0,y.add(f),o=mU.bind(null,o,l,f),l.then(o,o))}function mU(o,l,f){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,Gt===o&&(Et&f)===f&&(un===4||un===3&&(Et&62914560)===Et&&300>an()-mv?(Mt&2)===0&&Ic(o,0):dv|=f,Rc===Et&&(Rc=0)),Ws(o)}function bC(o,l){l===0&&(l=ji()),o=hc(o,l),o!==null&&(tr(o,l),Ws(o))}function gU(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),bC(o,f)}function yU(o,l){var f=0;switch(o.tag){case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(f=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),bC(o,f)}function _U(o,l){return di(o,l)}var Sm=null,Oc=null,bv=!1,wm=!1,Sv=!1,iu=0;function Ws(o){o!==Oc&&o.next===null&&(Oc===null?Sm=Oc=o:Oc=Oc.next=o),wm=!0,bv||(bv=!0,AU())}function xh(o,l){if(!Sv&&wm){Sv=!0;do for(var f=!1,d=Sm;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var v=0;else{var R=d.suspendedLanes,N=d.pingedLanes;v=(1<<31-Zt(42|o)+1)-1,v&=y&~(R&~N),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(f=!0,RC(d,v))}else v=Et,v=mi(d,d===Gt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||yr(d,v)||(f=!0,RC(d,v));d=d.next}while(f);Sv=!1}}function vU(){SC()}function SC(){wm=bv=!1;var o=0;iu!==0&&(xU()&&(o=iu),iu=0);for(var l=an(),f=null,d=Sm;d!==null;){var y=d.next,v=wC(d,l);v===0?(d.next=null,f===null?Sm=y:f.next=y,y===null&&(Oc=f)):(f=d,(o!==0||(v&3)!==0)&&(wm=!0)),d=y}xh(o)}function wC(o,l){for(var f=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var R=31-Zt(v),N=1<<R,q=y[R];q===-1?((N&f)===0||(N&d)!==0)&&(y[R]=Ms(N,l)):q<=l&&(o.expiredLanes|=N),v&=~N}if(l=Gt,f=Et,f=mi(o,o===l?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,f===0||o===l&&(Dt===2||Dt===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Jt(d),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||yr(o,f)){if(l=f&-f,l===o.callbackPriority)return l;switch(d!==null&&Jt(d),Ps(f)){case 2:case 8:f=ys;break;case 32:f=zi;break;case 268435456:f=gr;break;default:f=zi}return d=CC.bind(null,o),f=di(f,d),o.callbackPriority=l,o.callbackNode=f,l}return d!==null&&d!==null&&Jt(d),o.callbackPriority=2,o.callbackNode=null,2}function CC(o,l){if(ar!==0&&ar!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(bm()&&o.callbackNode!==f)return null;var d=Et;return d=mi(o,o===Gt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(lC(o,d,l),wC(o,an()),o.callbackNode!=null&&o.callbackNode===f?CC.bind(null,o):null)}function RC(o,l){if(bm())return null;lC(o,l,!0)}function AU(){IU(function(){(Mt&6)!==0?di(Bi,vU):SC()})}function wv(){return iu===0&&(iu=Wr()),iu}function xC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ec(""+o)}function kC(o,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,o.id&&f.setAttribute("form",o.id),l.parentNode.insertBefore(f,l),o=new FormData(o),f.parentNode.removeChild(f),o}function TU(o,l,f,d,y){if(l==="submit"&&f&&f.stateNode===y){var v=xC((y[_e]||null).action),R=d.submitter;R&&(l=(l=R[_e]||null)?xC(l.formAction):R.getAttribute("formAction"),l!==null&&(v=l,R=null));var N=new tc("action","action",null,d,y);o.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(iu!==0){var q=R?kC(y,R):new FormData(y);$_(f,{pending:!0,data:q,method:y.method,action:v},null,q)}}else typeof v=="function"&&(N.preventDefault(),q=R?kC(y,R):new FormData(y),$_(f,{pending:!0,data:q,method:y.method,action:v},v,q))},currentTarget:y}]})}}for(var Cv=0;Cv<c_.length;Cv++){var Rv=c_[Cv],EU=Rv.toLowerCase(),bU=Rv[0].toUpperCase()+Rv.slice(1);vs(EU,"on"+bU)}vs(lw,"onAnimationEnd"),vs(uw,"onAnimationIteration"),vs(cw,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(zV,"onTransitionRun"),vs(jV,"onTransitionStart"),vs(FV,"onTransitionCancel"),vs(fw,"onTransitionEnd"),Ce("onMouseEnter",["mouseout","mouseover"]),Ce("onMouseLeave",["mouseout","mouseover"]),Ce("onPointerEnter",["pointerout","pointerover"]),Ce("onPointerLeave",["pointerout","pointerover"]),me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),me("onBeforeInput",["compositionend","keypress","textInput","paste"]),me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kh));function IC(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var d=o[f],y=d.event;d=d.listeners;e:{var v=void 0;if(l)for(var R=d.length-1;0<=R;R--){var N=d[R],q=N.instance,ne=N.currentTarget;if(N=N.listener,q!==v&&y.isPropagationStopped())break e;v=N,y.currentTarget=ne;try{v(y)}catch(ue){hm(ue)}y.currentTarget=null,v=q}else for(R=0;R<d.length;R++){if(N=d[R],q=N.instance,ne=N.currentTarget,N=N.listener,q!==v&&y.isPropagationStopped())break e;v=N,y.currentTarget=ne;try{v(y)}catch(ue){hm(ue)}y.currentTarget=null,v=q}}}}function pt(o,l){var f=l[Be];f===void 0&&(f=l[Be]=new Set);var d=o+"__bubble";f.has(d)||(NC(l,o,2,!1),f.add(d))}function xv(o,l,f){var d=0;l&&(d|=4),NC(f,o,d,l)}var Cm="_reactListening"+Math.random().toString(36).slice(2);function kv(o){if(!o[Cm]){o[Cm]=!0,ve.forEach(function(f){f!=="selectionchange"&&(SU.has(f)||xv(f,!1,o),xv(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Cm]||(l[Cm]=!0,xv("selectionchange",!1,l))}}function NC(o,l,f,d){switch(tR(l)){case 2:var y=XU;break;case 8:y=JU;break;default:y=Hv}f=y.bind(null,l,f,o),y=void 0,!$i||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(l,f,{capture:!0,passive:y}):o.addEventListener(l,f,!0):y!==void 0?o.addEventListener(l,f,{passive:y}):o.addEventListener(l,f,!1)}function Iv(o,l,f,d,y){var v=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var N=d.stateNode.containerInfo;if(N===y)break;if(R===4)for(R=d.return;R!==null;){var q=R.tag;if((q===3||q===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;N!==null;){if(R=He(N),R===null)return;if(q=R.tag,q===5||q===6||q===26||q===27){d=v=R;continue e}N=N.parentNode}}d=d.return}xp(function(){var ne=v,ue=qi(f),de=[];e:{var ie=hw.get(o);if(ie!==void 0){var se=tc,Qe=o;switch(o){case"keypress":if(Bs(f)===0)break e;case"keydown":case"keyup":se=ac;break;case"focusin":Qe="focus",se=ic;break;case"focusout":Qe="blur",se=ic;break;case"beforeblur":case"afterblur":se=ic;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=n_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Lp;break;case lw:case uw:case cw:se=sc;break;case fw:se=Up;break;case"scroll":case"scrollend":se=kp;break;case"wheel":se=lc;break;case"copy":case"cut":case"paste":se=oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Zf;break;case"toggle":case"beforetoggle":se=zp}var Ge=(l&4)!==0,Ut=!Ge&&(o==="scroll"||o==="scrollend"),Q=Ge?ie!==null?ie+"Capture":null:ie;Ge=[];for(var W=ne,te;W!==null;){var fe=W;if(te=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||te===null||Q===null||(fe=Vl(W,Q),fe!=null&&Ge.push(Ih(W,fe,te))),Ut)break;W=W.return}0<Ge.length&&(ie=new se(ie,Qe,null,f,ue),de.push({event:ie,listeners:Ge}))}}if((l&7)===0){e:{if(ie=o==="mouseover"||o==="pointerover",se=o==="mouseout"||o==="pointerout",ie&&f!==Ao&&(Qe=f.relatedTarget||f.fromElement)&&(He(Qe)||Qe[Se]))break e;if((se||ie)&&(ie=ue.window===ue?ue:(ie=ue.ownerDocument)?ie.defaultView||ie.parentWindow:window,se?(Qe=f.relatedTarget||f.toElement,se=ne,Qe=Qe?He(Qe):null,Qe!==null&&(Ut=s(Qe),Ge=Qe.tag,Qe!==Ut||Ge!==5&&Ge!==27&&Ge!==6)&&(Qe=null)):(se=null,Qe=ne),se!==Qe)){if(Ge=Gi,fe="onMouseLeave",Q="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(Ge=Zf,fe="onPointerLeave",Q="onPointerEnter",W="pointer"),Ut=se==null?ie:wt(se),te=Qe==null?ie:wt(Qe),ie=new Ge(fe,W+"leave",se,f,ue),ie.target=Ut,ie.relatedTarget=te,fe=null,He(ue)===ne&&(Ge=new Ge(Q,W+"enter",Qe,f,ue),Ge.target=te,Ge.relatedTarget=Ut,fe=Ge),Ut=fe,se&&Qe)t:{for(Ge=se,Q=Qe,W=0,te=Ge;te;te=Mc(te))W++;for(te=0,fe=Q;fe;fe=Mc(fe))te++;for(;0<W-te;)Ge=Mc(Ge),W--;for(;0<te-W;)Q=Mc(Q),te--;for(;W--;){if(Ge===Q||Q!==null&&Ge===Q.alternate)break t;Ge=Mc(Ge),Q=Mc(Q)}Ge=null}else Ge=null;se!==null&&OC(de,ie,se,Ge,!1),Qe!==null&&Ut!==null&&OC(de,Ut,Qe,Ge,!0)}}e:{if(ie=ne?wt(ne):window,se=ie.nodeName&&ie.nodeName.toLowerCase(),se==="select"||se==="input"&&ie.type==="file")var De=XS;else if(Ln(ie))if(JS)De=VV;else{De=PV;var ct=DV}else se=ie.nodeName,!se||se.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&Gf(ne.elementType)&&(De=XS):De=LV;if(De&&(De=De(o,ne))){wo(de,De,f,ue);break e}ct&&ct(o,ie,ne),o==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&ca(ie,"number",ie.value)}switch(ct=ne?wt(ne):window,o){case"focusin":(Ln(ct)||ct.contentEditable==="true")&&(uc=ct,a_=ne,nh=null);break;case"focusout":nh=a_=uc=null;break;case"mousedown":l_=!0;break;case"contextmenu":case"mouseup":case"dragend":l_=!1,ow(de,f,ue);break;case"selectionchange":if(BV)break;case"keydown":case"keyup":ow(de,f,ue)}var ze;if(Fs)e:{switch(o){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else At?oe(o,f)&&(Ke="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Ke="onCompositionStart");Ke&&(C&&f.locale!=="ko"&&(At||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&At&&(ze=Wf()):(Us=ue,fa="value"in Us?Us.value:Us.textContent,At=!0)),ct=Rm(ne,Ke),0<ct.length&&(Ke=new Xf(Ke,o,null,f,ue),de.push({event:Ke,listeners:ct}),ze?Ke.data=ze:(ze=Ee(f),ze!==null&&(Ke.data=ze)))),(ze=b?Pn(o,f):Tt(o,f))&&(Ke=Rm(ne,"onBeforeInput"),0<Ke.length&&(ct=new Xf("onBeforeInput","beforeinput",null,f,ue),de.push({event:ct,listeners:Ke}),ct.data=ze)),TU(de,o,ne,f,ue)}IC(de,l)})}function Ih(o,l,f){return{instance:o,listener:l,currentTarget:f}}function Rm(o,l){for(var f=l+"Capture",d=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Vl(o,f),y!=null&&d.unshift(Ih(o,y,v)),y=Vl(o,l),y!=null&&d.push(Ih(o,y,v))),o.tag===3)return d;o=o.return}return[]}function Mc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function OC(o,l,f,d,y){for(var v=l._reactName,R=[];f!==null&&f!==d;){var N=f,q=N.alternate,ne=N.stateNode;if(N=N.tag,q!==null&&q===d)break;N!==5&&N!==26&&N!==27||ne===null||(q=ne,y?(ne=Vl(f,v),ne!=null&&R.unshift(Ih(f,ne,q))):y||(ne=Vl(f,v),ne!=null&&R.push(Ih(f,ne,q)))),f=f.return}R.length!==0&&o.push({event:l,listeners:R})}var wU=/\r\n?/g,CU=/\u0000|\uFFFD/g;function MC(o){return(typeof o=="string"?o:""+o).replace(wU,`
`).replace(CU,"")}function DC(o,l){return l=MC(l),MC(o)===l}function xm(){}function Vt(o,l,f,d,y,v){switch(f){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Hi(o,""+d);break;case"className":gn(o,"class",d);break;case"tabIndex":gn(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(o,f,d);break;case"style":$f(o,d,v);break;case"data":if(l!=="object"){gn(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||f!=="href")){o.removeAttribute(f);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(f);break}d=ec(""+d),o.setAttribute(f,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(f==="formAction"?(l!=="input"&&Vt(o,l,"name",y.name,y,null),Vt(o,l,"formEncType",y.formEncType,y,null),Vt(o,l,"formMethod",y.formMethod,y,null),Vt(o,l,"formTarget",y.formTarget,y,null)):(Vt(o,l,"encType",y.encType,y,null),Vt(o,l,"method",y.method,y,null),Vt(o,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(f);break}d=ec(""+d),o.setAttribute(f,d);break;case"onClick":d!=null&&(o.onclick=xm);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}f=ec(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,""+d):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":d===!0?o.setAttribute(f,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,d):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(f,d):o.removeAttribute(f);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(f):o.setAttribute(f,d);break;case"popover":pt("beforetoggle",o),pt("toggle",o),zt(o,"popover",d);break;case"xlinkActuate":Ve(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ve(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ve(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ve(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ve(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ve(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ve(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ve(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ve(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":zt(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=e_.get(f)||f,zt(o,f,d))}}function Nv(o,l,f,d,y,v){switch(f){case"style":$f(o,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof d=="string"?Hi(o,d):(typeof d=="number"||typeof d=="bigint")&&Hi(o,""+d);break;case"onScroll":d!=null&&pt("scroll",o);break;case"onScrollEnd":d!=null&&pt("scrollend",o);break;case"onClick":d!=null&&(o.onclick=xm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!K.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),v=o[_e]||null,v=v!=null?v[f]:null,typeof v=="function"&&o.removeEventListener(l,v,y),typeof d=="function")){typeof v!="function"&&v!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(l,d,y);break e}f in o?o[f]=d:d===!0?o.setAttribute(f,""):zt(o,f,d)}}}function lr(o,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",o),pt("load",o);var d=!1,y=!1,v;for(v in f)if(f.hasOwnProperty(v)){var R=f[v];if(R!=null)switch(v){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Vt(o,l,v,R,f,null)}}y&&Vt(o,l,"srcSet",f.srcSet,f,null),d&&Vt(o,l,"src",f.src,f,null);return;case"input":pt("invalid",o);var N=v=R=y=null,q=null,ne=null;for(d in f)if(f.hasOwnProperty(d)){var ue=f[d];if(ue!=null)switch(d){case"name":y=ue;break;case"type":R=ue;break;case"checked":q=ue;break;case"defaultChecked":ne=ue;break;case"value":v=ue;break;case"defaultValue":N=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,l));break;default:Vt(o,l,d,ue,f,null)}}Dl(o,v,N,q,ne,R,y,!1),Zu(o);return;case"select":pt("invalid",o),d=R=v=null;for(y in f)if(f.hasOwnProperty(y)&&(N=f[y],N!=null))switch(y){case"value":v=N;break;case"defaultValue":R=N;break;case"multiple":d=N;default:Vt(o,l,y,N,f,null)}l=v,f=R,o.multiple=!!d,l!=null?vo(o,!!d,l,!1):f!=null&&vo(o,!!d,f,!0);return;case"textarea":pt("invalid",o),v=y=d=null;for(R in f)if(f.hasOwnProperty(R)&&(N=f[R],N!=null))switch(R){case"value":d=N;break;case"defaultValue":y=N;break;case"children":v=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:Vt(o,l,R,N,f,null)}Pl(o,d,y,v),Zu(o);return;case"option":for(q in f)if(f.hasOwnProperty(q)&&(d=f[q],d!=null))switch(q){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Vt(o,l,q,d,f,null)}return;case"dialog":pt("beforetoggle",o),pt("toggle",o),pt("cancel",o),pt("close",o);break;case"iframe":case"object":pt("load",o);break;case"video":case"audio":for(d=0;d<kh.length;d++)pt(kh[d],o);break;case"image":pt("error",o),pt("load",o);break;case"details":pt("toggle",o);break;case"embed":case"source":case"link":pt("error",o),pt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in f)if(f.hasOwnProperty(ne)&&(d=f[ne],d!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Vt(o,l,ne,d,f,null)}return;default:if(Gf(l)){for(ue in f)f.hasOwnProperty(ue)&&(d=f[ue],d!==void 0&&Nv(o,l,ue,d,f,void 0));return}}for(N in f)f.hasOwnProperty(N)&&(d=f[N],d!=null&&Vt(o,l,N,d,f,null))}function RU(o,l,f,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,R=null,N=null,q=null,ne=null,ue=null;for(se in f){var de=f[se];if(f.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":q=de;default:d.hasOwnProperty(se)||Vt(o,l,se,null,d,de)}}for(var ie in d){var se=d[ie];if(de=f[ie],d.hasOwnProperty(ie)&&(se!=null||de!=null))switch(ie){case"type":v=se;break;case"name":y=se;break;case"checked":ne=se;break;case"defaultChecked":ue=se;break;case"value":R=se;break;case"defaultValue":N=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,l));break;default:se!==de&&Vt(o,l,ie,se,d,de)}}gi(o,R,N,q,ne,ue,v,y);return;case"select":se=R=N=ie=null;for(v in f)if(q=f[v],f.hasOwnProperty(v)&&q!=null)switch(v){case"value":break;case"multiple":se=q;default:d.hasOwnProperty(v)||Vt(o,l,v,null,d,q)}for(y in d)if(v=d[y],q=f[y],d.hasOwnProperty(y)&&(v!=null||q!=null))switch(y){case"value":ie=v;break;case"defaultValue":N=v;break;case"multiple":R=v;default:v!==q&&Vt(o,l,y,v,d,q)}l=N,f=R,d=se,ie!=null?vo(o,!!f,ie,!1):!!d!=!!f&&(l!=null?vo(o,!!f,l,!0):vo(o,!!f,f?[]:"",!1));return;case"textarea":se=ie=null;for(N in f)if(y=f[N],f.hasOwnProperty(N)&&y!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Vt(o,l,N,null,d,y)}for(R in d)if(y=d[R],v=f[R],d.hasOwnProperty(R)&&(y!=null||v!=null))switch(R){case"value":ie=y;break;case"defaultValue":se=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==v&&Vt(o,l,R,y,d,v)}Pt(o,ie,se);return;case"option":for(var Qe in f)if(ie=f[Qe],f.hasOwnProperty(Qe)&&ie!=null&&!d.hasOwnProperty(Qe))switch(Qe){case"selected":o.selected=!1;break;default:Vt(o,l,Qe,null,d,ie)}for(q in d)if(ie=d[q],se=f[q],d.hasOwnProperty(q)&&ie!==se&&(ie!=null||se!=null))switch(q){case"selected":o.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:Vt(o,l,q,ie,d,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in f)ie=f[Ge],f.hasOwnProperty(Ge)&&ie!=null&&!d.hasOwnProperty(Ge)&&Vt(o,l,Ge,null,d,ie);for(ne in d)if(ie=d[ne],se=f[ne],d.hasOwnProperty(ne)&&ie!==se&&(ie!=null||se!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,l));break;default:Vt(o,l,ne,ie,d,se)}return;default:if(Gf(l)){for(var Ut in f)ie=f[Ut],f.hasOwnProperty(Ut)&&ie!==void 0&&!d.hasOwnProperty(Ut)&&Nv(o,l,Ut,void 0,d,ie);for(ue in d)ie=d[ue],se=f[ue],!d.hasOwnProperty(ue)||ie===se||ie===void 0&&se===void 0||Nv(o,l,ue,ie,d,se);return}}for(var Q in f)ie=f[Q],f.hasOwnProperty(Q)&&ie!=null&&!d.hasOwnProperty(Q)&&Vt(o,l,Q,null,d,ie);for(de in d)ie=d[de],se=f[de],!d.hasOwnProperty(de)||ie===se||ie==null&&se==null||Vt(o,l,de,ie,d,se)}var Ov=null,Mv=null;function km(o){return o.nodeType===9?o:o.ownerDocument}function PC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function LC(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Dv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Pv=null;function xU(){var o=window.event;return o&&o.type==="popstate"?o===Pv?!1:(Pv=o,!0):(Pv=null,!1)}var VC=typeof setTimeout=="function"?setTimeout:void 0,kU=typeof clearTimeout=="function"?clearTimeout:void 0,UC=typeof Promise=="function"?Promise:void 0,IU=typeof queueMicrotask=="function"?queueMicrotask:typeof UC<"u"?function(o){return UC.resolve(null).then(o).catch(NU)}:VC;function NU(o){setTimeout(function(){throw o})}function Ra(o){return o==="head"}function BC(o,l){var f=l,d=0,y=0;do{var v=f.nextSibling;if(o.removeChild(f),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(0<d&&8>d){f=d;var R=o.ownerDocument;if(f&1&&Nh(R.documentElement),f&2&&Nh(R.body),f&4)for(f=R.head,Nh(f),R=f.firstChild;R;){var N=R.nextSibling,q=R.nodeName;R[Fe]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&R.rel.toLowerCase()==="stylesheet"||f.removeChild(R),R=N}}if(y===0){o.removeChild(v),Bh(l);return}y--}else f==="$"||f==="$?"||f==="$!"?y++:d=f.charCodeAt(0)-48;else d=0;f=v}while(f);Bh(l)}function Lv(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Lv(f),xe(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function OU(o,l,f,d){for(;o.nodeType===1;){var y=f;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Fe])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Ts(o.nextSibling),o===null)break}return null}function MU(o,l,f){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Ts(o.nextSibling),o===null))return null;return o}function Vv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function DU(o,l){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")l();else{var d=function(){l(),f.removeEventListener("DOMContentLoaded",d)};f.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ts(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Uv=null;function zC(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}function jC(o,l,f){switch(l=km(f),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Nh(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);xe(o)}var Zi=new Map,FC=new Set;function Im(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Uo=X.d;X.d={f:PU,r:LU,D:VU,C:UU,L:BU,m:zU,X:FU,S:jU,M:HU};function PU(){var o=Uo.f(),l=Tm();return o||l}function LU(o){var l=it(o);l!==null&&l.tag===5&&l.type==="form"?l1(l):Uo.r(o)}var Dc=typeof document>"u"?null:document;function HC(o,l,f){var d=Dc;if(d&&typeof l=="string"&&l){var y=Sn(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),FC.has(y)||(FC.add(y),o={rel:o,crossOrigin:f,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),lr(l,"link",o),ht(l),d.head.appendChild(l)))}}function VU(o){Uo.D(o),HC("dns-prefetch",o,null)}function UU(o,l){Uo.C(o,l),HC("preconnect",o,l)}function BU(o,l,f){Uo.L(o,l,f);var d=Dc;if(d&&o&&l){var y='link[rel="preload"][as="'+Sn(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Sn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Sn(f.imageSizes)+'"]')):y+='[href="'+Sn(o)+'"]';var v=y;switch(l){case"style":v=Pc(o);break;case"script":v=Lc(o)}Zi.has(v)||(o=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:o,as:l},f),Zi.set(v,o),d.querySelector(y)!==null||l==="style"&&d.querySelector(Oh(v))||l==="script"&&d.querySelector(Mh(v))||(l=d.createElement("link"),lr(l,"link",o),ht(l),d.head.appendChild(l)))}}function zU(o,l){Uo.m(o,l);var f=Dc;if(f&&o){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Sn(d)+'"][href="'+Sn(o)+'"]',v=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Lc(o)}if(!Zi.has(v)&&(o=p({rel:"modulepreload",href:o},l),Zi.set(v,o),f.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Mh(v)))return}d=f.createElement("link"),lr(d,"link",o),ht(d),f.head.appendChild(d)}}}function jU(o,l,f){Uo.S(o,l,f);var d=Dc;if(d&&o){var y=_t(d).hoistableStyles,v=Pc(o);l=l||"default";var R=y.get(v);if(!R){var N={loading:0,preload:null};if(R=d.querySelector(Oh(v)))N.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},f),(f=Zi.get(v))&&Bv(o,f);var q=R=d.createElement("link");ht(q),lr(q,"link",o),q._p=new Promise(function(ne,ue){q.onload=ne,q.onerror=ue}),q.addEventListener("load",function(){N.loading|=1}),q.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Nm(R,l,d)}R={type:"stylesheet",instance:R,count:1,state:N},y.set(v,R)}}}function FU(o,l){Uo.X(o,l);var f=Dc;if(f&&o){var d=_t(f).hoistableScripts,y=Lc(o),v=d.get(y);v||(v=f.querySelector(Mh(y)),v||(o=p({src:o,async:!0},l),(l=Zi.get(y))&&zv(o,l),v=f.createElement("script"),ht(v),lr(v,"link",o),f.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function HU(o,l){Uo.M(o,l);var f=Dc;if(f&&o){var d=_t(f).hoistableScripts,y=Lc(o),v=d.get(y);v||(v=f.querySelector(Mh(y)),v||(o=p({src:o,async:!0,type:"module"},l),(l=Zi.get(y))&&zv(o,l),v=f.createElement("script"),ht(v),lr(v,"link",o),f.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function qC(o,l,f,d){var y=(y=Le.current)?Im(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Pc(f.href),f=_t(y).hoistableStyles,d=f.get(l),d||(d={type:"style",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Pc(f.href);var v=_t(y).hoistableStyles,R=v.get(o);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,R),(v=y.querySelector(Oh(o)))&&!v._p&&(R.instance=v,R.state.loading=5),Zi.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Zi.set(o,f),v||qU(y,o,f,R.state))),l&&d===null)throw Error(r(528,""));return R}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Lc(f),f=_t(y).hoistableScripts,d=f.get(l),d||(d={type:"script",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Pc(o){return'href="'+Sn(o)+'"'}function Oh(o){return'link[rel="stylesheet"]['+o+"]"}function $C(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function qU(o,l,f,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),lr(l,"link",f),ht(l),o.head.appendChild(l))}function Lc(o){return'[src="'+Sn(o)+'"]'}function Mh(o){return"script[async]"+o}function GC(o,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+Sn(f.href)+'"]');if(d)return l.instance=d,ht(d),d;var y=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),ht(d),lr(d,"style",y),Nm(d,f.precedence,o),l.instance=d;case"stylesheet":y=Pc(f.href);var v=o.querySelector(Oh(y));if(v)return l.state.loading|=4,l.instance=v,ht(v),v;d=$C(f),(y=Zi.get(y))&&Bv(d,y),v=(o.ownerDocument||o).createElement("link"),ht(v);var R=v;return R._p=new Promise(function(N,q){R.onload=N,R.onerror=q}),lr(v,"link",d),l.state.loading|=4,Nm(v,f.precedence,o),l.instance=v;case"script":return v=Lc(f.src),(y=o.querySelector(Mh(v)))?(l.instance=y,ht(y),y):(d=f,(y=Zi.get(v))&&(d=p({},f),zv(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),ht(y),lr(y,"link",d),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Nm(d,f.precedence,o));return l.instance}function Nm(o,l,f){for(var d=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,v=y,R=0;R<d.length;R++){var N=d[R];if(N.dataset.precedence===l)v=N;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(o,l.firstChild))}function Bv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function zv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Om=null;function KC(o,l,f){if(Om===null){var d=new Map,y=Om=new Map;y.set(f,d)}else y=Om,d=y.get(f),d||(d=new Map,y.set(f,d));if(d.has(o))return d;for(d.set(o,null),f=f.getElementsByTagName(o),y=0;y<f.length;y++){var v=f[y];if(!(v[Fe]||v[he]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var R=v.getAttribute(l)||"";R=o+R;var N=d.get(R);N?N.push(v):d.set(R,[v])}}return d}function WC(o,l,f){o=o.ownerDocument||o,o.head.insertBefore(f,l==="title"?o.querySelector("head > title"):null)}function $U(o,l,f){if(f===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function YC(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Dh=null;function GU(){}function KU(o,l,f){if(Dh===null)throw Error(r(475));var d=Dh;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Pc(f.href),v=o.querySelector(Oh(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Mm.bind(d),o.then(d,d)),l.state.loading|=4,l.instance=v,ht(v);return}v=o.ownerDocument||o,f=$C(f),(y=Zi.get(y))&&Bv(f,y),v=v.createElement("link"),ht(v);var R=v;R._p=new Promise(function(N,q){R.onload=N,R.onerror=q}),lr(v,"link",f),l.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=Mm.bind(d),o.addEventListener("load",l),o.addEventListener("error",l))}}function WU(){if(Dh===null)throw Error(r(475));var o=Dh;return o.stylesheets&&o.count===0&&jv(o,o.stylesheets),0<o.count?function(l){var f=setTimeout(function(){if(o.stylesheets&&jv(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(f)}}:null}function Mm(){if(this.count--,this.count===0){if(this.stylesheets)jv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Dm=null;function jv(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Dm=new Map,l.forEach(YU,o),Dm=null,Mm.call(o))}function YU(o,l){if(!(l.state.loading&4)){var f=Dm.get(o);if(f)var d=f.get(null);else{f=new Map,Dm.set(o,f);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var R=y[v];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(f.set(R.dataset.precedence,R),d=R)}d&&f.set(null,d)}y=l.instance,R=y.getAttribute("data-precedence"),v=f.get(R)||d,v===d&&f.set(null,y),f.set(R,y),this.count++,d=Mm.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var Ph={$$typeof:z,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function QU(o,l,f,d,y,v,R,N){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function QC(o,l,f,d,y,v,R,N,q,ne,ue,de){return o=new QU(o,l,f,R,N,q,ne,de),l=1,v===!0&&(l|=24),v=_i(3,null,null,l),o.current=v,v.stateNode=o,l=E_(),l.refCount++,o.pooledCache=l,l.refCount++,v.memoizedState={element:d,isDehydrated:f,cache:l},C_(v),o}function XC(o){return o?(o=dc,o):dc}function JC(o,l,f,d,y,v){y=XC(y),d.context===null?d.context=y:d.pendingContext=y,d=pa(l),d.payload={element:f},v=v===void 0?null:v,v!==null&&(d.callback=v),f=ma(o,d,l),f!==null&&(bi(f,o,l),fh(f,o,l))}function ZC(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function Fv(o,l){ZC(o,l),(o=o.alternate)&&ZC(o,l)}function eR(o){if(o.tag===13){var l=hc(o,67108864);l!==null&&bi(l,o,67108864),Fv(o,67108864)}}var Pm=!0;function XU(o,l,f,d){var y=Y.T;Y.T=null;var v=X.p;try{X.p=2,Hv(o,l,f,d)}finally{X.p=v,Y.T=y}}function JU(o,l,f,d){var y=Y.T;Y.T=null;var v=X.p;try{X.p=8,Hv(o,l,f,d)}finally{X.p=v,Y.T=y}}function Hv(o,l,f,d){if(Pm){var y=qv(d);if(y===null)Iv(o,l,d,Lm,f),nR(o,d);else if(eB(y,o,l,f,d))d.stopPropagation();else if(nR(o,d),l&4&&-1<ZU.indexOf(o)){for(;y!==null;){var v=it(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var R=bn(v.pendingLanes);if(R!==0){var N=v;for(N.pendingLanes|=2,N.entangledLanes|=2;R;){var q=1<<31-Zt(R);N.entanglements[1]|=q,R&=~q}Ws(v),(Mt&6)===0&&(vm=an()+500,xh(0))}}break;case 13:N=hc(v,2),N!==null&&bi(N,v,2),Tm(),Fv(v,2)}if(v=qv(d),v===null&&Iv(o,l,d,Lm,f),v===y)break;y=v}y!==null&&d.stopPropagation()}else Iv(o,l,d,null,f)}}function qv(o){return o=qi(o),$v(o)}var Lm=null;function $v(o){if(Lm=null,o=He(o),o!==null){var l=s(o);if(l===null)o=null;else{var f=l.tag;if(f===13){if(o=a(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Lm=o,null}function tR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ns()){case Bi:return 2;case ys:return 8;case zi:case pi:return 32;case gr:return 268435456;default:return 32}default:return 32}}var Gv=!1,xa=null,ka=null,Ia=null,Lh=new Map,Vh=new Map,Na=[],ZU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nR(o,l){switch(o){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Lh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(l.pointerId)}}function Uh(o,l,f,d,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:l,domEventName:f,eventSystemFlags:d,nativeEvent:v,targetContainers:[y]},l!==null&&(l=it(l),l!==null&&eR(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function eB(o,l,f,d,y){switch(l){case"focusin":return xa=Uh(xa,o,l,f,d,y),!0;case"dragenter":return ka=Uh(ka,o,l,f,d,y),!0;case"mouseover":return Ia=Uh(Ia,o,l,f,d,y),!0;case"pointerover":var v=y.pointerId;return Lh.set(v,Uh(Lh.get(v)||null,o,l,f,d,y)),!0;case"gotpointercapture":return v=y.pointerId,Vh.set(v,Uh(Vh.get(v)||null,o,l,f,d,y)),!0}return!1}function rR(o){var l=He(o.target);if(l!==null){var f=s(l);if(f!==null){if(l=f.tag,l===13){if(l=a(f),l!==null){o.blockedOn=l,J(o.priority,function(){if(f.tag===13){var d=Ei();d=rr(d);var y=hc(f,d);y!==null&&bi(y,f,d),Fv(f,d)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Vm(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=qv(o.nativeEvent);if(f===null){f=o.nativeEvent;var d=new f.constructor(f.type,f);Ao=d,f.target.dispatchEvent(d),Ao=null}else return l=it(f),l!==null&&eR(l),o.blockedOn=f,!1;l.shift()}return!0}function iR(o,l,f){Vm(o)&&f.delete(l)}function tB(){Gv=!1,xa!==null&&Vm(xa)&&(xa=null),ka!==null&&Vm(ka)&&(ka=null),Ia!==null&&Vm(Ia)&&(Ia=null),Lh.forEach(iR),Vh.forEach(iR)}function Um(o,l){o.blockedOn===l&&(o.blockedOn=null,Gv||(Gv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tB)))}var Bm=null;function sR(o){Bm!==o&&(Bm=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bm===o&&(Bm=null);for(var l=0;l<o.length;l+=3){var f=o[l],d=o[l+1],y=o[l+2];if(typeof d!="function"){if($v(d||f)===null)continue;break}var v=it(f);v!==null&&(o.splice(l,3),l-=3,$_(v,{pending:!0,data:y,method:f.method,action:d},d,y))}}))}function Bh(o){function l(q){return Um(q,o)}xa!==null&&Um(xa,o),ka!==null&&Um(ka,o),Ia!==null&&Um(Ia,o),Lh.forEach(l),Vh.forEach(l);for(var f=0;f<Na.length;f++){var d=Na[f];d.blockedOn===o&&(d.blockedOn=null)}for(;0<Na.length&&(f=Na[0],f.blockedOn===null);)rR(f),f.blockedOn===null&&Na.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(d=0;d<f.length;d+=3){var y=f[d],v=f[d+1],R=y[_e]||null;if(typeof v=="function")R||sR(f);else if(R){var N=null;if(v&&v.hasAttribute("formAction")){if(y=v,R=v[_e]||null)N=R.formAction;else if($v(y)!==null)continue}else N=R.action;typeof N=="function"?f[d+1]=N:(f.splice(d,3),d-=3),sR(f)}}}function Kv(o){this._internalRoot=o}zm.prototype.render=Kv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,d=Ei();JC(f,d,o,l,null,null)},zm.prototype.unmount=Kv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;JC(o.current,2,null,o,null,null),Tm(),l[Se]=null}};function zm(o){this._internalRoot=o}zm.prototype.unstable_scheduleHydration=function(o){if(o){var l=G();o={blockedOn:null,target:o,priority:l};for(var f=0;f<Na.length&&l!==0&&l<Na[f].priority;f++);Na.splice(f,0,o),f===0&&rR(o)}};var oR=e.version;if(oR!=="19.1.0")throw Error(r(527,oR,"19.1.0"));X.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=c(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var nB={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{ut=jm.inject(nB),et=jm}catch{}}return jh.createRoot=function(o,l){if(!i(o))throw Error(r(299));var f=!1,d="",y=E1,v=b1,R=S1,N=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(N=l.unstable_transitionCallbacks)),l=QC(o,1,!1,null,null,f,d,y,v,R,N,null),o[Se]=l.current,kv(o),new Kv(l)},jh.hydrateRoot=function(o,l,f){if(!i(o))throw Error(r(299));var d=!1,y="",v=E1,R=b1,N=S1,q=null,ne=null;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(v=f.onUncaughtError),f.onCaughtError!==void 0&&(R=f.onCaughtError),f.onRecoverableError!==void 0&&(N=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(q=f.unstable_transitionCallbacks),f.formState!==void 0&&(ne=f.formState)),l=QC(o,1,!0,l,f??null,d,y,v,R,N,q,ne),l.context=XC(null),f=l.current,d=Ei(),d=rr(d),y=pa(d),y.callback=null,ma(f,y,d),f=d,l.current.lanes=f,tr(l,f),Ws(l),o[Se]=l.current,kv(o),new zm(l)},jh.version="19.1.0",jh}var gR;function fB(){if(gR)return Qv.exports;gR=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qv.exports=cB(),Qv.exports}var hB=fB(),Fh={},yR;function dB(){if(yR)return Fh;yR=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.parse=a,Fh.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function a(_,A){const T=new s,E=_.length;if(E<2)return T;const S=(A==null?void 0:A.decode)||p;let x=0;do{const P=_.indexOf("=",x);if(P===-1)break;const z=_.indexOf(";",x),H=z===-1?E:z;if(P>H){x=_.lastIndexOf(";",P-1)+1;continue}const V=u(_,x,P),D=c(_,P,V),O=_.slice(V,D);if(T[O]===void 0){let I=u(_,P+1,H),k=c(_,H,I);const B=S(_.slice(I,k));T[O]=B}x=H+1}while(x<E);return T}function u(_,A,T){do{const E=_.charCodeAt(A);if(E!==32&&E!==9)return A}while(++A<T);return T}function c(_,A,T){for(;A>T;){const E=_.charCodeAt(--A);if(E!==32&&E!==9)return A+1}return T}function h(_,A,T){const E=(T==null?void 0:T.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const S=E(A);if(!e.test(S))throw new TypeError(`argument val is invalid: ${A}`);let x=_+"="+S;if(!T)return x;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);x+="; Max-Age="+T.maxAge}if(T.domain){if(!t.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);x+="; Domain="+T.domain}if(T.path){if(!r.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);x+="; Path="+T.path}if(T.expires){if(!g(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);x+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(x+="; HttpOnly"),T.secure&&(x+="; Secure"),T.partitioned&&(x+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return x}function p(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function g(_){return i.call(_)==="[object Date]"}return Fh}dB();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xN=n=>{throw TypeError(n)},pB=(n,e,t)=>e.has(n)||xN("Cannot "+t),eA=(n,e,t)=>(pB(n,e,"read from private field"),t?t.call(n):e.get(n)),mB=(n,e,t)=>e.has(n)?xN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),_R="popstate";function gB(n={}){function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Pd("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:dl(i)}return _B(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Tn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yB(){return Math.random().toString(36).substring(2,10)}function vR(n,e){return{usr:n.state,key:n.key,idx:e}}function Pd(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Sl(e):e,state:t,key:e&&e.key||r||yB()}}function dl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Sl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function _B(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",c=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function g(){u="POP";let S=p(),x=S==null?null:S-h;h=S,c&&c({action:u,location:E.location,delta:x})}function _(S,x){u="PUSH";let P=Pd(E.location,S,x);h=p()+1;let z=vR(P,h),H=E.createHref(P);try{a.pushState(z,"",H)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(H)}s&&c&&c({action:u,location:E.location,delta:1})}function A(S,x){u="REPLACE";let P=Pd(E.location,S,x);h=p();let z=vR(P,h),H=E.createHref(P);a.replaceState(z,"",H),s&&c&&c({action:u,location:E.location,delta:0})}function T(S){let x=i.location.origin!=="null"?i.location.origin:i.location.href,P=typeof S=="string"?S:dl(S);return P=P.replace(/ $/,"%20"),ft(x,`No window.location.(origin|href) available to create URL for href: ${P}`),new URL(P,x)}let E={get action(){return u},get location(){return n(i,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(_R,g),c=S,()=>{i.removeEventListener(_R,g),c=null}},createHref(S){return e(i,S)},createURL:T,encodeLocation(S){let x=T(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:_,replace:A,go(S){return a.go(S)}};return E}var nd,AR=class{constructor(n){if(mB(this,nd,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(eA(this,nd).has(n))return eA(this,nd).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){eA(this,nd).set(n,e)}};nd=new WeakMap;var vB=new Set(["lazy","caseSensitive","path","id","index","children"]);function AB(n){return vB.has(n)}var TB=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function EB(n){return TB.has(n)}function bB(n){return n.index===!0}function Lg(n,e,t=[],r={}){return n.map((i,s)=>{let a=[...t,String(s)],u=typeof i.id=="string"?i.id:a.join("-");if(ft(i.index!==!0||!i.children,"Cannot specify children on an index route"),ft(!r[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),bB(i)){let c={...i,...e(i),id:u};return r[u]=c,c}else{let c={...i,...e(i),id:u,children:void 0};return r[u]=c,i.children&&(c.children=Lg(i.children,e,a,r)),c}})}function za(n,e,t="/"){return fg(n,e,t,!1)}function fg(n,e,t,r){let i=typeof e=="string"?Sl(e):e,s=cs(i.pathname||"/",t);if(s==null)return null;let a=kN(n);wB(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let h=LB(s);u=DB(a[c],h,r)}return u}function SB(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function kN(n,e=[],t=[],r=""){let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let h=io([r,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(ft(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),kN(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:OB(h,s.index),routesMeta:p})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of IN(s.path))i(s,a,c)}),e}function IN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=IN(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function wB(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:MB(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CB=/^:[\w-]+$/,RB=3,xB=2,kB=1,IB=10,NB=-2,TR=n=>n==="*";function OB(n,e){let t=n.split("/"),r=t.length;return t.some(TR)&&(r+=NB),e&&(r+=xB),t.filter(i=>!TR(i)).reduce((i,s)=>i+(CB.test(s)?RB:s===""?kB:IB),r)}function MB(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function DB(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=Vg({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),_=c.route;if(!g&&h&&t&&!r[r.length-1].route.index&&(g=Vg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:io([s,g.pathname]),pathnameBase:BB(io([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=io([s,g.pathnameBase]))}return a}function Vg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PB(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let T=u[_]||"";a=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const A=u[_];return g&&!A?h[p]=void 0:h[p]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function PB(n,e=!1,t=!0){Tn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function LB(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function cs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function VB(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Sl(n):n;return{pathname:t?t.startsWith("/")?t:UB(t,e):e,search:zB(r),hash:jB(i)}}function UB(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function tA(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function r0(n){let e=NN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function i0(n,e,t,r=!1){let i;typeof n=="string"?i=Sl(n):(i={...n},ft(!i.pathname||!i.pathname.includes("?"),tA("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),tA("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),tA("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?e[g]:"/"}let c=VB(i,u),h=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}var io=n=>n.join("/").replace(/\/\/+/g,"/"),BB=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zB=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jB=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Ug=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Ld(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ON=["POST","PUT","PATCH","DELETE"],FB=new Set(ON),HB=["GET",...ON],qB=new Set(HB),$B=new Set([301,302,303,307,308]),GB=new Set([307,308]),nA={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},KB={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Hh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},VE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WB=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),MN="remix-router-transitions",DN=Symbol("ResetLoaderData");function YB(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ft(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],i=n.mapRouteProperties||WB,s={},a=Lg(n.routes,i,void 0,s),u,c=n.basename||"/",h=n.dataStrategy||ez,p={unstable_middleware:!1,...n.future},g=null,_=new Set,A=null,T=null,E=null,S=n.hydrationData!=null,x=za(a,n.history.location,c),P=!1,z=null;if(x==null&&!n.patchRoutesOnNavigation){let G=rs(404,{pathname:n.history.location.pathname}),{matches:J,route:ee}=MR(a);x=J,z={[ee.id]:G}}x&&!n.hydrationData&&nr(x,a,n.history.location.pathname).active&&(x=null);let H;if(x)if(x.some(G=>G.route.lazy))H=!1;else if(!x.some(G=>G.route.loader))H=!0;else{let G=n.hydrationData?n.hydrationData.loaderData:null,J=n.hydrationData?n.hydrationData.errors:null;if(J){let ee=x.findIndex(he=>J[he.route.id]!==void 0);H=x.slice(0,ee+1).every(he=>!uT(he.route,G,J))}else H=x.every(ee=>!uT(ee.route,G,J))}else{H=!1,x=[];let G=nr(null,a,n.history.location.pathname);G.active&&G.matches&&(P=!0,x=G.matches)}let V,D={historyAction:n.history.action,location:n.history.location,matches:x,initialized:H,navigation:nA,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||z,fetchers:new Map,blockers:new Map},O="POP",I=!1,k,B=!1,U=new Map,F=null,L=!1,Te=!1,be=new Set,Y=new Map,X=0,le=-1,Ne=new Map,j=new Set,re=new Map,ce=new Map,ae=new Set,we=new Map,Re,Le=null;function $t(){if(g=n.history.listen(({action:G,location:J,delta:ee})=>{if(Re){Re(),Re=void 0;return}Tn(we.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=Ms({currentLocation:D.location,nextLocation:J,historyAction:G});if(he&&ee!=null){let _e=new Promise(Se=>{Re=Se});n.history.go(ee*-1),yr(he,{state:"blocked",location:J,proceed(){yr(he,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),_e.then(()=>n.history.go(ee))},reset(){let Se=new Map(D.blockers);Se.set(he,Hh),Nt({blockers:Se})}});return}return Jt(G,J)}),t){fz(e,U);let G=()=>hz(e,U);e.addEventListener("pagehide",G),F=()=>e.removeEventListener("pagehide",G)}return D.initialized||Jt("POP",D.location,{initialHydration:!0}),V}function St(){g&&g(),F&&F(),_.clear(),k&&k.abort(),D.fetchers.forEach((G,J)=>Zt(J)),D.blockers.forEach((G,J)=>mi(J))}function Wt(G){return _.add(G),()=>_.delete(G)}function Nt(G,J={}){D={...D,...G};let ee=[],he=[];D.fetchers.forEach((_e,Se)=>{_e.state==="idle"&&(ae.has(Se)?ee.push(Se):he.push(Se))}),ae.forEach(_e=>{!D.fetchers.has(_e)&&!Y.has(_e)&&ee.push(_e)}),[..._].forEach(_e=>_e(D,{deletedFetchers:ee,viewTransitionOpts:J.viewTransitionOpts,flushSync:J.flushSync===!0})),ee.forEach(_e=>Zt(_e)),he.forEach(_e=>D.fetchers.delete(_e))}function Mn(G,J,{flushSync:ee}={}){var Ue,Fe;let he=D.actionData!=null&&D.navigation.formMethod!=null&&wi(D.navigation.formMethod)&&D.navigation.state==="loading"&&((Ue=G.state)==null?void 0:Ue._isRedirect)!==!0,_e;J.actionData?Object.keys(J.actionData).length>0?_e=J.actionData:_e=null:he?_e=D.actionData:_e=null;let Se=J.loaderData?NR(D.loaderData,J.loaderData,J.matches||[],J.errors):D.loaderData,Be=D.blockers;Be.size>0&&(Be=new Map(Be),Be.forEach((xe,He)=>Be.set(He,Hh)));let Ie=I===!0||D.navigation.formMethod!=null&&wi(D.navigation.formMethod)&&((Fe=G.state)==null?void 0:Fe._isRedirect)!==!0;u&&(a=u,u=void 0),L||O==="POP"||(O==="PUSH"?n.history.push(G,G.state):O==="REPLACE"&&n.history.replace(G,G.state));let Me;if(O==="POP"){let xe=U.get(D.location.pathname);xe&&xe.has(G.pathname)?Me={currentLocation:D.location,nextLocation:G}:U.has(G.pathname)&&(Me={currentLocation:G,nextLocation:D.location})}else if(B){let xe=U.get(D.location.pathname);xe?xe.add(G.pathname):(xe=new Set([G.pathname]),U.set(D.location.pathname,xe)),Me={currentLocation:D.location,nextLocation:G}}Nt({...J,actionData:_e,loaderData:Se,historyAction:O,location:G,initialized:!0,navigation:nA,revalidation:"idle",restoreScrollPosition:Ds(G,J.matches||D.matches),preventScrollReset:Ie,blockers:Be},{viewTransitionOpts:Me,flushSync:ee===!0}),O="POP",I=!1,B=!1,L=!1,Te=!1,Le==null||Le.resolve(),Le=null}async function er(G,J){if(typeof G=="number"){n.history.go(G);return}let ee=lT(D.location,D.matches,c,G,J==null?void 0:J.fromRouteId,J==null?void 0:J.relative),{path:he,submission:_e,error:Se}=ER(!1,ee,J),Be=D.location,Ie=Pd(D.location,he,J&&J.state);Ie={...Ie,...n.history.encodeLocation(Ie)};let Me=J&&J.replace!=null?J.replace:void 0,Ue="PUSH";Me===!0?Ue="REPLACE":Me===!1||_e!=null&&wi(_e.formMethod)&&_e.formAction===D.location.pathname+D.location.search&&(Ue="REPLACE");let Fe=J&&"preventScrollReset"in J?J.preventScrollReset===!0:void 0,xe=(J&&J.flushSync)===!0,He=Ms({currentLocation:Be,nextLocation:Ie,historyAction:Ue});if(He){yr(He,{state:"blocked",location:Ie,proceed(){yr(He,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),er(G,J)},reset(){let it=new Map(D.blockers);it.set(He,Hh),Nt({blockers:it})}});return}await Jt(Ue,Ie,{submission:_e,pendingError:Se,preventScrollReset:Fe,replace:J&&J.replace,enableViewTransition:J&&J.viewTransition,flushSync:xe})}function di(){Le||(Le=dz()),Mr(),Nt({revalidation:"loading"});let G=Le.promise;return D.navigation.state==="submitting"?G:D.navigation.state==="idle"?(Jt(D.historyAction,D.location,{startUninterruptedRevalidation:!0}),G):(Jt(O||D.historyAction,D.navigation.location,{overrideNavigation:D.navigation,enableViewTransition:B===!0}),G)}async function Jt(G,J,ee){k&&k.abort(),k=null,O=G,L=(ee&&ee.startUninterruptedRevalidation)===!0,tr(D.location,D.matches),I=(ee&&ee.preventScrollReset)===!0,B=(ee&&ee.enableViewTransition)===!0;let he=u||a,_e=ee&&ee.overrideNavigation,Se=ee!=null&&ee.initialHydration&&D.matches&&D.matches.length>0&&!P?D.matches:za(he,J,c),Be=(ee&&ee.flushSync)===!0;if(Se&&D.initialized&&!Te&&oz(D.location,J)&&!(ee&&ee.submission&&wi(ee.submission.formMethod))){Mn(J,{matches:Se},{flushSync:Be});return}let Ie=nr(Se,he,J.pathname);if(Ie.active&&Ie.matches&&(Se=Ie.matches),!Se){let{error:_t,notFoundMatches:ht,route:ve}=Wr(J.pathname);Mn(J,{matches:ht,loaderData:{},errors:{[ve.id]:_t}},{flushSync:Be});return}k=new AbortController;let Me=zc(n.history,J,k.signal,ee&&ee.submission),Ue=new AR(n.unstable_getContext?await n.unstable_getContext():void 0),Fe;if(ee&&ee.pendingError)Fe=[fu(Se).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&wi(ee.submission.formMethod)){let _t=await gs(Me,J,ee.submission,Se,Ue,Ie.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:Be});if(_t.shortCircuited)return;if(_t.pendingActionResult){let[ht,ve]=_t.pendingActionResult;if(Si(ve)&&Ld(ve.error)&&ve.error.status===404){k=null,Mn(J,{matches:_t.matches,loaderData:{},errors:{[ht]:ve.error}});return}}Se=_t.matches||Se,Fe=_t.pendingActionResult,_e=rA(J,ee.submission),Be=!1,Ie.active=!1,Me=zc(n.history,Me.url,Me.signal)}let{shortCircuited:xe,matches:He,loaderData:it,errors:wt}=await Is(Me,J,Se,Ue,Ie.active,_e,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,Be,Fe);xe||(k=null,Mn(J,{matches:He||Se,...OR(Fe),loaderData:it,errors:wt}))}async function gs(G,J,ee,he,_e,Se,Be,Ie={}){Mr();let Me=uz(J,ee);if(Nt({navigation:Me},{flushSync:Ie.flushSync===!0}),Se){let xe=await Ot(he,J.pathname,G.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){let He=fu(xe.partialMatches).route.id;return{matches:xe.partialMatches,pendingActionResult:[He,{type:"error",error:xe.error}]}}else if(xe.matches)he=xe.matches;else{let{notFoundMatches:He,error:it,route:wt}=Wr(J.pathname);return{matches:He,pendingActionResult:[wt.id,{type:"error",error:it}]}}}let Ue,Fe=rd(he,J);if(!Fe.route.action&&!Fe.route.lazy)Ue={type:"error",error:rs(405,{method:G.method,pathname:J.pathname,routeId:Fe.route.id})};else{let xe=Jc(i,s,G,he,Fe,Be?[]:r,_e),He=await gr(G,xe,_e,null);if(Ue=He[Fe.route.id],!Ue){for(let it of he)if(He[it.route.id]){Ue=He[it.route.id];break}}if(G.signal.aborted)return{shortCircuited:!0}}if(mu(Ue)){let xe;return Ie&&Ie.replace!=null?xe=Ie.replace:xe=xR(Ue.response.headers.get("Location"),new URL(G.url),c)===D.location.pathname+D.location.search,await pi(G,Ue,!0,{submission:ee,replace:xe}),{shortCircuited:!0}}if(Si(Ue)){let xe=fu(he,Fe.route.id);return(Ie&&Ie.replace)!==!0&&(O="PUSH"),{matches:he,pendingActionResult:[xe.route.id,Ue,Fe.route.id]}}return{matches:he,pendingActionResult:[Fe.route.id,Ue]}}async function Is(G,J,ee,he,_e,Se,Be,Ie,Me,Ue,Fe,xe){let He=Se||rA(J,Be),it=Be||Ie||PR(He),wt=!L&&!Ue;if(_e){if(wt){let tn=an(xe);Nt({navigation:He,...tn!==void 0?{actionData:tn}:{}},{flushSync:Fe})}let Ve=await Ot(ee,J.pathname,G.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){let tn=fu(Ve.partialMatches).route.id;return{matches:Ve.partialMatches,loaderData:{},errors:{[tn]:Ve.error}}}else if(Ve.matches)ee=Ve.matches;else{let{error:tn,notFoundMatches:_r,route:Qr}=Wr(J.pathname);return{matches:_r,loaderData:{},errors:{[Qr.id]:tn}}}}let _t=u||a,{dsMatches:ht,revalidatingFetchers:ve}=bR(G,he,i,s,n.history,D,ee,it,J,Ue?[]:r,Ue===!0,Te,be,ae,re,j,_t,c,xe);if(le=++X,!n.dataStrategy&&!ht.some(Ve=>Ve.shouldLoad)&&ve.length===0){let Ve=Lr();return Mn(J,{matches:ee,loaderData:{},errors:xe&&Si(xe[1])?{[xe[0]]:xe[1].error}:null,...OR(xe),...Ve?{fetchers:new Map(D.fetchers)}:{}},{flushSync:Fe}),{shortCircuited:!0}}if(wt){let Ve={};if(!_e){Ve.navigation=He;let tn=an(xe);tn!==void 0&&(Ve.actionData=tn)}ve.length>0&&(Ve.fetchers=Ns(ve)),Nt(Ve,{flushSync:Fe})}ve.forEach(Ve=>{Dr(Ve.key),Ve.controller&&Y.set(Ve.key,Ve.controller)});let K=()=>ve.forEach(Ve=>Dr(Ve.key));k&&k.signal.addEventListener("abort",K);let{loaderResults:me,fetcherResults:Ce}=await Kr(ht,ve,G,he);if(G.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",K),ve.forEach(Ve=>Y.delete(Ve.key));let tt=Fm(me);if(tt)return await pi(G,tt.result,!0,{replace:Me}),{shortCircuited:!0};if(tt=Fm(Ce),tt)return j.add(tt.key),await pi(G,tt.result,!0,{replace:Me}),{shortCircuited:!0};let{loaderData:Bt,errors:Rt}=IR(D,ee,me,xe,ve,Ce);Ue&&D.errors&&(Rt={...D.errors,...Rt});let en=Lr(),zt=En(le),gn=en||zt||ve.length>0;return{matches:ee,loaderData:Bt,errors:Rt,...gn?{fetchers:new Map(D.fetchers)}:{}}}function an(G){if(G&&!Si(G[1]))return{[G[0]]:G[1].data};if(D.actionData)return Object.keys(D.actionData).length===0?null:D.actionData}function Ns(G){return G.forEach(J=>{let ee=D.fetchers.get(J.key),he=qh(void 0,ee?ee.data:void 0);D.fetchers.set(J.key,he)}),new Map(D.fetchers)}async function Bi(G,J,ee,he){Dr(G);let _e=(he&&he.flushSync)===!0,Se=u||a,Be=lT(D.location,D.matches,c,ee,J,he==null?void 0:he.relative),Ie=za(Se,Be,c),Me=nr(Ie,Se,Be);if(Me.active&&Me.matches&&(Ie=Me.matches),!Ie){et(G,J,rs(404,{pathname:Be}),{flushSync:_e});return}let{path:Ue,submission:Fe,error:xe}=ER(!0,Be,he);if(xe){et(G,J,xe,{flushSync:_e});return}let He=rd(Ie,Ue),it=new AR(n.unstable_getContext?await n.unstable_getContext():void 0),wt=(he&&he.preventScrollReset)===!0;if(Fe&&wi(Fe.formMethod)){await ys(G,J,Ue,He,Ie,it,Me.active,_e,wt,Fe);return}re.set(G,{routeId:J,path:Ue}),await zi(G,J,Ue,He,Ie,it,Me.active,_e,wt,Fe)}async function ys(G,J,ee,he,_e,Se,Be,Ie,Me,Ue){Mr(),re.delete(G);function Fe(jt){if(!jt.route.action&&!jt.route.lazy){let Fi=rs(405,{method:Ue.formMethod,pathname:ee,routeId:J});return et(G,J,Fi,{flushSync:Ie}),!0}return!1}if(!Be&&Fe(he))return;let xe=D.fetchers.get(G);ut(G,cz(Ue,xe),{flushSync:Ie});let He=new AbortController,it=zc(n.history,ee,He.signal,Ue);if(Be){let jt=await Ot(_e,ee,it.signal,G);if(jt.type==="aborted")return;if(jt.type==="error"){et(G,J,jt.error,{flushSync:Ie});return}else if(jt.matches){if(_e=jt.matches,he=rd(_e,ee),Fe(he))return}else{et(G,J,rs(404,{pathname:ee}),{flushSync:Ie});return}}Y.set(G,He);let wt=X,_t=Jc(i,s,it,_e,he,r,Se),ve=(await gr(it,_t,Se,G))[he.route.id];if(it.signal.aborted){Y.get(G)===He&&Y.delete(G);return}if(ae.has(G)){if(mu(ve)||Si(ve)){ut(G,Pa(void 0));return}}else{if(mu(ve))if(Y.delete(G),le>wt){ut(G,Pa(void 0));return}else return j.add(G),ut(G,qh(Ue)),pi(it,ve,!1,{fetcherSubmission:Ue,preventScrollReset:Me});if(Si(ve)){et(G,J,ve.error);return}}let K=D.navigation.location||D.location,me=zc(n.history,K,He.signal),Ce=u||a,tt=D.navigation.state!=="idle"?za(Ce,D.navigation.location,c):D.matches;ft(tt,"Didn't find any matches after fetcher action");let Bt=++X;Ne.set(G,Bt);let Rt=qh(Ue,ve.data);D.fetchers.set(G,Rt);let{dsMatches:en,revalidatingFetchers:zt}=bR(me,Se,i,s,n.history,D,tt,Ue,K,r,!1,Te,be,ae,re,j,Ce,c,[he.route.id,ve]);zt.filter(jt=>jt.key!==G).forEach(jt=>{let Fi=jt.key,_o=D.fetchers.get(Fi),ir=qh(void 0,_o?_o.data:void 0);D.fetchers.set(Fi,ir),Dr(Fi),jt.controller&&Y.set(Fi,jt.controller)}),Nt({fetchers:new Map(D.fetchers)});let gn=()=>zt.forEach(jt=>Dr(jt.key));He.signal.addEventListener("abort",gn);let{loaderResults:Ve,fetcherResults:tn}=await Kr(en,zt,me,Se);if(He.signal.aborted)return;He.signal.removeEventListener("abort",gn),Ne.delete(G),Y.delete(G),zt.forEach(jt=>Y.delete(jt.key));let _r=Fm(Ve);if(_r)return pi(me,_r.result,!1,{preventScrollReset:Me});if(_r=Fm(tn),_r)return j.add(_r.key),pi(me,_r.result,!1,{preventScrollReset:Me});let{loaderData:Qr,errors:Ls}=IR(D,tt,Ve,void 0,zt,tn);if(D.fetchers.has(G)){let jt=Pa(ve.data);D.fetchers.set(G,jt)}En(Bt),D.navigation.state==="loading"&&Bt>le?(ft(O,"Expected pending action"),k&&k.abort(),Mn(D.navigation.location,{matches:tt,loaderData:Qr,errors:Ls,fetchers:new Map(D.fetchers)})):(Nt({errors:Ls,loaderData:NR(D.loaderData,Qr,tt,Ls),fetchers:new Map(D.fetchers)}),Te=!1)}async function zi(G,J,ee,he,_e,Se,Be,Ie,Me,Ue){let Fe=D.fetchers.get(G);ut(G,qh(Ue,Fe?Fe.data:void 0),{flushSync:Ie});let xe=new AbortController,He=zc(n.history,ee,xe.signal);if(Be){let ve=await Ot(_e,ee,He.signal,G);if(ve.type==="aborted")return;if(ve.type==="error"){et(G,J,ve.error,{flushSync:Ie});return}else if(ve.matches)_e=ve.matches,he=rd(_e,ee);else{et(G,J,rs(404,{pathname:ee}),{flushSync:Ie});return}}Y.set(G,xe);let it=X,wt=Jc(i,s,He,_e,he,r,Se),ht=(await gr(He,wt,Se,G))[he.route.id];if(Y.get(G)===xe&&Y.delete(G),!He.signal.aborted){if(ae.has(G)){ut(G,Pa(void 0));return}if(mu(ht))if(le>it){ut(G,Pa(void 0));return}else{j.add(G),await pi(He,ht,!1,{preventScrollReset:Me});return}if(Si(ht)){et(G,J,ht.error);return}ut(G,Pa(ht.data))}}async function pi(G,J,ee,{submission:he,fetcherSubmission:_e,preventScrollReset:Se,replace:Be}={}){J.response.headers.has("X-Remix-Revalidate")&&(Te=!0);let Ie=J.response.headers.get("Location");ft(Ie,"Expected a Location header on the redirect Response"),Ie=xR(Ie,new URL(G.url),c);let Me=Pd(D.location,Ie,{_isRedirect:!0});if(t){let wt=!1;if(J.response.headers.has("X-Remix-Reload-Document"))wt=!0;else if(VE.test(Ie)){const _t=n.history.createURL(Ie);wt=_t.origin!==e.location.origin||cs(_t.pathname,c)==null}if(wt){Be?e.location.replace(Ie):e.location.assign(Ie);return}}k=null;let Ue=Be===!0||J.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Fe,formAction:xe,formEncType:He}=D.navigation;!he&&!_e&&Fe&&xe&&He&&(he=PR(D.navigation));let it=he||_e;if(GB.has(J.response.status)&&it&&wi(it.formMethod))await Jt(Ue,Me,{submission:{...it,formAction:Ie},preventScrollReset:Se||I,enableViewTransition:ee?B:void 0});else{let wt=rA(Me,he);await Jt(Ue,Me,{overrideNavigation:wt,fetcherSubmission:_e,preventScrollReset:Se||I,enableViewTransition:ee?B:void 0})}}async function gr(G,J,ee,he){let _e,Se={};try{_e=await tz(h,G,J,he,ee,!1)}catch(Be){return J.filter(Ie=>Ie.shouldLoad).forEach(Ie=>{Se[Ie.route.id]={type:"error",error:Be}}),Se}for(let[Be,Ie]of Object.entries(_e))if(az(Ie)){let Me=Ie.result;Se[Be]={type:"redirect",response:iz(Me,G,Be,J,c)}}else Se[Be]=await rz(Ie);return Se}async function Kr(G,J,ee,he){let _e=gr(ee,G,he,null),Se=Promise.all(J.map(async Me=>{if(Me.matches&&Me.match&&Me.request&&Me.controller){let Fe=(await gr(Me.request,Me.matches,he,Me.key))[Me.match.route.id];return{[Me.key]:Fe}}else return Promise.resolve({[Me.key]:{type:"error",error:rs(404,{pathname:Me.path})}})})),Be=await _e,Ie=(await Se).reduce((Me,Ue)=>Object.assign(Me,Ue),{});return{loaderResults:Be,fetcherResults:Ie}}function Mr(){Te=!0,re.forEach((G,J)=>{Y.has(J)&&be.add(J),Dr(J)})}function ut(G,J,ee={}){D.fetchers.set(G,J),Nt({fetchers:new Map(D.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function et(G,J,ee,he={}){let _e=fu(D.matches,J);Zt(G),Nt({errors:{[_e.route.id]:ee},fetchers:new Map(D.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function Dn(G){return ce.set(G,(ce.get(G)||0)+1),ae.has(G)&&ae.delete(G),D.fetchers.get(G)||KB}function Zt(G){let J=D.fetchers.get(G);Y.has(G)&&!(J&&J.state==="loading"&&Ne.has(G))&&Dr(G),re.delete(G),Ne.delete(G),j.delete(G),ae.delete(G),be.delete(G),D.fetchers.delete(G)}function Os(G){let J=(ce.get(G)||0)-1;J<=0?(ce.delete(G),ae.add(G)):ce.set(G,J),Nt({fetchers:new Map(D.fetchers)})}function Dr(G){let J=Y.get(G);J&&(J.abort(),Y.delete(G))}function Pr(G){for(let J of G){let ee=Dn(J),he=Pa(ee.data);D.fetchers.set(J,he)}}function Lr(){let G=[],J=!1;for(let ee of j){let he=D.fetchers.get(ee);ft(he,`Expected fetcher: ${ee}`),he.state==="loading"&&(j.delete(ee),G.push(ee),J=!0)}return Pr(G),J}function En(G){let J=[];for(let[ee,he]of Ne)if(he<G){let _e=D.fetchers.get(ee);ft(_e,`Expected fetcher: ${ee}`),_e.state==="loading"&&(Dr(ee),Ne.delete(ee),J.push(ee))}return Pr(J),J.length>0}function bn(G,J){let ee=D.blockers.get(G)||Hh;return we.get(G)!==J&&we.set(G,J),ee}function mi(G){D.blockers.delete(G),we.delete(G)}function yr(G,J){let ee=D.blockers.get(G)||Hh;ft(ee.state==="unblocked"&&J.state==="blocked"||ee.state==="blocked"&&J.state==="blocked"||ee.state==="blocked"&&J.state==="proceeding"||ee.state==="blocked"&&J.state==="unblocked"||ee.state==="proceeding"&&J.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${J.state}`);let he=new Map(D.blockers);he.set(G,J),Nt({blockers:he})}function Ms({currentLocation:G,nextLocation:J,historyAction:ee}){if(we.size===0)return;we.size>1&&Tn(!1,"A router only supports one blocker at a time");let he=Array.from(we.entries()),[_e,Se]=he[he.length-1],Be=D.blockers.get(_e);if(!(Be&&Be.state==="proceeding")&&Se({currentLocation:G,nextLocation:J,historyAction:ee}))return _e}function Wr(G){let J=rs(404,{pathname:G}),ee=u||a,{matches:he,route:_e}=MR(ee);return{notFoundMatches:he,route:_e,error:J}}function ji(G,J,ee){if(A=G,E=J,T=ee||null,!S&&D.navigation===nA){S=!0;let he=Ds(D.location,D.matches);he!=null&&Nt({restoreScrollPosition:he})}return()=>{A=null,E=null,T=null}}function Yr(G,J){return T&&T(G,J.map(he=>SB(he,D.loaderData)))||G.key}function tr(G,J){if(A&&E){let ee=Yr(G,J);A[ee]=E()}}function Ds(G,J){if(A){let ee=Yr(G,J),he=A[ee];if(typeof he=="number")return he}return null}function nr(G,J,ee){if(n.patchRoutesOnNavigation)if(G){if(Object.keys(G[0].params).length>0)return{active:!0,matches:fg(J,ee,c,!0)}}else return{active:!0,matches:fg(J,ee,c,!0)||[]};return{active:!1,matches:null}}async function Ot(G,J,ee,he){if(!n.patchRoutesOnNavigation)return{type:"success",matches:G};let _e=G;for(;;){let Se=u==null,Be=u||a,Ie=s;try{await n.patchRoutesOnNavigation({signal:ee,path:J,matches:_e,fetcherKey:he,patch:(Fe,xe)=>{ee.aborted||SR(Fe,xe,Be,Ie,i)}})}catch(Fe){return{type:"error",error:Fe,partialMatches:_e}}finally{Se&&!ee.aborted&&(a=[...a])}if(ee.aborted)return{type:"aborted"};let Me=za(Be,J,c);if(Me)return{type:"success",matches:Me};let Ue=fg(Be,J,c,!0);if(!Ue||_e.length===Ue.length&&_e.every((Fe,xe)=>Fe.route.id===Ue[xe].route.id))return{type:"success",matches:null};_e=Ue}}function rr(G){s={},u=Lg(G,i,void 0,s)}function Ps(G,J){let ee=u==null;SR(G,J,u||a,s,i),ee&&(a=[...a],Nt({}))}return V={get basename(){return c},get future(){return p},get state(){return D},get routes(){return a},get window(){return e},initialize:$t,subscribe:Wt,enableScrollRestoration:ji,navigate:er,fetch:Bi,revalidate:di,createHref:G=>n.history.createHref(G),encodeLocation:G=>n.history.encodeLocation(G),getFetcher:Dn,deleteFetcher:Os,dispose:St,getBlocker:bn,deleteBlocker:mi,patchRoutes:Ps,_internalFetchControllers:Y,_internalSetRoutes:rr},V}function QB(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function lT(n,e,t,r,i,s){let a,u;if(i){a=[];for(let h of e)if(a.push(h),h.route.id===i){u=h;break}}else a=e,u=e[e.length-1];let c=i0(r||".",r0(a),cs(n.pathname,t)||n.pathname,s==="path");if(r==null&&(c.search=n.search,c.hash=n.hash),(r==null||r===""||r===".")&&u){let h=UE(c.search);if(u.route.index&&!h)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&h){let p=new URLSearchParams(c.search),g=p.getAll("index");p.delete("index"),g.filter(A=>A).forEach(A=>p.append("index",A));let _=p.toString();c.search=_?`?${_}`:""}}return t!=="/"&&(c.pathname=c.pathname==="/"?t:io([t,c.pathname])),dl(c)}function ER(n,e,t){if(!t||!QB(t))return{path:e};if(t.formMethod&&!lz(t.formMethod))return{path:e,error:rs(405,{method:t.formMethod})};let r=()=>({path:e,error:rs(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=zN(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!wi(s))return r();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((_,[A,T])=>`${_}${A}=${T}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!wi(s))return r();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}ft(typeof FormData=="function","FormData is not available in this environment");let u,c;if(t.formData)u=fT(t.formData),c=t.formData;else if(t.body instanceof FormData)u=fT(t.body),c=t.body;else if(t.body instanceof URLSearchParams)u=t.body,c=kR(u);else if(t.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(t.body),c=kR(u)}catch{return r()}let h={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(wi(h.formMethod))return{path:e,submission:h};let p=Sl(e);return n&&p.search&&UE(p.search)&&u.append("index",""),p.search=`?${u}`,{path:dl(p),submission:h}}function bR(n,e,t,r,i,s,a,u,c,h,p,g,_,A,T,E,S,x,P){var F;let z=P?Si(P[1])?P[1].error:P[1].data:void 0,H=i.createURL(s.location),V=i.createURL(c),D;if(p&&s.errors){let L=Object.keys(s.errors)[0];D=a.findIndex(Te=>Te.route.id===L)}else if(P&&Si(P[1])){let L=P[0];D=a.findIndex(Te=>Te.route.id===L)-1}let O=P?P[1].statusCode:void 0,I=O&&O>=400,k={currentUrl:H,currentParams:((F=s.matches[0])==null?void 0:F.params)||{},nextUrl:V,nextParams:a[0].params,...u,actionResult:z,actionStatus:O},B=a.map((L,Te)=>{let{route:be}=L,Y=null;if(D!=null&&Te>D?Y=!1:be.lazy?Y=!0:be.loader==null?Y=!1:p?Y=uT(be,s.loaderData,s.errors):XB(s.loaderData,s.matches[Te],L)&&(Y=!0),Y!==null)return cT(t,r,n,L,h,e,Y);let X=I?!1:g||H.pathname+H.search===V.pathname+V.search||H.search!==V.search||JB(s.matches[Te],L),le={...k,defaultShouldRevalidate:X},Ne=Bg(L,le);return cT(t,r,n,L,h,e,Ne,le)}),U=[];return T.forEach((L,Te)=>{if(p||!a.some(re=>re.route.id===L.routeId)||A.has(Te))return;let be=za(S,L.path,x);if(!be){U.push({key:Te,routeId:L.routeId,path:L.path,matches:null,match:null,request:null,controller:null});return}if(E.has(Te))return;let Y=s.fetchers.get(Te),X=rd(be,L.path),le=new AbortController,Ne=zc(i,L.path,le.signal),j=null;if(_.has(Te))_.delete(Te),j=Jc(t,r,Ne,be,X,h,e);else if(Y&&Y.state!=="idle"&&Y.data===void 0)g&&(j=Jc(t,r,Ne,be,X,h,e));else{let re={...k,defaultShouldRevalidate:I?!1:g};Bg(X,re)&&(j=Jc(t,r,Ne,be,X,h,e,re))}j&&U.push({key:Te,routeId:L.routeId,path:L.path,matches:j,match:X,request:Ne,controller:le})}),{dsMatches:B,revalidatingFetchers:U}}function uT(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function XB(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function JB(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Bg(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function SR(n,e,t,r,i){let s;if(n){let c=r[n];ft(c,`No route found to patch children into: routeId = ${n}`),c.children||(c.children=[]),s=c.children}else s=t;let a=e.filter(c=>!s.some(h=>PN(c,h))),u=Lg(a,i,[n||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...u)}function PN(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>PN(t,s))}):!1}var wR=new WeakMap,LN=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let i=t[e.id];if(ft(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[n];if(!s)return;let a=wR.get(i);a||(a={},wR.set(i,a));let u=a[n];if(u)return u;let c=(async()=>{let h=AB(n),g=i[n]!==void 0&&n!=="hasErrorBoundary";if(h)Tn(!h,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),a[n]=Promise.resolve();else if(g)Tn(!1,`Route "${i.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let _=await s();_!=null&&(Object.assign(i,{[n]:_}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[n]=void 0,Object.values(i.lazy).every(_=>_===void 0)&&(i.lazy=void 0))})();return a[n]=c,c},CR=new WeakMap;function ZB(n,e,t,r,i){let s=t[n.id];if(ft(s,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let p=CR.get(s);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let g=(async()=>{ft(typeof n.lazy=="function","No lazy route function found");let _=await n.lazy(),A={};for(let T in _){let E=_[T];if(E===void 0)continue;let S=EB(T),P=s[T]!==void 0&&T!=="hasErrorBoundary";S?Tn(!S,"Route property "+T+" is not a supported property to be returned from a lazy route function. This property will be ignored."):P?Tn(!P,`Route "${s.id}" has a static property "${T}" defined but its lazy function is also returning a value for this property. The lazy route property "${T}" will be ignored.`):A[T]=E}Object.assign(s,A),Object.assign(s,{...r(s),lazy:void 0})})();return CR.set(s,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let a=Object.keys(n.lazy),u=[],c;for(let p of a){if(i&&i.includes(p))continue;let g=LN({key:p,route:n,manifest:t,mapRouteProperties:r});g&&(u.push(g),p===e&&(c=g))}let h=u.length>0?Promise.all(u).then(()=>{}):void 0;return h==null||h.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:c}}async function RR(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{t[e[s].route.id]=i}),t}async function ez(n){return n.matches.some(e=>e.route.unstable_middleware)?VN(n,!1,()=>RR(n),(e,t)=>({[t]:{type:"error",result:e}})):RR(n)}async function VN(n,e,t,r){let{matches:i,request:s,params:a,context:u}=n,c={handlerResult:void 0};try{let h=i.flatMap(g=>g.route.unstable_middleware?g.route.unstable_middleware.map(_=>[g.route.id,_]):[]),p=await UN({request:s,params:a,context:u},h,e,c,t);return e?p:c.handlerResult}catch(h){if(!c.middlewareError)throw h;let p=await r(c.middlewareError.error,c.middlewareError.routeId);return c.handlerResult?Object.assign(c.handlerResult,p):p}}async function UN(n,e,t,r,i,s=0){let{request:a}=n;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let u=e[s];if(!u)return r.handlerResult=await i(),r.handlerResult;let[c,h]=u,p=!1,g,_=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");p=!0,await UN(n,e,t,r,i,s+1)};try{let A=await h({request:n.request,params:n.params,context:n.context},_);return p?A===void 0?g:A:_()}catch(A){throw r.middlewareError?r.middlewareError.error!==A&&(r.middlewareError={routeId:c,error:A}):r.middlewareError={routeId:c,error:A},A}}function BN(n,e,t,r,i){let s=LN({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:n}),a=ZB(r.route,wi(t.method)?"action":"loader",e,n,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function cT(n,e,t,r,i,s,a,u=null){let c=!1,h=BN(n,e,t,r,i);return{...r,_lazyPromises:h,shouldLoad:a,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler(p){return c=!0,u?typeof p=="boolean"?Bg(r,{...u,defaultShouldRevalidate:p}):Bg(r,u):a},resolve(p){return c||a||p&&t.method==="GET"&&(r.route.lazy||r.route.loader)?nz({request:t,match:r,lazyHandlerPromise:h==null?void 0:h.handler,lazyRoutePromise:h==null?void 0:h.route,handlerOverride:p,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Jc(n,e,t,r,i,s,a,u=null){return r.map(c=>c.route.id!==i.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler:()=>!1,_lazyPromises:BN(n,e,t,c,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:cT(n,e,t,c,s,a,!0,u))}async function tz(n,e,t,r,i,s){t.some(h=>{var p;return(p=h._lazyPromises)==null?void 0:p.middleware})&&await Promise.all(t.map(h=>{var p;return(p=h._lazyPromises)==null?void 0:p.middleware}));let a={request:e,params:t[0].params,context:i,matches:t},c=await n({...a,fetcherKey:r,unstable_runClientMiddleware:h=>{let p=a;return VN(p,!1,()=>h({...p,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(g,_)=>({[_]:{type:"error",result:g}}))}});try{await Promise.all(t.flatMap(h=>{var p,g;return[(p=h._lazyPromises)==null?void 0:p.handler,(g=h._lazyPromises)==null?void 0:g.route]}))}catch{}return c}async function nz({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let a,u,c=wi(n.method),h=c?"action":"loader",p=g=>{let _,A=new Promise((S,x)=>_=x);u=()=>_(),n.signal.addEventListener("abort",u);let T=S=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${e.route.id}]`)):g({request:n,params:e.params,context:s},...S!==void 0?[S]:[]),E=(async()=>{try{return{type:"data",result:await(i?i(x=>T(x)):T())}}catch(S){return{type:"error",result:S}}})();return Promise.race([E,A])};try{let g=c?e.route.action:e.route.loader;if(t||r)if(g){let _,[A]=await Promise.all([p(g).catch(T=>{_=T}),t,r]);if(_!==void 0)throw _;a=A}else{await t;let _=c?e.route.action:e.route.loader;if(_)[a]=await Promise.all([p(_),r]);else if(h==="action"){let A=new URL(n.url),T=A.pathname+A.search;throw rs(405,{method:n.method,pathname:T,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(g)a=await p(g);else{let _=new URL(n.url),A=_.pathname+_.search;throw rs(404,{pathname:A})}}catch(g){return{type:"error",result:g}}finally{u&&n.signal.removeEventListener("abort",u)}return a}async function rz(n){var r,i,s,a,u,c;let{result:e,type:t}=n;if(jN(e)){let h;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Ug(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:"data",data:h,statusCode:e.status,headers:e.headers}}return t==="error"?DR(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Ug(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:Ld(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Ld(e)?e.status:void 0}:DR(e)?{type:"data",data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function iz(n,e,t,r,i){let s=n.headers.get("Location");if(ft(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!VE.test(s)){let a=r.slice(0,r.findIndex(u=>u.route.id===t)+1);s=lT(new URL(e.url),a,i,s),n.headers.set("Location",s)}return n}function xR(n,e,t){if(VE.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=cs(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return n}function zc(n,e,t,r){let i=n.createURL(zN(e)).toString(),s={signal:t};if(r&&wi(r.formMethod)){let{formMethod:a,formEncType:u}=r;s.method=a.toUpperCase(),u==="application/json"?(s.headers=new Headers({"Content-Type":u}),s.body=JSON.stringify(r.json)):u==="text/plain"?s.body=r.text:u==="application/x-www-form-urlencoded"&&r.formData?s.body=fT(r.formData):s.body=r.formData}return new Request(i,s)}function fT(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function kR(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function sz(n,e,t,r=!1,i=!1){let s={},a=null,u,c=!1,h={},p=t&&Si(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let _=g.route.id,A=e[_];if(ft(!mu(A),"Cannot handle redirect results in processLoaderData"),Si(A)){let T=A.error;if(p!==void 0&&(T=p,p=void 0),a=a||{},i)a[_]=T;else{let E=fu(n,_);a[E.route.id]==null&&(a[E.route.id]=T)}r||(s[_]=DN),c||(c=!0,u=Ld(A.error)?A.error.status:500),A.headers&&(h[_]=A.headers)}else s[_]=A.data,A.statusCode&&A.statusCode!==200&&!c&&(u=A.statusCode),A.headers&&(h[_]=A.headers)}),p!==void 0&&t&&(a={[t[0]]:p},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:u||200,loaderHeaders:h}}function IR(n,e,t,r,i,s){let{loaderData:a,errors:u}=sz(e,t,r);return i.filter(c=>!c.matches||c.matches.some(h=>h.shouldLoad)).forEach(c=>{let{key:h,match:p,controller:g}=c,_=s[h];if(ft(_,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Si(_)){let A=fu(n.matches,p==null?void 0:p.route.id);u&&u[A.route.id]||(u={...u,[A.route.id]:_.error}),n.fetchers.delete(h)}else if(mu(_))ft(!1,"Unhandled fetcher revalidation redirect");else{let A=Pa(_.data);n.fetchers.set(h,A)}}),{loaderData:a,errors:u}}function NR(n,e,t,r){let i=Object.entries(e).filter(([,s])=>s!==DN).reduce((s,[a,u])=>(s[a]=u,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&s.route.loader&&(i[a]=n[a]),r&&r.hasOwnProperty(a))break}return i}function OR(n){return n?Si(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function fu(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function MR(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rs(n,{pathname:e,routeId:t,method:r,type:i,message:s}={}){let a="Unknown Server Error",u="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&e&&t?u=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(u="Unable to encode submission body")):n===403?(a="Forbidden",u=`Route "${t}" does not match URL "${e}"`):n===404?(a="Not Found",u=`No route matches URL "${e}"`):n===405&&(a="Method Not Allowed",r&&e&&t?u=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(u=`Invalid request method "${r.toUpperCase()}"`)),new Ug(n||500,a,new Error(u),!0)}function Fm(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(mu(i))return{key:r,result:i}}}function zN(n){let e=typeof n=="string"?Sl(n):n;return dl({...e,hash:""})}function oz(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function az(n){return jN(n.result)&&$B.has(n.result.status)}function Si(n){return n.type==="error"}function mu(n){return(n&&n.type)==="redirect"}function DR(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function jN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function lz(n){return qB.has(n.toUpperCase())}function wi(n){return FB.has(n.toUpperCase())}function UE(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function rd(n,e){let t=typeof e=="string"?Sl(e).search:e.search;if(n[n.length-1].route.index&&UE(t||""))return n[n.length-1];let r=NN(n);return r[r.length-1]}function PR(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:s,json:a}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:a,text:void 0}}}function rA(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function uz(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function qh(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function cz(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Pa(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function fz(n,e){try{let t=n.sessionStorage.getItem(MN);if(t){let r=JSON.parse(t);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function hz(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(MN,JSON.stringify(t))}catch(r){Tn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function dz(){let n,e,t=new Promise((r,i)=>{n=async s=>{r(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Gu=$.createContext(null);Gu.displayName="DataRouter";var up=$.createContext(null);up.displayName="DataRouterState";var BE=$.createContext({isTransitioning:!1});BE.displayName="ViewTransition";var FN=$.createContext(new Map);FN.displayName="Fetchers";var pz=$.createContext(null);pz.displayName="Await";var ks=$.createContext(null);ks.displayName="Navigation";var s0=$.createContext(null);s0.displayName="Location";var ps=$.createContext({outlet:null,matches:[],isDataRoute:!1});ps.displayName="Route";var zE=$.createContext(null);zE.displayName="RouteError";function mz(n,{relative:e}={}){ft(Mf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=$.useContext(ks),{hash:i,pathname:s,search:a}=cp(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:io([t,s])),r.createHref({pathname:u,search:a,hash:i})}function Mf(){return $.useContext(s0)!=null}function aa(){return ft(Mf(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(s0).location}var HN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qN(n){$.useContext(ks).static||$.useLayoutEffect(n)}function la(){let{isDataRoute:n}=$.useContext(ps);return n?kz():gz()}function gz(){ft(Mf(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(Gu),{basename:e,navigator:t}=$.useContext(ks),{matches:r}=$.useContext(ps),{pathname:i}=aa(),s=JSON.stringify(r0(r)),a=$.useRef(!1);return qN(()=>{a.current=!0}),$.useCallback((c,h={})=>{if(Tn(a.current,HN),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=i0(c,JSON.parse(s),i,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:io([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,s,i,n])}var yz=$.createContext(null);function _z(n){let e=$.useContext(ps).outlet;return e&&$.createElement(yz.Provider,{value:n},e)}function o0(){let{matches:n}=$.useContext(ps),e=n[n.length-1];return e?e.params:{}}function cp(n,{relative:e}={}){let{matches:t}=$.useContext(ps),{pathname:r}=aa(),i=JSON.stringify(r0(t));return $.useMemo(()=>i0(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function vz(n,e,t,r){ft(Mf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=$.useContext(ks),{matches:a}=$.useContext(ps),u=a[a.length-1],c=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let P=g&&g.path||"";KN(h,!g||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let _=aa(),A;A=_;let T=A.pathname||"/",E=T;if(p!=="/"){let P=p.replace(/^\//,"").split("/");E="/"+T.replace(/^\//,"").split("/").slice(P.length).join("/")}let S=!s&&t&&t.matches&&t.matches.length>0?t.matches:za(n,{pathname:E});return Tn(g||S!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Tn(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Sz(S&&S.map(P=>Object.assign({},P,{params:Object.assign({},c,P.params),pathname:io([p,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?p:io([p,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),a,t,r)}function Az(){let n=xz(),e=Ld(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:s},"ErrorBoundary")," or"," ",$.createElement("code",{style:s},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:i},t):null,a)}var Tz=$.createElement(Az,null),Ez=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?$.createElement(ps.Provider,{value:this.props.routeContext},$.createElement(zE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bz({routeContext:n,match:e,children:t}){let r=$.useContext(Gu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(ps.Provider,{value:n},t)}function Sz(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let c=i.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);ft(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let h=i[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:p,errors:g}=t,_=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||_){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,h,p)=>{let g,_=!1,A=null,T=null;t&&(g=s&&h.route.id?s[h.route.id]:void 0,A=h.route.errorElement||Tz,a&&(u<0&&p===0?(KN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):u===p&&(_=!0,T=h.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,p+1)),S=()=>{let x;return g?x=A:_?x=T:h.route.Component?x=$.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=c,$.createElement(bz,{match:h,routeContext:{outlet:c,matches:E,isDataRoute:t!=null},children:x})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?$.createElement(Ez,{location:t.location,revalidation:t.revalidation,component:A,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function jE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wz(n){let e=$.useContext(Gu);return ft(e,jE(n)),e}function $N(n){let e=$.useContext(up);return ft(e,jE(n)),e}function Cz(n){let e=$.useContext(ps);return ft(e,jE(n)),e}function FE(n){let e=Cz(n),t=e.matches[e.matches.length-1];return ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Rz(){return FE("useRouteId")}function GN(){return $N("useNavigation").navigation}function xz(){var r;let n=$.useContext(zE),e=$N("useRouteError"),t=FE("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function kz(){let{router:n}=wz("useNavigate"),e=FE("useNavigate"),t=$.useRef(!1);return qN(()=>{t.current=!0}),$.useCallback(async(i,s={})=>{Tn(t.current,HN),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var LR={};function KN(n,e,t){!e&&!LR[n]&&(LR[n]=!0,Tn(!1,t))}var VR={};function UR(n,e){!n&&!VR[e]&&(VR[e]=!0,console.warn(e))}function Iz(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Tn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:$.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Tn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:$.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Tn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:$.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var Nz=["HydrateFallback","hydrateFallbackElement"],Oz=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function Mz({router:n,flushSync:e}){let[t,r]=$.useState(n.state),[i,s]=$.useState(),[a,u]=$.useState({isTransitioning:!1}),[c,h]=$.useState(),[p,g]=$.useState(),[_,A]=$.useState(),T=$.useRef(new Map),E=$.useCallback((z,{deletedFetchers:H,flushSync:V,viewTransitionOpts:D})=>{z.fetchers.forEach((I,k)=>{I.data!==void 0&&T.current.set(k,I.data)}),H.forEach(I=>T.current.delete(I)),UR(V===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(UR(D==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!D||!O){e&&V?e(()=>r(z)):$.startTransition(()=>r(z));return}if(e&&V){e(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let I=n.window.document.startViewTransition(()=>{e(()=>r(z))});I.finished.finally(()=>{e(()=>{h(void 0),g(void 0),s(void 0),u({isTransitioning:!1})})}),e(()=>g(I));return}p?(c&&c.resolve(),p.skipTransition(),A({state:z,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(s(z),u({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,e,p,c]);$.useLayoutEffect(()=>n.subscribe(E),[n,E]),$.useEffect(()=>{a.isTransitioning&&!a.flushSync&&h(new Oz)},[a]),$.useEffect(()=>{if(c&&i&&n.window){let z=i,H=c.promise,V=n.window.document.startViewTransition(async()=>{$.startTransition(()=>r(z)),await H});V.finished.finally(()=>{h(void 0),g(void 0),s(void 0),u({isTransitioning:!1})}),g(V)}},[i,c,n.window]),$.useEffect(()=>{c&&i&&t.location.key===i.location.key&&c.resolve()},[c,p,t.location,i]),$.useEffect(()=>{!a.isTransitioning&&_&&(s(_.state),u({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),A(void 0))},[a.isTransitioning,_]);let S=$.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:z=>n.navigate(z),push:(z,H,V)=>n.navigate(z,{state:H,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(z,H,V)=>n.navigate(z,{replace:!0,state:H,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),x=n.basename||"/",P=$.useMemo(()=>({router:n,navigator:S,static:!1,basename:x}),[n,S,x]);return $.createElement($.Fragment,null,$.createElement(Gu.Provider,{value:P},$.createElement(up.Provider,{value:t},$.createElement(FN.Provider,{value:T.current},$.createElement(BE.Provider,{value:a},$.createElement(Uz,{basename:x,location:t.location,navigationType:t.historyAction,navigator:S},$.createElement(Dz,{routes:n.routes,future:n.future,state:t})))))),null)}var Dz=$.memo(Pz);function Pz({routes:n,future:e,state:t}){return vz(n,void 0,t,e)}function Lz({to:n,replace:e,state:t,relative:r}){ft(Mf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=$.useContext(ks);Tn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=$.useContext(ps),{pathname:a}=aa(),u=la(),c=i0(n,r0(s),a,r==="path"),h=JSON.stringify(c);return $.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:r})},[u,h,r,e,t]),null}function Vz(n){return _z(n.context)}function Uz({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){ft(!Mf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),u=$.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=Sl(t));let{pathname:c="/",search:h="",hash:p="",state:g=null,key:_="default"}=t,A=$.useMemo(()=>{let T=cs(c,a);return T==null?null:{location:{pathname:T,search:h,hash:p,state:g,key:_},navigationType:r}},[a,c,h,p,g,_,r]);return Tn(A!=null,`<Router basename="${a}"> is not able to match the URL "${c}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:$.createElement(ks.Provider,{value:u},$.createElement(s0.Provider,{children:e,value:A}))}var hg="get",dg="application/x-www-form-urlencoded";function a0(n){return n!=null&&typeof n.tagName=="string"}function Bz(n){return a0(n)&&n.tagName.toLowerCase()==="button"}function zz(n){return a0(n)&&n.tagName.toLowerCase()==="form"}function jz(n){return a0(n)&&n.tagName.toLowerCase()==="input"}function Fz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Hz(n,e){return n.button===0&&(!e||e==="_self")&&!Fz(n)}var Hm=null;function qz(){if(Hm===null)try{new FormData(document.createElement("form"),0),Hm=!1}catch{Hm=!0}return Hm}var $z=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function iA(n){return n!=null&&!$z.has(n)?(Tn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dg}"`),null):n}function Gz(n,e){let t,r,i,s,a;if(zz(n)){let u=n.getAttribute("action");r=u?cs(u,e):null,t=n.getAttribute("method")||hg,i=iA(n.getAttribute("enctype"))||dg,s=new FormData(n)}else if(Bz(n)||jz(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?cs(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||hg,i=iA(n.getAttribute("formenctype"))||iA(u.getAttribute("enctype"))||dg,s=new FormData(u,n),!qz()){let{name:h,type:p,value:g}=n;if(p==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,g)}}else{if(a0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hg,r=null,i=dg,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}function HE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Kz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wz(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Yz(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await Kz(s,t);return a.links?a.links():[]}return[]}));return Zz(r.flat(1).filter(Wz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function BR(n,e,t,r,i,s){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,u=(c,h)=>{var p;return t[h].pathname!==c.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,h)=>a(c,h)||u(c,h)):s==="data"?e.filter((c,h)=>{var g;let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let _=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Qz(n,e,{includeHydrateFallback:t}={}){return Xz(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Xz(n){return[...new Set(n)]}function Jz(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Zz(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(Jz(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}var e4=new Set([100,101,204,205]);function t4(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&cs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function WN(){let n=$.useContext(Gu);return HE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function n4(){let n=$.useContext(up);return HE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var qE=$.createContext(void 0);qE.displayName="FrameworkContext";function YN(){let n=$.useContext(qE);return HE(n,"You must render this element inside a <HydratedRouter> element"),n}function r4(n,e){let t=$.useContext(qE),[r,i]=$.useState(!1),[s,a]=$.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,_=$.useRef(null);$.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let E=x=>{x.forEach(P=>{a(P.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[n]),$.useEffect(()=>{if(r){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[r]);let A=()=>{i(!0)},T=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,_,{}]:[s,_,{onFocus:$h(u,A),onBlur:$h(c,T),onMouseEnter:$h(h,A),onMouseLeave:$h(p,T),onTouchStart:$h(g,A)}]:[!1,_,{}]}function $h(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function i4({page:n,...e}){let{router:t}=WN(),r=$.useMemo(()=>za(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?$.createElement(o4,{page:n,matches:r,...e}):null}function s4(n){let{manifest:e,routeModules:t}=YN(),[r,i]=$.useState([]);return $.useEffect(()=>{let s=!1;return Yz(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function o4({page:n,matches:e,...t}){let r=aa(),{manifest:i,routeModules:s}=YN(),{basename:a}=WN(),{loaderData:u,matches:c}=n4(),h=$.useMemo(()=>BR(n,e,c,i,r,"data"),[n,e,c,i,r]),p=$.useMemo(()=>BR(n,e,c,i,r,"assets"),[n,e,c,i,r]),g=$.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,E=!1;if(e.forEach(x=>{var z;let P=i.routes[x.route.id];!P||!P.hasLoader||(!h.some(H=>H.route.id===x.route.id)&&x.route.id in u&&((z=s[x.route.id])!=null&&z.shouldRevalidate)||P.hasClientLoader?E=!0:T.add(x.route.id))}),T.size===0)return[];let S=t4(n,a);return E&&T.size>0&&S.searchParams.set("_routes",e.filter(x=>T.has(x.route.id)).map(x=>x.route.id).join(",")),[S.pathname+S.search]},[a,u,r,i,h,e,n,s]),_=$.useMemo(()=>Qz(p,i),[p,i]),A=s4(p);return $.createElement($.Fragment,null,g.map(T=>$.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),_.map(T=>$.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),A.map(({key:T,link:E})=>$.createElement("link",{key:T,...E})))}function a4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var QN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QN&&(window.__reactRouterVersion="7.5.3")}catch{}function l4(n,e){return YB({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:gB({window:e==null?void 0:e.window}),hydrationData:u4(),routes:n,mapRouteProperties:Iz,hydrationRouteProperties:Nz,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function u4(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:c4(n.errors)}),n}function c4(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new Ug(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[r]=a}catch{}}if(t[r]==null){let s=new Error(i.message);s.stack="",t[r]=s}}else t[r]=i;return t}var XN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JN=$.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:u,target:c,to:h,preventScrollReset:p,viewTransition:g,..._},A){let{basename:T}=$.useContext(ks),E=typeof h=="string"&&XN.test(h),S,x=!1;if(typeof h=="string"&&E&&(S=h,QN))try{let k=new URL(window.location.href),B=h.startsWith("//")?new URL(k.protocol+h):new URL(h),U=cs(B.pathname,T);B.origin===k.origin&&U!=null?h=U+B.search+B.hash:x=!0}catch{Tn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=mz(h,{relative:i}),[z,H,V]=r4(r,_),D=p4(h,{replace:a,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:g});function O(k){e&&e(k),k.defaultPrevented||D(k)}let I=$.createElement("a",{..._,...V,href:S||P,onClick:x||s?e:O,ref:a4(A,H),target:c,"data-discover":!E&&t==="render"?"true":void 0});return z&&!E?$.createElement($.Fragment,null,I,$.createElement(i4,{page:P})):I});JN.displayName="Link";var f4=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:u,children:c,...h},p){let g=cp(a,{relative:h.relative}),_=aa(),A=$.useContext(up),{navigator:T,basename:E}=$.useContext(ks),S=A!=null&&v4(g)&&u===!0,x=T.encodeLocation?T.encodeLocation(g).pathname:g.pathname,P=_.pathname,z=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(P=P.toLowerCase(),z=z?z.toLowerCase():null,x=x.toLowerCase()),z&&E&&(z=cs(z,E)||z);const H=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let V=P===x||!i&&P.startsWith(x)&&P.charAt(H)==="/",D=z!=null&&(z===x||!i&&z.startsWith(x)&&z.charAt(x.length)==="/"),O={isActive:V,isPending:D,isTransitioning:S},I=V?e:void 0,k;typeof r=="function"?k=r(O):k=[r,V?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(O):s;return $.createElement(JN,{...h,"aria-current":I,className:k,ref:p,style:B,to:a,viewTransition:u},typeof c=="function"?c(O):c)});f4.displayName="NavLink";var h4=$.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=hg,action:u,onSubmit:c,relative:h,preventScrollReset:p,viewTransition:g,..._},A)=>{let T=y4(),E=_4(u,{relative:h}),S=a.toLowerCase()==="get"?"get":"post",x=typeof u=="string"&&XN.test(u),P=z=>{if(c&&c(z),z.defaultPrevented)return;z.preventDefault();let H=z.nativeEvent.submitter,V=(H==null?void 0:H.getAttribute("formmethod"))||a;T(H||z.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:g})};return $.createElement("form",{ref:A,method:S,action:E,onSubmit:r?c:P,..._,"data-discover":!x&&n==="render"?"true":void 0})});h4.displayName="Form";function d4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZN(n){let e=$.useContext(Gu);return ft(e,d4(n)),e}function p4(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let u=la(),c=aa(),h=cp(n,{relative:s});return $.useCallback(p=>{if(Hz(p,e)){p.preventDefault();let g=t!==void 0?t:dl(c)===dl(h);u(n,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,u,h,t,r,e,n,i,s,a])}var m4=0,g4=()=>`__${String(++m4)}__`;function y4(){let{router:n}=ZN("useSubmit"),{basename:e}=$.useContext(ks),t=Rz();return $.useCallback(async(r,i={})=>{let{action:s,method:a,encType:u,formData:c,body:h}=Gz(r,e);if(i.navigate===!1){let p=i.fetcherKey||g4();await n.fetch(p,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||a,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||a,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function _4(n,{relative:e}={}){let{basename:t}=$.useContext(ks),r=$.useContext(ps);ft(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...cp(n||".",{relative:e})},a=aa();if(n==null){s.search=a.search;let u=new URLSearchParams(s.search),c=u.getAll("index");if(c.some(p=>p==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:io([t,s.pathname])),dl(s)}function v4(n,e={}){let t=$.useContext(BE);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ZN("useViewTransitionState"),i=cp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=cs(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=cs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Vg(i.pathname,a)!=null||Vg(i.pathname,s)!=null}new TextEncoder;[...e4];var eO=RN();const A4=CN(eO);/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function T4(n){return $.createElement(Mz,{flushSync:eO.flushSync,...n})}const E4=()=>{};var zR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},b4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},nO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let _=(u&15)<<2|h>>6,A=h&63;c||(A=64,a||(_=64)),r.push(t[p],t[g],t[_],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):b4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new S4;const _=s<<2|u>>4;if(r.push(_),h!==64){const A=u<<4&240|h>>2;if(r.push(A),g!==64){const T=h<<6&192|g;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class S4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w4=function(n){const e=tO(n);return nO.encodeByteArray(e,!0)},zg=function(n){return w4(n).replace(/\./g,"")},rO=function(n){try{return nO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=()=>C4().__FIREBASE_DEFAULTS__,x4=()=>{if(typeof process>"u"||typeof zR>"u")return;const n=zR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&rO(n[1]);return e&&JSON.parse(e)},l0=()=>{try{return E4()||R4()||x4()||k4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iO=n=>{var e,t;return(t=(e=l0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},sO=n=>{const e=iO(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},oO=()=>{var n;return(n=l0())===null||n===void 0?void 0:n.config},aO=n=>{var e;return(e=l0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zg(JSON.stringify(t)),zg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function O4(){var n;const e=(n=l0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function D4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function P4(){const n=Ir();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function L4(){return!O4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cO(){try{return typeof indexedDB=="object"}catch{return!1}}function fO(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function V4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="FirebaseError";class ms extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=U4,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?B4(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new ms(i,u,r)}}function B4(n,e){return n.replace(z4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const z4=/\{\$([^}]+)}/g;function j4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Zo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(jR(s)&&jR(a)){if(!Zo(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function jR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function id(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function sd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function F4(n,e){const t=new H4(n,e);return t.subscribe.bind(t)}class H4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");q4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sA),i.error===void 0&&(i.error=sA),i.complete===void 0&&(i.complete=sA);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sA(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=1e3,G4=2,K4=4*60*60*1e3,W4=.5;function FR(n,e=$4,t=G4){const r=e*Math.pow(t,n),i=Math.round(W4*r*(Math.random()-.5)*2);return Math.min(K4,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n){return n&&n._delegate?n._delegate:n}class fs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new I4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X4(e))try{this.getOrInitializeService({instanceIdentifier:lu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=lu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lu){return this.instances.has(e)}getOptions(e=lu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lu){return this.component?this.component.multipleInstances?e:lu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q4(n){return n===lu?void 0:n}function X4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Y4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(gt||(gt={}));const Z4={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},e3=gt.INFO,t3={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},n3=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=t3[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u0{constructor(e){this.name=e,this._logLevel=e3,this._logHandler=n3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const r3=(n,e)=>e.some(t=>n instanceof t);let HR,qR;function i3(){return HR||(HR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s3(){return qR||(qR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hO=new WeakMap,hT=new WeakMap,dO=new WeakMap,oA=new WeakMap,$E=new WeakMap;function o3(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(el(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&hO.set(t,n)}).catch(()=>{}),$E.set(e,n),e}function a3(n){if(hT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});hT.set(n,e)}let dT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return el(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function l3(n){dT=n(dT)}function u3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(aA(this),e,...t);return dO.set(r,e.sort?e.sort():[e]),el(r)}:s3().includes(n)?function(...e){return n.apply(aA(this),e),el(hO.get(this))}:function(...e){return el(n.apply(aA(this),e))}}function c3(n){return typeof n=="function"?u3(n):(n instanceof IDBTransaction&&a3(n),r3(n,i3())?new Proxy(n,dT):n)}function el(n){if(n instanceof IDBRequest)return o3(n);if(oA.has(n))return oA.get(n);const e=c3(n);return e!==n&&(oA.set(n,e),$E.set(e,n)),e}const aA=n=>$E.get(n);function pO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=el(a);return r&&a.addEventListener("upgradeneeded",c=>{r(el(a.result),c.oldVersion,c.newVersion,el(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const f3=["get","getKey","getAll","getAllKeys","count"],h3=["put","add","delete","clear"],lA=new Map;function $R(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lA.get(e))return lA.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=h3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||f3.includes(t)))return;const s=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&c.done]))[0]};return lA.set(e,s),s}l3(n=>({...n,get:(e,t,r)=>$R(e,t)||n.get(e,t,r),has:(e,t)=>!!$R(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(p3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function p3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pT="@firebase/app",GR="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new u0("@firebase/app"),m3="@firebase/app-compat",g3="@firebase/analytics-compat",y3="@firebase/analytics",_3="@firebase/app-check-compat",v3="@firebase/app-check",A3="@firebase/auth",T3="@firebase/auth-compat",E3="@firebase/database",b3="@firebase/data-connect",S3="@firebase/database-compat",w3="@firebase/functions",C3="@firebase/functions-compat",R3="@firebase/installations",x3="@firebase/installations-compat",k3="@firebase/messaging",I3="@firebase/messaging-compat",N3="@firebase/performance",O3="@firebase/performance-compat",M3="@firebase/remote-config",D3="@firebase/remote-config-compat",P3="@firebase/storage",L3="@firebase/storage-compat",V3="@firebase/firestore",U3="@firebase/vertexai",B3="@firebase/firestore-compat",z3="firebase",j3="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="[DEFAULT]",F3={[pT]:"fire-core",[m3]:"fire-core-compat",[y3]:"fire-analytics",[g3]:"fire-analytics-compat",[v3]:"fire-app-check",[_3]:"fire-app-check-compat",[A3]:"fire-auth",[T3]:"fire-auth-compat",[E3]:"fire-rtdb",[b3]:"fire-data-connect",[S3]:"fire-rtdb-compat",[w3]:"fire-fn",[C3]:"fire-fn-compat",[R3]:"fire-iid",[x3]:"fire-iid-compat",[k3]:"fire-fcm",[I3]:"fire-fcm-compat",[N3]:"fire-perf",[O3]:"fire-perf-compat",[M3]:"fire-rc",[D3]:"fire-rc-compat",[P3]:"fire-gcs",[L3]:"fire-gcs-compat",[V3]:"fire-fst",[B3]:"fire-fst-compat",[U3]:"fire-vertex","fire-js":"fire-js",[z3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map,H3=new Map,gT=new Map;function KR(n,e){try{n.container.addComponent(e)}catch(t){ea.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cs(n){const e=n.name;if(gT.has(e))return ea.debug(`There were multiple attempts to register component ${e}.`),!1;gT.set(e,n);for(const t of jg.values())KR(t,n);for(const t of H3.values())KR(t,n);return!0}function Df(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tl=new Ku("app","Firebase",q3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=j3;function mO(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mT,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw tl.create("bad-app-name",{appName:String(i)});if(t||(t=oO()),!t)throw tl.create("no-options");const s=jg.get(i);if(s){if(Zo(t,s.options)&&Zo(r,s.config))return s;throw tl.create("duplicate-app",{appName:i})}const a=new J4(i);for(const c of gT.values())a.addComponent(c);const u=new $3(t,r,a);return jg.set(i,u),u}function GE(n=mT){const e=jg.get(n);if(!e&&n===mT&&oO())return mO();if(!e)throw tl.create("no-app",{appName:n});return e}function ri(n,e,t){var r;let i=(r=F3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ea.warn(u.join(" "));return}Cs(new fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="firebase-heartbeat-database",K3=1,Vd="firebase-heartbeat-store";let uA=null;function gO(){return uA||(uA=pO(G3,K3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vd)}catch(t){console.warn(t)}}}}).catch(n=>{throw tl.create("idb-open",{originalErrorMessage:n.message})})),uA}async function W3(n){try{const t=(await gO()).transaction(Vd),r=await t.objectStore(Vd).get(yO(n));return await t.done,r}catch(e){if(e instanceof ms)ea.warn(e.message);else{const t=tl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ea.warn(t.message)}}}async function WR(n,e){try{const r=(await gO()).transaction(Vd,"readwrite");await r.objectStore(Vd).put(e,yO(n)),await r.done}catch(t){if(t instanceof ms)ea.warn(t.message);else{const r=tl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ea.warn(r.message)}}}function yO(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=1024,Q3=30;class X3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Z3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=YR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Q3){const a=ej(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ea.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=YR(),{heartbeatsToSend:r,unsentEntries:i}=J3(this._heartbeatsCache.heartbeats),s=zg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ea.warn(t),""}}}function YR(){return new Date().toISOString().substring(0,10)}function J3(n,e=Y3){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),QR(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),QR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Z3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cO()?fO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await W3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return WR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return WR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QR(n){return zg(JSON.stringify({version:2,heartbeats:n})).length}function ej(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(n){Cs(new fs("platform-logger",e=>new d3(e),"PRIVATE")),Cs(new fs("heartbeat",e=>new X3(e),"PRIVATE")),ri(pT,GR,n),ri(pT,GR,"esm2017"),ri("fire-js","")}tj("");var XR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nl,_O;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function k(){}k.prototype=I.prototype,O.D=I.prototype,O.prototype=new k,O.prototype.constructor=O,O.C=function(B,U,F){for(var L=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)L[Te-2]=arguments[Te];return I.prototype[U].apply(B,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,I,k){k||(k=0);var B=Array(16);if(typeof I=="string")for(var U=0;16>U;++U)B[U]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(U=0;16>U;++U)B[U]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=O.g[0],k=O.g[1],U=O.g[2];var F=O.g[3],L=I+(F^k&(U^F))+B[0]+3614090360&4294967295;I=k+(L<<7&4294967295|L>>>25),L=F+(U^I&(k^U))+B[1]+3905402710&4294967295,F=I+(L<<12&4294967295|L>>>20),L=U+(k^F&(I^k))+B[2]+606105819&4294967295,U=F+(L<<17&4294967295|L>>>15),L=k+(I^U&(F^I))+B[3]+3250441966&4294967295,k=U+(L<<22&4294967295|L>>>10),L=I+(F^k&(U^F))+B[4]+4118548399&4294967295,I=k+(L<<7&4294967295|L>>>25),L=F+(U^I&(k^U))+B[5]+1200080426&4294967295,F=I+(L<<12&4294967295|L>>>20),L=U+(k^F&(I^k))+B[6]+2821735955&4294967295,U=F+(L<<17&4294967295|L>>>15),L=k+(I^U&(F^I))+B[7]+4249261313&4294967295,k=U+(L<<22&4294967295|L>>>10),L=I+(F^k&(U^F))+B[8]+1770035416&4294967295,I=k+(L<<7&4294967295|L>>>25),L=F+(U^I&(k^U))+B[9]+2336552879&4294967295,F=I+(L<<12&4294967295|L>>>20),L=U+(k^F&(I^k))+B[10]+4294925233&4294967295,U=F+(L<<17&4294967295|L>>>15),L=k+(I^U&(F^I))+B[11]+2304563134&4294967295,k=U+(L<<22&4294967295|L>>>10),L=I+(F^k&(U^F))+B[12]+1804603682&4294967295,I=k+(L<<7&4294967295|L>>>25),L=F+(U^I&(k^U))+B[13]+4254626195&4294967295,F=I+(L<<12&4294967295|L>>>20),L=U+(k^F&(I^k))+B[14]+2792965006&4294967295,U=F+(L<<17&4294967295|L>>>15),L=k+(I^U&(F^I))+B[15]+1236535329&4294967295,k=U+(L<<22&4294967295|L>>>10),L=I+(U^F&(k^U))+B[1]+4129170786&4294967295,I=k+(L<<5&4294967295|L>>>27),L=F+(k^U&(I^k))+B[6]+3225465664&4294967295,F=I+(L<<9&4294967295|L>>>23),L=U+(I^k&(F^I))+B[11]+643717713&4294967295,U=F+(L<<14&4294967295|L>>>18),L=k+(F^I&(U^F))+B[0]+3921069994&4294967295,k=U+(L<<20&4294967295|L>>>12),L=I+(U^F&(k^U))+B[5]+3593408605&4294967295,I=k+(L<<5&4294967295|L>>>27),L=F+(k^U&(I^k))+B[10]+38016083&4294967295,F=I+(L<<9&4294967295|L>>>23),L=U+(I^k&(F^I))+B[15]+3634488961&4294967295,U=F+(L<<14&4294967295|L>>>18),L=k+(F^I&(U^F))+B[4]+3889429448&4294967295,k=U+(L<<20&4294967295|L>>>12),L=I+(U^F&(k^U))+B[9]+568446438&4294967295,I=k+(L<<5&4294967295|L>>>27),L=F+(k^U&(I^k))+B[14]+3275163606&4294967295,F=I+(L<<9&4294967295|L>>>23),L=U+(I^k&(F^I))+B[3]+4107603335&4294967295,U=F+(L<<14&4294967295|L>>>18),L=k+(F^I&(U^F))+B[8]+1163531501&4294967295,k=U+(L<<20&4294967295|L>>>12),L=I+(U^F&(k^U))+B[13]+2850285829&4294967295,I=k+(L<<5&4294967295|L>>>27),L=F+(k^U&(I^k))+B[2]+4243563512&4294967295,F=I+(L<<9&4294967295|L>>>23),L=U+(I^k&(F^I))+B[7]+1735328473&4294967295,U=F+(L<<14&4294967295|L>>>18),L=k+(F^I&(U^F))+B[12]+2368359562&4294967295,k=U+(L<<20&4294967295|L>>>12),L=I+(k^U^F)+B[5]+4294588738&4294967295,I=k+(L<<4&4294967295|L>>>28),L=F+(I^k^U)+B[8]+2272392833&4294967295,F=I+(L<<11&4294967295|L>>>21),L=U+(F^I^k)+B[11]+1839030562&4294967295,U=F+(L<<16&4294967295|L>>>16),L=k+(U^F^I)+B[14]+4259657740&4294967295,k=U+(L<<23&4294967295|L>>>9),L=I+(k^U^F)+B[1]+2763975236&4294967295,I=k+(L<<4&4294967295|L>>>28),L=F+(I^k^U)+B[4]+1272893353&4294967295,F=I+(L<<11&4294967295|L>>>21),L=U+(F^I^k)+B[7]+4139469664&4294967295,U=F+(L<<16&4294967295|L>>>16),L=k+(U^F^I)+B[10]+3200236656&4294967295,k=U+(L<<23&4294967295|L>>>9),L=I+(k^U^F)+B[13]+681279174&4294967295,I=k+(L<<4&4294967295|L>>>28),L=F+(I^k^U)+B[0]+3936430074&4294967295,F=I+(L<<11&4294967295|L>>>21),L=U+(F^I^k)+B[3]+3572445317&4294967295,U=F+(L<<16&4294967295|L>>>16),L=k+(U^F^I)+B[6]+76029189&4294967295,k=U+(L<<23&4294967295|L>>>9),L=I+(k^U^F)+B[9]+3654602809&4294967295,I=k+(L<<4&4294967295|L>>>28),L=F+(I^k^U)+B[12]+3873151461&4294967295,F=I+(L<<11&4294967295|L>>>21),L=U+(F^I^k)+B[15]+530742520&4294967295,U=F+(L<<16&4294967295|L>>>16),L=k+(U^F^I)+B[2]+3299628645&4294967295,k=U+(L<<23&4294967295|L>>>9),L=I+(U^(k|~F))+B[0]+4096336452&4294967295,I=k+(L<<6&4294967295|L>>>26),L=F+(k^(I|~U))+B[7]+1126891415&4294967295,F=I+(L<<10&4294967295|L>>>22),L=U+(I^(F|~k))+B[14]+2878612391&4294967295,U=F+(L<<15&4294967295|L>>>17),L=k+(F^(U|~I))+B[5]+4237533241&4294967295,k=U+(L<<21&4294967295|L>>>11),L=I+(U^(k|~F))+B[12]+1700485571&4294967295,I=k+(L<<6&4294967295|L>>>26),L=F+(k^(I|~U))+B[3]+2399980690&4294967295,F=I+(L<<10&4294967295|L>>>22),L=U+(I^(F|~k))+B[10]+4293915773&4294967295,U=F+(L<<15&4294967295|L>>>17),L=k+(F^(U|~I))+B[1]+2240044497&4294967295,k=U+(L<<21&4294967295|L>>>11),L=I+(U^(k|~F))+B[8]+1873313359&4294967295,I=k+(L<<6&4294967295|L>>>26),L=F+(k^(I|~U))+B[15]+4264355552&4294967295,F=I+(L<<10&4294967295|L>>>22),L=U+(I^(F|~k))+B[6]+2734768916&4294967295,U=F+(L<<15&4294967295|L>>>17),L=k+(F^(U|~I))+B[13]+1309151649&4294967295,k=U+(L<<21&4294967295|L>>>11),L=I+(U^(k|~F))+B[4]+4149444226&4294967295,I=k+(L<<6&4294967295|L>>>26),L=F+(k^(I|~U))+B[11]+3174756917&4294967295,F=I+(L<<10&4294967295|L>>>22),L=U+(I^(F|~k))+B[2]+718787259&4294967295,U=F+(L<<15&4294967295|L>>>17),L=k+(F^(U|~I))+B[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(U+(L<<21&4294967295|L>>>11))&4294967295,O.g[2]=O.g[2]+U&4294967295,O.g[3]=O.g[3]+F&4294967295}r.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var k=I-this.blockSize,B=this.B,U=this.h,F=0;F<I;){if(U==0)for(;F<=k;)i(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<I;)if(B[U++]=O.charCodeAt(F++),U==this.blockSize){i(this,B),U=0;break}}else for(;F<I;)if(B[U++]=O[F++],U==this.blockSize){i(this,B),U=0;break}}this.h=U,this.o+=I},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var k=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=k&255,k/=256;for(this.u(O),O=Array(16),I=k=0;4>I;++I)for(var B=0;32>B;B+=8)O[k++]=this.g[I]>>>B&255;return O};function s(O,I){var k=u;return Object.prototype.hasOwnProperty.call(k,O)?k[O]:k[O]=I(O)}function a(O,I){this.h=I;for(var k=[],B=!0,U=O.length-1;0<=U;U--){var F=O[U]|0;B&&F==I||(k[U]=F,B=!1)}this.g=k}var u={};function c(O){return-128<=O&&128>O?s(O,function(I){return new a([I|0],0>I?-1:0)}):new a([O|0],0>O?-1:0)}function h(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return S(h(-O));for(var I=[],k=1,B=0;O>=k;B++)I[B]=O/k|0,k*=4294967296;return new a(I,0)}function p(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return S(p(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(I,8)),B=g,U=0;U<O.length;U+=8){var F=Math.min(8,O.length-U),L=parseInt(O.substring(U,U+F),I);8>F?(F=h(Math.pow(I,F)),B=B.j(F).add(h(L))):(B=B.j(k),B=B.add(h(L)))}return B}var g=c(0),_=c(1),A=c(16777216);n=a.prototype,n.m=function(){if(E(this))return-S(this).m();for(var O=0,I=1,k=0;k<this.g.length;k++){var B=this.i(k);O+=(0<=B?B:4294967296+B)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(T(this))return"0";if(E(this))return"-"+S(this).toString(O);for(var I=h(Math.pow(O,6)),k=this,B="";;){var U=H(k,I).g;k=x(k,U.j(I));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(O);if(k=U,T(k))return F+B;for(;6>F.length;)F="0"+F;B=F+B}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function T(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function E(O){return O.h==-1}n.l=function(O){return O=x(this,O),E(O)?-1:T(O)?0:1};function S(O){for(var I=O.g.length,k=[],B=0;B<I;B++)k[B]=~O.g[B];return new a(k,~O.h).add(_)}n.abs=function(){return E(this)?S(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],B=0,U=0;U<=I;U++){var F=B+(this.i(U)&65535)+(O.i(U)&65535),L=(F>>>16)+(this.i(U)>>>16)+(O.i(U)>>>16);B=L>>>16,F&=65535,L&=65535,k[U]=L<<16|F}return new a(k,k[k.length-1]&-2147483648?-1:0)};function x(O,I){return O.add(S(I))}n.j=function(O){if(T(this)||T(O))return g;if(E(this))return E(O)?S(this).j(S(O)):S(S(this).j(O));if(E(O))return S(this.j(S(O)));if(0>this.l(A)&&0>O.l(A))return h(this.m()*O.m());for(var I=this.g.length+O.g.length,k=[],B=0;B<2*I;B++)k[B]=0;for(B=0;B<this.g.length;B++)for(var U=0;U<O.g.length;U++){var F=this.i(B)>>>16,L=this.i(B)&65535,Te=O.i(U)>>>16,be=O.i(U)&65535;k[2*B+2*U]+=L*be,P(k,2*B+2*U),k[2*B+2*U+1]+=F*be,P(k,2*B+2*U+1),k[2*B+2*U+1]+=L*Te,P(k,2*B+2*U+1),k[2*B+2*U+2]+=F*Te,P(k,2*B+2*U+2)}for(B=0;B<I;B++)k[B]=k[2*B+1]<<16|k[2*B];for(B=I;B<2*I;B++)k[B]=0;return new a(k,0)};function P(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function z(O,I){this.g=O,this.h=I}function H(O,I){if(T(I))throw Error("division by zero");if(T(O))return new z(g,g);if(E(O))return I=H(S(O),I),new z(S(I.g),S(I.h));if(E(I))return I=H(O,S(I)),new z(S(I.g),I.h);if(30<O.g.length){if(E(O)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var k=_,B=I;0>=B.l(O);)k=V(k),B=V(B);var U=D(k,1),F=D(B,1);for(B=D(B,2),k=D(k,2);!T(B);){var L=F.add(B);0>=L.l(O)&&(U=U.add(k),F=L),B=D(B,1),k=D(k,1)}return I=x(O,U.j(I)),new z(U,I)}for(U=g;0<=O.l(I);){for(k=Math.max(1,Math.floor(O.m()/I.m())),B=Math.ceil(Math.log(k)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),F=h(k),L=F.j(I);E(L)||0<L.l(O);)k-=B,F=h(k),L=F.j(I);T(F)&&(F=_),U=U.add(F),O=x(O,L)}return new z(U,O)}n.A=function(O){return H(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],B=0;B<I;B++)k[B]=this.i(B)&O.i(B);return new a(k,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],B=0;B<I;B++)k[B]=this.i(B)|O.i(B);return new a(k,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],B=0;B<I;B++)k[B]=this.i(B)^O.i(B);return new a(k,this.h^O.h)};function V(O){for(var I=O.g.length+1,k=[],B=0;B<I;B++)k[B]=O.i(B)<<1|O.i(B-1)>>>31;return new a(k,O.h)}function D(O,I){var k=I>>5;I%=32;for(var B=O.g.length-k,U=[],F=0;F<B;F++)U[F]=0<I?O.i(F+k)>>>I|O.i(F+k+1)<<32-I:O.i(F+k);return new a(U,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_O=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,nl=a}).apply(typeof XR<"u"?XR:typeof self<"u"?self:typeof window<"u"?window:{});var qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vO,od,AO,pg,yT,TO,EO,bO;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,C){return m==Array.prototype||m==Object.prototype||(m[b]=C.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof qm=="object"&&qm];for(var b=0;b<m.length;++b){var C=m[b];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(m,b){if(b)e:{var C=r;m=m.split(".");for(var M=0;M<m.length-1;M++){var Z=m[M];if(!(Z in C))break e;C=C[Z]}m=m[m.length-1],M=C[m],b=b(M),b!=M&&b!=null&&e(C,m,{configurable:!0,writable:!0,value:b})}}function s(m,b){m instanceof String&&(m+="");var C=0,M=!1,Z={next:function(){if(!M&&C<m.length){var oe=C++;return{value:b(oe,m[oe]),done:!1}}return M=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}i("Array.prototype.values",function(m){return m||function(){return s(this,function(b,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function h(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function p(m,b,C){return m.call.apply(m.bind,arguments)}function g(m,b,C){if(!m)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,M),m.apply(b,Z)}}return function(){return m.apply(b,arguments)}}function _(m,b,C){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,_.apply(null,arguments)}function A(m,b){var C=Array.prototype.slice.call(arguments,1);return function(){var M=C.slice();return M.push.apply(M,arguments),m.apply(this,M)}}function T(m,b){function C(){}C.prototype=b.prototype,m.aa=b.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(M,Z,oe){for(var Ee=Array(arguments.length-2),At=2;At<arguments.length;At++)Ee[At-2]=arguments[At];return b.prototype[Z].apply(M,Ee)}}function E(m){const b=m.length;if(0<b){const C=Array(b);for(let M=0;M<b;M++)C[M]=m[M];return C}return[]}function S(m,b){for(let C=1;C<arguments.length;C++){const M=arguments[C];if(c(M)){const Z=m.length||0,oe=M.length||0;m.length=Z+oe;for(let Ee=0;Ee<oe;Ee++)m[Z+Ee]=M[Ee]}else m.push(M)}}class x{constructor(b,C){this.i=b,this.j=C,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function P(m){return/^[\s\xa0]*$/.test(m)}function z(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function H(m){return H[" "](m),m}H[" "]=function(){};var V=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function D(m,b,C){for(const M in m)b.call(C,m[M],M,m)}function O(m,b){for(const C in m)b.call(void 0,m[C],C,m)}function I(m){const b={};for(const C in m)b[C]=m[C];return b}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(m,b){let C,M;for(let Z=1;Z<arguments.length;Z++){M=arguments[Z];for(C in M)m[C]=M[C];for(let oe=0;oe<k.length;oe++)C=k[oe],Object.prototype.hasOwnProperty.call(M,C)&&(m[C]=M[C])}}function U(m){var b=1;m=m.split(":");const C=[];for(;0<b&&m.length;)C.push(m.shift()),b--;return m.length&&C.push(m.join(":")),C}function F(m){u.setTimeout(()=>{throw m},0)}function L(){var m=Ne;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class Te{constructor(){this.h=this.g=null}add(b,C){const M=be.get();M.set(b,C),this.h?this.h.next=M:this.g=M,this.h=M}}var be=new x(()=>new Y,m=>m.reset());class Y{constructor(){this.next=this.g=this.h=null}set(b,C){this.h=b,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let X,le=!1,Ne=new Te,j=()=>{const m=u.Promise.resolve(void 0);X=()=>{m.then(re)}};var re=()=>{for(var m;m=L();){try{m.h.call(m.g)}catch(C){F(C)}var b=be;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}le=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,b),u.removeEventListener("test",C,b)}catch{}return m}();function Re(m,b){if(ae.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,M=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(V){e:{try{H(b.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(b=null)}}else C=="mouseover"?b=m.fromElement:C=="mouseout"&&(b=m.toElement);this.relatedTarget=b,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Le[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Re.aa.h.call(this)}}T(Re,ae);var Le={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var $t="closure_listenable_"+(1e6*Math.random()|0),St=0;function Wt(m,b,C,M,Z){this.listener=m,this.proxy=null,this.src=b,this.type=C,this.capture=!!M,this.ha=Z,this.key=++St,this.da=this.fa=!1}function Nt(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Mn(m){this.src=m,this.g={},this.h=0}Mn.prototype.add=function(m,b,C,M,Z){var oe=m.toString();m=this.g[oe],m||(m=this.g[oe]=[],this.h++);var Ee=di(m,b,M,Z);return-1<Ee?(b=m[Ee],C||(b.fa=!1)):(b=new Wt(b,this.src,oe,!!M,Z),b.fa=C,m.push(b)),b};function er(m,b){var C=b.type;if(C in m.g){var M=m.g[C],Z=Array.prototype.indexOf.call(M,b,void 0),oe;(oe=0<=Z)&&Array.prototype.splice.call(M,Z,1),oe&&(Nt(b),m.g[C].length==0&&(delete m.g[C],m.h--))}}function di(m,b,C,M){for(var Z=0;Z<m.length;++Z){var oe=m[Z];if(!oe.da&&oe.listener==b&&oe.capture==!!C&&oe.ha==M)return Z}return-1}var Jt="closure_lm_"+(1e6*Math.random()|0),gs={};function Is(m,b,C,M,Z){if(Array.isArray(b)){for(var oe=0;oe<b.length;oe++)Is(m,b[oe],C,M,Z);return null}return C=Mr(C),m&&m[$t]?m.K(b,C,h(M)?!!M.capture:!1,Z):an(m,b,C,!1,M,Z)}function an(m,b,C,M,Z,oe){if(!b)throw Error("Invalid event type");var Ee=h(Z)?!!Z.capture:!!Z,At=gr(m);if(At||(m[Jt]=At=new Mn(m)),C=At.add(b,C,M,Ee,oe),C.proxy)return C;if(M=Ns(),C.proxy=M,M.src=m,M.listener=C,m.addEventListener)we||(Z=Ee),Z===void 0&&(Z=!1),m.addEventListener(b.toString(),M,Z);else if(m.attachEvent)m.attachEvent(zi(b.toString()),M);else if(m.addListener&&m.removeListener)m.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ns(){function m(C){return b.call(m.src,m.listener,C)}const b=pi;return m}function Bi(m,b,C,M,Z){if(Array.isArray(b))for(var oe=0;oe<b.length;oe++)Bi(m,b[oe],C,M,Z);else M=h(M)?!!M.capture:!!M,C=Mr(C),m&&m[$t]?(m=m.i,b=String(b).toString(),b in m.g&&(oe=m.g[b],C=di(oe,C,M,Z),-1<C&&(Nt(oe[C]),Array.prototype.splice.call(oe,C,1),oe.length==0&&(delete m.g[b],m.h--)))):m&&(m=gr(m))&&(b=m.g[b.toString()],m=-1,b&&(m=di(b,C,M,Z)),(C=-1<m?b[m]:null)&&ys(C))}function ys(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[$t])er(b.i,m);else{var C=m.type,M=m.proxy;b.removeEventListener?b.removeEventListener(C,M,m.capture):b.detachEvent?b.detachEvent(zi(C),M):b.addListener&&b.removeListener&&b.removeListener(M),(C=gr(b))?(er(C,m),C.h==0&&(C.src=null,b[Jt]=null)):Nt(m)}}}function zi(m){return m in gs?gs[m]:gs[m]="on"+m}function pi(m,b){if(m.da)m=!0;else{b=new Re(b,this);var C=m.listener,M=m.ha||m.src;m.fa&&ys(m),m=C.call(M,b)}return m}function gr(m){return m=m[Jt],m instanceof Mn?m:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mr(m){return typeof m=="function"?m:(m[Kr]||(m[Kr]=function(b){return m.handleEvent(b)}),m[Kr])}function ut(){ce.call(this),this.i=new Mn(this),this.M=this,this.F=null}T(ut,ce),ut.prototype[$t]=!0,ut.prototype.removeEventListener=function(m,b,C,M){Bi(this,m,b,C,M)};function et(m,b){var C,M=m.F;if(M)for(C=[];M;M=M.F)C.push(M);if(m=m.M,M=b.type||b,typeof b=="string")b=new ae(b,m);else if(b instanceof ae)b.target=b.target||m;else{var Z=b;b=new ae(M,m),B(b,Z)}if(Z=!0,C)for(var oe=C.length-1;0<=oe;oe--){var Ee=b.g=C[oe];Z=Dn(Ee,M,!0,b)&&Z}if(Ee=b.g=m,Z=Dn(Ee,M,!0,b)&&Z,Z=Dn(Ee,M,!1,b)&&Z,C)for(oe=0;oe<C.length;oe++)Ee=b.g=C[oe],Z=Dn(Ee,M,!1,b)&&Z}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var C=m.g[b],M=0;M<C.length;M++)Nt(C[M]);delete m.g[b],m.h--}}this.F=null},ut.prototype.K=function(m,b,C,M){return this.i.add(String(m),b,!1,C,M)},ut.prototype.L=function(m,b,C,M){return this.i.add(String(m),b,!0,C,M)};function Dn(m,b,C,M){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var Z=!0,oe=0;oe<b.length;++oe){var Ee=b[oe];if(Ee&&!Ee.da&&Ee.capture==C){var At=Ee.listener,Pn=Ee.ha||Ee.src;Ee.fa&&er(m.i,Ee),Z=At.call(Pn,M)!==!1&&Z}}return Z&&!M.defaultPrevented}function Zt(m,b,C){if(typeof m=="function")C&&(m=_(m,C));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(m,b||0)}function Os(m){m.g=Zt(()=>{m.g=null,m.i&&(m.i=!1,Os(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class Dr extends ce{constructor(b,C){super(),this.m=b,this.l=C,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pr(m){ce.call(this),this.h=m,this.g={}}T(Pr,ce);var Lr=[];function En(m){D(m.g,function(b,C){this.g.hasOwnProperty(C)&&ys(b)},m),m.g={}}Pr.prototype.N=function(){Pr.aa.N.call(this),En(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=u.JSON.stringify,mi=u.JSON.parse,yr=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Ms(){}Ms.prototype.h=null;function Wr(m){return m.h||(m.h=m.i())}function ji(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){ae.call(this,"d")}T(tr,ae);function Ds(){ae.call(this,"c")}T(Ds,ae);var nr={},Ot=null;function rr(){return Ot=Ot||new ut}nr.La="serverreachability";function Ps(m){ae.call(this,nr.La,m)}T(Ps,ae);function G(m){const b=rr();et(b,new Ps(b))}nr.STAT_EVENT="statevent";function J(m,b){ae.call(this,nr.STAT_EVENT,m),this.stat=b}T(J,ae);function ee(m){const b=rr();et(b,new J(b,m))}nr.Ma="timingevent";function he(m,b){ae.call(this,nr.Ma,m),this.size=b}T(he,ae);function _e(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},b)}function Se(){this.g=!0}Se.prototype.xa=function(){this.g=!1};function Be(m,b,C,M,Z,oe){m.info(function(){if(m.g)if(oe)for(var Ee="",At=oe.split("&"),Pn=0;Pn<At.length;Pn++){var Tt=At[Pn].split("=");if(1<Tt.length){var Fn=Tt[0];Tt=Tt[1];var Ln=Fn.split("_");Ee=2<=Ln.length&&Ln[1]=="type"?Ee+(Fn+"="+Tt+"&"):Ee+(Fn+"=redacted&")}}else Ee=null;else Ee=oe;return"XMLHTTP REQ ("+M+") [attempt "+Z+"]: "+b+`
`+C+`
`+Ee})}function Ie(m,b,C,M,Z,oe,Ee){m.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+Z+"]: "+b+`
`+C+`
`+oe+" "+Ee})}function Me(m,b,C,M){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Fe(m,C)+(M?" "+M:"")})}function Ue(m,b){m.info(function(){return"TIMEOUT: "+b})}Se.prototype.info=function(){};function Fe(m,b){if(!m.g)return b;if(!b)return null;try{var C=JSON.parse(b);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var M=C[m];if(!(2>M.length)){var Z=M[1];if(Array.isArray(Z)&&!(1>Z.length)){var oe=Z[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var Ee=1;Ee<Z.length;Ee++)Z[Ee]=""}}}}return bn(C)}catch{return b}}var xe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},it;function wt(){}T(wt,Ms),wt.prototype.g=function(){return new XMLHttpRequest},wt.prototype.i=function(){return{}},it=new wt;function _t(m,b,C,M){this.j=m,this.i=b,this.l=C,this.R=M||1,this.U=new Pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var ve={},K={};function me(m,b,C){m.L=1,m.v=Pl(gi(b)),m.m=C,m.P=!0,Ce(m,null)}function Ce(m,b){m.F=Date.now(),Rt(m),m.A=gi(m.v);var C=m.A,M=m.R;Array.isArray(M)||(M=[String(M)]),Kf(C.i,"t",M),m.C=0,C=m.j.J,m.h=new ht,m.g=Up(m.j,C?b:null,!m.m),0<m.O&&(m.M=new Dr(_(m.Y,m,m.g),m.O)),b=m.U,C=m.g,M=m.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Lr[0]=Z.toString()),Z=Lr);for(var oe=0;oe<Z.length;oe++){var Ee=Is(C,Z[oe],M||b.handleEvent,!1,b.h||b);if(!Ee)break;b.g[Ee.key]=Ee}b=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),G(),Be(m.i,m.u,m.A,m.l,m.R,m.m)}_t.prototype.ca=function(m){m=m.target;const b=this.M;b&&Gi(m)==3?b.j():this.Y(m)},_t.prototype.Y=function(m){try{if(m==this.g)e:{const Ln=Gi(this.g);var b=this.g.Ba();const wo=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||Ip(this.g)))){this.J||Ln!=4||b==7||(b==8||0>=wo?G(3):G(2)),zt(this);var C=this.g.Z();this.X=C;t:if(tt(this)){var M=Ip(this.g);m="";var Z=M.length,oe=Gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ve(this),gn(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(b=0;b<Z;b++)this.h.h=!0,m+=this.h.i.decode(M[b],{stream:!(oe&&b==Z-1)});M.length=0,this.h.g+=m,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=C==200,Ie(this.i,this.u,this.A,this.l,this.R,Ln,C),this.o){if(this.T&&!this.K){t:{if(this.g){var At,Pn=this.g;if((At=Pn.g?Pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(At)){var Tt=At;break t}}Tt=null}if(C=Tt)Me(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tn(this,C);else{this.o=!1,this.s=3,ee(12),Ve(this),gn(this);break e}}if(this.P){C=!0;let sr;for(;!this.J&&this.C<Ee.length;)if(sr=Bt(this,Ee),sr==K){Ln==4&&(this.s=4,ee(14),C=!1),Me(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==ve){this.s=4,ee(15),Me(this.i,this.l,Ee,"[Invalid Chunk]"),C=!1;break}else Me(this.i,this.l,sr,null),tn(this,sr);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||Ee.length!=0||this.h.h||(this.s=1,ee(16),C=!1),this.o=this.o&&C,!C)Me(this.i,this.l,Ee,"[Invalid Chunked Response]"),Ve(this),gn(this);else if(0<Ee.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),Hl(Fn),Fn.M=!0,ee(11))}}else Me(this.i,this.l,Ee,null),tn(this,Ee);Ln==4&&Ve(this),this.o&&!this.J&&(Ln==4?Pp(this.j,this):(this.o=!1,Rt(this)))}else n_(this.g),C==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),Ve(this),gn(this)}}}catch{}finally{}};function tt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Bt(m,b){var C=m.C,M=b.indexOf(`
`,C);return M==-1?K:(C=Number(b.substring(C,M)),isNaN(C)?ve:(M+=1,M+C>b.length?K:(b=b.slice(M,M+C),m.C=M+C,b)))}_t.prototype.cancel=function(){this.J=!0,Ve(this)};function Rt(m){m.S=Date.now()+m.I,en(m,m.I)}function en(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=_e(_(m.ba,m),b)}function zt(m){m.B&&(u.clearTimeout(m.B),m.B=null)}_t.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Ue(this.i,this.A),this.L!=2&&(G(),ee(17)),Ve(this),this.s=2,gn(this)):en(this,this.S-m)};function gn(m){m.j.G==0||m.J||Pp(m.j,m)}function Ve(m){zt(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,En(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function tn(m,b){try{var C=m.j;if(C.G!=0&&(C.g==m||Fi(C.h,m))){if(!m.K&&Fi(C.h,m)&&C.G==3){try{var M=C.Da.g.parse(b)}catch{M=null}if(Array.isArray(M)&&M.length==3){var Z=M;if(Z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)ac(C),sc(C);else break e;Jf(C),ee(18)}}else C.za=Z[1],0<C.za-C.T&&37500>Z[2]&&C.F&&C.v==0&&!C.C&&(C.C=_e(_(C.Za,C),6e3));if(1>=jt(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else So(C,11)}else if((m.K||C.g==m)&&ac(C),!P(b))for(Z=C.Da.g.parse(b),b=0;b<Z.length;b++){let Tt=Z[b];if(C.T=Tt[0],Tt=Tt[1],C.G==2)if(Tt[0]=="c"){C.K=Tt[1],C.ia=Tt[2];const Fn=Tt[3];Fn!=null&&(C.la=Fn,C.j.info("VER="+C.la));const Ln=Tt[4];Ln!=null&&(C.Aa=Ln,C.j.info("SVER="+C.Aa));const wo=Tt[5];wo!=null&&typeof wo=="number"&&0<wo&&(M=1.5*wo,C.L=M,C.j.info("backChannelRequestTimeoutMs_="+M)),M=C;const sr=m.g;if(sr){const Hs=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var oe=M.h;oe.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(_o(oe,oe.h),oe.h=null))}if(M.D){const eh=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;eh&&(M.ya=eh,Pt(M.I,M.D,eh))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),M=C;var Ee=m;if(M.qa=Vp(M,M.J?M.ia:null,M.W),Ee.K){ir(M.h,Ee);var At=Ee,Pn=M.L;Pn&&(At.I=Pn),At.B&&(zt(At),Rt(At)),M.g=Ee}else Mp(M);0<C.i.length&&oc(C)}else Tt[0]!="stop"&&Tt[0]!="close"||So(C,7);else C.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?So(C,7):Qf(C):Tt[0]!="noop"&&C.l&&C.l.ta(Tt),C.v=0)}}G(4)}catch{}}var _r=class{constructor(m,b){this.g=m,this.map=b}};function Qr(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ls(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function jt(m){return m.h?1:m.g?m.g.size:0}function Fi(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function _o(m,b){m.g?m.g.add(b):m.h=b}function ir(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Qr.prototype.cancel=function(){if(this.i=Hf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Hf(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const C of m.g.values())b=b.concat(C.D);return b}return E(m.i)}function J0(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var b=[],C=m.length,M=0;M<C;M++)b.push(m[M]);return b}b=[],C=0;for(M in m)b[C++]=m[M];return b}function Zu(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var b=[];m=m.length;for(var C=0;C<m;C++)b.push(C);return b}b=[],C=0;for(const M in m)b[C++]=M;return b}}}function qf(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var C=Zu(m),M=J0(m),Z=M.length,oe=0;oe<Z;oe++)b.call(void 0,M[oe],C&&C[oe],m)}var Ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z0(m,b){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var M=m[C].indexOf("="),Z=null;if(0<=M){var oe=m[C].substring(0,M);Z=m[C].substring(M+1)}else oe=m[C];b(oe,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Sn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Sn){this.h=m.h,Dl(this,m.j),this.o=m.o,this.g=m.g,ca(this,m.s),this.l=m.l;var b=m.i,C=new Ao;C.i=b.i,b.g&&(C.g=new Map(b.g),C.h=b.h),vo(this,C),this.m=m.m}else m&&(b=String(m).match(Ml))?(this.h=!1,Dl(this,b[1]||"",!0),this.o=Hi(b[2]||""),this.g=Hi(b[3]||"",!0),ca(this,b[4]),this.l=Hi(b[5]||"",!0),vo(this,b[6]||"",!0),this.m=Hi(b[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}Sn.prototype.toString=function(){var m=[],b=this.j;b&&m.push(Ll(b,$f,!0),":");var C=this.g;return(C||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Ll(b,$f,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Ll(C,C.charAt(0)=="/"?e_:Gf,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Ll(C,ec)),m.join("")};function gi(m){return new Sn(m)}function Dl(m,b,C){m.j=C?Hi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function ca(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function vo(m,b,C){b instanceof Ao?(m.i=b,xp(m.i,m.h)):(C||(b=Ll(b,t_)),m.i=new Ao(b,m.h))}function Pt(m,b,C){m.i.set(b,C)}function Pl(m){return Pt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Hi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ll(m,b,C){return typeof m=="string"?(m=encodeURI(m).replace(b,Rp),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Rp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var $f=/[#\/\?@]/g,Gf=/[#\?:]/g,e_=/[#\?]/g,t_=/[#\?@]/g,ec=/#/g;function Ao(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function qi(m){m.g||(m.g=new Map,m.h=0,m.i&&Z0(m.i,function(b,C){m.add(decodeURIComponent(b.replace(/\+/g," ")),C)}))}n=Ao.prototype,n.add=function(m,b){qi(this),this.i=null,m=Vs(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(b),this.h+=1,this};function To(m,b){qi(m),b=Vs(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Eo(m,b){return qi(m),b=Vs(m,b),m.g.has(b)}n.forEach=function(m,b){qi(this),this.g.forEach(function(C,M){C.forEach(function(Z){m.call(b,Z,M,this)},this)},this)},n.na=function(){qi(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),C=[];for(let M=0;M<b.length;M++){const Z=m[M];for(let oe=0;oe<Z.length;oe++)C.push(b[M])}return C},n.V=function(m){qi(this);let b=[];if(typeof m=="string")Eo(this,m)&&(b=b.concat(this.g.get(Vs(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)b=b.concat(m[C])}return b},n.set=function(m,b){return qi(this),this.i=null,m=Vs(this,m),Eo(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function Kf(m,b,C){To(m,b),0<C.length&&(m.i=null,m.g.set(Vs(m,b),E(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var C=0;C<b.length;C++){var M=b[C];const oe=encodeURIComponent(String(M)),Ee=this.V(M);for(M=0;M<Ee.length;M++){var Z=oe;Ee[M]!==""&&(Z+="="+encodeURIComponent(String(Ee[M]))),m.push(Z)}}return this.i=m.join("&")};function Vs(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function xp(m,b){b&&!m.j&&(qi(m),m.i=null,m.g.forEach(function(C,M){var Z=M.toLowerCase();M!=Z&&(To(this,M),Kf(this,Z,C))},m)),m.j=b}function Vl(m,b){const C=new Se;if(u.Image){const M=new Image;M.onload=A($i,C,"TestLoadImage: loaded",!0,b,M),M.onerror=A($i,C,"TestLoadImage: error",!1,b,M),M.onabort=A($i,C,"TestLoadImage: abort",!1,b,M),M.ontimeout=A($i,C,"TestLoadImage: timeout",!1,b,M),u.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=m}else b(!1)}function _s(m,b){const C=new Se,M=new AbortController,Z=setTimeout(()=>{M.abort(),$i(C,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:M.signal}).then(oe=>{clearTimeout(Z),oe.ok?$i(C,"TestPingServer: ok",!0,b):$i(C,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Z),$i(C,"TestPingServer: error",!1,b)})}function $i(m,b,C,M,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),M(C)}catch{}}function Ul(){this.g=new yr}function Us(m,b,C){const M=C||"";try{qf(m,function(Z,oe){let Ee=Z;h(Z)&&(Ee=bn(Z)),b.push(M+oe+"="+encodeURIComponent(Ee))})}catch(Z){throw b.push(M+"type="+encodeURIComponent("_badmap")),Z}}function fa(m){this.l=m.Ub||null,this.j=m.eb||!1}T(fa,Ms),fa.prototype.g=function(){return new bo(this.l,this.j)},fa.prototype.i=function(m){return function(){return m}}({});function bo(m,b){ut.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(bo,ut),n=bo.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,zs(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wf(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wf(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Bs(this):zs(this),this.readyState==3&&Wf(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Bs(this))},n.Qa=function(m){this.g&&(this.response=m,Bs(this))},n.ga=function(){this.g&&Bs(this)};function Bs(m){m.readyState=4,m.l=null,m.j=null,m.v=null,zs(m)}n.setRequestHeader=function(m,b){this.u.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var C=b.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=b.next();return m.join(`\r
`)};function zs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Yf(m){let b="";return D(m,function(C,M){b+=M,b+=":",b+=C,b+=`\r
`}),b}function jn(m,b,C){e:{for(M in C){var M=!1;break e}M=!0}M||(C=Yf(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):Pt(m,b,C))}function kt(m){ut.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(kt,ut);var tc=/^https?$/i,Bl=["POST","PUT"];n=kt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,b,C,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():it.g(),this.v=this.o?Wr(this.o):Wr(it),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(oe){kp(this,oe);return}if(m=C||"",C=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var Z in M)C.set(Z,M[Z]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const oe of M.keys())C.set(oe,M.get(oe));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(C.keys()).find(oe=>oe.toLowerCase()=="content-type"),Z=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Bl,b,void 0))||M||Z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Ee]of C)this.g.setRequestHeader(oe,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zl(this),this.u=!0,this.g.send(m),this.u=!1}catch(oe){kp(this,oe)}};function kp(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,nc(m),js(m)}function nc(m){m.A||(m.A=!0,et(m,"complete"),et(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,et(this,"complete"),et(this,"abort"),js(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rc(this):this.bb())},n.bb=function(){rc(this)};function rc(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Gi(m)!=4||m.Z()!=2)){if(m.u&&Gi(m)==4)Zt(m.Ea,0,m);else if(et(m,"readystatechange"),Gi(m)==4){m.h=!1;try{const Ee=m.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var C;if(!(C=b)){var M;if(M=Ee===0){var Z=String(m.D).match(Ml)[1]||null;!Z&&u.self&&u.self.location&&(Z=u.self.location.protocol.slice(0,-1)),M=!tc.test(Z?Z.toLowerCase():"")}C=M}if(C)et(m,"complete"),et(m,"success");else{m.m=6;try{var oe=2<Gi(m)?m.g.statusText:""}catch{oe=""}m.l=oe+" ["+m.Z()+"]",nc(m)}}finally{js(m)}}}}function js(m,b){if(m.g){zl(m);const C=m.g,M=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||et(m,"ready");try{C.onreadystatechange=M}catch{}}}function zl(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Gi(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Gi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),mi(b)}};function Ip(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function n_(m){const b={};m=(m.g&&2<=Gi(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<m.length;M++){if(P(m[M]))continue;var C=U(m[M]);const Z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const oe=b[Z]||[];b[Z]=oe,oe.push(C)}O(b,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jl(m,b,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||b}function ic(m){this.Aa=0,this.i=[],this.j=new Se,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jl("baseRetryDelayMs",5e3,m),this.cb=jl("retryDelaySeedMs",1e4,m),this.Wa=jl("forwardChannelMaxRetries",2,m),this.wa=jl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(m&&m.concurrentRequestLimit),this.Da=new Ul,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ic.prototype,n.la=8,n.G=1,n.connect=function(m,b,C,M){ee(0),this.W=m,this.H=b||{},C&&M!==void 0&&(this.H.OSID=C,this.H.OAID=M),this.F=this.X,this.I=Vp(this,null,this.W),oc(this)};function Qf(m){if(Np(m),m.G==3){var b=m.U++,C=gi(m.I);if(Pt(C,"SID",m.K),Pt(C,"RID",b),Pt(C,"TYPE","terminate"),Fl(m,C),b=new _t(m,m.j,b),b.L=2,b.v=Pl(gi(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=b.v,C=!0),C||(b.g=Up(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Rt(b)}Lp(m)}function sc(m){m.g&&(Hl(m),m.g.cancel(),m.g=null)}function Np(m){sc(m),m.u&&(u.clearTimeout(m.u),m.u=null),ac(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function oc(m){if(!Ls(m.h)&&!m.s){m.s=!0;var b=m.Ga;X||j(),le||(X(),le=!0),Ne.add(b,m),m.B=0}}function r_(m,b){return jt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=_e(_(m.Ga,m,b),Zf(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Z=new _t(this,this.j,m);let oe=this.o;if(this.S&&(oe?(oe=I(oe),B(oe,this.S)):oe=this.S),this.m!==null||this.O||(Z.H=oe,oe=null),this.P)e:{for(var b=0,C=0;C<this.i.length;C++){t:{var M=this.i[C];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(b+=M,4096<b){b=C;break e}if(b===4096||C===this.i.length-1){b=C+1;break e}}b=1e3}else b=1e3;b=Op(this,Z,b),C=gi(this.I),Pt(C,"RID",m),Pt(C,"CVER",22),this.D&&Pt(C,"X-HTTP-Session-Id",this.D),Fl(this,C),oe&&(this.O?b="headers="+encodeURIComponent(String(Yf(oe)))+"&"+b:this.m&&jn(C,this.m,oe)),_o(this.h,Z),this.Ua&&Pt(C,"TYPE","init"),this.P?(Pt(C,"$req",b),Pt(C,"SID","null"),Z.T=!0,me(Z,C,null)):me(Z,C,b),this.G=2}}else this.G==3&&(m?Xf(this,m):this.i.length==0||Ls(this.h)||Xf(this))};function Xf(m,b){var C;b?C=b.l:C=m.U++;const M=gi(m.I);Pt(M,"SID",m.K),Pt(M,"RID",C),Pt(M,"AID",m.T),Fl(m,M),m.m&&m.o&&jn(M,m.m,m.o),C=new _t(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),b&&(m.i=b.D.concat(m.i)),b=Op(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),_o(m.h,C),me(C,M,b)}function Fl(m,b){m.H&&D(m.H,function(C,M){Pt(b,M,C)}),m.l&&qf({},function(C,M){Pt(b,M,C)})}function Op(m,b,C){C=Math.min(m.i.length,C);var M=m.l?_(m.l.Na,m.l,m):null;e:{var Z=m.i;let oe=-1;for(;;){const Ee=["count="+C];oe==-1?0<C?(oe=Z[0].g,Ee.push("ofs="+oe)):oe=0:Ee.push("ofs="+oe);let At=!0;for(let Pn=0;Pn<C;Pn++){let Tt=Z[Pn].g;const Fn=Z[Pn].map;if(Tt-=oe,0>Tt)oe=Math.max(0,Z[Pn].g-100),At=!1;else try{Us(Fn,Ee,"req"+Tt+"_")}catch{M&&M(Fn)}}if(At){M=Ee.join("&");break e}}}return m=m.i.splice(0,C),b.D=m,M}function Mp(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;X||j(),le||(X(),le=!0),Ne.add(b,m),m.v=0}}function Jf(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=_e(_(m.Fa,m),Zf(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Dp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=_e(_(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),sc(this),Dp(this))};function Hl(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Dp(m){m.g=new _t(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=gi(m.qa);Pt(b,"RID","rpc"),Pt(b,"SID",m.K),Pt(b,"AID",m.T),Pt(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&Pt(b,"TO",m.ja),Pt(b,"TYPE","xmlhttp"),Fl(m,b),m.m&&m.o&&jn(b,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Pl(gi(b)),C.m=null,C.P=!0,Ce(C,m)}n.Za=function(){this.C!=null&&(this.C=null,sc(this),Jf(this),ee(19))};function ac(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Pp(m,b){var C=null;if(m.g==b){ac(m),Hl(m),m.g=null;var M=2}else if(Fi(m.h,b))C=b.D,ir(m.h,b),M=1;else return;if(m.G!=0){if(b.o)if(M==1){C=b.m?b.m.length:0,b=Date.now()-b.F;var Z=m.B;M=rr(),et(M,new he(M,C)),oc(m)}else Mp(m);else if(Z=b.s,Z==3||Z==0&&0<b.X||!(M==1&&r_(m,b)||M==2&&Jf(m)))switch(C&&0<C.length&&(b=m.h,b.i=b.i.concat(C)),Z){case 1:So(m,5);break;case 4:So(m,10);break;case 3:So(m,6);break;default:So(m,2)}}}function Zf(m,b){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*b}function So(m,b){if(m.j.info("Error code "+b),b==2){var C=_(m.fb,m),M=m.Xa;const Z=!M;M=new Sn(M||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Dl(M,"https"),Pl(M),Z?Vl(M.toString(),C):_s(M.toString(),C)}else ee(2);m.G=0,m.l&&m.l.sa(b),Lp(m),Np(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function Lp(m){if(m.G=0,m.ka=[],m.l){const b=Hf(m.h);(b.length!=0||m.i.length!=0)&&(S(m.ka,b),S(m.ka,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.ra()}}function Vp(m,b,C){var M=C instanceof Sn?gi(C):new Sn(C);if(M.g!="")b&&(M.g=b+"."+M.g),ca(M,M.s);else{var Z=u.location;M=Z.protocol,b=b?b+"."+Z.hostname:Z.hostname,Z=+Z.port;var oe=new Sn(null);M&&Dl(oe,M),b&&(oe.g=b),Z&&ca(oe,Z),C&&(oe.l=C),M=oe}return C=m.D,b=m.ya,C&&b&&Pt(M,C,b),Pt(M,"VER",m.la),Fl(m,M),M}function Up(m,b,C){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new kt(new fa({eb:C})):new kt(m.pa),b.Ha(m.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bp(){}n=Bp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lc(){}lc.prototype.g=function(m,b){return new Vr(m,b)};function Vr(m,b){ut.call(this),this.g=new ic(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!P(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!P(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Fs(this)}T(Vr,ut),Vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){Qf(this.g)},Vr.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=bn(m),m=C);b.i.push(new _r(b.Ya++,m)),b.G==3&&oc(b)},Vr.prototype.N=function(){this.g.l=null,delete this.j,Qf(this.g),delete this.g,Vr.aa.N.call(this)};function zp(m){tr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const C in b){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}T(zp,tr);function jp(){Ds.call(this),this.status=1}T(jp,Ds);function Fs(m){this.g=m}T(Fs,Bp),Fs.prototype.ua=function(){et(this.g,"a")},Fs.prototype.ta=function(m){et(this.g,new zp(m))},Fs.prototype.sa=function(m){et(this.g,new jp)},Fs.prototype.ra=function(){et(this.g,"b")},lc.prototype.createWebChannel=lc.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,bO=function(){return new lc},EO=function(){return rr()},TO=nr,yT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,pg=xe,He.COMPLETE="complete",AO=He,ji.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,od=ji,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,vO=kt}).apply(typeof qm<"u"?qm:typeof self<"u"?self:typeof window<"u"?window:{});const JR="@firebase/firestore",ZR="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new u0("@firebase/firestore");function jc(){return Du.logLevel}function Oe(n,...e){if(Du.logLevel<=gt.DEBUG){const t=e.map(KE);Du.debug(`Firestore (${Pf}): ${n}`,...t)}}function ta(n,...e){if(Du.logLevel<=gt.ERROR){const t=e.map(KE);Du.error(`Firestore (${Pf}): ${n}`,...t)}}function uf(n,...e){if(Du.logLevel<=gt.WARN){const t=e.map(KE);Du.warn(`Firestore (${Pf}): ${n}`,...t)}}function KE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,SO(n,r,t)}function SO(n,e,t){let r=`FIRESTORE (${Pf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ta(r),new Error(r)}function It(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||SO(e,i,r)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(br.UNAUTHENTICATED))}shutdown(){}}class rj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ij{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new Qo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qo,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qo)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new wO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class sj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ex{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const r=s=>{s.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ex(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ex(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=lj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function _T(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return lt(r,i);{const s=CO(),a=uj(s.encode(tx(n,t)),s.encode(tx(e,t)));return a!==0?a:lt(r,i)}}t+=r>65535?2:1}return lt(n.length,e.length)}function tx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function uj(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function cf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=-62135596800,rx=1e6;class On{static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*rx);return new On(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<nx)throw new je(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rx}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-nx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new On(0,0))}static max(){return new Xe(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="__name__";class Js{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Js.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Js.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return lt(e.length,t.length)}static compareSegments(e,t){const r=Js.isNumericId(e),i=Js.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Js.extractNumericId(e).compare(Js.extractNumericId(t)):_T(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nl.fromString(e.substring(4,e.length-2))}}class Qt extends Js{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const cj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Js{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return cj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ix}static keyField(){return new dr([ix])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new je(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new je(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new je(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new je(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Qt.fromString(e))}static fromName(e){return new $e(Qt.fromString(e).popFirst(5))}static empty(){return new $e(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=-1;function fj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Xe.fromTimestamp(r===1e9?new On(t+1,0):new On(t,r));return new pl(i,$e.empty(),e)}function hj(n){return new pl(n.readTime,n.key,Ud)}class pl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new pl(Xe.min(),$e.empty(),Ud)}static max(){return new pl(Xe.max(),$e.empty(),Ud)}}function dj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$e.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==pj)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&t()},c=>r(c))}),a=!0,s===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new pe((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const h=c;t(e[h]).next(p=>{a[h]=p,++u,u===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new pe((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function gj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}c0.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=-1;function f0(n){return n==null}function Fg(n){return n===0&&1/n==-1/0}function yj(n){return typeof n=="number"&&Number.isInteger(n)&&!Fg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="";function _j(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sx(e)),e=vj(n.get(t),e);return sx(e)}function vj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case xO:t+="";break;default:t+=s}}return t}function sx(n){return n+xO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t){this.comparator=e,this.root=t||cr.EMPTY}insert(e,t){return new on(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new on(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $m(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $m(this.root,e,this.comparator,!1)}getReverseIterator(){return new $m(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $m(this.root,e,this.comparator,!0)}}class $m{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??cr.RED,this.left=i??cr.EMPTY,this.right=s??cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new cr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.comparator=e,this.data=new on(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ax(this.data.getIterator())}getIteratorFrom(e){return new ax(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class ax{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new Ii([])}unionWith(e){let t=new zn(dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new IO("Invalid base64 string: "+s):s}}(e);return new mr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const Aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(n){if(It(!!n,39018),typeof n=="string"){let e=0;const t=Aj.exec(n);if(It(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vn(n.seconds),nanos:vn(n.nanos)}}function vn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gl(n){return typeof n=="string"?mr.fromBase64String(n):mr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="server_timestamp",OO="__type__",MO="__previous_value__",DO="__local_write_time__";function YE(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[OO])===null||t===void 0?void 0:t.stringValue)===NO}function h0(n){const e=n.mapValue.fields[MO];return YE(e)?h0(e):e}function Bd(n){const e=ml(n.mapValue.fields[DO].timestampValue);return new On(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,t,r,i,s,a,u,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const Hg="(default)";class zd{constructor(e,t){this.projectId=e,this.database=t||Hg}static empty(){return new zd("","")}get isDefaultDatabase(){return this.database===Hg}isEqual(e){return e instanceof zd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="__type__",Ej="__max__",Gm={mapValue:{}},LO="__vector__",qg="value";function yl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YE(n)?4:Sj(n)?9007199254740991:bj(n)?10:11:Ye(28295,{value:n})}function fo(n,e){if(n===e)return!0;const t=yl(n);if(t!==yl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bd(n).isEqual(Bd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ml(i.timestampValue),u=ml(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return gl(i.bytesValue).isEqual(gl(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return vn(i.geoPointValue.latitude)===vn(s.geoPointValue.latitude)&&vn(i.geoPointValue.longitude)===vn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vn(i.integerValue)===vn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=vn(i.doubleValue),u=vn(s.doubleValue);return a===u?Fg(a)===Fg(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return cf(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(ox(a)!==ox(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!fo(a[c],u[c])))return!1;return!0}(n,e);default:return Ye(52216,{left:n})}}function jd(n,e){return(n.values||[]).find(t=>fo(t,e))!==void 0}function ff(n,e){if(n===e)return 0;const t=yl(n),r=yl(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(s,a){const u=vn(s.integerValue||s.doubleValue),c=vn(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return lx(n.timestampValue,e.timestampValue);case 4:return lx(Bd(n),Bd(e));case 5:return _T(n.stringValue,e.stringValue);case 6:return function(s,a){const u=gl(s),c=gl(a);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=lt(u[h],c[h]);if(p!==0)return p}return lt(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const u=lt(vn(s.latitude),vn(a.latitude));return u!==0?u:lt(vn(s.longitude),vn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ux(n.arrayValue,e.arrayValue);case 10:return function(s,a){var u,c,h,p;const g=s.fields||{},_=a.fields||{},A=(u=g[qg])===null||u===void 0?void 0:u.arrayValue,T=(c=_[qg])===null||c===void 0?void 0:c.arrayValue,E=lt(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return E!==0?E:ux(A,T)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Gm.mapValue&&a===Gm.mapValue)return 0;if(s===Gm.mapValue)return 1;if(a===Gm.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),h=a.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=_T(c[g],p[g]);if(_!==0)return _;const A=ff(u[c[g]],h[p[g]]);if(A!==0)return A}return lt(c.length,p.length)}(n.mapValue,e.mapValue);default:throw Ye(23264,{Pe:t})}}function lx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=ml(n),r=ml(e),i=lt(t.seconds,r.seconds);return i!==0?i:lt(t.nanos,r.nanos)}function ux(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ff(t[i],r[i]);if(s)return s}return lt(t.length,r.length)}function hf(n){return vT(n)}function vT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ml(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=vT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${vT(t.fields[a])}`;return i+"}"}(n.mapValue):Ye(61005,{value:n})}function mg(n){switch(yl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=h0(n);return e?16+mg(e):16;case 5:return 2*n.stringValue.length;case 6:return gl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+mg(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return wl(r.fields,(s,a)=>{i+=s.length+mg(a)}),i}(n.mapValue);default:throw Ye(13486,{value:n})}}function AT(n){return!!n&&"integerValue"in n}function QE(n){return!!n&&"arrayValue"in n}function cx(n){return!!n&&"nullValue"in n}function fx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gg(n){return!!n&&"mapValue"in n}function bj(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[PO])===null||t===void 0?void 0:t.stringValue)===LO}function gd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ej}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gd(t)}setAll(e){let t=dr.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=gd(a):i.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());gg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ni(gd(this.value))}}function VO(n){const e=[];return wl(n.fields,(t,r)=>{const i=new dr([t]);if(gg(r)){const s=VO(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new wr(e,0,Xe.min(),Xe.min(),Xe.min(),ni.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,Xe.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,Xe.min(),Xe.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,Xe.min(),Xe.min(),ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t){this.position=e,this.inclusive=t}}function hx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=$e.comparator($e.fromName(a.referenceValue),t.key):r=ff(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t="asc"){this.field=e,this.dir=t}}function wj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{}class Bn extends UO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Rj(e,t,r):t==="array-contains"?new Ij(e,r):t==="in"?new Nj(e,r):t==="not-in"?new Oj(e,r):t==="array-contains-any"?new Mj(e,r):new Bn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xj(e,r):new kj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ff(t,this.value)):t!==null&&yl(this.value)===yl(t)&&this.matchesComparison(ff(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ho extends UO{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ho(e,t)}matches(e){return BO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function BO(n){return n.op==="and"}function zO(n){return Cj(n)&&BO(n)}function Cj(n){for(const e of n.filters)if(e instanceof ho)return!1;return!0}function TT(n){if(n instanceof Bn)return n.field.canonicalString()+n.op.toString()+hf(n.value);if(zO(n))return n.filters.map(e=>TT(e)).join(",");{const e=n.filters.map(t=>TT(t)).join(",");return`${n.op}(${e})`}}function jO(n,e){return n instanceof Bn?function(r,i){return i instanceof Bn&&r.op===i.op&&r.field.isEqual(i.field)&&fo(r.value,i.value)}(n,e):n instanceof ho?function(r,i){return i instanceof ho&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&jO(a,i.filters[u]),!0):!1}(n,e):void Ye(19439)}function FO(n){return n instanceof Bn?function(t){return`${t.field.canonicalString()} ${t.op} ${hf(t.value)}`}(n):n instanceof ho?function(t){return t.op.toString()+" {"+t.getFilters().map(FO).join(" ,")+"}"}(n):"Filter"}class Rj extends Bn{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class xj extends Bn{constructor(e,t){super(e,"in",t),this.keys=HO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kj extends Bn{constructor(e,t){super(e,"not-in",t),this.keys=HO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Ij extends Bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return QE(t)&&jd(t.arrayValue,this.value)}}class Nj extends Bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jd(this.value.arrayValue,t)}}class Oj extends Bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jd(this.value.arrayValue,t)}}class Mj extends Bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!QE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Ie=null}}function px(n,e=null,t=[],r=[],i=null,s=null,a=null){return new Dj(n,e,t,r,i,s,a)}function XE(n){const e=Ze(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),f0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hf(r)).join(",")),e.Ie=t}return e.Ie}function JE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dx(n.startAt,e.startAt)&&dx(n.endAt,e.endAt)}function ET(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Pj(n,e,t,r,i,s,a,u){return new d0(n,e,t,r,i,s,a,u)}function ZE(n){return new d0(n)}function mx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Lj(n){return n.collectionGroup!==null}function yd(n){const e=Ze(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new zn(dr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Gg(s,r))}),t.has(dr.keyField().canonicalString())||e.Ee.push(new Gg(dr.keyField(),r))}return e.Ee}function so(n){const e=Ze(n);return e.de||(e.de=Vj(e,yd(n))),e.de}function Vj(n,e){if(n.limitType==="F")return px(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gg(i.field,s)});const t=n.endAt?new $g(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $g(n.startAt.position,n.startAt.inclusive):null;return px(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function bT(n,e,t){return new d0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function p0(n,e){return JE(so(n),so(e))&&n.limitType===e.limitType}function qO(n){return`${XE(so(n))}|lt:${n.limitType}`}function Fc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>FO(i)).join(", ")}]`),f0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hf(i)).join(",")),`Target(${r})`}(so(n))}; limitType=${n.limitType})`}function m0(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of yd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,c){const h=hx(a,u,c);return a.inclusive?h<=0:h<0}(r.startAt,yd(r),i)||r.endAt&&!function(a,u,c){const h=hx(a,u,c);return a.inclusive?h>=0:h>0}(r.endAt,yd(r),i))}(n,e)}function Uj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $O(n){return(e,t)=>{let r=!1;for(const i of yd(n)){const s=Bj(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Bj(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(s,a,u){const c=a.data.field(s),h=u.data.field(s);return c!==null&&h!==null?ff(c,h):Ye(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return kO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=new on($e.comparator);function na(){return zj}const GO=new on($e.comparator);function ad(...n){let e=GO;for(const t of n)e=e.insert(t.key,t);return e}function KO(n){let e=GO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gu(){return _d()}function WO(){return _d()}function _d(){return new Yu(n=>n.toString(),(n,e)=>n.isEqual(e))}const jj=new on($e.comparator),Fj=new zn($e.comparator);function yt(...n){let e=Fj;for(const t of n)e=e.add(t);return e}const Hj=new zn(lt);function qj(){return Hj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fg(e)?"-0":e}}function YO(n){return{integerValue:""+n}}function $j(n,e){return yj(e)?YO(e):eb(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this._=void 0}}function Gj(n,e,t){return n instanceof Fd?function(i,s){const a={fields:{[OO]:{stringValue:NO},[DO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&YE(s)&&(s=h0(s)),s&&(a.fields[MO]=s),{mapValue:a}}(t,e):n instanceof df?XO(n,e):n instanceof pf?JO(n,e):function(i,s){const a=QO(i,s),u=gx(a)+gx(i.Re);return AT(a)&&AT(i.Re)?YO(u):eb(i.serializer,u)}(n,e)}function Kj(n,e,t){return n instanceof df?XO(n,e):n instanceof pf?JO(n,e):t}function QO(n,e){return n instanceof Kg?function(r){return AT(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Fd extends g0{}class df extends g0{constructor(e){super(),this.elements=e}}function XO(n,e){const t=ZO(e);for(const r of n.elements)t.some(i=>fo(i,r))||t.push(r);return{arrayValue:{values:t}}}class pf extends g0{constructor(e){super(),this.elements=e}}function JO(n,e){let t=ZO(e);for(const r of n.elements)t=t.filter(i=>!fo(i,r));return{arrayValue:{values:t}}}class Kg extends g0{constructor(e,t){super(),this.serializer=e,this.Re=t}}function gx(n){return vn(n.integerValue||n.doubleValue)}function ZO(n){return QE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.field=e,this.transform=t}}function Wj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof df&&i instanceof df||r instanceof pf&&i instanceof pf?cf(r.elements,i.elements,fo):r instanceof Kg&&i instanceof Kg?fo(r.Re,i.Re):r instanceof Fd&&i instanceof Fd}(n.transform,e.transform)}class Yj{constructor(e,t){this.version=e,this.transformResults=t}}class oo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oo}static exists(e){return new oo(void 0,e)}static updateTime(e){return new oo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class y0{}function eM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nM(n.key,oo.none()):new hp(n.key,n.data,oo.none());{const t=n.data,r=ni.empty();let i=new zn(dr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Cl(n.key,r,new Ii(i.toArray()),oo.none())}}function Qj(n,e,t){n instanceof hp?function(i,s,a){const u=i.value.clone(),c=_x(i.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Cl?function(i,s,a){if(!yg(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=_x(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(tM(i)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function vd(n,e,t,r){return n instanceof hp?function(s,a,u,c){if(!yg(s.precondition,a))return u;const h=s.value.clone(),p=vx(s.fieldTransforms,c,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cl?function(s,a,u,c){if(!yg(s.precondition,a))return u;const h=vx(s.fieldTransforms,c,a),p=a.data;return p.setAll(tM(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,a,u){return yg(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function Xj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=QO(r.transform,i||null);s!=null&&(t===null&&(t=ni.empty()),t.set(r.field,s))}return t||null}function yx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cf(r,i,(s,a)=>Wj(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hp extends y0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cl extends y0{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _x(n,e,t){const r=new Map;It(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,Kj(a,u,t[i]))}return r}function vx(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,Gj(s,a,e))}return r}class nM extends y0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jj extends y0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Qj(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WO();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const c=eM(a,u);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yt())}isEqual(e){return this.batchId===e.batchId&&cf(this.mutations,e.mutations,(t,r)=>yx(t,r))&&cf(this.baseMutations,e.baseMutations,(t,r)=>yx(t,r))}}class nb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return jj}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new nb(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,bt;function nF(n){switch(n){case ge.OK:return Ye(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function rM(n){if(n===void 0)return ta("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Rn.OK:return ge.OK;case Rn.CANCELLED:return ge.CANCELLED;case Rn.UNKNOWN:return ge.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return ge.INTERNAL;case Rn.UNAVAILABLE:return ge.UNAVAILABLE;case Rn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Rn.NOT_FOUND:return ge.NOT_FOUND;case Rn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Rn.ABORTED:return ge.ABORTED;case Rn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Rn.DATA_LOSS:return ge.DATA_LOSS;default:return Ye(39323,{code:n})}}(bt=Rn||(Rn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=new nl([4294967295,4294967295],0);function Ax(n){const e=CO().encode(n),t=new _O;return t.update(e),new Uint8Array(t.digest())}function Tx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nl([t,r],0),new nl([i,s],0)]}class rb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ld(`Invalid padding: ${t}`);if(r<0)throw new ld(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ld(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ld(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=nl.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(nl.fromNumber(r)));return i.compare(rF)===1&&(i=new nl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Ax(e),[r,i]=Tx(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);if(!this.be(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new rb(s,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.pe===0)return;const t=Ax(e),[r,i]=Tx(t);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ld extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,dp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _0(Xe.min(),i,new on(lt),na(),yt())}}class dp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dp(r,t,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class iM{constructor(e,t){this.targetId=e,this.Ce=t}}class sM{constructor(e,t,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ex{constructor(){this.Fe=0,this.Me=bx(),this.xe=mr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=yt(),t=yt(),r=yt();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye(38017,{changeType:s})}}),new dp(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=bx()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,It(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class iF{constructor(e){this.ze=e,this.je=new Map,this.He=na(),this.Je=Km(),this.Ye=Km(),this.Ze=new on(lt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(ET(s))if(r===0){const a=new $e(s.path);this.tt(t,a,wr.newNoDocument(a,Xe.min()))}else It(r===1,20013,{expectedCount:r});else{const a=this.ut(t);if(a!==r){const u=this.ct(e),c=u?this.lt(u,e,a):1;if(c!==0){this.st(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=gl(r).toUint8Array()}catch(c){if(c instanceof IO)return uf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new rb(a,i,s)}catch(c){return uf(c instanceof ld?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.pe===0?null:u}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.ze.Pt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,a)=>{const u=this._t(a);if(u){if(s.current&&ET(u.target)){const c=new $e(u.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,wr.newNoDocument(c,e))}s.Le&&(t.set(a,s.qe()),s.Qe())}});let r=yt();this.Ye.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const h=this._t(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const i=new _0(e,t,this.Ze,this.He,r);return this.He=na(),this.Je=Km(),this.Ye=Km(),this.Ze=new on(lt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ex,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new zn(lt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new zn(lt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ex),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Km(){return new on($e.comparator)}function bx(){return new on($e.comparator)}const sF={asc:"ASCENDING",desc:"DESCENDING"},oF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aF={and:"AND",or:"OR"};class lF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ST(n,e){return n.useProto3Json||f0(e)?e:{value:e}}function Wg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uF(n,e){return Wg(n,e.toTimestamp())}function ao(n){return It(!!n,49232),Xe.fromTimestamp(function(t){const r=ml(t);return new On(r.seconds,r.nanos)}(n))}function ib(n,e){return wT(n,e).canonicalString()}function wT(n,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aM(n){const e=Qt.fromString(n);return It(hM(e),10190,{key:e.toString()}),e}function CT(n,e){return ib(n.databaseId,e.path)}function cA(n,e){const t=aM(e);if(t.get(1)!==n.databaseId.projectId)throw new je(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(uM(t))}function lM(n,e){return ib(n.databaseId,e)}function cF(n){const e=aM(n);return e.length===4?Qt.emptyPath():uM(e)}function RT(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uM(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Sx(n,e,t){return{name:CT(n,e),fields:t.value.mapValue.fields}}function fF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ye(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(It(p===void 0||typeof p=="string",58123),mr.fromBase64String(p||"")):(It(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),mr.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(h){const p=h.code===void 0?ge.UNKNOWN:rM(h.code);return new je(p,h.message||"")}(a);t=new sM(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=cA(n,r.document.name),s=ao(r.document.updateTime),a=r.document.createTime?ao(r.document.createTime):Xe.min(),u=new ni({mapValue:{fields:r.document.fields}}),c=wr.newFoundDocument(i,s,a,u),h=r.targetIds||[],p=r.removedTargetIds||[];t=new _g(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=cA(n,r.document),s=r.readTime?ao(r.readTime):Xe.min(),a=wr.newNoDocument(i,s),u=r.removedTargetIds||[];t=new _g([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=cA(n,r.document),s=r.removedTargetIds||[];t=new _g([],s,i,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new tF(i,s),u=r.targetId;t=new iM(u,a)}}return t}function hF(n,e){let t;if(e instanceof hp)t={update:Sx(n,e.key,e.value)};else if(e instanceof nM)t={delete:CT(n,e.key)};else if(e instanceof Cl)t={update:Sx(n,e.key,e.data),updateMask:TF(e.fieldMask)};else{if(!(e instanceof Jj))return Ye(16599,{ft:e.type});t={verify:CT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const u=a.transform;if(u instanceof Fd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof df)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof pf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Kg)return{fieldPath:a.field.canonicalString(),increment:u.Re};throw Ye(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:uF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ye(27497)}(n,e.precondition)),t}function dF(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map(t=>function(i,s){let a=i.updateTime?ao(i.updateTime):ao(s);return a.isEqual(Xe.min())&&(a=ao(s)),new Yj(a,i.transformResults||[])}(t,e))):[]}function pF(n,e){return{documents:[lM(n,e.path)]}}function mF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lM(n,i);const s=function(h){if(h.length!==0)return fM(ho.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:Hc(_.field),direction:_F(_.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=ST(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:t,parent:i}}function gF(n){let e=cF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(g){const _=cM(g);return _ instanceof ho&&zO(_)?_.getFilters():[_]}(t.where));let a=[];t.orderBy&&(a=function(g){return g.map(_=>function(T){return new Gg(qc(T.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(t.orderBy));let u=null;t.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,f0(_)?null:_}(t.limit));let c=null;t.startAt&&(c=function(g){const _=!!g.before,A=g.values||[];return new $g(A,_)}(t.startAt));let h=null;return t.endAt&&(h=function(g){const _=!g.before,A=g.values||[];return new $g(A,_)}(t.endAt)),Pj(e,i,a,s,u,"F",c,h)}function yF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qc(t.unaryFilter.field);return Bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qc(t.unaryFilter.field);return Bn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qc(t.unaryFilter.field);return Bn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qc(t.unaryFilter.field);return Bn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(n):n.fieldFilter!==void 0?function(t){return Bn.create(qc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ho.create(t.compositeFilter.filters.map(r=>cM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(t.compositeFilter.op))}(n):Ye(30097,{filter:n})}function _F(n){return sF[n]}function vF(n){return oF[n]}function AF(n){return aF[n]}function Hc(n){return{fieldPath:n.canonicalString()}}function qc(n){return dr.fromServerFormat(n.fieldPath)}function fM(n){return n instanceof Bn?function(t){if(t.op==="=="){if(fx(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NAN"}};if(cx(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fx(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NAN"}};if(cx(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(t.field),op:vF(t.op),value:t.value}}}(n):n instanceof ho?function(t){const r=t.getFilters().map(i=>fM(i));return r.length===1?r[0]:{compositeFilter:{op:AF(t.op),filters:r}}}(n):Ye(54877,{filter:n})}function TF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,r,i,s=Xe.min(),a=Xe.min(),u=mr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.wt=e}}function bF(n){const e=gF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(){this.yn=new wF}addToCollectionParentIndex(e,t){return this.yn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(pl.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(pl.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class wF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(Qt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dM=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(dM,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new mf(0)}static ir(){return new mf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="LruGarbageCollector",CF=1048576;function Rx([n,e],[t,r]){const i=lt(n,t);return i===0?lt(e,r):i}class RF{constructor(e){this.cr=e,this.buffer=new zn(Rx),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Oe(Cx,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vf(t)?Oe(Cx,"Ignoring IndexedDB error during garbage collection: ",t):await Lf(t)}await this.Ir(3e5)})}}class kF{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(c0.le);const r=new RF(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(wx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wx):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,a,u,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),jc()<=gt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function IF(n,e){return new kF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.changes=new Yu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&vd(r.mutation,i,Ii.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yt()){const i=gu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=ad();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=gu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let s=na();const a=_d(),u=function(){return _d()}();return t.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Cl)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),vd(p.mutation,h,p.mutation.getFieldMask(),On.now())):a.set(h.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>a.set(h,p)),t.forEach((h,p)=>{var g;return u.set(h,new OF(p,(g=a.get(h))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){const r=_d();let i=new on((a,u)=>a-u),s=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const u of a)u.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let p=r.get(c)||Ii.empty();p=u.applyToLocalView(h,p),r.set(c,p);const g=(i.get(u.batchId)||yt()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,g=WO();p.forEach(_=>{if(!s.has(_)){const A=eM(t.get(_),r.get(_));A!==null&&g.set(_,A),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return pe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return $e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Lj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):pe.resolve(gu());let u=Ud,c=s;return a.next(h=>pe.forEach(h,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?pe.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,yt())).next(p=>({batchId:u,changes:KO(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let i=ad();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=ad();return this.indexManager.getCollectionParents(e,s).next(u=>pe.forEach(u,c=>{const h=function(g,_){return new d0(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((c,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,wr.newInvalidDocument(p)))});let u=ad();return a.forEach((c,h)=>{const p=s.get(c);p!==void 0&&vd(p.mutation,h,Ii.empty(),On.now()),m0(t,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ao(i.createTime)}}(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:bF(i.bundledQuery),readTime:ao(i.readTime)}}(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.overlays=new on($e.comparator),this.Or=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gu();return pe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=gu(),s=t.length+1,a=new $e(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new on((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=gu(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=gu(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=i)););return pe.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new eF(t,r));let s=this.Or.get(t);s===void 0&&(s=yt(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.Nr=new zn(Gn.Br),this.Lr=new zn(Gn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Gn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Gn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new $e(new Qt([])),r=new Gn(t,e),i=new Gn(t,e+1),s=[];return this.Lr.forEachInRange([r,i],a=>{this.Qr(a),s.push(a.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new $e(new Qt([])),r=new Gn(t,e),i=new Gn(t,e+1);let s=yt();return this.Lr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Gn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return $e.comparator(e.key,t.key)||lt(e.Gr,t.Gr)}static kr(e,t){return lt(e.Gr,t.Gr)||$e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new zn(Gn.Br)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Zj(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.zr=this.zr.add(new Gn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return pe.resolve(a)}lookupMutationBatch(e,t){return pe.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return pe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?WE:this.Jn-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gn(t,0),i=new Gn(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],a=>{const u=this.jr(a.Gr);s.push(u)}),pe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(lt);return t.forEach(i=>{const s=new Gn(i,0),a=new Gn(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,a],u=>{r=r.add(u.Gr)})}),pe.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;$e.isDocumentKey(s)||(s=s.child(""));const a=new Gn(new $e(s),0);let u=new zn(lt);return this.zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.Gr)),!0)},a),pe.resolve(this.Jr(u))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){It(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return pe.forEach(t.mutations,i=>{const s=new Gn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Gn(t,0),i=this.zr.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.Zr=e,this.docs=function(){return new on($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=na();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=na();const a=t.path,u=new $e(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||dj(hj(p),r)<=0||(i.has(p.key)||m0(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return pe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ye(9500)}Xr(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new BF(this)}getSize(e){return pe.resolve(this.size)}}class BF extends NF{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.persistence=e,this.ei=new Yu(t=>XE(t),JE),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ti=0,this.ni=new sb,this.targetCount=0,this.ri=mf.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),pe.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new mf(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.ar(t),pe.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ei.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),pe.waitFor(s).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),pe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.ii={},this.overlays={},this.si=new c0(0),this.oi=!1,this.oi=!0,this._i=new LF,this.referenceDelegate=e(this),this.ai=new zF(this),this.indexManager=new SF,this.remoteDocumentCache=function(i){return new UF(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new EF(t),this.ci=new DF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new VF(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new jF(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return pe.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class jF extends mj{constructor(e){super(),this.currentSequenceNumber=e}}class ob{constructor(e){this.persistence=e,this.Ti=new sb,this.Ii=null}static Ei(e){return new ob(e)}get di(){if(this.Ii)return this.Ii;throw Ye(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.di,r=>{const i=$e.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,Xe.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return pe.or([()=>pe.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Yg{constructor(e,t){this.persistence=e,this.Ri=new Yu(r=>_j(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=IF(this,t)}static Ei(e,t){return new Yg(e,t)}li(){}hi(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return pe.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?pe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,a=>this.gr(e,a,t).next(u=>{u||(r++,s.removeEntry(a,Xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),pe.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mg(e.data.value)),t}gr(e,t,r){return pe.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=yt(),i=yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ab(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return L4()?8:gj(Ir())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new FF;return this.fs(e,t,a).next(u=>{if(s.result=u,this.Is)return this.gs(e,t,a,u.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(jc()<=gt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",Fc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),pe.resolve()):(jc()<=gt.DEBUG&&Oe("QueryEngine","Query:",Fc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(jc()<=gt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",Fc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,so(t))):pe.resolve())}Rs(e,t){if(mx(t))return pe.resolve(null);let r=so(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=bT(t,null,"F"),r=so(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=yt(...s);return this.As.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ps(t,u);return this.ys(t,h,a,c.readTime)?this.Rs(e,bT(t,null,"F")):this.ws(e,h,t,c)}))})))}Vs(e,t,r,i){return mx(t)||i.isEqual(Xe.min())?pe.resolve(null):this.As.getDocuments(e,r).next(s=>{const a=this.ps(t,s);return this.ys(t,a,r,i)?pe.resolve(null):(jc()<=gt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fc(t)),this.ws(e,a,t,fj(i,Ud)).next(u=>u))})}ps(e,t){let r=new zn($O(e));return t.forEach((i,s)=>{m0(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return jc()<=gt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Fc(t)),this.As.getDocumentsMatchingQuery(e,t,pl.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="LocalStore",qF=3e8;class $F{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new on(lt),this.Ds=new Yu(s=>XE(s),JE),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MF(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function GF(n,e,t,r){return new $F(n,e,t,r)}async function mM(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let c=yt();for(const h of i){a.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(r,c).next(h=>({Ms:h,removedBatchIds:a,addedBatchIds:u}))})})}function KF(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const g=h.batch,_=g.keys();let A=pe.resolve();return _.forEach(T=>{A=A.next(()=>p.getEntry(c,T)).next(E=>{const S=h.docVersions.get(T);It(S!==null,48541),E.version.compareTo(S)<0&&(g.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),p.addEntry(E)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=yt();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gM(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function WF(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const u=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;u.push(t.ai.removeMatchingKeys(s,p.removedDocuments,g).next(()=>t.ai.addMatchingKeys(s,p.addedDocuments,g)));let A=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(mr.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),i=i.insert(g,A),function(E,S,x){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=qF?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,A,p)&&u.push(t.ai.updateTargetData(s,A))});let c=na(),h=yt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(YF(s,a,e.documentUpdates).next(p=>{c=p.xs,h=p.Os})),!r.isEqual(Xe.min())){const p=t.ai.getLastRemoteSnapshotVersion(s).next(g=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return pe.waitFor(u).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(t.Ss=i,s))}function YF(n,e,t){let r=yt(),i=yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=na();return t.forEach((u,c)=>{const h=s.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Xe.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):Oe(lb,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{xs:a,Os:i}})}function QF(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=WE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XF(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,pe.resolve(i)):t.ai.allocateTargetId(r).next(a=>(i=new Ka(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function xT(n,e,t){const r=Ze(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Vf(a))throw a;Oe(lb,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function xx(n,e,t){const r=Ze(n);let i=Xe.min(),s=yt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,p){const g=Ze(c),_=g.Ds.get(p);return _!==void 0?pe.resolve(g.Ss.get(_)):g.ai.getTargetData(h,p)}(r,a,so(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>r.bs.getDocumentsMatchingQuery(a,e,t?i:Xe.min(),t?s:yt())).next(u=>(JF(r,Uj(e),u),{documents:u,Ns:s})))}function JF(n,e,t){let r=n.vs.get(e)||Xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class kx{constructor(){this.activeTargetIds=qj()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZF{constructor(){this.So=new kx,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new kx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="ConnectivityMonitor";class Nx{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Oe(Ix,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Oe(Ix,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm=null;function kT(){return Wm===null?Wm=function(){return 268435456+Math.round(2147483648*Math.random())}():Wm++,"0x"+Wm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="RestConnection",t6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n6{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Hg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const a=kT(),u=this.$o(e,t.toUriEncodedString());Oe(fA,`Sending RPC '${e}' ${a}:`,u,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(c,i,s),this.Ko(e,u,c,r).then(h=>(Oe(fA,`Received RPC '${e}' ${a}: `,h),h),h=>{throw uf(fA,`RPC '${e}' ${a} failed with error: `,h,"url: ",u,"request:",r),h})}Wo(e,t,r,i,s,a){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=t6[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class i6 extends n6{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=kT();return new Promise((a,u)=>{const c=new vO;c.setWithCredentials(!0),c.listenOnce(AO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case pg.NO_ERROR:const p=c.getResponseJson();Oe(Tr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case pg.TIMEOUT:Oe(Tr,`RPC '${e}' ${s} timed out`),u(new je(ge.DEADLINE_EXCEEDED,"Request time out"));break;case pg.HTTP_ERROR:const g=c.getStatus();if(Oe(Tr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const T=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(x)>=0?x:ge.UNKNOWN}(A.status);u(new je(T,A.message))}else u(new je(ge.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new je(ge.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{s_:e,streamId:s,o_:c.getLastErrorCode(),__:c.getLastError()})}}finally{Oe(Tr,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Oe(Tr,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",h,r,15)})}a_(e,t,r){const i=kT(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bO(),u=EO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=s.join("");Oe(Tr,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=a.createWebChannel(p,c);let _=!1,A=!1;const T=new r6({Go:S=>{A?Oe(Tr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(Oe(Tr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Oe(Tr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},zo:()=>g.close()}),E=(S,x,P)=>{S.listen(x,z=>{try{P(z)}catch(H){setTimeout(()=>{throw H},0)}})};return E(g,od.EventType.OPEN,()=>{A||(Oe(Tr,`RPC '${e}' stream ${i} transport opened.`),T.t_())}),E(g,od.EventType.CLOSE,()=>{A||(A=!0,Oe(Tr,`RPC '${e}' stream ${i} transport closed`),T.r_())}),E(g,od.EventType.ERROR,S=>{A||(A=!0,uf(Tr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),T.r_(new je(ge.UNAVAILABLE,"The operation could not be completed")))}),E(g,od.EventType.MESSAGE,S=>{var x;if(!A){const P=S.data[0];It(!!P,16349);const z=P,H=(z==null?void 0:z.error)||((x=z[0])===null||x===void 0?void 0:x.error);if(H){Oe(Tr,`RPC '${e}' stream ${i} received error:`,H);const V=H.status;let D=function(k){const B=Rn[k];if(B!==void 0)return rM(B)}(V),O=H.message;D===void 0&&(D=ge.INTERNAL,O="Unknown error status: "+V+" with message "+H.message),A=!0,T.r_(new je(D,O)),g.close()}else Oe(Tr,`RPC '${e}' stream ${i} received:`,P),T.i_(P)}}),E(u,TO.STAT_EVENT,S=>{S.stat===yT.PROXY?Oe(Tr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===yT.NOPROXY&&Oe(Tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.n_()},0),T}}function hA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n){return new lF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="PersistentStream";class _M{constructor(e,t,r,i,s,a,u,c){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new yM(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(ta(t.toString()),ta("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new je(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Oe(Ox,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Oe(Ox,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s6 extends _M{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=fF(this.serializer,e),r=function(s){if(!("targetChange"in s))return Xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Xe.min():a.readTime?ao(a.readTime):Xe.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=RT(this.serializer),t.addTarget=function(s,a){let u;const c=a.target;if(u=ET(c)?{documents:pF(s,c)}:{query:mF(s,c).gt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=oM(s,a.resumeToken);const h=ST(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Xe.min())>0){u.readTime=Wg(s,a.snapshotVersion.toTimestamp());const h=ST(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=yF(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=RT(this.serializer),t.removeTarget=e,this.F_(t)}}class o6 extends _M{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=dF(e.writeResults,e.commitTime),r=ao(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=RT(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hF(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{}class l6 extends a6{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new je(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Qo(e,wT(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(ge.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Wo(e,wT(t,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new je(ge.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class u6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ta(t),this.ea=!1):Oe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="RemoteStore";class c6{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(a=>{r.enqueueAndForget(async()=>{Qu(this)&&(Oe(Pu,"Restarting streams for network reachability change."),await async function(c){const h=Ze(c);h.aa.add(4),await pp(h),h.la.set("Unknown"),h.aa.delete(4),await A0(h)}(this))})}),this.la=new u6(r,i)}}async function A0(n){if(Qu(n))for(const e of n.ua)await e(!0)}async function pp(n){for(const e of n.ua)await e(!1)}function vM(n,e){const t=Ze(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),hb(t)?fb(t):Uf(t).b_()&&cb(t,e))}function ub(n,e){const t=Ze(n),r=Uf(t);t._a.delete(e),r.b_()&&AM(t,e),t._a.size===0&&(r.b_()?r.v_():Qu(t)&&t.la.set("Unknown"))}function cb(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uf(n).U_(e)}function AM(n,e){n.ha.Ke(e),Uf(n).K_(e)}function fb(n){n.ha=new iF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Uf(n).start(),n.la.ta()}function hb(n){return Qu(n)&&!Uf(n).w_()&&n._a.size>0}function Qu(n){return Ze(n).aa.size===0}function TM(n){n.ha=void 0}async function f6(n){n.la.set("Online")}async function h6(n){n._a.forEach((e,t)=>{cb(n,e)})}async function d6(n,e){TM(n),hb(n)?(n.la.ia(e),fb(n)):n.la.set("Unknown")}async function p6(n,e,t){if(n.la.set("Online"),e instanceof sM&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i._a.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i._a.delete(u),i.ha.removeTarget(u))}(n,e)}catch(r){Oe(Pu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qg(n,r)}else if(e instanceof _g?n.ha.Xe(e):e instanceof iM?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Xe.min()))try{const r=await gM(n.localStore);t.compareTo(r)>=0&&await function(s,a){const u=s.ha.It(a);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=s._a.get(h);p&&s._a.set(h,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,h)=>{const p=s._a.get(c);if(!p)return;s._a.set(c,p.withResumeToken(mr.EMPTY_BYTE_STRING,p.snapshotVersion)),AM(s,c);const g=new Ka(p.target,c,h,p.sequenceNumber);cb(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Oe(Pu,"Failed to raise snapshot:",r),await Qg(n,r)}}async function Qg(n,e,t){if(!Vf(e))throw e;n.aa.add(1),await pp(n),n.la.set("Offline"),t||(t=()=>gM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Oe(Pu,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await A0(n)})}function EM(n,e){return e().catch(t=>Qg(n,t,e))}async function T0(n){const e=Ze(n),t=_l(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:WE;for(;m6(e);)try{const i=await QF(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,g6(e,i)}catch(i){await Qg(e,i)}bM(e)&&SM(e)}function m6(n){return Qu(n)&&n.oa.length<10}function g6(n,e){n.oa.push(e);const t=_l(n);t.b_()&&t.W_&&t.G_(e.mutations)}function bM(n){return Qu(n)&&!_l(n).w_()&&n.oa.length>0}function SM(n){_l(n).start()}async function y6(n){_l(n).H_()}async function _6(n){const e=_l(n);for(const t of n.oa)e.G_(t.mutations)}async function v6(n,e,t){const r=n.oa.shift(),i=nb.from(r,e,t);await EM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await T0(n)}async function A6(n,e){e&&_l(n).W_&&await async function(r,i){if(function(a){return nF(a)&&a!==ge.ABORTED}(i.code)){const s=r.oa.shift();_l(r).D_(),await EM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await T0(r)}}(n,e),bM(n)&&SM(n)}async function Mx(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Oe(Pu,"RemoteStore received new credentials");const r=Qu(t);t.aa.add(3),await pp(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await A0(t)}async function T6(n,e){const t=Ze(n);e?(t.aa.delete(2),await A0(t)):e||(t.aa.add(2),await pp(t),t.la.set("Unknown"))}function Uf(n){return n.Pa||(n.Pa=function(t,r,i){const s=Ze(t);return s.Y_(),new s6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:f6.bind(null,n),Jo:h6.bind(null,n),Zo:d6.bind(null,n),Q_:p6.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),hb(n)?fb(n):n.la.set("Unknown")):(await n.Pa.stop(),TM(n))})),n.Pa}function _l(n){return n.Ta||(n.Ta=function(t,r,i){const s=Ze(t);return s.Y_(),new o6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:y6.bind(null,n),Zo:A6.bind(null,n),z_:_6.bind(null,n),j_:v6.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await T0(n)):(await n.Ta.stop(),n.oa.length>0&&(Oe(Pu,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new db(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pb(n,e){if(ta("AsyncQueue",`${e}: ${n}`),Vf(n))return new je(ge.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{static emptySet(e){return new Zc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=ad(),this.sortedSet=new on(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.Ia=new on($e.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ye(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class gf{constructor(e,t,r,i,s,a,u,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new gf(e,t,Zc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class b6{constructor(){this.queries=Px(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=Ze(t),s=i.queries;i.queries=Px(),s.forEach((a,u)=>{for(const c of u.Ra)c.onError(r)})})(this,new je(ge.ABORTED,"Firestore shutting down"))}}function Px(){return new Yu(n=>qO(n),p0)}async function wM(n,e){const t=Ze(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new E6,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=pb(a,`Initialization of query '${Fc(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&mb(t)}async function CM(n,e){const t=Ze(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Ra.indexOf(e);a>=0&&(s.Ra.splice(a,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function S6(n,e){const t=Ze(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Ra)u.pa(i)&&(r=!0);a.Aa=i}}r&&mb(t)}function w6(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function mb(n){n.fa.forEach(e=>{e.next()})}var IT,Lx;(Lx=IT||(IT={})).ya="default",Lx.Cache="cache";class RM{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=gf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==IT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.key=e}}class kM{constructor(e){this.key=e}}class C6{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=yt(),this.mutatedKeys=yt(),this.Ua=$O(e),this.Ka=new Zc(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new Dx,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),A=m0(this.query,g)?g:null,T=!!_&&this.mutatedKeys.has(_.key),E=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let S=!1;_&&A?_.data.isEqual(A.data)?T!==E&&(r.track({type:3,doc:A}),S=!0):this.ja(_,A)||(r.track({type:2,doc:A}),S=!0,(c&&this.Ua(A,c)>0||h&&this.Ua(A,h)<0)&&(u=!0)):!_&&A?(r.track({type:0,doc:A}),S=!0):_&&!A&&(r.track({type:1,doc:_}),S=!0,(c||h)&&(u=!0)),S&&(A?(a=a.add(A),s=E?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ka:a,za:r,ys:u,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((p,g)=>function(A,T){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:S})}};return E(A)-E(T)}(p.type,g.type)||this.Ua(p.doc,g.doc)),this.Ha(r),i=i!=null&&i;const u=t&&!i?this.Ja():[],c=this.$a.size===0&&this.current&&!i?1:0,h=c!==this.Qa;return this.Qa=c,a.length!==0||h?{snapshot:new gf(this.query,e.Ka,s,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:u}:{Ya:u}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Dx,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=yt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new kM(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new xM(r))}),t}Xa(e){this.qa=e.Ns,this.$a=yt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return gf.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const gb="SyncEngine";class R6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class x6{constructor(e){this.key=e,this.tu=!1}}class k6{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Yu(u=>qO(u),p0),this.iu=new Map,this.su=new Set,this.ou=new on($e.comparator),this._u=new Map,this.au=new sb,this.uu={},this.cu=new Map,this.lu=mf.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function I6(n,e,t=!0){const r=PM(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await IM(r,e,t,!0),i}async function N6(n,e){const t=PM(n);await IM(t,e,!0,!1)}async function IM(n,e,t,r){const i=await XF(n.localStore,so(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await O6(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&vM(n.remoteStore,i),u}async function O6(n,e,t,r,i){n.Pu=(g,_,A)=>async function(E,S,x,P){let z=S.view.Ga(x);z.ys&&(z=await xx(E.localStore,S.query,!1).then(({documents:O})=>S.view.Ga(O,z)));const H=P&&P.targetChanges.get(S.targetId),V=P&&P.targetMismatches.get(S.targetId)!=null,D=S.view.applyChanges(z,E.isPrimaryClient,H,V);return Ux(E,S.targetId,D.Ya),D.snapshot}(n,g,_,A);const s=await xx(n.localStore,e,!0),a=new C6(e,s.Ns),u=a.Ga(s.documents),c=dp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,c);Ux(n,t,h.Ya);const p=new R6(e,t,a);return n.ru.set(e,p),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),h.snapshot}async function M6(n,e,t){const r=Ze(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(a=>!p0(a,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ub(r.remoteStore,i.targetId),NT(r,i.targetId)}).catch(Lf)):(NT(r,i.targetId),await xT(r.localStore,i.targetId,!0))}async function D6(n,e){const t=Ze(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ub(t.remoteStore,r.targetId))}async function P6(n,e,t){const r=F6(n);try{const i=await function(a,u){const c=Ze(a),h=On.now(),p=u.reduce((A,T)=>A.add(T.key),yt());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let T=na(),E=yt();return c.Cs.getEntries(A,p).next(S=>{T=S,T.forEach((x,P)=>{P.isValidDocument()||(E=E.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,T)).next(S=>{g=S;const x=[];for(const P of u){const z=Xj(P,g.get(P.key).overlayedDocument);z!=null&&x.push(new Cl(P.key,z,VO(z.value.mapValue),oo.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,x,u)}).next(S=>{_=S;const x=S.applyToLocalDocumentSet(g,E);return c.documentOverlayCache.saveOverlays(A,S.batchId,x)})}).then(()=>({batchId:_.batchId,changes:KO(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,c){let h=a.uu[a.currentUser.toKey()];h||(h=new on(lt)),h=h.insert(u,c),a.uu[a.currentUser.toKey()]=h}(r,i.batchId,t),await mp(r,i.changes),await T0(r.remoteStore)}catch(i){const s=pb(i,"Failed to persist write");t.reject(s)}}async function NM(n,e){const t=Ze(n);try{const r=await WF(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t._u.get(s);a&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.tu=!0:i.modifiedDocuments.size>0?It(a.tu,14607):i.removedDocuments.size>0&&(It(a.tu,42227),a.tu=!1))}),await mp(t,r,e)}catch(r){await Lf(r)}}function Vx(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,a)=>{const u=a.view.ga(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){const c=Ze(a);c.onlineState=u;let h=!1;c.queries.forEach((p,g)=>{for(const _ of g.Ra)_.ga(u)&&(h=!0)}),h&&mb(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function L6(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let a=new on($e.comparator);a=a.insert(s,wr.newNoDocument(s,Xe.min()));const u=yt().add(s),c=new _0(Xe.min(),new Map,new on(lt),a,u);await NM(r,c),r.ou=r.ou.remove(s),r._u.delete(e),yb(r)}else await xT(r.localStore,e,!1).then(()=>NT(r,e,t)).catch(Lf)}async function V6(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=await KF(t.localStore,e);MM(t,r,null),OM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await mp(t,i)}catch(i){await Lf(i)}}async function U6(n,e,t){const r=Ze(n);try{const i=await function(a,u){const c=Ze(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(g=>(It(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);MM(r,e,t),OM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await mp(r,i)}catch(i){await Lf(i)}}function OM(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function MM(n,e,t){const r=Ze(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function NT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||DM(n,r)})}function DM(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(ub(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),yb(n))}function Ux(n,e,t){for(const r of t)r instanceof xM?(n.au.addReference(r.key,e),B6(n,r)):r instanceof kM?(Oe(gb,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||DM(n,r.key)):Ye(19791,{Iu:r})}function B6(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(Oe(gb,"New document in limbo: "+t),n.su.add(r),yb(n))}function yb(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new $e(Qt.fromString(e)),r=n.lu.next();n._u.set(r,new x6(t)),n.ou=n.ou.insert(t,r),vM(n.remoteStore,new Ka(so(ZE(t.path)),r,"TargetPurposeLimboResolution",c0.le))}}async function mp(n,e,t){const r=Ze(n),i=[],s=[],a=[];r.ru.isEmpty()||(r.ru.forEach((u,c)=>{a.push(r.Pu(c,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){i.push(h);const g=ab.Ps(c.targetId,h);s.push(g)}}))}),await Promise.all(a),r.nu.Q_(i),await async function(c,h){const p=Ze(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>pe.forEach(h,_=>pe.forEach(_.ls,A=>p.persistence.referenceDelegate.addReference(g,_.targetId,A)).next(()=>pe.forEach(_.hs,A=>p.persistence.referenceDelegate.removeReference(g,_.targetId,A)))))}catch(g){if(!Vf(g))throw g;Oe(lb,"Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const A=p.Ss.get(_),T=A.snapshotVersion,E=A.withLastLimboFreeSnapshotVersion(T);p.Ss=p.Ss.insert(_,E)}}}(r.localStore,s))}async function z6(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Oe(gb,"User change. New user:",e.toKey());const r=await mM(t.localStore,e);t.currentUser=e,function(s,a){s.cu.forEach(u=>{u.forEach(c=>{c.reject(new je(ge.CANCELLED,a))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mp(t,r.Ms)}}function j6(n,e){const t=Ze(n),r=t._u.get(e);if(r&&r.tu)return yt().add(r.key);{let i=yt();const s=t.iu.get(e);if(!s)return i;for(const a of s){const u=t.ru.get(a);i=i.unionWith(u.view.Wa)}return i}}function PM(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L6.bind(null,e),e.nu.Q_=S6.bind(null,e.eventManager),e.nu.Tu=w6.bind(null,e.eventManager),e}function F6(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U6.bind(null,e),e}class Xg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=v0(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return GF(this.persistence,new HF,e.initialUser,this.serializer)}Ru(e){return new pM(ob.Ei,this.serializer)}Au(e){return new ZF}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xg.provider={build:()=>new Xg};class H6 extends Xg{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){It(this.persistence.referenceDelegate instanceof Yg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xF(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new pM(r=>Yg.Ei(r,t),this.serializer)}}class OT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z6.bind(null,this.syncEngine),await T6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b6}()}createDatastore(e){const t=v0(e.databaseInfo.databaseId),r=function(s){return new i6(s)}(e.databaseInfo);return function(s,a,u,c){return new l6(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,u){return new c6(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Vx(this.syncEngine,t,0),function(){return Nx.C()?new Nx:new e6}())}createSyncEngine(e,t){return function(i,s,a,u,c,h,p){const g=new k6(i,s,a,u,c,h);return p&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ze(i);Oe(Pu,"RemoteStore shutting down."),s.aa.add(5),await pp(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}OT.provider={build:()=>new OT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ta("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="FirestoreClient";class q6{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=RO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Oe(vl,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Oe(vl,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=pb(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dA(n,e){n.asyncQueue.verifyOperationInProgress(),Oe(vl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Bx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $6(n);Oe(vl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Mx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Mx(e.remoteStore,i)),n._onlineComponents=e}async function $6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe(vl,"Using user provided OfflineComponentProvider");try{await dA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;uf("Error using user provided cache. Falling back to memory cache: "+t),await dA(n,new Xg)}}else Oe(vl,"Using default OfflineComponentProvider"),await dA(n,new H6(void 0));return n._offlineComponents}async function VM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe(vl,"Using user provided OnlineComponentProvider"),await Bx(n,n._uninitializedComponentsProvider._online)):(Oe(vl,"Using default OnlineComponentProvider"),await Bx(n,new OT))),n._onlineComponents}function G6(n){return VM(n).then(e=>e.syncEngine)}async function UM(n){const e=await VM(n),t=e.eventManager;return t.onListen=I6.bind(null,e.syncEngine),t.onUnlisten=M6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D6.bind(null,e.syncEngine),t}function K6(n,e,t={}){const r=new Qo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,h){const p=new LM({next:_=>{p.yu(),a.enqueueAndForget(()=>CM(s,g));const A=_.docs.has(u);!A&&_.fromCache?h.reject(new je(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&_.fromCache&&c&&c.source==="server"?h.reject(new je(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new RM(ZE(u.path),p,{includeMetadataChanges:!0,Fa:!0});return wM(s,g)}(await UM(n),n.asyncQueue,e,t,r)),r.promise}function W6(n,e,t={}){const r=new Qo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,h){const p=new LM({next:_=>{p.yu(),a.enqueueAndForget(()=>CM(s,g)),_.fromCache&&c.source==="server"?h.reject(new je(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new RM(u,p,{includeMetadataChanges:!0,Fa:!0});return wM(s,g)}(await UM(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(n,e,t){if(!t)throw new je(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Y6(n,e,t,r){if(e===!0&&r===!0)throw new je(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jx(n){if(!$e.isDocumentKey(n))throw new je(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fx(n){if($e.isDocumentKey(n))throw new je(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _b(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function Al(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_b(n);throw new je(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="firestore.googleapis.com",Hx=!0;class qx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new je(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jM,this.ssl=Hx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Hx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CF)throw new je(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new je(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new je(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new je(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nj;switch(r.type){case"firstParty":return new oj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=zx.get(t);r&&(Oe("ComponentProvider","Removing Datastore"),zx.delete(t),r.terminate())}(this),Promise.resolve()}}function Q6(n,e,t,r={}){var i;const s=(n=Al(n,E0))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;s.host!==jM&&s.host!==u&&uf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:u,ssl:!1,emulatorOptions:r});if(!Zo(c,a)&&(n._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=br.MOCK_USER;else{h=lO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new je(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new br(g)}n._authCredentials=new rj(new wO(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new b0(this.firestore,e,this._query)}}class Di{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Di(this.firestore,e,this._key)}}class rl extends b0{constructor(e,t,r){super(e,t,ZE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Di(this.firestore,null,new $e(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function vb(n,e,...t){if(n=dn(n),zM("collection","path",e),n instanceof E0){const r=Qt.fromString(e,...t);return Fx(r),new rl(n,null,r)}{if(!(n instanceof Di||n instanceof rl))throw new je(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Fx(r),new rl(n.firestore,null,r)}}function ra(n,e,...t){if(n=dn(n),arguments.length===1&&(e=RO.newId()),zM("doc","path",e),n instanceof E0){const r=Qt.fromString(e,...t);return jx(r),new Di(n,null,new $e(r))}{if(!(n instanceof Di||n instanceof rl))throw new je(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return jx(r),new Di(n.firestore,n instanceof rl?n.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="AsyncQueue";class Gx{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new yM(this,"async_queue_retry"),this.ju=()=>{const r=hA();r&&Oe($x,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=hA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=hA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Qo;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Vf(e))throw e;Oe($x,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,ta("INTERNAL UNHANDLED ERROR: ",Kx(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=db.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&Ye(47125,{ec:Kx(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Kx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class gp extends E0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gx(e),this._firestoreClient=void 0,await e}}}function X6(n,e){const t=typeof n=="object"?n:GE(),r=typeof n=="string"?n:Hg,i=Df(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=sO("firestore");s&&Q6(i,...s)}return i}function Ab(n){if(n._terminated)throw new je(ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||J6(n),n._firestoreClient}function J6(n){var e,t,r;const i=n._freezeSettings(),s=function(u,c,h,p){return new Tj(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,BM(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new q6(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yf(mr.fromBase64String(e))}catch(t){throw new je(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yf(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=/^__.*__$/;class e9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms):new hp(e,this.data,t,this.fieldTransforms)}}class FM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function HM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{oc:n})}}class w0{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new w0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Jg(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(HM(this.oc)&&Z6.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class t9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||v0(e)}dc(e,t,r,i=!1){return new w0({oc:e,methodName:t,Ec:r,path:dr.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qM(n){const e=n._freezeSettings(),t=v0(n._databaseId);return new t9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function n9(n,e,t,r,i,s={}){const a=n.dc(s.merge||s.mergeFields?2:0,e,t,i);Cb("Data must be an object, but it was:",a,r);const u=GM(r,a);let c,h;if(s.merge)c=new Ii(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=MT(e,g,t);if(!a.contains(_))throw new je(ge.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);WM(p,_)||p.push(_)}c=new Ii(p),h=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=a.fieldTransforms;return new e9(new ni(u),c,h)}class C0 extends Bf{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof C0}}function $M(n,e,t){return new w0({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bb extends Bf{_toFieldTransform(e){return new tb(e.path,new Fd)}isEqual(e){return e instanceof bb}}class Sb extends Bf{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=$M(this,e,!0),r=this.Ac.map(s=>zf(s,t)),i=new df(r);return new tb(e.path,i)}isEqual(e){return e instanceof Sb&&Zo(this.Ac,e.Ac)}}class wb extends Bf{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=$M(this,e,!0),r=this.Ac.map(s=>zf(s,t)),i=new pf(r);return new tb(e.path,i)}isEqual(e){return e instanceof wb&&Zo(this.Ac,e.Ac)}}function r9(n,e,t,r){const i=n.dc(1,e,t);Cb("Data must be an object, but it was:",i,r);const s=[],a=ni.empty();wl(r,(c,h)=>{const p=Rb(e,c,t);h=dn(h);const g=i.hc(p);if(h instanceof C0)s.push(p);else{const _=zf(h,g);_!=null&&(s.push(p),a.set(p,_))}});const u=new Ii(s);return new FM(a,u,i.fieldTransforms)}function i9(n,e,t,r,i,s){const a=n.dc(1,e,t),u=[MT(e,r,t)],c=[i];if(s.length%2!=0)throw new je(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(MT(e,s[_])),c.push(s[_+1]);const h=[],p=ni.empty();for(let _=u.length-1;_>=0;--_)if(!WM(h,u[_])){const A=u[_];let T=c[_];T=dn(T);const E=a.hc(A);if(T instanceof C0)h.push(A);else{const S=zf(T,E);S!=null&&(h.push(A),p.set(A,S))}}const g=new Ii(h);return new FM(p,g,a.fieldTransforms)}function zf(n,e){if(KM(n=dn(n)))return Cb("Unsupported field value:",e,n),GM(n,e);if(n instanceof Bf)return function(r,i){if(!HM(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const u of r){let c=zf(u,i.Pc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $j(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=On.fromDate(r);return{timestampValue:Wg(i.serializer,s)}}if(r instanceof On){const s=new On(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wg(i.serializer,s)}}if(r instanceof Tb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yf)return{bytesValue:oM(i.serializer,r._byteString)};if(r instanceof Di){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ib(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Eb)return function(a,u){return{mapValue:{fields:{[PO]:{stringValue:LO},[qg]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw u.Tc("VectorValues must only contain numeric values.");return eb(u.serializer,h)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${_b(r)}`)}(n,e)}function GM(n,e){const t={};return kO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wl(n,(r,i)=>{const s=zf(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function KM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof On||n instanceof Tb||n instanceof yf||n instanceof Di||n instanceof Bf||n instanceof Eb)}function Cb(n,e,t){if(!KM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=_b(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function MT(n,e,t){if((e=dn(e))instanceof S0)return e._internalPath;if(typeof e=="string")return Rb(n,e);throw Jg("Field path arguments must be of type string or ",n,!1,void 0,t)}const s9=new RegExp("[~\\*/\\[\\]]");function Rb(n,e,t){if(e.search(s9)>=0)throw Jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new S0(...e.split("."))._internalPath}catch{throw Jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jg(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new je(ge.INVALID_ARGUMENT,u+n+c)}function WM(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Di(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o9 extends YM{data(){return super.data()}}function QM(n,e){return typeof e=="string"?Rb(n,e):e instanceof S0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new je(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l9{convertValue(e,t="none"){switch(yl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return wl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[qg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>vn(a.doubleValue));return new Eb(s)}convertGeoPoint(e){return new Tb(vn(e.latitude),vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=h0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bd(e));default:return null}}convertTimestamp(e){const t=ml(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);It(hM(r),9688,{name:e});const i=new zd(r.get(1),r.get(3)),s=new $e(r.popFirst(5));return i.isEqual(t)||ta(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XM extends YM{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class vg extends XM{data(e={}){return super.data(e)}}class c9{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ud(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vg(this._firestore,this._userDataWriter,r.key,r,new ud(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const c=new vg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ud(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new vg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ud(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:f9(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function f9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n){n=Al(n,Di);const e=Al(n.firestore,gp);return K6(Ab(e),n._key).then(t=>d9(e,n,t))}class JM extends l9{constructor(e){super(),this.firestore=e}convertBytes(e){return new yf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Di(this.firestore,null,t)}}function ZM(n){n=Al(n,b0);const e=Al(n.firestore,gp),t=Ab(e),r=new JM(e);return a9(n._query),W6(t,n._query).then(i=>new c9(e,r,n,i))}function yp(n,e,t,...r){n=Al(n,Di);const i=Al(n.firestore,gp),s=qM(i);let a;return a=typeof(e=dn(e))=="string"||e instanceof S0?i9(s,"updateDoc",n._key,e,t,r):r9(s,"updateDoc",n._key,e),eD(i,[a.toMutation(n._key,oo.exists(!0))])}function h9(n,e){const t=Al(n.firestore,gp),r=ra(n),i=u9(n.converter,e);return eD(t,[n9(qM(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,oo.exists(!1))]).then(()=>r)}function eD(n,e){return function(r,i){const s=new Qo;return r.asyncQueue.enqueueAndForget(async()=>P6(await G6(r),i,s)),s.promise}(Ab(n),e)}function d9(n,e,t){const r=t.docs.get(e._key),i=new JM(n);return new XM(n,i,e._key,r,new ud(t.hasPendingWrites,t.fromCache),e.converter)}function p9(){return new bb("serverTimestamp")}function tD(...n){return new Sb("arrayUnion",n)}function m9(...n){return new wb("arrayRemove",n)}(function(e,t=!0){(function(i){Pf=i})(Wu),Cs(new fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new gp(new ij(r.getProvider("auth-internal")),new aj(a,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new je(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(h.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),ri(JR,ZR,e),ri(JR,ZR,"esm2017")})();function g9(n){let t=window.scrollY||window.pageYOffset,r=n.getBoundingClientRect().top+t,i=performance.now();function s(u){const c=(u-i)/800;c<1?(window.scrollTo(0,t+(r-t)*a(c)),requestAnimationFrame(s)):window.scrollTo(0,r)}function a(u){return u<.5?4*u*u*u:(u-1)*(2*u-2)*(2*u-2)+1}requestAnimationFrame(s)}function _f(n){const e=document.querySelector(n);e&&g9(e)}function y9({isOpened:n}){const[e,t]=$.useState(!1);return w.jsx("button",{className:"ham-button",children:w.jsxs("svg",{className:`hamburger ${e?n?"open":"close":""}`,onClick:()=>{t(!0)},fill:"#c1ff72",viewBox:"0 0 100 100",width:"50",children:[w.jsx("g",{className:"top-group",children:w.jsx("line",{className:"line top",x1:"10",x2:"90",y1:"30",y2:"30"})}),w.jsx("g",{className:"middle-group",children:w.jsx("line",{className:"line middle",x1:"10",x2:"90",y1:"50",y2:"50"})}),w.jsx("g",{className:"bottom-group",children:w.jsx("line",{className:"line bottom",x1:"10",x2:"90",y1:"70",y2:"70"})})]})})}var _9="firebase",v9="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri(_9,v9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="firebasestorage.googleapis.com",rD="storageBucket",A9=2*60*1e3,T9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends ms{constructor(e,t,r=0){super(pA(e),`Firebase Storage: ${t} (${pA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pn||(pn={}));function pA(n){return"storage/"+n}function xb(){const n="An unknown error occurred, please check the error payload for server response.";return new mn(pn.UNKNOWN,n)}function E9(n){return new mn(pn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function b9(n){return new mn(pn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function S9(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mn(pn.UNAUTHENTICATED,n)}function w9(){return new mn(pn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function C9(n){return new mn(pn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function R9(){return new mn(pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x9(){return new mn(pn.CANCELED,"User canceled the upload/download.")}function k9(n){return new mn(pn.INVALID_URL,"Invalid URL '"+n+"'.")}function I9(n){return new mn(pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function N9(){return new mn(pn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rD+"' property when initializing the app?")}function O9(){return new mn(pn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function M9(){return new mn(pn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function D9(n){return new mn(pn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function DT(n){return new mn(pn.INVALID_ARGUMENT,n)}function iD(){return new mn(pn.APP_DELETED,"The Firebase app was deleted.")}function P9(n){return new mn(pn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ad(n,e){return new mn(pn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Gh(n){throw new mn(pn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ni.makeFromUrl(e,t)}catch{return new Ni(e,"")}if(r.path==="")return r;throw I9(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function h(H){H.path_=decodeURIComponent(H.path)}const p="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",A=new RegExp(`^https?://${g}/${p}/b/${i}/o${_}`,"i"),T={bucket:1,path:3},E=t===nD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",x=new RegExp(`^https?://${E}/${i}/${S}`,"i"),z=[{regex:u,indices:c,postModify:s},{regex:A,indices:T,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let H=0;H<z.length;H++){const V=z[H],D=V.regex.exec(e);if(D){const O=D[V.indices.bucket];let I=D[V.indices.path];I||(I=""),r=new Ni(O,I),V.postModify(r);break}}if(r==null)throw k9(e);return r}}class L9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(n,e,t){let r=1,i=null,s=null,a=!1,u=0;function c(){return u===2}let h=!1;function p(...S){h||(h=!0,e.apply(null,S))}function g(S){i=setTimeout(()=>{i=null,n(A,c())},S)}function _(){s&&clearTimeout(s)}function A(S,...x){if(h){_();return}if(S){_(),p.call(null,S,...x);return}if(c()||a){_(),p.call(null,S,...x);return}r<64&&(r*=2);let z;u===1?(u=2,z=0):z=(r+Math.random())*1e3,g(z)}let T=!1;function E(S){T||(T=!0,_(),!h&&(i!==null?(S||(u=2),clearTimeout(i),g(0)):S||(u=1)))}return g(0),s=setTimeout(()=>{a=!0,E(!0)},t),E}function U9(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(n){return n!==void 0}function z9(n){return typeof n=="object"&&!Array.isArray(n)}function kb(n){return typeof n=="string"||n instanceof String}function Wx(n){return Ib()&&n instanceof Blob}function Ib(){return typeof Blob<"u"}function Yx(n,e,t,r){if(r<e)throw DT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw DT(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function sD(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Su;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Su||(Su={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,t,r,i,s,a,u,c,h,p,g,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,T)=>{this.resolve_=A,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ym(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const c=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===Su.NO_ERROR,c=s.getStatus();if(!u||j9(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Su.ABORT;r(!1,new Ym(!1,null,p));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new Ym(h,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());B9(c)?s(c):s()}catch(c){a(c)}else if(u!==null){const c=xb();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(i.canceled){const c=this.appDelete_?iD():x9();a(c)}else{const c=R9();a(c)}};this.canceled_?t(!1,new Ym(!1,null,!0)):this.backoffId_=V9(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&U9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ym{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function H9(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function q9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $9(n,e){e&&(n["X-Firebase-GMPID"]=e)}function G9(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function K9(n,e,t,r,i,s,a=!0){const u=sD(n.urlParams),c=n.url+u,h=Object.assign({},n.headers);return $9(h,e),H9(h,t),q9(h,s),G9(h,r),new F9(c,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Y9(...n){const e=W9();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ib())return new Blob(n);throw new mn(pn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Q9(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(n){if(typeof atob>"u")throw D9("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mA{constructor(e,t){this.data=e,this.contentType=t||null}}function J9(n,e){switch(n){case to.RAW:return new mA(oD(e));case to.BASE64:case to.BASE64URL:return new mA(aD(n,e));case to.DATA_URL:return new mA(e5(e),t5(e))}throw xb()}function oD(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Z9(n){let e;try{e=decodeURIComponent(n)}catch{throw Ad(to.DATA_URL,"Malformed data URL.")}return oD(e)}function aD(n,e){switch(n){case to.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ad(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case to.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ad(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=X9(e)}catch(i){throw i.message.includes("polyfill")?i:Ad(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class lD{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ad(to.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=n5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function e5(n){const e=new lD(n);return e.base64?aD(to.BASE64,e.rest):Z9(e.rest)}function t5(n){return new lD(n).contentType}function n5(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t){let r=0,i="";Wx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Wx(this.data_)){const r=this.data_,i=Q9(r,e,t);return i===null?null:new ja(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ja(r,!0)}}static getBlob(...e){if(Ib()){const t=e.map(r=>r instanceof ja?r.data_:r);return new ja(Y9.apply(null,t))}else{const t=e.map(a=>kb(a)?J9(to.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let u=0;u<a.length;u++)i[s++]=a[u]}),new ja(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){let e;try{e=JSON.parse(n)}catch{return null}return z9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function i5(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function cD(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(n,e){return e}let Br=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||s5}},Qm=null;function o5(n){return!kb(n)||n.length<2?n:cD(n)}function fD(){if(Qm)return Qm;const n=[];n.push(new Br("bucket")),n.push(new Br("generation")),n.push(new Br("metageneration")),n.push(new Br("name","fullPath",!0));function e(s,a){return o5(a)}const t=new Br("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new Br("size");return i.xform=r,n.push(i),n.push(new Br("timeCreated")),n.push(new Br("updated")),n.push(new Br("md5Hash",null,!0)),n.push(new Br("cacheControl",null,!0)),n.push(new Br("contentDisposition",null,!0)),n.push(new Br("contentEncoding",null,!0)),n.push(new Br("contentLanguage",null,!0)),n.push(new Br("contentType",null,!0)),n.push(new Br("metadata","customMetadata",!0)),Qm=n,Qm}function a5(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Ni(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function l5(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return a5(r,n),r}function hD(n,e,t){const r=uD(e);return r===null?null:l5(n,r,t)}function u5(n,e,t,r){const i=uD(e);if(i===null||!kb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(h=>{const p=n.bucket,g=n.fullPath,_="/b/"+a(p)+"/o/"+a(g),A=Nb(_,t,r),T=sD({alt:"media",token:h});return A+T})[0]}function c5(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class dD{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(n){if(!n)throw xb()}function f5(n,e){function t(r,i){const s=hD(n,i,e);return pD(s!==null),s}return t}function h5(n,e){function t(r,i){const s=hD(n,i,e);return pD(s!==null),u5(s,i,n.host,n._protocol)}return t}function mD(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=w9():i=S9():t.getStatus()===402?i=b9(n.bucket):t.getStatus()===403?i=C9(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function d5(n){const e=mD(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=E9(n.path)),s.serverResponse=i.serverResponse,s}return t}function p5(n,e,t){const r=e.fullServerUrl(),i=Nb(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,u=new dD(i,s,h5(n,t),a);return u.errorHandler=d5(e),u}function m5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function g5(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=m5(null,e)),r}function y5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let z="";for(let H=0;H<2;H++)z=z+Math.random().toString().slice(2);return z}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const h=g5(e,r,i),p=c5(h,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+c+"--",A=ja.getBlob(g,r,_);if(A===null)throw O9();const T={name:h.fullPath},E=Nb(s,n.host,n._protocol),S="POST",x=n.maxUploadRetryTime,P=new dD(E,S,f5(n,t),x);return P.urlParams=T,P.headers=a,P.body=A.uploadData(),P.errorHandler=mD(e),P}class _5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Su.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Su.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Su.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Gh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class v5 extends _5{initXhr(){this.xhr_.responseType="text"}}function gD(){return new v5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this._service=e,t instanceof Ni?this._location=t:this._location=Ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lu(e,t)}get root(){const e=new Ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cD(this._location.path)}get storage(){return this._service}get parent(){const e=r5(this._location.path);if(e===null)return null;const t=new Ni(this._location.bucket,e);return new Lu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw P9(e)}}function A5(n,e,t){n._throwIfRoot("uploadBytes");const r=y5(n.storage,n._location,fD(),new ja(e,!0),t);return n.storage.makeRequestWithTokens(r,gD).then(i=>({metadata:i,ref:n}))}function T5(n){n._throwIfRoot("getDownloadURL");const e=p5(n.storage,n._location,fD());return n.storage.makeRequestWithTokens(e,gD).then(t=>{if(t===null)throw M9();return t})}function E5(n,e){const t=i5(n._location.path,e),r=new Ni(n._location.bucket,t);return new Lu(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(n){return/^[A-Za-z]+:\/\//.test(n)}function S5(n,e){return new Lu(n,e)}function yD(n,e){if(n instanceof Ob){const t=n;if(t._bucket==null)throw N9();const r=new Lu(t,t._bucket);return e!=null?yD(r,e):r}else return e!==void 0?E5(n,e):n}function w5(n,e){if(e&&b5(e)){if(n instanceof Ob)return S5(n,e);throw DT("To use ref(service, url), the first argument must be a Storage instance.")}else return yD(n,e)}function Qx(n,e){const t=e==null?void 0:e[rD];return t==null?null:Ni.makeFromBucketSpec(t,n)}function C5(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:lO(i,n.app.options.projectId))}class Ob{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A9,this._maxUploadRetryTime=T9,this._requests=new Set,i!=null?this._bucket=Ni.makeFromBucketSpec(i,this._host):this._bucket=Qx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ni.makeFromBucketSpec(this._url,e):this._bucket=Qx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Yx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Yx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lu(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new L9(iD());{const a=K9(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Xx="@firebase/storage",Jx="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="storage";function R5(n,e,t){return n=dn(n),A5(n,e,t)}function x5(n){return n=dn(n),T5(n)}function k5(n,e){return n=dn(n),w5(n,e)}function I5(n=GE(),e){n=dn(n);const r=Df(n,_D).getImmediate({identifier:e}),i=sO("storage");return i&&N5(r,...i),r}function N5(n,e,t,r={}){C5(n,e,t,r)}function O5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ob(t,r,i,e,Wu)}function M5(){Cs(new fs(_D,O5,"PUBLIC").setMultipleInstances(!0)),ri(Xx,Jx,""),ri(Xx,Jx,"esm2017")}M5();function Mb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function vD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D5=vD,AD=new Ku("auth","Firebase",vD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new u0("@firebase/auth");function P5(n,...e){Zg.logLevel<=gt.WARN&&Zg.warn(`Auth (${Wu}): ${n}`,...e)}function Ag(n,...e){Zg.logLevel<=gt.ERROR&&Zg.error(`Auth (${Wu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n,...e){throw Pb(n,...e)}function ws(n,...e){return Pb(n,...e)}function Db(n,e,t){const r=Object.assign(Object.assign({},D5()),{[e]:t});return new Ku("auth","Firebase",r).create(e,{appName:n.name})}function il(n){return Db(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&hs(n,"argument-error"),Db(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pb(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return AD.create(n,...e)}function We(n,e,...t){if(!n)throw Pb(e,...t)}function Ko(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ag(e),new Error(e)}function ia(n,e){n||Ko(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function V5(){return Zx()==="http:"||Zx()==="https:"}function Zx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V5()||uO()||"connection"in navigator)?navigator.onLine:!0}function B5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){this.shortDelay=e,this.longDelay=t,ia(t>e,"Short delay should be less than long delay!"),this.isMobile=N4()||D4()}get(){return U5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n,e){ia(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F5=new _p(3e4,6e4);function Rl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ua(n,e,t,r,i={}){return ED(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=fp(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:c},s);return M4()||(h.referrerPolicy="no-referrer"),TD.fetch()(await bD(n,n.config.apiHost,t,u),h)})}async function ED(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},z5),e);try{const i=new q5(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Xm(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xm(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Xm(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Xm(n,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Db(n,p,h);hs(n,p)}}catch(i){if(i instanceof ms)throw i;hs(n,"network-request-failed",{message:String(i)})}}async function x0(n,e,t,r,i={}){const s=await ua(n,e,t,r,i);return"mfaPendingCredential"in s&&hs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function bD(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?Lb(n.config,i):`${n.config.apiScheme}://${i}`;return j5.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function H5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ws(this.auth,"network-request-failed")),F5.get())})}}function Xm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ws(n,e,r);return i.customData._tokenResponse=t,i}function ek(n){return n!==void 0&&n.enterprise!==void 0}class $5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return H5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function G5(n,e){return ua(n,"GET","/v2/recaptchaConfig",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(n,e){return ua(n,"POST","/v1/accounts:delete",e)}async function ey(n,e){return ua(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function W5(n,e=!1){const t=dn(n),r=await t.getIdToken(e),i=Vb(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Td(gA(i.auth_time)),issuedAtTime:Td(gA(i.iat)),expirationTime:Td(gA(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function gA(n){return Number(n)*1e3}function Vb(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ag("JWT malformed, contained fewer than 3 sections"),null;try{const i=rO(t);return i?JSON.parse(i):(Ag("Failed to decode base64 JWT payload"),null)}catch(i){return Ag("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tk(n){const e=Vb(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ms&&Y5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Y5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Td(this.lastLoginAt),this.creationTime=Td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Hd(n,ey(t,{idToken:r}));We(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?SD(s.providerUserInfo):[],u=J5(n.providerData,a),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new LT(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function X5(n){const e=dn(n);await ty(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SD(n){return n.map(e=>{var{providerId:t}=e,r=Mb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(n,e){const t=await ED(n,{},async()=>{const r=fp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await bD(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",TD.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eH(n,e){return ua(n,"POST","/v2/accounts:revokeToken",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=tk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Z5(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new ef;return r&&(We(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(We(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ef,this.toJSON())}_performRefresh(){return Ko("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Mb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new LT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Hd(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return W5(this,e)}reload(){return X5(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ty(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ri(this.auth.app))return Promise.reject(il(this.auth));const e=await this.getIdToken();return await Hd(this,K5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,u,c,h,p;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,A=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(a=t.photoURL)!==null&&a!==void 0?a:void 0,E=(u=t.tenantId)!==null&&u!==void 0?u:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,x=(h=t.createdAt)!==null&&h!==void 0?h:void 0,P=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:z,emailVerified:H,isAnonymous:V,providerData:D,stsTokenManager:O}=t;We(z&&O,e,"internal-error");const I=ef.fromJSON(this.name,O);We(typeof z=="string",e,"internal-error"),Ma(g,e.name),Ma(_,e.name),We(typeof H=="boolean",e,"internal-error"),We(typeof V=="boolean",e,"internal-error"),Ma(A,e.name),Ma(T,e.name),Ma(E,e.name),Ma(S,e.name),Ma(x,e.name),Ma(P,e.name);const k=new Ss({uid:z,auth:e,email:_,emailVerified:H,displayName:g,isAnonymous:V,photoURL:T,phoneNumber:A,tenantId:E,stsTokenManager:I,createdAt:x,lastLoginAt:P});return D&&Array.isArray(D)&&(k.providerData=D.map(B=>Object.assign({},B))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,t,r=!1){const i=new ef;i.updateFromServerResponse(t);const s=new Ss({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ty(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];We(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?SD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new ef;u.updateFromIdToken(r);const c=new Ss({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new LT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Map;function Wo(n){ia(n instanceof Function,"Expected a class definition");let e=nk.get(n);return e?(ia(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nk.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wD.type="NONE";const rk=wD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(n,e,t){return`firebase:${n}:${e}:${t}`}class tf{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Tg(this.userKey,i.apiKey,s),this.fullPersistenceKey=Tg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ey(this.auth,{idToken:e}).catch(()=>{});return t?Ss._fromGetAccountInfoResponse(this.auth,t,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new tf(Wo(rk),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Wo(rk);const a=Tg(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const p=await h._get(a);if(p){let g;if(typeof p=="string"){const _=await ey(e,{idToken:p}).catch(()=>{});if(!_)break;g=await Ss._fromGetAccountInfoResponse(e,_,p)}else g=Ss._fromJSON(e,p);h!==s&&(u=g),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new tf(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new tf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ND(e))return"Blackberry";if(OD(e))return"Webos";if(RD(e))return"Safari";if((e.includes("chrome/")||xD(e))&&!e.includes("edge/"))return"Chrome";if(ID(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CD(n=Ir()){return/firefox\//i.test(n)}function RD(n=Ir()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xD(n=Ir()){return/crios\//i.test(n)}function kD(n=Ir()){return/iemobile/i.test(n)}function ID(n=Ir()){return/android/i.test(n)}function ND(n=Ir()){return/blackberry/i.test(n)}function OD(n=Ir()){return/webos/i.test(n)}function Ub(n=Ir()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tH(n=Ir()){var e;return Ub(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nH(){return P4()&&document.documentMode===10}function MD(n=Ir()){return Ub(n)||ID(n)||OD(n)||ND(n)||/windows phone/i.test(n)||kD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n,e=[]){let t;switch(n){case"Browser":t=ik(Ir());break;case"Worker":t=`${ik(Ir())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iH(n,e={}){return ua(n,"GET","/v2/passwordPolicy",Rl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=6;class oH{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:sH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sk(this),this.idTokenSubscription=new sk(this),this.beforeStateQueue=new rH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wo(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await tf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ey(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ri(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ty(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ri(this.app))return Promise.reject(il(this));const t=e?dn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ri(this.app)?Promise.reject(il(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ri(this.app)?Promise.reject(il(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iH(this),t=new oH(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await eH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wo(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await tf.create(this,[Wo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&P5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xl(n){return dn(n)}class sk{constructor(e){this.auth=e,this.observer=null,this.addObserver=F4(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lH(n){k0=n}function PD(n){return k0.loadJS(n)}function uH(){return k0.recaptchaEnterpriseScript}function cH(){return k0.gapiScript}function fH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class hH{constructor(){this.enterprise=new dH}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dH{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pH="recaptcha-enterprise",LD="NO_RECAPTCHA";class mH{constructor(e){this.type=pH,this.auth=xl(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{G5(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new $5(c);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(c=>{u(c)})})}function i(s,a,u){const c=window.grecaptcha;ek(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(LD)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hH().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&ek(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=uH();c.length!==0&&(c+=u),PD(c).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function ok(n,e,t,r=!1,i=!1){const s=new mH(n);let a;if(i)a=LD;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function VT(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ok(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ok(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(n,e){const t=Df(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Zo(s,e??{}))return i;hs(i,"already-initialized")}return t.initialize({options:e})}function yH(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Wo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _H(n,e,t){const r=xl(n);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=VD(e),{host:a,port:u}=vH(e),c=u===null?"":`:${u}`,h={url:`${s}//${a}${c}/`},p=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(Zo(h,r.config.emulator)&&Zo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,AH()}function VD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vH(n){const e=VD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ak(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:ak(a)}}}function ak(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function AH(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ko("not implemented")}_getIdTokenResponse(e){return Ko("not implemented")}_linkToIdToken(e,t){return Ko("not implemented")}_getReauthenticationResolver(e){return Ko("not implemented")}}async function TH(n,e){return ua(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EH(n,e){return x0(n,"POST","/v1/accounts:signInWithPassword",Rl(n,e))}async function bH(n,e){return ua(n,"POST","/v1/accounts:sendOobCode",Rl(n,e))}async function SH(n,e){return bH(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wH(n,e){return x0(n,"POST","/v1/accounts:signInWithEmailLink",Rl(n,e))}async function CH(n,e){return x0(n,"POST","/v1/accounts:signInWithEmailLink",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends Bb{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new qd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new qd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return VT(e,t,"signInWithPassword",EH);case"emailLink":return wH(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return VT(e,r,"signUpPassword",TH);case"emailLink":return CH(e,{idToken:t,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(n,e){return x0(n,"POST","/v1/accounts:signInWithIdp",Rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH="http://localhost";class Vu extends Bb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Mb(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Vu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return nf(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nf(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nf(e,t)}buildRequest(){const e={requestUri:RH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fp(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kH(n){const e=id(sd(n)).link,t=e?id(sd(e)).deep_link_id:null,r=id(sd(n)).deep_link_id;return(r?id(sd(r)).link:null)||r||t||e||n}class zb{constructor(e){var t,r,i,s,a,u;const c=id(sd(e)),h=(t=c.apiKey)!==null&&t!==void 0?t:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,g=xH((i=c.mode)!==null&&i!==void 0?i:null);We(h&&p&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=kH(e);try{return new zb(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.providerId=jf.PROVIDER_ID}static credential(e,t){return qd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=zb.parseLink(t);return We(r,"argument-error"),qd._fromEmailAndCode(e,r.code,r.tenantId)}}jf.PROVIDER_ID="password";jf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends jb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends vp{constructor(){super("facebook.com")}static credential(e){return Vu._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends vp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vu._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Go.credential(t,r)}catch{return null}}}Go.GOOGLE_SIGN_IN_METHOD="google.com";Go.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends vp{constructor(){super("github.com")}static credential(e){return Vu._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ha.credential(e.oauthAccessToken)}catch{return null}}}Ha.GITHUB_SIGN_IN_METHOD="github.com";Ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends vp{constructor(){super("twitter.com")}static credential(e,t){return Vu._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qa.credential(t,r)}catch{return null}}}qa.TWITTER_SIGN_IN_METHOD="twitter.com";qa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ss._fromIdTokenResponse(e,r,i),a=lk(r);return new vf({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=lk(r);return new vf({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function lk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends ms{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ny.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ny(e,t,r,i)}}function UD(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ny._fromErrorAndOperation(n,s,e,r):s})}async function IH(n,e,t=!1){const r=await Hd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return vf._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NH(n,e,t=!1){const{auth:r}=n;if(Ri(r.app))return Promise.reject(il(r));const i="reauthenticate";try{const s=await Hd(n,UD(r,i,e,n),t);We(s.idToken,r,"internal-error");const a=Vb(s.idToken);We(a,r,"internal-error");const{sub:u}=a;return We(n.uid===u,r,"user-mismatch"),vf._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(n,e,t=!1){if(Ri(n.app))return Promise.reject(il(n));const r="signIn",i=await UD(n,r,e),s=await vf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function OH(n,e){return BD(xl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MH(n){const e=xl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DH(n,e,t){const r=xl(n);await VT(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",SH)}function PH(n,e,t){return Ri(n.app)?Promise.reject(il(n)):OH(dn(n),jf.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MH(n),r})}function LH(n,e,t,r){return dn(n).onIdTokenChanged(e,t,r)}function VH(n,e,t){return dn(n).beforeAuthStateChanged(e,t)}function zD(n,e,t,r){return dn(n).onAuthStateChanged(e,t,r)}function UH(n){return dn(n).signOut()}const ry="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ry,"1"),this.storage.removeItem(ry),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH=1e3,zH=10;class FD extends jD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);nH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zH):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FD.type="LOCAL";const jH=FD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD extends jD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HD.type="SESSION";const qD=HD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new I0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),c=await FH(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}I0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const h=Fb("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return window}function qH(n){lo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(){return typeof lo().WorkerGlobalScope<"u"&&typeof lo().importScripts=="function"}async function $H(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GH(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function KH(){return $D()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="firebaseLocalStorageDb",WH=1,iy="firebaseLocalStorage",KD="fbase_key";class Ap{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function N0(n,e){return n.transaction([iy],e?"readwrite":"readonly").objectStore(iy)}function YH(){const n=indexedDB.deleteDatabase(GD);return new Ap(n).toPromise()}function UT(){const n=indexedDB.open(GD,WH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(iy,{keyPath:KD})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(iy)?e(r):(r.close(),await YH(),e(await UT()))})})}async function uk(n,e,t){const r=N0(n,!0).put({[KD]:e,value:t});return new Ap(r).toPromise()}async function QH(n,e){const t=N0(n,!1).get(e),r=await new Ap(t).toPromise();return r===void 0?null:r.value}function ck(n,e){const t=N0(n,!0).delete(e);return new Ap(t).toPromise()}const XH=800,JH=3;class WD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>JH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $D()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=I0._getInstance(KH()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $H(),!this.activeServiceWorker)return;this.sender=new HH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UT();return await uk(e,ry,"1"),await ck(e,ry),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uk(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>QH(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ck(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=N0(i,!1).getAll();return new Ap(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WD.type="LOCAL";const ZH=WD;new _p(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n,e){return e?Wo(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends Bb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eq(n){return BD(n.auth,new Hb(n),n.bypassAuthState)}function tq(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),NH(t,new Hb(n),n.bypassAuthState)}async function nq(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),IH(t,new Hb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eq;case"linkViaPopup":case"linkViaRedirect":return nq;case"reauthViaPopup":case"reauthViaRedirect":return tq;default:hs(this.auth,"internal-error")}}resolve(e){ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=new _p(2e3,1e4);async function iq(n,e,t){if(Ri(n.app))return Promise.reject(ws(n,"operation-not-supported-in-this-environment"));const r=xl(n);L5(n,e,jb);const i=YD(r,t);return new yu(r,"signInViaPopup",e,i).executeNotNull()}class yu extends QD{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,yu.currentPopupAction&&yu.currentPopupAction.cancel(),yu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){ia(this.filter.length===1,"Popup operations only handle one event");const e=Fb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rq.get())};e()}}yu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq="pendingRedirect",Eg=new Map;class oq extends QD{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Eg.get(this.auth._key());if(!e){try{const r=await aq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Eg.set(this.auth._key(),e)}return this.bypassAuthState||Eg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aq(n,e){const t=cq(e),r=uq(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function lq(n,e){Eg.set(n._key(),e)}function uq(n){return Wo(n._redirectPersistence)}function cq(n){return Tg(sq,n.config.apiKey,n.name)}async function fq(n,e,t=!1){if(Ri(n.app))return Promise.reject(il(n));const r=xl(n),i=YD(r,e),a=await new oq(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=10*60*1e3;class dq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hq&&this.cachedEventUids.clear(),this.cachedEventUids.has(fk(e))}saveEventToCache(e){this.cachedEventUids.add(fk(e)),this.lastProcessedEventTime=Date.now()}}function fk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XD({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XD(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mq(n,e={}){return ua(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yq=/^https?/;async function _q(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mq(n);for(const t of e)try{if(vq(t))return}catch{}hs(n,"unauthorized-domain")}function vq(n){const e=PT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!yq.test(t))return!1;if(gq.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq=new _p(3e4,6e4);function hk(){const n=lo().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Tq(n){return new Promise((e,t)=>{var r,i,s;function a(){hk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hk(),t(ws(n,"network-request-failed"))},timeout:Aq.get()})}if(!((i=(r=lo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lo().gapi)===null||s===void 0)&&s.load)a();else{const u=fH("iframefcb");return lo()[u]=()=>{gapi.load?a():t(ws(n,"network-request-failed"))},PD(`${cH()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw bg=null,e})}let bg=null;function Eq(n){return bg=bg||Tq(n),bg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=new _p(5e3,15e3),Sq="__/auth/iframe",wq="emulator/auth/iframe",Cq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xq(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lb(e,wq):`https://${n.config.authDomain}/${Sq}`,r={apiKey:e.apiKey,appName:n.name,v:Wu},i=Rq.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${fp(r).slice(1)}`}async function kq(n){const e=await Eq(n),t=lo().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:xq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ws(n,"network-request-failed"),u=lo().setTimeout(()=>{s(a)},bq.get());function c(){lo().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nq=500,Oq=600,Mq="_blank",Dq="http://localhost";class dk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pq(n,e,t,r=Nq,i=Oq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},Iq),{width:r.toString(),height:i.toString(),top:s,left:a}),h=Ir().toLowerCase();t&&(u=xD(h)?Mq:t),CD(h)&&(e=e||Dq,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[A,T])=>`${_}${A}=${T},`,"");if(tH(h)&&u!=="_self")return Lq(e||"",u),new dk(null);const g=window.open(e||"",u,p);We(g,n,"popup-blocked");try{g.focus()}catch{}return new dk(g)}function Lq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq="__/auth/handler",Uq="emulator/auth/handler",Bq=encodeURIComponent("fac");async function pk(n,e,t,r,i,s){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wu,eventId:i};if(e instanceof jb){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",j4(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))a[p]=g}if(e instanceof vp){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await n._getAppCheckToken(),h=c?`#${Bq}=${encodeURIComponent(c)}`:"";return`${zq(n)}?${fp(u).slice(1)}${h}`}function zq({config:n}){return n.emulator?Lb(n,Uq):`https://${n.authDomain}/${Vq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="webStorageSupport";class jq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qD,this._completeRedirectFn=fq,this._overrideRedirectResult=lq}async _openPopup(e,t,r,i){var s;ia((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await pk(e,t,r,PT(),i);return Pq(e,a,Fb())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await pk(e,t,r,PT(),i);return qH(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ia(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await kq(e),r=new dq(e);return t.register("authEvent",i=>(We(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yA,{type:yA},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[yA];a!==void 0&&t(!!a),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_q(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MD()||RD()||Ub()}}const Fq=jq;var mk="@firebase/auth",gk="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $q(n){Cs(new fs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;We(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DD(n)},h=new aH(r,i,s,c);return yH(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cs(new fs("auth-internal",e=>{const t=xl(e.getProvider("auth").getImmediate());return(r=>new Hq(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(mk,gk,qq(n)),ri(mk,gk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=5*60,Kq=aO("authIdTokenMaxAge")||Gq;let yk=null;const Wq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Kq)return;const i=t==null?void 0:t.token;yk!==i&&(yk=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sy(n=GE()){const e=Df(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gH(n,{popupRedirectResolver:Fq,persistence:[ZH,jH,qD]}),r=aO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Wq(s.toString());VH(t,a,()=>a(t.currentUser)),LH(t,u=>a(u))}}const i=iO("auth");return i&&_H(t,`http://${i}`),t}function Yq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}lH({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ws("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Yq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$q("Browser");const JD="@firebase/installations",qb="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1e4,eP=`w:${qb}`,tP="FIS_v2",Qq="https://firebaseinstallations.googleapis.com/v1",Xq=60*60*1e3,Jq="installations",Zq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Uu=new Ku(Jq,Zq,e8);function nP(n){return n instanceof ms&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP({projectId:n}){return`${Qq}/projects/${n}/installations`}function iP(n){return{token:n.token,requestStatus:2,expiresIn:n8(n.expiresIn),creationTime:Date.now()}}async function sP(n,e){const r=(await e.json()).error;return Uu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function oP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function t8(n,{refreshToken:e}){const t=oP(n);return t.append("Authorization",r8(e)),t}async function aP(n){const e=await n();return e.status>=500&&e.status<600?n():e}function n8(n){return Number(n.replace("s","000"))}function r8(n){return`${tP} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=rP(n),i=oP(n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:t,authVersion:tP,appId:n.appId,sdkVersion:eP},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await aP(()=>fetch(r,u));if(c.ok){const h=await c.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:iP(h.authToken)}}else throw await sP("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=/^[cdef][\w-]{21}$/,BT="";function a8(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=l8(n);return o8.test(t)?t:BT}catch{return BT}}function l8(n){return s8(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new Map;function cP(n,e){const t=O0(n);fP(t,e),u8(t,e)}function fP(n,e){const t=uP.get(n);if(t)for(const r of t)r(e)}function u8(n,e){const t=c8();t&&t.postMessage({key:n,fid:e}),f8()}let _u=null;function c8(){return!_u&&"BroadcastChannel"in self&&(_u=new BroadcastChannel("[Firebase] FID Change"),_u.onmessage=n=>{fP(n.data.key,n.data.fid)}),_u}function f8(){uP.size===0&&_u&&(_u.close(),_u=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8="firebase-installations-database",d8=1,Bu="firebase-installations-store";let _A=null;function $b(){return _A||(_A=pO(h8,d8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Bu)}}})),_A}async function oy(n,e){const t=O0(n),i=(await $b()).transaction(Bu,"readwrite"),s=i.objectStore(Bu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&cP(n,e.fid),e}async function hP(n){const e=O0(n),r=(await $b()).transaction(Bu,"readwrite");await r.objectStore(Bu).delete(e),await r.done}async function M0(n,e){const t=O0(n),i=(await $b()).transaction(Bu,"readwrite"),s=i.objectStore(Bu),a=await s.get(t),u=e(a);return u===void 0?await s.delete(t):await s.put(u,t),await i.done,u&&(!a||a.fid!==u.fid)&&cP(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(n){let e;const t=await M0(n.appConfig,r=>{const i=p8(r),s=m8(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===BT?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function p8(n){const e=n||{fid:a8(),registrationStatus:0};return dP(e)}function m8(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Uu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=g8(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:y8(n)}:{installationEntry:e}}async function g8(n,e){try{const t=await i8(n,e);return oy(n.appConfig,t)}catch(t){throw nP(t)&&t.customData.serverCode===409?await hP(n.appConfig):await oy(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function y8(n){let e=await _k(n.appConfig);for(;e.registrationStatus===1;)await lP(100),e=await _k(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Gb(n);return r||t}return e}function _k(n){return M0(n,e=>{if(!e)throw Uu.create("installation-not-found");return dP(e)})}function dP(n){return _8(n)?{fid:n.fid,registrationStatus:0}:n}function _8(n){return n.registrationStatus===1&&n.registrationTime+ZD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v8({appConfig:n,heartbeatServiceProvider:e},t){const r=A8(n,t),i=t8(n,t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:eP,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(a)},c=await aP(()=>fetch(r,u));if(c.ok){const h=await c.json();return iP(h)}else throw await sP("Generate Auth Token",c)}function A8(n,{fid:e}){return`${rP(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb(n,e=!1){let t;const r=await M0(n.appConfig,s=>{if(!pP(s))throw Uu.create("not-registered");const a=s.authToken;if(!e&&b8(a))return s;if(a.requestStatus===1)return t=T8(n,e),s;{if(!navigator.onLine)throw Uu.create("app-offline");const u=w8(s);return t=E8(n,u),u}});return t?await t:r.authToken}async function T8(n,e){let t=await vk(n.appConfig);for(;t.authToken.requestStatus===1;)await lP(100),t=await vk(n.appConfig);const r=t.authToken;return r.requestStatus===0?Kb(n,e):r}function vk(n){return M0(n,e=>{if(!pP(e))throw Uu.create("not-registered");const t=e.authToken;return C8(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function E8(n,e){try{const t=await v8(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await oy(n.appConfig,r),t}catch(t){if(nP(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await hP(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await oy(n.appConfig,r)}throw t}}function pP(n){return n!==void 0&&n.registrationStatus===2}function b8(n){return n.requestStatus===2&&!S8(n)}function S8(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Xq}function w8(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function C8(n){return n.requestStatus===1&&n.requestTime+ZD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(n){const e=n,{installationEntry:t,registrationPromise:r}=await Gb(e);return r?r.catch(console.error):Kb(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(n,e=!1){const t=n;return await k8(t),(await Kb(t,e)).token}async function k8(n){const{registrationPromise:e}=await Gb(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(n){if(!n||!n.options)throw vA("App Configuration");if(!n.name)throw vA("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw vA(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function vA(n){return Uu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="installations",N8="installations-internal",O8=n=>{const e=n.getProvider("app").getImmediate(),t=I8(e),r=Df(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},M8=n=>{const e=n.getProvider("app").getImmediate(),t=Df(e,mP).getImmediate();return{getId:()=>R8(t),getToken:i=>x8(t,i)}};function D8(){Cs(new fs(mP,O8,"PUBLIC")),Cs(new fs(N8,M8,"PRIVATE"))}D8();ri(JD,qb);ri(JD,qb,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="analytics",P8="firebase_id",L8="origin",V8=60*1e3,U8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new u0("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ls=new Ku("analytics","Analytics",B8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(n){if(!n.startsWith(Wb)){const e=ls.create("invalid-gtag-resource",{gtagURL:n});return ii.warn(e.message),""}return n}function gP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function j8(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function F8(n,e){const t=j8("firebase-js-sdk-policy",{createScriptURL:z8}),r=document.createElement("script"),i=`${Wb}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function H8(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function q8(n,e,t,r,i,s){const a=r[i];try{if(a)await e[a];else{const c=(await gP(t)).find(h=>h.measurementId===i);c&&await e[c.appId]}}catch(u){ii.error(u)}n("config",i,s)}async function $8(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const u=await gP(t);for(const c of a){const h=u.find(g=>g.measurementId===c),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){ii.error(s)}}function G8(n,e,t,r){async function i(s,...a){try{if(s==="event"){const[u,c]=a;await $8(n,e,t,u,c)}else if(s==="config"){const[u,c]=a;await q8(n,e,t,r,u,c)}else if(s==="consent"){const[u,c]=a;n("consent",u,c)}else if(s==="get"){const[u,c,h]=a;n("get",u,c,h)}else if(s==="set"){const[u]=a;n("set",u)}else n(s,...a)}catch(u){ii.error(u)}}return i}function K8(n,e,t,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=G8(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function W8(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Wb)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=30,Q8=1e3;class X8{constructor(e={},t=Q8){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const yP=new X8;function J8(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Z8(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:J8(r)},s=U8.replace("{app-id}",t),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let u="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw ls.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u})}return a.json()}async function e7(n,e=yP,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ls.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ls.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new r7;return setTimeout(async()=>{u.abort()},V8),_P({appId:r,apiKey:i,measurementId:s},a,u,e)}async function _P(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=yP){var s;const{appId:a,measurementId:u}=n;try{await t7(r,e)}catch(c){if(u)return ii.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:u};throw c}try{const c=await Z8(n);return i.deleteThrottleMetadata(a),c}catch(c){const h=c;if(!n7(h)){if(i.deleteThrottleMetadata(a),u)return ii.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw c}const p=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?FR(t,i.intervalMillis,Y8):FR(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(a,g),ii.debug(`Calling attemptFetch again in ${p} millis`),_P(n,g,r,i)}}function t7(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function n7(n){if(!(n instanceof ms)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class r7{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function i7(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,a=Object.assign(Object.assign({},r),{send_to:s});n("event",t,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s7(){if(cO())try{await fO()}catch(n){return ii.warn(ls.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ii.warn(ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function o7(n,e,t,r,i,s,a){var u;const c=e7(n);c.then(A=>{t[A.measurementId]=A.appId,n.options.measurementId&&A.measurementId!==n.options.measurementId&&ii.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>ii.error(A)),e.push(c);const h=s7().then(A=>{if(A)return r.getId()}),[p,g]=await Promise.all([c,h]);W8(s)||F8(s,p.measurementId),i("js",new Date);const _=(u=a==null?void 0:a.config)!==null&&u!==void 0?u:{};return _[L8]="firebase",_.update=!0,g!=null&&(_[P8]=g),i("config",p.measurementId,_),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e){this.app=e}_delete(){return delete Ed[this.app.options.appId],Promise.resolve()}}let Ed={},Tk=[];const Ek={};let AA="dataLayer",l7="gtag",bk,vP,Sk=!1;function u7(){const n=[];if(uO()&&n.push("This is a browser extension environment."),V4()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ls.create("invalid-analytics-context",{errorInfo:e});ii.warn(t.message)}}function c7(n,e,t){u7();const r=n.options.appId;if(!r)throw ls.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ii.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ls.create("no-api-key");if(Ed[r]!=null)throw ls.create("already-exists",{id:r});if(!Sk){H8(AA);const{wrappedGtag:s,gtagCore:a}=K8(Ed,Tk,Ek,AA,l7);vP=s,bk=a,Sk=!0}return Ed[r]=o7(n,Tk,Ek,e,bk,AA,t),new a7(n)}function f7(n,e,t,r){n=dn(n),i7(vP,Ed[n.app.options.appId],e,t,r).catch(i=>ii.error(i))}const wk="@firebase/analytics",Ck="0.10.12";function h7(){Cs(new fs(Ak,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return c7(r,i,t)},"PUBLIC")),Cs(new fs("analytics-internal",n,"PRIVATE")),ri(wk,Ck),ri(wk,Ck,"esm2017");function n(e){try{const t=e.getProvider(Ak).getImmediate();return{logEvent:(r,i,s)=>f7(t,r,i,s)}}catch(t){throw ls.create("interop-component-reg-failed",{reason:t})}}}h7();const d7={apiKey:"AIzaSyCCa-PxslkzcIawmDzjvD7NfpfKDDHW_cY",authDomain:"mydailyreed.firebaseapp.com",projectId:"mydailyreed",storageBucket:"mydailyreed.firebasestorage.app",messagingSenderId:"784473877562",appId:"1:784473877562:web:86db61e82986c1bdd39903",measurementId:"G-MT4S33PKD0"},Yb=mO(d7),p7=I5(Yb),hu=sy(Yb),Rs=X6(Yb),ay="/assets/MDRLogoB-Y-uXmpVe.png",zT="/assets/facebookBlack-DTxLsc-z.png",jT="/assets/instagramBlack-f2rhpmha.png",FT="/assets/linkedinBlack-D22kkR36.png",Rk="/assets/arrow-b9VpQuFC.png";function Ho(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function AP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Pi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Af={duration:.5,overwrite:!1,delay:0},Qb,pr,Xt,uo=1e8,Rr=1/uo,HT=Math.PI*2,m7=HT/4,g7=0,TP=Math.sqrt,y7=Math.cos,_7=Math.sin,Qn=function(e){return typeof e=="string"},hn=function(e){return typeof e=="function"},sa=function(e){return typeof e=="number"},Xb=function(e){return typeof e>"u"},po=function(e){return typeof e=="object"},si=function(e){return e!==!1},Jb=function(){return typeof window<"u"},Jm=function(e){return hn(e)||Qn(e)},EP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},kr=Array.isArray,qT=/(?:-?\.?\d|\.)+/gi,bP=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,TA=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,SP=/[+-]=-?[.\d]+/,wP=/[^,'"\[\]\s]+/gi,v7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,rn,Zs,$T,Zb,Vi={},ly={},CP,RP=function(e){return(ly=Tf(e,Vi))&&ci},eS=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},$d=function(e,t){return!t&&console.warn(e)},xP=function(e,t){return e&&(Vi[e]=t)&&ly&&(ly[e]=t)||Vi},Gd=function(){return 0},A7={suppressEvents:!0,isStart:!0,kill:!1},Sg={suppressEvents:!0,kill:!1},T7={suppressEvents:!0},tS={},sl=[],GT={},kP,Ci={},EA={},xk=30,wg=[],nS="",rS=function(e){var t=e[0],r,i;if(po(t)||hn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=wg.length;i--&&!wg[i].targetTest(t););r=wg[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new ZP(e[i],r)))||e.splice(i,1);return e},wu=function(e){return e._gsap||rS(as(e))[0]._gsap},IP=function(e,t,r){return(r=e[t])&&hn(r)?e[t]():Xb(r)&&e.getAttribute&&e.getAttribute(t)||r},oi=function(e,t){return(e=e.split(",")).forEach(t)||e},An=function(e){return Math.round(e*1e5)/1e5||0},kn=function(e){return Math.round(e*1e7)/1e7||0},rf=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},E7=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},uy=function(){var e=sl.length,t=sl.slice(0),r,i;for(GT={},sl.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},NP=function(e,t,r,i){sl.length&&!pr&&uy(),e.render(t,r,pr&&t<0&&(e._initted||e._startAt)),sl.length&&!pr&&uy()},OP=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(wP).length<2?t:Qn(e)?e.trim():e},MP=function(e){return e},Ui=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},b7=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Tf=function(e,t){for(var r in t)e[r]=t[r];return e},kk=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=po(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},cy=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},bd=function(e){var t=e.parent||rn,r=e.keyframes?b7(kr(e.keyframes)):Ui;if(si(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},S7=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},DP=function(e,t,r,i,s){var a=e[i],u;if(s)for(u=t[s];a&&a[s]>u;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},D0=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[r]===t&&(e[r]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Tl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Cu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},w7=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},KT=function(e,t,r,i){return e._startAt&&(pr?e._startAt.revert(Sg):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},C7=function n(e){return!e||e._ts&&n(e.parent)},Ik=function(e){return e._repeat?Ef(e._tTime,e=e.duration()+e._rDelay)*e:0},Ef=function(e,t){var r=Math.floor(e=kn(e/t));return e&&r===e?r-1:r},fy=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},P0=function(e){return e._end=kn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Rr)||0))},L0=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=kn(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),P0(e),r._dirty||Cu(r,e)),e},PP=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=fy(e.rawTime(),t),(!t._dur||Tp(0,t.totalDuration(),r)-t._tTime>Rr)&&t.render(r,!0)),Cu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},eo=function(e,t,r,i){return t.parent&&Tl(t),t._start=kn((sa(r)?r:r||e!==rn?ts(e,r,t):e._time)+t._delay),t._end=kn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),DP(e,t,"_first","_last",e._sort?"_start":0),WT(t)||(e._recent=t),i||PP(e,t),e._ts<0&&L0(e,e._tTime),e},LP=function(e,t){return(Vi.ScrollTrigger||eS("scrollTrigger",t))&&Vi.ScrollTrigger.create(t,e)},VP=function(e,t,r,i,s){if(sS(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!pr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&kP!==xi.frame)return sl.push(e),e._lazy=[s,i],1},R7=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},WT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},x7=function(e,t,r,i){var s=e.ratio,a=t<0||!t&&(!e._start&&R7(e)&&!(!e._initted&&WT(e))||(e._ts<0||e._dp._ts<0)&&!WT(e))?0:1,u=e._rDelay,c=0,h,p,g;if(u&&e._repeat&&(c=Tp(0,e._tDur,t),p=Ef(c,u),e._yoyo&&p&1&&(a=1-a),p!==Ef(e._tTime,u)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||pr||i||e._zTime===Rr||!t&&e._zTime){if(!e._initted&&VP(e,t,i,r,c))return;for(g=e._zTime,e._zTime=t||(r?Rr:0),r||(r=t&&!g),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,h=e._pt;h;)h.r(a,h.d),h=h._next;t<0&&KT(e,t,r,!0),e._onUpdate&&!r&&Oi(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&Oi(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Tl(e,1),!r&&!pr&&(Oi(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},k7=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},bf=function(e,t,r,i){var s=e._repeat,a=kn(t)||0,u=e._tTime/e._tDur;return u&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:kn(a*(s+1)+e._rDelay*s):a,u>0&&!i&&L0(e,e._tTime=e._tDur*u),e.parent&&P0(e),r||Cu(e.parent,e),e},Nk=function(e){return e instanceof jr?Cu(e):bf(e,e._dur)},I7={_start:0,endTime:Gd,totalDuration:Gd},ts=function n(e,t,r){var i=e.labels,s=e._recent||I7,a=e.duration()>=uo?s.endTime(!1):e._dur,u,c,h;return Qn(t)&&(isNaN(t)||t in i)?(c=t.charAt(0),h=t.substr(-1)==="%",u=t.indexOf("="),c==="<"||c===">"?(u>=0&&(t=t.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(u<0?s:r).totalDuration()/100:1)):u<0?(t in i||(i[t]=a),i[t]):(c=parseFloat(t.charAt(u-1)+t.substr(u+1)),h&&r&&(c=c/100*(kr(r)?r[0]:r).totalDuration()),u>1?n(e,t.substr(0,u-1),r)+c:a+c)):t==null?a:+t},Sd=function(e,t,r){var i=sa(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],u,c;if(i&&(a.duration=t[1]),a.parent=r,e){for(u=a,c=r;c&&!("immediateRender"in u);)u=c.vars.defaults||{},c=si(c.vars.inherit)&&c.parent;a.immediateRender=si(u.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new xn(t[0],a,t[s+1])},kl=function(e,t){return e||e===0?t(e):t},Tp=function(e,t,r){return r<e?e:r>t?t:r},Cr=function(e,t){return!Qn(e)||!(t=v7.exec(e))?"":t[1]},N7=function(e,t,r){return kl(r,function(i){return Tp(e,t,i)})},YT=[].slice,UP=function(e,t){return e&&po(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&po(e[0]))&&!e.nodeType&&e!==Zs},O7=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Qn(i)&&!t||UP(i,1)?(s=r).push.apply(s,as(i)):r.push(i)})||r},as=function(e,t,r){return Xt&&!t&&Xt.selector?Xt.selector(e):Qn(e)&&!r&&($T||!Sf())?YT.call((t||Zb).querySelectorAll(e),0):kr(e)?O7(e,r):UP(e)?YT.call(e,0):e?[e]:[]},QT=function(e){return e=as(e)[0]||$d("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return as(t,r.querySelectorAll?r:r===e?$d("Invalid scope")||Zb.createElement("div"):e)}},BP=function(e){return e.sort(function(){return .5-Math.random()})},zP=function(e){if(hn(e))return e;var t=po(e)?e:{each:e},r=Ru(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},u=i>0&&i<1,c=isNaN(i)||u,h=t.axis,p=i,g=i;return Qn(i)?p=g={center:.5,edges:.5,end:1}[i]||0:!u&&c&&(p=i[0],g=i[1]),function(_,A,T){var E=(T||t).length,S=a[E],x,P,z,H,V,D,O,I,k;if(!S){if(k=t.grid==="auto"?0:(t.grid||[1,uo])[1],!k){for(O=-1e8;O<(O=T[k++].getBoundingClientRect().left)&&k<E;);k<E&&k--}for(S=a[E]=[],x=c?Math.min(k,E)*p-.5:i%k,P=k===uo?0:c?E*g/k-.5:i/k|0,O=0,I=uo,D=0;D<E;D++)z=D%k-x,H=P-(D/k|0),S[D]=V=h?Math.abs(h==="y"?H:z):TP(z*z+H*H),V>O&&(O=V),V<I&&(I=V);i==="random"&&BP(S),S.max=O-I,S.min=I,S.v=E=(parseFloat(t.amount)||parseFloat(t.each)*(k>E?E-1:h?h==="y"?E/k:k:Math.max(k,E/k))||0)*(i==="edges"?-1:1),S.b=E<0?s-E:s,S.u=Cr(t.amount||t.each)||0,r=r&&E<0?QP(r):r}return E=(S[_]-S.min)/S.max||0,kn(S.b+(r?r(E):E)*S.v)+S.u}},XT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=kn(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(sa(r)?0:Cr(r))}},jP=function(e,t){var r=kr(e),i,s;return!r&&po(e)&&(i=r=e.radius||uo,e.values?(e=as(e.values),(s=!sa(e[0]))&&(i*=i)):e=XT(e.increment)),kl(t,r?hn(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var u=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),h=uo,p=0,g=e.length,_,A;g--;)s?(_=e[g].x-u,A=e[g].y-c,_=_*_+A*A):_=Math.abs(e[g]-u),_<h&&(h=_,p=g);return p=!i||h<=i?e[p]:a,s||p===a||sa(a)?p:p+Cr(a)}:XT(e))},FP=function(e,t,r,i){return kl(kr(e)?!t:r===!0?!!(r=0):!i,function(){return kr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},M7=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,a){return a(s)},i)}},D7=function(e,t){return function(r){return e(parseFloat(r))+(t||Cr(r))}},P7=function(e,t,r){return qP(e,t,0,1,r)},HP=function(e,t,r){return kl(r,function(i){return e[~~t(i)]})},L7=function n(e,t,r){var i=t-e;return kr(e)?HP(e,n(0,e.length),t):kl(r,function(s){return(i+(s-e)%i)%i+e})},V7=function n(e,t,r){var i=t-e,s=i*2;return kr(e)?HP(e,n(0,e.length-1),t):kl(r,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},Kd=function(e){for(var t=0,r="",i,s,a,u;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),u=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(u?wP:qT),r+=e.substr(t,i-t)+FP(u?s:+s[0],u?0:+s[1],+s[2]||1e-5),t=a+1;return r+e.substr(t,e.length-t)},qP=function(e,t,r,i,s){var a=t-e,u=i-r;return kl(s,function(c){return r+((c-e)/a*u||0)})},U7=function n(e,t,r,i){var s=isNaN(e+t)?0:function(A){return(1-A)*e+A*t};if(!s){var a=Qn(e),u={},c,h,p,g,_;if(r===!0&&(i=1)&&(r=null),a)e={p:e},t={p:t};else if(kr(e)&&!kr(t)){for(p=[],g=e.length,_=g-2,h=1;h<g;h++)p.push(n(e[h-1],e[h]));g--,s=function(T){T*=g;var E=Math.min(_,~~T);return p[E](T-E)},r=t}else i||(e=Tf(kr(e)?[]:{},e));if(!p){for(c in t)iS.call(u,e,c,"get",t[c]);s=function(T){return lS(T,u)||(a?e.p:e)}}}return kl(r,s)},Ok=function(e,t,r){var i=e.labels,s=uo,a,u,c;for(a in i)u=i[a]-t,u<0==!!r&&u&&s>(u=Math.abs(u))&&(c=a,s=u);return c},Oi=function(e,t,r){var i=e.vars,s=i[t],a=Xt,u=e._ctx,c,h,p;if(s)return c=i[t+"Params"],h=i.callbackScope||e,r&&sl.length&&uy(),u&&(Xt=u),p=c?s.apply(h,c):s.call(h),Xt=a,p},cd=function(e){return Tl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!pr),e.progress()<1&&Oi(e,"onInterrupt"),e},Yc,$P=[],GP=function(e){if(e)if(e=!e.name&&e.default||e,Jb()||e.headless){var t=e.name,r=hn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Gd,render:lS,add:iS,kill:e$,modifier:Z7,rawVars:0},a={targetTest:0,get:0,getSetter:aS,aliases:{},register:0};if(Sf(),e!==i){if(Ci[t])return;Ui(i,Ui(cy(e,s),a)),Tf(i.prototype,Tf(s,cy(e,a))),Ci[i.prop=t]=i,e.targetTest&&(wg.push(i),tS[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}xP(t,i),e.register&&e.register(ci,i,ai)}else $P.push(e)},Ht=255,fd={aqua:[0,Ht,Ht],lime:[0,Ht,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ht],navy:[0,0,128],white:[Ht,Ht,Ht],olive:[128,128,0],yellow:[Ht,Ht,0],orange:[Ht,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ht,0,0],pink:[Ht,192,203],cyan:[0,Ht,Ht],transparent:[Ht,Ht,Ht,0]},bA=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Ht+.5|0},KP=function(e,t,r){var i=e?sa(e)?[e>>16,e>>8&Ht,e&Ht]:0:fd.black,s,a,u,c,h,p,g,_,A,T;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),fd[e])i=fd[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),u=e.charAt(3),e="#"+s+s+a+a+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ht,i&Ht,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ht,e&Ht]}else if(e.substr(0,3)==="hsl"){if(i=T=e.match(qT),!t)c=+i[0]%360/360,h=+i[1]/100,p=+i[2]/100,a=p<=.5?p*(h+1):p+h-p*h,s=p*2-a,i.length>3&&(i[3]*=1),i[0]=bA(c+1/3,s,a),i[1]=bA(c,s,a),i[2]=bA(c-1/3,s,a);else if(~e.indexOf("="))return i=e.match(bP),r&&i.length<4&&(i[3]=1),i}else i=e.match(qT)||fd.transparent;i=i.map(Number)}return t&&!T&&(s=i[0]/Ht,a=i[1]/Ht,u=i[2]/Ht,g=Math.max(s,a,u),_=Math.min(s,a,u),p=(g+_)/2,g===_?c=h=0:(A=g-_,h=p>.5?A/(2-g-_):A/(g+_),c=g===s?(a-u)/A+(a<u?6:0):g===a?(u-s)/A+2:(s-a)/A+4,c*=60),i[0]=~~(c+.5),i[1]=~~(h*100+.5),i[2]=~~(p*100+.5)),r&&i.length<4&&(i[3]=1),i},WP=function(e){var t=[],r=[],i=-1;return e.split(ol).forEach(function(s){var a=s.match(Wc)||[];t.push.apply(t,a),r.push(i+=a.length+1)}),t.c=r,t},Mk=function(e,t,r){var i="",s=(e+i).match(ol),a=t?"hsla(":"rgba(",u=0,c,h,p,g;if(!s)return e;if(s=s.map(function(_){return(_=KP(_,t,1))&&a+(t?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),r&&(p=WP(e),c=r.c,c.join(i)!==p.c.join(i)))for(h=e.replace(ol,"1").split(Wc),g=h.length-1;u<g;u++)i+=h[u]+(~c.indexOf(u)?s.shift()||a+"0,0,0,0)":(p.length?p:s.length?s:r).shift());if(!h)for(h=e.split(ol),g=h.length-1;u<g;u++)i+=h[u]+s[u];return i+h[g]},ol=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in fd)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),B7=/hsl[a]?\(/,YP=function(e){var t=e.join(" "),r;if(ol.lastIndex=0,ol.test(t))return r=B7.test(t),e[1]=Mk(e[1],r),e[0]=Mk(e[0],r,WP(e[1])),!0},Wd,xi=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,a=s,u=[],c,h,p,g,_,A,T=function E(S){var x=n()-i,P=S===!0,z,H,V,D;if((x>e||x<0)&&(r+=x-t),i+=x,V=i-r,z=V-a,(z>0||P)&&(D=++g.frame,_=V-g.time*1e3,g.time=V=V/1e3,a+=z+(z>=s?4:s-z),H=1),P||(c=h(E)),H)for(A=0;A<u.length;A++)u[A](V,_,D,S)};return g={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(S){return _/(1e3/(S||60))},wake:function(){CP&&(!$T&&Jb()&&(Zs=$T=window,Zb=Zs.document||{},Vi.gsap=ci,(Zs.gsapVersions||(Zs.gsapVersions=[])).push(ci.version),RP(ly||Zs.GreenSockGlobals||!Zs.gsap&&Zs||{}),$P.forEach(GP)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&g.sleep(),h=p||function(S){return setTimeout(S,a-g.time*1e3+1|0)},Wd=1,T(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(c),Wd=0,h=Gd},lagSmoothing:function(S,x){e=S||1/0,t=Math.min(x||33,e)},fps:function(S){s=1e3/(S||240),a=g.time*1e3+s},add:function(S,x,P){var z=x?function(H,V,D,O){S(H,V,D,O),g.remove(z)}:S;return g.remove(S),u[P?"unshift":"push"](z),Sf(),z},remove:function(S,x){~(x=u.indexOf(S))&&u.splice(x,1)&&A>=x&&A--},_listeners:u},g}(),Sf=function(){return!Wd&&xi.wake()},vt={},z7=/^[\d.\-M][\d.\-,\s]/,j7=/["']/g,F7=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,a=r.length,u,c,h;s<a;s++)c=r[s],u=s!==a-1?c.lastIndexOf(","):c.length,h=c.substr(0,u),t[i]=isNaN(h)?h.replace(j7,"").trim():+h,i=c.substr(u+1).trim();return t},H7=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},q7=function(e){var t=(e+"").split("("),r=vt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[F7(t[1])]:H7(e).split(",").map(OP)):vt._CE&&z7.test(e)?vt._CE("",e):r},QP=function(e){return function(t){return 1-e(1-t)}},XP=function n(e,t){for(var r=e._first,i;r;)r instanceof jr?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Ru=function(e,t){return e&&(hn(e)?e:vt[e]||q7(e))||t},Xu=function(e,t,r,i){r===void 0&&(r=function(c){return 1-t(1-c)}),i===void 0&&(i=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},a;return oi(e,function(u){vt[u]=Vi[u]=s,vt[a=u.toLowerCase()]=r;for(var c in s)vt[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=vt[u+"."+c]=s[c]}),s},JP=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},SA=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),a=s/HT*(Math.asin(1/i)||0),u=function(p){return p===1?1:i*Math.pow(2,-10*p)*_7((p-a)*s)+1},c=e==="out"?u:e==="in"?function(h){return 1-u(1-h)}:JP(u);return s=HT/s,c.config=function(h,p){return n(e,h,p)},c},wA=function n(e,t){t===void 0&&(t=1.70158);var r=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:JP(r);return i.config=function(s){return n(e,s)},i};oi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Xu(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});vt.Linear.easeNone=vt.none=vt.Linear.easeIn;Xu("Elastic",SA("in"),SA("out"),SA());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(u){return u<t?n*u*u:u<r?n*Math.pow(u-1.5/e,2)+.75:u<i?n*(u-=2.25/e)*u+.9375:n*Math.pow(u-2.625/e,2)+.984375};Xu("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Xu("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Xu("Circ",function(n){return-(TP(1-n*n)-1)});Xu("Sine",function(n){return n===1?1:-y7(n*m7)+1});Xu("Back",wA("in"),wA("out"),wA());vt.SteppedEase=vt.steps=Vi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,a=1-Rr;return function(u){return((i*Tp(0,a,u)|0)+s)*r}}};Af.ease=vt["quad.out"];oi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return nS+=n+","+n+"Params,"});var ZP=function(e,t){this.id=g7++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:IP,this.set=t?t.getSetter:aS},Yd=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,bf(this,+t.duration,1,1),this.data=t.data,Xt&&(this._ctx=Xt,Xt.data.push(this)),Wd||xi.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,bf(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Sf(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(L0(this,r),!s._dp||s.parent||PP(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&eo(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Rr||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),NP(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Ik(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Ik(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Ef(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?fy(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-1e-8?0:this._rts,this.totalTime(Tp(-Math.abs(this._delay),this._tDur,s),i!==!1),P0(this),w7(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Sf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Rr&&(this._tTime-=Rr)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&eo(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(si(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?fy(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=T7);var i=pr;return pr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),pr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Nk(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Nk(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(ts(this,r),si(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,si(i)),this._dur||(this._zTime=-1e-8),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Rr)},e.eventCallback=function(r,i,s){var a=this.vars;return arguments.length>1?(i?(a[r]=i,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete a[r],this):a[r]},e.then=function(r){var i=this;return new Promise(function(s){var a=hn(r)?r:MP,u=function(){var h=i.then;i.then=null,hn(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=h),s(a),i.then=h};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?u():i._prom=u})},e.kill=function(){cd(this)},n}();Ui(Yd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var jr=function(n){AP(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=si(r.sortChildren),rn&&eo(r.parent||rn,Ho(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&LP(Ho(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return Sd(0,arguments,this),this},t.from=function(i,s,a){return Sd(1,arguments,this),this},t.fromTo=function(i,s,a,u){return Sd(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,bd(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new xn(i,s,ts(this,a),1),this},t.call=function(i,s,a){return eo(this,xn.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,u,c,h,p){return a.duration=s,a.stagger=a.stagger||u,a.onComplete=h,a.onCompleteParams=p,a.parent=this,new xn(i,a,ts(this,c)),this},t.staggerFrom=function(i,s,a,u,c,h,p){return a.runBackwards=1,bd(a).immediateRender=si(a.immediateRender),this.staggerTo(i,s,a,u,c,h,p)},t.staggerFromTo=function(i,s,a,u,c,h,p,g){return u.startAt=a,bd(u).immediateRender=si(u.immediateRender),this.staggerTo(i,s,u,c,h,p,g)},t.render=function(i,s,a){var u=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,p=i<=0?0:kn(i),g=this._zTime<0!=i<0&&(this._initted||!h),_,A,T,E,S,x,P,z,H,V,D,O;if(this!==rn&&p>c&&i>=0&&(p=c),p!==this._tTime||a||g){if(u!==this._time&&h&&(p+=this._time-u,i+=this._time-u),_=p,H=this._start,z=this._ts,x=!z,g&&(h||(u=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(D=this._yoyo,S=h+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(S*100+i,s,a);if(_=kn(p%S),p===c?(E=this._repeat,_=h):(V=kn(p/S),E=~~V,E&&E===V&&(_=h,E--),_>h&&(_=h)),V=Ef(this._tTime,S),!u&&this._tTime&&V!==E&&this._tTime-V*S-this._dur<=0&&(V=E),D&&E&1&&(_=h-_,O=1),E!==V&&!this._lock){var I=D&&V&1,k=I===(D&&E&1);if(E<V&&(I=!I),u=I?0:p%h?h:p,this._lock=1,this.render(u||(O?0:kn(E*S)),s,!h)._lock=0,this._tTime=p,!s&&this.parent&&Oi(this,"onRepeat"),this.vars.repeatRefresh&&!O&&(this.invalidate()._lock=1),u&&u!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,k&&(this._lock=2,u=I?h:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!O&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;XP(this,O)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(P=k7(this,kn(u),kn(_)),P&&(p-=_-(_=P._start))),this._tTime=p,this._time=_,this._act=!z,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,u=0),!u&&_&&!s&&!E&&(Oi(this,"onStart"),this._tTime!==p))return this;if(_>=u&&i>=0)for(A=this._first;A;){if(T=A._next,(A._act||_>=A._start)&&A._ts&&P!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(_-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(_-A._start)*A._ts,s,a),_!==this._time||!this._ts&&!x){P=0,T&&(p+=this._zTime=-1e-8);break}}A=T}else{A=this._last;for(var B=i<0?i:_;A;){if(T=A._prev,(A._act||B<=A._end)&&A._ts&&P!==A){if(A.parent!==this)return this.render(i,s,a);if(A.render(A._ts>0?(B-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(B-A._start)*A._ts,s,a||pr&&(A._initted||A._startAt)),_!==this._time||!this._ts&&!x){P=0,T&&(p+=this._zTime=B?-1e-8:Rr);break}}A=T}}if(P&&!s&&(this.pause(),P.render(_>=u?0:-1e-8)._zTime=_>=u?1:-1,this._ts))return this._start=H,P0(this),this.render(i,s,a);this._onUpdate&&!s&&Oi(this,"onUpdate",!0),(p===c&&this._tTime>=this.totalDuration()||!p&&u)&&(H===this._start||Math.abs(z)!==Math.abs(this._ts))&&(this._lock||((i||!h)&&(p===c&&this._ts>0||!p&&this._ts<0)&&Tl(this,1),!s&&!(i<0&&!u)&&(p||u||!c)&&(Oi(this,p===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(sa(s)||(s=ts(this,s,i)),!(i instanceof Yd)){if(kr(i))return i.forEach(function(u){return a.add(u,s)}),this;if(Qn(i))return this.addLabel(i,s);if(hn(i))i=xn.delayedCall(0,i);else return this}return this!==i?eo(this,i,s):this},t.getChildren=function(i,s,a,u){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),u===void 0&&(u=-1e8);for(var c=[],h=this._first;h;)h._start>=u&&(h instanceof xn?s&&c.push(h):(a&&c.push(h),i&&c.push.apply(c,h.getChildren(!0,s,a)))),h=h._next;return c},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return Qn(i)?this.removeLabel(i):hn(i)?this.killTweensOf(i):(i.parent===this&&D0(this,i),i===this._recent&&(this._recent=this._last),Cu(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=kn(xi.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ts(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var u=xn.delayedCall(0,s||Gd,a);return u.data="isPause",this._hasPause=1,eo(this,u,ts(this,i))},t.removePause=function(i){var s=this._first;for(i=ts(this,i);s;)s._start===i&&s.data==="isPause"&&Tl(s),s=s._next},t.killTweensOf=function(i,s,a){for(var u=this.getTweensOf(i,a),c=u.length;c--;)Wa!==u[c]&&u[c].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],u=as(i),c=this._first,h=sa(s),p;c;)c instanceof xn?E7(c._targets,u)&&(h?(!Wa||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(p=c.getTweensOf(u,s)).length&&a.push.apply(a,p),c=c._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,u=ts(a,i),c=s,h=c.startAt,p=c.onStart,g=c.onStartParams,_=c.immediateRender,A,T=xn.to(a,Ui({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:s.duration||Math.abs((u-(h&&"time"in h?h.time:a._time))/a.timeScale())||Rr,onStart:function(){if(a.pause(),!A){var S=s.duration||Math.abs((u-(h&&"time"in h?h.time:a._time))/a.timeScale());T._dur!==S&&bf(T,S,0,1).render(T._time,!0,!0),A=1}p&&p.apply(T,g||[])}},s));return _?T.render(0):T},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,Ui({startAt:{time:ts(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),Ok(this,ts(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),Ok(this,ts(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Rr)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var u=this._first,c=this.labels,h;u;)u._start>=a&&(u._start+=i,u._end+=i),u=u._next;if(s)for(h in c)c[h]>=a&&(c[h]+=i);return Cu(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Cu(this)},t.totalDuration=function(i){var s=0,a=this,u=a._last,c=uo,h,p,g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(g=a.parent;u;)h=u._prev,u._dirty&&u.totalDuration(),p=u._start,p>c&&a._sort&&u._ts&&!a._lock?(a._lock=1,eo(a,u,p-u._delay,1)._lock=0):c=p,p<0&&u._ts&&(s-=p,(!g&&!a._dp||g&&g.smoothChildTiming)&&(a._start+=p/a._ts,a._time-=p,a._tTime-=p),a.shiftChildren(-p,!1,-1/0),c=0),u._end>s&&u._ts&&(s=u._end),u=h;bf(a,a===rn&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(rn._ts&&(NP(rn,fy(i,rn)),kP=xi.frame),xi.frame>=xk){xk+=Pi.autoSleep||120;var s=rn._first;if((!s||!s._ts)&&Pi.autoSleep&&xi._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||xi.sleep()}}},e}(Yd);Ui(jr.prototype,{_lock:0,_hasPause:0,_forcing:0});var $7=function(e,t,r,i,s,a,u){var c=new ai(this._pt,e,t,0,1,s2,null,s),h=0,p=0,g,_,A,T,E,S,x,P;for(c.b=r,c.e=i,r+="",i+="",(x=~i.indexOf("random("))&&(i=Kd(i)),a&&(P=[r,i],a(P,e,t),r=P[0],i=P[1]),_=r.match(TA)||[];g=TA.exec(i);)T=g[0],E=i.substring(h,g.index),A?A=(A+1)%5:E.substr(-5)==="rgba("&&(A=1),T!==_[p++]&&(S=parseFloat(_[p-1])||0,c._pt={_next:c._pt,p:E||p===1?E:",",s:S,c:T.charAt(1)==="="?rf(S,T)-S:parseFloat(T)-S,m:A&&A<4?Math.round:0},h=TA.lastIndex);return c.c=h<i.length?i.substring(h,i.length):"",c.fp=u,(SP.test(i)||x)&&(c.e=0),this._pt=c,c},iS=function(e,t,r,i,s,a,u,c,h,p){hn(i)&&(i=i(s||0,e,a));var g=e[t],_=r!=="get"?r:hn(g)?h?e[t.indexOf("set")||!hn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():g,A=hn(g)?h?Q7:r2:oS,T;if(Qn(i)&&(~i.indexOf("random(")&&(i=Kd(i)),i.charAt(1)==="="&&(T=rf(_,i)+(Cr(_)||0),(T||T===0)&&(i=T))),!p||_!==i||JT)return!isNaN(_*i)&&i!==""?(T=new ai(this._pt,e,t,+_||0,i-(_||0),typeof g=="boolean"?J7:i2,0,A),h&&(T.fp=h),u&&T.modifier(u,this,e),this._pt=T):(!g&&!(t in e)&&eS(t,i),$7.call(this,e,t,_,i,A,c||Pi.stringFilter,h))},G7=function(e,t,r,i,s){if(hn(e)&&(e=wd(e,s,t,r,i)),!po(e)||e.style&&e.nodeType||kr(e)||EP(e))return Qn(e)?wd(e,s,t,r,i):e;var a={},u;for(u in e)a[u]=wd(e[u],s,t,r,i);return a},e2=function(e,t,r,i,s,a){var u,c,h,p;if(Ci[e]&&(u=new Ci[e]).init(s,u.rawVars?t[e]:G7(t[e],i,s,a,r),r,i,a)!==!1&&(r._pt=c=new ai(r._pt,s,e,0,1,u.render,u,0,u.priority),r!==Yc))for(h=r._ptLookup[r._targets.indexOf(s)],p=u._props.length;p--;)h[u._props[p]]=c;return u},Wa,JT,sS=function n(e,t,r){var i=e.vars,s=i.ease,a=i.startAt,u=i.immediateRender,c=i.lazy,h=i.onUpdate,p=i.runBackwards,g=i.yoyoEase,_=i.keyframes,A=i.autoRevert,T=e._dur,E=e._startAt,S=e._targets,x=e.parent,P=x&&x.data==="nested"?x.vars.targets:S,z=e._overwrite==="auto"&&!Qb,H=e.timeline,V,D,O,I,k,B,U,F,L,Te,be,Y,X;if(H&&(!_||!s)&&(s="none"),e._ease=Ru(s,Af.ease),e._yEase=g?QP(Ru(g===!0?s:g,Af.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!H&&!!i.runBackwards,!H||_&&!i.stagger){if(F=S[0]?wu(S[0]).harness:0,Y=F&&i[F.prop],V=cy(i,tS),E&&(E._zTime<0&&E.progress(1),t<0&&p&&u&&!A?E.render(-1,!0):E.revert(p&&T?Sg:A7),E._lazy=0),a){if(Tl(e._startAt=xn.set(S,Ui({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!E&&si(c),startAt:null,delay:0,onUpdate:h&&function(){return Oi(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pr||!u&&!A)&&e._startAt.revert(Sg),u&&T&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(p&&T&&!E){if(t&&(u=!1),O=Ui({overwrite:!1,data:"isFromStart",lazy:u&&!E&&si(c),immediateRender:u,stagger:0,parent:x},V),Y&&(O[F.prop]=Y),Tl(e._startAt=xn.set(S,O)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pr?e._startAt.revert(Sg):e._startAt.render(-1,!0)),e._zTime=t,!u)n(e._startAt,Rr,Rr);else if(!t)return}for(e._pt=e._ptCache=0,c=T&&si(c)||c&&!T,D=0;D<S.length;D++){if(k=S[D],U=k._gsap||rS(S)[D]._gsap,e._ptLookup[D]=Te={},GT[U.id]&&sl.length&&uy(),be=P===S?D:P.indexOf(k),F&&(L=new F).init(k,Y||V,e,be,P)!==!1&&(e._pt=I=new ai(e._pt,k,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(le){Te[le]=I}),L.priority&&(B=1)),!F||Y)for(O in V)Ci[O]&&(L=e2(O,V,e,be,k,P))?L.priority&&(B=1):Te[O]=I=iS.call(e,k,O,"get",V[O],be,P,0,i.stringFilter);e._op&&e._op[D]&&e.kill(k,e._op[D]),z&&e._pt&&(Wa=e,rn.killTweensOf(k,Te,e.globalTime(t)),X=!e.parent,Wa=0),e._pt&&c&&(GT[U.id]=1)}B&&o2(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!X,_&&t<=0&&H.render(uo,!0,!0)},K7=function(e,t,r,i,s,a,u,c){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],p,g,_,A;if(!h)for(h=e._ptCache[t]=[],_=e._ptLookup,A=e._targets.length;A--;){if(p=_[A][t],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==t&&p.fp!==t;)p=p._next;if(!p)return JT=1,e.vars[t]="+=0",sS(e,u),JT=0,c?$d(t+" not eligible for reset"):1;h.push(p)}for(A=h.length;A--;)g=h[A],p=g._pt||g,p.s=(i||i===0)&&!s?i:p.s+(i||0)+a*p.c,p.c=r-p.s,g.e&&(g.e=An(r)+Cr(g.e)),g.b&&(g.b=p.s+Cr(g.b))},W7=function(e,t){var r=e[0]?wu(e[0]).harness:0,i=r&&r.aliases,s,a,u,c;if(!i)return t;s=Tf({},t);for(a in i)if(a in s)for(c=i[a].split(","),u=c.length;u--;)s[c[u]]=s[a];return s},Y7=function(e,t,r,i){var s=t.ease||i||"power1.inOut",a,u;if(kr(t))u=r[e]||(r[e]=[]),t.forEach(function(c,h){return u.push({t:h/(t.length-1)*100,v:c,e:s})});else for(a in t)u=r[a]||(r[a]=[]),a==="ease"||u.push({t:parseFloat(e),v:t[a],e:s})},wd=function(e,t,r,i,s){return hn(e)?e.call(t,r,i,s):Qn(e)&&~e.indexOf("random(")?Kd(e):e},t2=nS+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",n2={};oi(t2+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return n2[n]=1});var xn=function(n){AP(e,n);function e(r,i,s,a){var u;typeof i=="number"&&(s.duration=i,i=s,s=null),u=n.call(this,a?i:bd(i))||this;var c=u.vars,h=c.duration,p=c.delay,g=c.immediateRender,_=c.stagger,A=c.overwrite,T=c.keyframes,E=c.defaults,S=c.scrollTrigger,x=c.yoyoEase,P=i.parent||rn,z=(kr(r)||EP(r)?sa(r[0]):"length"in i)?[r]:as(r),H,V,D,O,I,k,B,U;if(u._targets=z.length?rS(z):$d("GSAP target "+r+" not found. https://gsap.com",!Pi.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=A,T||_||Jm(h)||Jm(p)){if(i=u.vars,H=u.timeline=new jr({data:"nested",defaults:E||{},targets:P&&P.data==="nested"?P.vars.targets:z}),H.kill(),H.parent=H._dp=Ho(u),H._start=0,_||Jm(h)||Jm(p)){if(O=z.length,B=_&&zP(_),po(_))for(I in _)~t2.indexOf(I)&&(U||(U={}),U[I]=_[I]);for(V=0;V<O;V++)D=cy(i,n2),D.stagger=0,x&&(D.yoyoEase=x),U&&Tf(D,U),k=z[V],D.duration=+wd(h,Ho(u),V,k,z),D.delay=(+wd(p,Ho(u),V,k,z)||0)-u._delay,!_&&O===1&&D.delay&&(u._delay=p=D.delay,u._start+=p,D.delay=0),H.to(k,D,B?B(V,k,z):0),H._ease=vt.none;H.duration()?h=p=0:u.timeline=0}else if(T){bd(Ui(H.vars.defaults,{ease:"none"})),H._ease=Ru(T.ease||i.ease||"none");var F=0,L,Te,be;if(kr(T))T.forEach(function(Y){return H.to(z,Y,">")}),H.duration();else{D={};for(I in T)I==="ease"||I==="easeEach"||Y7(I,T[I],D,T.easeEach);for(I in D)for(L=D[I].sort(function(Y,X){return Y.t-X.t}),F=0,V=0;V<L.length;V++)Te=L[V],be={ease:Te.e,duration:(Te.t-(V?L[V-1].t:0))/100*h},be[I]=Te.v,H.to(z,be,F),F+=be.duration;H.duration()<h&&H.to({},{duration:h-H.duration()})}}h||u.duration(h=H.duration())}else u.timeline=0;return A===!0&&!Qb&&(Wa=Ho(u),rn.killTweensOf(z),Wa=0),eo(P,Ho(u),s),i.reversed&&u.reverse(),i.paused&&u.paused(!0),(g||!h&&!T&&u._start===kn(P._time)&&si(g)&&C7(Ho(u))&&P.data!=="nested")&&(u._tTime=-1e-8,u.render(Math.max(0,-p)||0)),S&&LP(Ho(u),S),u}var t=e.prototype;return t.render=function(i,s,a){var u=this._time,c=this._tDur,h=this._dur,p=i<0,g=i>c-Rr&&!p?c:i<Rr?0:i,_,A,T,E,S,x,P,z,H;if(!h)x7(this,i,s,a);else if(g!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(_=g,z=this.timeline,this._repeat){if(E=h+this._rDelay,this._repeat<-1&&p)return this.totalTime(E*100+i,s,a);if(_=kn(g%E),g===c?(T=this._repeat,_=h):(S=kn(g/E),T=~~S,T&&T===S?(_=h,T--):_>h&&(_=h)),x=this._yoyo&&T&1,x&&(H=this._yEase,_=h-_),S=Ef(this._tTime,E),_===u&&!a&&this._initted&&T===S)return this._tTime=g,this;T!==S&&(z&&this._yEase&&XP(z,x),this.vars.repeatRefresh&&!x&&!this._lock&&_!==E&&this._initted&&(this._lock=a=1,this.render(kn(E*T),!0).invalidate()._lock=0))}if(!this._initted){if(VP(this,p?i:_,a,s,g))return this._tTime=0,this;if(u!==this._time&&!(a&&this.vars.repeatRefresh&&T!==S))return this;if(h!==this._dur)return this.render(i,s,a)}if(this._tTime=g,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=P=(H||this._ease)(_/h),this._from&&(this.ratio=P=1-P),_&&!u&&!s&&!T&&(Oi(this,"onStart"),this._tTime!==g))return this;for(A=this._pt;A;)A.r(P,A.d),A=A._next;z&&z.render(i<0?i:z._dur*z._ease(_/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(p&&KT(this,i,s,a),Oi(this,"onUpdate")),this._repeat&&T!==S&&this.vars.onRepeat&&!s&&this.parent&&Oi(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(p&&!this._onUpdate&&KT(this,i,!0,!0),(i||!h)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Tl(this,1),!s&&!(p&&!u)&&(g||u||x)&&(Oi(this,g===c?"onComplete":"onReverseComplete",!0),this._prom&&!(g<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,u,c){Wd||xi.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||sS(this,h),p=this._ease(h/this._dur),K7(this,i,s,a,u,p,h,c)?this.resetTo(i,s,a,u,1):(L0(this,0),this.parent||DP(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?cd(this):this.scrollTrigger&&this.scrollTrigger.kill(!!pr),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Wa&&Wa.vars.overwrite!==!0)._first||cd(this),this.parent&&a!==this.timeline.totalDuration()&&bf(this,this._dur*this.timeline._tDur/a,0,1),this}var u=this._targets,c=i?as(i):u,h=this._ptLookup,p=this._pt,g,_,A,T,E,S,x;if((!s||s==="all")&&S7(u,c))return s==="all"&&(this._pt=0),cd(this);for(g=this._op=this._op||[],s!=="all"&&(Qn(s)&&(E={},oi(s,function(P){return E[P]=1}),s=E),s=W7(u,s)),x=u.length;x--;)if(~c.indexOf(u[x])){_=h[x],s==="all"?(g[x]=s,T=_,A={}):(A=g[x]=g[x]||{},T=s);for(E in T)S=_&&_[E],S&&((!("kill"in S.d)||S.d.kill(E)===!0)&&D0(this,S,"_pt"),delete _[E]),A!=="all"&&(A[E]=1)}return this._initted&&!this._pt&&p&&cd(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Sd(1,arguments)},e.delayedCall=function(i,s,a,u){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:u})},e.fromTo=function(i,s,a){return Sd(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return rn.killTweensOf(i,s,a)},e}(Yd);Ui(xn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});oi("staggerTo,staggerFrom,staggerFromTo",function(n){xn[n]=function(){var e=new jr,t=YT.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var oS=function(e,t,r){return e[t]=r},r2=function(e,t,r){return e[t](r)},Q7=function(e,t,r,i){return e[t](i.fp,r)},X7=function(e,t,r){return e.setAttribute(t,r)},aS=function(e,t){return hn(e[t])?r2:Xb(e[t])&&e.setAttribute?X7:oS},i2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},J7=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},s2=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},lS=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Z7=function(e,t,r,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,r),s=a},e$=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?D0(this,t,"_pt"):t.dep||(r=1),t=i;return!r},t$=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},o2=function(e){for(var t=e._pt,r,i,s,a;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=r}e._pt=s},ai=function(){function n(t,r,i,s,a,u,c,h,p){this.t=r,this.s=s,this.c=a,this.p=i,this.r=u||i2,this.d=c||this,this.set=h||oS,this.pr=p||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=t$,this.m=r,this.mt=s,this.tween=i},n}();oi(nS+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return tS[n]=1});Vi.TweenMax=Vi.TweenLite=xn;Vi.TimelineLite=Vi.TimelineMax=jr;rn=new jr({sortChildren:!1,defaults:Af,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Pi.stringFilter=YP;var xu=[],Cg={},n$=[],Dk=0,r$=0,CA=function(e){return(Cg[e]||n$).map(function(t){return t()})},ZT=function(){var e=Date.now(),t=[];e-Dk>2&&(CA("matchMediaInit"),xu.forEach(function(r){var i=r.queries,s=r.conditions,a,u,c,h;for(u in i)a=Zs.matchMedia(i[u]).matches,a&&(c=1),a!==s[u]&&(s[u]=a,h=1);h&&(r.revert(),c&&t.push(r))}),CA("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),Dk=e,CA("matchMedia"))},a2=function(){function n(t,r){this.selector=r&&QT(r),this.data=[],this._r=[],this.isReverted=!1,this.id=r$++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){hn(r)&&(s=i,i=r,r=hn);var a=this,u=function(){var h=Xt,p=a.selector,g;return h&&h!==a&&h.data.push(a),s&&(a.selector=QT(s)),Xt=a,g=i.apply(a,arguments),hn(g)&&a._r.push(g),Xt=h,a.selector=p,a.isReverted=!1,g};return a.last=u,r===hn?u(a,function(c){return a.add(null,c)}):r?a[r]=u:u},e.ignore=function(r){var i=Xt;Xt=null,r(this),Xt=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof xn&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var u=s.getTweens(),c=s.data.length,h;c--;)h=s.data[c],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(p){return u.splice(u.indexOf(p),1)}));for(u.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,g){return g.g-p.g||-1/0}).forEach(function(p){return p.t.revert(r)}),c=s.data.length;c--;)h=s.data[c],h instanceof jr?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof xn)&&h.revert&&h.revert(r);s._r.forEach(function(p){return p(r,s)}),s.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),i)for(var a=xu.length;a--;)xu[a].id===this.id&&xu.splice(a,1)},e.revert=function(r){this.kill(r||{})},n}(),i$=function(){function n(t){this.contexts=[],this.scope=t,Xt&&Xt.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){po(r)||(r={matches:r});var a=new a2(0,s||this.scope),u=a.conditions={},c,h,p;Xt&&!a.selector&&(a.selector=Xt.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=r;for(h in r)h==="all"?p=1:(c=Zs.matchMedia(r[h]),c&&(xu.indexOf(a)<0&&xu.push(a),(u[h]=c.matches)&&(p=1),c.addListener?c.addListener(ZT):c.addEventListener("change",ZT)));return p&&i(a,function(g){return a.add(null,g)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),hy={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return GP(i)})},timeline:function(e){return new jr(e)},getTweensOf:function(e,t){return rn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Qn(e)&&(e=as(e)[0]);var s=wu(e||{}).get,a=r?MP:OP;return r==="native"&&(r=""),e&&(t?a((Ci[t]&&Ci[t].get||s)(e,t,r,i)):function(u,c,h){return a((Ci[u]&&Ci[u].get||s)(e,u,c,h))})},quickSetter:function(e,t,r){if(e=as(e),e.length>1){var i=e.map(function(p){return ci.quickSetter(p,t,r)}),s=i.length;return function(p){for(var g=s;g--;)i[g](p)}}e=e[0]||{};var a=Ci[t],u=wu(e),c=u.harness&&(u.harness.aliases||{})[t]||t,h=a?function(p){var g=new a;Yc._pt=0,g.init(e,r?p+r:p,Yc,0,[e]),g.render(1,g),Yc._pt&&lS(1,Yc)}:u.set(e,c);return a?h:function(p){return h(e,c,r?p+r:p,u,1)}},quickTo:function(e,t,r){var i,s=ci.to(e,Ui((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),a=function(c,h,p){return s.resetTo(t,c,h,p)};return a.tween=s,a},isTweening:function(e){return rn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ru(e.ease,Af.ease)),kk(Af,e||{})},config:function(e){return kk(Pi,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(u){return u&&!Ci[u]&&!Vi[u]&&$d(t+" effect requires "+u+" plugin.")}),EA[t]=function(u,c,h){return r(as(u),Ui(c||{},s),h)},a&&(jr.prototype[t]=function(u,c,h){return this.add(EA[t](u,po(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,t){vt[e]=Ru(t)},parseEase:function(e,t){return arguments.length?Ru(e,t):vt},getById:function(e){return rn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new jr(e),i,s;for(r.smoothChildTiming=si(e.smoothChildTiming),rn.remove(r),r._dp=0,r._time=r._tTime=rn._time,i=rn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof xn&&i.vars.onComplete===i._targets[0]))&&eo(r,i,i._start-i._delay),i=s;return eo(rn,r,0),r},context:function(e,t){return e?new a2(e,t):Xt},matchMedia:function(e){return new i$(e)},matchMediaRefresh:function(){return xu.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||ZT()},addEventListener:function(e,t){var r=Cg[e]||(Cg[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Cg[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:L7,wrapYoyo:V7,distribute:zP,random:FP,snap:jP,normalize:P7,getUnit:Cr,clamp:N7,splitColor:KP,toArray:as,selector:QT,mapRange:qP,pipe:M7,unitize:D7,interpolate:U7,shuffle:BP},install:RP,effects:EA,ticker:xi,updateRoot:jr.updateRoot,plugins:Ci,globalTimeline:rn,core:{PropTween:ai,globals:xP,Tween:xn,Timeline:jr,Animation:Yd,getCache:wu,_removeLinkedListItem:D0,reverting:function(){return pr},context:function(e){return e&&Xt&&(Xt.data.push(e),e._ctx=Xt),Xt},suppressOverwrites:function(e){return Qb=e}}};oi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return hy[n]=xn[n]});xi.add(jr.updateRoot);Yc=hy.to({},{duration:0});var s$=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},o$=function(e,t){var r=e._targets,i,s,a;for(i in t)for(s=r.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=s$(a,i)),a&&a.modifier&&a.modifier(t[i],e,r[s],i))},RA=function(e,t){return{name:e,rawVars:1,init:function(i,s,a){a._onInit=function(u){var c,h;if(Qn(s)&&(c={},oi(s,function(p){return c[p]=1}),s=c),t){c={};for(h in s)c[h]=t(s[h]);s=c}o$(u,s)}}}},ci=hy.registerPlugin({name:"attr",init:function(e,t,r,i,s){var a,u,c;this.tween=r;for(a in t)c=e.getAttribute(a)||"",u=this.add(e,"setAttribute",(c||0)+"",t[a],i,s,0,0,a),u.op=a,u.b=c,this._props.push(a)},render:function(e,t){for(var r=t._pt;r;)pr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},RA("roundProps",XT),RA("modifiers"),RA("snap",jP))||hy;xn.version=jr.version=ci.version="3.12.7";CP=1;Jb()&&Sf();vt.Power0;vt.Power1;vt.Power2;vt.Power3;vt.Power4;vt.Linear;vt.Quad;vt.Cubic;vt.Quart;vt.Quint;vt.Strong;vt.Elastic;vt.Back;vt.SteppedEase;vt.Bounce;vt.Sine;vt.Expo;vt.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Pk,Ya,sf,uS,vu,Lk,cS,a$=function(){return typeof window<"u"},oa={},uu=180/Math.PI,of=Math.PI/180,Vc=Math.atan2,Vk=1e8,fS=/([A-Z])/g,l$=/(left|right|width|margin|padding|x)/i,u$=/[\s,\(]\S/,no={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},eE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},c$=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},f$=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},h$=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},l2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},u2=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},d$=function(e,t,r){return e.style[t]=r},p$=function(e,t,r){return e.style.setProperty(t,r)},m$=function(e,t,r){return e._gsap[t]=r},g$=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},y$=function(e,t,r,i,s){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},_$=function(e,t,r,i,s){var a=e._gsap;a[t]=r,a.renderTransform(s,a)},sn="transform",li=sn+"Origin",v$=function n(e,t){var r=this,i=this.target,s=i.style,a=i._gsap;if(e in oa&&s){if(this.tfm=this.tfm||{},e!=="transform")e=no[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return r.tfm[u]=$o(i,u)}):this.tfm[e]=a.x?a[e]:$o(i,e),e===li&&(this.tfm.zOrigin=a.zOrigin);else return no.transform.split(",").forEach(function(u){return n.call(r,u,t)});if(this.props.indexOf(sn)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(li,t,"")),e=sn}(s||t)&&this.props.push(e,t,s[e])},c2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},A$=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(fS,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=cS(),(!s||!s.isStart)&&!r[sn]&&(c2(r),i.zOrigin&&r[li]&&(r[li]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},f2=function(e,t){var r={target:e,props:[],revert:A$,save:v$};return e._gsap||ci.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},h2,tE=function(e,t){var r=Ya.createElementNS?Ya.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ya.createElement(e);return r&&r.style?r:Ya.createElement(e)},co=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(fS,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,wf(t)||t,1)||""},Uk="O,Moz,ms,Ms,Webkit".split(","),wf=function(e,t,r){var i=t||vu,s=i.style,a=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(Uk[a]+e in s););return a<0?null:(a===3?"ms":a>=0?Uk[a]:"")+e},nE=function(){a$()&&window.document&&(Pk=window,Ya=Pk.document,sf=Ya.documentElement,vu=tE("div")||{style:{}},tE("div"),sn=wf(sn),li=sn+"Origin",vu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",h2=!!wf("perspective"),cS=ci.core.reverting,uS=1)},Bk=function(e){var t=e.ownerSVGElement,r=tE("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),sf.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),sf.removeChild(r),s},zk=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},d2=function(e){var t,r;try{t=e.getBBox()}catch{t=Bk(e),r=1}return t&&(t.width||t.height)||r||(t=Bk(e)),t&&!t.width&&!t.x&&!t.y?{x:+zk(e,["x","cx","x1"])||0,y:+zk(e,["y","cy","y1"])||0,width:0,height:0}:t},p2=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&d2(e))},zu=function(e,t){if(t){var r=e.style,i;t in oa&&t!==li&&(t=sn),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(fS,"-$1").toLowerCase())):r.removeAttribute(t)}},Qa=function(e,t,r,i,s,a){var u=new ai(e._pt,t,r,0,1,a?u2:l2);return e._pt=u,u.b=i,u.e=s,e._props.push(r),u},jk={deg:1,rad:1,turn:1},T$={grid:1,flex:1},El=function n(e,t,r,i){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",u=vu.style,c=l$.test(t),h=e.tagName.toLowerCase()==="svg",p=(h?"client":"offset")+(c?"Width":"Height"),g=100,_=i==="px",A=i==="%",T,E,S,x;if(i===a||!s||jk[i]||jk[a])return s;if(a!=="px"&&!_&&(s=n(e,t,r,"px")),x=e.getCTM&&p2(e),(A||a==="%")&&(oa[t]||~t.indexOf("adius")))return T=x?e.getBBox()[c?"width":"height"]:e[p],An(A?s/T*g:s/100*T);if(u[c?"width":"height"]=g+(_?a:i),E=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!h?e:e.parentNode,x&&(E=(e.ownerSVGElement||{}).parentNode),(!E||E===Ya||!E.appendChild)&&(E=Ya.body),S=E._gsap,S&&A&&S.width&&c&&S.time===xi.time&&!S.uncache)return An(s/S.width*g);if(A&&(t==="height"||t==="width")){var P=e.style[t];e.style[t]=g+i,T=e[p],P?e.style[t]=P:zu(e,t)}else(A||a==="%")&&!T$[co(E,"display")]&&(u.position=co(e,"position")),E===e&&(u.position="static"),E.appendChild(vu),T=vu[p],E.removeChild(vu),u.position="absolute";return c&&A&&(S=wu(E),S.time=xi.time,S.width=E[p]),An(_?T*s/g:T&&s?g/T*s:0)},$o=function(e,t,r,i){var s;return uS||nE(),t in no&&t!=="transform"&&(t=no[t],~t.indexOf(",")&&(t=t.split(",")[0])),oa[t]&&t!=="transform"?(s=Xd(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:py(co(e,li))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=dy[t]&&dy[t](e,t,r)||co(e,t)||IP(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?El(e,t,s,r)+r:s},E$=function(e,t,r,i){if(!r||r==="none"){var s=wf(t,e,1),a=s&&co(e,s,1);a&&a!==r?(t=s,r=a):t==="borderColor"&&(r=co(e,"borderTopColor"))}var u=new ai(this._pt,e.style,t,0,1,s2),c=0,h=0,p,g,_,A,T,E,S,x,P,z,H,V;if(u.b=r,u.e=i,r+="",i+="",i==="auto"&&(E=e.style[t],e.style[t]=i,i=co(e,t)||i,E?e.style[t]=E:zu(e,t)),p=[r,i],YP(p),r=p[0],i=p[1],_=r.match(Wc)||[],V=i.match(Wc)||[],V.length){for(;g=Wc.exec(i);)S=g[0],P=i.substring(c,g.index),T?T=(T+1)%5:(P.substr(-5)==="rgba("||P.substr(-5)==="hsla(")&&(T=1),S!==(E=_[h++]||"")&&(A=parseFloat(E)||0,H=E.substr((A+"").length),S.charAt(1)==="="&&(S=rf(A,S)+H),x=parseFloat(S),z=S.substr((x+"").length),c=Wc.lastIndex-z.length,z||(z=z||Pi.units[t]||H,c===i.length&&(i+=z,u.e+=z)),H!==z&&(A=El(e,t,E,z)||0),u._pt={_next:u._pt,p:P||h===1?P:",",s:A,c:x-A,m:T&&T<4||t==="zIndex"?Math.round:0});u.c=c<i.length?i.substring(c,i.length):""}else u.r=t==="display"&&i==="none"?u2:l2;return SP.test(i)&&(u.e=0),this._pt=u,u},Fk={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},b$=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=Fk[r]||r,t[1]=Fk[i]||i,t.join(" ")},S$=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,a=r._gsap,u,c,h;if(s==="all"||s===!0)i.cssText="",c=1;else for(s=s.split(","),h=s.length;--h>-1;)u=s[h],oa[u]&&(c=1,u=u==="transformOrigin"?li:sn),zu(r,u);c&&(zu(r,sn),a&&(a.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Xd(r,1),a.uncache=1,c2(i)))}},dy={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var a=e._pt=new ai(e._pt,t,r,0,0,S$);return a.u=i,a.pr=-10,a.tween=s,e._props.push(r),1}}},Qd=[1,0,0,1,0,0],m2={},g2=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Hk=function(e){var t=co(e,sn);return g2(t)?Qd:t.substr(7).match(bP).map(An)},hS=function(e,t){var r=e._gsap||wu(e),i=e.style,s=Hk(e),a,u,c,h;return r.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?Qd:s):(s===Qd&&!e.offsetParent&&e!==sf&&!r.svg&&(c=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,u=e.nextElementSibling,sf.appendChild(e)),s=Hk(e),c?i.display=c:zu(e,"display"),h&&(u?a.insertBefore(e,u):a?a.appendChild(e):sf.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},rE=function(e,t,r,i,s,a){var u=e._gsap,c=s||hS(e,!0),h=u.xOrigin||0,p=u.yOrigin||0,g=u.xOffset||0,_=u.yOffset||0,A=c[0],T=c[1],E=c[2],S=c[3],x=c[4],P=c[5],z=t.split(" "),H=parseFloat(z[0])||0,V=parseFloat(z[1])||0,D,O,I,k;r?c!==Qd&&(O=A*S-T*E)&&(I=H*(S/O)+V*(-E/O)+(E*P-S*x)/O,k=H*(-T/O)+V*(A/O)-(A*P-T*x)/O,H=I,V=k):(D=d2(e),H=D.x+(~z[0].indexOf("%")?H/100*D.width:H),V=D.y+(~(z[1]||z[0]).indexOf("%")?V/100*D.height:V)),i||i!==!1&&u.smooth?(x=H-h,P=V-p,u.xOffset=g+(x*A+P*E)-x,u.yOffset=_+(x*T+P*S)-P):u.xOffset=u.yOffset=0,u.xOrigin=H,u.yOrigin=V,u.smooth=!!i,u.origin=t,u.originIsAbsolute=!!r,e.style[li]="0px 0px",a&&(Qa(a,u,"xOrigin",h,H),Qa(a,u,"yOrigin",p,V),Qa(a,u,"xOffset",g,u.xOffset),Qa(a,u,"yOffset",_,u.yOffset)),e.setAttribute("data-svg-origin",H+" "+V)},Xd=function(e,t){var r=e._gsap||new ZP(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,a="px",u="deg",c=getComputedStyle(e),h=co(e,li)||"0",p,g,_,A,T,E,S,x,P,z,H,V,D,O,I,k,B,U,F,L,Te,be,Y,X,le,Ne,j,re,ce,ae,we,Re;return p=g=_=E=S=x=P=z=H=0,A=T=1,r.svg=!!(e.getCTM&&p2(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[sn]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[sn]!=="none"?c[sn]:"")),i.scale=i.rotate=i.translate="none"),O=hS(e,r.svg),r.svg&&(r.uncache?(le=e.getBBox(),h=r.xOrigin-le.x+"px "+(r.yOrigin-le.y)+"px",X=""):X=!t&&e.getAttribute("data-svg-origin"),rE(e,X||h,!!X||r.originIsAbsolute,r.smooth!==!1,O)),V=r.xOrigin||0,D=r.yOrigin||0,O!==Qd&&(U=O[0],F=O[1],L=O[2],Te=O[3],p=be=O[4],g=Y=O[5],O.length===6?(A=Math.sqrt(U*U+F*F),T=Math.sqrt(Te*Te+L*L),E=U||F?Vc(F,U)*uu:0,P=L||Te?Vc(L,Te)*uu+E:0,P&&(T*=Math.abs(Math.cos(P*of))),r.svg&&(p-=V-(V*U+D*L),g-=D-(V*F+D*Te))):(Re=O[6],ae=O[7],j=O[8],re=O[9],ce=O[10],we=O[11],p=O[12],g=O[13],_=O[14],I=Vc(Re,ce),S=I*uu,I&&(k=Math.cos(-I),B=Math.sin(-I),X=be*k+j*B,le=Y*k+re*B,Ne=Re*k+ce*B,j=be*-B+j*k,re=Y*-B+re*k,ce=Re*-B+ce*k,we=ae*-B+we*k,be=X,Y=le,Re=Ne),I=Vc(-L,ce),x=I*uu,I&&(k=Math.cos(-I),B=Math.sin(-I),X=U*k-j*B,le=F*k-re*B,Ne=L*k-ce*B,we=Te*B+we*k,U=X,F=le,L=Ne),I=Vc(F,U),E=I*uu,I&&(k=Math.cos(I),B=Math.sin(I),X=U*k+F*B,le=be*k+Y*B,F=F*k-U*B,Y=Y*k-be*B,U=X,be=le),S&&Math.abs(S)+Math.abs(E)>359.9&&(S=E=0,x=180-x),A=An(Math.sqrt(U*U+F*F+L*L)),T=An(Math.sqrt(Y*Y+Re*Re)),I=Vc(be,Y),P=Math.abs(I)>2e-4?I*uu:0,H=we?1/(we<0?-we:we):0),r.svg&&(X=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!g2(co(e,sn)),X&&e.setAttribute("transform",X))),Math.abs(P)>90&&Math.abs(P)<270&&(s?(A*=-1,P+=E<=0?180:-180,E+=E<=0?180:-180):(T*=-1,P+=P<=0?180:-180)),t=t||r.uncache,r.x=p-((r.xPercent=p&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-p)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=g-((r.yPercent=g&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=_+a,r.scaleX=An(A),r.scaleY=An(T),r.rotation=An(E)+u,r.rotationX=An(S)+u,r.rotationY=An(x)+u,r.skewX=P+u,r.skewY=z+u,r.transformPerspective=H+a,(r.zOrigin=parseFloat(h.split(" ")[2])||!t&&r.zOrigin||0)&&(i[li]=py(h)),r.xOffset=r.yOffset=0,r.force3D=Pi.force3D,r.renderTransform=r.svg?C$:h2?y2:w$,r.uncache=0,r},py=function(e){return(e=e.split(" "))[0]+" "+e[1]},xA=function(e,t,r){var i=Cr(t);return An(parseFloat(t)+parseFloat(El(e,"x",r+"px",i)))+i},w$=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,y2(e,t)},su="0deg",Kh="0px",ou=") ",y2=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.z,h=r.rotation,p=r.rotationY,g=r.rotationX,_=r.skewX,A=r.skewY,T=r.scaleX,E=r.scaleY,S=r.transformPerspective,x=r.force3D,P=r.target,z=r.zOrigin,H="",V=x==="auto"&&e&&e!==1||x===!0;if(z&&(g!==su||p!==su)){var D=parseFloat(p)*of,O=Math.sin(D),I=Math.cos(D),k;D=parseFloat(g)*of,k=Math.cos(D),a=xA(P,a,O*k*-z),u=xA(P,u,-Math.sin(D)*-z),c=xA(P,c,I*k*-z+z)}S!==Kh&&(H+="perspective("+S+ou),(i||s)&&(H+="translate("+i+"%, "+s+"%) "),(V||a!==Kh||u!==Kh||c!==Kh)&&(H+=c!==Kh||V?"translate3d("+a+", "+u+", "+c+") ":"translate("+a+", "+u+ou),h!==su&&(H+="rotate("+h+ou),p!==su&&(H+="rotateY("+p+ou),g!==su&&(H+="rotateX("+g+ou),(_!==su||A!==su)&&(H+="skew("+_+", "+A+ou),(T!==1||E!==1)&&(H+="scale("+T+", "+E+ou),P.style[sn]=H||"translate(0, 0)"},C$=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,u=r.y,c=r.rotation,h=r.skewX,p=r.skewY,g=r.scaleX,_=r.scaleY,A=r.target,T=r.xOrigin,E=r.yOrigin,S=r.xOffset,x=r.yOffset,P=r.forceCSS,z=parseFloat(a),H=parseFloat(u),V,D,O,I,k;c=parseFloat(c),h=parseFloat(h),p=parseFloat(p),p&&(p=parseFloat(p),h+=p,c+=p),c||h?(c*=of,h*=of,V=Math.cos(c)*g,D=Math.sin(c)*g,O=Math.sin(c-h)*-_,I=Math.cos(c-h)*_,h&&(p*=of,k=Math.tan(h-p),k=Math.sqrt(1+k*k),O*=k,I*=k,p&&(k=Math.tan(p),k=Math.sqrt(1+k*k),V*=k,D*=k)),V=An(V),D=An(D),O=An(O),I=An(I)):(V=g,I=_,D=O=0),(z&&!~(a+"").indexOf("px")||H&&!~(u+"").indexOf("px"))&&(z=El(A,"x",a,"px"),H=El(A,"y",u,"px")),(T||E||S||x)&&(z=An(z+T-(T*V+E*O)+S),H=An(H+E-(T*D+E*I)+x)),(i||s)&&(k=A.getBBox(),z=An(z+i/100*k.width),H=An(H+s/100*k.height)),k="matrix("+V+","+D+","+O+","+I+","+z+","+H+")",A.setAttribute("transform",k),P&&(A.style[sn]=k)},R$=function(e,t,r,i,s){var a=360,u=Qn(s),c=parseFloat(s)*(u&&~s.indexOf("rad")?uu:1),h=c-i,p=i+h+"deg",g,_;return u&&(g=s.split("_")[1],g==="short"&&(h%=a,h!==h%(a/2)&&(h+=h<0?a:-360)),g==="cw"&&h<0?h=(h+a*Vk)%a-~~(h/a)*a:g==="ccw"&&h>0&&(h=(h-a*Vk)%a-~~(h/a)*a)),e._pt=_=new ai(e._pt,t,r,i,h,c$),_.e=p,_.u="deg",e._props.push(r),_},qk=function(e,t){for(var r in t)e[r]=t[r];return e},x$=function(e,t,r){var i=qk({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,u,c,h,p,g,_,A,T;i.svg?(h=r.getAttribute("transform"),r.setAttribute("transform",""),a[sn]=t,u=Xd(r,1),zu(r,sn),r.setAttribute("transform",h)):(h=getComputedStyle(r)[sn],a[sn]=t,u=Xd(r,1),a[sn]=h);for(c in oa)h=i[c],p=u[c],h!==p&&s.indexOf(c)<0&&(A=Cr(h),T=Cr(p),g=A!==T?El(r,c,h,T):parseFloat(h),_=parseFloat(p),e._pt=new ai(e._pt,u,c,g,_-g,eE),e._pt.u=T||0,e._props.push(c));qk(u,i)};oi("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",a=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(u){return e<2?n+u:"border"+u+n});dy[e>1?"border"+n:n]=function(u,c,h,p,g){var _,A;if(arguments.length<4)return _=a.map(function(T){return $o(u,T,h)}),A=_.join(" "),A.split(_[0]).length===5?_[0]:A;_=(p+"").split(" "),A={},a.forEach(function(T,E){return A[T]=_[E]=_[E]||_[(E-1)/2|0]}),u.init(c,A,g)}});var _2={name:"css",register:nE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var a=this._props,u=e.style,c=r.vars.startAt,h,p,g,_,A,T,E,S,x,P,z,H,V,D,O,I;uS||nE(),this.styles=this.styles||f2(e),I=this.styles.props,this.tween=r;for(E in t)if(E!=="autoRound"&&(p=t[E],!(Ci[E]&&e2(E,t,r,i,e,s)))){if(A=typeof p,T=dy[E],A==="function"&&(p=p.call(r,i,e,s),A=typeof p),A==="string"&&~p.indexOf("random(")&&(p=Kd(p)),T)T(this,e,E,p,r)&&(O=1);else if(E.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(E)+"").trim(),p+="",ol.lastIndex=0,ol.test(h)||(S=Cr(h),x=Cr(p)),x?S!==x&&(h=El(e,E,h,x)+x):S&&(p+=S),this.add(u,"setProperty",h,p,i,s,0,0,E),a.push(E),I.push(E,0,u[E]);else if(A!=="undefined"){if(c&&E in c?(h=typeof c[E]=="function"?c[E].call(r,i,e,s):c[E],Qn(h)&&~h.indexOf("random(")&&(h=Kd(h)),Cr(h+"")||h==="auto"||(h+=Pi.units[E]||Cr($o(e,E))||""),(h+"").charAt(1)==="="&&(h=$o(e,E))):h=$o(e,E),_=parseFloat(h),P=A==="string"&&p.charAt(1)==="="&&p.substr(0,2),P&&(p=p.substr(2)),g=parseFloat(p),E in no&&(E==="autoAlpha"&&(_===1&&$o(e,"visibility")==="hidden"&&g&&(_=0),I.push("visibility",0,u.visibility),Qa(this,u,"visibility",_?"inherit":"hidden",g?"inherit":"hidden",!g)),E!=="scale"&&E!=="transform"&&(E=no[E],~E.indexOf(",")&&(E=E.split(",")[0]))),z=E in oa,z){if(this.styles.save(E),H||(V=e._gsap,V.renderTransform&&!t.parseTransform||Xd(e,t.parseTransform),D=t.smoothOrigin!==!1&&V.smooth,H=this._pt=new ai(this._pt,u,sn,0,1,V.renderTransform,V,0,-1),H.dep=1),E==="scale")this._pt=new ai(this._pt,V,"scaleY",V.scaleY,(P?rf(V.scaleY,P+g):g)-V.scaleY||0,eE),this._pt.u=0,a.push("scaleY",E),E+="X";else if(E==="transformOrigin"){I.push(li,0,u[li]),p=b$(p),V.svg?rE(e,p,0,D,0,this):(x=parseFloat(p.split(" ")[2])||0,x!==V.zOrigin&&Qa(this,V,"zOrigin",V.zOrigin,x),Qa(this,u,E,py(h),py(p)));continue}else if(E==="svgOrigin"){rE(e,p,1,D,0,this);continue}else if(E in m2){R$(this,V,E,_,P?rf(_,P+p):p);continue}else if(E==="smoothOrigin"){Qa(this,V,"smooth",V.smooth,p);continue}else if(E==="force3D"){V[E]=p;continue}else if(E==="transform"){x$(this,p,e);continue}}else E in u||(E=wf(E)||E);if(z||(g||g===0)&&(_||_===0)&&!u$.test(p)&&E in u)S=(h+"").substr((_+"").length),g||(g=0),x=Cr(p)||(E in Pi.units?Pi.units[E]:S),S!==x&&(_=El(e,E,h,x)),this._pt=new ai(this._pt,z?V:u,E,_,(P?rf(_,P+g):g)-_,!z&&(x==="px"||E==="zIndex")&&t.autoRound!==!1?h$:eE),this._pt.u=x||0,S!==x&&x!=="%"&&(this._pt.b=h,this._pt.r=f$);else if(E in u)E$.call(this,e,E,h,P?P+p:p);else if(E in e)this.add(e,E,h||e[E],P?P+p:p,i,s);else if(E!=="parseTransform"){eS(E,p);continue}z||(E in u?I.push(E,0,u[E]):typeof e[E]=="function"?I.push(E,2,e[E]()):I.push(E,1,h||e[E])),a.push(E)}}O&&o2(this)},render:function(e,t){if(t.tween._time||!cS())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:$o,aliases:no,getSetter:function(e,t,r){var i=no[t];return i&&i.indexOf(",")<0&&(t=i),t in oa&&t!==li&&(e._gsap.x||$o(e,"x"))?r&&Lk===r?t==="scale"?g$:m$:(Lk=r||{})&&(t==="scale"?y$:_$):e.style&&!Xb(e.style[t])?d$:~t.indexOf("-")?p$:aS(e,t)},core:{_removeProperty:zu,_getMatrix:hS}};ci.utils.checkPrefix=wf;ci.core.getStyleSaver=f2;(function(n,e,t,r){var i=oi(n+","+e+","+t,function(s){oa[s]=1});oi(e,function(s){Pi.units[s]="deg",m2[s]=1}),no[i[13]]=n+","+e,oi(r,function(s){var a=s.split(":");no[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");oi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Pi.units[n]="px"});ci.registerPlugin(_2);var Rg=ci.registerPlugin(_2)||ci;Rg.core.Tween;function k$(){const[n,e]=$.useState(null),[t,r]=$.useState(window.innerWidth),[i,s]=$.useState(null),[a,u]=$.useState(null),c=la(),[h,p]=$.useState(""),[g,_]=$.useState([]),[A,T]=$.useState([]),E=[{linkName:"Home",link:"/"},{linkName:"About",link:"/about"},{linkName:"Blogs",link:"/blogs"},{linkName:"Contact",link:"#footer"}],S=$.useCallback(V=>{e(V)},[]),x=$.useCallback(()=>{e(null)},[]);$.useEffect(()=>{const V=()=>r(window.innerWidth);return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),$.useEffect(()=>{(async()=>{try{const O=(await ZM(vb(Rs,"blogs"))).docs.map(I=>({id:I.id,...I.data()}));_(O)}catch(D){console.error("Error fetching blogs:",D)}})()},[]);const P=()=>{const V=h.trim().toLowerCase();if(!V){console.log("nothing"),T([]);return}const D=V[0],O=new Set;g.forEach(k=>{Array.isArray(k.categories)&&k.categories.forEach(B=>{B.toLowerCase().includes(V)&&O.add(B.toLowerCase())})});const I=g.filter(k=>{var L,Te;const B=((L=k.title)==null?void 0:L.toLowerCase())||"",U=((Te=k.subtitle)==null?void 0:Te.toLowerCase())||"",F=Array.isArray(k.categories)?k.categories.map(be=>be.toLowerCase()):[];return B.includes(V)||U.includes(V)||B[0]===D||F.some(be=>be.includes(V))||F.some(be=>O.has(be))});T(I)};$.useEffect(()=>{n!==null&&Rg.from(".active",{scaleX:0,transformOrigin:"50% 50%",ease:"power4.out",duration:.8})},[n]);function z(){i?i&&(u(!1),Rg.to(".navbar-phone-dropdown-container",{x:"-100%",duration:1.2,ease:"power4.in",onComplete:()=>{s(!1)}})):(s(!0),u(!0))}function H(V){i?V==="#footer"?(z(),setTimeout(()=>{_f(V)},1300)):(c(V),z()):V==="#footer"?_f(V):c(V)}return $.useEffect(()=>{i?(Rg.from(".navbar-phone-dropdown-container",{transform:"translateX(-100%)",duration:1.2,ease:"power3.inOut"}),document.body.classList.add("no-scroll")):document.body.classList.remove("no-scroll")},[i]),w.jsx("nav",{id:"nav",className:"nav-main-container charcoal-bg",children:t<=700?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"logo-ham-container",children:[w.jsx("div",{className:"logo",children:w.jsx("img",{src:ay,onClick:()=>{c("/"),e(0)}})}),w.jsx("div",{className:"nav-hamburger-container ",onClick:()=>z(),children:w.jsx(y9,{isOpened:a})})]}),w.jsxs("div",{className:"quick-search-container",children:[w.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search...",value:h,onChange:V=>p(V.target.value)}),w.jsx("button",{onClick:()=>{P()},className:"arrow-button green-bg",style:{zIndex:"9"},children:w.jsx("img",{src:Rk})}),w.jsx("div",{className:"search-results-container silver-bg",children:A.map(V=>{var D;return w.jsxs("div",{className:"search-result",style:{padding:"20px"},onClick:()=>{c(`/singleBlog/${V.id}`),p(""),T([])},children:[w.jsx("img",{style:{width:"250px",height:"120px",marginBottom:"10px",objectFit:"cover"},src:V.imgUrl,alt:V.title}),w.jsxs("div",{className:"display-column",style:{textAlign:"left"},children:[w.jsxs("h3",{className:"outfit-font",style:{marginBottom:"5px"},children:[V.title," ",V.part&&`Part ${V.part}`]}),w.jsxs("p",{className:"outfit-font",children:[w.jsx("span",{className:"d-silver-text",style:{textDecoration:"underline"},children:"Catgories:"})," "]}),w.jsx("p",{style:{textAlign:"center",marginTop:"5px"},children:(D=V.categories)==null?void 0:D.join(", ")})]})]},V.id)})})]}),i&&w.jsx("div",{className:"navbar-phone-dropdown-container dark-silver-bg",children:w.jsx("div",{className:"dropdown-links-container",children:E.map((V,D)=>w.jsx("div",{children:w.jsxs("h3",{className:"outfit-font dropdown-link-name ",onClick:()=>{S(D),H(V.link)},children:[V.linkName,n===D&&w.jsx("div",{className:"active"})]})},V.linkName))})})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"quick-search-container",children:[w.jsx("input",{type:"text",className:"playfair-font",placeholder:"Quick Search...",value:h,onChange:V=>p(V.target.value)}),w.jsx("button",{onClick:()=>{console.log("Search button clicked!"),P()},className:"arrow-button green-bg",style:{zIndex:"9"},children:w.jsx("img",{src:Rk})}),A.length>0&&w.jsx("div",{className:"search-results-container = silver-bg",children:A.map(V=>{var D;return w.jsxs("div",{className:"search-result",style:{padding:"20px 10px"},onClick:()=>{c(`/singleBlog/${V.id}`),p(""),T([])},children:[w.jsx("img",{style:{width:"180px",height:"80px",marginRight:"30px",objectFit:"cover"},src:V.imgUrl,alt:V.title}),w.jsxs("div",{style:{textAlign:"left"},children:[w.jsxs("h3",{className:"outfit-font",style:{marginBottom:"5px"},children:[V.title," ",V.part&&`Part ${V.part}`]}),w.jsxs("p",{className:"outfit-font",children:[w.jsx("span",{className:"-text",style:{textDecoration:"underline"},children:"Catgories:"})," ",(D=V.categories)==null?void 0:D.join(", ")]})]})]},V.id)})})]}),w.jsxs("div",{className:"logo-links",children:[w.jsx("img",{src:ay,onClick:()=>{c("/"),e(0)}}),w.jsx("div",{className:"links",children:E.map((V,D)=>w.jsxs("div",{onMouseEnter:()=>S(D),onMouseLeave:x,onClick:()=>H(V.link),className:"link-container",children:[w.jsx("h1",{className:"outfit-font",children:V.linkName}),n===D&&w.jsx("div",{className:"active"})]},V.linkName))})]}),w.jsxs("div",{className:"socials ",children:[w.jsx("img",{src:zT}),w.jsx("img",{src:jT}),w.jsx("img",{src:FT})]})]})})}const $k="/assets/import-CjaYub2X.png",I$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHvUExURf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGbS3AIAAACkdFJOUwABAgMEBQcICQoLDQ4PExQXGRocHR8gISIjJScoKSssLS4vMDIzNDU2Nzo7PT4/QUJDREVGR0hJSktMTU5PUVRVW11fYWJkZWZnaGxxc3Z3eXp7fX6BhYeIiYqOj5CTlZaam52foKSlpqeoq6yusLKztLa4ur6/wMHCxMXHyMrLzM3Oz9DS1NXX2dvc3t/g4+Tm6Ort7u/w8fLz9PX4+fr7/P3+smXS9wAAAAlwSFlzAAAPrwAAD68B1qQibQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGHaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyI+PHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj48dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L3g6eG1wbWV0YT4NCjw/eHBhY2tldCBlbmQ9J3cnPz4slJgLAAAJtElEQVR4Xu3d+7cVZQHH4UHULpbSxUyzzBQts+gGpWmmlqVWVohpJd66qSiammZ4K01NyDTRvIQU/aEtLuI5L+ecvffMe515nh/fmT2zXJ/vWgdwsek6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoDEbLr1m2207n3jxxSd23rbtmks3hNcZsXUbr3/8wP+WOfD49RvXhfcxSltuf2l5/He8dPuW8F5GZ9NjYfelHtsU3s+onPdgmDz04HnhZxiNM3eEuVey48zwc4zDVfvC1ivbd1X4SUbg+O1h6NVtPz78NK07+aGw8loeOjn8PG07a3fYeG27zwqfQMsueiMsPMsbF4XPoF2XzPnLv6X2XRI+hVb16W8B49GvvwWMRd/+FjAO/ftbwBgM6W8B7RvW3wJaN7S/BbRteH8LaFmM/hbQrjj9LaBVsfpbQJvi9beAFsXsbwHtidvfAloTu78FtCV+fwtoSYr+FtCONP0toBWp+ltAG9L1t4AWpOxvAfVL298Cape6vwXULX1/C6hZjv4WUK88/S2gVrn6W0Cd8vW3gBrl7G8B9cnb3wJqk7u/BdQlf38LqEmJ/hZQjzL9LaAWpfpbQB3K9beAGpTsbwHlle1vAaWV7m8BZZXvbwEl1dDfAsqpo78FlFJLfwsoo57+FlBCTf0tIL+6+ltAbrX1t4C86utvATnV2N8C8qmzvwXkUmt/C8ij3v4WkEPN/S0gvbr7W0Bqtfe3gLTq728BKbXQ3wLSaaO/BaTSSn8LSKOd/haQQkv9LSC+tvpbQGyt9beAuNrrbwExtdjfAuJps78FxNJqfwuIo93+FhBDy/0tYLi2+1vAUK33t4Bh2u9vAUOMob8F9DeO/hbQV5b+e/eGJwlYQB95+p97rgXUKVP/rrOAKmXrbwFVytjfAiqUtb8FVCdzfwuoTPb+FlCVAv0toCJF+ltANQr1t4BKFOtvAVUo2N8CKlC0vwUUV7i/BRRWvL8FFFVBfwsoqIr+FlBMJf0toJBq+ltAERX1t4ACqupvAdlV1t8CMquuvwVkVWF/C8ioyv4WkE2l/S0gk2r7W0AWFfe3gAyq7m8ByVXe3wISq76/BSTVQH8LSKiJ/haQTCP9LSCRZvpbQBIN9beABJrqbwHRNdbfAiJrrr8FRJWn/8bwtcNYQDRN9reAaBrtbwGRNNvfAqJouL8FRNB0fwsYrPH+FjBQ8/0tYJAR9LeAAUbR3wJ6G0l/C+hpNP0toJcR9beAHkbV3wIWNrL+FrCg0fW3gIWMsL8FLGCU/S1gbiPtbwFzGm1/C5jLiPtbwBxG3d8CZhp5fwuYYfT9LWBNE+hvAWuYRH8LWFWW/q8W728Bq5hMfwtY0YT6W8AKJtXfAo4xsf4WEJhcfwtYZoL9LWCJSfa3gKMm2t8Cjphsfws4ZML9LWDq/S0gU//zwtfWY+ILmHz/iS9A/2kvQP9DJrsA/Y+Y6AL0P2qSC9B/iQkuQP9lJrcA/QMTW4D+x5jUAvRfwYQWoP+KJrMA/VcxkQXov6pJLED/NUxgAfqvafQL0H+GkS9A/5lGvQD95zDiBeg/l9EuQP85jXQB+s9tlAvQfwEjXID+CxndAvRf0MgWoP/CRrUA/XsY0QL072U0C9C/p5EsQP/eRrEA/QcYwQL0H6T5Beg/UOML0H+wphegfwQNL0D/KJpdgP6RNLoA/aNpcgF5+p8fvnacGlyA/lE1twD9I2tsAfpH19QC9E+goQXon0QzC9A/kUYWoH8yTSxA/4QaWID+SVW/AP0Tq3wB+idX9QL0z6DiBeifRbUL0D+TShegfzZVLkD/jCpcgP5ZVbeALP1f0/+oyhagf3ZVLUD/AipagP5FVLMA/QupZAH6F1PFAvQvqIIF6F9U8QXoX1jhBehfXNEFXKx/eXkWcHH42oPOfjO8LwH9Z8mygDfPDl/bdafsCe9KQP/Zsixgzynha094OLwnAf3nkWUBD58QvPXW8I4E9J9PlgXcuvydV4fXE9B/XlkWcPXSN579dng5Pv3nl2MBby/9heB94dX49F9EjgXc/+7rLgivxaf/YnIs4PNH35b+dwD6LyrDAv74zru+Fl6J7rXPLv+vY7YMC/j6kVc9GV6ITf8+0i/gz+sOveiS8Dw2/ftJv4BvHXrPb8LjyPTvK/kCfnfwLetfCY/j0r+/1AvYu77rugvD07j0HyL1Ar7Qdd1N4WFU+g+TeAE/77ru2fAwJv2HSruAZ7vutPAsJv2HS7uA07orwqOI9I8h6QKu6K4Lj+LRP46UC7iuuzk8ikb/WBIu4OburvAoFv3jSbeAu7pHwqNI9I8p2QIe6Z4Pj+LQP65UC3i+ez08ikL/2BIt4PXurfAoBv3jS7OAt7oXwqMI9E8hyQJe6B4Nj4bTP40UC3i02xEeDaZ/KgkWcHe3PTwaSv904i9ge/fT8Ggg/VOKvoCfdN8Nj4bRP63YC/hO9+nwaBD9U4u8gE913d/DswH0Ty/qAvZ0XXdLeNif/jnEXMD2ruu2hIe96Z9HxAVs7rruPbG+G0j/XKIt4M0TDz7u3vC4H/3zibWAew897crwuBf9c4q0gCsPPeyEGP8/SP+8oizghSPfFHV5eGFx+ucWYwGXH3nWcc+EVxalf37DF/DMce88a+hfENe/hMELWPKVwbvCawvRv4yBC9i15FGbwouL0L+UYQvYtPRRN4ZX56d/OUMW8LNlTzru/vD6vF773LIHkVX/Bdx39FeAh33gufCO+ehfVt8FPHtS+KQzXg3vmYf+pfVbwCunh8/pus3/Ce+aTf/y+ixg/5fCpxz0/YUX8LLv/6zAOf8Iu8zy9uH/B3CMryy4pac+Gj6BEj604B/j/PPgV0Ot6PSFvi/ozveGn6eME38dtlnL06eGn3/XSTvDu1f13x+HH6acH8z/4/vu94UfXmrdDeH9q/jXiv/yGKV8dc4f3we2Hv5+4NVdMM93x++//SPh5yhrw/Z5/tnHBzaGn1vB5lnfHn7gzjPCz1Deqb+a9XPgT18MP7OydZet+ceC938m/AB1+OSaf9P36YvC+1e3/tu/XeUrpP/2S3/2U7FzbvxrWOywl+/45qwf/oH1F94U/qZw/0M//ER4G7X52LUP/DsI99S28xesf8THL7v2hjt+/5eX9uy659at3/vGB8Pr1On9X77iR7+48w/P7d51zy1br7r4w+F1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGIf/AziVKmKNHw2DAAAAAElFTkSuQmCC";function Gk(){return w.jsx("button",{className:"to-top-button green-bg",children:w.jsx("img",{src:I$})})}function al({text:n,fontSize:e,margin:t,onClick:r}){return w.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:e||"clamp(1.8rem, 1.9vw, 2rem)",margin:t},onClick:r,children:n})}function N$(){const[n,e]=$.useState(window.innerWidth),t=la();return $.useEffect(()=>{const r=()=>e(window.innerWidth);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),w.jsx("section",{id:"footer",className:"footer-main-container",children:n<800?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"footer-logo-signup",children:w.jsx("img",{src:ay})}),w.jsxs("div",{className:"footer-contact",children:[w.jsx("h1",{className:"outfit-font",children:"Contacts:"}),w.jsxs("div",{className:"footer-icons",children:[w.jsx("img",{src:FT}),w.jsx("img",{src:zT}),w.jsx("img",{src:jT})]})]}),w.jsx("div",{className:"footer-blerb",children:w.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),w.jsxs("div",{className:"footer-newsletter",children:[w.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),w.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),w.jsx(al,{text:"Submit",fontSize:"1.3rem"})]}),w.jsx("div",{className:"to-top-button",onClick:()=>_f("#nav"),children:w.jsx(Gk,{})}),w.jsx("a",{href:"#nav",children:w.jsx("img",{src:$k,className:"login-button",onClick:()=>{t("/login")}})})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"footer-blerb",children:w.jsx("h3",{className:"outfit-font",children:"How has Mydailyreed connected to you? Leave a Comment, Get email updates. Follow on social."})}),w.jsxs("div",{className:"footer-logo-signup",children:[w.jsx("img",{src:ay}),w.jsxs("div",{className:"footer-newsletter",children:[w.jsx("h3",{className:"playfair-font",children:"Sign up for Newsletter:"}),w.jsx("input",{type:"text playfair-font",placeholder:"Type your email..."}),w.jsx(al,{text:"Submit"})]})]}),w.jsxs("div",{className:"footer-contact",children:[w.jsx("h1",{className:"outfit-font",children:"Contacts:"}),w.jsxs("div",{className:"footer-icons",children:[w.jsx("img",{src:FT}),w.jsx("img",{src:zT}),w.jsx("img",{src:jT})]})]}),w.jsx("div",{className:"to-top-button",onClick:()=>_f("#nav"),children:w.jsx(Gk,{})}),w.jsx("a",{href:"#nav",children:w.jsx("img",{src:$k,className:"login-button",onClick:()=>{t("/login")}})})]})})}const v2=$.createContext();function O$({children:n}){const[e,t]=$.useState(!1),r=()=>t(i=>!i);return w.jsx(v2.Provider,{value:{refresh:e,triggerRefresh:r},children:n})}const A2=()=>$.useContext(v2);function M$(){const[n,e]=$.useState([]),{refresh:t}=A2(),r=la();$.useEffect(()=>{(async()=>{try{const a=ra(Rs,"commonCat","YTLA8LnhCtzvU07csqsx"),u=await R0(a);if(u.exists()){const c=u.data();e(c.categories||[])}else console.warn("No commonCat document found.")}catch(a){console.error("Error fetching categories:",a)}})()},[t]);const i=s=>s.length>10?"size-c":s.length>=6?"size-b":"size-a";return w.jsxs("section",{className:"common-cat-container green-bg",children:[w.jsx("h1",{className:"outfit-font",children:"Common Categories:"}),w.jsx("div",{className:"category-bento-container",children:n.map((s,a)=>w.jsx("h3",{className:`category silver-bg outfit-font ${i(s)}`,onClick:()=>{r(`/searchPage/${encodeURIComponent(s)}`),window.scrollTo({top:0})},children:s},a))})]})}function Ep(){return w.jsx("div",{className:"loader-container ",children:w.jsxs("div",{className:"typewriter",children:[w.jsx("div",{className:"slide",children:w.jsx("i",{})}),w.jsx("div",{className:"paper"}),w.jsx("div",{className:"keyboard"})]})})}function D$(){const{state:n}=GN();return w.jsxs("div",{className:"main-container",children:[w.jsx(k$,{}),n==="loading"?w.jsx(Ep,{}):w.jsx("div",{children:w.jsx(Vz,{})}),w.jsx(M$,{}),w.jsx(N$,{})]})}function P$(){const{state:n}=GN();return w.jsx("div",{className:"main-container",children:n==="loading"?"loading...":w.jsx("h1",{children:"Error"})})}const dS=sy(),L$=vb(Rs,"blogs"),T2=async()=>(await ZM(L$)).docs.map(e=>({id:e.id,...e.data()})),xg=async n=>{const e=ra(Rs,"blogs",n),t=await R0(e);if(!t.exists())throw new Error("Blog not found");return{id:t.id,...t.data()}},V$=async n=>{if(!dS.currentUser)throw new Error("User not authenticated");return(await h9(vb(Rs,"blogs"),{...n,likes:[],comments:[],datePosted:p9()})).id},U$=async n=>{const e=dS.currentUser;if(!e)throw new Error("Not authenticated");const t=ra(Rs,"blogs",n);return await yp(t,{likes:tD(e.uid)}),{success:!0}},B$=async n=>{const e=dS.currentUser;if(!e)throw new Error("Not authenticated");const t=ra(Rs,"blogs",n);return await yp(t,{likes:m9(e.uid)}),{success:!0}},z$=async(n,e,t)=>{const r=ra(Rs,"blogs",n),i={name:t,comment:e,date:On.now()};return await yp(r,{comments:tD(i)}),{success:!0}};function bp(){return w.jsxs("div",{className:"loader",children:[w.jsx("div",{className:"bar1"}),w.jsx("div",{className:"bar2"}),w.jsx("div",{className:"bar3"}),w.jsx("div",{className:"bar4"}),w.jsx("div",{className:"bar5"}),w.jsx("div",{className:"bar6"}),w.jsx("div",{className:"bar7"}),w.jsx("div",{className:"bar8"}),w.jsx("div",{className:"bar9"}),w.jsx("div",{className:"bar10"}),w.jsx("div",{className:"bar11"}),w.jsx("div",{className:"bar12"})]})}const E2="/assets/Artc1-CST6bCyG.png";function Cf({isVertical:n=!1,title:e,subTitle:t,height:r,marginBottom:i,trending:s=!1,maxCount:a,nav:u,blogArray:c}){const[h,p]=$.useState([]),[g,_]=$.useState(!0),A=$.useRef(null),T=la(),E=a??4;return $.useEffect(()=>{const S=async()=>{try{_(!0);const x=await T2(),P=x.some(H=>typeof H.likes=="number");let z;s&&P?z=[...x].sort((H,V)=>(V.likes||0)-(H.likes||0)):z=[...x].sort((H,V)=>{var I,k,B,U;const D=((k=(I=H.datePosted)==null?void 0:I.toDate)==null?void 0:k.call(I))||new Date(0);return(((U=(B=V.datePosted)==null?void 0:B.toDate)==null?void 0:U.call(B))||new Date(0))-D}),p(z)}catch(x){console.error("Failed to fetch blogs:",x)}finally{_(!1)}};c&&c.length>0?(p(c),_(!1)):S()},[s,c]),w.jsxs("section",{className:"display-column",children:[w.jsxs("div",{className:"title-container",children:[w.jsxs("div",{className:"info-container",children:[w.jsx("h1",{className:"outfit-font",children:e}),w.jsx("h1",{className:"outfit-font",children:t})]}),w.jsx("div",{className:"line-blog"})]}),w.jsx("div",{ref:A,className:`blog-column-container ${n?"vertical":"horizontal"}`,children:g?w.jsx(bp,{}):h.slice(0,E).map((S,x)=>{var P;return w.jsxs("div",{className:"blog-info-container",style:{marginBottom:i},onClick:()=>{T(`/${u}/${S.id}`),_f("#nav")},children:[w.jsx("img",{src:S.imgUrl||E2,alt:S.title||"Blog image",style:{height:r}}),w.jsx("p",{className:"playfair-thin-font",children:((P=S.categories)==null?void 0:P[0])||"Uncategorized"}),w.jsxs("h3",{children:[S.title||"Untitled"," ",S.part?`Part ${S.part}`:""]}),w.jsx("p",{className:"playfair-thin-font silver-text",children:S.author||"Unknown Author"})]},S.id||x)})})]})}const j$="/assets/MDRLogoCup-BgPHFgxi.png",F$="/assets/MDRHeroBgPhone-CqPQrG5g.png";function H$(){const[n,e]=$.useState(window.innerWidth);return $.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),w.jsx("section",{className:"hero-main-container",children:n<=600?w.jsxs(w.Fragment,{children:[w.jsx("img",{src:F$}),w.jsx("h1",{className:"playfair-font green-text",children:"My"}),w.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),w.jsx("h1",{className:"playfair-font green-text",children:"Reed"}),w.jsx(al,{text:"See Blogs"})]}):w.jsxs(w.Fragment,{children:[w.jsx("img",{src:j$})," ",w.jsx("h1",{className:"playfair-font green-text",children:"My"}),w.jsx("h1",{className:"playfair-font green-text",children:"Daily"}),w.jsx("h1",{style:{marginBottom:"10px"},className:"playfair-font green-text",children:"Reed"}),w.jsx(al,{text:"See Blogs"})]})})}function q$(){return w.jsxs("div",{className:"display-column",children:[w.jsx(H$,{}),w.jsxs("div",{style:{padding:"0px 20px"},className:"display-column ",children:[w.jsx(Cf,{nav:"singleBlog",title:"Latest",isVertical:!1,marginBottom:"40px"}),w.jsx(Cf,{nav:"singleBlog",title:"Trending",isVertical:!1,marginBottom:"40px",trending:!0})]})]})}const $$={element:q$()};function iE({author:n}){const e=$.useRef(null),[t,r]=$.useState(0),i=aa();return $.useEffect(()=>{const s=()=>{e.current&&r(e.current.offsetHeight)};return setTimeout(()=>{s()},[500]),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[i]),w.jsxs("div",{ref:e,className:"sidebar-main-container silver-bg",children:[w.jsx(Cf,{nav:"singleBlog",title:"Latest",maxCount:3}),w.jsx(Cf,{nav:"singleBlog",title:"Trending",maxCount:2})]})}function G$(){return w.jsxs("section",{className:"about-info-main-section",children:[w.jsxs("div",{className:"about-info",children:[w.jsx("h3",{className:"outfit-thin-font",children:"My Daily Reed. When you read and respond, in any way, its an inexplicable connection. PLEASE share your thoughts. The space between a writer and the reader is sacred. Because there are only so many heartbeats and pen strokes we can share in this life. What we share should be thought-provoking, meaningful, and dare I say. FUN!"}),w.jsxs("ul",{className:"playfair-font",children:[w.jsx("li",{children:"Monday-Devotion"}),w.jsx("li",{children:"Tuesday-Article"}),w.jsx("li",{children:"Wednesday-Inspiration/Insight"}),w.jsx("li",{children:"Thursday-Lessons from a Grocery Store"}),w.jsx("li",{children:"Friday-Your Turn"})]})]}),w.jsx(iE,{author:"My Daily Reed"})]})}const K$="/assets/MDRAboutTree-JE1PMwgt.png";function W$(){return w.jsxs("section",{className:"about-title-main-container charcoal-bg",children:[w.jsx("h1",{className:"playfair-font ",children:"My Daily Reed"}),w.jsx("img",{src:K$}),w.jsx("h1",{className:"playfair-font",children:"About"})]})}function Y$(){return w.jsxs("div",{className:"display-column",children:[w.jsx(W$,{}),w.jsx(G$,{})]})}const Q$={element:Y$()};/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:b2,setPrototypeOf:Kk,isFrozen:X$,getPrototypeOf:J$,getOwnPropertyDescriptor:Z$}=Object;let{freeze:Fr,seal:ds,create:S2}=Object,{apply:sE,construct:oE}=typeof Reflect<"u"&&Reflect;Fr||(Fr=function(e){return e});ds||(ds=function(e){return e});sE||(sE=function(e,t,r){return e.apply(t,r)});oE||(oE=function(e,t){return new e(...t)});const Zm=Hr(Array.prototype.forEach),eG=Hr(Array.prototype.lastIndexOf),Wk=Hr(Array.prototype.pop),Wh=Hr(Array.prototype.push),tG=Hr(Array.prototype.splice),kg=Hr(String.prototype.toLowerCase),kA=Hr(String.prototype.toString),Yk=Hr(String.prototype.match),Yh=Hr(String.prototype.replace),nG=Hr(String.prototype.indexOf),rG=Hr(String.prototype.trim),Es=Hr(Object.prototype.hasOwnProperty),zr=Hr(RegExp.prototype.test),Qh=iG(TypeError);function Hr(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return sE(n,e,r)}}function iG(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return oE(n,t)}}function mt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kg;Kk&&Kk(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(X$(e)||(e[r]=s),i=s)}n[i]=!0}return n}function sG(n){for(let e=0;e<n.length;e++)Es(n,e)||(n[e]=null);return n}function cu(n){const e=S2(null);for(const[t,r]of b2(n))Es(n,t)&&(Array.isArray(r)?e[t]=sG(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=cu(r):e[t]=r);return e}function Xh(n,e){for(;n!==null;){const r=Z$(n,e);if(r){if(r.get)return Hr(r.get);if(typeof r.value=="function")return Hr(r.value)}n=J$(n)}function t(){return null}return t}const Qk=Fr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),IA=Fr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),NA=Fr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oG=Fr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),OA=Fr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),aG=Fr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xk=Fr(["#text"]),Jk=Fr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),MA=Fr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zk=Fr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),eg=Fr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lG=ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uG=ds(/<%[\w\W]*|[\w\W]*%>/gm),cG=ds(/\$\{[\w\W]*/gm),fG=ds(/^data-[\-\w.\u00B7-\uFFFF]+$/),hG=ds(/^aria-[\-\w]+$/),w2=ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),dG=ds(/^(?:\w+script|data):/i),pG=ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),C2=ds(/^html$/i),mG=ds(/^[a-z][.\w]*(-[.\w]+)+$/i);var eI=Object.freeze({__proto__:null,ARIA_ATTR:hG,ATTR_WHITESPACE:pG,CUSTOM_ELEMENT:mG,DATA_ATTR:fG,DOCTYPE_NAME:C2,ERB_EXPR:uG,IS_ALLOWED_URI:w2,IS_SCRIPT_OR_DATA:dG,MUSTACHE_EXPR:lG,TMPLIT_EXPR:cG});const Jh={element:1,text:3,progressingInstruction:7,comment:8,document:9},gG=function(){return typeof window>"u"?null:window},yG=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},tI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function R2(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gG();const e=ve=>R2(ve);if(e.version="3.2.5",e.removed=[],!n||!n.document||n.document.nodeType!==Jh.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:u,Element:c,NodeFilter:h,NamedNodeMap:p=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:_,trustedTypes:A}=n,T=c.prototype,E=Xh(T,"cloneNode"),S=Xh(T,"remove"),x=Xh(T,"nextSibling"),P=Xh(T,"childNodes"),z=Xh(T,"parentNode");if(typeof a=="function"){const ve=t.createElement("template");ve.content&&ve.content.ownerDocument&&(t=ve.content.ownerDocument)}let H,V="";const{implementation:D,createNodeIterator:O,createDocumentFragment:I,getElementsByTagName:k}=t,{importNode:B}=r;let U=tI();e.isSupported=typeof b2=="function"&&typeof z=="function"&&D&&D.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:L,TMPLIT_EXPR:Te,DATA_ATTR:be,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:le,CUSTOM_ELEMENT:Ne}=eI;let{IS_ALLOWED_URI:j}=eI,re=null;const ce=mt({},[...Qk,...IA,...NA,...OA,...Xk]);let ae=null;const we=mt({},[...Jk,...MA,...Zk,...eg]);let Re=Object.seal(S2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Le=null,$t=null,St=!0,Wt=!0,Nt=!1,Mn=!0,er=!1,di=!0,Jt=!1,gs=!1,Is=!1,an=!1,Ns=!1,Bi=!1,ys=!0,zi=!1;const pi="user-content-";let gr=!0,Kr=!1,Mr={},ut=null;const et=mt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Dn=null;const Zt=mt({},["audio","video","img","source","image","track"]);let Os=null;const Dr=mt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pr="http://www.w3.org/1998/Math/MathML",Lr="http://www.w3.org/2000/svg",En="http://www.w3.org/1999/xhtml";let bn=En,mi=!1,yr=null;const Ms=mt({},[Pr,Lr,En],kA);let Wr=mt({},["mi","mo","mn","ms","mtext"]),ji=mt({},["annotation-xml"]);const Yr=mt({},["title","style","font","a","script"]);let tr=null;const Ds=["application/xhtml+xml","text/html"],nr="text/html";let Ot=null,rr=null;const Ps=t.createElement("form"),G=function(K){return K instanceof RegExp||K instanceof Function},J=function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(rr&&rr===K)){if((!K||typeof K!="object")&&(K={}),K=cu(K),tr=Ds.indexOf(K.PARSER_MEDIA_TYPE)===-1?nr:K.PARSER_MEDIA_TYPE,Ot=tr==="application/xhtml+xml"?kA:kg,re=Es(K,"ALLOWED_TAGS")?mt({},K.ALLOWED_TAGS,Ot):ce,ae=Es(K,"ALLOWED_ATTR")?mt({},K.ALLOWED_ATTR,Ot):we,yr=Es(K,"ALLOWED_NAMESPACES")?mt({},K.ALLOWED_NAMESPACES,kA):Ms,Os=Es(K,"ADD_URI_SAFE_ATTR")?mt(cu(Dr),K.ADD_URI_SAFE_ATTR,Ot):Dr,Dn=Es(K,"ADD_DATA_URI_TAGS")?mt(cu(Zt),K.ADD_DATA_URI_TAGS,Ot):Zt,ut=Es(K,"FORBID_CONTENTS")?mt({},K.FORBID_CONTENTS,Ot):et,Le=Es(K,"FORBID_TAGS")?mt({},K.FORBID_TAGS,Ot):{},$t=Es(K,"FORBID_ATTR")?mt({},K.FORBID_ATTR,Ot):{},Mr=Es(K,"USE_PROFILES")?K.USE_PROFILES:!1,St=K.ALLOW_ARIA_ATTR!==!1,Wt=K.ALLOW_DATA_ATTR!==!1,Nt=K.ALLOW_UNKNOWN_PROTOCOLS||!1,Mn=K.ALLOW_SELF_CLOSE_IN_ATTR!==!1,er=K.SAFE_FOR_TEMPLATES||!1,di=K.SAFE_FOR_XML!==!1,Jt=K.WHOLE_DOCUMENT||!1,an=K.RETURN_DOM||!1,Ns=K.RETURN_DOM_FRAGMENT||!1,Bi=K.RETURN_TRUSTED_TYPE||!1,Is=K.FORCE_BODY||!1,ys=K.SANITIZE_DOM!==!1,zi=K.SANITIZE_NAMED_PROPS||!1,gr=K.KEEP_CONTENT!==!1,Kr=K.IN_PLACE||!1,j=K.ALLOWED_URI_REGEXP||w2,bn=K.NAMESPACE||En,Wr=K.MATHML_TEXT_INTEGRATION_POINTS||Wr,ji=K.HTML_INTEGRATION_POINTS||ji,Re=K.CUSTOM_ELEMENT_HANDLING||{},K.CUSTOM_ELEMENT_HANDLING&&G(K.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Re.tagNameCheck=K.CUSTOM_ELEMENT_HANDLING.tagNameCheck),K.CUSTOM_ELEMENT_HANDLING&&G(K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Re.attributeNameCheck=K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),K.CUSTOM_ELEMENT_HANDLING&&typeof K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Re.allowCustomizedBuiltInElements=K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),er&&(Wt=!1),Ns&&(an=!0),Mr&&(re=mt({},Xk),ae=[],Mr.html===!0&&(mt(re,Qk),mt(ae,Jk)),Mr.svg===!0&&(mt(re,IA),mt(ae,MA),mt(ae,eg)),Mr.svgFilters===!0&&(mt(re,NA),mt(ae,MA),mt(ae,eg)),Mr.mathMl===!0&&(mt(re,OA),mt(ae,Zk),mt(ae,eg))),K.ADD_TAGS&&(re===ce&&(re=cu(re)),mt(re,K.ADD_TAGS,Ot)),K.ADD_ATTR&&(ae===we&&(ae=cu(ae)),mt(ae,K.ADD_ATTR,Ot)),K.ADD_URI_SAFE_ATTR&&mt(Os,K.ADD_URI_SAFE_ATTR,Ot),K.FORBID_CONTENTS&&(ut===et&&(ut=cu(ut)),mt(ut,K.FORBID_CONTENTS,Ot)),gr&&(re["#text"]=!0),Jt&&mt(re,["html","head","body"]),re.table&&(mt(re,["tbody"]),delete Le.tbody),K.TRUSTED_TYPES_POLICY){if(typeof K.TRUSTED_TYPES_POLICY.createHTML!="function")throw Qh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof K.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Qh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');H=K.TRUSTED_TYPES_POLICY,V=H.createHTML("")}else H===void 0&&(H=yG(A,i)),H!==null&&typeof V=="string"&&(V=H.createHTML(""));Fr&&Fr(K),rr=K}},ee=mt({},[...IA,...NA,...oG]),he=mt({},[...OA,...aG]),_e=function(K){let me=z(K);(!me||!me.tagName)&&(me={namespaceURI:bn,tagName:"template"});const Ce=kg(K.tagName),tt=kg(me.tagName);return yr[K.namespaceURI]?K.namespaceURI===Lr?me.namespaceURI===En?Ce==="svg":me.namespaceURI===Pr?Ce==="svg"&&(tt==="annotation-xml"||Wr[tt]):!!ee[Ce]:K.namespaceURI===Pr?me.namespaceURI===En?Ce==="math":me.namespaceURI===Lr?Ce==="math"&&ji[tt]:!!he[Ce]:K.namespaceURI===En?me.namespaceURI===Lr&&!ji[tt]||me.namespaceURI===Pr&&!Wr[tt]?!1:!he[Ce]&&(Yr[Ce]||!ee[Ce]):!!(tr==="application/xhtml+xml"&&yr[K.namespaceURI]):!1},Se=function(K){Wh(e.removed,{element:K});try{z(K).removeChild(K)}catch{S(K)}},Be=function(K,me){try{Wh(e.removed,{attribute:me.getAttributeNode(K),from:me})}catch{Wh(e.removed,{attribute:null,from:me})}if(me.removeAttribute(K),K==="is")if(an||Ns)try{Se(me)}catch{}else try{me.setAttribute(K,"")}catch{}},Ie=function(K){let me=null,Ce=null;if(Is)K="<remove></remove>"+K;else{const Rt=Yk(K,/^[\r\n\t ]+/);Ce=Rt&&Rt[0]}tr==="application/xhtml+xml"&&bn===En&&(K='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+K+"</body></html>");const tt=H?H.createHTML(K):K;if(bn===En)try{me=new _().parseFromString(tt,tr)}catch{}if(!me||!me.documentElement){me=D.createDocument(bn,"template",null);try{me.documentElement.innerHTML=mi?V:tt}catch{}}const Bt=me.body||me.documentElement;return K&&Ce&&Bt.insertBefore(t.createTextNode(Ce),Bt.childNodes[0]||null),bn===En?k.call(me,Jt?"html":"body")[0]:Jt?me.documentElement:Bt},Me=function(K){return O.call(K.ownerDocument||K,K,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Ue=function(K){return K instanceof g&&(typeof K.nodeName!="string"||typeof K.textContent!="string"||typeof K.removeChild!="function"||!(K.attributes instanceof p)||typeof K.removeAttribute!="function"||typeof K.setAttribute!="function"||typeof K.namespaceURI!="string"||typeof K.insertBefore!="function"||typeof K.hasChildNodes!="function")},Fe=function(K){return typeof u=="function"&&K instanceof u};function xe(ve,K,me){Zm(ve,Ce=>{Ce.call(e,K,me,rr)})}const He=function(K){let me=null;if(xe(U.beforeSanitizeElements,K,null),Ue(K))return Se(K),!0;const Ce=Ot(K.nodeName);if(xe(U.uponSanitizeElement,K,{tagName:Ce,allowedTags:re}),K.hasChildNodes()&&!Fe(K.firstElementChild)&&zr(/<[/\w!]/g,K.innerHTML)&&zr(/<[/\w!]/g,K.textContent)||K.nodeType===Jh.progressingInstruction||di&&K.nodeType===Jh.comment&&zr(/<[/\w]/g,K.data))return Se(K),!0;if(!re[Ce]||Le[Ce]){if(!Le[Ce]&&wt(Ce)&&(Re.tagNameCheck instanceof RegExp&&zr(Re.tagNameCheck,Ce)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(Ce)))return!1;if(gr&&!ut[Ce]){const tt=z(K)||K.parentNode,Bt=P(K)||K.childNodes;if(Bt&&tt){const Rt=Bt.length;for(let en=Rt-1;en>=0;--en){const zt=E(Bt[en],!0);zt.__removalCount=(K.__removalCount||0)+1,tt.insertBefore(zt,x(K))}}}return Se(K),!0}return K instanceof c&&!_e(K)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&zr(/<\/no(script|embed|frames)/i,K.innerHTML)?(Se(K),!0):(er&&K.nodeType===Jh.text&&(me=K.textContent,Zm([F,L,Te],tt=>{me=Yh(me,tt," ")}),K.textContent!==me&&(Wh(e.removed,{element:K.cloneNode()}),K.textContent=me)),xe(U.afterSanitizeElements,K,null),!1)},it=function(K,me,Ce){if(ys&&(me==="id"||me==="name")&&(Ce in t||Ce in Ps))return!1;if(!(Wt&&!$t[me]&&zr(be,me))){if(!(St&&zr(Y,me))){if(!ae[me]||$t[me]){if(!(wt(K)&&(Re.tagNameCheck instanceof RegExp&&zr(Re.tagNameCheck,K)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(K))&&(Re.attributeNameCheck instanceof RegExp&&zr(Re.attributeNameCheck,me)||Re.attributeNameCheck instanceof Function&&Re.attributeNameCheck(me))||me==="is"&&Re.allowCustomizedBuiltInElements&&(Re.tagNameCheck instanceof RegExp&&zr(Re.tagNameCheck,Ce)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(Ce))))return!1}else if(!Os[me]){if(!zr(j,Yh(Ce,le,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&K!=="script"&&nG(Ce,"data:")===0&&Dn[K])){if(!(Nt&&!zr(X,Yh(Ce,le,"")))){if(Ce)return!1}}}}}}return!0},wt=function(K){return K!=="annotation-xml"&&Yk(K,Ne)},_t=function(K){xe(U.beforeSanitizeAttributes,K,null);const{attributes:me}=K;if(!me||Ue(K))return;const Ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae,forceKeepAttr:void 0};let tt=me.length;for(;tt--;){const Bt=me[tt],{name:Rt,namespaceURI:en,value:zt}=Bt,gn=Ot(Rt);let Ve=Rt==="value"?zt:rG(zt);if(Ce.attrName=gn,Ce.attrValue=Ve,Ce.keepAttr=!0,Ce.forceKeepAttr=void 0,xe(U.uponSanitizeAttribute,K,Ce),Ve=Ce.attrValue,zi&&(gn==="id"||gn==="name")&&(Be(Rt,K),Ve=pi+Ve),di&&zr(/((--!?|])>)|<\/(style|title)/i,Ve)){Be(Rt,K);continue}if(Ce.forceKeepAttr||(Be(Rt,K),!Ce.keepAttr))continue;if(!Mn&&zr(/\/>/i,Ve)){Be(Rt,K);continue}er&&Zm([F,L,Te],_r=>{Ve=Yh(Ve,_r," ")});const tn=Ot(K.nodeName);if(it(tn,gn,Ve)){if(H&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!en)switch(A.getAttributeType(tn,gn)){case"TrustedHTML":{Ve=H.createHTML(Ve);break}case"TrustedScriptURL":{Ve=H.createScriptURL(Ve);break}}try{en?K.setAttributeNS(en,Rt,Ve):K.setAttribute(Rt,Ve),Ue(K)?Se(K):Wk(e.removed)}catch{}}}xe(U.afterSanitizeAttributes,K,null)},ht=function ve(K){let me=null;const Ce=Me(K);for(xe(U.beforeSanitizeShadowDOM,K,null);me=Ce.nextNode();)xe(U.uponSanitizeShadowNode,me,null),He(me),_t(me),me.content instanceof s&&ve(me.content);xe(U.afterSanitizeShadowDOM,K,null)};return e.sanitize=function(ve){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Ce=null,tt=null,Bt=null;if(mi=!ve,mi&&(ve="<!-->"),typeof ve!="string"&&!Fe(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw Qh("dirty is not a string, aborting")}else throw Qh("toString is not a function");if(!e.isSupported)return ve;if(gs||J(K),e.removed=[],typeof ve=="string"&&(Kr=!1),Kr){if(ve.nodeName){const zt=Ot(ve.nodeName);if(!re[zt]||Le[zt])throw Qh("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof u)me=Ie("<!---->"),Ce=me.ownerDocument.importNode(ve,!0),Ce.nodeType===Jh.element&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?me=Ce:me.appendChild(Ce);else{if(!an&&!er&&!Jt&&ve.indexOf("<")===-1)return H&&Bi?H.createHTML(ve):ve;if(me=Ie(ve),!me)return an?null:Bi?V:""}me&&Is&&Se(me.firstChild);const Rt=Me(Kr?ve:me);for(;tt=Rt.nextNode();)He(tt),_t(tt),tt.content instanceof s&&ht(tt.content);if(Kr)return ve;if(an){if(Ns)for(Bt=I.call(me.ownerDocument);me.firstChild;)Bt.appendChild(me.firstChild);else Bt=me;return(ae.shadowroot||ae.shadowrootmode)&&(Bt=B.call(r,Bt,!0)),Bt}let en=Jt?me.outerHTML:me.innerHTML;return Jt&&re["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&zr(C2,me.ownerDocument.doctype.name)&&(en="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+en),er&&Zm([F,L,Te],zt=>{en=Yh(en,zt," ")}),H&&Bi?H.createHTML(en):en},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J(ve),gs=!0},e.clearConfig=function(){rr=null,gs=!1},e.isValidAttribute=function(ve,K,me){rr||J({});const Ce=Ot(ve),tt=Ot(K);return it(Ce,tt,me)},e.addHook=function(ve,K){typeof K=="function"&&Wh(U[ve],K)},e.removeHook=function(ve,K){if(K!==void 0){const me=eG(U[ve],K);return me===-1?void 0:tG(U[ve],me,1)[0]}return Wk(U[ve])},e.removeHooks=function(ve){U[ve]=[]},e.removeAllHooks=function(){U=tI()},e}var x2=R2();function nI({title:n,subTitle:e,author:t,datePosted:r,readTime:i,titleImg:s,part:a,partUrl:u,partName:c,description:h}){la();const p=r!=null&&r.toDate?r.toDate().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):new Date(r).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return w.jsxs("div",{className:"sb-title-main-container charcoal-bg white-text",children:[w.jsx("p",{className:"sb-sub outfit-font",children:e}),w.jsx("h1",{className:"sb-title playfair-font",style:{marginBottom:"40px"},children:n}),a&&w.jsxs("h6",{className:"sb-part silver-bg outfit-font",style:{padding:"5px 20px",borderRadius:"5rem",color:"black"},children:["Part: ",a]}),w.jsx("img",{src:s||E2,alt:"Blog banner"}),w.jsx("p",{className:"sb-title-blerb outfit-thin-font",dangerouslySetInnerHTML:{__html:x2.sanitize(h)}}),c&&w.jsx(al,{onClick:()=>window.location.href=u,text:c}),w.jsxs("div",{className:"sb-title-info-container",children:[w.jsxs("div",{className:"sb-title-info",children:[w.jsx("h6",{className:"outfit-xthin-font",children:"Author:"}),w.jsx("h5",{className:"playfair-font",children:t||"Unknown"})]}),w.jsxs("div",{className:"sb-title-info",children:[w.jsx("h6",{className:"outfit-xthin-font",children:"Read Time:"}),w.jsx("h5",{className:"playfair-font",children:i||"N/A"})]}),w.jsxs("div",{className:"sb-title-info",children:[w.jsx("h6",{className:"outfit-xthin-font",children:"Date Posted:"}),w.jsx("h5",{className:"playfair-font",children:p})]})]})]})}const _G="/assets/likeFilled-BbC8tfBI.png",vG="/assets/likeEmpty-BD2cNi-E.png";function AG(){var h,p;const{id:n}=o0(),[e,t]=$.useState(null),[r,i]=$.useState(!1),[s,a]=$.useState("");$.useEffect(()=>{(async()=>{var _;try{const A=await xg(n);t(A);const T=sy().currentUser;T&&((_=A.likes)!=null&&_.includes(T.uid))&&i(!0)}catch(A){console.error("Failed to fetch blog:",A)}})()},[n]);const u=async()=>{if(!(!e||!sy().currentUser))try{r?await B$(n):await U$(n);const _=await xg(n);t(_),i(!r)}catch(_){console.error("Failed to toggle like:",_)}},c=async()=>{if(!(!s.trim()||!e))try{await z$(n,s,"Anonymous");const g=await xg(n);t(g),a("")}catch(g){console.error("Failed to submit comment:",g)}};return e?w.jsxs("section",{className:"social-main-container",children:[w.jsxs("div",{className:"like-and-comment-container",children:[w.jsxs("div",{className:"like-and-share",children:[w.jsxs("div",{className:"like-container",children:[w.jsxs("div",{className:"like",children:[w.jsx("img",{src:r?_G:vG,onClick:u,alt:"like button"}),w.jsxs("p",{children:[((h=e.likes)==null?void 0:h.length)||0," likes"]})]}),w.jsx("h1",{className:"outfit-font",children:"Leave a like"})]}),w.jsxs("div",{className:"share-container",children:[w.jsx("h1",{className:"outfit-font",children:"Share This:"}),w.jsxs("div",{children:[w.jsx(al,{text:"X",fontSize:".8rem"}),w.jsx(al,{text:"Facebook",fontSize:".8rem"})]})]})]}),w.jsxs("div",{className:"leave-comment",children:[w.jsx("h1",{className:"outfit-font",children:"Leave a Comment:"}),w.jsx("textarea",{className:"outfit-font silver-bg",value:s,onChange:g=>a(g.target.value),placeholder:"leave a comment..."}),w.jsx(al,{text:"Submit",margin:"0 auto",fontSize:"1.3rem",onClick:c})]})]}),w.jsxs("div",{className:"comment-container",children:[w.jsx("h1",{className:"outfit-font",children:"Comments:"}),w.jsx("div",{className:"comments silver-bg",children:(p=e.comments)==null?void 0:p.map((g,_)=>w.jsxs(Sr.Fragment,{children:[w.jsxs("h1",{className:"commenter-name outfit-font",children:[g.name||"Reader",":"]}),w.jsx("p",{className:"comment outfit-font",children:g.comment})]},_))})]})]}):w.jsx("p",{children:"Loading..."})}function rI({content:n}){return Array.isArray(n)?w.jsx("div",{className:"sb-article-main-container",children:w.jsxs("div",{className:"sb-article-container",children:[n.filter(e=>e.type!=="Description").map((e,t)=>e.type==="Article"?w.jsx("div",{className:"outfit-thin-font sb-article-section",dangerouslySetInnerHTML:{__html:x2.sanitize(e.value)}},e._id||t):e.type==="Image"?w.jsx("img",{src:e.value,alt:`article-section-${t}`,className:"sb-article-image"},e._id||t):null),w.jsx(AG,{})]})}):w.jsx(Ep,{})}function TG(){var s,a,u,c,h,p,g,_,A,T;const[n,e]=$.useState(window.innerWidth),[t,r]=$.useState(null),{id:i}=o0();return $.useEffect(()=>{const E=()=>e(window.innerWidth);return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),$.useEffect(()=>{(async()=>{try{const S=await xg(i);r(S)}catch(S){console.error("Failed to fetch blog:",S)}})(),_f("#nav")},[i]),w.jsx("section",{id:"single-blog",className:"display-column",children:t?w.jsxs(w.Fragment,{children:[" ",n<600?w.jsxs(w.Fragment,{children:[w.jsx(nI,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,part:t.part,partName:(a=(s=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:s.value)==null?void 0:a.partName,partUrl:(c=(u=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:u.value)==null?void 0:c.partUrl,description:(h=t.content.find(E=>E.type==="Description"))==null?void 0:h.value,redirectLink:t.redirectLink}),w.jsx("div",{className:"padding-20",children:w.jsx(rI,{content:t.content})}),w.jsx(iE,{author:"My Daily Reed"})]}):w.jsxs(w.Fragment,{children:[w.jsx(nI,{title:t.title,subTitle:t.subTitle,author:t.author,datePosted:t.datePosted,readTime:t.readTime,titleImg:t.imgUrl,partName:(g=(p=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:p.value)==null?void 0:g.partName,partUrl:(A=(_=t==null?void 0:t.content.find(E=>E.type==="Redirect"))==null?void 0:_.value)==null?void 0:A.partUrl,part:t.part,description:(T=t.content.find(E=>E.type==="Description"))==null?void 0:T.value}),w.jsxs("div",{className:"flex-between padding-40 pos-relative",children:[w.jsx(rI,{content:t.content}),w.jsx(iE,{author:"My Daily Reed"})]})]})]}):w.jsx(w.Fragment,{children:w.jsx(Ep,{})})})}const EG={element:w.jsx(TG,{})};function bG(){const[n,e]=$.useState(!1),[t,r]=$.useState(""),[i,s]=$.useState(""),[a,u]=$.useState(""),c=la();$.useEffect(()=>{const _=zD(hu,A=>{A&&(e(!0),setTimeout(()=>{c("/dashboard")},[1e3]))});return()=>_()},[]);const h=async _=>{_.preventDefault();try{await PH(hu,t,i),c("/dashboard")}catch{u("Incorrect Email/Password")}},p=async()=>{const _=new Go,A="urok.dance@gmail.com";try{(await iq(hu,_)).user.email!==A?(await hu.signOut(),u("Access denied: unauthorized Google account.")):(console.log("Google login successful"),c("/dashboard"))}catch(T){console.error(T),u("Google sign-in failed.")}},g=async()=>{if(!t){u("Please enter your email first.");return}try{await DH(hu,t),alert("Password reset email sent. Check your inbox.")}catch(_){u(_.message)}};return w.jsx(w.Fragment,{children:n?w.jsx(w.Fragment,{children:w.jsx(Ep,{})}):w.jsxs(w.Fragment,{children:[" ",w.jsx("section",{className:"display-column charcoal-bg neg-marg",children:w.jsxs("div",{className:"form-container green-bg",children:[w.jsx("p",{className:"title outfit-font",children:"Login"}),w.jsxs("form",{className:"form",onSubmit:h,children:[w.jsxs("div",{className:"input-group",children:[w.jsx("label",{htmlFor:"email",className:"outfit-thin-font",children:"Email"}),w.jsx("input",{type:"text",name:"email",placeholder:"email@email.com",id:"email",value:t,onChange:_=>r(_.target.value)})]}),w.jsxs("div",{className:"input-group",children:[w.jsx("label",{htmlFor:"password",className:"outfit-thin-font",children:"Password"}),w.jsx("input",{type:"password",name:"password",id:"password",placeholder:"password",value:i,onChange:_=>s(_.target.value)}),w.jsx("div",{className:"forgot",children:w.jsx("button",{type:"button",className:"forgot-password-btn outfit-font",onClick:g,children:"Forgot Password?"})})]}),w.jsx("button",{type:"submit",className:"sign charcoal-bg",children:"Sign in"}),a&&w.jsx("p",{className:"error-message",children:a})]}),w.jsxs("div",{className:"social-message",children:[w.jsx("div",{className:"line"}),w.jsx("p",{className:"message",children:"Login with Google"}),w.jsx("div",{className:"line"})]}),w.jsx("div",{className:"social-icons",children:w.jsx("button",{type:"button","aria-label":"Log in with Google",className:"icon",onClick:p,children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:w.jsx("path",{d:"M16.318 13.714v5.484h9.078c-0.37 2.354-2.745 6.901-9.078 6.901-5.458 0-9.917-4.521-9.917-10.099s4.458-10.099 9.917-10.099c3.109 0 5.193 1.318 6.38 2.464l4.339-4.182c-2.786-2.599-6.396-4.182-10.719-4.182-8.844 0-16 7.151-16 16s7.156 16 16 16c9.234 0 15.365-6.49 15.365-15.635 0-1.052-0.115-1.854-0.255-2.651z"})})})})]})})]})})}const SG={element:w.jsx(bG,{})},k2=$.createContext();function wG({children:n}){const[e,t]=$.useState(null),[r,i]=$.useState(!0);return $.useEffect(()=>{const s=zD(hu,a=>{t(a),i(!1)});return()=>s()},[]),w.jsx(k2.Provider,{value:{currentUser:e},children:r?w.jsx(Ep,{}):n})}function CG(){return $.useContext(k2)}function Zh({children:n}){const{currentUser:e}=CG();return e?n:w.jsx(Lz,{to:"/login"})}const RG="/assets/dashboardBg-Dtd5WdDk.jpg",xG="/assets/dashboardBgPhone-Dn_QPInV.jpg";function kG(){const[n,e]=$.useState(window.innerWidth);return $.useEffect(()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),w.jsx("section",{className:"db-hero-main-container",children:n<=600?w.jsxs(w.Fragment,{children:[w.jsx("img",{src:xG}),w.jsx("h1",{className:"outfit-font ",children:"Welcome"}),w.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),w.jsx("h1",{className:"outfit-font green-text",children:"Dashboard"})]}):w.jsxs(w.Fragment,{children:[w.jsx("img",{src:RG})," ",w.jsx("h1",{className:"outfit-font green-text",children:"Welcome"}),w.jsx("h1",{className:"outfit-font green-text",children:"To Your"}),w.jsx("h1",{style:{marginBottom:"10px"},className:"outfit-font green-text",children:"Dashboard"})]})})}const IG="/assets/add-xRAkvvij.png",NG="/assets/edit-MfBVzi6v.png",OG="/assets/options-lines-D1UL6CiK.png";function MG(){const n=la(),e=async()=>{try{await UH(hu),n("/login")}catch(t){console.error("Error signing out:",t)}};return w.jsxs("section",{style:{padding:"40px 20px",gap:"50px"},className:"display-column charcoal-bg neg-marg",children:[w.jsxs("div",{className:"db-direction-container green-bg",onClick:t=>{t.preventDefault(),n("/createBlog"),window.scrollTo(0,0)},children:[w.jsx("h1",{className:"outfit-font",children:"Create a Blog Post"}),w.jsx("img",{src:IG})]}),w.jsxs("div",{className:"db-direction-container green-bg",onClick:t=>{t.preventDefault(),n("/editDirectory"),window.scrollTo(0,0)},children:[w.jsx("h1",{className:"outfit-font",children:"Edit a Blog Post"}),w.jsx("img",{src:NG})]}),w.jsxs("div",{className:"db-direction-container green-bg",onClick:t=>{t.preventDefault(),n("/editCat"),window.scrollTo(0,0)},children:[w.jsx("h1",{className:"outfit-font",children:"Edit Common Categories"}),w.jsx("img",{src:OG})]}),w.jsx("button",{className:"word-button green-bg outfit-font",style:{fontSize:"1.5rem"},onClick:()=>{e(),window.scrollTo(0,0)},children:"Logout"})]})}function DG(){return w.jsxs("section",{className:"dashboard-main",children:[w.jsx(kG,{}),w.jsx(MG,{})]})}const my=async(n,e="blogFolder")=>{if(!n)throw new Error("No file provided");const t=k5(p7,`${e}/${Date.now()}-${n.name}`);return await R5(t,n),await x5(t)};function ur(n){this.content=n}ur.prototype={constructor:ur,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new ur(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ur(t)},addToStart:function(n,e){return new ur([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new ur(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new ur(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=ur.from(n),n.size?new ur(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ur.from(n),n.size?new ur(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=ur.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};ur.from=function(n){if(n instanceof ur)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new ur(e)};function I2(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=I2(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function N2(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),u=e.child(--s),c=a.nodeSize;if(a==u){t-=c,r-=c;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let h=0,p=Math.min(a.text.length,u.text.length);for(;h<p&&a.text[a.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let h=N2(a.content,u.content,t-1,r-1);if(h)return h}t-=c,r-=c}}class ye{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,u=0;u<t;a++){let c=this.content[a],h=u+c.nodeSize;if(h>e&&r(c,i+u,s||null,a)!==!1&&c.content.size){let p=u+1;c.nodesBetween(Math.max(0,e-p),Math.min(c.content.size,t-p),r,i+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(u,c)=>{let h=u.isText?u.text.slice(Math.max(e,c)-c,t-c):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(a?a=!1:s+=r),s+=h},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ye(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let u=this.content[s],c=a+u.nodeSize;c>e&&((a<e||c>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=c}return new ye(r,i)}cutByIndex(e,t){return e==t?ye.empty:e==0&&t==this.content.length?this:new ye(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ye(i,s)}addToStart(e){return new ye([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ye(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return I2(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return N2(this,e,t,r)}findIndex(e,t=-1){if(e==0)return tg(0,e);if(e==this.size)return tg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),a=i+s.nodeSize;if(a>=e)return a==e||t>0?tg(r+1,a):tg(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ye.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ye(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ye.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ye(t||e,r)}static from(e){if(!e)return ye.empty;if(e instanceof ye)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ye([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ye.empty=new ye([],0);const DA={index:0,offset:0};function tg(n,e){return DA.index=n,DA.offset=e,DA}function gy(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!gy(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!gy(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let qt=class aE{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&gy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return aE.none;if(e instanceof aE)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};qt.none=[];class yy extends Error{}class ke{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=M2(this.content,e+this.openStart,t);return r&&new ke(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ke(O2(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ke.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ke(ye.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new ke(e,r,i)}}ke.empty=new ke(ye.empty,0,0);function O2(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||s.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(O2(s.content,e-i-1,t-i-1)))}function M2(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=M2(a.content,e-s-1,t);return u&&n.replaceChild(i,a.copy(u))}function PG(n,e,t){if(t.openStart>n.depth)throw new yy("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new yy("Inconsistent open depths");return D2(n,e,t,0)}function D2(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=D2(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return Iu(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=LG(t,n);return Iu(s,L2(n,a,u,e,r))}else return Iu(s,_y(n,e,r))}function P2(n,e){if(!e.type.compatibleContent(n.type))throw new yy("Cannot join "+e.type.name+" onto "+n.type.name)}function lE(n,e,t){let r=n.node(t);return P2(r,e.node(t)),r}function ku(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Cd(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(ku(n.nodeAfter,r),s++));for(let u=s;u<a;u++)ku(i.child(u),r);e&&e.depth==t&&e.textOffset&&ku(e.nodeBefore,r)}function Iu(n,e){return n.type.checkContent(e),n.copy(e)}function L2(n,e,t,r,i){let s=n.depth>i&&lE(n,e,i+1),a=r.depth>i&&lE(t,r,i+1),u=[];return Cd(null,n,i,u),s&&a&&e.index(i)==t.index(i)?(P2(s,a),ku(Iu(s,L2(n,e,t,r,i+1)),u)):(s&&ku(Iu(s,_y(n,e,i+1)),u),Cd(e,t,i,u),a&&ku(Iu(a,_y(t,r,i+1)),u)),Cd(r,null,i,u),new ye(u)}function _y(n,e,t){let r=[];if(Cd(null,n,t,r),n.depth>t){let i=lE(n,e,t+1);ku(Iu(i,_y(n,e,t+1)),r)}return Cd(e,null,t,r),new ye(r)}function LG(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(ye.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Jd{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return qt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new vy(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:u,offset:c}=a.content.findIndex(s),h=s-c;if(r.push(a,u,i+c),!h||(a=a.child(u),a.isText))break;s=h-1,i+=c+1}return new Jd(t,r,s)}static resolveCached(e,t){let r=iI.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else iI.set(e,r=new VG);let i=r.elts[r.i]=Jd.resolve(e,t);return r.i=(r.i+1)%UG,i}}class VG{constructor(){this.elts=[],this.i=0}}const UG=12,iI=new WeakMap;class vy{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const BG=Object.create(null);let ll=class uE{constructor(e,t,r,i=qt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&gy(this.attrs,t||e.defaultAttrs||BG)&&qt.sameSet(this.marks,r||qt.none)}copy(e=null){return e==this.content?this:new uE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new uE(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ke.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),h=i.node(a).content.cut(i.pos-u,s.pos-u);return new ke(h,i.depth-a,s.depth-a)}replace(e,t,r){return PG(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Jd.resolveCached(this,e)}resolveNoCache(e){return Jd.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),V2(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ye.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=qt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!qt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ye.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ll.prototype.text=void 0;class Ay extends ll{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):V2(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ay(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ay(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function V2(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ju{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new zG(e,t);if(r.next==null)return ju.empty;let i=U2(r);r.next&&r.err("Unexpected trailing text");let s=KG(GG(i));return WG(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,u){let c=a.matchFragment(e,r);if(c&&(!t||c.validEnd))return ye.from(u.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:p,next:g}=a.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let _=s(g,u.concat(p));if(_)return _}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:u,next:c}=s.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}ju.empty=new ju(!0);class zG{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function U2(n){let e=[];do e.push(jG(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function jG(n){let e=[];do e.push(FG(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function FG(n){let e=$G(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=HG(n,e);else break;return e}function sI(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function HG(n,e){let t=sI(n),r=t;return n.eat(",")&&(n.next!="}"?r=sI(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function qG(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function $G(n){if(n.eat("(")){let e=U2(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=qG(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function GG(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,c){let h={term:c,to:u};return e[a].push(h),h}function i(a,u){a.forEach(c=>c.to=u)}function s(a,u){if(a.type=="choice")return a.exprs.reduce((c,h)=>c.concat(s(h,u)),[]);if(a.type=="seq")for(let c=0;;c++){let h=s(a.exprs[c],u);if(c==a.exprs.length-1)return h;i(h,u=t())}else if(a.type=="star"){let c=t();return r(u,c),i(s(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=t();return i(s(a.expr,u),c),i(s(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(u)].concat(s(a.expr,u));if(a.type=="range"){let c=u;for(let h=0;h<a.min;h++){let p=t();i(s(a.expr,c),p),c=p}if(a.max==-1)i(s(a.expr,c),c);else for(let h=a.min;h<a.max;h++){let p=t();r(c,p),i(s(a.expr,c),p),c=p}return[r(c)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function B2(n,e){return e-n}function oI(n,e){let t=[];return r(e),t.sort(B2);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:u,to:c}=s[a];!u&&t.indexOf(c)==-1&&r(c)}}}function KG(n){let e=Object.create(null);return t(oI(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:c})=>{if(!u)return;let h;for(let p=0;p<i.length;p++)i[p][0]==u&&(h=i[p][1]);oI(n,c).forEach(p=>{h||i.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let s=e[r.join(",")]=new ju(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(B2);s.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return s}}function WG(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:c,next:h}=i.next[u];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(h)==-1&&r.push(h)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function z2(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function j2(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function F2(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function H2(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new QG(n,r,e[r]);return t}let aI=class q2{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=H2(e,r.attrs),this.defaultAttrs=z2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ju.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:j2(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ll(this,this.computeAttrs(e),ye.from(t),qt.setFrom(r))}createChecked(e=null,t,r){return t=ye.from(t),this.checkContent(t),new ll(this,this.computeAttrs(e),t,qt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ye.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(ye.empty,!0);return s?new ll(this,e,t.append(s),qt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){F2(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:qt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new q2(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function YG(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class QG{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?YG(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class V0{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=H2(e,i.attrs),this.excluded=null;let s=z2(this.attrs);this.instance=s?new qt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new qt(this,j2(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new V0(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){F2(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class $2{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=ur.from(e.nodes),t.marks=ur.from(e.marks||{}),this.nodes=aI.compile(this.spec.nodes,this),this.marks=V0.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=ju.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?lI(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:lI(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof aI){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Ay(r,r.defaultAttrs,e,qt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ll.fromJSON(this,e)}markFromJSON(e){return qt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function lI(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let u in n.marks){let c=n.marks[u];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function XG(n){return n.tag!=null}function JG(n){return n.style!=null}class ul{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(XG(i))this.tags.push(i);else if(JG(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new cI(this,t,!1);return r.addAll(e,qt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new cI(this,t,!0);return r.addAll(e,qt.none,t.from,t.to),ke.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(tK(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=fI(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=fI(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ul(e,ul.schemaRules(e)))}}const G2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ZG={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},K2={ol:!0,ul:!0},Zd=1,cE=2,Ig=4;function uI(n,e,t){return e!=null?(e?Zd:0)|(e==="full"?cE:0):n&&n.whitespace=="pre"?Zd|cE:t&-5}class ng{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=qt.none,this.match=s||(a&Ig?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ye.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Zd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=ye.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ye.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!G2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class cI{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=uI(null,t.preserveWhitespace,0)|(r?Ig:0);i?s=new ng(i.type,i.attrs,qt.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new ng(null,null,qt.none,!0,null,a):s=new ng(e.schema.topNodeType,null,qt.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&cE?"full":this.localPreserveWS||(i.options&Zd)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],u=e.previousSibling;(!a||u&&u.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;K2.hasOwnProperty(a)&&this.parser.normalizeLists&&eK(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(c?c.ignore:ZG.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let h,p=this.needsBlock;if(G2.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),h=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=c&&c.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),h&&this.sync(s),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,c,h,c.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let u=void 0;;){let c=this.parser.matchStyle(s,a,this,u);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(h=>!c.clearMark(h)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)u=c;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(a,t.attrs||null,r,t.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(u)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];a!=u;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,u=0;a>=0;a--){let c=this.nodes[a],h=c.findWrapping(e);if(h&&(!i||i.length>h.length+u)&&(i=h,s=c,!h.length))break;if(c.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=qt.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):hI(u.type,e.type))&&(a=u.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=uI(e,s,a.options);a.options&Ig&&a.content.length==0&&(u|=Ig);let c=qt.none;return r=r.filter(h=>(a.type?a.type.allowsMarkType(h.type):hI(h.type,e))?(c=h.addToSet(c),!1):!0),this.nodes.push(new ng(e,t,c,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Zd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(u,c)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;c>=s;c--)if(a(u-1,c))return!0;return!1}else{let p=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function eK(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&K2.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function tK(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function fI(n){let e={};for(let t in n)e[t]=n[t];return e}function hI(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=u=>{s.push(u);for(let c=0;c<u.edgeCount;c++){let{type:h,next:p}=u.edge(c);if(h==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class Ju{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=PA(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let u=0,c=0;for(;u<s.length&&c<a.marks.length;){let h=a.marks[c];if(!this.marks[h.type.name]){c++;continue}if(!h.eq(s[u][0])||h.type.spec.spanning===!1)break;u++,c++}for(;u<s.length;)i=s.pop()[1];for(;c<a.marks.length;){let h=a.marks[c++],p=this.serializeMark(h,a.isInline,t);p&&(s.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Ng(PA(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Ng(PA(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Ng(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ju(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=dI(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return dI(e.marks)}}function dI(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function PA(n){return n.document||window.document}const pI=new WeakMap;function nK(n){let e=pI.get(n);return e===void 0&&pI.set(n,e=rK(n)),e}function rK(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Ng(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=nK(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let u,c=t?n.createElementNS(t,i):n.createElement(i),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let _=g.indexOf(" ");_>0?c.setAttributeNS(g.slice(0,_),g.slice(_+1),h[g]):c.setAttribute(g,h[g])}}for(let g=p;g<e.length;g++){let _=e[g];if(_===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:A,contentDOM:T}=Ng(n,_,t,r);if(c.appendChild(A),T){if(u)throw new RangeError("Multiple content holes");u=T}}}return{dom:c,contentDOM:u}}const W2=65535,Y2=Math.pow(2,16);function iK(n,e){return n+e*Y2}function mI(n){return n&W2}function sK(n){return(n-(n&W2))/Y2}const Q2=1,X2=2,Og=4,J2=8;class fE{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&J2)>0}get deletedBefore(){return(this.delInfo&(Q2|Og))>0}get deletedAfter(){return(this.delInfo&(X2|Og))>0}get deletedAcross(){return(this.delInfo&Og)>0}}class ki{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ki.empty)return ki.empty}recover(e){let t=0,r=mI(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+sK(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?i:0);if(c>e)break;let h=this.ranges[u+s],p=this.ranges[u+a],g=c+h;if(e<=g){let _=h?e==c?-1:e==g?1:t:t,A=c+i+(_<0?0:p);if(r)return A;let T=e==(t<0?c:g)?null:iK(u/3,e-c),E=e==c?X2:e==g?Q2:Og;return(t<0?e!=c:e!=g)&&(E|=J2),new fE(A,E,T)}i+=p-h}return r?e+i:new fE(e+i,0,null)}touches(e,t){let r=0,i=mI(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let h=this.ranges[u+s],p=c+h;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?s:0),c=a+(this.inverted?0:s),h=this.ranges[i+t],p=this.ranges[i+r];e(u,u+h,c,c+p),s+=p-h}}invert(){return new ki(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ki.empty:new ki(e<0?[0,-e,0]:[0,0,e])}}ki.empty=new ki([]);class ep{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ep(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new ep;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],u=a.mapResult(e,t);if(u.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new fE(e,i,null)}}const LA=Object.create(null);class Or{getMap(){return ki.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=LA[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in LA)throw new RangeError("Duplicate use of step JSON ID "+e);return LA[e]=t,t.prototype.jsonID=e,t}}class Nn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Nn(e,null)}static fail(e){return new Nn(null,e)}static fromReplace(e,t,r,i){try{return Nn.ok(e.replace(t,r,i))}catch(s){if(s instanceof yy)return Nn.fail(s.message);throw s}}}function pS(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(pS(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return ye.fromArray(r)}class Xa extends Or{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ke(pS(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return Nn.fromReplace(e,this.from,this.to,s)}invert(){return new ro(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Xa(t.pos,r.pos,this.mark)}merge(e){return e instanceof Xa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Xa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Xa(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("addMark",Xa);class ro extends Or{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new ke(pS(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Nn.fromReplace(e,this.from,this.to,r)}invert(){return new Xa(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ro(t.pos,r.pos,this.mark)}merge(e){return e instanceof ro&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ro(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ro(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("removeMark",ro);class Ja extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Nn.fromReplace(e,this.pos,this.pos+1,new ke(ye.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ja(this.pos,t.marks[i]);return new Ja(this.pos,this.mark)}}return new Fu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ja(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ja(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("addNodeMark",Ja);class Fu extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Nn.fromReplace(e,this.pos,this.pos+1,new ke(ye.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ja(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Fu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fu(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("removeNodeMark",Fu);class Kn extends Or{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&hE(e,this.from,this.to)?Nn.fail("Structure replace would overwrite content"):Nn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ki([this.from,this.to-this.from,this.slice.size])}invert(e){return new Kn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Kn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Kn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ke.empty:new ke(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Kn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ke.empty:new ke(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Kn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Kn(t.from,t.to,ke.fromJSON(e,t.slice),!!t.structure)}}Or.jsonID("replace",Kn);class Wn extends Or{constructor(e,t,r,i,s,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=u}apply(e){if(this.structure&&(hE(e,this.from,this.gapFrom)||hE(e,this.gapTo,this.to)))return Nn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Nn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Nn.fromReplace(e,this.from,this.to,r):Nn.fail("Content does not fit in gap")}getMap(){return new ki([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Wn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Wn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Wn(t.from,t.to,t.gapFrom,t.gapTo,ke.fromJSON(e,t.slice),t.insert,!!t.structure)}}Or.jsonID("replaceAround",Wn);function hE(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function oK(n,e,t,r){let i=[],s=[],a,u;n.doc.nodesBetween(e,t,(c,h,p)=>{if(!c.isInline)return;let g=c.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let _=Math.max(h,e),A=Math.min(h+c.nodeSize,t),T=r.addToSet(g);for(let E=0;E<g.length;E++)g[E].isInSet(T)||(a&&a.to==_&&a.mark.eq(g[E])?a.to=A:i.push(a=new ro(_,A,g[E])));u&&u.to==_?u.to=A:s.push(u=new Xa(_,A,r))}}),i.forEach(c=>n.step(c)),s.forEach(c=>n.step(c))}function aK(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;s++;let c=null;if(r instanceof V0){let h=a.marks,p;for(;p=r.isInSet(h);)(c||(c=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let h=Math.min(u+a.nodeSize,t);for(let p=0;p<c.length;p++){let g=c[p],_;for(let A=0;A<i.length;A++){let T=i[A];T.step==s-1&&g.eq(i[A].style)&&(_=T)}_?(_.to=h,_.step=s):i.push({style:g,from:Math.max(u,e),to:h,step:s})}}}),i.forEach(a=>n.step(new ro(a.from,a.to,a.style)))}function mS(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],u=e+1;for(let c=0;c<s.childCount;c++){let h=s.child(c),p=u+h.nodeSize,g=r.matchType(h.type);if(!g)a.push(new Kn(u,p,ke.empty));else{r=g;for(let _=0;_<h.marks.length;_++)t.allowsMarkType(h.marks[_].type)||n.step(new ro(u,p,h.marks[_]));if(i&&h.isText&&t.whitespace!="pre"){let _,A=/\r?\n|\r/g,T;for(;_=A.exec(h.text);)T||(T=new ke(ye.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),a.push(new Kn(u+_.index,u+_.index+_[0].length,T))}}u=p}if(!r.validEnd){let c=r.fillBefore(ye.empty,!0);n.replace(u,u,new ke(c,0,0))}for(let c=a.length-1;c>=0;c--)n.step(a[c])}function lK(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Ff(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,a,t))return r;if(r==0||i.type.spec.isolating||!lK(i,s,a))break}return null}function uK(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),u=i.after(s+1),c=a,h=u,p=ye.empty,g=0;for(let T=s,E=!1;T>t;T--)E||r.index(T)>0?(E=!0,p=ye.from(r.node(T).copy(p)),g++):c--;let _=ye.empty,A=0;for(let T=s,E=!1;T>t;T--)E||i.after(T+1)<i.end(T)?(E=!0,_=ye.from(i.node(T).copy(_)),A++):h++;n.step(new Wn(c,h,a,u,new ke(p.append(_),g,A),p.size-g,!0))}function gS(n,e,t=null,r=n){let i=cK(n,e),s=i&&fK(r,e);return s?i.map(gI).concat({type:e,attrs:t}).concat(s.map(gI)):null}function gI(n){return{type:n,attrs:null}}function cK(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function fK(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let h=r;c&&h<i;h++)c=c.matchType(t.child(h).type);return!c||!c.validEnd?null:a}function hK(n,e,t){let r=ye.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ye.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new Wn(i,s,i,s,new ke(r,0,0),t.length,!0))}function dK(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let c=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,c)&&pK(n.doc,n.mapping.slice(s).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let A=r.whitespace=="pre",T=!!r.contentMatch.matchType(r.schema.linebreakReplacement);A&&!T?h=!1:!A&&T&&(h=!0)}h===!1&&eL(n,a,u,s),mS(n,n.mapping.slice(s).map(u,1),r,void 0,h===null);let p=n.mapping.slice(s),g=p.map(u,1),_=p.map(u+a.nodeSize,1);return n.step(new Wn(g,_,g+1,_-1,new ke(ye.from(r.create(c,null,a.marks)),0,0),1,!0)),h===!0&&Z2(n,a,u,s),!1}})}function Z2(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(i.text);){let c=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function eL(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function pK(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function mK(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Wn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ke(ye.from(a),0,0),1,!0))}function Xo(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=t-2;h>s;h--,p--){let g=i.node(h),_=i.index(h);if(g.type.spec.isolating)return!1;let A=g.content.cutByIndex(_,g.childCount),T=r&&r[p+1];T&&(A=A.replaceChild(0,T.type.create(T.attrs)));let E=r&&r[p]||g;if(!g.canReplace(_+1,g.childCount)||!E.type.validContent(A))return!1}let u=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(u,u,c?c.type:i.node(s+1).type)}function gK(n,e,t=1,r){let i=n.doc.resolve(e),s=ye.empty,a=ye.empty;for(let u=i.depth,c=i.depth-t,h=t-1;u>c;u--,h--){s=ye.from(i.node(u).copy(s));let p=r&&r[h];a=ye.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new Kn(e,e,new ke(s.append(a),t,t),!0))}function Il(n,e){let t=n.resolve(e),r=t.index();return tL(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function yK(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function tL(n,e){return!!(n&&e&&!n.isLeaf&&yK(n,e))}function U0(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,a,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),a=r.node(i+1)),s&&!s.isTextblock&&tL(s,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function _K(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);eL(n,p.node(),p.before(),u)}a.inlineContent&&mS(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let c=n.mapping.slice(u),h=c.map(e-t);if(n.step(new Kn(h,c.map(e+t,-1),ke.empty,!0)),r===!0){let p=n.doc.resolve(h);Z2(n,p.node(),p.before(),n.steps.length)}return n}function vK(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function nL(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),h=r.node(a),p=!1;if(s==1)p=h.canReplace(c,c,i);else{let g=h.contentMatchAt(c).findWrapping(i.firstChild.type);p=g&&h.canReplaceWith(c,c,g[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function B0(n,e,t=e,r=ke.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return rL(i,s,r)?new Kn(e,t,r):new AK(i,s,r).fit()}function rL(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class AK{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ye.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ye.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,u=i.depth;for(;a&&u&&s.childCount==1;)s=s.firstChild.content,a--,u--;let c=new ke(s,a,u);return e>-1?new Wn(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new Kn(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=VA(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:c,match:h}=this.frontier[u],p,g=null;if(t==1&&(a?h.matchType(a.type)||(g=h.fillBefore(ye.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:g};if(t==2&&a&&(p=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&h.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=VA(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ke(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=VA(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new ke(hd(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new ke(hd(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let E=0;E<s.length;E++)this.openFrontierNode(s[E]);let a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,h=0,p=[],{match:g,type:_}=this.frontier[t];if(i){for(let E=0;E<i.childCount;E++)p.push(i.child(E));g=g.matchFragment(i)}let A=u.size+e-(a.content.size-a.openEnd);for(;h<u.childCount;){let E=u.child(h),S=g.matchType(E.type);if(!S)break;h++,(h>1||c==0||E.content.size)&&(g=S,p.push(iL(E.mark(_.allowedMarks(E.marks)),h==1?c:0,h==u.childCount?A:-1)))}let T=h==u.childCount;T||(A=-1),this.placed=dd(this.placed,t,ye.from(p)),this.frontier[t].match=g,T&&A<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,S=u;E<A;E++){let x=S.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),S=x.content}this.unplaced=T?e==0?ke.empty:new ke(hd(a.content,e-1,1),e-1,A<0?a.openEnd:e-1):new ke(hd(a.content,e,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!UA(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=UA(e,t,i,r,s);if(a){for(let u=t-1;u>=0;u--){let{match:c,type:h}=this.frontier[u],p=UA(e,u,h,c,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=dd(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=dd(this.placed,this.depth,ye.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ye.empty,!0);t.childCount&&(this.placed=dd(this.placed,this.frontier.length,t))}}function hd(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(hd(n.firstChild.content,e-1,t)))}function dd(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(dd(n.lastChild.content,e-1,t)))}function VA(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function iL(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,iL(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ye.empty,!0)))),n.copy(r)}function UA(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,a);return u&&!TK(t,s.content,a)?u:null}function TK(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function EK(n){return n.spec.defining||n.spec.definingForContent}function bK(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(rL(i,s,r))return n.step(new Kn(e,t,r));let a=oL(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let _=i.depth,A=i.pos-1;_>0;_--,A--){let T=i.node(_).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;a.indexOf(_)>-1?u=_:i.before(_)==A&&a.splice(1,0,-_)}let c=a.indexOf(u),h=[],p=r.openStart;for(let _=r.content,A=0;;A++){let T=_.firstChild;if(h.push(T),A==r.openStart)break;_=T.content}for(let _=p-1;_>=0;_--){let A=h[_],T=EK(A.type);if(T&&!A.sameMarkup(i.node(Math.abs(u)-1)))p=_;else if(T||!A.type.isTextblock)break}for(let _=r.openStart;_>=0;_--){let A=(_+p+1)%(r.openStart+1),T=h[A];if(T)for(let E=0;E<a.length;E++){let S=a[(E+c)%a.length],x=!0;S<0&&(x=!1,S=-S);let P=i.node(S-1),z=i.index(S-1);if(P.canReplaceWith(z,z,T.type,T.marks))return n.replace(i.before(S),x?s.after(S):t,new ke(sL(r.content,0,r.openStart,A),A,r.openEnd))}}let g=n.steps.length;for(let _=a.length-1;_>=0&&(n.replace(e,t,r),!(n.steps.length>g));_--){let A=a[_];A<0||(e=i.before(A),t=s.after(A))}}function sL(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(sL(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(ye.empty,!0))}return n}function SK(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=vK(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new ke(ye.from(r),0,0))}function wK(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=oL(r,i);for(let a=0;a<s.length;a++){let u=s[a],c=a==s.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function oL(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class af extends Or{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Nn.fromReplace(e,this.pos,this.pos+1,new ke(ye.from(i),0,t.isLeaf?0:1))}getMap(){return ki.empty}invert(e){return new af(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new af(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new af(t.pos,t.attr,t.value)}}Or.jsonID("attr",af);class tp extends Or{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Nn.ok(r)}getMap(){return ki.empty}invert(e){return new tp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new tp(t.attr,t.value)}}Or.jsonID("docAttr",tp);let Rf=class extends Error{};Rf=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Rf.prototype=Object.create(Error.prototype);Rf.prototype.constructor=Rf;Rf.prototype.name="TransformError";class aL{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ep}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Rf(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=ke.empty){let i=B0(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new ke(ye.from(r),0,0))}delete(e,t){return this.replace(e,t,ke.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return bK(this,e,t,r),this}replaceRangeWith(e,t,r){return SK(this,e,t,r),this}deleteRange(e,t){return wK(this,e,t),this}lift(e,t){return uK(this,e,t),this}join(e,t=1){return _K(this,e,t),this}wrap(e,t){return hK(this,e,t),this}setBlockType(e,t=e,r,i=null){return dK(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return mK(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new af(e,t,r)),this}setDocAttribute(e,t){return this.step(new tp(e,t)),this}addNodeMark(e,t){return this.step(new Ja(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof qt)t.isInSet(r.marks)&&this.step(new Fu(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new Fu(e,s)),i=s.removeFromSet(i);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return gK(this,e,t,r),this}addMark(e,t,r){return oK(this,e,t,r),this}removeMark(e,t,r){return aK(this,e,t,r),this}clearIncompatible(e,t,r){return mS(this,e,t,r),this}}const BA=Object.create(null);class rt{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new CK(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ke.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:c,$to:h}=a[u],p=e.mapping.slice(s);e.replaceRange(p.map(c.pos),p.map(h.pos),u?ke.empty:t),u==0&&vI(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s],c=e.mapping.slice(r),h=c.map(a.pos),p=c.map(u.pos);s?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),vI(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Je(e):$c(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?$c(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):$c(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Li(e.node(0))}static atStart(e){return $c(e,e,0,0,1)||new Li(e)}static atEnd(e){return $c(e,e,e.content.size,e.childCount,-1)||new Li(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=BA[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in BA)throw new RangeError("Duplicate use of selection JSON ID "+e);return BA[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Je.between(this.$anchor,this.$head).getBookmark()}}rt.prototype.visible=!0;class CK{constructor(e,t){this.$from=e,this.$to=t}}let yI=!1;function _I(n){!yI&&!n.parent.inlineContent&&(yI=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Je extends rt{constructor(e,t=e){_I(e),_I(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return rt.near(r);let i=e.resolve(t.map(this.anchor));return new Je(i.parent.inlineContent?i:r,r)}replace(e,t=ke.empty){if(super.replace(e,t),t==ke.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new z0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Je(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=rt.findFrom(t,r,!0)||rt.findFrom(t,-r,!0);if(s)t=s.$head;else return rt.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(rt.findFrom(e,-r,!0)||rt.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Je(e,t)}}rt.jsonID("text",Je);class z0{constructor(e,t){this.anchor=e,this.head=t}map(e){return new z0(e.map(this.anchor),e.map(this.head))}resolve(e){return Je.between(e.resolve(this.anchor),e.resolve(this.head))}}class qe extends rt{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?rt.near(s):new qe(s)}content(){return new ke(ye.from(this.node),0,0)}eq(e){return e instanceof qe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new yS(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new qe(e.resolve(t.anchor))}static create(e,t){return new qe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}qe.prototype.visible=!1;rt.jsonID("node",qe);class yS{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new z0(r,r):new yS(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&qe.isSelectable(r)?new qe(t):rt.near(t)}}class Li extends rt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ke.empty){if(t==ke.empty){e.delete(0,e.doc.content.size);let r=rt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Li(e)}map(e){return new Li(e)}eq(e){return e instanceof Li}getBookmark(){return RK}}rt.jsonID("all",Li);const RK={map(){return this},resolve(n){return new Li(n)}};function $c(n,e,t,r,i,s=!1){if(e.inlineContent)return Je.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!s&&qe.isSelectable(u))return qe.create(n,t-(i<0?u.nodeSize:0))}else{let c=$c(n,u,t+i,i<0?u.childCount:0,i,s);if(c)return c}t+=u.nodeSize*i}return null}function vI(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Kn||i instanceof Wn))return;let s=n.mapping.maps[r],a;s.forEach((u,c,h,p)=>{a==null&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const AI=1,TI=2,EI=4;class xK extends aL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|AI)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&AI)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=TI,this}ensureMarks(e){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&TI)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||qt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(rt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=EI,this}get scrolledIntoView(){return(this.updated&EI)>0}}function bI(n,e){return!e||!n?n:n.bind(e)}class pd{constructor(e,t,r){this.name=e,this.init=bI(t.init,r),this.apply=bI(t.apply,r)}}const kK=[new pd("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new pd("selection",{init(n,e){return n.selection||rt.atStart(e.doc)},apply(n){return n.selection}}),new pd("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new pd("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class zA{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=kK.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new pd(r.key,r.spec.state,r))})}}class Qc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let c=i?i[a].n:0,h=i?i[a].state:this,p=c<t.length&&u.spec.appendTransaction.call(u,c?t.slice(c):t,h,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new xK(this)}static create(e){let t=new zA(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Qc(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new zA(this.schema,e.plugins),r=t.fields,i=new Qc(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new zA(e.schema,e.plugins),s=new Qc(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=ll.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=rt.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],h=c.spec.state;if(c.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){s[a.name]=h.fromJSON.call(c,e,t[u],s);return}}s[a.name]=a.init(e,s)}}),s}}function lL(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=lL(i,e,{})),t[r]=i}return t}class Zn{constructor(e){this.spec=e,this.props={},e.props&&lL(e.props,this,this.props),this.key=e.key?e.key.key:uL("plugin")}getState(e){return e[this.key]}}const jA=Object.create(null);function uL(n){return n in jA?n+"$"+ ++jA[n]:(jA[n]=0,n+"$")}class hi{constructor(e="key"){this.key=uL(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const fr=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},xf=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let dE=null;const qo=function(n,e,t){let r=dE||(dE=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},IK=function(){dE=null},Hu=function(n,e,t,r){return t&&(SI(n,e,t,r,-1)||SI(n,e,t,r,1))},NK=/^(img|br|input|textarea|hr)$/i;function SI(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ss(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Sp(n)||NK.test(n.nodeName)||n.contentEditable=="false")return!1;e=fr(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?ss(n):0}else return!1}}function ss(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function OK(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=ss(n)}else if(n.parentNode&&!Sp(n))e=fr(n),n=n.parentNode;else return null}}function MK(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Sp(n))e=fr(n)+1,n=n.parentNode;else return null}}function DK(n,e,t){for(let r=e==0,i=e==ss(n);r||i;){if(n==t)return!0;let s=fr(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==ss(n)}}function Sp(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const j0=function(n){return n.focusNode&&Hu(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function du(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function PK(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function LK(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(ss(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(ss(r.startContainer),r.startOffset)}}}const mo=typeof navigator<"u"?navigator:null,wI=typeof document<"u"?document:null,Nl=mo&&mo.userAgent||"",pE=/Edge\/(\d+)/.exec(Nl),cL=/MSIE \d/.exec(Nl),mE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Nl),ui=!!(cL||mE||pE),cl=cL?document.documentMode:mE?+mE[1]:pE?+pE[1]:0,xs=!ui&&/gecko\/(\d+)/i.test(Nl);xs&&+(/Firefox\/(\d+)/.exec(Nl)||[0,0])[1];const gE=!ui&&/Chrome\/(\d+)/.exec(Nl),xr=!!gE,fL=gE?+gE[1]:0,qr=!ui&&!!mo&&/Apple Computer/.test(mo.vendor),kf=qr&&(/Mobile\/\w+/.test(Nl)||!!mo&&mo.maxTouchPoints>2),is=kf||(mo?/Mac/.test(mo.platform):!1),VK=mo?/Win/.test(mo.platform):!1,Yo=/Android \d/.test(Nl),wp=!!wI&&"webkitFontSmoothing"in wI.documentElement.style,UK=wp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function BK(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Bo(n,e){return typeof n=="number"?n:n[e]}function zK(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function CI(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=xf(a);continue}let u=a,c=u==s.body,h=c?BK(s):zK(u),p=0,g=0;if(e.top<h.top+Bo(r,"top")?g=-(h.top-e.top+Bo(i,"top")):e.bottom>h.bottom-Bo(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+Bo(i,"top")-h.top:e.bottom-h.bottom+Bo(i,"bottom")),e.left<h.left+Bo(r,"left")?p=-(h.left-e.left+Bo(i,"left")):e.right>h.right-Bo(r,"right")&&(p=e.right-h.right+Bo(i,"right")),p||g)if(c)s.defaultView.scrollBy(p,g);else{let A=u.scrollLeft,T=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let E=u.scrollLeft-A,S=u.scrollTop-T;e={left:e.left-E,top:e.top-S,right:e.right-E,bottom:e.bottom-S}}let _=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(_))break;a=_=="absolute"?a.offsetParent:xf(a)}}function jK(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(s,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=t-20){r=u,i=c.top;break}}return{refDOM:r,refTop:i,stack:hL(n.dom)}}function hL(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=xf(r));return e}function FK({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;dL(t,r==0?0:r-e)}function dL(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Uc=null;function HK(n){if(n.setActive)return n.setActive();if(Uc)return n.focus(Uc);let e=hL(n);n.focus(Uc==null?{get preventScroll(){return Uc={preventScroll:!0},!0}}:void 0),Uc||(Uc=!1,dL(e,0))}function pL(n,e){let t,r=2e8,i,s=0,a=e.top,u=e.top,c,h;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let _;if(p.nodeType==1)_=p.getClientRects();else if(p.nodeType==3)_=qo(p).getClientRects();else continue;for(let A=0;A<_.length;A++){let T=_[A];if(T.top<=a&&T.bottom>=u){a=Math.max(T.bottom,a),u=Math.min(T.top,u);let E=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(E<r){t=p,r=E,i=E&&t.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,p.nodeType==1&&E&&(s=g+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!c&&T.left<=e.left&&T.right>=e.left&&(c=p,h={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!t&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(s=g+1)}}return!t&&c&&(t=c,i=h,r=0),t&&t.nodeType==3?qK(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:pL(t,i)}function qK(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=La(r,1);if(s.top!=s.bottom&&_S(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function _S(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function $K(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function GK(n,e,t){let{node:r,offset:i}=pL(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function KK(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let u=n.docView.nearestDesc(s,!0),c;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((c=u.dom.getBoundingClientRect()).width||c.height)&&(u.node.isBlock&&u.parent&&(!a&&c.left>r.left||c.top>r.top?i=u.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(i=u.posAfter),a=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function mL(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let u=a.getClientRects();for(let c=0;c<u.length;c++){let h=u[c];if(_S(e,h))return mL(a,e,h)}}if((s=(s+1)%r)==i)break}return n}function WK(n,e){let t=n.dom.ownerDocument,r,i=0,s=LK(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let h=n.dom.getBoundingClientRect();if(!_S(e,h)||(a=mL(n.dom,e,h),!a))return null}if(qr)for(let h=a;r&&h;h=xf(h))h.draggable&&(r=void 0);if(a=$K(a,e),r){if(xs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let h;wp&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=KK(n,r,i,e))}u==null&&(u=GK(n,a,e));let c=n.docView.nearestDesc(a,!0);return{pos:u,inside:c?c.posAtStart-c.border:-1}}function RI(n){return n.top<n.bottom||n.left<n.right}function La(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(RI(r))return r}return Array.prototype.find.call(t,RI)||n.getBoundingClientRect()}const YK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function gL(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=wp||xs;if(r.nodeType==3)if(a&&(YK.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let c=La(qo(r,i,i),t);if(xs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=La(qo(r,i-1,i-1),-1);if(h.top==c.top){let p=La(qo(r,i,i+1),-1);if(p.top!=c.top)return ed(p,p.left<h.left)}}return c}else{let c=i,h=i,p=t<0?1:-1;return t<0&&!i?(h++,p=-1):t>=0&&i==r.nodeValue.length?(c--,p=1):t<0?c--:h++,ed(La(qo(r,c,h),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return FA(c.getBoundingClientRect(),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];if(c.nodeType==1)return FA(c.getBoundingClientRect(),!0)}return FA(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==ss(r))){let c=r.childNodes[i-1],h=c.nodeType==3?qo(c,ss(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(h)return ed(La(h,1),!1)}if(s==null&&i<ss(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let h=c?c.nodeType==3?qo(c,0,a?0:1):c.nodeType==1?c:null:null;if(h)return ed(La(h,-1),!0)}return ed(La(r.nodeType==3?qo(r):r,-t),t>=0)}function ed(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function FA(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function yL(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function QK(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return yL(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let a=gL(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=qo(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<c.length;h++){let p=c[h];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const XK=/[\u0590-\u08ac]/;function JK(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,u=n.domSelection();return u?!XK.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?s:a:yL(n,e,()=>{let{focusNode:c,focusOffset:h,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),_=u.caretBidiLevel;u.modify("move",t,"character");let A=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:T,focusOffset:E}=n.domSelectionRange(),S=T&&!A.contains(T.nodeType==1?T:T.parentNode)||c==T&&h==E;try{u.collapse(p,g),c&&(c!=p||h!=g)&&u.extend&&u.extend(c,h)}catch{}return _!=null&&(u.caretBidiLevel=_),S}):r.pos==r.start()||r.pos==r.end()}let xI=null,kI=null,II=!1;function ZK(n,e,t){return xI==e&&kI==t?II:(xI=e,kI=t,II=t=="up"||t=="down"?QK(n,e,t):JK(n,e,t))}const us=0,NI=1,Au=2,go=3;class Cp{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=us,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>fr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let u=i.children[a];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],u=s+a.size;if(u>e||a instanceof vL){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof _L&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?fr(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?fr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,u=0;;u++){let c=this.children[u],h=a+c.size;if(i==-1&&e<=h){let p=a+c.border;if(e>=p&&t<=h-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,p);e=a;for(let g=u;g>0;g--){let _=this.children[g-1];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(1)){i=fr(_.dom)+1;break}e-=_.size}i==-1&&(i=0)}if(i>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=fr(g.dom);break}t+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let A=0,T=0;A<this.children.length;A++){let E=this.children[A],S=T+E.size;if(s>T&&a<S)return E.setSelection(e-T-E.border,t-T-E.border,r,i);T=S}let u=this.domFromPos(e,e?-1:1),c=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((xs||qr)&&e==t){let{node:A,offset:T}=u;if(A.nodeType==3){if(g=!!(T&&A.nodeValue[T-1]==`
`),g&&T==A.nodeValue.length)for(let E=A,S;E;E=E.parentNode){if(S=E.nextSibling){S.nodeName=="BR"&&(u=c={node:S.parentNode,offset:fr(S)+1});break}let x=E.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let E=A.childNodes[T-1];g=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(xs&&p.focusNode&&p.focusNode!=c.node&&p.focusNode.nodeType==1){let A=p.focusNode.childNodes[p.focusOffset];A&&A.contentEditable=="false"&&(i=!0)}if(!(i||g&&qr)&&Hu(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Hu(c.node,c.offset,p.focusNode,p.focusOffset))return;let _=!1;if((h.extend||e==t)&&!g){h.collapse(u.node,u.offset);try{e!=t&&h.extend(c.node,c.offset),_=!0}catch{}}if(!_){if(e>t){let T=u;u=c,c=T}let A=document.createRange();A.setEnd(c.node,c.offset),A.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(A)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+s.border,c=a-s.border;if(e>=u&&t<=c){this.dirty=e==r||t==a?Au:NI,e==u&&t==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=go:s.markDirty(e-u,t-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Au:go}r=a}this.dirty=Au}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Au:NI;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class _L extends Cp{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==us&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class eW extends Cp{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class qu extends Cp{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=Ju.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new qu(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&go||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=go&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=us){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=us}}slice(e,t,r){let i=qu.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=_E(s,t,a,r)),e>0&&(s=_E(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class fl extends Cp{constructor(e,t,r,i,s,a,u,c,h){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,s,a){let u=s.nodeViews[t.type.name],c,h=u&&u(t,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),p=h&&h.dom,g=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=Ju.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let _=p;return p=EL(p,r,t),h?c=new tW(e,t,r,i,p,g||null,_,h,s,a+1):t.isText?new F0(e,t,r,i,p,_,s):new fl(e,t,r,i,p,g||null,_,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ye.empty)}return e}matchesNode(e,t,r){return this.dirty==us&&e.eq(this.node)&&Ty(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,u=s&&s.pos<0,c=new rW(this,a&&a.node,e);oW(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?c.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!g&&c.syncToMarks(p==this.node.childCount?qt.none:this.node.child(p).marks,r,e),c.placeWidget(h,e,i)},(h,p,g,_)=>{c.syncToMarks(h.marks,r,e);let A;c.findNodeMatch(h,p,g,_)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(A=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(h,p,g,A,e)||c.updateNextNode(h,p,g,e,_,i)||c.addNode(h,p,g,e,i),i+=h.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Au)&&(a&&this.protectLocalComposition(e,a),AL(this.contentDOM,this.children,e),kf&&aW(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Je)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,u=lW(this.node.content,a,r-t,i-t);return u<0?null:{node:s,pos:u,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new eW(this,s,t,i);e.input.compositionNodes.push(a),this.children=_E(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==go||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=us}updateOuterDeco(e){if(Ty(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=TL(this.dom,this.nodeDOM,yE(this.outerDeco,this.node,t),yE(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function OI(n,e,t,r,i){EL(r,e,n);let s=new fl(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class F0 extends fl{constructor(e,t,r,i,s,a,u){super(e,t,r,i,s,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==go||this.dirty!=us&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=us||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=us,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new F0(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=go)}get domAtom(){return!1}isText(e){return this.node.text==e}}class vL extends Cp{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==us&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class tW extends fl{constructor(e,t,r,i,s,a,u,c,h,p){super(e,t,r,i,s,a,u,h,p),this.spec=c}update(e,t,r,i){if(this.dirty==go)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function AL(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=MI(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof qu){let c=r?r.previousSibling:n.lastChild;AL(a.contentDOM,a.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=MI(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Rd=function(n){n&&(this.nodeName=n)};Rd.prototype=Object.create(null);const Tu=[new Rd];function yE(n,e,t){if(n.length==0)return Tu;let r=t?Tu[0]:new Rd,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new Rd(a.nodeName));for(let u in a){let c=a[u];c!=null&&(t&&i.length==1&&i.push(r=new Rd(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return i}function TL(n,e,t,r){if(t==Tu&&r==Tu)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],u=t[s];if(s){let c;u&&u.nodeName==a.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),u=Tu[0]),i=c}nW(i,u||Tu[0],a)}return i}function nW(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function EL(n,e,t){return TL(n,n,Tu,yE(e,t,n.nodeType!=1))}function Ty(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function MI(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class rW{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=iW(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=us,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let h=this.top.children[c];if(h.matchesMark(e[s])&&!this.isLocked(h.dom)){u=c;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let c=qu.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==go&&a.dom==a.contentDOM&&(a.dirty=Au),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let u=this.index;u<this.top.children.length;u++){let c=this.top.children[u];if(c instanceof fl){let h=this.preMatch.matched.get(c);if(h!=null&&h!=s)return!1;let p=c.dom,g,_=this.isLocked(p)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=go&&Ty(t,c.outerDeco));if(!_&&c.update(e,t,r,i))return this.destroyBetween(this.index,u),c.dom!=p&&(this.changed=!0),this.index++,!0;if(!_&&(g=this.recreateWrapper(c,e,t,r,i,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=Au,g.updateChildren(i,a+1),g.dirty=us),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Ty(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=fl.create(this.top,t,r,i,s,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let c of u.children)c.parent=u}return e.destroy(),u}addNode(e,t,r,i,s){let a=fl.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new _L(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof qu;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof F0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qr||xr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new vL(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function iW(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof qu)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=u.node;if(c){if(c!=n.child(i-1))break;--i,s.set(u,i),a.push(u)}}return{index:i,matched:s,matches:a.reverse()}}function sW(n,e){return n.type.side-e.type.side}function oW(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,i,e.forChild(s,p),h),s+=p.nodeSize}return}let a=0,u=[],c=null;for(let h=0;;){let p,g;for(;a<i.length&&i[a].to==s;){let S=i[a++];S.widget&&(p?(g||(g=[p])).push(S):p=S)}if(p)if(g){g.sort(sW);for(let S=0;S<g.length;S++)t(g[S],h,!!c)}else t(p,h,!!c);let _,A;if(c)A=-1,_=c,c=null;else if(h<n.childCount)A=h,_=n.child(h++);else break;for(let S=0;S<u.length;S++)u[S].to<=s&&u.splice(S--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)u.push(i[a++]);let T=s+_.nodeSize;if(_.isText){let S=T;a<i.length&&i[a].from<S&&(S=i[a].from);for(let x=0;x<u.length;x++)u[x].to<S&&(S=u[x].to);S<T&&(c=_.cut(S-s),_=_.cut(0,S-s),T=S,A=-1)}else for(;a<i.length&&i[a].to<T;)a++;let E=_.isInline&&!_.isLeaf?u.filter(S=>!S.inline):u.slice();r(_,E,e.forChild(s,_),A),s=T}}function aW(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function lW(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),u=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<n.childCount;){let h=n.child(i++);if(s+=h.nodeSize,!h.isText)break;c+=h.text}if(s>=t){if(s>=r&&c.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?c.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function _E(n,e,t,r,i){let s=[];for(let a=0,u=0;a<n.length;a++){let c=n[a],h=u,p=u+=c.size;h>=t||p<=e?s.push(c):(h<e&&s.push(c.slice(0,e-h,r)),i&&(s.push(i),i=void 0),p>t&&s.push(c.slice(t-h,c.size,r)))}return s}function vS(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),c,h;if(j0(t)){for(c=a;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&qe.isSelectable(g)&&i.parent&&!(g.isInline&&DK(t.focusNode,t.focusOffset,i.dom))){let _=i.posBefore;h=new qe(a==_?u:r.resolve(_))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=a,_=a;for(let A=0;A<t.rangeCount;A++){let T=t.getRangeAt(A);g=Math.min(g,n.docView.posFromDOM(T.startContainer,T.startOffset,1)),_=Math.max(_,n.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(g<0)return null;[c,a]=_==n.state.selection.anchor?[_,g]:[g,_],u=r.resolve(a)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let p=r.resolve(c);if(!h){let g=e=="pointer"||n.state.selection.head<u.pos&&!s?1:-1;h=AS(n,p,u,g)}return h}function bL(n){return n.editable?n.hasFocus():wL(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Jo(n,e=!1){let t=n.state.selection;if(SL(n,t),!!bL(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&xr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Hu(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)cW(n);else{let{anchor:r,head:i}=t,s,a;DI&&!(t instanceof Je)&&(t.$from.parent.inlineContent||(s=PI(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=PI(n,t.to))),n.docView.setSelection(r,i,n,e),DI&&(s&&LI(s),a&&LI(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&uW(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const DI=qr||xr&&fL<63;function PI(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(qr&&i&&i.contentEditable=="false")return HA(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return HA(i);if(s)return HA(s)}}function HA(n){return n.contentEditable="true",qr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function LI(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function uW(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!bL(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function cW(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,fr(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&ui&&cl<=11&&(r.disabled=!0,r.disabled=!1)}function SL(n,e){if(e instanceof qe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(VI(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else VI(n)}function VI(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function AS(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Je.between(e,t,r)}function UI(n){return n.editable&&!n.hasFocus()?!1:wL(n)}function wL(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function fW(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Hu(e.node,e.offset,t.anchorNode,t.anchorOffset)}function vE(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&rt.findFrom(s,e)}function Va(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function BI(n,e,t){let r=n.state.selection;if(r instanceof Je)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Va(n,new Je(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=vE(n.state,e);return i&&i instanceof qe?Va(n,i):!1}else if(!(is&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?qe.isSelectable(s)?Va(n,new qe(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):wp?Va(n,new Je(n.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof qe&&r.node.isInline)return Va(n,new Je(e>0?r.$to:r.$from));{let i=vE(n.state,e);return i?Va(n,i):!1}}}function Ey(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function xd(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Bc(n,e){return e<0?hW(n):dW(n)}function hW(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(xs&&t.nodeType==1&&r<Ey(t)&&xd(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(xd(u,-1))i=t,s=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(CL(t))break;{let u=t.previousSibling;for(;u&&xd(u,-1);)i=t.parentNode,s=fr(u),u=u.previousSibling;if(u)t=u,r=Ey(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?AE(n,t,r):i&&AE(n,i,s)}function dW(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Ey(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(xd(u,1))s=t,a=++r;else break}else{if(CL(t))break;{let u=t.nextSibling;for(;u&&xd(u,1);)s=u.parentNode,a=fr(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=Ey(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&AE(n,s,a)}function CL(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function pW(n,e){for(;n&&e==n.childNodes.length&&!Sp(n);)e=fr(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function mW(n,e){for(;n&&!e&&!Sp(n);)e=fr(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function AE(n,e,t){if(e.nodeType!=3){let s,a;(a=pW(e,t))?(e=a,t=0):(s=mW(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(j0(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Jo(n)},50)}function zI(n,e){let t=n.state.doc.resolve(e);if(!(xr||VK)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function jI(n,e,t){let r=n.state.selection;if(r instanceof Je&&!r.empty||t.indexOf("s")>-1||is&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=vE(n.state,e);if(a&&a instanceof qe)return Va(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,u=r instanceof Li?rt.near(a,e):rt.findFrom(a,e);return u?Va(n,u):!1}return!1}function FI(n,e){if(!(n.state.selection instanceof Je))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function HI(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function gW(n){if(!qr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;HI(n,r,"true"),setTimeout(()=>HI(n,r,"false"),20)}return!1}function yW(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function _W(n,e){let t=e.keyCode,r=yW(e);if(t==8||is&&t==72&&r=="c")return FI(n,-1)||Bc(n,-1);if(t==46&&!e.shiftKey||is&&t==68&&r=="c")return FI(n,1)||Bc(n,1);if(t==13||t==27)return!0;if(t==37||is&&t==66&&r=="c"){let i=t==37?zI(n,n.state.selection.from)=="ltr"?-1:1:-1;return BI(n,i,r)||Bc(n,i)}else if(t==39||is&&t==70&&r=="c"){let i=t==39?zI(n,n.state.selection.from)=="ltr"?1:-1:1;return BI(n,i,r)||Bc(n,i)}else{if(t==38||is&&t==80&&r=="c")return jI(n,-1,r)||Bc(n,-1);if(t==40||is&&t==78&&r=="c")return gW(n)||jI(n,1,r)||Bc(n,1);if(r==(is?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function TS(n,e){n.someProp("transformCopied",A=>{e=A(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let A=r.firstChild;t.push(A.type.name,A.attrs!=A.type.defaultAttrs?A.attrs:null),r=A.content}let a=n.someProp("clipboardSerializer")||Ju.fromSchema(n.state.schema),u=OL(),c=u.createElement("div");c.appendChild(a.serializeFragment(r,{document:u}));let h=c.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=NL[h.nodeName.toLowerCase()]);){for(let A=p.length-1;A>=0;A--){let T=u.createElement(p[A]);for(;c.firstChild;)T.appendChild(c.firstChild);c.appendChild(T),g++}h=c.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${s}${g?` -${g}`:""} ${JSON.stringify(t)}`);let _=n.someProp("clipboardTextSerializer",A=>A(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:_,slice:e}}function RL(n,e,t,r,i){let s=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let c=e&&(r||s||!t);if(c){if(n.someProp("transformPastedText",_=>{e=_(e,s||r,n)}),s)return e?new ke(ye.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ke.empty;let g=n.someProp("clipboardTextParser",_=>_(e,i,r,n));if(g)u=g;else{let _=i.marks(),{schema:A}=n.state,T=Ju.fromSchema(A);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let S=a.appendChild(document.createElement("p"));E&&S.appendChild(T.serializeNode(A.text(E,_)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),a=EW(t),wp&&bW(a);let h=a&&a.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let _=a.firstChild;for(;_&&_.nodeType!=1;)_=_.nextSibling;if(!_)break;a=_}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||ul.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||p),context:i,ruleFromNode(_){return _.nodeName=="BR"&&!_.nextSibling&&_.parentNode&&!vW.test(_.parentNode.nodeName)?{ignore:!0}:null}})),p)u=SW(qI(u,+p[1],+p[2]),p[4]);else if(u=ke.maxOpen(AW(u.content,i),!0),u.openStart||u.openEnd){let g=0,_=0;for(let A=u.content.firstChild;g<u.openStart&&!A.type.spec.isolating;g++,A=A.firstChild);for(let A=u.content.lastChild;_<u.openEnd&&!A.type.spec.isolating;_++,A=A.lastChild);u=qI(u,g,_)}return n.someProp("transformPasted",g=>{u=g(u,n)}),u}const vW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AW(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(u=>{if(!a)return;let c=i.findWrapping(u.type),h;if(!c)return a=null;if(h=a.length&&s.length&&kL(c,s,u,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=IL(a[a.length-1],s.length));let p=xL(u,c);a.push(p),i=i.matchType(p.type),s=c}}),a)return ye.from(a)}return n}function xL(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ye.from(n));return n}function kL(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=kL(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ye.from(xL(t,n,i+1))))}}function IL(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,IL(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ye.empty,!0);return n.copy(t.append(r))}function TE(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(s=0),i<r-1&&(u=TE(u,e,t,r,i+1,s)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(ye.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function qI(n,e,t){return e<n.openStart&&(n=new ke(TE(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ke(TE(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const NL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $I=null;function OL(){return $I||($I=document.implementation.createHTMLDocument("title"))}let qA=null;function TW(n){let e=window.trustedTypes;return e?(qA||(qA=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),qA.createHTML(n)):n}function EW(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=OL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&NL[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=TW(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function bW(n){let e=n.querySelectorAll(xr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function SW(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let c=t.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;i=ye.from(c.create(r[u+1],i)),s++,a++}return new ke(i,s,a)}const $r={},Gr={},wW={touchstart:!0,touchmove:!0};class CW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function RW(n){for(let e in $r){let t=$r[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{kW(n,r)&&!ES(n,r)&&(n.editable||!(r.type in Gr))&&t(n,r)},wW[e]?{passive:!0}:void 0)}qr&&n.dom.addEventListener("input",()=>null),EE(n)}function Za(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function xW(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function EE(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>ES(n,r))})}function ES(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function kW(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function IW(n,e){!ES(n,e)&&$r[e.type]&&(n.editable||!(e.type in Gr))&&$r[e.type](n,e)}Gr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!DL(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Yo&&xr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),kf&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,du(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||_W(n,t)?t.preventDefault():Za(n,"key")};Gr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Gr.keypress=(n,e)=>{let t=e;if(DL(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||is&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Je)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function H0(n){return{left:n.clientX,top:n.clientY}}function NW(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function bS(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,u=>a>s.depth?u(n,t,s.nodeAfter,s.before(a),i,!0):u(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function lf(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function OW(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&qe.isSelectable(r)?(lf(n,new qe(t)),!0):!1}function MW(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof qe&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let u=a>s.depth?s.nodeAfter:s.node(a);if(qe.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(lf(n,qe.create(n.state.doc,i)),!0):!1}function DW(n,e,t,r,i){return bS(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?MW(n,t):OW(n,t))}function PW(n,e,t,r){return bS(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function LW(n,e,t,r){return bS(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||VW(n,t,r)}function VW(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(lf(n,Je.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(a.inlineContent)lf(n,Je.create(r,u+1,u+1+a.content.size));else if(qe.isSelectable(a))lf(n,qe.create(r,u));else continue;return!0}}function SS(n){return by(n)}const ML=is?"metaKey":"ctrlKey";$r.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=SS(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&NW(t,n.input.lastClick)&&!t[ML]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let a=n.posAtCoords(H0(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new UW(n,a,t,!!r)):(s=="doubleClick"?PW:LW)(n,a.pos,a.inside,t)?t.preventDefault():Za(n,"pointer"))};class UW{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ML],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:h}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||h instanceof qe&&h.from<=a&&h.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&xs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Za(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Jo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(H0(e))),this.updateAllowDefault(e),this.allowDefault||!t?Za(this.view,"pointer"):DW(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qr&&this.mightDrag&&!this.mightDrag.node.isAtom||xr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(lf(this.view,rt.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Za(this.view,"pointer")}move(e){this.updateAllowDefault(e),Za(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}$r.touchstart=n=>{n.input.lastTouch=Date.now(),SS(n),Za(n,"pointer")};$r.touchmove=n=>{n.input.lastTouch=Date.now(),Za(n,"pointer")};$r.contextmenu=n=>SS(n);function DL(n,e){return n.composing?!0:qr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const BW=Yo?5e3:-1;Gr.compositionstart=Gr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Je&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),by(n,!0),n.markCursor=null;else if(by(n,!e.selection.empty),xs&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}PL(n,BW)};Gr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,PL(n,20))};function PL(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>by(n),e))}function LL(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=jW());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function zW(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=OK(e.focusNode,e.focusOffset),r=MK(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function jW(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function by(n,e=!1){if(!(Yo&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),LL(n),e||n.docView&&n.docView.dirty){let t=vS(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function FW(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const np=ui&&cl<15||kf&&UK<604;$r.copy=Gr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=np?null:t.clipboardData,a=r.content(),{dom:u,text:c}=TS(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",c)):FW(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function HW(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function qW(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?rp(n,r.value,null,i,e):rp(n,r.textContent,r.innerHTML,i,e)},50)}function rp(n,e,t,r,i){let s=RL(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,i,s||ke.empty)))return!0;if(!s)return!1;let a=HW(s),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function VL(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Gr.paste=(n,e)=>{let t=e;if(n.composing&&!Yo)return;let r=np?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&rp(n,VL(r),r.getData("text/html"),i,t)?t.preventDefault():qW(n,t)};class UL{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const $W=is?"altKey":"ctrlKey";function BL(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[$W]}$r.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(H0(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof qe?i.to-1:i.to))){if(r&&r.mightDrag)a=qe.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(a=qe.create(n.state.doc,g.posBefore))}}let u=(a||n.state.selection).content(),{dom:c,text:h,slice:p}=TS(n,u);(!t.dataTransfer.files.length||!xr||fL>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(np?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",np||t.dataTransfer.setData("text/plain",h),n.dragging=new UL(p,BL(n,t),a)};$r.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Gr.dragover=Gr.dragenter=(n,e)=>e.preventDefault();Gr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(H0(t));if(!i)return;let s=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",T=>{a=T(a,n)}):a=RL(n,VL(t.dataTransfer),np?null:t.dataTransfer.getData("text/html"),!1,s);let u=!!(r&&BL(n,t));if(n.someProp("handleDrop",T=>T(n,t,a||ke.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let c=a?nL(n.state.doc,s.pos,a):s.pos;c==null&&(c=s.pos);let h=n.state.tr;if(u){let{node:T}=r;T?T.replace(h):h.deleteSelection()}let p=h.mapping.map(c),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,_=h.doc;if(g?h.replaceRangeWith(p,p,a.content.firstChild):h.replaceRange(p,p,a),h.doc.eq(_))return;let A=h.doc.resolve(p);if(g&&qe.isSelectable(a.content.firstChild)&&A.nodeAfter&&A.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new qe(A));else{let T=h.mapping.map(c);h.mapping.maps[h.mapping.maps.length-1].forEach((E,S,x,P)=>T=P),h.setSelection(AS(n,A,h.doc.resolve(T)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};$r.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Jo(n)},20))};$r.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};$r.beforeinput=(n,e)=>{if(xr&&Yo&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,du(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Gr)$r[n]=Gr[n];function ip(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Sy{constructor(e,t){this.toDOM=e,this.spec=t||Nu,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Mi(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Sy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ip(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class hl{constructor(e,t){this.attrs=e,this.spec=t||Nu}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Mi(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof hl&&ip(this.attrs,e.attrs)&&ip(this.spec,e.spec)}static is(e){return e.type instanceof hl}destroy(){}}class wS{constructor(e,t){this.attrs=e,this.spec=t||Nu}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Mi(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof wS&&ip(this.attrs,e.attrs)&&ip(this.spec,e.spec)}destroy(){}}class Mi{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Mi(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Mi(e,e,new Sy(t,r))}static inline(e,t,r,i){return new Mi(e,t,new hl(r,i))}static node(e,t,r,i){return new Mi(e,t,new wS(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof hl}get widget(){return this.type instanceof Sy}}const Gc=[],Nu={};class In{constructor(e,t){this.local=e.length?e:Gc,this.children=t.length?t:Gc}static create(e,t){return t.length?wy(t,e,0,Nu):Er}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,s)}}map(e,t,r){return this==Er||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Nu)}mapInner(e,t,r,i,s){let a;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,i);c&&c.type.valid(t,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?GW(this.children,a||[],e,t,r,i,s):a?new In(a.sort(Ou),Gc):Er}add(e,t){return t.length?this==Er?In.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((u,c)=>{let h=c+r,p;if(p=jL(t,u,h)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(u,p,h+1):i.splice(s,0,c,c+u.nodeSize,wy(p,u,h+1,Nu)),s+=3}});let a=zL(s?FL(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new In(a.length?this.local.concat(a).sort(Ou):this.local,i||this.children)}remove(e){return e.length==0||this==Er?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,u=r[s]+t,c=r[s+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<c&&(e[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[s+2].removeInner(a,u+1);h!=Er?r[s+2]=h:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new In(i,r):Er}forChild(e,t){if(this==Er)return this;if(t.isLeaf)return In.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,a=s+t.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<a&&c.to>s&&c.type instanceof hl){let h=Math.max(s,c.from)-s,p=Math.min(a,c.to)-s;h<p&&(i||(i=[])).push(c.copy(h,p))}}if(i){let u=new In(i.sort(Ou),Gc);return r?new $a([u,r]):u}return r||Er}eq(e){if(this==e)return!0;if(!(e instanceof In)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return CS(this.localsInner(e))}localsInner(e){if(this==Er)return Gc;if(e.inlineContent||!this.local.some(hl.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof hl||t.push(this.local[r]);return t}forEachSet(e){e(this)}}In.empty=new In([],[]);In.removeOverlap=CS;const Er=In.empty;class $a{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Nu));return $a.from(r)}forChild(e,t){if(t.isLeaf)return In.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Er&&(s instanceof $a?r=r.concat(s.members):r.push(s))}return $a.from(r)}eq(e){if(!(e instanceof $a)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?CS(r?t:t.sort(Ou)):Gc}static from(e){switch(e.length){case 0:return Er;case 1:return e[0];default:return new $a(e.every(t=>t instanceof In)?e:e.reduce((t,r)=>t.concat(r instanceof In?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function GW(n,e,t,r,i,s,a){let u=n.slice();for(let h=0,p=s;h<t.maps.length;h++){let g=0;t.maps[h].forEach((_,A,T,E)=>{let S=E-T-(A-_);for(let x=0;x<u.length;x+=3){let P=u[x+1];if(P<0||_>P+p-g)continue;let z=u[x]+p-g;A>=z?u[x+1]=_<=z?-2:-1:_>=p&&S&&(u[x]+=S,u[x+1]+=S)}g+=S}),p=t.maps[h].map(p,-1)}let c=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){c=!0,u[h+1]=-1;continue}let p=t.map(n[h]+s),g=p-i;if(g<0||g>=r.content.size){c=!0;continue}let _=t.map(n[h+1]+s,-1),A=_-i,{index:T,offset:E}=r.content.findIndex(g),S=r.maybeChild(T);if(S&&E==g&&E+S.nodeSize==A){let x=u[h+2].mapInner(t,S,p+1,n[h]+s+1,a);x!=Er?(u[h]=g,u[h+1]=A,u[h+2]=x):(u[h+1]=-2,c=!0)}else c=!0}if(c){let h=KW(u,n,e,t,i,s,a),p=wy(h,r,0,a);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,_=0;g<p.children.length;g+=3){let A=p.children[g];for(;_<u.length&&u[_]<A;)_+=3;u.splice(_,0,p.children[g],p.children[g+1],p.children[g+2])}}return new In(e.sort(Ou),u)}function zL(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Mi(i.from+e,i.to+e,i.type))}return t}function KW(n,e,t,r,i,s,a){function u(c,h){for(let p=0;p<c.local.length;p++){let g=c.local[p].map(r,i,h);g?t.push(g):a.onRemove&&a.onRemove(c.local[p].spec)}for(let p=0;p<c.children.length;p+=3)u(c.children[p+2],c.children[p]+h+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&u(n[c+2],e[c]+s+1);return t}function jL(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function FL(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function wy(n,e,t,r){let i=[],s=!1;e.forEach((u,c)=>{let h=jL(n,u,c+t);if(h){s=!0;let p=wy(h,u,t+c+1,r);p!=Er&&i.push(c,c+u.nodeSize,p)}});let a=zL(s?FL(n):n,-t).sort(Ou);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new In(a,i):Er}function Ou(n,e){return n.from-e.from||n.to-e.to}function CS(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),GI(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),GI(e,i,r.copy(s.from,r.to)));break}}}return e}function GI(n,e,t){for(;e<n.length&&Ou(t,n[e])>0;)e++;n.splice(e,0,t)}function $A(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Er&&e.push(r)}),n.cursorWrapper&&e.push(In.create(n.state.doc,[n.cursorWrapper.deco])),$a.from(e)}const WW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},YW=ui&&cl<=11;class QW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class XW{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new QW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ui&&cl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),YW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,WW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(UI(this.view)){if(this.suppressingSelectionUpdates)return Jo(this.view);if(ui&&cl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Hu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=xf(s))t.add(s);for(let s=e.anchorNode;s;s=xf(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&UI(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,u=!1,c=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],c);g&&(s=s<0?g.from:Math.min(g.from,s),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(u=!0))}if(xs&&c.length){let p=c.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,_]=p;g.parentNode&&g.parentNode.parentNode==_.parentNode?_.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let _ of p){let A=_.parentNode;A&&A.nodeName=="LI"&&(!g||eY(e,g)!=A)&&_.remove()}}}let h=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&j0(r)&&(h=vS(e))&&h.eq(rt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Jo(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),JW(e)),this.handleDOMChange(s,a,u,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Jo(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ui&&cl<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:_}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(s=_)}let a=i&&i.parentNode==e.target?fr(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?fr(s):e.target.childNodes.length,h=r.localPosFromDOM(e.target,c,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let KI=new WeakMap,WI=!1;function JW(n){if(!KI.has(n)&&(KI.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=xs,WI)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),WI=!0}}function YI(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Hu(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function ZW(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return YI(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?YI(n,t):null}function eY(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function tY(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:u}=n.docView.parseRange(e,t),c=n.domSelectionRange(),h,p=c.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:c.anchorOffset}],j0(c)||h.push({node:c.focusNode,offset:c.focusOffset})),xr&&n.input.lastKeyCode===8)for(let S=s;S>i;S--){let x=r.childNodes[S-1],P=x.pmViewDesc;if(x.nodeName=="BR"&&!P){s=S;break}if(!P||P.size)break}let g=n.state.doc,_=n.someProp("domParser")||ul.fromSchema(n.state.schema),A=g.resolve(a),T=null,E=_.parse(r,{topNode:A.parent,topMatch:A.parent.contentMatchAt(A.index()),topOpen:!0,from:i,to:s,preserveWhitespace:A.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:nY,context:A});if(h&&h[0].pos!=null){let S=h[0].pos,x=h[1]&&h[1].pos;x==null&&(x=S),T={anchor:S+a,head:x+a}}return{doc:E,sel:T,from:a,to:u}}function nY(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(qr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||qr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const rY=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function iY(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let k=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,B=vS(n,k);if(B&&!n.state.selection.eq(B)){if(xr&&Yo&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",F=>F(n,du(13,"Enter"))))return;let U=n.state.tr.setSelection(B);k=="pointer"?U.setMeta("pointer",!0):k=="key"&&U.scrollIntoView(),s&&U.setMeta("composition",s),n.dispatch(U)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let c=n.state.selection,h=tY(n,e,t),p=n.state.doc,g=p.slice(h.from,h.to),_,A;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(_=n.state.selection.to,A="end"):(_=n.state.selection.from,A="start"),n.input.lastKeyCode=null;let T=aY(g.content,h.doc.content,h.from,_,A);if(T&&n.input.domChangeCount++,(kf&&n.input.lastIOSEnter>Date.now()-225||Yo)&&i.some(k=>k.nodeType==1&&!rY.test(k.nodeName))&&(!T||T.endA>=T.endB)&&n.someProp("handleKeyDown",k=>k(n,du(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!T)if(r&&c instanceof Je&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))T={start:c.from,endA:c.to,endB:c.to};else{if(h.sel){let k=QI(n,n.state.doc,h.sel);if(k&&!k.eq(n.state.selection)){let B=n.state.tr.setSelection(k);s&&B.setMeta("composition",s),n.dispatch(B)}}return}n.state.selection.from<n.state.selection.to&&T.start==T.endB&&n.state.selection instanceof Je&&(T.start>n.state.selection.from&&T.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?T.start=n.state.selection.from:T.endA<n.state.selection.to&&T.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(T.endB+=n.state.selection.to-T.endA,T.endA=n.state.selection.to)),ui&&cl<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>h.from&&h.doc.textBetween(T.start-h.from-1,T.start-h.from+1)==" "&&(T.start--,T.endA--,T.endB--);let E=h.doc.resolveNoCache(T.start-h.from),S=h.doc.resolveNoCache(T.endB-h.from),x=p.resolve(T.start),P=E.sameParent(S)&&E.parent.inlineContent&&x.end()>=T.endA,z;if((kf&&n.input.lastIOSEnter>Date.now()-225&&(!P||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!P&&E.pos<h.doc.content.size&&(!E.sameParent(S)||!E.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(E.pos,S.pos,"",""))&&(z=rt.findFrom(h.doc.resolve(E.pos+1),1,!0))&&z.head>E.pos)&&n.someProp("handleKeyDown",k=>k(n,du(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>T.start&&oY(p,T.start,T.endA,E,S)&&n.someProp("handleKeyDown",k=>k(n,du(8,"Backspace")))){Yo&&xr&&n.domObserver.suppressSelectionUpdates();return}xr&&T.endB==T.start&&(n.input.lastChromeDelete=Date.now()),Yo&&!P&&E.start()!=S.start()&&S.parentOffset==0&&E.depth==S.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==T.endA&&(T.endB-=2,S=h.doc.resolveNoCache(T.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(k){return k(n,du(13,"Enter"))})},20));let H=T.start,V=T.endA,D,O,I;if(P){if(E.pos==S.pos)ui&&cl<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Jo(n),20)),D=n.state.tr.delete(H,V),O=p.resolve(T.start).marksAcross(p.resolve(T.endA));else if(T.endA==T.endB&&(I=sY(E.parent.content.cut(E.parentOffset,S.parentOffset),x.parent.content.cut(x.parentOffset,T.endA-x.start()))))D=n.state.tr,I.type=="add"?D.addMark(H,V,I.mark):D.removeMark(H,V,I.mark);else if(E.parent.child(E.index()).isText&&E.index()==S.index()-(S.textOffset?0:1)){let k=E.parent.textBetween(E.parentOffset,S.parentOffset);if(n.someProp("handleTextInput",B=>B(n,H,V,k)))return;D=n.state.tr.insertText(k,H,V)}}if(D||(D=n.state.tr.replace(H,V,h.doc.slice(T.start-h.from,T.endB-h.from))),h.sel){let k=QI(n,D.doc,h.sel);k&&!(xr&&n.composing&&k.empty&&(T.start!=T.endB||n.input.lastChromeDelete<Date.now()-100)&&(k.head==H||k.head==D.mapping.map(V)-1)||ui&&k.empty&&k.head==H)&&D.setSelection(k)}O&&D.ensureMarks(O),s&&D.setMeta("composition",s),n.dispatch(D.scrollIntoView())}function QI(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:AS(n,e.resolve(t.anchor),e.resolve(t.head))}function sY(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,u,c;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],a="add",c=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&s.length==1)u=s[0],a="remove",c=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(c(e.child(p)));if(ye.from(h).eq(n))return{mark:u,type:a}}function oY(n,e,t,r,i){if(t-e<=i.pos-r.pos||GA(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&t==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(GA(s,!0,!0));return!a.parent.isTextblock||a.pos>t||GA(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function GA(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function aY(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(a,u));r-=a+c-s}if(a<s&&n.size<e.size){let c=r<=s&&r>=a?s-r:0;s-=c,s&&s<e.size&&XI(e.textBetween(s-1,s+1))&&(s+=c?1:-1),u=s+(u-a),a=s}else if(u<s){let c=r<=s&&r>=u?s-r:0;s-=c,s&&s<n.size&&XI(n.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-u),u=s}return{start:s,endA:a,endB:u}}function XI(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class lY{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new CW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(nN),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=eN(this),ZI(this),this.nodeViews=tN(this),this.docView=OI(this.state.doc,JI(this),$A(this),this.dom,this),this.domObserver=new XW(this,(r,i,s,a)=>iY(this,r,i,s,a)),this.domObserver.start(),RW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&EE(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(nN),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(LL(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let A=tN(this);cY(A,this.nodeViews)&&(this.nodeViews=A,s=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&EE(this),this.editable=eN(this),ZI(this);let c=$A(this),h=JI(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,h,c);(g||!e.selection.eq(i.selection))&&(a=!0);let _=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&jK(this);if(a){this.domObserver.stop();let A=g&&(ui||xr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&uY(i.selection,e.selection);if(g){let T=xr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=zW(this)),(s||!this.docView.update(e.doc,h,c,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=OI(e.doc,h,c,this.dom,this)),T&&!this.trackWrites&&(A=!0)}A||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&fW(this))?Jo(this,A):(SL(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():_&&FK(_)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof qe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&CI(this,t.getBoundingClientRect(),e)}else CI(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new UL(e.slice,e.move,i<0?void 0:qe.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let u=s[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(ui){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&HK(this.dom),Jo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return WK(this,e)}coordsAtPos(e,t=1){return gL(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return ZK(this,t||this.state,e)}pasteHTML(e,t){return rp(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return rp(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return TS(this,e)}destroy(){this.docView&&(xW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],$A(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,IK())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return IW(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?qr&&this.root.nodeType===11&&PK(this.dom.ownerDocument)==this.dom&&ZW(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function JI(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Mi.node(0,n.state.doc.content.size,e)]}function ZI(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Mi.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function eN(n){return!n.someProp("editable",e=>e(n.state)===!1)}function uY(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function tN(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function cY(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function nN(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var bl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fY=typeof navigator<"u"&&/Mac/.test(navigator.platform),hY=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var hr=0;hr<10;hr++)bl[48+hr]=bl[96+hr]=String(hr);for(var hr=1;hr<=24;hr++)bl[hr+111]="F"+hr;for(var hr=65;hr<=90;hr++)bl[hr]=String.fromCharCode(hr+32),Cy[hr]=String.fromCharCode(hr);for(var KA in bl)Cy.hasOwnProperty(KA)||(Cy[KA]=bl[KA]);function dY(n){var e=fY&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||hY&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Cy:bl)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const pY=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),mY=typeof navigator<"u"&&/Win/.test(navigator.platform);function gY(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))pY?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function yY(n){let e=Object.create(null);for(let t in n)e[gY(t)]=n[t];return e}function WA(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function _Y(n){return new Zn({props:{handleKeyDown:HL(n)}})}function HL(n){let e=yY(n);return function(t,r){let i=dY(r),s,a=e[WA(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[WA(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(mY&&r.ctrlKey&&r.altKey)&&(s=bl[r.keyCode])&&s!=i){let u=e[WA(s,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const RS=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function qL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const $L=(n,e,t)=>{let r=qL(n,t);if(!r)return!1;let i=xS(r);if(!i){let a=r.blockRange(),u=a&&Ff(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(eV(n,i,e,-1))return!0;if(r.parent.content.size==0&&(If(s,"end")||qe.isSelectable(s)))for(let a=r.depth;;a--){let u=B0(n.doc,r.before(a),r.after(a),ke.empty);if(u&&u.slice.size<u.to-u.from){if(e){let c=n.tr.step(u);c.setSelection(If(s,"end")?rt.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):qe.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},vY=(n,e,t)=>{let r=qL(n,t);if(!r)return!1;let i=xS(r);return i?GL(n,i,e):!1},AY=(n,e,t)=>{let r=WL(n,t);if(!r)return!1;let i=kS(r);return i?GL(n,i,e):!1};function GL(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=e.nodeAfter,u=a,c=e.pos+1;for(;!u.isTextblock;c++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=B0(n.doc,s,c,ke.empty);if(!h||h.from!=s||h instanceof Kn&&h.slice.size>=c-s)return!1;if(t){let p=n.tr.step(h);p.setSelection(Je.create(p.doc,s)),t(p.scrollIntoView())}return!0}function If(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const KL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=xS(r)}let a=s&&s.nodeBefore;return!a||!qe.isSelectable(a)?!1:(e&&e(n.tr.setSelection(qe.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function xS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function WL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const YL=(n,e,t)=>{let r=WL(n,t);if(!r)return!1;let i=kS(r);if(!i)return!1;let s=i.nodeAfter;if(eV(n,i,e,1))return!0;if(r.parent.content.size==0&&(If(s,"start")||qe.isSelectable(s))){let a=B0(n.doc,r.before(),r.after(),ke.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(If(s,"start")?rt.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):qe.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},QL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=kS(r)}let a=s&&s.nodeAfter;return!a||!qe.isSelectable(a)?!1:(e&&e(n.tr.setSelection(qe.create(n.doc,s.pos)).scrollIntoView()),!0)};function kS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const TY=(n,e)=>{let t=n.selection,r=t instanceof qe,i;if(r){if(t.node.isTextblock||!Il(n.doc,t.from))return!1;i=t.from}else if(i=U0(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(qe.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},EY=(n,e)=>{let t=n.selection,r;if(t instanceof qe){if(t.node.isTextblock||!Il(n.doc,t.to))return!1;r=t.to}else if(r=U0(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},bY=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Ff(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},XL=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function IS(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const SY=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=IS(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let u=t.after(),c=n.tr.replaceWith(u,u,a.createAndFill());c.setSelection(rt.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},JL=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Li||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=IS(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,s.createAndFill());u.setSelection(Je.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},ZL=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Xo(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Ff(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function wY(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof qe&&e.selection.node.isBlock)return!r.parentOffset||!Xo(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,u,c=!1,h=!1;for(let A=r.depth;;A--)if(r.node(A).isBlock){c=r.end(A)==r.pos+(r.depth-A),h=r.start(A)==r.pos-(r.depth-A),u=IS(r.node(A-1).contentMatchAt(r.indexAfter(A-1))),s.unshift(c&&u?{type:u}:null),a=A;break}else{if(A==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof Je||e.selection instanceof Li)&&p.deleteSelection();let g=p.mapping.map(r.pos),_=Xo(p.doc,g,s.length,s);if(_||(s[0]=u?{type:u}:null,_=Xo(p.doc,g,s.length,s)),!_)return!1;if(p.split(g,s.length,s),!c&&h&&r.node(a).type!=u){let A=p.mapping.map(r.before(a)),T=p.doc.resolve(A);u&&r.node(a-1).canReplaceWith(T.index(),T.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const CY=wY(),RY=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(qe.create(n.doc,i))),!0)};function xY(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Il(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function eV(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,u,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&xY(n,e,t))return!0;let h=!c&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(a=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(a[0]||s.type).validEnd){if(t){let A=e.pos+s.nodeSize,T=ye.empty;for(let x=a.length-1;x>=0;x--)T=ye.from(a[x].create(null,T));T=ye.from(i.copy(T));let E=n.tr.step(new Wn(e.pos-1,A,e.pos,A,new ke(T,1,0),a.length,!0)),S=E.doc.resolve(A+2*a.length);S.nodeAfter&&S.nodeAfter.type==i.type&&Il(E.doc,S.pos)&&E.join(S.pos),t(E.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&c?null:rt.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),_=g&&Ff(g);if(_!=null&&_>=e.depth)return t&&t(n.tr.lift(g,_).scrollIntoView()),!0;if(h&&If(s,"start",!0)&&If(i,"end")){let A=i,T=[];for(;T.push(A),!A.isTextblock;)A=A.lastChild;let E=s,S=1;for(;!E.isTextblock;E=E.firstChild)S++;if(A.canReplace(A.childCount,A.childCount,E.content)){if(t){let x=ye.empty;for(let z=T.length-1;z>=0;z--)x=ye.from(T[z].copy(x));let P=n.tr.step(new Wn(e.pos-T.length,e.pos+s.nodeSize,e.pos+S,e.pos+s.nodeSize-S,new ke(x,T.length,0),0,!0));t(P.scrollIntoView())}return!0}}return!1}function tV(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Je.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const kY=tV(-1),IY=tV(1);function NY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),u=a&&gS(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function rN(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(a,u,(c,h)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)i=!0;else{let p=t.doc.resolve(h),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:c}}=t.selection.ranges[a];s.setBlockType(u,c,n,e)}r(s.scrollIntoView())}return!0}}function NS(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}NS(RS,$L,KL);NS(RS,YL,QL);NS(XL,JL,ZL,CY);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function OY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s);if(!a)return!1;let u=r?t.tr:null;return MY(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function MY(n,e,t,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);s=new vy(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new vy(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=gS(s,t,r,e);return u?(n&&DY(n,e,u,i,t),!0):!1}function DY(n,e,t,r,i){let s=ye.empty;for(let p=t.length-1;p>=0;p--)s=ye.from(t[p].type.create(t[p].attrs,s));n.step(new Wn(e.start-(r?2:0),e.end,e.start,e.end,new ke(s,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,c=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,_=!0;p<g;p++,_=!1)!_&&Xo(n.doc,c,u)&&(n.split(c,u),c+=2*u),c+=h.child(p).nodeSize;return n}function PY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?LY(e,t,n,s):VY(e,t,s):!0:!1}}function LY(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Wn(s-1,a,s,a,new ke(ye.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new vy(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=Ff(r);if(u==null)return!1;i.lift(r,u);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return Il(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function VY(n,e,t){let r=n.tr,i=t.parent;for(let A=t.end,T=t.endIndex-1,E=t.startIndex;T>E;T--)A-=i.child(T).nodeSize,r.delete(A-1,A+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,c=t.endIndex==i.childCount,h=s.node(-1),p=s.index(-1);if(!h.canReplace(p+(u?0:1),p+1,a.content.append(c?ye.empty:ye.from(i))))return!1;let g=s.pos,_=g+a.nodeSize;return r.step(new Wn(g-(u?1:0),_+(c?1:0),g+1,_-1,new ke((u?ye.empty:ye.from(i.copy(ye.empty))).append(c?ye.empty:ye.from(i.copy(ye.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function UY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let u=s.parent,c=u.child(a-1);if(c.type!=n)return!1;if(t){let h=c.lastChild&&c.lastChild.type==u.type,p=ye.from(h?n.create():null),g=new ke(ye.from(n.create(null,ye.from(u.type.create(null,p)))),h?3:1,0),_=s.start,A=s.end;t(e.tr.step(new Wn(_-(h?3:1),A,_,A,g,1,!0)).scrollIntoView())}return!0}}function q0(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class $0{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([u,c])=>[u,(...p)=>{const g=c(...p)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u=[],c=!!e,h=e||s.tr,p=()=>(!c&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(h),u.every(_=>_===!0)),g={...Object.fromEntries(Object.entries(r).map(([_,A])=>[_,(...E)=>{const S=this.buildProps(h,t),x=A(...E)(S);return u.push(x),g}])),run:p};return g}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,a=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([c,h])=>[c,(...p)=>h(...p)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u={tr:e,editor:i,view:a,state:q0({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,h])=>[c,(...p)=>h(...p)(u)]))}};return u}}class BY{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Pe(n,e,t){return n.config[e]===void 0&&n.parent?Pe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Pe(n.parent,e,t):null}):n.config[e]}function G0(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function nV(n){const e=[],{nodeExtensions:t,markExtensions:r}=G0(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage,extensions:i},c=Pe(a,"addGlobalAttributes",u);if(!c)return;c().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([_,A])=>{e.push({type:g,name:_,attribute:{...s,...A}})})})})}),i.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},c=Pe(a,"addAttributes",u);if(!c)return;const h=c();Object.entries(h).forEach(([p,g])=>{const _={...s,...g};typeof(_==null?void 0:_.default)=="function"&&(_.default=_.default()),_!=null&&_.isRequired&&(_==null?void 0:_.default)===void 0&&delete _.default,e.push({type:a.name,name:p,attribute:_})})}),e}function Xn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Jn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],h=u.filter(p=>!c.includes(p));r[i]=[...c,...h].join(" ")}else if(i==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;c.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());h.set(g,_)}),u.forEach(p=>{const[g,_]=p.split(":").map(A=>A.trim());h.set(g,_)}),r[i]=Array.from(h.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[i]=s}),r},{})}function bE(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Jn(t,r),{})}function rV(n){return typeof n=="function"}function at(n,e=void 0,...t){return rV(n)?e?n.bind(e)(...t):n(...t):n}function zY(n={}){return Object.keys(n).length===0&&n.constructor===Object}function jY(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function iN(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):jY(t.getAttribute(a.name));return u==null?s:{...s,[a.name]:u}},{});return{...r,...i}}}}function sN(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&zY(t)?!1:t!=null))}function FY(n,e){var t;const r=nV(n),{nodeExtensions:i,markExtensions:s}=G0(n),a=(t=i.find(h=>Pe(h,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(i.map(h=>{const p=r.filter(x=>x.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},_=n.reduce((x,P)=>{const z=Pe(P,"extendNodeSchema",g);return{...x,...z?z(h):{}}},{}),A=sN({..._,content:at(Pe(h,"content",g)),marks:at(Pe(h,"marks",g)),group:at(Pe(h,"group",g)),inline:at(Pe(h,"inline",g)),atom:at(Pe(h,"atom",g)),selectable:at(Pe(h,"selectable",g)),draggable:at(Pe(h,"draggable",g)),code:at(Pe(h,"code",g)),whitespace:at(Pe(h,"whitespace",g)),linebreakReplacement:at(Pe(h,"linebreakReplacement",g)),defining:at(Pe(h,"defining",g)),isolating:at(Pe(h,"isolating",g)),attrs:Object.fromEntries(p.map(x=>{var P;return[x.name,{default:(P=x==null?void 0:x.attribute)===null||P===void 0?void 0:P.default}]}))}),T=at(Pe(h,"parseHTML",g));T&&(A.parseDOM=T.map(x=>iN(x,p)));const E=Pe(h,"renderHTML",g);E&&(A.toDOM=x=>E({node:x,HTMLAttributes:bE(x,p)}));const S=Pe(h,"renderText",g);return S&&(A.toText=S),[h.name,A]})),c=Object.fromEntries(s.map(h=>{const p=r.filter(S=>S.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},_=n.reduce((S,x)=>{const P=Pe(x,"extendMarkSchema",g);return{...S,...P?P(h):{}}},{}),A=sN({..._,inclusive:at(Pe(h,"inclusive",g)),excludes:at(Pe(h,"excludes",g)),group:at(Pe(h,"group",g)),spanning:at(Pe(h,"spanning",g)),code:at(Pe(h,"code",g)),attrs:Object.fromEntries(p.map(S=>{var x;return[S.name,{default:(x=S==null?void 0:S.attribute)===null||x===void 0?void 0:x.default}]}))}),T=at(Pe(h,"parseHTML",g));T&&(A.parseDOM=T.map(S=>iN(S,p)));const E=Pe(h,"renderHTML",g);return E&&(A.toDOM=S=>E({mark:S,HTMLAttributes:bE(S,p)})),[h.name,A]}));return new $2({topNode:a,nodes:u,marks:c})}function YA(n,e){return e.nodes[n]||e.marks[n]||null}function oN(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function OS(n,e){const t=Ju.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const HY=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,u)=>{var c,h;const p=((h=(c=i.type.spec).toText)===null||h===void 0?void 0:h.call(c,{node:i,pos:s,parent:a,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-s))}),t};function MS(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class K0{constructor(e){this.find=e.find,this.handler=e.handler}}const qY=(n,e)=>{if(MS(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function rg(n){var e;const{editor:t,from:r,to:i,text:s,rules:a,plugin:u}=n,{view:c}=t;if(c.composing)return!1;const h=c.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(_=>_.type.spec.code))return!1;let p=!1;const g=HY(h)+s;return a.forEach(_=>{if(p)return;const A=qY(g,_.find);if(!A)return;const T=c.state.tr,E=q0({state:c.state,transaction:T}),S={from:r-(A[0].length-s.length),to:i},{commands:x,chain:P,can:z}=new $0({editor:t,state:E});_.handler({state:E,range:S,match:A,commands:x,chain:P,can:z})===null||!T.steps.length||(T.setMeta(u,{transform:T,from:r,to:i,text:s}),c.dispatch(T),p=!0)}),p}function $Y(n){const{editor:e,rules:t}=n,r=new Zn({state:{init(){return null},apply(i,s,a){const u=i.getMeta(r);if(u)return u;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:p}=c;typeof p=="string"?p=p:p=OS(ye.from(p),a.schema);const{from:g}=c,_=g+p.length;rg({editor:e,from:g,to:_,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,u){return rg({editor:e,from:s,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&rg({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?rg({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function GY(n){return Object.prototype.toString.call(n).slice(8,-1)}function ig(n){return GY(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function W0(n,e){const t={...n};return ig(n)&&ig(e)&&Object.keys(e).forEach(r=>{ig(e[r])&&ig(n[r])?t[r]=W0(n[r],e[r]):t[r]=e[r]}),t}class yo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(Pe(this,"addOptions",{name:this.name}))),this.storage=at(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yo(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>W0(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new yo(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(Pe(t,"addOptions",{name:t.name})),t.storage=at(Pe(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const c=a.find(h=>(h==null?void 0:h.type.name)===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function KY(n){return typeof n=="number"}class WY{constructor(e){this.find=e.find,this.handler=e.handler}}const YY=(n,e,t)=>{if(MS(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function QY(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:a,dropEvent:u}=n,{commands:c,chain:h,can:p}=new $0({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,i,(A,T)=>{if(!A.isTextblock||A.type.spec.code)return;const E=Math.max(r,T),S=Math.min(i,T+A.content.size),x=A.textBetween(E-T,S-T,void 0,"");YY(x,s.find,a).forEach(z=>{if(z.index===void 0)return;const H=E+z.index+1,V=H+z[0].length,D={from:t.tr.mapping.map(H),to:t.tr.mapping.map(V)},O=s.handler({state:t,range:D,match:z,commands:c,chain:h,can:p,pasteEvent:a,dropEvent:u});g.push(O)})}),g.every(A=>A!==null)}let sg=null;const XY=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function JY(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const c=({state:p,from:g,to:_,rule:A,pasteEvt:T})=>{const E=p.tr,S=q0({state:p,transaction:E});if(!(!QY({editor:e,state:S,from:Math.max(g-1,0),to:_.b-1,rule:A,pasteEvent:T,dropEvent:u})||!E.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(p=>new Zn({view(g){const _=T=>{var E;r=!((E=g.dom.parentElement)===null||E===void 0)&&E.contains(T.target)?g.dom.parentElement:null,r&&(sg=e)},A=()=>{sg&&(sg=null)};return window.addEventListener("dragstart",_),window.addEventListener("dragend",A),{destroy(){window.removeEventListener("dragstart",_),window.removeEventListener("dragend",A)}}},props:{handleDOMEvents:{drop:(g,_)=>{if(s=r===g.dom.parentElement,u=_,!s){const A=sg;A&&setTimeout(()=>{const T=A.state.selection;T&&A.commands.deleteRange({from:T.from,to:T.to})},10)}return!1},paste:(g,_)=>{var A;const T=(A=_.clipboardData)===null||A===void 0?void 0:A.getData("text/html");return a=_,i=!!(T!=null&&T.includes("data-pm-slice")),!1}}},appendTransaction:(g,_,A)=>{const T=g[0],E=T.getMeta("uiEvent")==="paste"&&!i,S=T.getMeta("uiEvent")==="drop"&&!s,x=T.getMeta("applyPasteRules"),P=!!x;if(!E&&!S&&!P)return;if(P){let{text:V}=x;typeof V=="string"?V=V:V=OS(ye.from(V),A.schema);const{from:D}=x,O=D+V.length,I=XY(V);return c({rule:p,state:A,from:D,to:{b:O},pasteEvt:I})}const z=_.doc.content.findDiffStart(A.doc.content),H=_.doc.content.findDiffEnd(A.doc.content);if(!(!KY(z)||!H||z===H.b))return c({rule:p,state:A,from:z,to:H,pasteEvt:a})}}))}function ZY(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Xc{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Xc.resolve(e),this.schema=FY(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Xc.sort(Xc.flatten(e)),r=ZY(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=Pe(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=Pe(r,"priority")||100,a=Pe(i,"priority")||100;return s>a?-1:s<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:YA(t.name,this.schema)},i=Pe(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Xc.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(a=>{const u={name:a.name,options:a.options,storage:a.storage,editor:e,type:YA(a.name,this.schema)},c=[],h=Pe(a,"addKeyboardShortcuts",u);let p={};if(a.type==="mark"&&Pe(a,"exitable",u)&&(p.ArrowRight=()=>yo.handleExit({editor:e,mark:a})),h){const E=Object.fromEntries(Object.entries(h()).map(([S,x])=>[S,()=>x({editor:e})]));p={...p,...E}}const g=_Y(p);c.push(g);const _=Pe(a,"addInputRules",u);oN(a,e.options.enableInputRules)&&_&&r.push(..._());const A=Pe(a,"addPasteRules",u);oN(a,e.options.enablePasteRules)&&A&&i.push(...A());const T=Pe(a,"addProseMirrorPlugins",u);if(T){const E=T();c.push(...E)}return c}).flat();return[$Y({editor:e,rules:r}),...JY({editor:e,rules:i}),...s]}get attributes(){return nV(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=G0(this.extensions);return Object.fromEntries(t.filter(r=>!!Pe(r,"addNodeView")).map(r=>{const i=this.attributes.filter(c=>c.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Xn(r.name,this.schema)},a=Pe(r,"addNodeView",s);if(!a)return[];const u=(c,h,p,g,_)=>{const A=bE(c,i);return a()({node:c,view:h,getPos:p,decorations:g,innerDecorations:_,editor:e,extension:r,HTMLAttributes:A})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:YA(e.name,this.schema)};e.type==="mark"&&(!((t=at(Pe(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=Pe(e,"onBeforeCreate",r),s=Pe(e,"onCreate",r),a=Pe(e,"onUpdate",r),u=Pe(e,"onSelectionUpdate",r),c=Pe(e,"onTransaction",r),h=Pe(e,"onFocus",r),p=Pe(e,"onBlur",r),g=Pe(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),c&&this.editor.on("transaction",c),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}}class Nr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(Pe(this,"addOptions",{name:this.name}))),this.storage=at(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Nr(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>W0(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Nr({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(Pe(t,"addOptions",{name:t.name})),t.storage=at(Pe(t,"addStorage",{name:t.name,options:t.options})),t}}function iV(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,i,(c,h,p,g)=>{var _;c.isBlock&&h>r&&(u+=s);const A=a==null?void 0:a[c.type.name];if(A)return p&&(u+=A({node:c,pos:h,parent:p,index:g,range:e})),!1;c.isText&&(u+=(_=c==null?void 0:c.text)===null||_===void 0?void 0:_.slice(Math.max(r,h)-h,i-h))}),u}function sV(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const eQ=Nr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Zn({key:new hi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),c=sV(t);return iV(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),tQ=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),nQ=(n=!1)=>({commands:e})=>e.setContent("",n),rQ=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(u,c)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,g=h.resolve(p.map(c)),_=h.resolve(p.map(c+u.nodeSize)),A=g.blockRange(_);if(!A)return;const T=Ff(A);if(u.type.isTextblock){const{defaultType:E}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(A.start,E)}(T||T===0)&&e.lift(A,T)})}),!0},iQ=n=>e=>n(e),sQ=()=>({state:n,dispatch:e})=>JL(n,e),oQ=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new Je(r.doc.resolve(a-1))),!0},aQ=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),c=i.after(s);n.delete(u,c).scrollIntoView()}return!0}return!1},lQ=n=>({tr:e,state:t,dispatch:r})=>{const i=Xn(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const c=s.before(a),h=s.after(a);e.delete(c,h).scrollIntoView()}return!0}return!1},uQ=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},cQ=()=>({state:n,dispatch:e})=>RS(n,e),fQ=()=>({commands:n})=>n.keyboardShortcut("Enter"),hQ=()=>({state:n,dispatch:e})=>SY(n,e);function Ry(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:MS(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function oV(n,e,t={}){return n.find(r=>r.type===e&&Ry(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function aN(n,e,t={}){return!!oV(n,e,t)}function DS(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!oV([...i.node.marks],e,t)))return;let a=i.index,u=n.start()+i.offset,c=a+1,h=u+i.node.nodeSize;for(;a>0&&aN([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;c<n.parent.childCount&&aN([...n.parent.child(c).marks],e,t);)h+=n.parent.child(c).nodeSize,c+=1;return{from:u,to:h}}function Ol(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const dQ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Ol(n,r.schema),{doc:a,selection:u}=t,{$from:c,from:h,to:p}=u;if(i){const g=DS(c,s,e);if(g&&g.from<=h&&g.to>=p){const _=Je.create(a,g.from,g.to);t.setSelection(_)}}return!0},pQ=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function aV(n){return n instanceof Je}function Eu(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function lV(n,e=null){if(!e)return null;const t=rt.atStart(n),r=rt.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?Je.create(n,Eu(0,i,s),Eu(n.content.size,i,s)):Je.create(n,Eu(e,i,s),Eu(e,i,s))}function mQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function PS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const gQ=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(PS()||mQ())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!aV(t.state.selection))return a(),!0;const u=lV(i.doc,n)||t.state.selection,c=t.state.selection.eq(u);return s&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},yQ=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),_Q=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),uV=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&uV(r)}return n};function og(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return uV(t)}function xy(n,e,t){if(n instanceof ll||n instanceof ye)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ye.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),xy("",e,t)}if(i){if(t.errorOnInvalidContent){let a=!1,u="";const c=new $2({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(a=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?ul.fromSchema(c).parseSlice(og(n),t.parseOptions):ul.fromSchema(c).parse(og(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=ul.fromSchema(e);return t.slice?s.parseSlice(og(n),t.parseOptions).content:s.parse(og(n),t.parseOptions)}return xy("",e,t)}function vQ(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Kn||i instanceof Wn))return;const s=n.mapping.maps[r];let a=0;s.forEach((u,c,h,p)=>{a===0&&(a=p)}),n.setSelection(rt.near(n.doc.resolve(a),t))}const AQ=n=>!("type"in n),TQ=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;try{u=xy(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck})}catch(T){return s.emit("contentError",{editor:s,error:T,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:c,to:h}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},p=!0,g=!0;if((AQ(u)?u:[u]).forEach(T=>{T.check(),p=p?T.isText&&T.marks.length===0:!1,g=g?T.isBlock:!1}),c===h&&g){const{parent:T}=r.doc.resolve(c);T.isTextblock&&!T.type.spec.code&&!T.childCount&&(c-=1,h+=1)}let A;if(p){if(Array.isArray(e))A=e.map(T=>T.text||"").join("");else if(e instanceof ye){let T="";e.forEach(E=>{E.text&&(T+=E.text)}),A=T}else typeof e=="object"&&e&&e.text?A=e.text:A=e;r.insertText(A,c,h)}else A=u,r.replaceWith(c,h,A);t.updateSelection&&vQ(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:A}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:A})}return!0},EQ=()=>({state:n,dispatch:e})=>TY(n,e),bQ=()=>({state:n,dispatch:e})=>EY(n,e),SQ=()=>({state:n,dispatch:e})=>$L(n,e),wQ=()=>({state:n,dispatch:e})=>YL(n,e),CQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=U0(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},RQ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=U0(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},xQ=()=>({state:n,dispatch:e})=>vY(n,e),kQ=()=>({state:n,dispatch:e})=>AY(n,e);function cV(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function IQ(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u+=1){const c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))PS()||cV()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const NQ=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=IQ(n).split(/-(?!$)/),a=s.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return c==null||c.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function sp(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,a=e?Xn(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(g,_)=>{if(g.isText)return;const A=Math.max(r,_),T=Math.min(i,_+g.nodeSize);u.push({node:g,from:A,to:T})});const c=i-r,h=u.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>Ry(g.node.attrs,t,{strict:!1}));return s?!!h.length:h.reduce((g,_)=>g+_.to-_.from,0)>=c}const OQ=(n,e={})=>({state:t,dispatch:r})=>{const i=Xn(n,t.schema);return sp(t,i,e)?bY(t,r):!1},MQ=()=>({state:n,dispatch:e})=>ZL(n,e),DQ=n=>({state:e,dispatch:t})=>{const r=Xn(n,e.schema);return PY(r)(e,t)},PQ=()=>({state:n,dispatch:e})=>XL(n,e);function Y0(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function lN(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const LQ=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=Y0(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Xn(n,r.schema)),u==="mark"&&(a=Ol(n,r.schema)),i&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(h,p)=>{s&&s===h.type&&t.setNodeMarkup(p,void 0,lN(h.attrs,e)),a&&h.marks.length&&h.marks.forEach(g=>{a===g.type&&t.addMark(p,p+h.nodeSize,a.create(lN(g.attrs,e)))})})}),!0):!1},VQ=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),UQ=()=>({tr:n,dispatch:e})=>{if(e){const t=new Li(n.doc);n.setSelection(t)}return!0},BQ=()=>({state:n,dispatch:e})=>KL(n,e),zQ=()=>({state:n,dispatch:e})=>QL(n,e),jQ=()=>({state:n,dispatch:e})=>RY(n,e),FQ=()=>({state:n,dispatch:e})=>IY(n,e),HQ=()=>({state:n,dispatch:e})=>kY(n,e);function SE(n,e,t={},r={}){return xy(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const qQ=(n,e=!1,t={},r={})=>({editor:i,tr:s,dispatch:a,commands:u})=>{var c,h;const{doc:p}=s;if(t.preserveWhitespace!=="full"){const g=SE(n,i.schema,t,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck});return a&&s.replaceWith(0,p.content.size,g).setMeta("preventUpdate",!e),!0}return a&&s.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck})};function fV(n,e){const t=Ol(e,n.schema),{from:r,to:i,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const u=a.find(c=>c.type.name===t.name);return u?{...u.attrs}:{}}function $Q(n,e){const t=new aL(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function GQ(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function KQ(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function WQ(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function LS(n){return e=>WQ(e.$from,n)}function YQ(n,e){const t={from:0,to:n.content.size};return iV(n,t,e)}function QQ(n,e){const t=Xn(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,u=>{s.push(u)});const a=s.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function hV(n,e){const t=Y0(typeof e=="string"?e:e.name,n.schema);return t==="node"?QQ(n,e):t==="mark"?fV(n,e):{}}function XQ(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function JQ(n){const e=XQ(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function ZQ(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((u,c)=>{a.push({from:u,to:c})});else{const{from:u,to:c}=t[s];if(u===void 0||c===void 0)return;a.push({from:u,to:c})}a.forEach(({from:u,to:c})=>{const h=e.slice(s).map(u,-1),p=e.slice(s).map(c),g=e.invert().map(h,-1),_=e.invert().map(p);r.push({oldRange:{from:g,to:_},newRange:{from:h,to:p}})})}),JQ(r)}function VS(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),a=DS(s,i.type);a&&r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}function Mg(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function wE(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Ol(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>Ry(g.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:g,$to:_})=>{const A=g.pos,T=_.pos;n.doc.nodesBetween(A,T,(E,S)=>{if(!E.isText&&!E.marks.length)return;const x=Math.max(A,S),P=Math.min(T,S+E.nodeSize),z=P-x;a+=z,u.push(...E.marks.map(H=>({mark:H,from:x,to:P})))})}),a===0)return!1;const c=u.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>Ry(g.mark.attrs,t,{strict:!1})).reduce((g,_)=>g+_.to-_.from,0),h=u.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,_)=>g+_.to-_.from,0);return(c>0?c+h:c)>=a}function eX(n,e,t={}){if(!e)return sp(n,null,t)||wE(n,null,t);const r=Y0(e,n.schema);return r==="node"?sp(n,e,t):r==="mark"?wE(n,e,t):!1}function uN(n,e){const{nodeExtensions:t}=G0(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=at(Pe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Q0(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(Q0(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function tX(n){return n instanceof qe}function nX(n,e,t){var r;const{selection:i}=e;let s=null;if(aV(i)&&(s=i.$cursor),s){const u=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(u)||!u.some(c=>c.type.excludes(t))}const{ranges:a}=i;return a.some(({$from:u,$to:c})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,c.pos,(p,g,_)=>{if(h)return!1;if(p.isInline){const A=!_||_.type.allowsMarkType(t),T=!!t.isInSet(p.marks)||!p.marks.some(E=>E.type.excludes(t));h=A&&T}return!h}),h})}const rX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:a,ranges:u}=s,c=Ol(n,r.schema);if(i)if(a){const h=fV(r,c);t.addStoredMark(c.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(_,A)=>{const T=Math.max(A,p),E=Math.min(A+_.nodeSize,g);_.marks.find(x=>x.type===c)?_.marks.forEach(x=>{c===x.type&&t.addMark(T,E,c.create({...x.attrs,...e}))}):t.addMark(T,E,c.create(e))})});return nX(r,t,c)},iX=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),sX=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Xn(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>rN(s,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>rN(s,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},oX=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Eu(n,0,r.content.size),s=qe.create(r,i);e.setSelection(s)}return!0},aX=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,a=Je.atStart(r).from,u=Je.atEnd(r).to,c=Eu(i,a,u),h=Eu(s,a,u),p=Je.create(r,c,h);e.setSelection(p)}return!0},lX=n=>({state:e,dispatch:t})=>{const r=Xn(n,e.schema);return UY(r)(e,t)};function cN(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const uX=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:u,$to:c}=s,h=i.extensionManager.attributes,p=Mg(h,u.node().type.name,u.node().attrs);if(s instanceof qe&&s.node.isBlock)return!u.parentOffset||!Xo(a,u.pos)?!1:(r&&(n&&cN(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=c.parentOffset===c.parent.content.size,_=u.depth===0?void 0:GQ(u.node(-1).contentMatchAt(u.indexAfter(-1)));let A=g&&_?[{type:_,attrs:p}]:void 0,T=Xo(e.doc,e.mapping.map(u.pos),1,A);if(!A&&!T&&Xo(e.doc,e.mapping.map(u.pos),1,_?[{type:_}]:void 0)&&(T=!0,A=_?[{type:_,attrs:p}]:void 0),r){if(T&&(s instanceof Je&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,A),_&&!g&&!u.parentOffset&&u.parent.type!==_)){const E=e.mapping.map(u.before()),S=e.doc.resolve(E);u.node(-1).canReplaceWith(S.index(),S.index()+1,_)&&e.setNodeMarkup(e.mapping.map(u.before()),_)}n&&cN(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return T},cX=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var a;const u=Xn(n,r.schema),{$from:c,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||c.depth<2||!c.sameParent(h))return!1;const g=c.node(-1);if(g.type!==u)return!1;const _=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let x=ye.empty;const P=c.index(-1)?1:c.index(-2)?2:3;for(let I=c.depth-P;I>=c.depth-3;I-=1)x=ye.from(c.node(I).copy(x));const z=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,H={...Mg(_,c.node().type.name,c.node().attrs),...e},V=((a=u.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(H))||void 0;x=x.append(ye.from(u.createAndFill(null,V)||void 0));const D=c.before(c.depth-(P-1));t.replace(D,c.after(-z),new ke(x,4-P,0));let O=-1;t.doc.nodesBetween(D,t.doc.content.size,(I,k)=>{if(O>-1)return!1;I.isTextblock&&I.content.size===0&&(O=k+1)}),O>-1&&t.setSelection(Je.near(t.doc.resolve(O))),t.scrollIntoView()}return!0}const A=h.pos===c.end()?g.contentMatchAt(0).defaultType:null,T={...Mg(_,g.type.name,g.attrs),...e},E={...Mg(_,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,h.pos);const S=A?[{type:u,attrs:T},{type:A,attrs:E}]:[{type:u,attrs:T}];if(!Xo(t.doc,c.pos,2))return!1;if(i){const{selection:x,storedMarks:P}=r,{splittableMarks:z}=s.extensionManager,H=P||x.$to.parentOffset&&x.$from.marks();if(t.split(c.pos,2,S).scrollIntoView(),!H||!i)return!0;const V=H.filter(D=>z.includes(D.type.name));t.ensureMarks(V)}return!0},QA=(n,e)=>{const t=LS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Il(n.doc,t.pos)&&n.join(t.pos),!0},XA=(n,e)=>{const t=LS(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Il(n.doc,r)&&n.join(r),!0},fX=(n,e,t,r={})=>({editor:i,tr:s,state:a,dispatch:u,chain:c,commands:h,can:p})=>{const{extensions:g,splittableMarks:_}=i.extensionManager,A=Xn(n,a.schema),T=Xn(e,a.schema),{selection:E,storedMarks:S}=a,{$from:x,$to:P}=E,z=x.blockRange(P),H=S||E.$to.parentOffset&&E.$from.marks();if(!z)return!1;const V=LS(D=>uN(D.type.name,g))(E);if(z.depth>=1&&V&&z.depth-V.depth<=1){if(V.node.type===A)return h.liftListItem(T);if(uN(V.node.type.name,g)&&A.validContent(V.node.content)&&u)return c().command(()=>(s.setNodeMarkup(V.pos,A),!0)).command(()=>QA(s,A)).command(()=>XA(s,A)).run()}return!t||!H||!u?c().command(()=>p().wrapInList(A,r)?!0:h.clearNodes()).wrapInList(A,r).command(()=>QA(s,A)).command(()=>XA(s,A)).run():c().command(()=>{const D=p().wrapInList(A,r),O=H.filter(I=>_.includes(I.type.name));return s.ensureMarks(O),D?!0:h.clearNodes()}).wrapInList(A,r).command(()=>QA(s,A)).command(()=>XA(s,A)).run()},hX=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,a=Ol(n,r.schema);return wE(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},dX=(n,e,t={})=>({state:r,commands:i})=>{const s=Xn(n,r.schema),a=Xn(e,r.schema),u=sp(r,s,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),u?i.setNode(a,c):i.setNode(s,{...c,...t})},pX=(n,e={})=>({state:t,commands:r})=>{const i=Xn(n,t.schema);return sp(t,i,e)?r.lift(i):r.wrapIn(i,e)},mX=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const a=n.tr,u=s.transform;for(let c=u.steps.length-1;c>=0;c-=1)a.step(u.steps[c].invert(u.docs[c]));if(s.text){const c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,c))}else a.delete(s.from,s.to)}return!0}}return!1},gX=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},yX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,c=Ol(n,r.schema),{$from:h,empty:p,ranges:g}=u;if(!i)return!0;if(p&&a){let{from:_,to:A}=u;const T=(s=h.marks().find(S=>S.type===c))===null||s===void 0?void 0:s.attrs,E=DS(h,c,T);E&&(_=E.from,A=E.to),t.removeMark(_,A,c)}else g.forEach(_=>{t.removeMark(_.$from.pos,_.$to.pos,c)});return t.removeStoredMark(c),!0},_X=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=Y0(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=Xn(n,r.schema)),u==="mark"&&(a=Ol(n,r.schema)),i&&t.selection.ranges.forEach(c=>{const h=c.$from.pos,p=c.$to.pos;let g,_,A,T;t.selection.empty?r.doc.nodesBetween(h,p,(E,S)=>{s&&s===E.type&&(A=Math.max(S,h),T=Math.min(S+E.nodeSize,p),g=S,_=E)}):r.doc.nodesBetween(h,p,(E,S)=>{S<h&&s&&s===E.type&&(A=Math.max(S,h),T=Math.min(S+E.nodeSize,p),g=S,_=E),S>=h&&S<=p&&(s&&s===E.type&&t.setNodeMarkup(S,void 0,{...E.attrs,...e}),a&&E.marks.length&&E.marks.forEach(x=>{if(a===x.type){const P=Math.max(S,h),z=Math.min(S+E.nodeSize,p);t.addMark(P,z,a.create({...x.attrs,...e}))}}))}),_&&(g!==void 0&&t.setNodeMarkup(g,void 0,{..._.attrs,...e}),a&&_.marks.length&&_.marks.forEach(E=>{a===E.type&&t.addMark(A,T,a.create({...E.attrs,...e}))}))}),!0):!1},vX=(n,e={})=>({state:t,dispatch:r})=>{const i=Xn(n,t.schema);return NY(i,e)(t,r)},AX=(n,e={})=>({state:t,dispatch:r})=>{const i=Xn(n,t.schema);return OY(i,e)(t,r)};var TX=Object.freeze({__proto__:null,blur:tQ,clearContent:nQ,clearNodes:rQ,command:iQ,createParagraphNear:sQ,cut:oQ,deleteCurrentNode:aQ,deleteNode:lQ,deleteRange:uQ,deleteSelection:cQ,enter:fQ,exitCode:hQ,extendMarkRange:dQ,first:pQ,focus:gQ,forEach:yQ,insertContent:_Q,insertContentAt:TQ,joinBackward:SQ,joinDown:bQ,joinForward:wQ,joinItemBackward:CQ,joinItemForward:RQ,joinTextblockBackward:xQ,joinTextblockForward:kQ,joinUp:EQ,keyboardShortcut:NQ,lift:OQ,liftEmptyBlock:MQ,liftListItem:DQ,newlineInCode:PQ,resetAttributes:LQ,scrollIntoView:VQ,selectAll:UQ,selectNodeBackward:BQ,selectNodeForward:zQ,selectParentNode:jQ,selectTextblockEnd:FQ,selectTextblockStart:HQ,setContent:qQ,setMark:rX,setMeta:iX,setNode:sX,setNodeSelection:oX,setTextSelection:aX,sinkListItem:lX,splitBlock:uX,splitListItem:cX,toggleList:fX,toggleMark:hX,toggleNode:dX,toggleWrap:pX,undoInputRule:mX,unsetAllMarks:gX,unsetMark:yX,updateAttributes:_X,wrapIn:vX,wrapInList:AX});const EX=Nr.create({name:"commands",addCommands(){return{...TX}}}),bX=Nr.create({name:"drop",addProseMirrorPlugins(){return[new Zn({key:new hi("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),SX=Nr.create({name:"editable",addProseMirrorPlugins(){return[new Zn({key:new hi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),wX=new hi("focusEvents"),CX=Nr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Zn({key:wX,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),RX=Nr.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:c,doc:h}=u,{empty:p,$anchor:g}=c,{pos:_,parent:A}=g,T=g.parent.isTextblock&&_>0?u.doc.resolve(_-1):g,E=T.parent.type.spec.isolating,S=g.pos-g.parentOffset,x=E&&T.parent.childCount===1?S===g.pos:rt.atStart(h).from===_;return!p||!A.type.isTextblock||A.textContent.length||!x||x&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return PS()||cV()?s:i},addProseMirrorPlugins(){return[new Zn({key:new hi("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const r=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),i=n.some(E=>E.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:u}=e.selection,c=rt.atStart(e.doc).from,h=rt.atEnd(e.doc).to;if(s||!(a===c&&u===h)||!Q0(t.doc))return;const _=t.tr,A=q0({state:t,transaction:_}),{commands:T}=new $0({editor:this.editor,state:A});if(T.clearNodes(),!!_.steps.length)return _}})]}}),xX=Nr.create({name:"paste",addProseMirrorPlugins(){return[new Zn({key:new hi("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),kX=Nr.create({name:"tabindex",addProseMirrorPlugins(){return[new Zn({key:new hi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class pu{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new pu(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new pu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new pu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=this.pos+r+(s?0:1),u=this.resolvedPos.doc.resolve(a);if(!i&&u.depth<=this.depth)return;const c=new pu(u,this.editor,i,i?t:null);i&&(c.actualDepth=this.depth+1),e.push(new pu(u,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const c=a[u];if(s[c]!==t[c])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(c=>t[c]===a.node.attrs[c])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const IX=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function NX(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class OX extends BY{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=NX(IX,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=rV(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=r.filter(u=>!u.key.startsWith(a))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[SX,eQ.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),EX,CX,RX,kX,bX,xX].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Xc(i,this)}createCommandManager(){this.commandManager=new $0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=SE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=SE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=lV(t,this.options.autofocus);this.view=new lY(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Qc.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return hV(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return eX(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return OS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return YQ(this.state.doc,{blockSeparator:t,textSerializers:{...sV(this.schema),...r}})}get isEmpty(){return Q0(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new pu(t,this)}get $doc(){return this.$pos(0)}}function Nf(n){return new K0({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];if(a){const c=u.search(/\S/),h=t.from+u.indexOf(a),p=h+a.length;if(VS(t.from,t.to,e.doc).filter(A=>A.mark.type.excluded.find(E=>E===n.type&&E!==A.mark.type)).filter(A=>A.to>h).length)return null;p<t.to&&s.delete(p,t.to),h>t.from&&s.delete(t.from+c,h);const _=t.from+c+a.length;s.addMark(t.from+c,_,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function MX(n){return new K0({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let u=t.to;const c=n.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=a+h;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,a+r[0].length-1),s.replaceWith(p,u,c)}else if(r[0]){const h=n.type.isInline?a:a-1;s.insert(h,n.type.create(i)).delete(s.mapping.map(a),s.mapping.map(u))}s.scrollIntoView()}})}function CE(n){return new K0({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=at(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function op(n){return new K0({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=at(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),c=a.doc.resolve(t.from).blockRange(),h=c&&gS(c,n.type,s);if(!h)return null;if(a.wrap(c,h),n.keepMarks&&n.editor){const{selection:g,storedMarks:_}=e,{splittableMarks:A}=n.editor.extensionManager,T=_||g.$to.parentOffset&&g.$from.marks();if(T){const E=T.filter(S=>A.includes(S.type.name));a.ensureMarks(E)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(g,s).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&Il(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)}})}class fi{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(Pe(this,"addOptions",{name:this.name}))),this.storage=at(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new fi(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>W0(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new fi(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(Pe(t,"addOptions",{name:t.name})),t.storage=at(Pe(t,"addStorage",{name:t.name,options:t.options})),t}}function $u(n){return new WY({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=at(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,u=r[r.length-1],c=r[0];let h=t.to;if(u){const p=c.search(/\S/),g=t.from+c.indexOf(u),_=g+u.length;if(VS(t.from,t.to,e.doc).filter(T=>T.mark.type.excluded.find(S=>S===n.type&&S!==T.mark.type)).filter(T=>T.to>g).length)return null;_<t.to&&a.delete(_,t.to),g>t.from&&a.delete(t.from+p,g),h=t.from+p+u.length,a.addMark(t.from+p,h,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}function DX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dV={exports:{}},JA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN;function PX(){if(fN)return JA;fN=1;var n=Sr;function e(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function u(g,_){var A=_(),T=r({inst:{value:A,getSnapshot:_}}),E=T[0].inst,S=T[1];return s(function(){E.value=A,E.getSnapshot=_,c(E)&&S({inst:E})},[g,A,_]),i(function(){return c(E)&&S({inst:E}),g(function(){c(E)&&S({inst:E})})},[g]),a(A),A}function c(g){var _=g.getSnapshot;g=g.value;try{var A=_();return!t(g,A)}catch{return!0}}function h(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return JA.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,JA}dV.exports=PX();var US=dV.exports;const LX=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},VX=({contentComponent:n})=>{const e=US.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Sr.createElement(Sr.Fragment,null,Object.values(e))};function UX(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:A4.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class BX extends Sr.Component{constructor(e){var t;super(e),this.editorContentRef=Sr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=UX(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Sr.createElement(Sr.Fragment,null,Sr.createElement("div",{ref:LX(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Sr.createElement(VX,{contentComponent:e.contentComponent}))}}const zX=$.forwardRef((n,e)=>{const t=Sr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Sr.createElement(BX,{key:t,innerRef:e,...n})}),jX=Sr.memo(zX);var FX=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},HX=DX(FX),pV={exports:{}},ZA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN;function qX(){if(hN)return ZA;hN=1;var n=Sr,e=US;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,c=n.useDebugValue;return ZA.useSyncExternalStoreWithSelector=function(h,p,g,_,A){var T=s(null);if(T.current===null){var E={hasValue:!1,value:null};T.current=E}else E=T.current;T=u(function(){function x(D){if(!P){if(P=!0,z=D,D=_(D),A!==void 0&&E.hasValue){var O=E.value;if(A(O,D))return H=O}return H=D}if(O=H,r(z,D))return O;var I=_(D);return A!==void 0&&A(O,I)?O:(z=D,H=I)}var P=!1,z,H,V=g===void 0?null:g;return[function(){return x(p())},V===null?void 0:function(){return x(V())}]},[p,g,_,A]);var S=i(h,T[0],T[1]);return a(function(){E.hasValue=!0,E.value=S},[S]),c(S),S},ZA}pV.exports=qX();var $X=pV.exports;const GX=typeof window<"u"?$.useLayoutEffect:$.useEffect;class KX{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function WX(n){var e;const[t]=$.useState(()=>new KX(n.editor)),r=$X.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:HX);return GX(()=>t.watch(n.editor),[n.editor,t]),$.useDebugValue(r),r}const YX=!1,RE=typeof window>"u",QX=RE||!!(typeof window<"u"&&window.next);class BS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?RE||QX?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new OX(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=t.extensions)===null||a===void 0?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?BS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function XX(n={},e=[]){const t=$.useRef(n);t.current=n;const[r]=$.useState(()=>new BS(t)),i=US.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return $.useDebugValue(i),$.useEffect(r.onRender(e)),WX({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&s===0?0:s+1}),i}const JX=$.createContext({editor:null});JX.Consumer;const ZX=$.createContext({onDragStart:void 0}),eJ=()=>$.useContext(ZX);Sr.forwardRef((n,e)=>{const{onDragStart:t}=eJ(),r=n.as||"div";return Sr.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const tJ=/^\s*>\s$/,nJ=fi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[op({find:tJ,type:this.type})]}}),rJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,iJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,sJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,oJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,aJ=yo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Nf({find:rJ,type:this.type}),Nf({find:sJ,type:this.type})]},addPasteRules(){return[$u({find:iJ,type:this.type}),$u({find:oJ,type:this.type})]}}),lJ="listItem",dN="textStyle",pN=/^\s*([-+*])\s$/,uJ=fi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(lJ,this.editor.getAttributes(dN)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=op({find:pN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=op({find:pN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(dN),editor:this.editor})),[n]}}),cJ=/(^|[^`])`([^`]+)`(?!`)/,fJ=/(^|[^`])`([^`]+)`(?!`)/g,hJ=yo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Nf({find:cJ,type:this.type})]},addPasteRules(){return[$u({find:fJ,type:this.type})]}}),dJ=/^```([a-z]+)?[\s\n]$/,pJ=/^~~~([a-z]+)?[\s\n]$/,mJ=fi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Jn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(rt.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[CE({find:dJ,type:this.type,getAttributes:n=>({language:n[1]})}),CE({find:pJ,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Zn({key:new hi("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:a,schema:u}=n.state,c=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(Je.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),gJ=fi.create({name:"doc",topNode:!0,content:"block+"});function yJ(n={}){return new Zn({view(e){return new _J(e,n)}})}class _J{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(t){let g=e.nodeBefore,_=e.nodeAfter;if(g||_){let A=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(A){let T=A.getBoundingClientRect(),E=g?T.bottom:T.top;g&&_&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*u;r={left:T.left,right:T.right,top:E-S,bottom:E+S}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),_=this.width/2*a;r={left:g.left-_,right:g.left+_,top:g.top,bottom:g.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!c||c==document.body&&getComputedStyle(c).position=="static")h=-pageXOffset,p=-pageYOffset;else{let g=c.getBoundingClientRect(),_=g.width/c.offsetWidth,A=g.height/c.offsetHeight;h=g.left-c.scrollLeft*_,p=g.top-c.scrollTop*A}this.element.style.left=(r.left-h)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=nL(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const vJ=Nr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[yJ(this.options)]}});class fn extends rt{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return fn.valid(r)?new fn(r):rt.near(r)}content(){return ke.empty}eq(e){return e instanceof fn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new fn(e.resolve(t.pos))}getBookmark(){return new zS(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!AJ(e)||!TJ(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&fn.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){s=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let c=e.doc.resolve(i);if(fn.valid(c))return c}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!qe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let u=e.doc.resolve(i);if(fn.valid(u))return u}return null}}}fn.prototype.visible=!1;fn.findFrom=fn.findGapCursorFrom;rt.jsonID("gapcursor",fn);class zS{constructor(e){this.pos=e}map(e){return new zS(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return fn.valid(t)?new fn(t):rt.near(t)}}function AJ(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function TJ(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function EJ(){return new Zn({props:{decorations:CJ,createSelectionBetween(n,e,t){return e.pos==t.pos&&fn.valid(t)?new fn(t):null},handleClick:SJ,handleKeyDown:bJ,handleDOMEvents:{beforeinput:wJ}}})}const bJ=HL({ArrowLeft:ag("horiz",-1),ArrowRight:ag("horiz",1),ArrowUp:ag("vert",-1),ArrowDown:ag("vert",1)});function ag(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,u=e>0?a.$to:a.$from,c=a.empty;if(a instanceof Je){if(!s.endOfTextblock(t)||u.depth==0)return!1;c=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=fn.findGapCursorFrom(u,e,c);return h?(i&&i(r.tr.setSelection(new fn(h))),!0):!1}}function SJ(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!fn.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&qe.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new fn(r))),!0)}function wJ(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof fn))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=ye.empty;for(let a=r.length-1;a>=0;a--)i=ye.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new ke(i,0,0));return s.setSelection(Je.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function CJ(n){if(!(n.selection instanceof fn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",In.create(n.doc,[Mi.widget(n.selection.head,e,{key:"gapcursor"})])}const RJ=Nr.create({name:"gapCursor",addProseMirrorPlugins(){return[EJ()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=at(Pe(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),xJ=fi.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Jn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&c&&a){const g=c.filter(_=>u.includes(_.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),kJ=fi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Jn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>CE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var ky=200,Yn=function(){};Yn.prototype.append=function(e){return e.length?(e=Yn.from(e),!this.length&&e||e.length<ky&&this.leafAppend(e)||this.length<ky&&e.leafPrepend(this)||this.appendInner(e)):this};Yn.prototype.prepend=function(e){return e.length?Yn.from(e).append(this):this};Yn.prototype.appendInner=function(e){return new IJ(this,e)};Yn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Yn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Yn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Yn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Yn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};Yn.from=function(e){return e instanceof Yn?e:e&&e.length?new mV(e):Yn.empty};var mV=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,u){for(var c=s;c<a;c++)if(i(this.values[c],u+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,u){for(var c=s-1;c>=a;c--)if(i(this.values[c],u+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ky)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ky)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Yn);Yn.empty=new mV([]);var IJ=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),a)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,a+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Yn);const NJ=500;class bs{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,u,c,h=[],p=[];return this.items.forEach((g,_)=>{if(!g.step){i||(i=this.remapping(r,_+1),s=i.maps.length),s--,p.push(g);return}if(i){p.push(new Ys(g.map));let A=g.step.map(i.slice(s)),T;A&&a.maybeStep(A).doc&&(T=a.mapping.maps[a.mapping.maps.length-1],h.push(new Ys(T,void 0,void 0,h.length+p.length))),s--,T&&i.appendMap(T,s)}else a.maybeStep(g.step);if(g.selection)return u=i?g.selection.map(i.slice(s)):g.selection,c=new bs(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:u}}addTransform(e,t,r,i){let s=[],a=this.eventCount,u=this.items,c=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),_=new Ys(e.mapping.maps[p],g,t),A;(A=c&&c.merge(_))&&(_=A,p?s.pop():u=u.slice(0,u.length-1)),s.push(_),t&&(a++,t=void 0),i||(c=_)}let h=a-r.depth;return h>MJ&&(u=OJ(u,h),a-=h),new bs(u.append(s),a)}remapping(e,t){let r=new ep;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new bs(this.items.append(e.map(t=>new Ys(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(_=>{_.selection&&u--},i);let c=t;this.items.forEach(_=>{let A=s.getMirror(--c);if(A==null)return;a=Math.min(a,A);let T=s.maps[A];if(_.step){let E=e.steps[A].invert(e.docs[A]),S=_.selection&&_.selection.map(s.slice(c+1,A));S&&u++,r.push(new Ys(T,E,S))}else r.push(new Ys(T))},i);let h=[];for(let _=t;_<a;_++)h.push(new Ys(s.maps[_]));let p=this.items.slice(0,i).append(h).append(r),g=new bs(p,u);return g.emptyItemCount()>NJ&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(t.slice(r)),h=c&&c.getMap();if(r--,h&&t.appendMap(h,r),c){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let g=new Ys(h.invert(),c,p),_,A=i.length-1;(_=i.length&&i[A].merge(g))?i[A]=_:i.push(g)}}else a.map&&r--},this.items.length,0),new bs(Yn.from(i.reverse()),s)}}bs.empty=new bs(Yn.empty,0);function OJ(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Ys{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ys(t.getMap().invert(),t,this.selection)}}}class Ua{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const MJ=20;function DJ(n,e,t,r){let i=t.getMeta(Mu),s;if(i)return i.historyState;t.getMeta(VJ)&&(n=new Ua(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Mu))return a.getMeta(Mu).redo?new Ua(n.done.addTransform(t,void 0,r,Dg(e)),n.undone,mN(t.mapping.maps),n.prevTime,n.prevComposition):new Ua(n.done,n.undone.addTransform(t,void 0,r,Dg(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),c=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!PJ(t,n.prevRanges)),h=a?eT(n.prevRanges,t.mapping):mN(t.mapping.maps);return new Ua(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,Dg(e)),bs.empty,h,t.time,u??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Ua(n.done.rebased(t,s),n.undone.rebased(t,s),eT(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Ua(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),eT(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function PJ(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function mN(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function eT(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function LJ(n,e,t){let r=Dg(e),i=Mu.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),u=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new Ua(t?u:s.remaining,t?s.remaining:u,null,0,-1);return s.transform.setSelection(a).setMeta(Mu,{redo:t,historyState:c})}let tT=!1,gN=null;function Dg(n){let e=n.plugins;if(gN!=e){tT=!1,gN=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){tT=!0;break}}return tT}const Mu=new hi("history"),VJ=new hi("closeHistory");function UJ(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Zn({key:Mu,state:{init(){return new Ua(bs.empty,bs.empty,null,0,-1)},apply(e,t,r){return DJ(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?yV:r=="historyRedo"?_V:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function gV(n,e){return(t,r)=>{let i=Mu.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=LJ(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const yV=gV(!1,!0),_V=gV(!0,!0),BJ=Nr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>yV(n,e),redo:()=>({state:n,dispatch:e})=>_V(n,e)}},addProseMirrorPlugins(){return[UJ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),zJ=fi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Jn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):tX(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:a,dispatch:u})=>{var c;if(u){const{$to:h}=a.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?a.setSelection(Je.create(a.doc,h.pos+1)):h.nodeAfter.isBlock?a.setSelection(qe.create(a.doc,h.pos)):a.setSelection(Je.create(a.doc,h.pos));else{const g=(c=h.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();g&&(a.insert(p,g),a.setSelection(Je.create(a.doc,p+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[MX({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),jJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,FJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,HJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,qJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$J=yo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Nf({find:jJ,type:this.type}),Nf({find:HJ,type:this.type})]},addPasteRules(){return[$u({find:FJ,type:this.type}),$u({find:qJ,type:this.type})]}}),GJ=fi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Jn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),KJ="listItem",yN="textStyle",_N=/^(\d+)\.\s$/,WJ=fi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Jn(this.options.HTMLAttributes,t),0]:["ol",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(KJ,this.editor.getAttributes(yN)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=op({find:_N,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=op({find:_N,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(yN)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),YJ=fi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),QJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,JJ=yo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Nf({find:QJ,type:this.type})]},addPasteRules(){return[$u({find:XJ,type:this.type})]}}),ZJ=fi.create({name:"text",group:"inline"}),eZ=Nr.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(aJ.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(nJ.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(uJ.configure(this.options.bulletList)),this.options.code!==!1&&n.push(hJ.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(mJ.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(gJ.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(vJ.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(RJ.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(xJ.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(kJ.configure(this.options.heading)),this.options.history!==!1&&n.push(BJ.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(zJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push($J.configure(this.options.italic)),this.options.listItem!==!1&&n.push(GJ.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(WJ.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(YJ.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(JJ.configure(this.options.strike)),this.options.text!==!1&&n.push(ZJ.configure(this.options.text)),n}}),tZ=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const s=t.getAttribute("style"),a=(i=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${a};${s}`)})},nZ=yo.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&tZ(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Jn(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),rZ=Nr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Zn({key:new hi("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const s=this.editor.isEmpty;return n.descendants((a,u)=>{const c=r>=u&&r<=u+a.nodeSize,h=!a.isLeaf&&Q0(a);if((c||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];s&&p.push(this.options.emptyEditorClass);const g=Mi.node(u,u+a.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:u,hasAnchor:c}):this.options.placeholder});i.push(g)}return this.options.includeChildren}),In.create(n,i)}}})]}}),iZ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",sZ="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Of=(n,e)=>{for(const t in e)n[t]=e[t];return n},xE="numeric",kE="ascii",IE="alpha",kd="asciinumeric",md="alphanumeric",NE="domain",vV="emoji",oZ="scheme",aZ="slashscheme",nT="whitespace";function lZ(n,e){return n in e||(e[n]=[]),e[n]}function bu(n,e,t){e[xE]&&(e[kd]=!0,e[md]=!0),e[kE]&&(e[kd]=!0,e[IE]=!0),e[kd]&&(e[md]=!0),e[IE]&&(e[md]=!0),e[md]&&(e[NE]=!0),e[vV]&&(e[NE]=!0);for(const r in e){const i=lZ(r,t);i.indexOf(n)<0&&i.push(n)}}function uZ(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function ti(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}ti.groups={};ti.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||ti.groups;let i;return e&&e.j?i=e:(i=new ti(e),t&&r&&bu(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(n[a]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||ti.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let a,u=i.go(n);if(u?(a=new ti,Of(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new ti,s){if(r)if(a.t&&typeof a.t=="string"){const c=Of(uZ(a.t,r),t);bu(s,c,r)}else t&&bu(s,t,r);a.t=s}return i.j[n]=a,a}};const st=(n,e,t,r,i)=>n.ta(e,t,r,i),cn=(n,e,t,r,i)=>n.tr(e,t,r,i),vN=(n,e,t,r,i)=>n.ts(e,t,r,i),Ae=(n,e,t,r,i)=>n.tt(e,t,r,i),Fo="WORD",OE="UWORD",AV="ASCIINUMERICAL",TV="ALPHANUMERICAL",ap="LOCALHOST",ME="TLD",DE="UTLD",Pg="SCHEME",Kc="SLASH_SCHEME",jS="NUM",PE="WS",FS="NL",Id="OPENBRACE",Nd="CLOSEBRACE",Iy="OPENBRACKET",Ny="CLOSEBRACKET",Oy="OPENPAREN",My="CLOSEPAREN",Dy="OPENANGLEBRACKET",Py="CLOSEANGLEBRACKET",Ly="FULLWIDTHLEFTPAREN",Vy="FULLWIDTHRIGHTPAREN",Uy="LEFTCORNERBRACKET",By="RIGHTCORNERBRACKET",zy="LEFTWHITECORNERBRACKET",jy="RIGHTWHITECORNERBRACKET",Fy="FULLWIDTHLESSTHAN",Hy="FULLWIDTHGREATERTHAN",qy="AMPERSAND",HS="APOSTROPHE",$y="ASTERISK",Ba="AT",Gy="BACKSLASH",Ky="BACKTICK",Wy="CARET",Ga="COLON",qS="COMMA",Yy="DOLLAR",Qs="DOT",Qy="EQUALS",$S="EXCLAMATION",ns="HYPHEN",Od="PERCENT",Xy="PIPE",Jy="PLUS",Zy="POUND",Md="QUERY",GS="QUOTE",EV="FULLWIDTHMIDDLEDOT",KS="SEMI",Xs="SLASH",Dd="TILDE",e0="UNDERSCORE",bV="EMOJI",t0="SYM";var SV=Object.freeze({__proto__:null,WORD:Fo,UWORD:OE,ASCIINUMERICAL:AV,ALPHANUMERICAL:TV,LOCALHOST:ap,TLD:ME,UTLD:DE,SCHEME:Pg,SLASH_SCHEME:Kc,NUM:jS,WS:PE,NL:FS,OPENBRACE:Id,CLOSEBRACE:Nd,OPENBRACKET:Iy,CLOSEBRACKET:Ny,OPENPAREN:Oy,CLOSEPAREN:My,OPENANGLEBRACKET:Dy,CLOSEANGLEBRACKET:Py,FULLWIDTHLEFTPAREN:Ly,FULLWIDTHRIGHTPAREN:Vy,LEFTCORNERBRACKET:Uy,RIGHTCORNERBRACKET:By,LEFTWHITECORNERBRACKET:zy,RIGHTWHITECORNERBRACKET:jy,FULLWIDTHLESSTHAN:Fy,FULLWIDTHGREATERTHAN:Hy,AMPERSAND:qy,APOSTROPHE:HS,ASTERISK:$y,AT:Ba,BACKSLASH:Gy,BACKTICK:Ky,CARET:Wy,COLON:Ga,COMMA:qS,DOLLAR:Yy,DOT:Qs,EQUALS:Qy,EXCLAMATION:$S,HYPHEN:ns,PERCENT:Od,PIPE:Xy,PLUS:Jy,POUND:Zy,QUERY:Md,QUOTE:GS,FULLWIDTHMIDDLEDOT:EV,SEMI:KS,SLASH:Xs,TILDE:Dd,UNDERSCORE:e0,EMOJI:bV,SYM:t0});const zo=/[a-z]/,td=new RegExp("\\p{L}","u"),rT=new RegExp("\\p{Emoji}","u"),jo=/\d/,iT=/\s/,AN="\r",sT=`
`,cZ="",fZ="",oT="";let lg=null,ug=null;function hZ(n=[]){const e={};ti.groups=e;const t=new ti;lg==null&&(lg=TN(iZ)),ug==null&&(ug=TN(sZ)),Ae(t,"'",HS),Ae(t,"{",Id),Ae(t,"}",Nd),Ae(t,"[",Iy),Ae(t,"]",Ny),Ae(t,"(",Oy),Ae(t,")",My),Ae(t,"<",Dy),Ae(t,">",Py),Ae(t,"",Ly),Ae(t,"",Vy),Ae(t,"",Uy),Ae(t,"",By),Ae(t,"",zy),Ae(t,"",jy),Ae(t,"",Fy),Ae(t,"",Hy),Ae(t,"&",qy),Ae(t,"*",$y),Ae(t,"@",Ba),Ae(t,"`",Ky),Ae(t,"^",Wy),Ae(t,":",Ga),Ae(t,",",qS),Ae(t,"$",Yy),Ae(t,".",Qs),Ae(t,"=",Qy),Ae(t,"!",$S),Ae(t,"-",ns),Ae(t,"%",Od),Ae(t,"|",Xy),Ae(t,"+",Jy),Ae(t,"#",Zy),Ae(t,"?",Md),Ae(t,'"',GS),Ae(t,"/",Xs),Ae(t,";",KS),Ae(t,"~",Dd),Ae(t,"_",e0),Ae(t,"\\",Gy),Ae(t,"",EV);const r=cn(t,jo,jS,{[xE]:!0});cn(r,jo,r);const i=cn(r,zo,AV,{[kd]:!0}),s=cn(r,td,TV,{[md]:!0}),a=cn(t,zo,Fo,{[kE]:!0});cn(a,jo,i),cn(a,zo,a),cn(i,jo,i),cn(i,zo,i);const u=cn(t,td,OE,{[IE]:!0});cn(u,zo),cn(u,jo,s),cn(u,td,u),cn(s,jo,s),cn(s,zo),cn(s,td,s);const c=Ae(t,sT,FS,{[nT]:!0}),h=Ae(t,AN,PE,{[nT]:!0}),p=cn(t,iT,PE,{[nT]:!0});Ae(t,oT,p),Ae(h,sT,c),Ae(h,oT,p),cn(h,iT,p),Ae(p,AN),Ae(p,sT),cn(p,iT,p),Ae(p,oT,p);const g=cn(t,rT,bV,{[vV]:!0});Ae(g,"#"),cn(g,rT,g),Ae(g,cZ,g);const _=Ae(g,fZ);Ae(_,"#"),cn(_,rT,g);const A=[[zo,a],[jo,i]],T=[[zo,null],[td,u],[jo,s]];for(let E=0;E<lg.length;E++)Da(t,lg[E],ME,Fo,A);for(let E=0;E<ug.length;E++)Da(t,ug[E],DE,OE,T);bu(ME,{tld:!0,ascii:!0},e),bu(DE,{utld:!0,alpha:!0},e),Da(t,"file",Pg,Fo,A),Da(t,"mailto",Pg,Fo,A),Da(t,"http",Kc,Fo,A),Da(t,"https",Kc,Fo,A),Da(t,"ftp",Kc,Fo,A),Da(t,"ftps",Kc,Fo,A),bu(Pg,{scheme:!0,ascii:!0},e),bu(Kc,{slashscheme:!0,ascii:!0},e),n=n.sort((E,S)=>E[0]>S[0]?1:-1);for(let E=0;E<n.length;E++){const S=n[E][0],P=n[E][1]?{[oZ]:!0}:{[aZ]:!0};S.indexOf("-")>=0?P[NE]=!0:zo.test(S)?jo.test(S)?P[kd]=!0:P[kE]=!0:P[xE]=!0,vN(t,S,S,P)}return vN(t,"localhost",ap,{ascii:!0}),t.jd=new ti(t0),{start:t,tokens:Of({groups:e},SV)}}function wV(n,e){const t=dZ(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,i=[];let s=0,a=0;for(;a<r;){let u=n,c=null,h=0,p=null,g=-1,_=-1;for(;a<r&&(c=u.go(t[a]));)u=c,u.accepts()?(g=0,_=0,p=u):g>=0&&(g+=t[a].length,_++),h+=t[a].length,s+=t[a].length,a++;s-=g,a-=_,h-=g,i.push({t:p.t,v:e.slice(s-h,s),s:s-h,e:s})}return i}function dZ(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,a=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Da(n,e,t,r,i){let s;const a=e.length;for(let u=0;u<a-1;u++){const c=e[u];n.j[c]?s=n.j[c]:(s=new ti(r),s.jr=i.slice(),n.j[c]=s),n=s}return s=new ti(t),s.jr=i.slice(),n.j[e[a-1]]=s,s}function TN(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const lp={defaultProtocol:"http",events:null,format:EN,formatHref:EN,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function WS(n,e=null){let t=Of({},lp);n&&(t=Of(t,n instanceof WS?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}WS.prototype={o:lp,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:lp[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function EN(n){return n}function CV(n,e){this.t="token",this.v=n,this.tk=e}CV.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=lp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),a={},u=n.get("className",t,e),c=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),c&&(a.target=c),h&&(a.rel=h),p&&Of(a,p),{tagName:i,attributes:a,content:s,eventListeners:g}}};function X0(n,e){class t extends CV{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const bN=X0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),SN=X0("text"),pZ=X0("nl"),cg=X0("url",{isLink:!0,toHref(n=lp.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==ap&&n[1].t===Ga}}),es=n=>new ti(n);function mZ({groups:n}){const e=n.domain.concat([qy,$y,Ba,Gy,Ky,Wy,Yy,Qy,ns,jS,Od,Xy,Jy,Zy,Xs,t0,Dd,e0]),t=[Ga,qS,Qs,$S,Od,Md,GS,KS,Dy,Py,Id,Nd,Ny,Iy,Oy,My,Ly,Vy,Uy,By,zy,jy,Fy,Hy],r=[qy,HS,$y,Gy,Ky,Wy,Yy,Qy,ns,Id,Nd,Od,Xy,Jy,Zy,Md,Xs,t0,Dd,e0],i=es(),s=Ae(i,Dd);st(s,r,s),st(s,n.domain,s);const a=es(),u=es(),c=es();st(i,n.domain,a),st(i,n.scheme,u),st(i,n.slashscheme,c),st(a,r,s),st(a,n.domain,a);const h=Ae(a,Ba);Ae(s,Ba,h),Ae(u,Ba,h),Ae(c,Ba,h);const p=Ae(s,Qs);st(p,r,s),st(p,n.domain,s);const g=es();st(h,n.domain,g),st(g,n.domain,g);const _=Ae(g,Qs);st(_,n.domain,g);const A=es(bN);st(_,n.tld,A),st(_,n.utld,A),Ae(h,ap,A);const T=Ae(g,ns);Ae(T,ns,T),st(T,n.domain,g),st(A,n.domain,g),Ae(A,Qs,_),Ae(A,ns,T);const E=Ae(A,Ga);st(E,n.numeric,bN);const S=Ae(a,ns),x=Ae(a,Qs);Ae(S,ns,S),st(S,n.domain,a),st(x,r,s),st(x,n.domain,a);const P=es(cg);st(x,n.tld,P),st(x,n.utld,P),st(P,n.domain,a),st(P,r,s),Ae(P,Qs,x),Ae(P,ns,S),Ae(P,Ba,h);const z=Ae(P,Ga),H=es(cg);st(z,n.numeric,H);const V=es(cg),D=es();st(V,e,V),st(V,t,D),st(D,e,V),st(D,t,D),Ae(P,Xs,V),Ae(H,Xs,V);const O=Ae(u,Ga),I=Ae(c,Ga),k=Ae(I,Xs),B=Ae(k,Xs);st(u,n.domain,a),Ae(u,Qs,x),Ae(u,ns,S),st(c,n.domain,a),Ae(c,Qs,x),Ae(c,ns,S),st(O,n.domain,V),Ae(O,Xs,V),Ae(O,Md,V),st(B,n.domain,V),st(B,e,V),Ae(B,Xs,V);const U=[[Id,Nd],[Iy,Ny],[Oy,My],[Dy,Py],[Ly,Vy],[Uy,By],[zy,jy],[Fy,Hy]];for(let F=0;F<U.length;F++){const[L,Te]=U[F],be=Ae(V,L);Ae(D,L,be),Ae(be,Te,V);const Y=es(cg);st(be,e,Y);const X=es();st(be,t),st(Y,e,Y),st(Y,t,X),st(X,e,Y),st(X,t,X),Ae(Y,Te,V),Ae(X,Te,V)}return Ae(i,ap,P),Ae(i,FS,pZ),{start:i,tokens:SV}}function gZ(n,e,t){let r=t.length,i=0,s=[],a=[];for(;i<r;){let u=n,c=null,h=null,p=0,g=null,_=-1;for(;i<r&&!(c=u.go(t[i].t));)a.push(t[i++]);for(;i<r&&(h=c||u.go(t[i].t));)c=null,u=h,u.accepts()?(_=0,g=u):_>=0&&_++,i++,p++;if(_<0)i-=p,i<r&&(a.push(t[i]),i++);else{a.length>0&&(s.push(aT(SN,e,a)),a=[]),i-=_,p-=_;const A=g.t,T=t.slice(i-p,i);s.push(aT(A,e,T))}}return a.length>0&&s.push(aT(SN,e,a)),s}function aT(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const yZ=typeof console<"u"&&console&&console.warn||(()=>{}),_Z="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Kt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function vZ(){return ti.groups={},Kt.scanner=null,Kt.parser=null,Kt.tokenQueue=[],Kt.pluginQueue=[],Kt.customSchemes=[],Kt.initialized=!1,Kt}function wN(n,e=!1){if(Kt.initialized&&yZ(`linkifyjs: already initialized - will not register custom scheme "${n}" ${_Z}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Kt.customSchemes.push([n,e])}function AZ(){Kt.scanner=hZ(Kt.customSchemes);for(let n=0;n<Kt.tokenQueue.length;n++)Kt.tokenQueue[n][1]({scanner:Kt.scanner});Kt.parser=mZ(Kt.scanner.tokens);for(let n=0;n<Kt.pluginQueue.length;n++)Kt.pluginQueue[n][1]({scanner:Kt.scanner,parser:Kt.parser});return Kt.initialized=!0,Kt}function YS(n){return Kt.initialized||AZ(),gZ(Kt.parser.start,n,wV(Kt.scanner.start,n))}YS.scan=wV;function RV(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new WS(t),i=YS(n),s=[];for(let a=0;a<i.length;a++){const u=i[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}function TZ(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function EZ(n){return new Zn({key:new hi("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),s=e.some(h=>h.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,u=$Q(t.doc,[...e]);if(ZQ(u).forEach(({newRange:h})=>{const p=KQ(r.doc,h,A=>A.isTextblock);let g,_;if(p.length>1?(g=p[0],_=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):p.length&&r.doc.textBetween(h.from,h.to," "," ").endsWith(" ")&&(g=p[0],_=r.doc.textBetween(g.pos,h.to,void 0," ")),g&&_){const A=_.split(" ").filter(x=>x!=="");if(A.length<=0)return!1;const T=A[A.length-1],E=g.pos+_.lastIndexOf(T);if(!T)return!1;const S=YS(T).map(x=>x.toObject(n.defaultProtocol));if(!TZ(S))return!1;S.filter(x=>x.isLink).map(x=>({...x,from:E+x.start+1,to:E+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>n.validate(x.value)).filter(x=>n.shouldAutoLink(x.value)).forEach(x=>{VS(x.from,x.to,r.doc).some(P=>P.mark.type===n.type)||a.addMark(x.from,x.to,n.type.create({href:x.href}))})}}),!!a.steps.length)return a}})}function bZ(n){return new Zn({key:new hi("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=r.target;const u=[];for(;a.nodeName!=="DIV";)u.push(a),a=a.parentNode;if(!u.find(_=>_.nodeName==="A"))return!1;const c=hV(e.state,n.type.name),h=r.target,p=(i=h==null?void 0:h.href)!==null&&i!==void 0?i:c.href,g=(s=h==null?void 0:h.target)!==null&&s!==void 0?s:c.target;return h&&p?(window.open(p,g),!0):!1}}})}function SZ(n){return new Zn({key:new hi("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:a}=s;if(a)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const c=RV(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!c?!1:n.editor.commands.setMark(n.type,{href:c.href})}}})}const wZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function au(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(wZ,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const CZ=yo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){wN(n);return}wN(n.scheme,n.optionalSlashes)})},onDestroy(){vZ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!au(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!au(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!au(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Jn(this.options.HTMLAttributes,n),0]:["a",Jn(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[$u({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=RV(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!au(a,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(EZ({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!au(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(bZ({type:this.type})),this.options.linkOnPaste&&n.push(SZ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}});function xV({onChange:n,content:e}){const t=XX({extensions:[eZ,nZ,rZ.configure({placeholder:"Start typing here..."}),CZ],content:e,onUpdate:({editor:i})=>{n(i.getHTML())}});if(!t)return null;const r=i=>{i.preventDefault()};return w.jsxs("div",{className:"editor-wrapper dark-silver-bg",children:[w.jsxs("div",{className:"toolbar",children:[w.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleBold().run()},className:t.isActive("bold")?"active":"",children:"Bold"}),w.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleItalic().run()},className:t.isActive("italic")?"active":"",children:"Italic"}),w.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleHeading({level:1}).run()},className:t.isActive("heading",{level:1})?"active":"",children:"H1"}),w.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleHeading({level:2}).run()},className:t.isActive("heading",{level:2})?"active":"",children:"H2"}),w.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().toggleBulletList().run()},className:t.isActive("bulletList")?"active":"",children:"Bullet List"}),w.jsx("button",{type:"button",onClick:i=>{r(i);const s=t.getAttributes("link").href;let a=window.prompt("Enter URL",s||"");a!==null&&(a&&!a.startsWith("http://")&&!a.startsWith("https://")&&(a=`https://${a}`),a===""?t.chain().focus().unsetLink().run():t.chain().focus().setLink({href:a}).run())},className:t.isActive("link")?"active":"",children:"Link"}),w.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().undo().run()},children:"Undo"}),w.jsx("button",{type:"button",onClick:i=>{r(i),t.chain().focus().redo().run()},children:"Redo"})]}),w.jsx(jX,{editor:t,className:"editor-content"})]})}const kV="/assets/menu-DAMTkw-O.png",QS="/assets/check-BWpW0xC-.png",IV="/assets/description-C5Kf4JsE.png",NV="/assets/image-CvEaPl9Q.png",OV="/assets/content-writing-Co6lRQM-.png",MV="/assets/shuffle-BkdvClfH.png";function RZ(){const[n,e]=$.useState(null),[t,r]=$.useState({}),[i,s]=$.useState(!1),[a,u]=$.useState(!1),[c,h]=$.useState([]),[p,g]=$.useState(null),[_,A]=$.useState(null),[T,E]=$.useState(null),[S,x]=$.useState([]),[P,z]=$.useState(null),[H,V]=$.useState(null),D=[{img:IV,type:"Description",label:"Description"},{img:MV,type:"Redirect",label:"Redirect Link"},{img:OV,type:"Article",label:"Article Content"},{img:NV,type:"Image",label:"Image Upload"}],O=U=>{h(U==="Redirect"?F=>[...F,{type:U,value:{partName:"",partUrl:""}}]:F=>[...F,{type:U,value:""}]),u(!1)},I=(U,F,L=null)=>{const Te=[...c];if(L&&typeof Te[U].value=="object"?Te[U].value={...Te[U].value,[L]:F}:Te[U].value=F,h(Te),Te[U].type==="Image"&&F instanceof File){const be=URL.createObjectURL(F);r(Y=>({...Y,[U]:be}))}},k=(U,F)=>{switch(U.type){case"Description":case"Article":return w.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[w.jsx("label",{style:{fontSize:"1.5rem"},className:"input-label outfit-font",children:U.type}),w.jsx(xV,{onChange:L=>I(F,L)})]},F);case"Redirect":return w.jsxs("div",{style:{marginBottom:"100px",padding:"30px 3%"},className:"display-column",children:[w.jsx("label",{className:"input-label outfit-font",children:"Redirect Name"}),w.jsx("input",{className:"input",type:"text",value:U.value.name,placeholder:"Part 3, or Part 1",style:{marginBottom:"30px",padding:"10px 20px"},onChange:L=>I(F,L.target.value,"partName")}),w.jsx("label",{className:"input-label outfit-font",children:"Redirect Url"}),w.jsx("input",{className:"input",type:"url",style:{padding:"10px 20px"},value:U.value.url,onChange:L=>I(F,L.target.value,"partUrl")})]},F);case"Image":return w.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[w.jsx("label",{className:"input-label outfit-font",children:"Upload Image"}),w.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:L=>I(F,L.target.files[0])}),t[F]&&w.jsx("img",{src:t[F],alt:"Preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]},F);default:return null}},B=async U=>{var L,Te;U.preventDefault(),s(!0);let F=null;try{const be=document.querySelector('input[type="file"]');be!=null&&be.files[0]&&(F=await my(be.files[0]));const Y=await Promise.all(c.map(async ce=>{if(ce.type==="Image"&&ce.value instanceof File){const ae=await my(ce.value);return{...ce,value:ae}}return ce})),X=c.find(ce=>ce.type==="Redirect"),le=((L=X==null?void 0:X.value)==null?void 0:L.partName)||null,Ne=((Te=X==null?void 0:X.value)==null?void 0:Te.partUrl)||null,j={title:p,subTitle:P,author:_,readTime:T,part:H,categories:S,imgUrl,content:c,datePosted:serverTimestamp()},re=await V$(j);alert(`Blog created successfully! ID: ${re}`)}catch(be){console.error("Error submitting blog:",be),alert("Failed to submit blog")}finally{s(!1)}};return w.jsxs("section",{className:"create-blog-main",children:[w.jsx("h1",{className:"outfit-font",children:"Create a Blog"}),w.jsx("div",{className:"display-column",children:w.jsxs("form",{className:"form",children:[w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Title:"}),w.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>g(U.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Category Title (optional):"}),w.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>z(U.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Part Number (optional):"}),w.jsx("input",{className:"input-part",type:"number",onChange:U=>V(U.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Author:"}),w.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>A(U.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Read Time:"}),w.jsx("input",{className:"input playfair-font",type:"text",onChange:U=>E(U.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Categories:"}),w.jsx("input",{className:"input playfair-font",type:"text",placeholder:"e.g. Monday Devotion, Tuesday Article",onChange:U=>x(U.target.value.split(",").map(F=>F.trim()).filter(F=>F!==""))}),S.length>0&&w.jsxs("div",{className:"category-container outfit-font",children:["Categories:",S.map(U=>w.jsx("div",{className:"cat silver-bg",children:U},U))]})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Photo:"}),w.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:U=>{const F=U.target.files[0];F&&e(URL.createObjectURL(F))}}),n&&w.jsx("img",{src:n,alt:"Main preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]}),w.jsxs("div",{className:"form-array-container",children:[c.map((U,F)=>k(U,F)),w.jsxs("div",{className:"add-to-array",children:[w.jsx("img",{className:"form-icon menu-icon off-white-bg",src:kV,onClick:()=>u(!a)}),i?w.jsx("div",{className:"post-loader-container",children:w.jsx(bp,{})}):w.jsx("img",{className:"form-icon submit-icon off-white-bg",src:QS,onClick:B}),w.jsx("div",{className:`expanded-icons ${a?"show":""}`,children:D.map((U,F)=>w.jsx("img",{src:U.img,title:U.label,className:"form-icon",onClick:()=>O(U.type)},F))})]})]})]})})]})}const n0="/assets/x-button-BIiXIhO3.png";function xZ(){const{id:n}=o0(),[e,t]=$.useState(null),[r,i]=$.useState({}),[s,a]=$.useState(!1),[u,c]=$.useState(!1),[h,p]=$.useState([]),[g,_]=$.useState(""),[A,T]=$.useState(""),[E,S]=$.useState(""),[x,P]=$.useState([]),[z,H]=$.useState([]),[V,D]=$.useState(""),[O,I]=$.useState(""),[k,B]=$.useState(null),U=[{img:IV,type:"Description",label:"Description"},{img:MV,type:"Redirect",label:"Redirect Link"},{img:OV,type:"Article",label:"Article Content"},{img:NV,type:"Image",label:"Image Upload"}];$.useEffect(()=>{(async()=>{a(!0);try{const le=ra(Rs,"blogs",n),Ne=await R0(le);if(Ne.exists()){const j=Ne.data(),re=Array.isArray(j.content)?j.content.map(ce=>typeof ce.value=="string"||ce.type==="Redirect"&&typeof ce.value=="object"&&ce.value!==null?ce:{...ce,value:ce.type==="Redirect"?{partName:"",partUrl:""}:""}):[];_(j.title||""),D(j.subTitle||""),T(j.author||""),S(j.readTime||""),I(j.part||""),H(j.categories||[]),B(j.imgUrl||null),p(re),t(j.imgUrl||null)}else console.error("No such document!")}catch(le){console.error("Error fetching blog:",le)}a(!1)})()},[n]);const F=X=>{p(X==="Redirect"?le=>[...le,{type:X,value:{partName:"",partUrl:""}}]:le=>[...le,{type:X,value:""}]),c(!1)},L=X=>{P(le=>le.filter(Ne=>Ne!==X)),H(le=>le.filter(Ne=>Ne!==X))},Te=(X,le,Ne=null)=>{const j=[...h];if(Ne&&typeof j[X].value=="object"?j[X].value={...j[X].value,[Ne]:le}:j[X].value=le,p(j),j[X].type==="Image"&&le instanceof File){const re=URL.createObjectURL(le);i(ce=>({...ce,[X]:re}))}},be=(X,le)=>{var Ne,j;switch(X.type){case"Description":case"Article":return w.jsxs("div",{style:{marginBottom:"100px"},className:"display-column",children:[w.jsx("label",{className:"input-label outfit-font",style:{fontSize:"1.5rem"},children:X.type}),w.jsx(xV,{content:X.value,onChange:ce=>Te(le,ce)})]},le);case"Redirect":return w.jsxs("div",{className:"display-column",style:{marginBottom:"100px",padding:"30px 3%"},children:[w.jsx("label",{className:"input-label outfit-font",children:"Redirect Name"}),w.jsx("input",{className:"input",type:"text",value:((Ne=X.value)==null?void 0:Ne.partName)||"",onChange:ce=>Te(le,ce.target.value,"partName"),placeholder:"Part 3, or Part 1",style:{marginBottom:"30px",padding:"10px 20px"}}),w.jsx("label",{className:"input-label outfit-font",children:"Redirect Url"}),w.jsx("input",{className:"input",type:"url",value:((j=X.value)==null?void 0:j.partUrl)||"",onChange:ce=>Te(le,ce.target.value,"partUrl"),style:{padding:"10px 20px"}})]},le);case"Image":const re=r[le]||(typeof X.value=="string"?X.value:null);return w.jsxs("div",{className:"display-column",style:{marginBottom:"100px"},children:[w.jsx("label",{className:"input-label outfit-font",children:"Upload Image"}),w.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:ce=>Te(le,ce.target.files[0])}),re&&w.jsx("img",{src:re,alt:"Preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]},le);default:return null}},Y=async X=>{var le,Ne;X.preventDefault(),a(!0);try{const j=document.querySelector('input[type="file"]');let re=k;j!=null&&j.files[0]&&(re=await my(j.files[0]));const ce=await Promise.all(h.map(async Wt=>{if(Wt.type==="Image"&&Wt.value instanceof File){const Nt=await my(Wt.value);return{...Wt,value:Nt}}return Wt})),ae=h.find(Wt=>Wt.type==="Redirect"),we=((le=ae==null?void 0:ae.value)==null?void 0:le.partName)||null,Re=((Ne=ae==null?void 0:ae.value)==null?void 0:Ne.partUrl)||null,Le=Array.from(new Set([...z||[],...x||[]])),$t={title:g,subTitle:V,author:A,readTime:E,part:O,imgUrl:re,content:ce,categories:Le,partName:we,partUrl:Re},St=ra(Rs,"blogs",n);await yp(St,$t),alert("Blog updated successfully!")}catch(j){console.error("Error updating blog:",j),alert("Failed to update blog")}finally{a(!1)}};return w.jsxs("section",{className:"create-blog-main",children:[w.jsx("h1",{className:"outfit-font",children:"Edit Blog"}),w.jsx("div",{className:"display-column",children:w.jsxs("form",{className:"form",children:[w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Title:"}),w.jsx("input",{className:"input playfair-font",type:"text",value:g,onChange:X=>_(X.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Category Title (optional):"}),w.jsx("input",{className:"input playfair-font",type:"text",value:V,onChange:X=>D(X.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Part Number (optional):"}),w.jsx("input",{className:"input-part",type:"number",value:O,onChange:X=>I(X.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Author:"}),w.jsx("input",{className:"input playfair-font",type:"text",value:A,onChange:X=>T(X.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Read Time:"}),w.jsx("input",{className:"input playfair-font",type:"text",value:E,onChange:X=>S(X.target.value)})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Categories:"}),w.jsx("input",{className:"input playfair-font",type:"text",onChange:X=>P(X.target.value.split(",").map(le=>le.trim()).filter(le=>le!==""))}),z.length>0&&w.jsxs("div",{className:"category-container outfit-font",children:[w.jsx("h1",{className:"outfit-font",children:"Categories:"}),z.map(X=>w.jsxs("div",{className:"cat1 silver-bg",children:[X,w.jsx("img",{src:n0,className:"del-button",onClick:()=>L(X)})]},X)),x.length>0&&w.jsx(w.Fragment,{children:x.map(X=>w.jsxs("div",{className:"cat1 outfit-font silver-bg",children:[X,w.jsx("img",{src:n0,className:"del-button",onClick:()=>L(X)})]},X))})]})]}),w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Photo:"}),w.jsx("input",{className:"input-file",type:"file",accept:"image/*",onChange:X=>{const le=X.target.files[0];le&&t(URL.createObjectURL(le))}}),e&&w.jsx("img",{src:e,alt:"Main preview",style:{maxWidth:"200px",marginTop:"10px",borderRadius:"8px"}})]}),w.jsxs("div",{className:"form-array-container",children:[h.map((X,le)=>be(X,le)),w.jsxs("div",{className:"add-to-array",children:[w.jsx("img",{className:"form-icon menu-icon off-white-bg",src:kV,onClick:()=>c(!u)}),s?w.jsx("div",{className:"post-loader-container",children:w.jsx(bp,{})}):w.jsx("img",{className:"form-icon submit-icon off-white-bg",src:QS,onClick:Y}),w.jsx("div",{className:`expanded-icons ${u?"show":""}`,children:U.map((X,le)=>w.jsx("img",{src:X.img,title:X.label,className:"form-icon",onClick:()=>F(X.type)},le))})]})]})]})})]})}function kZ(){return w.jsx("div",{className:"display-column",style:{padding:"40px 20px"},children:w.jsx(Cf,{nav:"editBlog",title:"Edit a Blog",maxCount:100})})}function IZ(){const[n,e]=$.useState([]),[t,r]=$.useState([]),[i,s]=$.useState(null),{triggerRefresh:a}=A2(),u=ra(Rs,"commonCat","YTLA8LnhCtzvU07csqsx");$.useEffect(()=>{(async()=>{const g=await R0(u);if(g.exists()){const _=g.data();e(_.categories||[])}})()},[]);const c=p=>{r(g=>g.filter(_=>_!==p)),e(g=>g.filter(_=>_!==p))},h=async p=>{p.preventDefault(),s(!0);try{const g=Array.from(new Set([...n,...t]));await yp(u,{categories:g}),a(),alert("Categories updated!")}catch(g){console.error("Failed to update categories:",g),alert("An error occurred while updating.")}finally{s(!1)}};return w.jsxs("section",{className:"edit-cat-main",children:[w.jsx("h1",{style:{fontSize:"2rem",marginBottom:"30px",marginTop:"50px"},className:"outfit-font",children:"Edit Common Categories"}),w.jsx("div",{className:"display-column",children:w.jsxs("form",{className:"form",onSubmit:h,children:[w.jsxs("div",{className:"input-container",children:[w.jsx("label",{className:"input-label outfit-font",children:"Add Categories (use comma to add category):"}),w.jsx("input",{className:"input playfair-font",type:"text",placeholder:"e.g. Monday Devotion, Tuesday Article",onChange:p=>r(p.target.value.split(",").map(g=>g.trim()).filter(g=>g!==""))}),n.length>0&&w.jsxs("div",{className:"category-container outfit-font",children:[w.jsx("h1",{className:"outfit-font",children:"Categories:"}),n.map(p=>w.jsxs("div",{className:"cat1 silver-bg",children:[p,w.jsx("img",{src:n0,className:"del-button",onClick:()=>c(p)})]},p)),t.length>0&&w.jsx(w.Fragment,{children:t.map(p=>w.jsxs("div",{className:"cat1 outfit-font silver-bg",children:[p,w.jsx("img",{src:n0,className:"del-button",onClick:()=>c(p)})]},p))})]})]}),i?w.jsx("div",{className:"post-loader-container",children:w.jsx(bp,{})}):w.jsx("img",{src:QS,onClick:p=>h(p),className:"form-icon  off-white-bg",alt:"submit"})]})})]})}function NZ(){const[n,e]=$.useState([]),{category:t}=o0(),[r,i]=$.useState(!0),[s,a]=$.useState([]),[u,c]=$.useState(null);return $.useEffect(()=>{(async()=>{i(!0),c(!1);try{const p=await T2();console.log("refresh",t),console.log("data",p);const g=[...p].sort((_,A)=>{var S,x,P,z;if(typeof _.likes=="number"&&typeof A.likes=="number")return(A.likes||0)-(_.likes||0);const T=((x=(S=_.datePosted)==null?void 0:S.toDate)==null?void 0:x.call(S))||new Date(0);return(((z=(P=A.datePosted)==null?void 0:P.toDate)==null?void 0:z.call(P))||new Date(0))-T});if(e(g),t){const _=t.trim().toLowerCase();if(_){const A=g.filter(T=>Array.isArray(T.categories)&&T.categories.some(E=>E.toLowerCase()===_));A.length>0?(a(A),c(!1)):(a([]),c(!0),console.warn(`No blogs found with category: ${_}`))}else a([]),c(!0)}else a([]),c(!0)}catch(p){console.error("Failed to fetch blogs:",p)}finally{i(!1)}})()},[t]),w.jsx("div",{className:"display-column",style:{padding:"40px 20px"},children:r?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"title-container",children:[w.jsxs("div",{className:"info-container",children:[w.jsx("h1",{className:"outfit-font",children:"Blogs with category:"}),w.jsx("h1",{className:"outfit-font",children:` ${t}`})]}),w.jsx("div",{className:"line-blog"})]}),w.jsx("div",{style:{marginTop:"100px",marginBottom:"100px"},children:w.jsx(bp,{})})]}):w.jsx(w.Fragment,{children:u?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"title-container",children:[w.jsxs("div",{className:"info-container",children:[w.jsx("h1",{className:"outfit-font",children:"Blogs with category:"}),w.jsx("h1",{className:"outfit-font",children:` ${t}`})]}),w.jsx("div",{className:"line-blog"})]}),w.jsx("h1",{className:"outfit-font display-column",style:{textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"No blogs were found with that category"})]}):w.jsx(w.Fragment,{children:w.jsx(Cf,{blogArray:s,nav:"singleBlog",title:"Blogs with category: ",subTitle:` ${t}`,maxCount:100})})})})}const OZ={element:w.jsx(NZ,{})},MZ=l4([{path:"/",element:w.jsx(D$,{}),errorElement:w.jsx(P$,{}),children:[{path:"/",...$$},{path:"/about",...Q$},{path:"/singleBlog/:id",...EG},{path:"/login",...SG},{path:"/searchPage/:category",...OZ},{path:"/dashboard",element:w.jsx(Zh,{children:w.jsx(DG,{})})},{path:"/createBlog",element:w.jsx(Zh,{children:w.jsx(RZ,{})})},{path:"/editBlog/:id",element:w.jsx(Zh,{children:w.jsx(xZ,{})})},{path:"/editDirectory",element:w.jsx(Zh,{children:w.jsx(kZ,{})})},{path:"/editCat",element:w.jsx(Zh,{children:w.jsx(IZ,{})})}]}]);hB.createRoot(document.getElementById("root")).render(w.jsx($.StrictMode,{children:w.jsx(wG,{children:w.jsx(O$,{children:w.jsx(T4,{router:MZ})})})}));
